<START_FILE>
<a> </a> 
<a> package org . atmosphere . <RARE_TOKEN> ; </a> 
<a> import com . sun . <RARE_TOKEN> . http . servlet . <RARE_TOKEN> ; </a> 
<a> import com . sun . <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . container . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . cpr . AtmosphereHandler ; </a> 
<a> import org . atmosphere . cpr . AtmosphereServlet ; </a> 
<a> import org . atmosphere . cpr . FrameworkConfig ; </a> 
<a> import javax . servlet . <RARE_TOKEN> ; </a> 
<a> import java . io . File ; </a> 
<a> import java . net . <RARE_TOKEN> ; </a> 
<a> import java . net . <RARE_TOKEN> ; </a> 
<a> import java . net . URL ; </a> 
<a> import java . net . <RARE_TOKEN> ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> private String <RARE_TOKEN> = null ; </a> 
<a> private final AtmosphereServlet <RARE_TOKEN> = new <RARE_TOKEN> ( ) ; </a> 
<a> @ Override </a> 
<a> public void start ( ) { </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> super . start ( ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( boolean <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( String path , AtmosphereHandler <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( path , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public String <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( String <RARE_TOKEN> ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> private static class <RARE_TOKEN> extends AtmosphereServlet { </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> ( true ) ; </a> 
<a> cometSupport = new <RARE_TOKEN> ( <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> , <RARE_TOKEN> <RARE_TOKEN> ) </a> 
<a> throws <RARE_TOKEN> , <RARE_TOKEN> { </a> 
<a> try { </a> 
<a> Class . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } catch ( Exception ex ) { </a> 
<a> super . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> return ; </a> 
<a> } </a> 
<a> String <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( FrameworkConfig . <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> URL <RARE_TOKEN> = <RARE_TOKEN> . getResource ( FrameworkConfig . <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> == null ) return ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . getPath ( ) ; </a> 
<a> } </a> 
<a> File f = new File ( <RARE_TOKEN> ) ; </a> 
<a> if ( ! f . <RARE_TOKEN> ( ) ) { </a> 
<a> String <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> if ( System . getProperty ( <RARE_TOKEN> ) . <RARE_TOKEN> ( ) . startsWith ( <RARE_TOKEN> ) ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( "/" , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> int index = <RARE_TOKEN> . indexOf ( <RARE_TOKEN> ) ; </a> 
<a> if ( index < 1 ) { </a> 
<a> index = <RARE_TOKEN> . length ( ) ; </a> 
<a> } </a> 
<a> String <RARE_TOKEN> = <RARE_TOKEN> . substring ( 0 , index ) ; </a> 
<a> f = new File ( <RARE_TOKEN> + <RARE_TOKEN> . <RARE_TOKEN> ( ) + FrameworkConfig . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . <RARE_TOKEN> ; </a> 
<a> import com . google . inject . <RARE_TOKEN> ; </a> 
<a> import com . google . inject . <RARE_TOKEN> ; </a> 
<a> import com . google . inject . <RARE_TOKEN> ; </a> 
<a> import com . google . inject . name . Names ; </a> 
<a> import org . atmosphere . cpr . ApplicationConfig ; </a> 
<a> import org . atmosphere . cpr . AtmosphereServlet ; </a> 
<a> import org . atmosphere . cpr . FrameworkConfig ; </a> 
<a> import org . atmosphere . handler . <RARE_TOKEN> ; </a> 
<a> import org . slf4j . Logger ; </a> 
<a> import org . slf4j . LoggerFactory ; </a> 
<a> import javax . servlet . ServletConfig ; </a> 
<a> import javax . servlet . ServletException ; </a> 
<a> import java . util . Map ; </a> 
<a> public class <RARE_TOKEN> extends AtmosphereServlet { </a> 
<a> private static final Logger logger = LoggerFactory . getLogger ( <RARE_TOKEN> . class ) ; </a> 
<a> public static final String <RARE_TOKEN> = <RARE_TOKEN> . class . getName ( ) + <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> protected static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private boolean <RARE_TOKEN> = false ; </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( ServletConfig sc ) throws ServletException { </a> 
<a> super . <RARE_TOKEN> ( sc ) ; </a> 
<a> if ( ! <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( sc ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected boolean <RARE_TOKEN> ( ServletConfig sc ) { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = ( <RARE_TOKEN> ) config . getServletContext ( ) . getAttribute ( <RARE_TOKEN> . class . getName ( ) ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = <RARE_TOKEN> . getInstance ( <RARE_TOKEN> . class ) ; </a> 
<a> <RARE_TOKEN> ( false ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> ( FrameworkConfig . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( true ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> if ( sc . getServletContext ( ) . getAttribute ( <RARE_TOKEN> ) == null ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( ) . <RARE_TOKEN> ( false ) ; </a> 
<a> String mapping = sc . getInitParameter ( ApplicationConfig . <RARE_TOKEN> ) ; </a> 
<a> if ( mapping == null ) { </a> 
<a> mapping = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> try { </a> 
<a> Map < String , String > <RARE_TOKEN> = <RARE_TOKEN> . getInstance ( </a> 
<a> <RARE_TOKEN> . get ( new <RARE_TOKEN> < Map < String , String > > ( ) { </a> 
<a> } , Names . <RARE_TOKEN> ( <RARE_TOKEN> ) ) ) ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> for ( String p : <RARE_TOKEN> . <RARE_TOKEN> ( ) ) { </a> 
<a> <RARE_TOKEN> ( p , <RARE_TOKEN> . get ( p ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } catch ( Exception ex ) { </a> 
<a> logger . debug ( "failed to add <RARE_TOKEN> init parameters to <RARE_TOKEN> <RARE_TOKEN> , ex ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( mapping , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = true ; </a> 
<a> return true ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> package org . atmosphere . <RARE_TOKEN> ; </a> 
<a> import com . google . inject . <RARE_TOKEN> ; </a> 
<a> import com . google . inject . <RARE_TOKEN> ; </a> 
<a> import com . google . inject . <RARE_TOKEN> ; </a> 
<a> import com . google . inject . <RARE_TOKEN> ; </a> 
<a> import com . google . inject . servlet . <RARE_TOKEN> ; </a> 
<a> import com . sun . jersey . <RARE_TOKEN> . core . <RARE_TOKEN> ; </a> 
<a> import com . sun . jersey . <RARE_TOKEN> . core . <RARE_TOKEN> ; </a> 
<a> import com . sun . jersey . core . <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import com . sun . jersey . core . <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import com . sun . jersey . <RARE_TOKEN> . <RARE_TOKEN> . container . <RARE_TOKEN> ; </a> 
<a> import com . sun . jersey . <RARE_TOKEN> . container . <RARE_TOKEN> ; </a> 
<a> import com . sun . jersey . <RARE_TOKEN> . container . servlet . <RARE_TOKEN> ; </a> 
<a> import com . sun . jersey . <RARE_TOKEN> . container . servlet . <RARE_TOKEN> ; </a> 
<a> import javax . servlet . ServletException ; </a> 
<a> import java . util . Map ; </a> 
<a> @ <RARE_TOKEN> </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> private static final long serialVersionUID = <RARE_TOKEN> ; </a> 
<a> private final <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> public <RARE_TOKEN> ( <RARE_TOKEN> config , <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> super ( config , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public Map < <RARE_TOKEN> , <RARE_TOKEN> > <RARE_TOKEN> ( ) { </a> 
<a> Map < <RARE_TOKEN> , <RARE_TOKEN> > m = super . <RARE_TOKEN> ( ) ; </a> 
<a> m . put ( <RARE_TOKEN> . <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> return m ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ <RARE_TOKEN> </a> 
<a> public <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected <RARE_TOKEN> <RARE_TOKEN> ( Map < String , Object > <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> ) throws ServletException { </a> 
<a> return new <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( <RARE_TOKEN> config , <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( config , new <RARE_TOKEN> ( config , <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> public final class <RARE_TOKEN> implements <RARE_TOKEN> { </a> 
<a> @ Override </a> 
<a> public void inject ( Object o ) { </a> 
<a> com . google . inject . <RARE_TOKEN> <RARE_TOKEN> = ( com . google . inject . <RARE_TOKEN> ) </a> 
<a> <RARE_TOKEN> . getServletContext ( ) . getAttribute ( com . google . inject . <RARE_TOKEN> . class . getName ( ) ) ; </a> 
<a> if ( <RARE_TOKEN> == null ) </a> 
<a> throw new IllegalStateException ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> in current <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( o ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . <RARE_TOKEN> ; </a> 
<a> import com . google . inject . <RARE_TOKEN> ; </a> 
<a> import javax . servlet . ServletConfig ; </a> 
<a> import javax . servlet . ServletException ; </a> 
<a> @ <RARE_TOKEN> </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( ServletConfig sc ) throws ServletException { </a> 
<a> sc . getServletContext ( ) . setAttribute ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> super . <RARE_TOKEN> ( sc ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import com . <RARE_TOKEN> . http . client . AsyncHttpClient ; </a> 
<a> import com . <RARE_TOKEN> . http . client . Response ; </a> 
<a> import com . sun . <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import com . sun . <RARE_TOKEN> . http . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import com . sun . <RARE_TOKEN> . http . servlet . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . container . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . cpr . AtmosphereServlet ; </a> 
<a> import org . atmosphere . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import org . slf4j . Logger ; </a> 
<a> import org . slf4j . LoggerFactory ; </a> 
<a> import org . testng . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import org . testng . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import org . testng . <RARE_TOKEN> . Test ; </a> 
<a> import java . util . concurrent . TimeUnit ; </a> 
<a> import static org . testng . Assert . assertEquals ; </a> 
<a> import static org . testng . Assert . assertNotNull ; </a> 
<a> import static org . testng . Assert . assertTrue ; </a> 
<a> import static org . testng . Assert . fail ; </a> 
<a> public class <RARE_TOKEN> { </a> 
<a> private static final Logger logger = LoggerFactory . getLogger ( <RARE_TOKEN> . class ) ; </a> 
<a> protected static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> protected <RARE_TOKEN> ws ; </a> 
<a> protected <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> protected AtmosphereServlet atmoServlet ; </a> 
<a> public String urlTarget ; </a> 
<a> public int port ; </a> 
<a> public static class <RARE_TOKEN> { </a> 
<a> public static int <RARE_TOKEN> ( final String <RARE_TOKEN> , int <RARE_TOKEN> ) { </a> 
<a> if ( null == <RARE_TOKEN> ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> String <RARE_TOKEN> = System . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> if ( null != <RARE_TOKEN> ) { </a> 
<a> try { </a> 
<a> return Integer . parseInt ( <RARE_TOKEN> ) ; </a> 
<a> } catch ( <RARE_TOKEN> e ) { </a> 
<a> } </a> 
<a> } </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ <RARE_TOKEN> ( <RARE_TOKEN> = true ) </a> 
<a> public void <RARE_TOKEN> ( ) throws Exception { </a> 
<a> port = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> urlTarget = <RARE_TOKEN> + port + <RARE_TOKEN> ; </a> 
<a> atmoServlet = new <RARE_TOKEN> ( ) ; </a> 
<a> atmoServlet . <RARE_TOKEN> ( <RARE_TOKEN> , this . getClass ( ) . <RARE_TOKEN> ( ) . getName ( ) ) ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ <RARE_TOKEN> ( <RARE_TOKEN> = true ) </a> 
<a> public void <RARE_TOKEN> ( ) throws Exception { </a> 
<a> if ( atmoServlet != null ) atmoServlet . destroy ( ) ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Test ( timeOut = <RARE_TOKEN> ) </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> logger . info ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> AsyncHttpClient c = new AsyncHttpClient ( ) ; </a> 
<a> try { </a> 
<a> long <RARE_TOKEN> = System . currentTimeMillis ( ) ; </a> 
<a> Response r = c . prepareGet ( urlTarget ) . execute ( ) . get ( 10 , TimeUnit . SECONDS ) ; </a> 
<a> assertNotNull ( r ) ; </a> 
<a> assertEquals ( r . <RARE_TOKEN> ( ) , 200 ) ; </a> 
<a> String resume = r . <RARE_TOKEN> ( ) ; </a> 
<a> assertEquals ( resume , <RARE_TOKEN> ) ; </a> 
<a> long current = System . currentTimeMillis ( ) - <RARE_TOKEN> ; </a> 
<a> assertTrue ( current > <RARE_TOKEN> && current < <RARE_TOKEN> ) ; </a> 
<a> } catch ( Exception e ) { </a> 
<a> logger . error ( <RARE_TOKEN> failed" , e ) ; </a> 
<a> fail ( e . getMessage ( ) ) ; </a> 
<a> } </a> 
<a> c . close ( ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> atmoServlet . <RARE_TOKEN> ( new <RARE_TOKEN> ( atmoServlet . <RARE_TOKEN> ( ) ) ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( ) throws Exception { </a> 
<a> ws = new <RARE_TOKEN> ( port ) ; </a> 
<a> <RARE_TOKEN> = new <RARE_TOKEN> ( ) ; </a> 
<a> ws . <RARE_TOKEN> ( new <RARE_TOKEN> ( ) ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( atmoServlet ) ; </a> 
<a> ws . <RARE_TOKEN> ( <RARE_TOKEN> , new String [ ] { <RARE_TOKEN> } ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> . class . getName ( ) ) ; </a> 
<a> ws . start ( ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( ) throws Exception { </a> 
<a> ws . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import com . google . inject . <RARE_TOKEN> ; </a> 
<a> import com . google . inject . <RARE_TOKEN> ; </a> 
<a> import com . google . inject . <RARE_TOKEN> ; </a> 
<a> import com . google . inject . name . Names ; </a> 
<a> import com . google . inject . servlet . <RARE_TOKEN> ; </a> 
<a> import com . google . inject . servlet . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import java . util . Collections ; </a> 
<a> import java . util . Map ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> @ Override </a> 
<a> protected <RARE_TOKEN> <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> . <RARE_TOKEN> ( new <RARE_TOKEN> ( ) { </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( ) { </a> 
<a> bind ( <RARE_TOKEN> . class ) ; </a> 
<a> bind ( new <RARE_TOKEN> < Map < String , String > > ( ) { </a> 
<a> } ) . <RARE_TOKEN> ( Names . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ) ) . <RARE_TOKEN> ( </a> 
<a> Collections . < String , String > <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . gwt . client ; </a> 
<a> import com . google . gwt . core . client . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . core . client . GWT ; </a> 
<a> import com . google . gwt . core . client . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . core . client . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . event . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . user . client . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . user . client . rpc . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . gwt . client . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . gwt . client . <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . gwt . client . <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . gwt . client . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . gwt . client . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import java . io . Serializable ; </a> 
<a> import java . util . ArrayList ; </a> 
<a> import java . util . List ; </a> 
<a> import java . util . logging . Level ; </a> 
<a> import java . util . logging . Logger ; </a> 
<a> public class <RARE_TOKEN> { </a> 
<a> private enum <RARE_TOKEN> { </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> </a> 
<a> } </a> 
<a> private String url ; </a> 
<a> private final <RARE_TOKEN> serializer ; </a> 
<a> private final <RARE_TOKEN> listener ; </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> private boolean running ; </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> private List < Object > <RARE_TOKEN> ; </a> 
<a> private static final Object <RARE_TOKEN> = new Object ( ) ; </a> 
<a> private static final Object <RARE_TOKEN> = new Object ( ) ; </a> 
<a> private int <RARE_TOKEN> ; </a> 
<a> private int <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private int <RARE_TOKEN> = 1000 ; </a> 
<a> private boolean <RARE_TOKEN> = false ; </a> 
<a> private Logger logger = Logger . getLogger ( getClass ( ) . getName ( ) ) ; </a> 
<a> private <RARE_TOKEN> < Void > <RARE_TOKEN> = new <RARE_TOKEN> < Void > ( ) { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( Throwable <RARE_TOKEN> ) { </a> 
<a> logger . log ( Level . <RARE_TOKEN> , "Failed to post <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( Void result ) { </a> 
<a> if ( logger . <RARE_TOKEN> ( Level . <RARE_TOKEN> ) ) { </a> 
<a> logger . log ( Level . <RARE_TOKEN> , <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } ; </a> 
<a> public <RARE_TOKEN> ( String url , <RARE_TOKEN> listener ) { </a> 
<a> this ( url , null , listener ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( String url , <RARE_TOKEN> serializer , <RARE_TOKEN> listener ) { </a> 
<a> this ( url , serializer , listener , false ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( String url , <RARE_TOKEN> serializer , <RARE_TOKEN> listener , boolean <RARE_TOKEN> ) { </a> 
<a> this . url = url ; </a> 
<a> this . serializer = serializer ; </a> 
<a> this . listener = listener ; </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = new <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> public String <RARE_TOKEN> ( ) { </a> 
<a> return url ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( String url ) { </a> 
<a> this . url = url ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> <RARE_TOKEN> ( ) { </a> 
<a> return serializer ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> <RARE_TOKEN> ( ) { </a> 
<a> return listener ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( int <RARE_TOKEN> ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public int <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( int <RARE_TOKEN> ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public int <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return running ; </a> 
<a> } </a> 
<a> public int <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public void post ( Serializable message ) { </a> 
<a> <RARE_TOKEN> . post ( message , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public void post ( Serializable message , <RARE_TOKEN> < Void > callback ) { </a> 
<a> <RARE_TOKEN> . post ( message , callback ) ; </a> 
<a> } </a> 
<a> public void post ( List < Serializable > messages ) { </a> 
<a> <RARE_TOKEN> . post ( messages , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public void post ( List < Serializable > messages , <RARE_TOKEN> < Void > callback ) { </a> 
<a> <RARE_TOKEN> . post ( messages , callback ) ; </a> 
<a> } </a> 
<a> public void broadcast ( Serializable message ) { </a> 
<a> <RARE_TOKEN> . broadcast ( message ) ; </a> 
<a> } </a> 
<a> public void broadcast ( List < Serializable > messages ) { </a> 
<a> <RARE_TOKEN> . broadcast ( messages ) ; </a> 
<a> } </a> 
<a> public void start ( ) { </a> 
<a> <RARE_TOKEN> . get ( ) . <RARE_TOKEN> ( new <RARE_TOKEN> . <RARE_TOKEN> ( ) { </a> 
<a> @ Override </a> 
<a> public void execute ( ) { </a> 
<a> if ( ! running ) { </a> 
<a> running = true ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> handler = new <RARE_TOKEN> ( ) ; </a> 
<a> final <RARE_TOKEN> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( handler ) ; </a> 
<a> final <RARE_TOKEN> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( handler ) ; </a> 
<a> <RARE_TOKEN> = new <RARE_TOKEN> ( ) { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> } </a> 
<a> private class <RARE_TOKEN> implements <RARE_TOKEN> . <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( <RARE_TOKEN> event ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( <RARE_TOKEN> event ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( ) { </a> 
<a> if ( ! done ) { </a> 
<a> done = true ; </a> 
<a> logger . log ( Level . <RARE_TOKEN> , <RARE_TOKEN> <RARE_TOKEN> client <RARE_TOKEN> of <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private boolean done = false ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> if ( running ) { </a> 
<a> running = false ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> = null ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> . connect ( ) ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> = null ; </a> 
<a> <RARE_TOKEN> . disconnect ( ) ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> . disconnect ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( int <RARE_TOKEN> , int <RARE_TOKEN> , <RARE_TOKEN> transport ) { </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> if ( transport == <RARE_TOKEN> ) { </a> 
<a> if ( <RARE_TOKEN> == <RARE_TOKEN> . <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } else if ( <RARE_TOKEN> == <RARE_TOKEN> . <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> . disconnect ( ) ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } else { </a> 
<a> throw new IllegalStateException ( "Unexpected <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } else { </a> 
<a> throw new IllegalStateException ( "Unexpected connection from <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } else { </a> 
<a> listener . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( <RARE_TOKEN> transport ) { </a> 
<a> if ( <RARE_TOKEN> == null && transport == <RARE_TOKEN> ) { </a> 
<a> listener . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( <RARE_TOKEN> transport ) { </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> if ( transport == <RARE_TOKEN> ) { </a> 
<a> if ( <RARE_TOKEN> != <RARE_TOKEN> . <RARE_TOKEN> ) { </a> 
<a> throw new IllegalStateException ( "Unexpected <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> GWT . log ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> transport <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } else { </a> 
<a> listener . <RARE_TOKEN> ( ) ; </a> 
<a> if ( running ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> = null ; </a> 
<a> GWT . log ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> for ( Object object : <RARE_TOKEN> ) { </a> 
<a> if ( object == <RARE_TOKEN> || object == <RARE_TOKEN> ) { </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> ( ( List < ? extends Serializable > ) object , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> <RARE_TOKEN> . clear ( ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ SuppressWarnings ( "unchecked" ) </a> 
<a> private void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> = null ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> if ( <RARE_TOKEN> . size ( ) > 0 ) { </a> 
<a> GWT . log ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> for ( Object object : <RARE_TOKEN> ) { </a> 
<a> if ( object == <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } else if ( object == <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> ( ( List < ? extends Serializable > ) object , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> <RARE_TOKEN> . clear ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( <RARE_TOKEN> transport ) { </a> 
<a> if ( transport == <RARE_TOKEN> ) { </a> 
<a> listener . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( <RARE_TOKEN> transport ) { </a> 
<a> if ( <RARE_TOKEN> == null && transport == <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> <RARE_TOKEN> = new <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> . connect ( ) ; </a> 
<a> listener . <RARE_TOKEN> ( ) ; </a> 
<a> } else if ( transport == <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } else { </a> 
<a> throw new IllegalStateException ( "Unexpected <RARE_TOKEN> from <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( Object message ) { </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> <RARE_TOKEN> = new ArrayList < Object > ( ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> . add ( message ) ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( Throwable exception , boolean <RARE_TOKEN> , <RARE_TOKEN> transport ) { </a> 
<a> if ( <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> listener . onError ( exception , <RARE_TOKEN> ) ; </a> 
<a> if ( running ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> . schedule ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( List < ? extends Serializable > messages , <RARE_TOKEN> transport ) { </a> 
<a> if ( transport == <RARE_TOKEN> ) { </a> 
<a> listener . <RARE_TOKEN> ( messages ) ; </a> 
<a> } else if ( <RARE_TOKEN> . <RARE_TOKEN> . equals ( <RARE_TOKEN> ) ) { </a> 
<a> <RARE_TOKEN> ( messages ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private class <RARE_TOKEN> implements <RARE_TOKEN> { </a> 
<a> private <RARE_TOKEN> transport ; </a> 
<a> private final <RARE_TOKEN> <RARE_TOKEN> = <RARE_TOKEN> ( ) ; </a> 
<a> private final <RARE_TOKEN> <RARE_TOKEN> = <RARE_TOKEN> ( ) ; </a> 
<a> private final <RARE_TOKEN> <RARE_TOKEN> = <RARE_TOKEN> ( ) ; </a> 
<a> private boolean <RARE_TOKEN> = false ; </a> 
<a> private int <RARE_TOKEN> ; </a> 
<a> private double <RARE_TOKEN> ; </a> 
<a> private int <RARE_TOKEN> ; </a> 
<a> public <RARE_TOKEN> ( ) { </a> 
<a> if ( <RARE_TOKEN> && <RARE_TOKEN> . <RARE_TOKEN> ( ) ) { </a> 
<a> transport = new <RARE_TOKEN> ( ) ; </a> 
<a> } else { </a> 
<a> transport = GWT . create ( <RARE_TOKEN> . class ) ; </a> 
<a> } </a> 
<a> GWT . log ( <RARE_TOKEN> <RARE_TOKEN> " + transport . getClass ( ) . getName ( ) ) ; </a> 
<a> transport . <RARE_TOKEN> ( <RARE_TOKEN> . this , this ) ; </a> 
<a> } </a> 
<a> public void post ( Serializable message , <RARE_TOKEN> < Void > callback ) { </a> 
<a> transport . post ( message , callback ) ; </a> 
<a> } </a> 
<a> public void post ( List < Serializable > messages , <RARE_TOKEN> < Void > callback ) { </a> 
<a> transport . post ( messages , callback ) ; </a> 
<a> } </a> 
<a> public void broadcast ( Serializable message ) { </a> 
<a> transport . broadcast ( message ) ; </a> 
<a> } </a> 
<a> public void broadcast ( List < Serializable > messages ) { </a> 
<a> transport . broadcast ( messages ) ; </a> 
<a> } </a> 
<a> public int <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public void connect ( ) { </a> 
<a> <RARE_TOKEN> . schedule ( <RARE_TOKEN> ) ; </a> 
<a> transport . connect ( ++ <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public void disconnect ( ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> transport . disconnect ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( int <RARE_TOKEN> , int <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> + <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . currentTimeMillis ( ) ; </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> if ( transport instanceof <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> = true ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> . schedule ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> , this ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> ( this ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> if ( transport instanceof <RARE_TOKEN> && <RARE_TOKEN> == false ) { </a> 
<a> transport = GWT . create ( <RARE_TOKEN> . class ) ; </a> 
<a> transport . <RARE_TOKEN> ( <RARE_TOKEN> . this , this ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( this ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void onError ( Throwable exception , boolean <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> ( exception , <RARE_TOKEN> , this ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . currentTimeMillis ( ) ; </a> 
<a> <RARE_TOKEN> ( this ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . currentTimeMillis ( ) ; </a> 
<a> <RARE_TOKEN> ( this ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( List < ? extends Serializable > messages ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . currentTimeMillis ( ) ; </a> 
<a> <RARE_TOKEN> ( messages , this ) ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> . cancel ( ) ; </a> 
<a> <RARE_TOKEN> . cancel ( ) ; </a> 
<a> <RARE_TOKEN> . cancel ( ) ; </a> 
<a> } </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> ( ) { </a> 
<a> return new <RARE_TOKEN> ( ) { </a> 
<a> @ Override </a> 
<a> public void run ( ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> ( new <RARE_TOKEN> ( url , <RARE_TOKEN> ) , false , <RARE_TOKEN> . this ) ; </a> 
<a> } </a> 
<a> } ; </a> 
<a> } </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> ( ) { </a> 
<a> return new <RARE_TOKEN> ( ) { </a> 
<a> @ Override </a> 
<a> public void run ( ) { </a> 
<a> double currentTimeMillis = <RARE_TOKEN> . currentTimeMillis ( ) ; </a> 
<a> double <RARE_TOKEN> = currentTimeMillis - <RARE_TOKEN> ; </a> 
<a> if ( <RARE_TOKEN> >= <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> ( new <RARE_TOKEN> ( <RARE_TOKEN> failed" ) , false , <RARE_TOKEN> . this ) ; </a> 
<a> } else { </a> 
<a> schedule ( <RARE_TOKEN> - ( int ) <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } ; </a> 
<a> } </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> ( ) { </a> 
<a> return new <RARE_TOKEN> ( ) { </a> 
<a> @ Override </a> 
<a> public void run ( ) { </a> 
<a> if ( running ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } ; </a> 
<a> } </a> 
<a> } </a> 
<a> public native static <RARE_TOKEN> split ( String string , String <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . gwt . client ; </a> 
<a> public class <RARE_TOKEN> extends Exception { </a> 
<a> private static final long serialVersionUID = <RARE_TOKEN> ; </a> 
<a> public <RARE_TOKEN> ( ) { </a> 
<a> super ( ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( String message , Throwable cause ) { </a> 
<a> super ( message , cause ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( String message ) { </a> 
<a> super ( message ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( Throwable cause ) { </a> 
<a> super ( cause ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . gwt . client ; </a> 
<a> import com . google . gwt . core . client . GWT ; </a> 
<a> import com . google . gwt . rpc . client . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . user . client . rpc . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . user . client . rpc . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . user . client . rpc . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . user . client . rpc . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . user . client . rpc . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import java . io . Serializable ; </a> 
<a> public abstract class <RARE_TOKEN> { </a> 
<a> @ SuppressWarnings ( "unchecked" ) </a> 
<a> public < T extends Serializable > T <RARE_TOKEN> ( String message ) throws <RARE_TOKEN> { </a> 
<a> if ( <RARE_TOKEN> ( ) == <RARE_TOKEN> . <RARE_TOKEN> ) { </a> 
<a> try { </a> 
<a> <RARE_TOKEN> serializer = <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( serializer ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( message ) ; </a> 
<a> return ( T ) <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> } catch ( <RARE_TOKEN> e ) { </a> 
<a> throw new <RARE_TOKEN> ( e ) ; </a> 
<a> } </a> 
<a> } else if ( <RARE_TOKEN> ( ) == <RARE_TOKEN> . <RARE_TOKEN> ) { </a> 
<a> try { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( message ) ; </a> 
<a> return ( T ) <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> } catch ( <RARE_TOKEN> e ) { </a> 
<a> throw new <RARE_TOKEN> ( e ) ; </a> 
<a> } </a> 
<a> } else if ( <RARE_TOKEN> ( ) == <RARE_TOKEN> . <RARE_TOKEN> ) { </a> 
<a> return ( T ) message ; </a> 
<a> } else { </a> 
<a> throw new UnsupportedOperationException ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ SuppressWarnings ( "unchecked" ) </a> 
<a> public < T extends Serializable > String <RARE_TOKEN> ( T message ) throws <RARE_TOKEN> { </a> 
<a> if ( <RARE_TOKEN> ( ) == <RARE_TOKEN> . <RARE_TOKEN> ) { </a> 
<a> try { </a> 
<a> <RARE_TOKEN> serializer = <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> writer = new <RARE_TOKEN> ( serializer , GWT . <RARE_TOKEN> ( ) , GWT . <RARE_TOKEN> ( ) ) ; </a> 
<a> writer . <RARE_TOKEN> ( ) ; </a> 
<a> writer . <RARE_TOKEN> ( message ) ; </a> 
<a> return writer . toString ( ) ; </a> 
<a> } catch ( <RARE_TOKEN> e ) { </a> 
<a> throw new <RARE_TOKEN> ( e ) ; </a> 
<a> } </a> 
<a> } else if ( <RARE_TOKEN> ( ) == <RARE_TOKEN> . <RARE_TOKEN> ) { </a> 
<a> return message . toString ( ) ; </a> 
<a> } else { </a> 
<a> throw new UnsupportedOperationException ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> protected abstract <RARE_TOKEN> <RARE_TOKEN> ( ) ; </a> 
<a> public abstract <RARE_TOKEN> <RARE_TOKEN> ( ) ; </a> 
<a> public abstract <RARE_TOKEN> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . gwt . client ; </a> 
<a> import java . io . Serializable ; </a> 
<a> public @ interface <RARE_TOKEN> { </a> 
<a> Class < ? extends Serializable > [ ] value ( ) ; </a> 
<a> <RARE_TOKEN> mode ( ) default <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> ( ) default <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . gwt . client ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> private static final long serialVersionUID = <RARE_TOKEN> ; </a> 
<a> public <RARE_TOKEN> ( String url , int <RARE_TOKEN> ) { </a> 
<a> super ( url + " timeout has <RARE_TOKEN> <RARE_TOKEN> " + <RARE_TOKEN> + <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . gwt . client . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . <RARE_TOKEN> . client . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . <RARE_TOKEN> . client . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . event . <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . event . <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . event . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . event . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . event . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . event . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . user . client . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . user . client . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> public class <RARE_TOKEN> { </a> 
<a> public static class <RARE_TOKEN> extends <RARE_TOKEN> < <RARE_TOKEN> > { </a> 
<a> private static <RARE_TOKEN> TYPE ; </a> 
<a> public static <RARE_TOKEN> < <RARE_TOKEN> > getType ( ) { </a> 
<a> return TYPE != null ? TYPE : ( TYPE = new <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public <RARE_TOKEN> < <RARE_TOKEN> > <RARE_TOKEN> ( ) { </a> 
<a> return getType ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( <RARE_TOKEN> handler ) { </a> 
<a> handler . <RARE_TOKEN> ( this ) ; </a> 
<a> } </a> 
<a> protected <RARE_TOKEN> ( ) { </a> 
<a> } </a> 
<a> } </a> 
<a> protected static final <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( ) ; </a> 
<a> public static class <RARE_TOKEN> extends <RARE_TOKEN> < <RARE_TOKEN> > { </a> 
<a> private static <RARE_TOKEN> TYPE ; </a> 
<a> public static <RARE_TOKEN> < <RARE_TOKEN> > getType ( ) { </a> 
<a> return TYPE != null ? TYPE : ( TYPE = new <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public <RARE_TOKEN> < <RARE_TOKEN> > <RARE_TOKEN> ( ) { </a> 
<a> return getType ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( <RARE_TOKEN> handler ) { </a> 
<a> handler . <RARE_TOKEN> ( this ) ; </a> 
<a> } </a> 
<a> protected <RARE_TOKEN> ( ) { </a> 
<a> } </a> 
<a> } </a> 
<a> protected static final <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( ) ; </a> 
<a> public interface <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> public void <RARE_TOKEN> ( <RARE_TOKEN> event ) ; </a> 
<a> } </a> 
<a> public interface <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> public void <RARE_TOKEN> ( <RARE_TOKEN> event ) ; </a> 
<a> } </a> 
<a> public static <RARE_TOKEN> <RARE_TOKEN> ( <RARE_TOKEN> handler ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> return <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> . getType ( ) , handler ) ; </a> 
<a> } </a> 
<a> public static <RARE_TOKEN> <RARE_TOKEN> ( <RARE_TOKEN> handler ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> return <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> . getType ( ) , handler ) ; </a> 
<a> } </a> 
<a> private static void <RARE_TOKEN> ( ) { </a> 
<a> if ( ! <RARE_TOKEN> ) { </a> 
<a> if ( <RARE_TOKEN> ( ) ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> . get ( ) . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> = true ; </a> 
<a> } </a> 
<a> } </a> 
<a> static String <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> return null ; </a> 
<a> } </a> 
<a> static void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> private static boolean <RARE_TOKEN> ( ) { </a> 
<a> String <RARE_TOKEN> = <RARE_TOKEN> ( ) ; </a> 
<a> return <RARE_TOKEN> . indexOf ( <RARE_TOKEN> ) != - 1 && <RARE_TOKEN> . indexOf ( <RARE_TOKEN> ) == - 1 ; </a> 
<a> } </a> 
<a> ; </a> 
<a> private static native String <RARE_TOKEN> ( ) ; </a> 
<a> private static native <RARE_TOKEN> <RARE_TOKEN> ( ) ; </a> 
<a> private static void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( new <RARE_TOKEN> . <RARE_TOKEN> ( ) { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( <RARE_TOKEN> event ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( new <RARE_TOKEN> < <RARE_TOKEN> > ( ) { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( <RARE_TOKEN> < <RARE_TOKEN> > event ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> } </a> 
<a> private static native void <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> private static <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( ) ; </a> 
<a> private static boolean <RARE_TOKEN> = false ; </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . gwt . client . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . core . client . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . core . client . JavaScriptObject ; </a> 
<a> public final class <RARE_TOKEN> extends JavaScriptObject { </a> 
<a> public static native <RARE_TOKEN> current ( ) ; </a> 
<a> public <RARE_TOKEN> open ( String url , String name , <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> return open ( url , name , <RARE_TOKEN> . toString ( ) ) ; </a> 
<a> } </a> 
<a> public native <RARE_TOKEN> open ( String url , String name , String <RARE_TOKEN> ) ; </a> 
<a> public native void close ( ) ; </a> 
<a> public native void set ( String name , boolean <RARE_TOKEN> ) ; </a> 
<a> public native void set ( String name , int value ) ; </a> 
<a> public native void set ( String name , String value ) ; </a> 
<a> public native void set ( String name , Object value ) ; </a> 
<a> public native boolean <RARE_TOKEN> ( String name ) ; </a> 
<a> public native boolean <RARE_TOKEN> ( String name ) ; </a> 
<a> public native int getInt ( String name ) throws <RARE_TOKEN> ; </a> 
<a> public native String getString ( String name ) throws <RARE_TOKEN> ; </a> 
<a> public native < <RARE_TOKEN> > <RARE_TOKEN> <RARE_TOKEN> ( String name ) throws <RARE_TOKEN> ; </a> 
<a> protected <RARE_TOKEN> ( ) { </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . gwt . client . <RARE_TOKEN> ; </a> 
<a> import java . util . HashMap ; </a> 
<a> import java . util . Map ; </a> 
<a> public class <RARE_TOKEN> { </a> 
<a> private Map < String , Integer > <RARE_TOKEN> = new HashMap < String , Integer > ( ) ; </a> 
<a> private Map < String , Boolean > <RARE_TOKEN> = new HashMap < String , Boolean > ( ) ; </a> 
<a> public <RARE_TOKEN> ( ) { </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( Integer <RARE_TOKEN> , Integer <RARE_TOKEN> , Integer <RARE_TOKEN> , Integer <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( Boolean <RARE_TOKEN> , Boolean <RARE_TOKEN> , Boolean location , Boolean <RARE_TOKEN> , Boolean status ) { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( location ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( status ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> set ( String name , Integer value ) { </a> 
<a> <RARE_TOKEN> . put ( name , value ) ; </a> 
<a> return this ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> set ( String name , Boolean option ) { </a> 
<a> <RARE_TOKEN> . put ( name , option ) ; </a> 
<a> return this ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> <RARE_TOKEN> ( Boolean <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> . put ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> return this ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> <RARE_TOKEN> ( Boolean dialog ) { </a> 
<a> <RARE_TOKEN> . put ( <RARE_TOKEN> , dialog ) ; </a> 
<a> return this ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> <RARE_TOKEN> ( Boolean <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> . put ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> return this ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> <RARE_TOKEN> ( Integer <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> . put ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> return this ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> <RARE_TOKEN> ( Integer <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> . put ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> return this ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> <RARE_TOKEN> ( Boolean location ) { </a> 
<a> <RARE_TOKEN> . put ( <RARE_TOKEN> , location ) ; </a> 
<a> return this ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> <RARE_TOKEN> ( Boolean <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> . put ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> return this ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> <RARE_TOKEN> ( Boolean <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> . put ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> return this ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> <RARE_TOKEN> ( Boolean <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> . put ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> return this ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> <RARE_TOKEN> ( Boolean <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> . put ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> return this ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> <RARE_TOKEN> ( Boolean <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> . put ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> return this ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> <RARE_TOKEN> ( Boolean status ) { </a> 
<a> <RARE_TOKEN> . put ( <RARE_TOKEN> , status ) ; </a> 
<a> return this ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> <RARE_TOKEN> ( Boolean <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> . put ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> return this ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> <RARE_TOKEN> ( Integer <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> . put ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> return this ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> <RARE_TOKEN> ( Integer <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> . put ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> return this ; </a> 
<a> } </a> 
<a> public String toString ( ) { </a> 
<a> <RARE_TOKEN> b = new <RARE_TOKEN> ( ) ; </a> 
<a> for ( Map . Entry < String , Integer > e : <RARE_TOKEN> . <RARE_TOKEN> ( ) ) { </a> 
<a> b . add ( e . <RARE_TOKEN> ( ) , e . getValue ( ) ) ; </a> 
<a> } </a> 
<a> for ( Map . Entry < String , Boolean > e : <RARE_TOKEN> . <RARE_TOKEN> ( ) ) { </a> 
<a> b . add ( e . <RARE_TOKEN> ( ) , e . getValue ( ) ) ; </a> 
<a> } </a> 
<a> return b . toString ( ) ; </a> 
<a> } </a> 
<a> private static class <RARE_TOKEN> { </a> 
<a> StringBuilder result = new StringBuilder ( ) ; </a> 
<a> public <RARE_TOKEN> add ( String name , Boolean value ) { </a> 
<a> if ( value == null ) { </a> 
<a> return this ; </a> 
<a> } </a> 
<a> add ( name , value ? <RARE_TOKEN> : <RARE_TOKEN> ) ; </a> 
<a> return this ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> add ( String name , Integer value ) { </a> 
<a> if ( value == null ) { </a> 
<a> return this ; </a> 
<a> } </a> 
<a> add ( name , value . toString ( ) ) ; </a> 
<a> return this ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> add ( String name , String value ) { </a> 
<a> if ( value == null ) { </a> 
<a> return this ; </a> 
<a> } </a> 
<a> if ( result . length ( ) > 0 ) { </a> 
<a> result . append ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> result . append ( name ) . append ( <RARE_TOKEN> ) . append ( value ) ; </a> 
<a> return this ; </a> 
<a> } </a> 
<a> public String toString ( ) { </a> 
<a> return result . toString ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . gwt . client . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . core . client . JavaScriptObject ; </a> 
<a> import com . google . gwt . event . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . event . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . event . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . event . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . event . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . user . client . <RARE_TOKEN> ; </a> 
<a> public class <RARE_TOKEN> { </a> 
<a> public static class <RARE_TOKEN> extends <RARE_TOKEN> < <RARE_TOKEN> > { </a> 
<a> private static <RARE_TOKEN> TYPE ; </a> 
<a> private String message ; </a> 
<a> public static <RARE_TOKEN> getType ( ) { </a> 
<a> return TYPE != null ? TYPE : ( TYPE = new <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( String message ) { </a> 
<a> this . message = message ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public <RARE_TOKEN> < <RARE_TOKEN> > <RARE_TOKEN> ( ) { </a> 
<a> return getType ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( <RARE_TOKEN> handler ) { </a> 
<a> handler . <RARE_TOKEN> ( message ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public static interface <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> public void <RARE_TOKEN> ( String message ) ; </a> 
<a> } </a> 
<a> public static boolean <RARE_TOKEN> ( <RARE_TOKEN> w , String <RARE_TOKEN> ) { </a> 
<a> return <RARE_TOKEN> ( w , <RARE_TOKEN> ) != null ; </a> 
<a> } </a> 
<a> public static void post ( <RARE_TOKEN> w , String <RARE_TOKEN> , String message ) { </a> 
<a> <RARE_TOKEN> s = <RARE_TOKEN> ( w , <RARE_TOKEN> ) ; </a> 
<a> if ( s != null ) { </a> 
<a> s . post ( message ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public void bind ( String name ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> w = <RARE_TOKEN> . current ( ) ; </a> 
<a> socket = <RARE_TOKEN> ( w , name ) ; </a> 
<a> if ( socket == null ) { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = w . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . create ( ) ; </a> 
<a> w . set ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> socket = <RARE_TOKEN> . create ( name ) ; </a> 
<a> <RARE_TOKEN> . set ( socket , name ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> if ( socket != null ) { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = <RARE_TOKEN> . current ( ) . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . remove ( socket ) ; </a> 
<a> <RARE_TOKEN> . cancel ( ) ; </a> 
<a> <RARE_TOKEN> . run ( ) ; </a> 
<a> socket = null ; </a> 
<a> } </a> 
<a> } </a> 
<a> public <RARE_TOKEN> <RARE_TOKEN> ( <RARE_TOKEN> handler ) { </a> 
<a> return listeners . <RARE_TOKEN> ( <RARE_TOKEN> . getType ( ) , handler ) ; </a> 
<a> } </a> 
<a> private static <RARE_TOKEN> <RARE_TOKEN> ( <RARE_TOKEN> w , String name ) { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = w . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> return <RARE_TOKEN> . get ( name ) ; </a> 
<a> } </a> 
<a> private <RARE_TOKEN> socket ; </a> 
<a> private <RARE_TOKEN> listeners = new <RARE_TOKEN> ( ) ; </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( ) { </a> 
<a> @ Override </a> 
<a> public void run ( ) { </a> 
<a> if ( socket != null ) { </a> 
<a> String m ; </a> 
<a> while ( ( m = socket . poll ( ) ) != null ) { </a> 
<a> listeners . <RARE_TOKEN> ( new <RARE_TOKEN> ( m ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } ; </a> 
<a> private final static class <RARE_TOKEN> extends JavaScriptObject { </a> 
<a> private static native <RARE_TOKEN> create ( String <RARE_TOKEN> ) ; </a> 
<a> public native void post ( String message ) ; </a> 
<a> public native String poll ( ) ; </a> 
<a> protected <RARE_TOKEN> ( ) { </a> 
<a> } </a> 
<a> } </a> 
<a> private final static class <RARE_TOKEN> extends JavaScriptObject { </a> 
<a> public static native <RARE_TOKEN> create ( ) ; </a> 
<a> public native <RARE_TOKEN> set ( <RARE_TOKEN> socket , String name ) ; </a> 
<a> public native <RARE_TOKEN> get ( String name ) ; </a> 
<a> public native void remove ( <RARE_TOKEN> socket ) ; </a> 
<a> protected <RARE_TOKEN> ( ) { </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . gwt . client . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . user . client . rpc . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . gwt . client . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . gwt . client . <RARE_TOKEN> ; </a> 
<a> import java . io . Serializable ; </a> 
<a> import java . util . List ; </a> 
<a> public interface <RARE_TOKEN> { </a> 
<a> public void <RARE_TOKEN> ( <RARE_TOKEN> client , <RARE_TOKEN> listener ) ; </a> 
<a> public void connect ( int <RARE_TOKEN> ) ; </a> 
<a> public void disconnect ( ) ; </a> 
<a> public void post ( Serializable message , <RARE_TOKEN> < Void > callback ) ; </a> 
<a> public void post ( List < Serializable > messages , <RARE_TOKEN> < Void > callback ) ; </a> 
<a> public void broadcast ( Serializable message ) ; </a> 
<a> public void broadcast ( List < Serializable > messages ) ; </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . gwt . client . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . core . client . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . <RARE_TOKEN> . client . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . event . <RARE_TOKEN> . client . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . event . <RARE_TOKEN> . client . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . http . client . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . user . client . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . user . client . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . user . client . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . user . client . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . <RARE_TOKEN> . client . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . <RARE_TOKEN> . client . <RARE_TOKEN> ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> static { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( new <RARE_TOKEN> ( ) { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( <RARE_TOKEN> e ) { </a> 
<a> if ( e . <RARE_TOKEN> ( ) == <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> . getType ( ) . getName ( ) ) ) { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = e . <RARE_TOKEN> ( ) ; </a> 
<a> if ( <RARE_TOKEN> . <RARE_TOKEN> ( ) == <RARE_TOKEN> . <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> } </a> 
<a> private final static int <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( ) { </a> 
<a> @ Override </a> 
<a> public void run ( ) { </a> 
<a> if ( <RARE_TOKEN> != null && read < <RARE_TOKEN> . <RARE_TOKEN> ( ) . length ( ) ) { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> . getStatus ( ) , <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } ; </a> 
<a> @ Override </a> 
<a> public void connect ( int <RARE_TOKEN> ) { </a> 
<a> init ( ) ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . create ( ) ; </a> 
<a> try { </a> 
<a> <RARE_TOKEN> . open ( <RARE_TOKEN> , <RARE_TOKEN> ( <RARE_TOKEN> ) ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( new <RARE_TOKEN> ( ) { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( <RARE_TOKEN> request ) { </a> 
<a> if ( ! <RARE_TOKEN> ) { </a> 
<a> switch ( request . <RARE_TOKEN> ( ) ) { </a> 
<a> case <RARE_TOKEN> . <RARE_TOKEN> : </a> 
<a> <RARE_TOKEN> ( request . getStatus ( ) , request . <RARE_TOKEN> ( ) ) ; </a> 
<a> if ( <RARE_TOKEN> ( ) ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> break ; </a> 
<a> case <RARE_TOKEN> . <RARE_TOKEN> : </a> 
<a> <RARE_TOKEN> ( request . getStatus ( ) , request . <RARE_TOKEN> ( ) ) ; </a> 
<a> <RARE_TOKEN> . cancel ( ) ; </a> 
<a> break ; </a> 
<a> } </a> 
<a> } else { </a> 
<a> request . <RARE_TOKEN> ( ) ; </a> 
<a> if ( request . <RARE_TOKEN> ( ) != <RARE_TOKEN> . <RARE_TOKEN> ) { </a> 
<a> request . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> } catch ( <RARE_TOKEN> e ) { </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> = null ; </a> 
<a> } </a> 
<a> listener . onError ( new <RARE_TOKEN> ( e . getMessage ( ) ) , false ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void disconnect ( ) { </a> 
<a> <RARE_TOKEN> = true ; </a> 
<a> <RARE_TOKEN> = true ; </a> 
<a> super . disconnect ( ) ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> if ( <RARE_TOKEN> . <RARE_TOKEN> ( ) >= <RARE_TOKEN> . <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> if ( <RARE_TOKEN> . <RARE_TOKEN> ( ) != <RARE_TOKEN> . <RARE_TOKEN> ) { </a> 
<a> listener . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> = null ; </a> 
<a> } else { </a> 
<a> new <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> r = <RARE_TOKEN> ; </a> 
<a> @ Override </a> 
<a> public void run ( ) { </a> 
<a> r . <RARE_TOKEN> ( ) ; </a> 
<a> if ( r . <RARE_TOKEN> ( ) != <RARE_TOKEN> . <RARE_TOKEN> </a> 
<a> && r . <RARE_TOKEN> ( ) != <RARE_TOKEN> . <RARE_TOKEN> ) { </a> 
<a> listener . <RARE_TOKEN> ( ) ; </a> 
<a> r . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> r = null ; </a> 
<a> } </a> 
<a> } . schedule ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = null ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> protected boolean <RARE_TOKEN> ( ) { </a> 
<a> String <RARE_TOKEN> = <RARE_TOKEN> ( ) ; </a> 
<a> return <RARE_TOKEN> . contains ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public native static String <RARE_TOKEN> ( ) ; </a> 
<a> private void <RARE_TOKEN> ( int statusCode , String <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> = null ; </a> 
<a> <RARE_TOKEN> ( statusCode , <RARE_TOKEN> , false ) ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( int statusCode , String <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( statusCode , <RARE_TOKEN> , true ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . gwt . client . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . core . client . JavaScriptObject ; </a> 
<a> import com . google . gwt . <RARE_TOKEN> . client . <RARE_TOKEN> ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> private JavaScriptObject <RARE_TOKEN> ; </a> 
<a> @ Override </a> 
<a> protected <RARE_TOKEN> <RARE_TOKEN> ( String <RARE_TOKEN> ) { </a> 
<a> return <RARE_TOKEN> ( this , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> private static native <RARE_TOKEN> <RARE_TOKEN> ( <RARE_TOKEN> client , String <RARE_TOKEN> ) ; </a> 
<a> private native void <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . gwt . client . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . core . client . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . <RARE_TOKEN> . client . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . <RARE_TOKEN> . client . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . <RARE_TOKEN> . client . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . <RARE_TOKEN> . client . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . user . client . rpc . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . user . client . rpc . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . gwt . client . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . gwt . client . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . gwt . client . <RARE_TOKEN> ; </a> 
<a> import java . io . Serializable ; </a> 
<a> import java . util . ArrayList ; </a> 
<a> import java . util . List ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> private String <RARE_TOKEN> ; </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> private boolean <RARE_TOKEN> ; </a> 
<a> private boolean <RARE_TOKEN> ; </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( <RARE_TOKEN> client , <RARE_TOKEN> listener ) { </a> 
<a> super . <RARE_TOKEN> ( client , listener ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void connect ( int <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ( <RARE_TOKEN> ( ) , client . <RARE_TOKEN> ( ) ) ; </a> 
<a> StringBuilder <RARE_TOKEN> = new StringBuilder ( <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> . append ( <RARE_TOKEN> ) . append ( <RARE_TOKEN> ) . append ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> . append ( <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ( <RARE_TOKEN> . toString ( ) ) ; </a> 
<a> <RARE_TOKEN> = false ; </a> 
<a> String url = <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> url += <RARE_TOKEN> + <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( url ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void disconnect ( ) { </a> 
<a> <RARE_TOKEN> = true ; </a> 
<a> super . disconnect ( ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( "" ) ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> = null ; </a> 
<a> <RARE_TOKEN> = null ; </a> 
<a> if ( <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> = false ; </a> 
<a> } </a> 
<a> protected <RARE_TOKEN> <RARE_TOKEN> ( String <RARE_TOKEN> ) { </a> 
<a> return <RARE_TOKEN> ( this , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> protected void <RARE_TOKEN> ( ) { </a> 
<a> } </a> 
<a> private static native <RARE_TOKEN> <RARE_TOKEN> ( <RARE_TOKEN> client , String <RARE_TOKEN> ) ; </a> 
<a> private native static String <RARE_TOKEN> ( ) ; </a> 
<a> private native static String <RARE_TOKEN> ( String <RARE_TOKEN> , String url ) ; </a> 
<a> private void <RARE_TOKEN> ( ) { </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> < <RARE_TOKEN> > <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> if ( <RARE_TOKEN> . <RARE_TOKEN> ( ) > 1 ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ( 0 ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> @ SuppressWarnings ( <RARE_TOKEN> ) </a> 
<a> private void <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> int length = <RARE_TOKEN> . length ( ) ; </a> 
<a> List < Serializable > messages = new ArrayList < Serializable > ( length ) ; </a> 
<a> for ( int i = 0 ; i < length ; i ++ ) { </a> 
<a> String message = <RARE_TOKEN> . get ( i ) ; </a> 
<a> switch ( message . charAt ( 0 ) ) { </a> 
<a> case <RARE_TOKEN> : </a> 
<a> messages . add ( message . substring ( 1 ) ) ; </a> 
<a> break ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> case <RARE_TOKEN> : </a> 
<a> case <RARE_TOKEN> : </a> 
<a> case <RARE_TOKEN> : </a> 
<a> try { </a> 
<a> messages . add ( <RARE_TOKEN> ( message ) ) ; </a> 
<a> } catch ( <RARE_TOKEN> e ) { </a> 
<a> listener . onError ( e , true ) ; </a> 
<a> } </a> 
<a> break ; </a> 
<a> default : </a> 
<a> listener . onError ( new <RARE_TOKEN> ( <RARE_TOKEN> message <RARE_TOKEN> " + message ) , true ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> listener . <RARE_TOKEN> ( messages ) ; </a> 
<a> } </a> 
<a> @ SuppressWarnings ( <RARE_TOKEN> ) </a> 
<a> private void <RARE_TOKEN> ( int <RARE_TOKEN> , int <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> = true ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> listener . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> = false ; </a> 
<a> <RARE_TOKEN> = null ; </a> 
<a> if ( <RARE_TOKEN> ) { </a> 
<a> listener . <RARE_TOKEN> ( ) ; </a> 
<a> } else { </a> 
<a> listener . onError ( new <RARE_TOKEN> ( "Unexpected <RARE_TOKEN> ) , false ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ SuppressWarnings ( <RARE_TOKEN> ) </a> 
<a> private void onError ( int statusCode , String message ) { </a> 
<a> listener . onError ( new <RARE_TOKEN> ( statusCode , message ) , false ) ; </a> 
<a> } </a> 
<a> @ SuppressWarnings ( <RARE_TOKEN> ) </a> 
<a> private void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> listener . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ SuppressWarnings ( <RARE_TOKEN> ) </a> 
<a> private void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> listener . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ SuppressWarnings ( <RARE_TOKEN> ) </a> 
<a> private void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> disconnect ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . gwt . client . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . user . client . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . user . client . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . user . client . rpc . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . user . client . rpc . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . gwt . client . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . gwt . client . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . gwt . client . <RARE_TOKEN> ; </a> 
<a> import java . util . Collections ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> private boolean <RARE_TOKEN> ; </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( <RARE_TOKEN> client , <RARE_TOKEN> listener ) { </a> 
<a> super . <RARE_TOKEN> ( client , listener ) ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ( this ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void connect ( int <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> ( <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void disconnect ( ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> , "" ) ; </a> 
<a> super . disconnect ( ) ; </a> 
<a> if ( <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> = false ; </a> 
<a> listener . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private static native <RARE_TOKEN> <RARE_TOKEN> ( <RARE_TOKEN> client ) ; </a> 
<a> @ SuppressWarnings ( <RARE_TOKEN> ) </a> 
<a> private void <RARE_TOKEN> ( String message ) { </a> 
<a> listener . <RARE_TOKEN> ( Collections . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ( message ) ) ) ; </a> 
<a> } </a> 
<a> @ SuppressWarnings ( <RARE_TOKEN> ) </a> 
<a> private void <RARE_TOKEN> ( String message ) { </a> 
<a> try { </a> 
<a> listener . <RARE_TOKEN> ( Collections . <RARE_TOKEN> ( <RARE_TOKEN> ( message ) ) ) ; </a> 
<a> } catch ( <RARE_TOKEN> e ) { </a> 
<a> listener . onError ( e , true ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ SuppressWarnings ( <RARE_TOKEN> ) </a> 
<a> private void <RARE_TOKEN> ( String message ) { </a> 
<a> if ( message . startsWith ( <RARE_TOKEN> ) ) { </a> 
<a> <RARE_TOKEN> = true ; </a> 
<a> String <RARE_TOKEN> = message . substring ( 1 ) ; </a> 
<a> try { </a> 
<a> String [ ] params = <RARE_TOKEN> . split ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = Integer . parseInt ( params [ 1 ] ) ; </a> 
<a> listener . <RARE_TOKEN> ( Integer . parseInt ( params [ 0 ] ) , <RARE_TOKEN> ) ; </a> 
<a> } catch ( <RARE_TOKEN> e ) { </a> 
<a> listener . onError ( new <RARE_TOKEN> ( "Unexpected init <RARE_TOKEN> " + <RARE_TOKEN> ) , true ) ; </a> 
<a> } </a> 
<a> } else if ( message . startsWith ( <RARE_TOKEN> ) ) { </a> 
<a> disconnect ( ) ; </a> 
<a> String status = message . substring ( 1 ) ; </a> 
<a> try { </a> 
<a> int statusCode ; </a> 
<a> String <RARE_TOKEN> ; </a> 
<a> int index = status . indexOf ( ' ' ) ; </a> 
<a> if ( index == - 1 ) { </a> 
<a> statusCode = Integer . parseInt ( status ) ; </a> 
<a> <RARE_TOKEN> = null ; </a> 
<a> } else { </a> 
<a> statusCode = Integer . parseInt ( status . substring ( 0 , index ) ) ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( status . substring ( index + 1 ) ) ; </a> 
<a> } </a> 
<a> listener . onError ( new <RARE_TOKEN> ( statusCode , <RARE_TOKEN> ) , false ) ; </a> 
<a> } catch ( <RARE_TOKEN> e ) { </a> 
<a> listener . onError ( new <RARE_TOKEN> ( "Unexpected status <RARE_TOKEN> " + status ) , false ) ; </a> 
<a> } </a> 
<a> } else if ( message . equals ( <RARE_TOKEN> ) ) { </a> 
<a> <RARE_TOKEN> = false ; </a> 
<a> disconnect ( ) ; </a> 
<a> listener . <RARE_TOKEN> ( ) ; </a> 
<a> } else if ( message . equals ( <RARE_TOKEN> ) ) { </a> 
<a> listener . <RARE_TOKEN> ( ) ; </a> 
<a> } else { </a> 
<a> listener . onError ( new <RARE_TOKEN> ( "Unexpected connection <RARE_TOKEN> " + message ) , true ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . gwt . client . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . user . client . rpc . <RARE_TOKEN> ; </a> 
<a> import java . io . Serializable ; </a> 
<a> import java . util . List ; </a> 
<a> public interface <RARE_TOKEN> { </a> 
<a> public void disconnect ( ) ; </a> 
<a> public void post ( Serializable message , <RARE_TOKEN> < Void > callback ) ; </a> 
<a> public void post ( List < Serializable > messages , <RARE_TOKEN> < Void > callback ) ; </a> 
<a> public void broadcast ( Serializable message ) ; </a> 
<a> public void broadcast ( List < Serializable > messages ) ; </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . gwt . client . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . user . client . rpc . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . user . client . rpc . <RARE_TOKEN> ; </a> 
<a> import java . io . Serializable ; </a> 
<a> import java . util . List ; </a> 
<a> import java . util . logging . Level ; </a> 
<a> import java . util . logging . Logger ; </a> 
<a> abstract public class <RARE_TOKEN> implements <RARE_TOKEN> { </a> 
<a> abstract void <RARE_TOKEN> ( String message , <RARE_TOKEN> < Void > callback ) ; </a> 
<a> abstract String <RARE_TOKEN> ( Serializable message ) throws <RARE_TOKEN> ; </a> 
<a> private Logger logger = Logger . getLogger ( getClass ( ) . getName ( ) ) ; </a> 
<a> private <RARE_TOKEN> < Void > <RARE_TOKEN> = new <RARE_TOKEN> < Void > ( ) { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( Throwable <RARE_TOKEN> ) { </a> 
<a> logger . log ( Level . <RARE_TOKEN> , "Failed <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( Void result ) { </a> 
<a> if ( logger . <RARE_TOKEN> ( Level . <RARE_TOKEN> ) ) { </a> 
<a> logger . log ( Level . <RARE_TOKEN> , <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } ; </a> 
<a> @ Override </a> 
<a> public void disconnect ( ) { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void broadcast ( Serializable message ) { </a> 
<a> if ( message instanceof String ) { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> + message + <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } else { </a> 
<a> try { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> + <RARE_TOKEN> ( message ) + <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } catch ( <RARE_TOKEN> ex ) { </a> 
<a> logger . log ( Level . <RARE_TOKEN> , "Failed to <RARE_TOKEN> <RARE_TOKEN> , ex ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void broadcast ( List < Serializable > messages ) { </a> 
<a> StringBuilder <RARE_TOKEN> = new StringBuilder ( ) ; </a> 
<a> for ( Serializable message : messages ) { </a> 
<a> if ( message instanceof String ) { </a> 
<a> <RARE_TOKEN> . append ( <RARE_TOKEN> ) . append ( message ) . append ( <RARE_TOKEN> ) ; </a> 
<a> } else { </a> 
<a> try { </a> 
<a> <RARE_TOKEN> . append ( <RARE_TOKEN> ) . append ( <RARE_TOKEN> ( message ) ) . append ( <RARE_TOKEN> ) ; </a> 
<a> } catch ( <RARE_TOKEN> ex ) { </a> 
<a> logger . log ( Level . <RARE_TOKEN> , "Failed to <RARE_TOKEN> <RARE_TOKEN> , ex ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> . length ( ) > 0 ) { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> . toString ( ) , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void post ( Serializable message , <RARE_TOKEN> < Void > callback ) { </a> 
<a> if ( message instanceof String ) { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> + message + <RARE_TOKEN> , callback ) ; </a> 
<a> } else { </a> 
<a> try { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> + <RARE_TOKEN> ( message ) + <RARE_TOKEN> , callback ) ; </a> 
<a> } catch ( <RARE_TOKEN> ex ) { </a> 
<a> logger . log ( Level . <RARE_TOKEN> , "Failed to <RARE_TOKEN> <RARE_TOKEN> , ex ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void post ( List < Serializable > messages , <RARE_TOKEN> < Void > callback ) { </a> 
<a> StringBuilder <RARE_TOKEN> = new StringBuilder ( ) ; </a> 
<a> for ( Serializable message : messages ) { </a> 
<a> if ( message instanceof String ) { </a> 
<a> <RARE_TOKEN> . append ( <RARE_TOKEN> ) . append ( message ) . append ( <RARE_TOKEN> ) ; </a> 
<a> } else { </a> 
<a> try { </a> 
<a> <RARE_TOKEN> . append ( <RARE_TOKEN> ) . append ( <RARE_TOKEN> ( message ) ) . append ( <RARE_TOKEN> ) ; </a> 
<a> } catch ( <RARE_TOKEN> ex ) { </a> 
<a> logger . log ( Level . <RARE_TOKEN> , "Failed to <RARE_TOKEN> <RARE_TOKEN> , ex ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> . length ( ) > 0 ) { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> . toString ( ) , callback ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . gwt . client . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . core . client . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . http . client . Response ; </a> 
<a> import com . google . gwt . user . client . rpc . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . user . client . rpc . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . gwt . client . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . gwt . client . <RARE_TOKEN> ; </a> 
<a> import java . io . Serializable ; </a> 
<a> import java . util . ArrayList ; </a> 
<a> import java . util . List ; </a> 
<a> abstract public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> protected boolean <RARE_TOKEN> ; </a> 
<a> protected boolean <RARE_TOKEN> ; </a> 
<a> protected int read ; </a> 
<a> public void init ( ) { </a> 
<a> <RARE_TOKEN> = false ; </a> 
<a> <RARE_TOKEN> = false ; </a> 
<a> read = 0 ; </a> 
<a> } </a> 
<a> protected void <RARE_TOKEN> ( int statusCode , String <RARE_TOKEN> , boolean <RARE_TOKEN> ) { </a> 
<a> if ( statusCode != Response . <RARE_TOKEN> ) { </a> 
<a> if ( ! <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> = true ; </a> 
<a> listener . onError ( new <RARE_TOKEN> ( statusCode , <RARE_TOKEN> ) , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } else { </a> 
<a> int index = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> if ( index > read ) { </a> 
<a> List < Serializable > messages = new ArrayList < Serializable > ( ) ; </a> 
<a> <RARE_TOKEN> data = <RARE_TOKEN> . split ( <RARE_TOKEN> . substring ( read , index ) , <RARE_TOKEN> ) ; </a> 
<a> int length = data . length ( ) ; </a> 
<a> for ( int i = 0 ; i < length ; i ++ ) { </a> 
<a> if ( <RARE_TOKEN> ) { </a> 
<a> return ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( data . get ( i ) , messages ) ; </a> 
<a> } </a> 
<a> read = index + 1 ; </a> 
<a> if ( ! messages . isEmpty ( ) ) { </a> 
<a> listener . <RARE_TOKEN> ( messages ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> if ( ! <RARE_TOKEN> ) { </a> 
<a> if ( <RARE_TOKEN> ) { </a> 
<a> listener . <RARE_TOKEN> ( ) ; </a> 
<a> } else { </a> 
<a> listener . onError ( new <RARE_TOKEN> ( "Unexpected <RARE_TOKEN> ) , false ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( String message , List < Serializable > messages ) { </a> 
<a> if ( <RARE_TOKEN> ) { </a> 
<a> listener . onError ( new <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> " + message ) , true ) ; </a> 
<a> } else if ( message . isEmpty ( ) ) { </a> 
<a> listener . onError ( new <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> message <RARE_TOKEN> ) , true ) ; </a> 
<a> } else { </a> 
<a> char c = message . charAt ( 0 ) ; </a> 
<a> switch ( c ) { </a> 
<a> case <RARE_TOKEN> : </a> 
<a> String <RARE_TOKEN> = message . substring ( 1 ) ; </a> 
<a> try { </a> 
<a> String [ ] params = <RARE_TOKEN> . split ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = Integer . parseInt ( params [ 1 ] ) ; </a> 
<a> listener . <RARE_TOKEN> ( Integer . parseInt ( params [ 0 ] ) , <RARE_TOKEN> ) ; </a> 
<a> } catch ( <RARE_TOKEN> e ) { </a> 
<a> listener . onError ( new <RARE_TOKEN> ( "Unexpected init <RARE_TOKEN> " + <RARE_TOKEN> ) , true ) ; </a> 
<a> } </a> 
<a> break ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> <RARE_TOKEN> = true ; </a> 
<a> break ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> listener . <RARE_TOKEN> ( ) ; </a> 
<a> break ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> listener . <RARE_TOKEN> ( ) ; </a> 
<a> break ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> break ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> messages . add ( message . substring ( 1 ) ) ; </a> 
<a> break ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> messages . add ( <RARE_TOKEN> ( message . substring ( 1 ) ) ) ; </a> 
<a> break ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> case <RARE_TOKEN> : </a> 
<a> case <RARE_TOKEN> : </a> 
<a> case <RARE_TOKEN> : </a> 
<a> try { </a> 
<a> messages . add ( <RARE_TOKEN> ( message ) ) ; </a> 
<a> } catch ( <RARE_TOKEN> e ) { </a> 
<a> listener . onError ( e , true ) ; </a> 
<a> } </a> 
<a> break ; </a> 
<a> default : </a> 
<a> listener . onError ( new <RARE_TOKEN> ( <RARE_TOKEN> message <RARE_TOKEN> " + message ) , true ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> static String <RARE_TOKEN> ( String string ) { </a> 
<a> return string . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . gwt . client . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . core . client . JavaScriptObject ; </a> 
<a> public class WebSocket extends JavaScriptObject { </a> 
<a> public enum <RARE_TOKEN> { </a> 
<a> <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> </a> 
<a> } </a> 
<a> public static native WebSocket create ( String url ) ; </a> 
<a> public static native WebSocket create ( String url , String <RARE_TOKEN> ) ; </a> 
<a> protected WebSocket ( ) { </a> 
<a> } </a> 
<a> public final native <RARE_TOKEN> <RARE_TOKEN> ( ) ; </a> 
<a> public final native int <RARE_TOKEN> ( ) ; </a> 
<a> public final native void <RARE_TOKEN> ( String data ) ; </a> 
<a> public final native void close ( ) ; </a> 
<a> public final native void <RARE_TOKEN> ( <RARE_TOKEN> listener ) ; </a> 
<a> public final native void <RARE_TOKEN> ( ) ; </a> 
<a> public native static boolean <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . gwt . client . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . core . client . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . user . client . rpc . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . user . client . rpc . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . gwt . client . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . gwt . client . <RARE_TOKEN> ; </a> 
<a> import java . util . Collections ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> @ Override </a> 
<a> public void connect ( int <RARE_TOKEN> ) { </a> 
<a> disconnect ( ) ; </a> 
<a> String url = <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> url = url . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> url = url . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> socket = WebSocket . create ( url ) ; </a> 
<a> socket . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void disconnect ( ) { </a> 
<a> if ( socket != null ) { </a> 
<a> super . disconnect ( ) ; </a> 
<a> socket . close ( ) ; </a> 
<a> } </a> 
<a> socket = null ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected <RARE_TOKEN> <RARE_TOKEN> ( ) { </a> 
<a> return super . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> public static boolean <RARE_TOKEN> ( ) { </a> 
<a> return WebSocket . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> private boolean <RARE_TOKEN> = false ; </a> 
<a> @ SuppressWarnings ( <RARE_TOKEN> ) </a> 
<a> private final void <RARE_TOKEN> ( String message ) { </a> 
<a> listener . onError ( new <RARE_TOKEN> ( message ) , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( String message ) { </a> 
<a> if ( message . startsWith ( <RARE_TOKEN> ) ) { </a> 
<a> listener . <RARE_TOKEN> ( Collections . <RARE_TOKEN> ( </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( message . substring ( 2 ) ) ) ) ; </a> 
<a> } else if ( message . startsWith ( <RARE_TOKEN> ) ) { </a> 
<a> try { </a> 
<a> listener . <RARE_TOKEN> ( Collections . <RARE_TOKEN> ( <RARE_TOKEN> ( message . substring ( 2 ) ) ) ) ; </a> 
<a> } catch ( <RARE_TOKEN> e ) { </a> 
<a> listener . onError ( e , true ) ; </a> 
<a> } </a> 
<a> } else if ( message . startsWith ( <RARE_TOKEN> ) ) { </a> 
<a> <RARE_TOKEN> ( message . substring ( 2 ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( String message ) { </a> 
<a> if ( message . startsWith ( <RARE_TOKEN> ) ) { </a> 
<a> <RARE_TOKEN> = true ; </a> 
<a> String <RARE_TOKEN> = message . substring ( 1 ) ; </a> 
<a> try { </a> 
<a> String [ ] params = <RARE_TOKEN> . split ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = Integer . parseInt ( params [ 1 ] ) ; </a> 
<a> listener . <RARE_TOKEN> ( Integer . parseInt ( params [ 0 ] ) , <RARE_TOKEN> ) ; </a> 
<a> } catch ( <RARE_TOKEN> e ) { </a> 
<a> listener . onError ( new <RARE_TOKEN> ( "Unexpected init <RARE_TOKEN> " + <RARE_TOKEN> ) , true ) ; </a> 
<a> } </a> 
<a> } else if ( message . startsWith ( <RARE_TOKEN> ) ) { </a> 
<a> disconnect ( ) ; </a> 
<a> String status = message . substring ( 1 ) ; </a> 
<a> try { </a> 
<a> int statusCode ; </a> 
<a> String <RARE_TOKEN> ; </a> 
<a> int index = status . indexOf ( ' ' ) ; </a> 
<a> if ( index == - 1 ) { </a> 
<a> statusCode = Integer . parseInt ( status ) ; </a> 
<a> <RARE_TOKEN> = null ; </a> 
<a> } else { </a> 
<a> statusCode = Integer . parseInt ( status . substring ( 0 , index ) ) ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( status . substring ( index + 1 ) ) ; </a> 
<a> } </a> 
<a> listener . onError ( new <RARE_TOKEN> ( statusCode , <RARE_TOKEN> ) , false ) ; </a> 
<a> } catch ( <RARE_TOKEN> e ) { </a> 
<a> listener . onError ( new <RARE_TOKEN> ( "Unexpected status <RARE_TOKEN> " + status ) , false ) ; </a> 
<a> } </a> 
<a> } else if ( message . equals ( <RARE_TOKEN> ) ) { </a> 
<a> disconnect ( ) ; </a> 
<a> } else if ( message . equals ( <RARE_TOKEN> ) ) { </a> 
<a> listener . <RARE_TOKEN> ( ) ; </a> 
<a> } else { </a> 
<a> listener . onError ( new <RARE_TOKEN> ( "Unexpected connection <RARE_TOKEN> " + message ) , true ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private WebSocket socket ; </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( ) { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( WebSocket socket ) { </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( WebSocket socket ) { </a> 
<a> <RARE_TOKEN> = false ; </a> 
<a> listener . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void onError ( WebSocket socket ) { </a> 
<a> <RARE_TOKEN> = false ; </a> 
<a> listener . onError ( new IllegalStateException ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) , false ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( WebSocket socket , String message ) { </a> 
<a> <RARE_TOKEN> messages = <RARE_TOKEN> . split ( message , <RARE_TOKEN> ) ; </a> 
<a> int len = messages . length ( ) ; </a> 
<a> for ( int i = 0 ; i < len ; i ++ ) { </a> 
<a> <RARE_TOKEN> ( messages . get ( i ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } ; </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . gwt . client . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . core . client . JavaScriptObject ; </a> 
<a> public class <RARE_TOKEN> extends JavaScriptObject { </a> 
<a> public static native <RARE_TOKEN> create ( ) ; </a> 
<a> public native static boolean <RARE_TOKEN> ( ) ; </a> 
<a> public final native void <RARE_TOKEN> ( <RARE_TOKEN> listener ) ; </a> 
<a> public final native void <RARE_TOKEN> ( ) ; </a> 
<a> public final native String <RARE_TOKEN> ( ) ; </a> 
<a> public final native String <RARE_TOKEN> ( ) ; </a> 
<a> public final native void <RARE_TOKEN> ( int timeout ) ; </a> 
<a> public final native int <RARE_TOKEN> ( ) ; </a> 
<a> public final native void <RARE_TOKEN> ( ) ; </a> 
<a> public final native void <RARE_TOKEN> ( String url ) ; </a> 
<a> public final native void <RARE_TOKEN> ( String url ) ; </a> 
<a> public final native void <RARE_TOKEN> ( ) ; </a> 
<a> public final native void <RARE_TOKEN> ( String data ) ; </a> 
<a> protected <RARE_TOKEN> ( ) { </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . gwt . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . core . ext . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . core . ext . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . core . ext . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . core . ext . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . core . ext . <RARE_TOKEN> . JClassType ; </a> 
<a> import com . google . gwt . core . ext . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . core . ext . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . core . ext . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . core . ext . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . <RARE_TOKEN> . util . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . rpc . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . user . client . rpc . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . user . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . user . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . user . <RARE_TOKEN> . rpc . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . user . <RARE_TOKEN> . rpc . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . user . <RARE_TOKEN> . rpc . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . user . <RARE_TOKEN> . rpc . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . gwt . client . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . gwt . client . <RARE_TOKEN> ; </a> 
<a> import java . io . OutputStream ; </a> 
<a> import java . io . <RARE_TOKEN> ; </a> 
<a> import java . io . <RARE_TOKEN> ; </a> 
<a> import java . io . Serializable ; </a> 
<a> import java . util . List ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> @ Override </a> 
<a> public <RARE_TOKEN> <RARE_TOKEN> ( <RARE_TOKEN> logger , <RARE_TOKEN> context , String <RARE_TOKEN> ) throws <RARE_TOKEN> { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = context . <RARE_TOKEN> ( ) ; </a> 
<a> String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> String <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) + <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = context . <RARE_TOKEN> ( logger , <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> try { </a> 
<a> JClassType type = <RARE_TOKEN> . getType ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> annotation = type . <RARE_TOKEN> ( <RARE_TOKEN> . class ) ; </a> 
<a> if ( annotation == null ) { </a> 
<a> logger . log ( <RARE_TOKEN> . <RARE_TOKEN> , <RARE_TOKEN> <RARE_TOKEN> annotation <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> " + <RARE_TOKEN> ) ; </a> 
<a> throw new <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( </a> 
<a> logger , context . <RARE_TOKEN> ( ) , context ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( </a> 
<a> logger , context . <RARE_TOKEN> ( ) , context ) ; </a> 
<a> for ( Class < ? extends Serializable > <RARE_TOKEN> : annotation . value ( ) ) { </a> 
<a> int <RARE_TOKEN> = 0 ; </a> 
<a> if ( <RARE_TOKEN> . <RARE_TOKEN> ( ) ) { </a> 
<a> while ( <RARE_TOKEN> . <RARE_TOKEN> ( ) ) { </a> 
<a> <RARE_TOKEN> = ( Class < ? extends Serializable > ) <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> ++ ; </a> 
<a> } </a> 
<a> } </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = <RARE_TOKEN> . getType ( <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> while ( <RARE_TOKEN> > 0 ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> -- ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( logger , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( logger , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> OutputStream <RARE_TOKEN> = context . <RARE_TOKEN> ( logger , <RARE_TOKEN> + <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> writer = new <RARE_TOKEN> ( new <RARE_TOKEN> ( <RARE_TOKEN> ) ) ; </a> 
<a> writer . write ( <RARE_TOKEN> ) ; </a> 
<a> writer . write ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> from <RARE_TOKEN> ) ; </a> 
<a> writer . write ( <RARE_TOKEN> ) ; </a> 
<a> writer . flush ( ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( writer ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = <RARE_TOKEN> . build ( logger ) ; </a> 
<a> writer . write ( <RARE_TOKEN> ) ; </a> 
<a> writer . write ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> from <RARE_TOKEN> ) ; </a> 
<a> writer . write ( <RARE_TOKEN> ) ; </a> 
<a> writer . flush ( ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( writer ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = <RARE_TOKEN> . build ( logger ) ; </a> 
<a> writer . close ( ) ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> context . <RARE_TOKEN> ( logger , <RARE_TOKEN> ) . <RARE_TOKEN> ( true ) ; </a> 
<a> } </a> 
<a> final String <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( logger , <RARE_TOKEN> , <RARE_TOKEN> , context , <RARE_TOKEN> + <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> String <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( logger ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> . class . getName ( ) ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> . class . getName ( ) ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( context , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . print ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> = new " + <RARE_TOKEN> + <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . print ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . print ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> + annotation . mode ( ) . name ( ) + <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . print ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> + annotation . <RARE_TOKEN> ( ) . name ( ) + <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( logger ) ; </a> 
<a> if ( annotation . mode ( ) == <RARE_TOKEN> . <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> data = new <RARE_TOKEN> ( type . getQualifiedSourceName ( ) ) ; </a> 
<a> for ( <RARE_TOKEN> t : <RARE_TOKEN> . <RARE_TOKEN> ( ) ) { </a> 
<a> if ( ! ( t instanceof JClassType ) ) { </a> 
<a> continue ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> [ ] <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( context . <RARE_TOKEN> ( ) , ( JClassType ) t ) ; </a> 
<a> List < String > names = <RARE_TOKEN> . create ( ) ; </a> 
<a> for ( int i = 0 , j = <RARE_TOKEN> . length ; i < j ; i ++ ) { </a> 
<a> names = <RARE_TOKEN> . add ( names , <RARE_TOKEN> [ i ] . getName ( ) ) ; </a> 
<a> } </a> 
<a> data . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ( t ) , names ) ; </a> 
<a> } </a> 
<a> context . <RARE_TOKEN> ( logger , data ) ; </a> 
<a> } </a> 
<a> } catch ( <RARE_TOKEN> e ) { </a> 
<a> logger . log ( <RARE_TOKEN> . <RARE_TOKEN> , "" , e ) ; </a> 
<a> throw new <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> return new <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> , <RARE_TOKEN> + <RARE_TOKEN> + <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . gwt . <RARE_TOKEN> ; </a> 
<a> public class <RARE_TOKEN> { </a> 
<a> public static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> public static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . gwt . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . core . client . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . core . client . GWT ; </a> 
<a> import com . google . gwt . core . client . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . <RARE_TOKEN> . client . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . <RARE_TOKEN> . client . <RARE_TOKEN> ; </a> 
<a> public class <RARE_TOKEN> implements <RARE_TOKEN> { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> GWT . create ( <RARE_TOKEN> . class ) ; </a> 
<a> GWT . create ( <RARE_TOKEN> . class ) ; </a> 
<a> GWT . create ( <RARE_TOKEN> . class ) ; </a> 
<a> GWT . create ( <RARE_TOKEN> . class ) ; </a> 
<a> GWT . create ( <RARE_TOKEN> . class ) ; </a> 
<a> GWT . create ( <RARE_TOKEN> . class ) ; </a> 
<a> GWT . create ( <RARE_TOKEN> . class ) ; </a> 
<a> <RARE_TOKEN> ( GWT . <RARE_TOKEN> ( ) + <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . get ( ) . <RARE_TOKEN> ( new <RARE_TOKEN> . <RARE_TOKEN> ( ) { </a> 
<a> @ Override </a> 
<a> public void execute ( ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> } </a> 
<a> protected void <RARE_TOKEN> ( String source ) { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = <RARE_TOKEN> . get ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( source ) ; </a> 
<a> <RARE_TOKEN> . get ( ) . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> private native void <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . gwt . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . gwt . client . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . gwt . client . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . gwt . client . <RARE_TOKEN> ; </a> 
<a> @ <RARE_TOKEN> ( value = String . class , mode = <RARE_TOKEN> . <RARE_TOKEN> , <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ) </a> 
<a> abstract public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . gwt . <RARE_TOKEN> ; </a> 
<a> import org . timepedia . exporter . client . <RARE_TOKEN> ; </a> 
<a> import org . timepedia . exporter . client . <RARE_TOKEN> ; </a> 
<a> import org . timepedia . exporter . client . <RARE_TOKEN> ; </a> 
<a> import org . timepedia . exporter . client . <RARE_TOKEN> ; </a> 
<a> @ <RARE_TOKEN> </a> 
<a> @ <RARE_TOKEN> ( <RARE_TOKEN> ) </a> 
<a> @ <RARE_TOKEN> </a> 
<a> public interface <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> public void execute ( ) ; </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . gwt . <RARE_TOKEN> ; </a> 
<a> import org . timepedia . exporter . client . <RARE_TOKEN> ; </a> 
<a> import org . timepedia . exporter . client . <RARE_TOKEN> ; </a> 
<a> import org . timepedia . exporter . client . <RARE_TOKEN> ; </a> 
<a> import org . timepedia . exporter . client . <RARE_TOKEN> ; </a> 
<a> @ <RARE_TOKEN> </a> 
<a> @ <RARE_TOKEN> ( <RARE_TOKEN> ) </a> 
<a> @ <RARE_TOKEN> </a> 
<a> public interface <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> public void execute ( int <RARE_TOKEN> , int <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . gwt . <RARE_TOKEN> ; </a> 
<a> import org . timepedia . exporter . client . <RARE_TOKEN> ; </a> 
<a> import org . timepedia . exporter . client . <RARE_TOKEN> ; </a> 
<a> import org . timepedia . exporter . client . <RARE_TOKEN> ; </a> 
<a> import org . timepedia . exporter . client . <RARE_TOKEN> ; </a> 
<a> @ <RARE_TOKEN> </a> 
<a> @ <RARE_TOKEN> ( <RARE_TOKEN> ) </a> 
<a> @ <RARE_TOKEN> </a> 
<a> public interface <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> public void execute ( ) ; </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . gwt . <RARE_TOKEN> ; </a> 
<a> import org . timepedia . exporter . client . <RARE_TOKEN> ; </a> 
<a> import org . timepedia . exporter . client . <RARE_TOKEN> ; </a> 
<a> import org . timepedia . exporter . client . <RARE_TOKEN> ; </a> 
<a> import org . timepedia . exporter . client . <RARE_TOKEN> ; </a> 
<a> @ <RARE_TOKEN> </a> 
<a> @ <RARE_TOKEN> ( <RARE_TOKEN> ) </a> 
<a> @ <RARE_TOKEN> </a> 
<a> public interface <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> public void execute ( String error , boolean <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . gwt . <RARE_TOKEN> ; </a> 
<a> import org . timepedia . exporter . client . <RARE_TOKEN> ; </a> 
<a> import org . timepedia . exporter . client . <RARE_TOKEN> ; </a> 
<a> import org . timepedia . exporter . client . <RARE_TOKEN> ; </a> 
<a> import org . timepedia . exporter . client . <RARE_TOKEN> ; </a> 
<a> @ <RARE_TOKEN> </a> 
<a> @ <RARE_TOKEN> ( <RARE_TOKEN> ) </a> 
<a> @ <RARE_TOKEN> </a> 
<a> public interface <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> public void execute ( ) ; </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . gwt . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . core . client . JavaScriptObject ; </a> 
<a> import org . timepedia . exporter . client . <RARE_TOKEN> ; </a> 
<a> import org . timepedia . exporter . client . <RARE_TOKEN> ; </a> 
<a> import org . timepedia . exporter . client . <RARE_TOKEN> ; </a> 
<a> import org . timepedia . exporter . client . <RARE_TOKEN> ; </a> 
<a> @ <RARE_TOKEN> </a> 
<a> @ <RARE_TOKEN> ( <RARE_TOKEN> ) </a> 
<a> @ <RARE_TOKEN> </a> 
<a> public interface <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> public void execute ( JavaScriptObject message ) ; </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . gwt . poll ; </a> 
<a> import org . atmosphere . cpr . AtmosphereResourceEvent ; </a> 
<a> import org . atmosphere . handler . <RARE_TOKEN> ; </a> 
<a> import javax . servlet . http . HttpServletRequest ; </a> 
<a> import javax . servlet . http . HttpServletResponse ; </a> 
<a> import java . io . IOException ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( AtmosphereResourceEvent < HttpServletRequest , HttpServletResponse > event ) throws IOException { </a> 
<a> if ( event . isCancelled ( ) || event . getMessage ( ) == null ) { </a> 
<a> return ; </a> 
<a> } </a> 
<a> HttpServletRequest request = event . getResource ( ) . getRequest ( ) ; </a> 
<a> if ( Boolean . <RARE_TOKEN> . equals ( request . getAttribute ( <RARE_TOKEN> . <RARE_TOKEN> ) ) </a> 
<a> || request . getAttribute ( <RARE_TOKEN> . <RARE_TOKEN> ) == null ) { </a> 
<a> return ; </a> 
<a> } </a> 
<a> boolean success = false ; </a> 
<a> try { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( event . getResource ( ) , event . getMessage ( ) ) ; </a> 
<a> success = true ; </a> 
<a> } catch ( IllegalArgumentException ex ) { </a> 
<a> } </a> 
<a> if ( success && event . <RARE_TOKEN> ( ) ) { </a> 
<a> request . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> event . getResource ( ) . resume ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . gwt . poll ; </a> 
<a> import com . google . gwt . user . client . rpc . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . user . client . rpc . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . user . server . rpc . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . user . server . rpc . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . user . server . rpc . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . user . server . rpc . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . user . server . rpc . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . user . server . rpc . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . user . server . rpc . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . user . server . rpc . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . cpr . AtmosphereResource ; </a> 
<a> import org . atmosphere . cpr . Broadcaster ; </a> 
<a> import org . atmosphere . cpr . BroadcasterFactory ; </a> 
<a> import org . atmosphere . cpr . FrameworkConfig ; </a> 
<a> import org . atmosphere . cpr . <RARE_TOKEN> ; </a> 
<a> import javax . servlet . <RARE_TOKEN> ; </a> 
<a> import javax . servlet . ServletException ; </a> 
<a> import javax . servlet . http . <RARE_TOKEN> ; </a> 
<a> import javax . servlet . http . HttpServletRequest ; </a> 
<a> import javax . servlet . http . HttpServletResponse ; </a> 
<a> import java . io . IOException ; </a> 
<a> import java . io . InputStream ; </a> 
<a> import java . net . <RARE_TOKEN> ; </a> 
<a> import java . net . URL ; </a> 
<a> import java . text . <RARE_TOKEN> ; </a> 
<a> import java . util . HashMap ; </a> 
<a> import java . util . Map ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> </a> 
<a> implements <RARE_TOKEN> { </a> 
<a> public final static String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> public final static String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> public class <RARE_TOKEN> { </a> 
<a> private AtmosphereResource < HttpServletRequest , HttpServletResponse > <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> ( AtmosphereResource <RARE_TOKEN> ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( Object message ) throws IOException { </a> 
<a> try { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> , message ) ; </a> 
<a> } finally { </a> 
<a> <RARE_TOKEN> . getRequest ( ) . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . resume ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public Broadcaster getBroadcaster ( ) { </a> 
<a> return <RARE_TOKEN> . getBroadcaster ( ) ; </a> 
<a> } </a> 
<a> public Broadcaster <RARE_TOKEN> ( String ID ) { </a> 
<a> try { </a> 
<a> Broadcaster b = BroadcasterFactory . <RARE_TOKEN> ( ) . get ( <RARE_TOKEN> . class , ID ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( b ) ; </a> 
<a> return b ; </a> 
<a> } catch ( <RARE_TOKEN> e ) { </a> 
<a> } catch ( <RARE_TOKEN> e ) { </a> 
<a> } </a> 
<a> return null ; </a> 
<a> } </a> 
<a> } </a> 
<a> protected <RARE_TOKEN> suspend ( ) { </a> 
<a> AtmosphereResource < HttpServletRequest , HttpServletResponse > <RARE_TOKEN> = <RARE_TOKEN> ( ) ; </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> throw new <RARE_TOKEN> ( "Failed to <RARE_TOKEN> <RARE_TOKEN> resource <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> , null ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> . getRequest ( ) . setAttribute ( <RARE_TOKEN> , true ) ; </a> 
<a> <RARE_TOKEN> . suspend ( - 1 , false ) ; </a> 
<a> return new <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> protected <RARE_TOKEN> suspend ( long timeout ) { </a> 
<a> AtmosphereResource < HttpServletRequest , HttpServletResponse > <RARE_TOKEN> = <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> . getRequest ( ) . setAttribute ( <RARE_TOKEN> , true ) ; </a> 
<a> <RARE_TOKEN> . suspend ( timeout , false ) ; </a> 
<a> return new <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> protected boolean <RARE_TOKEN> ( ) { </a> 
<a> AtmosphereResource < HttpServletRequest , HttpServletResponse > <RARE_TOKEN> = <RARE_TOKEN> ( ) ; </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> throw new <RARE_TOKEN> ( "Failed to <RARE_TOKEN> <RARE_TOKEN> resource <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> , null ) ; </a> 
<a> } </a> 
<a> Boolean <RARE_TOKEN> = ( Boolean ) <RARE_TOKEN> . getRequest ( ) . getAttribute ( <RARE_TOKEN> ) ; </a> 
<a> return Boolean . <RARE_TOKEN> . equals ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> static void <RARE_TOKEN> ( AtmosphereResource < HttpServletRequest , HttpServletResponse > resource , Object message ) throws IOException { </a> 
<a> try { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = ( <RARE_TOKEN> ) resource . getRequest ( ) . getAttribute ( <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> String response = <RARE_TOKEN> ( <RARE_TOKEN> , message ) ; </a> 
<a> <RARE_TOKEN> ( resource . getRequest ( ) , resource . getResponse ( ) , </a> 
<a> resource . <RARE_TOKEN> ( ) . getServletContext ( ) , </a> 
<a> response ) ; </a> 
<a> } catch ( <RARE_TOKEN> ex ) { </a> 
<a> try { </a> 
<a> String error = <RARE_TOKEN> . <RARE_TOKEN> ( null , ex ) ; </a> 
<a> <RARE_TOKEN> ( resource . getRequest ( ) , resource . getResponse ( ) , </a> 
<a> resource . <RARE_TOKEN> ( ) . getServletContext ( ) , </a> 
<a> error ) ; </a> 
<a> } catch ( <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> throw new IOException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } catch ( <RARE_TOKEN> ex ) { </a> 
<a> throw new IOException ( ex ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> static String <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> , Object message ) throws <RARE_TOKEN> { </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> . <RARE_TOKEN> ( ) == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> String <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ( ) , message , </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) , <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( ) . getRequest ( ) . setAttribute ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> private AtmosphereResource < HttpServletRequest , HttpServletResponse > <RARE_TOKEN> ( ) { </a> 
<a> AtmosphereResource < HttpServletRequest , HttpServletResponse > <RARE_TOKEN> = </a> 
<a> ( AtmosphereResource < HttpServletRequest , HttpServletResponse > ) </a> 
<a> <RARE_TOKEN> ( ) . getAttribute ( FrameworkConfig . <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> throw new <RARE_TOKEN> ( "Failed to <RARE_TOKEN> <RARE_TOKEN> resource <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> , null ) ; </a> 
<a> } </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public final void <RARE_TOKEN> ( HttpServletRequest request , </a> 
<a> HttpServletResponse response ) throws IOException , ServletException , </a> 
<a> <RARE_TOKEN> { </a> 
<a> String <RARE_TOKEN> = <RARE_TOKEN> ( request ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> String <RARE_TOKEN> = <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> if ( ! <RARE_TOKEN> ( ) ) { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( request , response , getServletContext ( ) , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> protected static boolean <RARE_TOKEN> ( HttpServletRequest request , </a> 
<a> HttpServletResponse response , String <RARE_TOKEN> ) { </a> 
<a> return <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> protected static void <RARE_TOKEN> ( HttpServletRequest request , </a> 
<a> HttpServletResponse response , <RARE_TOKEN> context , String <RARE_TOKEN> ) throws IOException { </a> 
<a> boolean <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( request ) </a> 
<a> && <RARE_TOKEN> ( request , response , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( context , response , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> static <RARE_TOKEN> <RARE_TOKEN> ( <RARE_TOKEN> servlet , </a> 
<a> HttpServletRequest request , String <RARE_TOKEN> , String <RARE_TOKEN> ) { </a> 
<a> String <RARE_TOKEN> = request . <RARE_TOKEN> ( ) ; </a> 
<a> String <RARE_TOKEN> = null ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> try { </a> 
<a> <RARE_TOKEN> = new URL ( <RARE_TOKEN> ) . getPath ( ) ; </a> 
<a> } catch ( <RARE_TOKEN> ex ) { </a> 
<a> servlet . log ( <RARE_TOKEN> <RARE_TOKEN> " + <RARE_TOKEN> , ex ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> <RARE_TOKEN> serializationPolicy = null ; </a> 
<a> if ( <RARE_TOKEN> == null || ! <RARE_TOKEN> . startsWith ( <RARE_TOKEN> ) ) { </a> 
<a> String message = <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> path <RARE_TOKEN> " </a> 
<a> + <RARE_TOKEN> </a> 
<a> + ", is not in the <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> this <RARE_TOKEN> " </a> 
<a> + <RARE_TOKEN> </a> 
<a> + <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> not be <RARE_TOKEN> <RARE_TOKEN> or <RARE_TOKEN> client <RARE_TOKEN> server code <RARE_TOKEN> out of <RARE_TOKEN> ; </a> 
<a> servlet . log ( message , null ) ; </a> 
<a> } else { </a> 
<a> String <RARE_TOKEN> = <RARE_TOKEN> . substring ( <RARE_TOKEN> . length ( ) ) ; </a> 
<a> String <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> </a> 
<a> + <RARE_TOKEN> ) ; </a> 
<a> InputStream is = servlet . getServletContext ( ) . <RARE_TOKEN> ( </a> 
<a> <RARE_TOKEN> ) ; </a> 
<a> try { </a> 
<a> if ( is != null ) { </a> 
<a> try { </a> 
<a> serializationPolicy = <RARE_TOKEN> . <RARE_TOKEN> ( is , </a> 
<a> null ) ; </a> 
<a> } catch ( <RARE_TOKEN> e ) { </a> 
<a> servlet . log ( <RARE_TOKEN> <RARE_TOKEN> to <RARE_TOKEN> the policy file <RARE_TOKEN> </a> 
<a> + <RARE_TOKEN> + <RARE_TOKEN> , e ) ; </a> 
<a> } catch ( IOException e ) { </a> 
<a> servlet . log ( <RARE_TOKEN> <RARE_TOKEN> not read the policy file <RARE_TOKEN> </a> 
<a> + <RARE_TOKEN> + <RARE_TOKEN> , e ) ; </a> 
<a> } </a> 
<a> } else { </a> 
<a> String message = <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> policy file <RARE_TOKEN> </a> 
<a> + <RARE_TOKEN> </a> 
<a> + <RARE_TOKEN> <RARE_TOKEN> not <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> to <RARE_TOKEN> <RARE_TOKEN> in this <RARE_TOKEN> ; </a> 
<a> servlet . log ( message ) ; </a> 
<a> } </a> 
<a> } finally { </a> 
<a> if ( is != null ) { </a> 
<a> try { </a> 
<a> is . close ( ) ; </a> 
<a> } catch ( IOException e ) { </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> return serializationPolicy ; </a> 
<a> } </a> 
<a> private final Map < String , <RARE_TOKEN> > <RARE_TOKEN> = new HashMap < String , <RARE_TOKEN> > ( ) ; </a> 
<a> public <RARE_TOKEN> ( ) { </a> 
<a> } </a> 
<a> public final <RARE_TOKEN> <RARE_TOKEN> ( String <RARE_TOKEN> , </a> 
<a> String <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> serializationPolicy = <RARE_TOKEN> ( </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> if ( serializationPolicy != null ) { </a> 
<a> return serializationPolicy ; </a> 
<a> } </a> 
<a> serializationPolicy = <RARE_TOKEN> ( <RARE_TOKEN> ( ) , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> if ( serializationPolicy == null ) { </a> 
<a> log ( </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> to get the <RARE_TOKEN> <RARE_TOKEN> </a> 
<a> + <RARE_TOKEN> </a> 
<a> + <RARE_TOKEN> for <RARE_TOKEN> <RARE_TOKEN> </a> 
<a> + <RARE_TOKEN> </a> 
<a> + <RARE_TOKEN> a <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> policy <RARE_TOKEN> be <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> a <RARE_TOKEN> , </a> 
<a> null ) ; </a> 
<a> serializationPolicy = <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> , serializationPolicy ) ; </a> 
<a> return serializationPolicy ; </a> 
<a> } </a> 
<a> public String <RARE_TOKEN> ( String <RARE_TOKEN> ) throws <RARE_TOKEN> { </a> 
<a> try { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> , this . getClass ( ) , this ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> return <RARE_TOKEN> . <RARE_TOKEN> ( this , <RARE_TOKEN> . <RARE_TOKEN> ( ) , </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) , <RARE_TOKEN> . <RARE_TOKEN> ( ) , </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> } catch ( <RARE_TOKEN> ex ) { </a> 
<a> log ( </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> while <RARE_TOKEN> this <RARE_TOKEN> , </a> 
<a> ex ) ; </a> 
<a> return <RARE_TOKEN> . <RARE_TOKEN> ( null , ex ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> protected <RARE_TOKEN> <RARE_TOKEN> ( </a> 
<a> HttpServletRequest request , String <RARE_TOKEN> , String <RARE_TOKEN> ) { </a> 
<a> return <RARE_TOKEN> ( this , request , <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> protected void <RARE_TOKEN> ( String <RARE_TOKEN> ) { </a> 
<a> } </a> 
<a> protected void <RARE_TOKEN> ( String <RARE_TOKEN> ) { </a> 
<a> } </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> ( </a> 
<a> String <RARE_TOKEN> , String <RARE_TOKEN> ) { </a> 
<a> synchronized ( <RARE_TOKEN> ) { </a> 
<a> return <RARE_TOKEN> . get ( <RARE_TOKEN> + <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( String <RARE_TOKEN> , </a> 
<a> String <RARE_TOKEN> , <RARE_TOKEN> serializationPolicy ) { </a> 
<a> synchronized ( <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> . put ( <RARE_TOKEN> + <RARE_TOKEN> , </a> 
<a> serializationPolicy ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . gwt . server ; </a> 
<a> import org . atmosphere . cpr . AtmosphereResource ; </a> 
<a> import org . atmosphere . cpr . Broadcaster ; </a> 
<a> import javax . servlet . http . HttpServletRequest ; </a> 
<a> import javax . servlet . http . HttpServletResponse ; </a> 
<a> import javax . servlet . http . <RARE_TOKEN> ; </a> 
<a> import java . io . Serializable ; </a> 
<a> import java . util . List ; </a> 
<a> public interface <RARE_TOKEN> { </a> 
<a> public Broadcaster getBroadcaster ( ) ; </a> 
<a> public <RARE_TOKEN> getSession ( ) ; </a> 
<a> public <RARE_TOKEN> getSession ( boolean create ) ; </a> 
<a> public int <RARE_TOKEN> ( ) ; </a> 
<a> @ Deprecated </a> 
<a> public void broadcast ( Serializable message ) ; </a> 
<a> public void post ( Serializable message ) ; </a> 
<a> @ Deprecated </a> 
<a> public void broadcast ( List < Serializable > messages ) ; </a> 
<a> public void post ( List < Serializable > messages ) ; </a> 
<a> public AtmosphereResource < HttpServletRequest , HttpServletResponse > <RARE_TOKEN> ( ) ; </a> 
<a> public HttpServletRequest getRequest ( ) ; </a> 
<a> public HttpServletResponse getResponse ( ) ; </a> 
<a> public boolean <RARE_TOKEN> ( ) ; </a> 
<a> public < T > void setAttribute ( String name , T value ) ; </a> 
<a> public < T > T getAttribute ( String name ) ; </a> 
<a> public int <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . gwt . server ; </a> 
<a> import java . io . IOException ; </a> 
<a> import java . io . Serializable ; </a> 
<a> import java . util . List ; </a> 
<a> public interface <RARE_TOKEN> { </a> 
<a> public void write ( Serializable message ) throws IOException ; </a> 
<a> public void write ( Serializable message , boolean flush ) throws IOException ; </a> 
<a> public void write ( List < ? extends Serializable > messages ) throws IOException ; </a> 
<a> public void write ( List < ? extends Serializable > messages , boolean flush ) throws IOException ; </a> 
<a> public void <RARE_TOKEN> ( ) throws IOException ; </a> 
<a> public void <RARE_TOKEN> ( ) throws IOException ; </a> 
<a> public boolean <RARE_TOKEN> ( ) ; </a> 
<a> public long <RARE_TOKEN> ( ) ; </a> 
<a> public void <RARE_TOKEN> ( int statusCode ) throws IOException ; </a> 
<a> public void <RARE_TOKEN> ( int statusCode , String message ) throws IOException ; </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . gwt . server ; </a> 
<a> import java . io . Serializable ; </a> 
<a> public interface <RARE_TOKEN> extends Serializable { </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . gwt . server . <RARE_TOKEN> ; </a> 
<a> import java . io . IOException ; </a> 
<a> import java . io . OutputStream ; </a> 
<a> public final class <RARE_TOKEN> { </a> 
<a> private int [ ] window ; </a> 
<a> private int <RARE_TOKEN> ; </a> 
<a> private int <RARE_TOKEN> ; </a> 
<a> private int <RARE_TOKEN> ; </a> 
<a> private char [ ] <RARE_TOKEN> ; </a> 
<a> private char [ ] <RARE_TOKEN> ; </a> 
<a> private byte [ ] <RARE_TOKEN> ; </a> 
<a> private int <RARE_TOKEN> ; </a> 
<a> private int <RARE_TOKEN> ; </a> 
<a> private int <RARE_TOKEN> ; </a> 
<a> private int <RARE_TOKEN> ; </a> 
<a> private int <RARE_TOKEN> ; </a> 
<a> private int <RARE_TOKEN> ; </a> 
<a> private int <RARE_TOKEN> ; </a> 
<a> private int <RARE_TOKEN> ; </a> 
<a> private int <RARE_TOKEN> ; </a> 
<a> private int <RARE_TOKEN> ; </a> 
<a> private int <RARE_TOKEN> ; </a> 
<a> private int <RARE_TOKEN> ; </a> 
<a> private boolean <RARE_TOKEN> ; </a> 
<a> private int [ ] buffer ; </a> 
<a> private int <RARE_TOKEN> ; </a> 
<a> private OutputStream out ; </a> 
<a> private int <RARE_TOKEN> ; </a> 
<a> private int <RARE_TOKEN> ; </a> 
<a> private byte [ ] <RARE_TOKEN> ; </a> 
<a> private int <RARE_TOKEN> ; </a> 
<a> private boolean <RARE_TOKEN> ; </a> 
<a> public static final int <RARE_TOKEN> = 1 ; </a> 
<a> public static final int <RARE_TOKEN> = 2 ; </a> 
<a> public static final int <RARE_TOKEN> = 3 ; </a> 
<a> public static final int <RARE_TOKEN> = 4 ; </a> 
<a> public <RARE_TOKEN> ( ) { </a> 
<a> this ( 0 , 15 ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( int level ) { </a> 
<a> this ( level , 15 ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( int level , int windowBits ) { </a> 
<a> if ( windowBits < 9 || windowBits > 15 ) </a> 
<a> throw new IllegalArgumentException ( <RARE_TOKEN> <RARE_TOKEN> window <RARE_TOKEN> <RARE_TOKEN> " + windowBits ) ; </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> int <RARE_TOKEN> = 1 < < windowBits ; </a> 
<a> window = new int [ <RARE_TOKEN> ] ; </a> 
<a> <RARE_TOKEN> = new char [ <RARE_TOKEN> ] ; </a> 
<a> <RARE_TOKEN> = new char [ <RARE_TOKEN> ] ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> - <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> - <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> - <RARE_TOKEN> ; </a> 
<a> if ( level == 0 ) </a> 
<a> level = <RARE_TOKEN> ; </a> 
<a> switch ( level ) { </a> 
<a> case <RARE_TOKEN> : </a> 
<a> <RARE_TOKEN> = 16 ; </a> 
<a> <RARE_TOKEN> = 8 ; </a> 
<a> <RARE_TOKEN> = 8 ; </a> 
<a> <RARE_TOKEN> = 4 ; </a> 
<a> <RARE_TOKEN> = 4 ; </a> 
<a> break ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = 32 ; </a> 
<a> break ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> break ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> <RARE_TOKEN> = true ; </a> 
<a> break ; </a> 
<a> default : </a> 
<a> throw new IllegalArgumentException ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> " + level ) ; </a> 
<a> } </a> 
<a> buffer = new int [ <RARE_TOKEN> ] ; </a> 
<a> <RARE_TOKEN> = new byte [ 4 * <RARE_TOKEN> + <RARE_TOKEN> ] ; </a> 
<a> <RARE_TOKEN> = new byte [ <RARE_TOKEN> ] ; </a> 
<a> } </a> 
<a> public OutputStream <RARE_TOKEN> ( ) { </a> 
<a> return out ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( OutputStream out ) { </a> 
<a> this . out = out ; </a> 
<a> } </a> 
<a> private static int <RARE_TOKEN> ( int len , int dist ) { </a> 
<a> int <RARE_TOKEN> , <RARE_TOKEN> ; </a> 
<a> if ( len <= 10 ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> + len ; </a> 
<a> <RARE_TOKEN> = 0 ; </a> 
<a> } else if ( len == <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = 0 ; </a> 
<a> } else { </a> 
<a> int i ; </a> 
<a> for ( i = 9 ; i < 29 ; i ++ ) </a> 
<a> if ( <RARE_TOKEN> [ i ] > len ) </a> 
<a> break ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> + i ; </a> 
<a> <RARE_TOKEN> = len - <RARE_TOKEN> [ i - 1 ] ; </a> 
<a> } </a> 
<a> int <RARE_TOKEN> , <RARE_TOKEN> ; </a> 
<a> if ( dist <= 4 ) { </a> 
<a> <RARE_TOKEN> = dist - 1 ; </a> 
<a> <RARE_TOKEN> = 0 ; </a> 
<a> } else { </a> 
<a> int i ; </a> 
<a> for ( i = 5 ; i < <RARE_TOKEN> ; i ++ ) </a> 
<a> if ( <RARE_TOKEN> [ i ] > dist ) </a> 
<a> break ; </a> 
<a> <RARE_TOKEN> = i - 1 ; </a> 
<a> <RARE_TOKEN> = dist - <RARE_TOKEN> [ i - 1 ] ; </a> 
<a> } </a> 
<a> return <RARE_TOKEN> + ( <RARE_TOKEN> < < 9 ) + ( <RARE_TOKEN> < < 14 ) + ( <RARE_TOKEN> < < 19 ) ; </a> 
<a> } </a> 
<a> private static int <RARE_TOKEN> ( int [ ] <RARE_TOKEN> , int <RARE_TOKEN> , char [ ] <RARE_TOKEN> , int <RARE_TOKEN> , int dist , int len , int end , int <RARE_TOKEN> , int <RARE_TOKEN> ) { </a> 
<a> int n = <RARE_TOKEN> ; </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> loop : </a> 
<a> while ( <RARE_TOKEN> -- > 0 ) { </a> 
<a> int d = <RARE_TOKEN> [ n ] ; </a> 
<a> if ( d == 0 ) </a> 
<a> return 0 ; </a> 
<a> dist += d ; </a> 
<a> if ( dist > <RARE_TOKEN> ) </a> 
<a> return 0 ; </a> 
<a> n = ( n - d ) & <RARE_TOKEN> ; </a> 
<a> int <RARE_TOKEN> = len ; </a> 
<a> int j = <RARE_TOKEN> , k = n ; </a> 
<a> if ( <RARE_TOKEN> >= 3 ) { </a> 
<a> while ( <RARE_TOKEN> >= 3 ) { </a> 
<a> if ( <RARE_TOKEN> [ j ] != <RARE_TOKEN> [ k ] ) </a> 
<a> continue loop ; </a> 
<a> <RARE_TOKEN> -= 3 ; </a> 
<a> j = ( j + 3 ) & <RARE_TOKEN> ; </a> 
<a> k = ( k + 3 ) & <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> switch ( <RARE_TOKEN> ) { </a> 
<a> case 1 : </a> 
<a> j = ( j - 2 ) & <RARE_TOKEN> ; </a> 
<a> k = ( k - 2 ) & <RARE_TOKEN> ; </a> 
<a> if ( <RARE_TOKEN> [ j ] != <RARE_TOKEN> [ k ] ) </a> 
<a> continue loop ; </a> 
<a> k = ( k + 3 ) & <RARE_TOKEN> ; </a> 
<a> break ; </a> 
<a> case 2 : </a> 
<a> j = ( j - 1 ) & <RARE_TOKEN> ; </a> 
<a> k = ( k - 1 ) & <RARE_TOKEN> ; </a> 
<a> if ( <RARE_TOKEN> [ j ] != <RARE_TOKEN> [ k ] ) </a> 
<a> continue loop ; </a> 
<a> k = ( k + 3 ) & <RARE_TOKEN> ; </a> 
<a> break ; </a> 
<a> } </a> 
<a> } else { </a> 
<a> if ( <RARE_TOKEN> [ j ] != <RARE_TOKEN> [ k ] ) </a> 
<a> continue loop ; </a> 
<a> k = ( k + <RARE_TOKEN> ) & <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> [ k ] == end ) </a> 
<a> return dist ; </a> 
<a> } </a> 
<a> return 0 ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( byte [ ] buf , int <RARE_TOKEN> , int <RARE_TOKEN> ) { </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> . length ; </a> 
<a> int <RARE_TOKEN> = ( <RARE_TOKEN> > > > 1 ) ; </a> 
<a> while ( <RARE_TOKEN> < <RARE_TOKEN> ) { </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> - <RARE_TOKEN> ; </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> - <RARE_TOKEN> ; </a> 
<a> if ( <RARE_TOKEN> > <RARE_TOKEN> ) </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> if ( <RARE_TOKEN> > <RARE_TOKEN> ) { </a> 
<a> System . <RARE_TOKEN> ( buf , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> System . <RARE_TOKEN> ( buf , <RARE_TOKEN> + <RARE_TOKEN> , <RARE_TOKEN> , 0 , <RARE_TOKEN> - <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> - <RARE_TOKEN> ; </a> 
<a> } else { </a> 
<a> System . <RARE_TOKEN> ( buf , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> += <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> += <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( byte [ ] buf , int off , int len ) throws IOException { </a> 
<a> if ( len == 0 ) </a> 
<a> return ; </a> 
<a> int <RARE_TOKEN> = off ; </a> 
<a> if ( <RARE_TOKEN> ) { </a> 
<a> int [ ] sb = buffer ; </a> 
<a> int sbPtr = <RARE_TOKEN> ; </a> 
<a> int <RARE_TOKEN> = sb . length ; </a> 
<a> while ( len -- > 0 ) { </a> 
<a> int <RARE_TOKEN> = buf [ off ++ ] & 0xFF ; </a> 
<a> sb [ sbPtr ++ ] = <RARE_TOKEN> ; </a> 
<a> if ( sbPtr == <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( buf , <RARE_TOKEN> , off ) ; </a> 
<a> <RARE_TOKEN> = off ; </a> 
<a> <RARE_TOKEN> ( false , sbPtr ) ; </a> 
<a> sbPtr = 0 ; </a> 
<a> } </a> 
<a> } </a> 
<a> <RARE_TOKEN> = sbPtr ; </a> 
<a> <RARE_TOKEN> ( buf , <RARE_TOKEN> , off ) ; </a> 
<a> return ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> < 2 ) { </a> 
<a> int <RARE_TOKEN> = buf [ off ++ ] & 0xFF ; </a> 
<a> len -- ; </a> 
<a> if ( <RARE_TOKEN> == 0 ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = 1 ; </a> 
<a> if ( len == 0 ) { </a> 
<a> <RARE_TOKEN> ( buf , <RARE_TOKEN> , off ) ; </a> 
<a> return ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> = buf [ off ++ ] & 0xFF ; </a> 
<a> len -- ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> = ( <RARE_TOKEN> < < 8 ) | <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = 2 ; </a> 
<a> <RARE_TOKEN> = 2 ; </a> 
<a> if ( len == 0 ) { </a> 
<a> <RARE_TOKEN> ( buf , <RARE_TOKEN> , off ) ; </a> 
<a> return ; </a> 
<a> } </a> 
<a> } </a> 
<a> int [ ] <RARE_TOKEN> = window ; </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> . length - 1 ; </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> char [ ] <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> char [ ] <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> . length - 1 ; </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> int [ ] sb = buffer ; </a> 
<a> int sbPtr = <RARE_TOKEN> ; </a> 
<a> int <RARE_TOKEN> = sb . length ; </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> loop : </a> 
<a> while ( len -- > 0 ) { </a> 
<a> int <RARE_TOKEN> = buf [ off ++ ] & 0xFF ; </a> 
<a> int <RARE_TOKEN> = ( <RARE_TOKEN> < < 8 ) | <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> & <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> [ <RARE_TOKEN> ] = <RARE_TOKEN> ; </a> 
<a> int h = ( <RARE_TOKEN> + ( <RARE_TOKEN> > > > 4 ) + ( <RARE_TOKEN> > > > 8 ) + ( <RARE_TOKEN> > > > 9 ) - ( <RARE_TOKEN> > > > 16 ) ) & <RARE_TOKEN> ; </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> [ h ] - 1 ; </a> 
<a> int dist ; </a> 
<a> if ( <RARE_TOKEN> < 0 ) { </a> 
<a> dist = 0 ; </a> 
<a> } else { </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> [ <RARE_TOKEN> ] ; </a> 
<a> int <RARE_TOKEN> = ( <RARE_TOKEN> + ( <RARE_TOKEN> > > > 4 ) + ( <RARE_TOKEN> > > > 8 ) + ( <RARE_TOKEN> > > > 9 ) - ( <RARE_TOKEN> > > > 16 ) ) & <RARE_TOKEN> ; </a> 
<a> if ( <RARE_TOKEN> == h ) { </a> 
<a> dist = ( <RARE_TOKEN> - <RARE_TOKEN> ) & <RARE_TOKEN> ; </a> 
<a> } else { </a> 
<a> dist = 0 ; </a> 
<a> } </a> 
<a> } </a> 
<a> <RARE_TOKEN> [ h ] = ( char ) ( <RARE_TOKEN> + 1 ) ; </a> 
<a> <RARE_TOKEN> [ <RARE_TOKEN> ] = ( char ) dist ; </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = ( <RARE_TOKEN> + 1 ) & <RARE_TOKEN> ; </a> 
<a> if ( <RARE_TOKEN> < 2 ) { </a> 
<a> <RARE_TOKEN> ++ ; </a> 
<a> continue loop ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> == 2 ) { </a> 
<a> if ( dist == 0 ) { </a> 
<a> sb [ sbPtr ++ ] = <RARE_TOKEN> > > > 16 ; </a> 
<a> if ( sbPtr == <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( buf , <RARE_TOKEN> , off ) ; </a> 
<a> <RARE_TOKEN> = off ; </a> 
<a> <RARE_TOKEN> ( false , sbPtr ) ; </a> 
<a> sbPtr = 0 ; </a> 
<a> } </a> 
<a> continue loop ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> = dist ; </a> 
<a> <RARE_TOKEN> : </a> 
<a> <RARE_TOKEN> { </a> 
<a> int n = <RARE_TOKEN> ; </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> while ( <RARE_TOKEN> -- > 0 ) { </a> 
<a> if ( <RARE_TOKEN> [ n ] == <RARE_TOKEN> ) </a> 
<a> break <RARE_TOKEN> ; </a> 
<a> int d = <RARE_TOKEN> [ n ] ; </a> 
<a> if ( d == 0 ) </a> 
<a> break ; </a> 
<a> <RARE_TOKEN> += d ; </a> 
<a> if ( <RARE_TOKEN> > <RARE_TOKEN> ) </a> 
<a> break ; </a> 
<a> n = ( n - d ) & <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> = 0 ; </a> 
<a> } </a> 
<a> while ( false ) ; </a> 
<a> if ( <RARE_TOKEN> == 0 ) { </a> 
<a> sb [ sbPtr ++ ] = <RARE_TOKEN> > > > 16 ; </a> 
<a> if ( sbPtr == <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( buf , <RARE_TOKEN> , off ) ; </a> 
<a> <RARE_TOKEN> = off ; </a> 
<a> <RARE_TOKEN> ( false , sbPtr ) ; </a> 
<a> sbPtr = 0 ; </a> 
<a> } </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> = ( <RARE_TOKEN> - <RARE_TOKEN> ) & <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = 3 ; </a> 
<a> if ( <RARE_TOKEN> == <RARE_TOKEN> ) { </a> 
<a> sb [ sbPtr ++ ] = <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> if ( sbPtr == <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( buf , <RARE_TOKEN> , off ) ; </a> 
<a> <RARE_TOKEN> = off ; </a> 
<a> <RARE_TOKEN> ( false , sbPtr ) ; </a> 
<a> sbPtr = 0 ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> = 0 ; </a> 
<a> } </a> 
<a> } </a> 
<a> continue loop ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> [ ( <RARE_TOKEN> - <RARE_TOKEN> ) & <RARE_TOKEN> ] == <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ++ ; </a> 
<a> if ( <RARE_TOKEN> == <RARE_TOKEN> || <RARE_TOKEN> == <RARE_TOKEN> ) { </a> 
<a> sb [ sbPtr ++ ] = <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> if ( sbPtr == <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( buf , <RARE_TOKEN> , off ) ; </a> 
<a> <RARE_TOKEN> = off ; </a> 
<a> <RARE_TOKEN> ( false , sbPtr ) ; </a> 
<a> sbPtr = 0 ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> = 0 ; </a> 
<a> } </a> 
<a> continue loop ; </a> 
<a> } </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> - 2 , <RARE_TOKEN> , <RARE_TOKEN> > <RARE_TOKEN> ? ( <RARE_TOKEN> > > > 2 ) : <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> > 0 ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = ( <RARE_TOKEN> - ( <RARE_TOKEN> - 2 ) - <RARE_TOKEN> ) & <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> ++ ; </a> 
<a> if ( <RARE_TOKEN> == <RARE_TOKEN> || <RARE_TOKEN> == <RARE_TOKEN> ) { </a> 
<a> sb [ sbPtr ++ ] = <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> if ( sbPtr == <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( buf , <RARE_TOKEN> , off ) ; </a> 
<a> <RARE_TOKEN> = off ; </a> 
<a> <RARE_TOKEN> ( false , sbPtr ) ; </a> 
<a> sbPtr = 0 ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> = 0 ; </a> 
<a> } </a> 
<a> continue loop ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> <= <RARE_TOKEN> ) { </a> 
<a> int <RARE_TOKEN> = ( <RARE_TOKEN> - ( <RARE_TOKEN> - 2 ) + 1 ) & <RARE_TOKEN> ; </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> if ( <RARE_TOKEN> > <RARE_TOKEN> ) </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , 0 , <RARE_TOKEN> - 3 , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> > 0 ) { </a> 
<a> sb [ sbPtr ++ ] = <RARE_TOKEN> [ <RARE_TOKEN> ] > > > 16 ; </a> 
<a> if ( sbPtr == <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( buf , <RARE_TOKEN> , off ) ; </a> 
<a> <RARE_TOKEN> = off ; </a> 
<a> <RARE_TOKEN> ( false , sbPtr ) ; </a> 
<a> sbPtr = 0 ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = ( <RARE_TOKEN> - <RARE_TOKEN> ) & <RARE_TOKEN> ; </a> 
<a> if ( <RARE_TOKEN> == <RARE_TOKEN> ) { </a> 
<a> sb [ sbPtr ++ ] = <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> if ( sbPtr == <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( buf , <RARE_TOKEN> , off ) ; </a> 
<a> <RARE_TOKEN> = off ; </a> 
<a> <RARE_TOKEN> ( false , sbPtr ) ; </a> 
<a> sbPtr = 0 ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> = 0 ; </a> 
<a> } </a> 
<a> continue loop ; </a> 
<a> } </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> == 3 && <RARE_TOKEN> > <RARE_TOKEN> ) { </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> [ <RARE_TOKEN> ] ; </a> 
<a> for ( int k = 16 ; k >= 0 ; k -= 8 ) { </a> 
<a> sb [ sbPtr ++ ] = ( <RARE_TOKEN> > > > k ) & 0xFF ; </a> 
<a> if ( sbPtr == <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( buf , <RARE_TOKEN> , off ) ; </a> 
<a> <RARE_TOKEN> = off ; </a> 
<a> <RARE_TOKEN> ( false , sbPtr ) ; </a> 
<a> sbPtr = 0 ; </a> 
<a> } </a> 
<a> } </a> 
<a> } else { </a> 
<a> sb [ sbPtr ++ ] = <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> if ( sbPtr == <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( buf , <RARE_TOKEN> , off ) ; </a> 
<a> <RARE_TOKEN> = off ; </a> 
<a> <RARE_TOKEN> ( false , sbPtr ) ; </a> 
<a> sbPtr = 0 ; </a> 
<a> } </a> 
<a> } </a> 
<a> <RARE_TOKEN> = 1 ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = sbPtr ; </a> 
<a> <RARE_TOKEN> ( buf , <RARE_TOKEN> , off ) ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( ) throws IOException { </a> 
<a> switch ( <RARE_TOKEN> ) { </a> 
<a> case 0 : </a> 
<a> break ; </a> 
<a> case 1 : </a> 
<a> buffer [ <RARE_TOKEN> ++ ] = <RARE_TOKEN> & 0xFF ; </a> 
<a> if ( <RARE_TOKEN> == buffer . length ) </a> 
<a> <RARE_TOKEN> ( false , <RARE_TOKEN> ) ; </a> 
<a> break ; </a> 
<a> case 2 : </a> 
<a> buffer [ <RARE_TOKEN> ++ ] = ( <RARE_TOKEN> > > > 8 ) & 0xFF ; </a> 
<a> if ( <RARE_TOKEN> == buffer . length ) </a> 
<a> <RARE_TOKEN> ( false , <RARE_TOKEN> ) ; </a> 
<a> buffer [ <RARE_TOKEN> ++ ] = <RARE_TOKEN> & 0xFF ; </a> 
<a> if ( <RARE_TOKEN> == buffer . length ) </a> 
<a> <RARE_TOKEN> ( false , <RARE_TOKEN> ) ; </a> 
<a> break ; </a> 
<a> default : </a> 
<a> buffer [ <RARE_TOKEN> ++ ] = <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> == buffer . length ) </a> 
<a> <RARE_TOKEN> ( false , <RARE_TOKEN> ) ; </a> 
<a> break ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> = 0 ; </a> 
<a> } </a> 
<a> private static void <RARE_TOKEN> ( int [ ] val , int off , int len ) { </a> 
<a> if ( len <= 1 ) </a> 
<a> return ; </a> 
<a> int <RARE_TOKEN> = off - 1 ; </a> 
<a> for ( int i = 2 ; i <= len ; i ++ ) { </a> 
<a> int j = i ; </a> 
<a> int v = val [ <RARE_TOKEN> + j ] ; </a> 
<a> while ( j > 1 ) { </a> 
<a> int k = j > > > 1 ; </a> 
<a> int f = val [ <RARE_TOKEN> + k ] ; </a> 
<a> if ( f > v ) </a> 
<a> break ; </a> 
<a> val [ <RARE_TOKEN> + j ] = f ; </a> 
<a> val [ <RARE_TOKEN> + k ] = v ; </a> 
<a> j = k ; </a> 
<a> } </a> 
<a> } </a> 
<a> for ( int i = len ; i > 1 ; i -- ) { </a> 
<a> int v = val [ <RARE_TOKEN> + i ] ; </a> 
<a> val [ <RARE_TOKEN> + i ] = val [ <RARE_TOKEN> + 1 ] ; </a> 
<a> val [ <RARE_TOKEN> + 1 ] = v ; </a> 
<a> int j = 1 ; </a> 
<a> for ( ; ; ) { </a> 
<a> int <RARE_TOKEN> = j < < 1 ; </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> + 1 ; </a> 
<a> if ( <RARE_TOKEN> >= i ) </a> 
<a> break ; </a> 
<a> int <RARE_TOKEN> ; </a> 
<a> int <RARE_TOKEN> ; </a> 
<a> if ( <RARE_TOKEN> >= i ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = val [ <RARE_TOKEN> + <RARE_TOKEN> ] ; </a> 
<a> } else { </a> 
<a> int <RARE_TOKEN> = val [ <RARE_TOKEN> + <RARE_TOKEN> ] ; </a> 
<a> int <RARE_TOKEN> = val [ <RARE_TOKEN> + <RARE_TOKEN> ] ; </a> 
<a> if ( <RARE_TOKEN> > <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<a> if ( v > <RARE_TOKEN> ) </a> 
<a> break ; </a> 
<a> val [ <RARE_TOKEN> + j ] = <RARE_TOKEN> ; </a> 
<a> val [ <RARE_TOKEN> + <RARE_TOKEN> ] = v ; </a> 
<a> j = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> private static int [ ] <RARE_TOKEN> ( int [ ] <RARE_TOKEN> , int <RARE_TOKEN> ) { </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> . length ; </a> 
<a> int [ ] <RARE_TOKEN> = new int [ <RARE_TOKEN> ] ; </a> 
<a> for ( int i = 0 ; i < <RARE_TOKEN> ; i ++ ) </a> 
<a> <RARE_TOKEN> [ i ] = i + ( 1 < < 9 ) + ( <RARE_TOKEN> [ i ] < < 10 ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> , 0 , <RARE_TOKEN> ) ; </a> 
<a> int <RARE_TOKEN> = 0 ; </a> 
<a> while ( <RARE_TOKEN> < <RARE_TOKEN> && ( <RARE_TOKEN> [ <RARE_TOKEN> ] > > > 10 ) == 0 ) </a> 
<a> <RARE_TOKEN> ++ ; </a> 
<a> if ( <RARE_TOKEN> == <RARE_TOKEN> ) { </a> 
<a> return new int [ <RARE_TOKEN> ] ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> == ( <RARE_TOKEN> - 1 ) ) { </a> 
<a> int [ ] <RARE_TOKEN> = new int [ <RARE_TOKEN> ] ; </a> 
<a> <RARE_TOKEN> [ <RARE_TOKEN> [ <RARE_TOKEN> ] & <RARE_TOKEN> ] = 1 ; </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> int [ ] <RARE_TOKEN> = new int [ <RARE_TOKEN> - 1 ] ; </a> 
<a> int <RARE_TOKEN> = 0 , <RARE_TOKEN> = 0 ; </a> 
<a> int [ ] tree = new int [ <RARE_TOKEN> - 1 ] ; </a> 
<a> int <RARE_TOKEN> = 0 ; </a> 
<a> int <RARE_TOKEN> ; </a> 
<a> for ( ; ; ) { </a> 
<a> if ( <RARE_TOKEN> == <RARE_TOKEN> && <RARE_TOKEN> == ( <RARE_TOKEN> + 1 ) ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> [ <RARE_TOKEN> ] & <RARE_TOKEN> ; </a> 
<a> break ; </a> 
<a> } </a> 
<a> int <RARE_TOKEN> , <RARE_TOKEN> ; </a> 
<a> if ( <RARE_TOKEN> == <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> [ <RARE_TOKEN> ++ ] ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> [ <RARE_TOKEN> ++ ] ; </a> 
<a> } else if ( <RARE_TOKEN> == <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> [ <RARE_TOKEN> ++ ] ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> [ <RARE_TOKEN> ++ ] ; </a> 
<a> } else { </a> 
<a> int f = <RARE_TOKEN> [ <RARE_TOKEN> ] ; </a> 
<a> int q = <RARE_TOKEN> [ <RARE_TOKEN> ] ; </a> 
<a> if ( f < q ) { </a> 
<a> <RARE_TOKEN> = f ; </a> 
<a> <RARE_TOKEN> ++ ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> = q ; </a> 
<a> <RARE_TOKEN> ++ ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> == <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> [ <RARE_TOKEN> ++ ] ; </a> 
<a> } else if ( <RARE_TOKEN> == <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> [ <RARE_TOKEN> ++ ] ; </a> 
<a> } else { </a> 
<a> f = <RARE_TOKEN> [ <RARE_TOKEN> ] ; </a> 
<a> q = <RARE_TOKEN> [ <RARE_TOKEN> ] ; </a> 
<a> if ( f < q ) { </a> 
<a> <RARE_TOKEN> = f ; </a> 
<a> <RARE_TOKEN> ++ ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> = q ; </a> 
<a> <RARE_TOKEN> ++ ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> int <RARE_TOKEN> = ( <RARE_TOKEN> & ~ <RARE_TOKEN> ) + ( <RARE_TOKEN> & ~ <RARE_TOKEN> ) + <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> [ <RARE_TOKEN> ++ ] = <RARE_TOKEN> ; </a> 
<a> int <RARE_TOKEN> = ( <RARE_TOKEN> & <RARE_TOKEN> ) + ( ( <RARE_TOKEN> & <RARE_TOKEN> ) < < 10 ) ; </a> 
<a> tree [ <RARE_TOKEN> ++ ] = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> int [ ] <RARE_TOKEN> = new int [ <RARE_TOKEN> + 1 ] ; </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> ( tree , <RARE_TOKEN> , 0 , <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> while ( <RARE_TOKEN> -- > 0 ) { </a> 
<a> if ( <RARE_TOKEN> == <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> { </a> 
<a> <RARE_TOKEN> -- ; </a> 
<a> } </a> 
<a> while ( <RARE_TOKEN> [ <RARE_TOKEN> ] == 0 ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> [ <RARE_TOKEN> ] -- ; </a> 
<a> <RARE_TOKEN> [ ++ <RARE_TOKEN> ] += 2 ; </a> 
<a> } </a> 
<a> int [ ] <RARE_TOKEN> = new int [ <RARE_TOKEN> ] ; </a> 
<a> int p = 0 ; </a> 
<a> while ( ( <RARE_TOKEN> [ p ] > > > 10 ) == 0 ) </a> 
<a> p ++ ; </a> 
<a> for ( int bits = <RARE_TOKEN> ; bits > 0 ; bits -- ) { </a> 
<a> for ( int k = <RARE_TOKEN> [ bits ] ; k > 0 ; k -- ) { </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> [ p ++ ] & <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> [ <RARE_TOKEN> ] = bits ; </a> 
<a> } </a> 
<a> } </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> private static int <RARE_TOKEN> ( int [ ] tree , int <RARE_TOKEN> , int <RARE_TOKEN> , int [ ] <RARE_TOKEN> , int <RARE_TOKEN> ) { </a> 
<a> if ( ( <RARE_TOKEN> & <RARE_TOKEN> ) != 0 ) { </a> 
<a> if ( <RARE_TOKEN> > <RARE_TOKEN> ) { </a> 
<a> return 1 ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> [ <RARE_TOKEN> ] ++ ; </a> 
<a> return 0 ; </a> 
<a> } </a> 
<a> } </a> 
<a> int s ; </a> 
<a> if ( <RARE_TOKEN> == <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> [ <RARE_TOKEN> ] ++ ; </a> 
<a> s = - 1 ; </a> 
<a> } else { </a> 
<a> s = 0 ; </a> 
<a> } </a> 
<a> int n = tree [ <RARE_TOKEN> ] ; </a> 
<a> int l = n & <RARE_TOKEN> ; </a> 
<a> int r = ( n > > > 10 ) & <RARE_TOKEN> ; </a> 
<a> s += <RARE_TOKEN> ( tree , l , <RARE_TOKEN> + 1 , <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> s += <RARE_TOKEN> ( tree , r , <RARE_TOKEN> + 1 , <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> return s ; </a> 
<a> } </a> 
<a> private static final int [ ] <RARE_TOKEN> ; </a> 
<a> static { </a> 
<a> int [ ] <RARE_TOKEN> = new int [ <RARE_TOKEN> ] ; </a> 
<a> for ( int i = 0 ; i < <RARE_TOKEN> ; i ++ ) </a> 
<a> <RARE_TOKEN> [ i ] = 8 ; </a> 
<a> for ( int i = <RARE_TOKEN> ; i < <RARE_TOKEN> ; i ++ ) </a> 
<a> <RARE_TOKEN> [ i ] = 9 ; </a> 
<a> for ( int i = <RARE_TOKEN> ; i < <RARE_TOKEN> ; i ++ ) </a> 
<a> <RARE_TOKEN> [ i ] = 7 ; </a> 
<a> for ( int i = <RARE_TOKEN> ; i < <RARE_TOKEN> ; i ++ ) </a> 
<a> <RARE_TOKEN> [ i ] = 8 ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ( <RARE_TOKEN> , 15 ) ; </a> 
<a> } </a> 
<a> private static final int [ ] <RARE_TOKEN> ; </a> 
<a> static { </a> 
<a> int [ ] <RARE_TOKEN> = new int [ 32 ] ; </a> 
<a> for ( int i = 0 ; i < 32 ; i ++ ) </a> 
<a> <RARE_TOKEN> [ i ] = 5 ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ( <RARE_TOKEN> , 15 ) ; </a> 
<a> } </a> 
<a> private static int [ ] <RARE_TOKEN> ( int [ ] <RARE_TOKEN> , int <RARE_TOKEN> , int [ ] <RARE_TOKEN> , int <RARE_TOKEN> , int [ ] <RARE_TOKEN> ) { </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> + <RARE_TOKEN> ; </a> 
<a> int [ ] in = new int [ <RARE_TOKEN> ] ; </a> 
<a> System . <RARE_TOKEN> ( <RARE_TOKEN> , 0 , in , 0 , <RARE_TOKEN> ) ; </a> 
<a> System . <RARE_TOKEN> ( <RARE_TOKEN> , 0 , in , <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> int <RARE_TOKEN> = 0 ; </a> 
<a> int [ ] <RARE_TOKEN> = new int [ <RARE_TOKEN> ] ; </a> 
<a> int <RARE_TOKEN> = 0 ; </a> 
<a> while ( <RARE_TOKEN> < <RARE_TOKEN> ) { </a> 
<a> int v = in [ <RARE_TOKEN> ++ ] ; </a> 
<a> if ( v == 0 ) { </a> 
<a> int r = 1 ; </a> 
<a> while ( r < <RARE_TOKEN> && <RARE_TOKEN> < <RARE_TOKEN> ) { </a> 
<a> if ( in [ <RARE_TOKEN> ] != 0 ) </a> 
<a> break ; </a> 
<a> r ++ ; </a> 
<a> <RARE_TOKEN> ++ ; </a> 
<a> } </a> 
<a> switch ( r ) { </a> 
<a> case 1 : </a> 
<a> <RARE_TOKEN> [ <RARE_TOKEN> ++ ] = 0 ; </a> 
<a> <RARE_TOKEN> [ 0 ] ++ ; </a> 
<a> break ; </a> 
<a> case 2 : </a> 
<a> <RARE_TOKEN> [ <RARE_TOKEN> ++ ] = 0 ; </a> 
<a> <RARE_TOKEN> [ <RARE_TOKEN> ++ ] = 0 ; </a> 
<a> <RARE_TOKEN> [ 0 ] += 2 ; </a> 
<a> break ; </a> 
<a> default : </a> 
<a> if ( r <= 10 ) { </a> 
<a> <RARE_TOKEN> [ <RARE_TOKEN> ++ ] = 17 + ( ( r - 3 ) < < 5 ) ; </a> 
<a> <RARE_TOKEN> [ 17 ] ++ ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> [ <RARE_TOKEN> ++ ] = <RARE_TOKEN> + ( ( r - 11 ) < < 5 ) ; </a> 
<a> <RARE_TOKEN> [ <RARE_TOKEN> ] ++ ; </a> 
<a> } </a> 
<a> break ; </a> 
<a> } </a> 
<a> } else { </a> 
<a> int r = 0 ; </a> 
<a> while ( r < 6 && <RARE_TOKEN> < <RARE_TOKEN> ) { </a> 
<a> if ( in [ <RARE_TOKEN> ] != v ) </a> 
<a> break ; </a> 
<a> r ++ ; </a> 
<a> <RARE_TOKEN> ++ ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> [ <RARE_TOKEN> ++ ] = v ; </a> 
<a> <RARE_TOKEN> [ v ] ++ ; </a> 
<a> switch ( r ) { </a> 
<a> case 0 : </a> 
<a> break ; </a> 
<a> case 1 : </a> 
<a> <RARE_TOKEN> [ <RARE_TOKEN> ++ ] = v ; </a> 
<a> <RARE_TOKEN> [ v ] ++ ; </a> 
<a> break ; </a> 
<a> case 2 : </a> 
<a> <RARE_TOKEN> [ <RARE_TOKEN> ++ ] = v ; </a> 
<a> <RARE_TOKEN> [ <RARE_TOKEN> ++ ] = v ; </a> 
<a> <RARE_TOKEN> [ v ] += 2 ; </a> 
<a> break ; </a> 
<a> default : </a> 
<a> <RARE_TOKEN> [ <RARE_TOKEN> ++ ] = 16 + ( ( r - 3 ) < < 5 ) ; </a> 
<a> <RARE_TOKEN> [ 16 ] ++ ; </a> 
<a> break ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> int [ ] res = new int [ <RARE_TOKEN> ] ; </a> 
<a> System . <RARE_TOKEN> ( <RARE_TOKEN> , 0 , res , 0 , <RARE_TOKEN> ) ; </a> 
<a> return res ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( int val , int <RARE_TOKEN> ) throws IOException { </a> 
<a> if ( <RARE_TOKEN> == 0 ) </a> 
<a> return ; </a> 
<a> for ( ; ; ) { </a> 
<a> int <RARE_TOKEN> = 8 - <RARE_TOKEN> ; </a> 
<a> int v = <RARE_TOKEN> | ( val < < <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> > <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> = v ; </a> 
<a> <RARE_TOKEN> += <RARE_TOKEN> ; </a> 
<a> return ; </a> 
<a> } else if ( <RARE_TOKEN> == <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> [ <RARE_TOKEN> ++ ] = ( byte ) v ; </a> 
<a> if ( <RARE_TOKEN> == <RARE_TOKEN> . length ) { </a> 
<a> out . write ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = 0 ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> = 0 ; </a> 
<a> <RARE_TOKEN> = 0 ; </a> 
<a> return ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> [ <RARE_TOKEN> ++ ] = ( byte ) v ; </a> 
<a> if ( <RARE_TOKEN> == <RARE_TOKEN> . length ) { </a> 
<a> out . write ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = 0 ; </a> 
<a> } </a> 
<a> val <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> -= <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = 0 ; </a> 
<a> <RARE_TOKEN> = 0 ; </a> 
<a> } </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( ) throws IOException { </a> 
<a> if ( <RARE_TOKEN> > 0 ) { </a> 
<a> out . write ( <RARE_TOKEN> , 0 , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = 0 ; </a> 
<a> } </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( boolean <RARE_TOKEN> , int sbPtr ) throws IOException { </a> 
<a> if ( <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> = 0 ; </a> 
<a> return ; </a> 
<a> } </a> 
<a> int [ ] sb = buffer ; </a> 
<a> int [ ] <RARE_TOKEN> = new int [ <RARE_TOKEN> ] ; </a> 
<a> int [ ] <RARE_TOKEN> = new int [ <RARE_TOKEN> ] ; </a> 
<a> <RARE_TOKEN> [ <RARE_TOKEN> ] = 1 ; </a> 
<a> int <RARE_TOKEN> = 0 ; </a> 
<a> for ( int i = 0 ; i < sbPtr ; i ++ ) { </a> 
<a> int val = sb [ i ] ; </a> 
<a> int <RARE_TOKEN> = val & <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> [ <RARE_TOKEN> ] ++ ; </a> 
<a> if ( <RARE_TOKEN> < <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> += 8 ; </a> 
<a> continue ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> += 8 * ( <RARE_TOKEN> [ <RARE_TOKEN> - <RARE_TOKEN> ] + ( ( val > > > 9 ) & <RARE_TOKEN> ) ) ; </a> 
<a> int dist = ( val > > > 14 ) & <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> [ dist ] ++ ; </a> 
<a> } </a> 
<a> int <RARE_TOKEN> = 0 ; </a> 
<a> for ( int t = 0 ; t < <RARE_TOKEN> ; t += <RARE_TOKEN> ) { </a> 
<a> if ( t == 0 ) { </a> 
<a> if ( <RARE_TOKEN> > 5 ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> - <RARE_TOKEN> ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> - <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> += <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<a> int <RARE_TOKEN> = ( <RARE_TOKEN> > > > 3 ) ; </a> 
<a> <RARE_TOKEN> += <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> if ( <RARE_TOKEN> <= <RARE_TOKEN> && <RARE_TOKEN> <= <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ? 1 : 0 , 3 ) ; </a> 
<a> if ( <RARE_TOKEN> > 0 ) </a> 
<a> <RARE_TOKEN> ( 0 , 8 - <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> | ( ~ <RARE_TOKEN> < < 16 ) , 32 ) ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> out . write ( <RARE_TOKEN> , 0 , <RARE_TOKEN> ) ; </a> 
<a> } else if ( <RARE_TOKEN> <= <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ? 3 : 2 , 3 ) ; </a> 
<a> for ( int i = 0 ; i < sbPtr ; i ++ ) { </a> 
<a> int val = buffer [ i ] ; </a> 
<a> int <RARE_TOKEN> = val & <RARE_TOKEN> ; </a> 
<a> if ( <RARE_TOKEN> < <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> [ <RARE_TOKEN> ] , <RARE_TOKEN> < <RARE_TOKEN> ? 8 : 9 ) ; </a> 
<a> continue ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> [ <RARE_TOKEN> ] , <RARE_TOKEN> < <RARE_TOKEN> ? 7 : 8 ) ; </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> [ <RARE_TOKEN> - <RARE_TOKEN> ] ; </a> 
<a> if ( <RARE_TOKEN> > 0 ) </a> 
<a> <RARE_TOKEN> ( ( val > > > 9 ) & <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> int dist = ( val > > > 14 ) & <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> [ dist ] , 5 ) ; </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> [ dist ] ; </a> 
<a> if ( <RARE_TOKEN> > 0 ) </a> 
<a> <RARE_TOKEN> ( val > > > 19 , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> [ <RARE_TOKEN> ] , 7 ) ; </a> 
<a> } else { </a> 
<a> int [ ] <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> int [ ] <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> int [ ] <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> int [ ] <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> int [ ] <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> . length ; </a> 
<a> int [ ] <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> int [ ] <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> int [ ] <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> . length ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ? 5 : 4 , 3 ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> . length - <RARE_TOKEN> , 5 ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> . length - 1 , 5 ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> - 4 , 4 ) ; </a> 
<a> for ( int i = 0 ; i < <RARE_TOKEN> ; i ++ ) </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> [ i ] , 3 ) ; </a> 
<a> for ( int i = 0 ; i < <RARE_TOKEN> ; i ++ ) { </a> 
<a> int v = <RARE_TOKEN> [ i ] ; </a> 
<a> int s = v & <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> [ s ] , <RARE_TOKEN> [ s ] ) ; </a> 
<a> int <RARE_TOKEN> ; </a> 
<a> switch ( s ) { </a> 
<a> case 16 : </a> 
<a> <RARE_TOKEN> = 2 ; </a> 
<a> break ; </a> 
<a> case 17 : </a> 
<a> <RARE_TOKEN> = 3 ; </a> 
<a> break ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> <RARE_TOKEN> = 7 ; </a> 
<a> break ; </a> 
<a> default : </a> 
<a> continue ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( ( v > > > 5 ) , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> for ( int i = 0 ; i < sbPtr ; i ++ ) { </a> 
<a> int val = buffer [ i ] ; </a> 
<a> int <RARE_TOKEN> = val & <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> [ <RARE_TOKEN> ] , <RARE_TOKEN> [ <RARE_TOKEN> ] ) ; </a> 
<a> if ( <RARE_TOKEN> < <RARE_TOKEN> ) </a> 
<a> continue ; </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> [ <RARE_TOKEN> - <RARE_TOKEN> ] ; </a> 
<a> if ( <RARE_TOKEN> > 0 ) </a> 
<a> <RARE_TOKEN> ( ( val > > > 9 ) & <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> int dist = ( val > > > 14 ) & <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> [ dist ] , <RARE_TOKEN> [ dist ] ) ; </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> [ dist ] ; </a> 
<a> if ( <RARE_TOKEN> > 0 ) </a> 
<a> <RARE_TOKEN> ( val > > > 19 , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> [ <RARE_TOKEN> ] , <RARE_TOKEN> [ <RARE_TOKEN> ] ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> = 0 ; </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> . length ; </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> while ( <RARE_TOKEN> < <RARE_TOKEN> ) </a> 
<a> <RARE_TOKEN> += <RARE_TOKEN> ; </a> 
<a> if ( <RARE_TOKEN> < <RARE_TOKEN> ) { </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> - <RARE_TOKEN> ; </a> 
<a> if ( <RARE_TOKEN> > <RARE_TOKEN> ) </a> 
<a> throw new Error ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> " + <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> <= <RARE_TOKEN> ) { </a> 
<a> System . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> - <RARE_TOKEN> , <RARE_TOKEN> , 0 , <RARE_TOKEN> ) ; </a> 
<a> } else { </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> - <RARE_TOKEN> ; </a> 
<a> System . <RARE_TOKEN> ( <RARE_TOKEN> , 0 , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> System . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> - <RARE_TOKEN> , <RARE_TOKEN> , 0 , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> - <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> private static class <RARE_TOKEN> { </a> 
<a> private int [ ] <RARE_TOKEN> , <RARE_TOKEN> ; </a> 
<a> private int [ ] <RARE_TOKEN> , <RARE_TOKEN> ; </a> 
<a> private int [ ] <RARE_TOKEN> ; </a> 
<a> private int [ ] <RARE_TOKEN> , <RARE_TOKEN> ; </a> 
<a> private int [ ] <RARE_TOKEN> ; </a> 
<a> private int <RARE_TOKEN> , <RARE_TOKEN> ; </a> 
<a> private <RARE_TOKEN> ( int [ ] <RARE_TOKEN> , int [ ] <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> = 17 ; </a> 
<a> <RARE_TOKEN> = 3 ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ( <RARE_TOKEN> , 15 ) ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ( <RARE_TOKEN> , 15 ) ; </a> 
<a> for ( int i = 0 ; i < <RARE_TOKEN> . length ; i ++ ) { </a> 
<a> int f = <RARE_TOKEN> [ i ] ; </a> 
<a> int <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = ( i >= <RARE_TOKEN> ) ? <RARE_TOKEN> [ i - <RARE_TOKEN> ] : 0 ; </a> 
<a> <RARE_TOKEN> += ( <RARE_TOKEN> [ i ] + <RARE_TOKEN> ) * f ; </a> 
<a> int <RARE_TOKEN> ; </a> 
<a> if ( i < <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> = ( i < <RARE_TOKEN> ) ? 8 : 9 ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> = ( i < <RARE_TOKEN> ) ? 7 : 8 ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> += ( <RARE_TOKEN> + <RARE_TOKEN> ) * f ; </a> 
<a> } </a> 
<a> for ( int i = 0 ; i < <RARE_TOKEN> . length ; i ++ ) { </a> 
<a> int f = <RARE_TOKEN> [ i ] ; </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> [ i ] ; </a> 
<a> <RARE_TOKEN> += ( <RARE_TOKEN> [ i ] + <RARE_TOKEN> ) * f ; </a> 
<a> <RARE_TOKEN> += ( 5 + <RARE_TOKEN> ) * f ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ( <RARE_TOKEN> , 15 ) ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ( <RARE_TOKEN> , 15 ) ; </a> 
<a> if ( <RARE_TOKEN> . length == 0 ) </a> 
<a> <RARE_TOKEN> = new int [ 1 ] ; </a> 
<a> int [ ] <RARE_TOKEN> = new int [ 19 ] ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> . length , <RARE_TOKEN> , <RARE_TOKEN> . length , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ( <RARE_TOKEN> , 7 ) ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ( <RARE_TOKEN> , 7 ) ; </a> 
<a> for ( int i = 0 ; i < 19 ; i ++ ) { </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> [ i ] ; </a> 
<a> switch ( i ) { </a> 
<a> case 16 : </a> 
<a> <RARE_TOKEN> += 2 ; </a> 
<a> break ; </a> 
<a> case 17 : </a> 
<a> <RARE_TOKEN> += 3 ; </a> 
<a> break ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> <RARE_TOKEN> += 7 ; </a> 
<a> break ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> += <RARE_TOKEN> [ i ] * <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> int [ ] <RARE_TOKEN> = new int [ 19 ] ; </a> 
<a> int <RARE_TOKEN> = 0 ; </a> 
<a> for ( int i = 0 ; i < 19 ; i ++ ) { </a> 
<a> int len = <RARE_TOKEN> [ <RARE_TOKEN> [ i ] ] ; </a> 
<a> if ( len > 0 ) </a> 
<a> <RARE_TOKEN> = i + 1 ; </a> 
<a> <RARE_TOKEN> [ i ] = len ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> = new int [ <RARE_TOKEN> ] ; </a> 
<a> System . <RARE_TOKEN> ( <RARE_TOKEN> , 0 , <RARE_TOKEN> , 0 , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> += 3 * <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> private int [ ] <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> private int [ ] <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> private int [ ] <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> private int [ ] <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> private int [ ] <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> private int [ ] <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> private int [ ] <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> private int [ ] <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> private int <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> private int <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( boolean <RARE_TOKEN> ) throws IOException { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ? 3 : 2 , 10 ) ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( boolean <RARE_TOKEN> , boolean <RARE_TOKEN> ) throws IOException { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ? 1 : 0 , 3 ) ; </a> 
<a> if ( <RARE_TOKEN> > 0 ) </a> 
<a> <RARE_TOKEN> ( 0 , 8 - <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> ) </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> , 32 ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( ) throws IOException { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> if ( <RARE_TOKEN> == 0 ) { </a> 
<a> <RARE_TOKEN> ( true ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> ( true , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> > 0 ) </a> 
<a> <RARE_TOKEN> ( 0 , 8 - <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( boolean <RARE_TOKEN> ) throws IOException { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> if ( <RARE_TOKEN> != 0 ) </a> 
<a> <RARE_TOKEN> ( false , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( false , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> static final int [ ] <RARE_TOKEN> ; </a> 
<a> static final int [ ] <RARE_TOKEN> = { </a> 
<a> 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 1 , 1 , 1 , 1 , 2 , 2 , 2 , 2 , </a> 
<a> 3 , 3 , 3 , 3 , 4 , 4 , 4 , 4 , 5 , 5 , 5 , 5 , 0 </a> 
<a> } ; </a> 
<a> static { </a> 
<a> <RARE_TOKEN> = new int [ 29 ] ; </a> 
<a> <RARE_TOKEN> [ 0 ] = 3 ; </a> 
<a> int l = 3 ; </a> 
<a> for ( int i = 1 ; i < 28 ; i ++ ) { </a> 
<a> l += 1 < < <RARE_TOKEN> [ i - 1 ] ; </a> 
<a> <RARE_TOKEN> [ i ] = l ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> [ 28 ] = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> static final int [ ] <RARE_TOKEN> ; </a> 
<a> static final int [ ] <RARE_TOKEN> = { </a> 
<a> 0 , 0 , 0 , 0 , 1 , 1 , 2 , 2 , 3 , 3 , 4 , 4 , 5 , 5 , 6 , 6 , 7 , 7 , </a> 
<a> 8 , 8 , 9 , 9 , 10 , 10 , 11 , 11 , 12 , 12 , 13 , 13 </a> 
<a> } ; </a> 
<a> static { </a> 
<a> <RARE_TOKEN> = new int [ <RARE_TOKEN> ] ; </a> 
<a> <RARE_TOKEN> [ 0 ] = 1 ; </a> 
<a> int d = 1 ; </a> 
<a> for ( int i = 1 ; i < <RARE_TOKEN> ; i ++ ) { </a> 
<a> d += 1 < < <RARE_TOKEN> [ i - 1 ] ; </a> 
<a> <RARE_TOKEN> [ i ] = d ; </a> 
<a> } </a> 
<a> } </a> 
<a> static final int [ ] <RARE_TOKEN> = { </a> 
<a> 16 , 17 , <RARE_TOKEN> , 0 , 8 , 7 , 9 , 6 , 10 , 5 , </a> 
<a> 11 , 4 , 12 , 3 , 13 , 2 , 14 , 1 , 15 </a> 
<a> } ; </a> 
<a> static int [ ] <RARE_TOKEN> ( int [ ] <RARE_TOKEN> , int <RARE_TOKEN> ) { </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> . length ; </a> 
<a> int <RARE_TOKEN> = 0 ; </a> 
<a> int [ ] <RARE_TOKEN> = new int [ <RARE_TOKEN> + 1 ] ; </a> 
<a> for ( int n = 0 ; n < <RARE_TOKEN> ; n ++ ) { </a> 
<a> int len = <RARE_TOKEN> [ n ] ; </a> 
<a> if ( len < 0 || len > <RARE_TOKEN> ) </a> 
<a> return null ; </a> 
<a> if ( len > 0 ) { </a> 
<a> <RARE_TOKEN> = n + 1 ; </a> 
<a> <RARE_TOKEN> [ len ] ++ ; </a> 
<a> } </a> 
<a> } </a> 
<a> int [ ] <RARE_TOKEN> = new int [ <RARE_TOKEN> + 1 ] ; </a> 
<a> int <RARE_TOKEN> = 0 ; </a> 
<a> for ( int bits = 1 ; bits <= <RARE_TOKEN> ; bits ++ ) { </a> 
<a> <RARE_TOKEN> = ( <RARE_TOKEN> + <RARE_TOKEN> [ bits - 1 ] ) < < 1 ; </a> 
<a> <RARE_TOKEN> [ bits ] = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> int [ ] code = new int [ <RARE_TOKEN> ] ; </a> 
<a> for ( int n = 0 ; n < <RARE_TOKEN> ; n ++ ) { </a> 
<a> int len = <RARE_TOKEN> [ n ] ; </a> 
<a> if ( len != 0 ) { </a> 
<a> int w = <RARE_TOKEN> [ len ] ; </a> 
<a> if ( w >= ( 1 < < len ) ) </a> 
<a> return null ; </a> 
<a> code [ n ] = <RARE_TOKEN> ( w , len ) ; </a> 
<a> <RARE_TOKEN> [ len ] = w + 1 ; </a> 
<a> } </a> 
<a> } </a> 
<a> return code ; </a> 
<a> } </a> 
<a> private static int <RARE_TOKEN> ( int <RARE_TOKEN> , int q ) { </a> 
<a> int v = 0 ; </a> 
<a> while ( q -- > 0 ) { </a> 
<a> v <RARE_TOKEN> 1 ; </a> 
<a> if ( ( <RARE_TOKEN> & 1 ) != 0 ) </a> 
<a> v ++ ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> 1 ; </a> 
<a> } </a> 
<a> return v ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . gwt . server . <RARE_TOKEN> ; </a> 
<a> import java . io . IOException ; </a> 
<a> import java . io . OutputStream ; </a> 
<a> public class <RARE_TOKEN> extends OutputStream { </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> public <RARE_TOKEN> ( OutputStream out ) throws IOException { </a> 
<a> this ( out , <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( OutputStream out , int level ) throws IOException { </a> 
<a> <RARE_TOKEN> = new <RARE_TOKEN> ( level ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( out ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void close ( ) throws IOException { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) . close ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void flush ( ) throws IOException { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( true ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) . flush ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void write ( int b ) throws IOException { </a> 
<a> write ( new byte [ ] { ( byte ) b } , 0 , 1 ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void write ( byte [ ] buf ) throws IOException { </a> 
<a> write ( buf , 0 , buf . length ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void write ( byte [ ] buf , int off , int len ) throws IOException { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( buf , off , len ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . gwt . server . <RARE_TOKEN> ; </a> 
<a> import java . io . IOException ; </a> 
<a> import java . io . OutputStream ; </a> 
<a> public class <RARE_TOKEN> extends OutputStream { </a> 
<a> private int count ; </a> 
<a> private final OutputStream out ; </a> 
<a> private boolean <RARE_TOKEN> ; </a> 
<a> public <RARE_TOKEN> ( OutputStream out ) { </a> 
<a> this . out = out ; </a> 
<a> } </a> 
<a> public int <RARE_TOKEN> ( ) { </a> 
<a> return count ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( boolean <RARE_TOKEN> ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void write ( int b ) throws IOException { </a> 
<a> out . write ( b ) ; </a> 
<a> count ++ ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void write ( byte [ ] b ) throws IOException { </a> 
<a> out . write ( b ) ; </a> 
<a> count += b . length ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void write ( byte [ ] b , int off , int len ) throws IOException { </a> 
<a> out . write ( b , off , len ) ; </a> 
<a> count += len ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void flush ( ) throws IOException { </a> 
<a> if ( ! <RARE_TOKEN> ) { </a> 
<a> out . flush ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . gwt . server . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . rpc . server . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . user . server . rpc . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . cpr . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . cpr . AtmosphereResource ; </a> 
<a> import org . atmosphere . cpr . AtmosphereResourceEvent ; </a> 
<a> import org . atmosphere . cpr . AtmosphereResourceEventListener ; </a> 
<a> import org . atmosphere . cpr . Broadcaster ; </a> 
<a> import org . atmosphere . cpr . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . gwt . server . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . gwt . server . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . gwt . server . <RARE_TOKEN> ; </a> 
<a> import org . slf4j . Logger ; </a> 
<a> import org . slf4j . LoggerFactory ; </a> 
<a> import javax . servlet . http . HttpServletRequest ; </a> 
<a> import javax . servlet . http . HttpServletResponse ; </a> 
<a> import javax . servlet . http . <RARE_TOKEN> ; </a> 
<a> import java . io . IOException ; </a> 
<a> import java . io . OutputStream ; </a> 
<a> import java . io . Serializable ; </a> 
<a> import java . util . Collection ; </a> 
<a> import java . util . List ; </a> 
<a> import java . util . concurrent . ScheduledFuture ; </a> 
<a> import java . util . concurrent . TimeUnit ; </a> 
<a> public class <RARE_TOKEN> implements <RARE_TOKEN> { </a> 
<a> public static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> public <RARE_TOKEN> ( AtmosphereResource < HttpServletRequest , HttpServletResponse > resource , </a> 
<a> <RARE_TOKEN> servlet , int <RARE_TOKEN> ) throws IOException { </a> 
<a> this . <RARE_TOKEN> = servlet ; </a> 
<a> this . <RARE_TOKEN> = resource ; </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> this . writer = <RARE_TOKEN> ( ) ; </a> 
<a> resource . getRequest ( ) . setAttribute ( <RARE_TOKEN> . class . getName ( ) , this ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public Broadcaster getBroadcaster ( ) { </a> 
<a> return <RARE_TOKEN> . getBroadcaster ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public <RARE_TOKEN> getSession ( ) { </a> 
<a> return <RARE_TOKEN> . getRequest ( ) . getSession ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public <RARE_TOKEN> getSession ( boolean create ) { </a> 
<a> return <RARE_TOKEN> . getRequest ( ) . getSession ( create ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> ( ) { </a> 
<a> return writer ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void broadcast ( Serializable message ) { </a> 
<a> getBroadcaster ( ) . broadcast ( message , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void broadcast ( List < Serializable > messages ) { </a> 
<a> getBroadcaster ( ) . broadcast ( messages , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void post ( Serializable message ) { </a> 
<a> getBroadcaster ( ) . broadcast ( message , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void post ( List < Serializable > messages ) { </a> 
<a> getBroadcaster ( ) . broadcast ( messages , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public AtmosphereResource < HttpServletRequest , HttpServletResponse > <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> if ( writer . <RARE_TOKEN> ( ) ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> if ( ( System . currentTimeMillis ( ) - <RARE_TOKEN> ) < <RARE_TOKEN> ) { </a> 
<a> return true ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> . getBroadcaster ( ) == null ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> Collection < AtmosphereResource < ? , ? > > res = <RARE_TOKEN> . getBroadcaster ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> for ( AtmosphereResource < ? , ? > <RARE_TOKEN> : res ) { </a> 
<a> if ( <RARE_TOKEN> == <RARE_TOKEN> ) { </a> 
<a> return true ; </a> 
<a> } </a> 
<a> } </a> 
<a> return suspended ; </a> 
<a> } </a> 
<a> long <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public HttpServletRequest getRequest ( ) { </a> 
<a> return <RARE_TOKEN> . getRequest ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public HttpServletResponse getResponse ( ) { </a> 
<a> return <RARE_TOKEN> . getResponse ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int <RARE_TOKEN> ( ) { </a> 
<a> return writer . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public void suspend ( ) throws IOException { </a> 
<a> suspend ( - 1 ) ; </a> 
<a> } </a> 
<a> public void suspend ( int timeout ) throws IOException { </a> 
<a> if ( ! suspended ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( serializer ) ; </a> 
<a> if ( <RARE_TOKEN> instanceof <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = ( <RARE_TOKEN> ) <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> writer . suspend ( ) ; </a> 
<a> <RARE_TOKEN> . suspend ( timeout , false ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public void resume ( ) { </a> 
<a> <RARE_TOKEN> . resume ( ) ; </a> 
<a> } </a> 
<a> void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> . execute ( new Runnable ( ) { </a> 
<a> @ Override </a> 
<a> public void run ( ) { </a> 
<a> <RARE_TOKEN> . resume ( ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public < T > void setAttribute ( String name , T value ) { </a> 
<a> <RARE_TOKEN> . getRequest ( ) . setAttribute ( name , value ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public < T > T getAttribute ( String name ) { </a> 
<a> return ( T ) <RARE_TOKEN> . getRequest ( ) . getAttribute ( name ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> <RARE_TOKEN> ( ) { </a> 
<a> return writer ; </a> 
<a> } </a> 
<a> ScheduledFuture < ? > <RARE_TOKEN> ( ) { </a> 
<a> return getBroadcaster ( ) . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( ) </a> 
<a> . schedule ( <RARE_TOKEN> , <RARE_TOKEN> , TimeUnit . MILLISECONDS ) ; </a> 
<a> } </a> 
<a> void <RARE_TOKEN> ( boolean <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> s = <RARE_TOKEN> ; </a> 
<a> if ( s != null ) { </a> 
<a> <RARE_TOKEN> = null ; </a> 
<a> if ( suspended ) { </a> 
<a> <RARE_TOKEN> . resume ( ) ; </a> 
<a> } </a> 
<a> s . <RARE_TOKEN> ( this , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> ( ) throws IOException { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> . getRequest ( ) , <RARE_TOKEN> . getServletContext ( ) ) ; </a> 
<a> <RARE_TOKEN> serializationPolicy = <RARE_TOKEN> == null ? <RARE_TOKEN> . <RARE_TOKEN> ( ) : null ; </a> 
<a> String transport = <RARE_TOKEN> . getRequest ( ) . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> . equals ( transport ) ) { </a> 
<a> logger . debug ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> return new <RARE_TOKEN> ( this , serializationPolicy , <RARE_TOKEN> ) ; </a> 
<a> } else if ( <RARE_TOKEN> . equals ( transport ) ) { </a> 
<a> logger . debug ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> return new <RARE_TOKEN> ( this , serializationPolicy , <RARE_TOKEN> ) ; </a> 
<a> } else if ( <RARE_TOKEN> . equals ( transport ) ) { </a> 
<a> logger . debug ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> return new <RARE_TOKEN> ( this , serializationPolicy , <RARE_TOKEN> ) ; </a> 
<a> } else if ( <RARE_TOKEN> . equals ( transport ) ) { </a> 
<a> logger . debug ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> return new <RARE_TOKEN> ( this , serializationPolicy , <RARE_TOKEN> ) ; </a> 
<a> } else if ( <RARE_TOKEN> . equals ( transport ) ) { </a> 
<a> logger . debug ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> return new <RARE_TOKEN> ( this , serializationPolicy , <RARE_TOKEN> ) ; </a> 
<a> } else if ( <RARE_TOKEN> . equals ( transport ) ) { </a> 
<a> logger . debug ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> file <RARE_TOKEN> ) ; </a> 
<a> return new <RARE_TOKEN> ( this , serializationPolicy , <RARE_TOKEN> ) ; </a> 
<a> } else { </a> 
<a> throw new IllegalStateException ( "Failed to <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private final static long <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private long <RARE_TOKEN> = System . currentTimeMillis ( ) ; </a> 
<a> private final <RARE_TOKEN> writer ; </a> 
<a> private AtmosphereResource < HttpServletRequest , HttpServletResponse > <RARE_TOKEN> ; </a> 
<a> private final int <RARE_TOKEN> ; </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> private boolean suspended = false ; </a> 
<a> private Logger logger = LoggerFactory . getLogger ( getClass ( ) ) ; </a> 
<a> private Runnable <RARE_TOKEN> = new Runnable ( ) { </a> 
<a> @ Override </a> 
<a> public void run ( ) { </a> 
<a> if ( <RARE_TOKEN> ( ) ) { </a> 
<a> broadcast ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } ; </a> 
<a> private final <RARE_TOKEN> serializer = new <RARE_TOKEN> ( ) { </a> 
<a> @ Override </a> 
<a> public void write ( OutputStream out , Object o ) throws IOException { </a> 
<a> if ( o instanceof Serializable ) { </a> 
<a> try { </a> 
<a> writer . write ( ( Serializable ) o ) ; </a> 
<a> } catch ( IOException e ) { </a> 
<a> if ( writer . <RARE_TOKEN> ( ) ) { </a> 
<a> logger . debug ( <RARE_TOKEN> <RARE_TOKEN> connection <RARE_TOKEN> + e . getMessage ( ) , e ) ; </a> 
<a> } </a> 
<a> throw e ; </a> 
<a> } </a> 
<a> } else if ( o instanceof List ) { </a> 
<a> List < ? > list = ( List ) o ; </a> 
<a> if ( list . size ( ) > 0 ) { </a> 
<a> if ( ! ( list . get ( 0 ) instanceof Serializable ) ) { </a> 
<a> throw new IOException ( "Failed to write a list of <RARE_TOKEN> that <RARE_TOKEN> not <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> writer . write ( ( List < Serializable > ) o ) ; </a> 
<a> } </a> 
<a> } else { </a> 
<a> logger . warn ( "Failed to write an object that is not <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } ; </a> 
<a> private final AtmosphereResourceEventListener <RARE_TOKEN> = new AtmosphereResourceEventListener ( ) { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( AtmosphereResourceEvent < HttpServletRequest , HttpServletResponse > <RARE_TOKEN> ) { </a> 
<a> suspended = true ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( AtmosphereResourceEvent < HttpServletRequest , HttpServletResponse > event ) { </a> 
<a> suspended = false ; </a> 
<a> writer . <RARE_TOKEN> ( false ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( AtmosphereResourceEvent < HttpServletRequest , HttpServletResponse > event ) { </a> 
<a> suspended = false ; </a> 
<a> writer . <RARE_TOKEN> ( false ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( AtmosphereResourceEvent < HttpServletRequest , HttpServletResponse > event ) { </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( AtmosphereResourceEvent < HttpServletRequest , HttpServletResponse > event ) { </a> 
<a> } </a> 
<a> } ; </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . gwt . server . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . rpc . server . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . rpc . server . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . user . client . rpc . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . user . server . rpc . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . user . server . rpc . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . gwt . server . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . gwt . server . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import org . slf4j . Logger ; </a> 
<a> import org . slf4j . LoggerFactory ; </a> 
<a> import javax . servlet . http . HttpServletRequest ; </a> 
<a> import javax . servlet . http . HttpServletResponse ; </a> 
<a> import javax . servlet . http . <RARE_TOKEN> ; </a> 
<a> import java . io . <RARE_TOKEN> ; </a> 
<a> import java . io . IOException ; </a> 
<a> import java . io . <RARE_TOKEN> ; </a> 
<a> import java . io . OutputStream ; </a> 
<a> import java . io . <RARE_TOKEN> ; </a> 
<a> import java . io . Serializable ; </a> 
<a> import java . io . <RARE_TOKEN> ; </a> 
<a> import java . io . <RARE_TOKEN> ; </a> 
<a> import java . util . Collections ; </a> 
<a> import java . util . Date ; </a> 
<a> import java . util . List ; </a> 
<a> import java . util . concurrent . ScheduledFuture ; </a> 
<a> import java . util . concurrent . atomic . AtomicInteger ; </a> 
<a> public abstract class <RARE_TOKEN> implements <RARE_TOKEN> { </a> 
<a> protected <RARE_TOKEN> writer ; </a> 
<a> protected final <RARE_TOKEN> resource ; </a> 
<a> protected final int <RARE_TOKEN> ; </a> 
<a> protected final Logger logger = LoggerFactory . getLogger ( getClass ( ) ) ; </a> 
<a> protected <RARE_TOKEN> ( <RARE_TOKEN> resource , <RARE_TOKEN> serializationPolicy , <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> this . resource = resource ; </a> 
<a> this . serializationPolicy = serializationPolicy ; </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public synchronized boolean <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> protected boolean <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> != null ; </a> 
<a> } </a> 
<a> public HttpServletRequest getRequest ( ) { </a> 
<a> return resource . <RARE_TOKEN> ( ) . getRequest ( ) ; </a> 
<a> } </a> 
<a> public HttpServletResponse getResponse ( ) { </a> 
<a> return resource . <RARE_TOKEN> ( ) . getResponse ( ) ; </a> 
<a> } </a> 
<a> synchronized void <RARE_TOKEN> ( ) { </a> 
<a> if ( logger . <RARE_TOKEN> ( ) ) { </a> 
<a> logger . trace ( <RARE_TOKEN> <RARE_TOKEN> for <RARE_TOKEN> + <RARE_TOKEN> + <RARE_TOKEN> ) ; </a> 
<a> logger . trace ( <RARE_TOKEN> write for <RARE_TOKEN> + <RARE_TOKEN> + <RARE_TOKEN> <RARE_TOKEN> " + new Date ( <RARE_TOKEN> ) . toString ( ) ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> = System . currentTimeMillis ( ) ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> . cancel ( false ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> = resource . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( int statusCode ) throws IOException { </a> 
<a> <RARE_TOKEN> ( statusCode , null ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public synchronized void <RARE_TOKEN> ( int statusCode , String message ) throws IOException { </a> 
<a> try { </a> 
<a> if ( writer == null ) { </a> 
<a> getResponse ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> getResponse ( ) . setHeader ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> getResponse ( ) . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> writer = new <RARE_TOKEN> ( getResponse ( ) . <RARE_TOKEN> ( ) , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( statusCode , message ) ; </a> 
<a> } catch ( IllegalStateException e ) { </a> 
<a> logger . error ( <RARE_TOKEN> <RARE_TOKEN> response to <RARE_TOKEN> <RARE_TOKEN> " + e . getMessage ( ) ) ; </a> 
<a> } catch ( IOException e ) { </a> 
<a> logger . debug ( "Failed to <RARE_TOKEN> error to <RARE_TOKEN> , e ) ; </a> 
<a> } finally { </a> 
<a> <RARE_TOKEN> ( true ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> protected OutputStream <RARE_TOKEN> ( OutputStream <RARE_TOKEN> ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public synchronized void <RARE_TOKEN> ( ) throws IOException { </a> 
<a> getResponse ( ) . setHeader ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> getResponse ( ) . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> OutputStream <RARE_TOKEN> = getResponse ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> String <RARE_TOKEN> = getRequest ( ) . getHeader ( <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> != null && <RARE_TOKEN> . contains ( <RARE_TOKEN> ) ) { </a> 
<a> getResponse ( ) . setHeader ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = new <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> writer = new <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> if ( logger . <RARE_TOKEN> ( ) ) { </a> 
<a> logger . trace ( <RARE_TOKEN> <RARE_TOKEN> + <RARE_TOKEN> + <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> getRequest ( ) . setAttribute ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> public void suspend ( ) throws IOException { </a> 
<a> try { </a> 
<a> synchronized ( this ) { </a> 
<a> if ( <RARE_TOKEN> ) { </a> 
<a> return ; </a> 
<a> } </a> 
<a> if ( logger . <RARE_TOKEN> ( ) ) { </a> 
<a> logger . trace ( <RARE_TOKEN> <RARE_TOKEN> + <RARE_TOKEN> + <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> flush ( ) ; </a> 
<a> } </a> 
<a> } catch ( IOException e ) { </a> 
<a> logger . error ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> , e ) ; </a> 
<a> synchronized ( this ) { </a> 
<a> <RARE_TOKEN> ( false ) ; </a> 
<a> } </a> 
<a> throw e ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public synchronized void <RARE_TOKEN> ( ) throws IOException { </a> 
<a> if ( ! <RARE_TOKEN> ) { </a> 
<a> try { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> flush ( ) ; </a> 
<a> } finally { </a> 
<a> <RARE_TOKEN> ( true ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> void <RARE_TOKEN> ( ) { </a> 
<a> try { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } catch ( IOException e ) { </a> 
<a> logger . error ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> , e ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void write ( Serializable message ) throws IOException { </a> 
<a> write ( Collections . <RARE_TOKEN> ( message ) , true ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void write ( Serializable message , boolean flush ) throws IOException { </a> 
<a> write ( Collections . <RARE_TOKEN> ( message ) , flush ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void write ( List < ? extends Serializable > messages ) throws IOException { </a> 
<a> write ( messages , true ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public synchronized void write ( List < ? extends Serializable > messages , boolean flush ) throws IOException { </a> 
<a> if ( <RARE_TOKEN> ) { </a> 
<a> throw new IOException ( <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> try { </a> 
<a> if ( messages . size ( ) == 1 && messages . get ( 0 ) instanceof String </a> 
<a> && messages . get ( 0 ) . equals ( <RARE_TOKEN> . <RARE_TOKEN> ) ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } else { </a> 
<a> if ( logger . <RARE_TOKEN> ( ) ) { </a> 
<a> logger . trace ( <RARE_TOKEN> <RARE_TOKEN> + messages . size ( ) + " messages to <RARE_TOKEN> + <RARE_TOKEN> + <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( messages ) ; </a> 
<a> if ( flush ) { </a> 
<a> flush ( ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } catch ( IOException e ) { </a> 
<a> resource . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> ( false ) ; </a> 
<a> throw e ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public synchronized void <RARE_TOKEN> ( ) throws IOException { </a> 
<a> if ( ! <RARE_TOKEN> ) { </a> 
<a> try { </a> 
<a> logger . trace ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> + <RARE_TOKEN> + <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> flush ( ) ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } catch ( IOException e ) { </a> 
<a> logger . debug ( "Failed to <RARE_TOKEN> <RARE_TOKEN> , e ) ; </a> 
<a> <RARE_TOKEN> ( false ) ; </a> 
<a> throw e ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> synchronized void flush ( ) throws IOException { </a> 
<a> writer . flush ( ) ; </a> 
<a> } </a> 
<a> synchronized void <RARE_TOKEN> ( boolean <RARE_TOKEN> ) { </a> 
<a> if ( ! <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> = true ; </a> 
<a> if ( logger . <RARE_TOKEN> ( ) ) { </a> 
<a> logger . trace ( <RARE_TOKEN> <RARE_TOKEN> + <RARE_TOKEN> + <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> . cancel ( false ) ; </a> 
<a> <RARE_TOKEN> = null ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> ) { </a> 
<a> try { </a> 
<a> if ( writer != null ) { </a> 
<a> writer . close ( ) ; </a> 
<a> } </a> 
<a> } catch ( IOException e ) { </a> 
<a> logger . error ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> , e ) ; </a> 
<a> } </a> 
<a> resource . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public long <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> protected abstract void <RARE_TOKEN> ( int statusCode , String message ) throws IOException ; </a> 
<a> protected abstract void <RARE_TOKEN> ( ) throws IOException ; </a> 
<a> protected abstract void <RARE_TOKEN> ( List < ? extends Serializable > messages ) throws IOException ; </a> 
<a> protected abstract void <RARE_TOKEN> ( ) throws IOException ; </a> 
<a> protected abstract void <RARE_TOKEN> ( ) throws IOException ; </a> 
<a> protected boolean <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> session = resource . getSession ( false ) ; </a> 
<a> return session != null ; </a> 
<a> } </a> 
<a> protected String <RARE_TOKEN> ( Serializable message ) throws <RARE_TOKEN> , <RARE_TOKEN> { </a> 
<a> try { </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( serializationPolicy ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( message ) ; </a> 
<a> return <RARE_TOKEN> . toString ( ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> result = new <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> , result , message ) ; </a> 
<a> return new String ( result . <RARE_TOKEN> ( ) , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } catch ( <RARE_TOKEN> e ) { </a> 
<a> throw new <RARE_TOKEN> ( <RARE_TOKEN> to <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> " + e . getMessage ( ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private final <RARE_TOKEN> serializationPolicy ; </a> 
<a> private final <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> private boolean <RARE_TOKEN> ; </a> 
<a> private volatile long <RARE_TOKEN> ; </a> 
<a> private ScheduledFuture < ? > <RARE_TOKEN> ; </a> 
<a> private static AtomicInteger <RARE_TOKEN> = new AtomicInteger ( 1 ) ; </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . gwt . server . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . rpc . server . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . user . server . rpc . <RARE_TOKEN> ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> public <RARE_TOKEN> ( <RARE_TOKEN> resource , <RARE_TOKEN> serializationPolicy , <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> super ( resource , serializationPolicy , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected int <RARE_TOKEN> ( ) { </a> 
<a> return 0 ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> String <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . gwt . server . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . rpc . server . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . user . server . rpc . <RARE_TOKEN> ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> public <RARE_TOKEN> ( <RARE_TOKEN> resource , <RARE_TOKEN> serializationPolicy , <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> super ( resource , serializationPolicy , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . gwt . server . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . rpc . server . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . user . server . rpc . <RARE_TOKEN> ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> public <RARE_TOKEN> ( <RARE_TOKEN> resource , <RARE_TOKEN> serializationPolicy , <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> super ( resource , serializationPolicy , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected int <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> String <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . gwt . server . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . rpc . server . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . user . server . rpc . <RARE_TOKEN> ; </a> 
<a> import java . io . IOException ; </a> 
<a> import java . io . OutputStream ; </a> 
<a> import java . io . Serializable ; </a> 
<a> import java . util . List ; </a> 
<a> abstract public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> private boolean <RARE_TOKEN> ; </a> 
<a> protected Integer length ; </a> 
<a> protected final boolean <RARE_TOKEN> ; </a> 
<a> public <RARE_TOKEN> ( <RARE_TOKEN> resource , <RARE_TOKEN> serializationPolicy , <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> super ( resource , serializationPolicy , <RARE_TOKEN> ) ; </a> 
<a> String <RARE_TOKEN> = resource . <RARE_TOKEN> ( ) . getRequest ( ) . getHeader ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> != null && <RARE_TOKEN> . contains ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected OutputStream <RARE_TOKEN> ( OutputStream <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> = new <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( ) throws IOException { </a> 
<a> int <RARE_TOKEN> ; </a> 
<a> String <RARE_TOKEN> = getRequest ( ) . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> = Integer . parseInt ( <RARE_TOKEN> ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> String <RARE_TOKEN> = getRequest ( ) . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> length = Integer . parseInt ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> > 0 ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( true ) ; </a> 
<a> writer . flush ( ) ; </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> if ( <RARE_TOKEN> > <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = <RARE_TOKEN> ( <RARE_TOKEN> - <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> writer . append ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( false ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public synchronized void write ( List < ? extends Serializable > messages , boolean flush ) throws IOException { </a> 
<a> super . write ( messages , flush ) ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public synchronized void <RARE_TOKEN> ( ) throws IOException { </a> 
<a> super . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( ) throws IOException { </a> 
<a> int count = <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> if ( <RARE_TOKEN> ) { </a> 
<a> count = 2 * count ; </a> 
<a> } </a> 
<a> if ( ! <RARE_TOKEN> && <RARE_TOKEN> ( count ) ) { </a> 
<a> <RARE_TOKEN> = true ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> protected abstract void <RARE_TOKEN> ( ) throws IOException ; </a> 
<a> protected abstract int <RARE_TOKEN> ( ) ; </a> 
<a> protected abstract <RARE_TOKEN> <RARE_TOKEN> ( int <RARE_TOKEN> ) ; </a> 
<a> protected abstract boolean <RARE_TOKEN> ( int <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . gwt . server . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . rpc . server . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . user . server . rpc . <RARE_TOKEN> ; </a> 
<a> import java . io . IOException ; </a> 
<a> import java . io . Serializable ; </a> 
<a> import java . util . List ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> public <RARE_TOKEN> ( <RARE_TOKEN> resource , <RARE_TOKEN> serializationPolicy , <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> super ( resource , serializationPolicy , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ) throws IOException { </a> 
<a> getResponse ( ) . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> super . <RARE_TOKEN> ( ) ; </a> 
<a> writer . append ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) </a> 
<a> . append ( String . valueOf ( resource . <RARE_TOKEN> ( ) ) ) . append ( <RARE_TOKEN> ) </a> 
<a> . append ( String . valueOf ( <RARE_TOKEN> ) ) . append ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( int statusCode , String message ) throws IOException { </a> 
<a> getResponse ( ) . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> writer . append ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) . append ( String . valueOf ( statusCode ) ) ; </a> 
<a> if ( message != null ) { </a> 
<a> writer . append ( ' ' ) . append ( <RARE_TOKEN> . <RARE_TOKEN> ( message ) ) ; </a> 
<a> } </a> 
<a> writer . append ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( ) throws IOException { </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( List < ? extends Serializable > messages ) throws IOException { </a> 
<a> for ( Serializable message : messages ) { </a> 
<a> <RARE_TOKEN> string ; </a> 
<a> char event ; </a> 
<a> if ( message instanceof <RARE_TOKEN> ) { </a> 
<a> string = <RARE_TOKEN> . <RARE_TOKEN> ( ( <RARE_TOKEN> ) message ) ; </a> 
<a> event = <RARE_TOKEN> ; </a> 
<a> } else { </a> 
<a> string = <RARE_TOKEN> ( message ) ; </a> 
<a> event = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> writer . append ( <RARE_TOKEN> " ) . append ( event ) . append ( <RARE_TOKEN> ) ; </a> 
<a> writer . append ( <RARE_TOKEN> " ) . append ( string ) . append ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( ) throws IOException { </a> 
<a> writer . append ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ) throws IOException { </a> 
<a> writer . append ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . gwt . server . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . rpc . server . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . rpc . server . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . rpc . server . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . user . server . rpc . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . gwt . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import javax . servlet . <RARE_TOKEN> ; </a> 
<a> import javax . servlet . http . HttpServletRequest ; </a> 
<a> import java . io . IOException ; </a> 
<a> import java . io . InputStream ; </a> 
<a> import java . lang . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import java . net . <RARE_TOKEN> ; </a> 
<a> import java . net . URL ; </a> 
<a> import java . util . HashMap ; </a> 
<a> import java . util . Map ; </a> 
<a> public class <RARE_TOKEN> { </a> 
<a> protected static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> public static <RARE_TOKEN> <RARE_TOKEN> ( ) { </a> 
<a> if ( policy != null ) { </a> 
<a> return policy ; </a> 
<a> } </a> 
<a> policy = new <RARE_TOKEN> ( ) { </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( final Class < ? > clazz ) { </a> 
<a> return Object . class != clazz ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( final Class < ? > clazz ) { </a> 
<a> return Object . class != clazz ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( final Class < ? > clazz ) { </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( final Class < ? > clazz ) { </a> 
<a> } </a> 
<a> } ; </a> 
<a> return policy ; </a> 
<a> } </a> 
<a> protected static <RARE_TOKEN> <RARE_TOKEN> ( HttpServletRequest request , <RARE_TOKEN> context ) throws IOException { </a> 
<a> String <RARE_TOKEN> = request . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> synchronized ( <RARE_TOKEN> ) { </a> 
<a> if ( <RARE_TOKEN> . containsKey ( <RARE_TOKEN> ) ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . get ( <RARE_TOKEN> ) . get ( ) ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> . equals ( <RARE_TOKEN> ) ) { </a> 
<a> <RARE_TOKEN> = new <RARE_TOKEN> ( ) ; </a> 
<a> } else { </a> 
<a> String <RARE_TOKEN> = request . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> String <RARE_TOKEN> = new URL ( <RARE_TOKEN> ) . getPath ( ) ; </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> throw new <RARE_TOKEN> ( <RARE_TOKEN> request <RARE_TOKEN> GWT <RARE_TOKEN> path <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> String <RARE_TOKEN> = context . <RARE_TOKEN> ( ) ; </a> 
<a> if ( ! <RARE_TOKEN> . startsWith ( <RARE_TOKEN> ) ) { </a> 
<a> throw new <RARE_TOKEN> ( <RARE_TOKEN> request <RARE_TOKEN> <RARE_TOKEN> GWT <RARE_TOKEN> path <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . substring ( <RARE_TOKEN> . length ( ) ) ; </a> 
<a> InputStream in = <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> , context ) ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( in ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> . put ( <RARE_TOKEN> , new <RARE_TOKEN> < <RARE_TOKEN> > ( <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> private static InputStream <RARE_TOKEN> ( String <RARE_TOKEN> , String <RARE_TOKEN> </a> 
<a> , <RARE_TOKEN> context ) throws IOException { </a> 
<a> String <RARE_TOKEN> = <RARE_TOKEN> + <RARE_TOKEN> + <RARE_TOKEN> ; </a> 
<a> InputStream in = context . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> if ( in == null ) { </a> 
<a> throw new IOException ( <RARE_TOKEN> not <RARE_TOKEN> <RARE_TOKEN> data for <RARE_TOKEN> " + <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> return in ; </a> 
<a> } </a> 
<a> private static final Map < String , <RARE_TOKEN> < <RARE_TOKEN> > > <RARE_TOKEN> = new HashMap < String , <RARE_TOKEN> < <RARE_TOKEN> > > ( ) ; </a> 
<a> private static <RARE_TOKEN> policy ; </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . gwt . server . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . rpc . server . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . user . server . rpc . <RARE_TOKEN> ; </a> 
<a> import java . io . IOException ; </a> 
<a> import java . io . Serializable ; </a> 
<a> import java . util . List ; </a> 
<a> abstract public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> private static final int <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> ; </a> 
<a> static { </a> 
<a> char [ ] <RARE_TOKEN> = new char [ <RARE_TOKEN> + 1 ] ; </a> 
<a> for ( int i = 0 ; i < <RARE_TOKEN> . length - 1 ; i ++ ) { </a> 
<a> <RARE_TOKEN> [ i ] = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> [ <RARE_TOKEN> . length - 1 ] = <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = new String ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( <RARE_TOKEN> resource , <RARE_TOKEN> serializationPolicy , <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> super ( resource , serializationPolicy , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> abstract String <RARE_TOKEN> ( ) ; </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ) throws IOException { </a> 
<a> getResponse ( ) . <RARE_TOKEN> ( <RARE_TOKEN> ( ) ) ; </a> 
<a> String <RARE_TOKEN> = getRequest ( ) . getHeader ( <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> if ( logger . isDebugEnabled ( ) ) { </a> 
<a> logger . debug ( <RARE_TOKEN> " + <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> getResponse ( ) . setHeader ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> super . <RARE_TOKEN> ( ) ; </a> 
<a> writer . append ( <RARE_TOKEN> ) . append ( String . valueOf ( resource . <RARE_TOKEN> ( ) ) ) . append ( <RARE_TOKEN> ) ; </a> 
<a> writer . append ( String . valueOf ( <RARE_TOKEN> ) ) . append ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> static <RARE_TOKEN> <RARE_TOKEN> ( <RARE_TOKEN> string ) { </a> 
<a> int length = ( string != null ) ? string . length ( ) : 0 ; </a> 
<a> int i = 0 ; </a> 
<a> loop : </a> 
<a> while ( i < length ) { </a> 
<a> char ch = string . charAt ( i ) ; </a> 
<a> switch ( ch ) { </a> 
<a> case <RARE_TOKEN> : </a> 
<a> case <RARE_TOKEN> : </a> 
<a> break loop ; </a> 
<a> } </a> 
<a> i ++ ; </a> 
<a> } </a> 
<a> if ( i == length ) </a> 
<a> return string ; </a> 
<a> StringBuilder <RARE_TOKEN> = new StringBuilder ( string . length ( ) * 2 ) ; </a> 
<a> <RARE_TOKEN> . append ( string , 0 , i ) ; </a> 
<a> while ( i < length ) { </a> 
<a> char ch = string . charAt ( i ) ; </a> 
<a> switch ( ch ) { </a> 
<a> case <RARE_TOKEN> : </a> 
<a> <RARE_TOKEN> . append ( <RARE_TOKEN> ) ; </a> 
<a> break ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> <RARE_TOKEN> . append ( <RARE_TOKEN> ) ; </a> 
<a> break ; </a> 
<a> default : </a> 
<a> <RARE_TOKEN> . append ( ch ) ; </a> 
<a> } </a> 
<a> i ++ ; </a> 
<a> } </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected <RARE_TOKEN> <RARE_TOKEN> ( int <RARE_TOKEN> ) { </a> 
<a> if ( <RARE_TOKEN> > <RARE_TOKEN> . length ( ) - 1 ) { </a> 
<a> StringBuilder result = new StringBuilder ( <RARE_TOKEN> ) ; </a> 
<a> while ( <RARE_TOKEN> > 0 ) { </a> 
<a> if ( <RARE_TOKEN> > <RARE_TOKEN> . length ( ) - 1 ) { </a> 
<a> result . append ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> -= <RARE_TOKEN> . length ( ) - 1 ; </a> 
<a> } else { </a> 
<a> result . append ( <RARE_TOKEN> . substring ( <RARE_TOKEN> . length ( ) - 1 - <RARE_TOKEN> ) ) ; </a> 
<a> <RARE_TOKEN> = 0 ; </a> 
<a> } </a> 
<a> } </a> 
<a> return result . toString ( ) ; </a> 
<a> } else { </a> 
<a> return <RARE_TOKEN> . substring ( <RARE_TOKEN> . length ( ) - <RARE_TOKEN> - 1 ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( int statusCode , String message ) throws IOException { </a> 
<a> getResponse ( ) . <RARE_TOKEN> ( statusCode ) ; </a> 
<a> if ( message != null ) { </a> 
<a> writer . append ( message ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( List < ? extends Serializable > messages ) throws IOException { </a> 
<a> for ( Serializable message : messages ) { </a> 
<a> <RARE_TOKEN> string ; </a> 
<a> if ( message instanceof <RARE_TOKEN> ) { </a> 
<a> string = <RARE_TOKEN> ( ( <RARE_TOKEN> ) message ) ; </a> 
<a> if ( string == message ) { </a> 
<a> writer . append ( <RARE_TOKEN> ) ; </a> 
<a> } else { </a> 
<a> writer . append ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } else { </a> 
<a> string = <RARE_TOKEN> ( message ) ; </a> 
<a> } </a> 
<a> writer . append ( string ) . append ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected boolean <RARE_TOKEN> ( int <RARE_TOKEN> ) { </a> 
<a> if ( length != null ) { </a> 
<a> return <RARE_TOKEN> > length ; </a> 
<a> } else { </a> 
<a> return <RARE_TOKEN> > 5 * <RARE_TOKEN> * <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( ) throws IOException { </a> 
<a> writer . append ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( ) throws IOException { </a> 
<a> writer . append ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( ) throws IOException { </a> 
<a> writer . append ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . gwt . server . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . rpc . server . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . user . server . rpc . <RARE_TOKEN> ; </a> 
<a> import java . io . IOException ; </a> 
<a> import java . io . Serializable ; </a> 
<a> import java . util . List ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> public <RARE_TOKEN> ( <RARE_TOKEN> resource , <RARE_TOKEN> serializationPolicy , <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> super ( resource , serializationPolicy , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ) throws IOException { </a> 
<a> super . <RARE_TOKEN> ( ) ; </a> 
<a> writer . append ( <RARE_TOKEN> ) </a> 
<a> . append ( String . valueOf ( resource . <RARE_TOKEN> ( ) ) ) . append ( <RARE_TOKEN> ) </a> 
<a> . append ( String . valueOf ( <RARE_TOKEN> ) ) . append ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( int statusCode , String message ) throws IOException { </a> 
<a> writer . append ( <RARE_TOKEN> ) . append ( String . valueOf ( statusCode ) ) ; </a> 
<a> if ( message != null ) { </a> 
<a> writer . append ( ' ' ) . append ( <RARE_TOKEN> . <RARE_TOKEN> ( message ) ) ; </a> 
<a> } </a> 
<a> writer . append ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( ) throws IOException { </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( List < ? extends Serializable > messages ) throws IOException { </a> 
<a> for ( Serializable message : messages ) { </a> 
<a> <RARE_TOKEN> string ; </a> 
<a> char event ; </a> 
<a> if ( message instanceof <RARE_TOKEN> ) { </a> 
<a> string = <RARE_TOKEN> . <RARE_TOKEN> ( ( <RARE_TOKEN> ) message ) ; </a> 
<a> event = <RARE_TOKEN> ; </a> 
<a> } else { </a> 
<a> string = <RARE_TOKEN> ( message ) ; </a> 
<a> event = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> writer . append ( event ) . append ( <RARE_TOKEN> ) ; </a> 
<a> writer . append ( string ) . append ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( ) throws IOException { </a> 
<a> writer . append ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ) throws IOException { </a> 
<a> writer . append ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> package org . timepedia . exporter . client ; </a> 
<a> import java . lang . annotation . <RARE_TOKEN> ; </a> 
<a> import java . lang . annotation . <RARE_TOKEN> ; </a> 
<a> import java . lang . annotation . <RARE_TOKEN> ; </a> 
<a> import java . lang . annotation . <RARE_TOKEN> ; </a> 
<a> @ <RARE_TOKEN> ( </a> 
<a> { <RARE_TOKEN> . <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> , <RARE_TOKEN> . TYPE } ) </a> 
<a> @ <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ) </a> 
<a> public @ interface <RARE_TOKEN> { </a> 
<a> String value ( ) default "" ; </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> package org . timepedia . exporter . client ; </a> 
<a> import java . lang . annotation . <RARE_TOKEN> ; </a> 
<a> import java . lang . annotation . <RARE_TOKEN> ; </a> 
<a> import java . lang . annotation . <RARE_TOKEN> ; </a> 
<a> import java . lang . annotation . <RARE_TOKEN> ; </a> 
<a> @ <RARE_TOKEN> ( <RARE_TOKEN> . TYPE ) </a> 
<a> @ <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ) </a> 
<a> public @ interface <RARE_TOKEN> { </a> 
<a> String value ( ) ; </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> package org . timepedia . exporter . client ; </a> 
<a> public interface <RARE_TOKEN> { </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> package org . timepedia . exporter . client ; </a> 
<a> public interface <RARE_TOKEN> { </a> 
<a> @ Deprecated </a> 
<a> void <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> package org . timepedia . exporter . client ; </a> 
<a> import com . google . gwt . core . client . GWT ; </a> 
<a> import com . google . gwt . core . client . JavaScriptObject ; </a> 
<a> import com . google . gwt . core . client . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . core . client . <RARE_TOKEN> ; </a> 
<a> import java . util . HashMap ; </a> 
<a> import java . util . <RARE_TOKEN> ; </a> 
<a> import java . util . Map ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> public static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private native static JavaScriptObject <RARE_TOKEN> ( <RARE_TOKEN> type , </a> 
<a> JavaScriptObject <RARE_TOKEN> , String <RARE_TOKEN> ) ; </a> 
<a> private HashMap <RARE_TOKEN> = new HashMap ( ) ; </a> 
<a> private HashMap < Class , JavaScriptObject > <RARE_TOKEN> </a> 
<a> = new HashMap < Class , JavaScriptObject > ( ) ; </a> 
<a> private HashMap < Class , JavaScriptObject > <RARE_TOKEN> </a> 
<a> = new HashMap < Class , JavaScriptObject > ( ) ; </a> 
<a> private <RARE_TOKEN> < Object , JavaScriptObject > <RARE_TOKEN> = null ; </a> 
<a> public <RARE_TOKEN> ( ) { </a> 
<a> if ( ! GWT . <RARE_TOKEN> ( ) ) { </a> 
<a> <RARE_TOKEN> = new <RARE_TOKEN> < Object , JavaScriptObject > ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( <RARE_TOKEN> type , </a> 
<a> JavaScriptObject <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( type . getClass ( ) , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( Class type , JavaScriptObject <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> . put ( type , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( Object <RARE_TOKEN> , JavaScriptObject wrapper ) { </a> 
<a> if ( GWT . <RARE_TOKEN> ( ) ) { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> , wrapper , <RARE_TOKEN> ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> , wrapper ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public JavaScriptObject <RARE_TOKEN> ( <RARE_TOKEN> type ) { </a> 
<a> return <RARE_TOKEN> ( type . getClass ( ) ) ; </a> 
<a> } </a> 
<a> public JavaScriptObject <RARE_TOKEN> ( Class type ) { </a> 
<a> Object o = <RARE_TOKEN> . get ( type ) ; </a> 
<a> return ( JavaScriptObject ) o ; </a> 
<a> } </a> 
<a> public JavaScriptObject wrap ( <RARE_TOKEN> type ) { </a> 
<a> if ( type == null ) { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> if ( ! GWT . <RARE_TOKEN> ( ) ) { </a> 
<a> JavaScriptObject wrapper = <RARE_TOKEN> . get ( type ) ; </a> 
<a> if ( wrapper != null ) { </a> 
<a> return wrapper ; </a> 
<a> } </a> 
<a> } else { </a> 
<a> JavaScriptObject wrapper = <RARE_TOKEN> ( type , <RARE_TOKEN> ) ; </a> 
<a> if ( wrapper != null ) { </a> 
<a> return wrapper ; </a> 
<a> } </a> 
<a> } </a> 
<a> JavaScriptObject wrapper = <RARE_TOKEN> ( type , <RARE_TOKEN> ( type ) , </a> 
<a> <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( type , wrapper ) ; </a> 
<a> return wrapper ; </a> 
<a> } </a> 
<a> public JavaScriptObject wrap ( <RARE_TOKEN> [ ] type ) { </a> 
<a> if ( type == null ) { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> JavaScriptObject wrapper = <RARE_TOKEN> ( type ) ; </a> 
<a> <RARE_TOKEN> < JavaScriptObject > <RARE_TOKEN> = wrapper . cast ( ) ; </a> 
<a> for ( int i = 0 ; i < type . length ; i ++ ) { </a> 
<a> <RARE_TOKEN> . set ( i , wrap ( type [ i ] ) ) ; </a> 
<a> } </a> 
<a> return wrapper ; </a> 
<a> } </a> 
<a> private JavaScriptObject <RARE_TOKEN> ( Object type ) { </a> 
<a> JavaScriptObject wrapper = null ; </a> 
<a> if ( ! GWT . <RARE_TOKEN> ( ) ) { </a> 
<a> wrapper = <RARE_TOKEN> . get ( type ) ; </a> 
<a> } else { </a> 
<a> wrapper = <RARE_TOKEN> ( type , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( wrapper == null ) { </a> 
<a> wrapper = JavaScriptObject . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> ( type , wrapper ) ; </a> 
<a> } </a> 
<a> return wrapper ; </a> 
<a> } </a> 
<a> private static native JavaScriptObject <RARE_TOKEN> ( Object <RARE_TOKEN> ) ; </a> 
<a> @ Override </a> 
<a> public JavaScriptObject wrap ( float [ ] type ) { </a> 
<a> if ( ! GWT . <RARE_TOKEN> ( ) ) { </a> 
<a> if ( type == null ) { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> JavaScriptObject wrapper = <RARE_TOKEN> ( type ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = wrapper . cast ( ) ; </a> 
<a> for ( int i = 0 ; i < type . length ; i ++ ) { </a> 
<a> <RARE_TOKEN> . set ( i , type [ i ] ) ; </a> 
<a> } </a> 
<a> return wrapper ; </a> 
<a> } else { </a> 
<a> return <RARE_TOKEN> ( type ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public JavaScriptObject wrap ( byte [ ] type ) { </a> 
<a> if ( ! GWT . <RARE_TOKEN> ( ) ) { </a> 
<a> if ( type == null ) { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> JavaScriptObject wrapper = <RARE_TOKEN> ( type ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = wrapper . cast ( ) ; </a> 
<a> for ( int i = 0 ; i < type . length ; i ++ ) { </a> 
<a> <RARE_TOKEN> . set ( i , type [ i ] ) ; </a> 
<a> } </a> 
<a> return wrapper ; </a> 
<a> } else { </a> 
<a> return <RARE_TOKEN> ( type ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public JavaScriptObject wrap ( char [ ] type ) { </a> 
<a> if ( ! GWT . <RARE_TOKEN> ( ) ) { </a> 
<a> if ( type == null ) { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> JavaScriptObject wrapper = <RARE_TOKEN> ( type ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = wrapper . cast ( ) ; </a> 
<a> for ( int i = 0 ; i < type . length ; i ++ ) { </a> 
<a> <RARE_TOKEN> . set ( i , type [ i ] ) ; </a> 
<a> } </a> 
<a> return wrapper ; </a> 
<a> } else { </a> 
<a> return <RARE_TOKEN> ( type ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public JavaScriptObject wrap ( int [ ] type ) { </a> 
<a> if ( ! GWT . <RARE_TOKEN> ( ) ) { </a> 
<a> if ( type == null ) { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> JavaScriptObject wrapper = <RARE_TOKEN> ( type ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = wrapper . cast ( ) ; </a> 
<a> for ( int i = 0 ; i < type . length ; i ++ ) { </a> 
<a> <RARE_TOKEN> . set ( i , type [ i ] ) ; </a> 
<a> } </a> 
<a> return wrapper ; </a> 
<a> } else { </a> 
<a> return <RARE_TOKEN> ( type ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public JavaScriptObject wrap ( long [ ] type ) { </a> 
<a> if ( ! GWT . <RARE_TOKEN> ( ) ) { </a> 
<a> if ( type == null ) { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> JavaScriptObject wrapper = <RARE_TOKEN> ( type ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = wrapper . cast ( ) ; </a> 
<a> for ( int i = 0 ; i < type . length ; i ++ ) { </a> 
<a> <RARE_TOKEN> . set ( i , type [ i ] ) ; </a> 
<a> } </a> 
<a> return wrapper ; </a> 
<a> } else { </a> 
<a> return <RARE_TOKEN> ( type ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public JavaScriptObject wrap ( short [ ] type ) { </a> 
<a> if ( ! GWT . <RARE_TOKEN> ( ) ) { </a> 
<a> if ( type == null ) { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> JavaScriptObject wrapper = <RARE_TOKEN> ( type ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = wrapper . cast ( ) ; </a> 
<a> for ( int i = 0 ; i < type . length ; i ++ ) { </a> 
<a> <RARE_TOKEN> . set ( i , type [ i ] ) ; </a> 
<a> } </a> 
<a> return wrapper ; </a> 
<a> } else { </a> 
<a> return <RARE_TOKEN> ( type ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public JavaScriptObject wrap ( double [ ] type ) { </a> 
<a> if ( ! GWT . <RARE_TOKEN> ( ) ) { </a> 
<a> if ( type == null ) { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> JavaScriptObject wrapper = <RARE_TOKEN> ( type ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = wrapper . cast ( ) ; </a> 
<a> for ( int i = 0 ; i < type . length ; i ++ ) { </a> 
<a> <RARE_TOKEN> . set ( i , type [ i ] ) ; </a> 
<a> } </a> 
<a> return wrapper ; </a> 
<a> } else { </a> 
<a> return <RARE_TOKEN> ( type ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private native JavaScriptObject <RARE_TOKEN> ( Object type , String <RARE_TOKEN> ) ; </a> 
<a> private void <RARE_TOKEN> ( Object <RARE_TOKEN> , JavaScriptObject wrapper ) { </a> 
<a> <RARE_TOKEN> . put ( <RARE_TOKEN> , wrapper ) ; </a> 
<a> } </a> 
<a> private native void <RARE_TOKEN> ( Object <RARE_TOKEN> , JavaScriptObject wrapper , </a> 
<a> String <RARE_TOKEN> ) ; </a> 
<a> private native void <RARE_TOKEN> ( JavaScriptObject <RARE_TOKEN> , String <RARE_TOKEN> ) ; </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( String <RARE_TOKEN> , </a> 
<a> String <RARE_TOKEN> ) { </a> 
<a> String <RARE_TOKEN> [ ] = <RARE_TOKEN> . split ( <RARE_TOKEN> ) ; </a> 
<a> JavaScriptObject <RARE_TOKEN> = <RARE_TOKEN> ( ) ; </a> 
<a> for ( int i = 0 ; i < <RARE_TOKEN> . length ; i ++ ) { </a> 
<a> if ( ! <RARE_TOKEN> [ i ] . equals ( <RARE_TOKEN> ) ) { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> [ i ] ) ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> [ i ] ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> String <RARE_TOKEN> [ ] = <RARE_TOKEN> . split ( <RARE_TOKEN> ) ; </a> 
<a> for ( String <RARE_TOKEN> : <RARE_TOKEN> ) { </a> 
<a> if ( ! <RARE_TOKEN> . <RARE_TOKEN> ( ) . equals ( "" ) ) { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> private static native JavaScriptObject <RARE_TOKEN> ( ) ; </a> 
<a> private static native JavaScriptObject <RARE_TOKEN> ( JavaScriptObject <RARE_TOKEN> , </a> 
<a> String key ) ; </a> 
<a> @ Override </a> 
<a> public JavaScriptObject <RARE_TOKEN> ( Class clazz , String <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> < JavaScriptObject > <RARE_TOKEN> , boolean <RARE_TOKEN> ) { </a> 
<a> Map < Class , JavaScriptObject > <RARE_TOKEN> = <RARE_TOKEN> ? <RARE_TOKEN> </a> 
<a> : <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> < <RARE_TOKEN> > <RARE_TOKEN> = <RARE_TOKEN> ( <RARE_TOKEN> . get ( clazz ) . cast ( ) , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> . length ( ) ) ; </a> 
<a> for ( int i = 0 ; i < <RARE_TOKEN> . length ( ) ; i ++ ) { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = <RARE_TOKEN> . get ( i ) ; </a> 
<a> if ( <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ) { </a> 
<a> JavaScriptObject <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> if ( ! GWT . <RARE_TOKEN> ( ) ) { </a> 
<a> JavaScriptObject <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> return <RARE_TOKEN> != null ? <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) : <RARE_TOKEN> ; </a> 
<a> } else { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> throw new <RARE_TOKEN> ( </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> method for <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> private native static JavaScriptObject <RARE_TOKEN> ( JavaScriptObject <RARE_TOKEN> , </a> 
<a> JavaScriptObject <RARE_TOKEN> ) ; </a> 
<a> private native <RARE_TOKEN> < <RARE_TOKEN> > <RARE_TOKEN> ( JavaScriptObject <RARE_TOKEN> , </a> 
<a> String <RARE_TOKEN> , int <RARE_TOKEN> ) ; </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( Class clazz , JavaScriptObject <RARE_TOKEN> , </a> 
<a> boolean <RARE_TOKEN> ) { </a> 
<a> if ( <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> . put ( clazz , <RARE_TOKEN> ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> . put ( clazz , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> final public static class <RARE_TOKEN> extends JavaScriptObject { </a> 
<a> protected <RARE_TOKEN> ( ) { </a> 
<a> } </a> 
<a> public boolean <RARE_TOKEN> ( <RARE_TOKEN> < JavaScriptObject > <RARE_TOKEN> ) { </a> 
<a> for ( int i = 0 ; i < <RARE_TOKEN> . length ( ) ; i ++ ) { </a> 
<a> Object <RARE_TOKEN> = <RARE_TOKEN> ( i + 2 ) ; </a> 
<a> String <RARE_TOKEN> = <RARE_TOKEN> ( <RARE_TOKEN> , i ) ; </a> 
<a> if ( <RARE_TOKEN> . equals ( <RARE_TOKEN> ) ) { </a> 
<a> Object <RARE_TOKEN> = <RARE_TOKEN> ( <RARE_TOKEN> , i ) ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> if ( ! <RARE_TOKEN> . getClass ( ) . equals ( <RARE_TOKEN> ) ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> } else if ( ! <RARE_TOKEN> . equals ( <RARE_TOKEN> ) ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> } else if ( ! <RARE_TOKEN> . equals ( <RARE_TOKEN> ) ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> } </a> 
<a> return true ; </a> 
<a> } </a> 
<a> public native Object <RARE_TOKEN> ( JavaScriptObject args , int i ) ; </a> 
<a> public native static String <RARE_TOKEN> ( JavaScriptObject args , int i ) ; </a> 
<a> public native Object <RARE_TOKEN> ( int i ) ; </a> 
<a> public native JavaScriptObject <RARE_TOKEN> ( ) ; </a> 
<a> public native JavaScriptObject <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> package org . timepedia . exporter . client ; </a> 
<a> import com . google . gwt . core . client . JavaScriptObject ; </a> 
<a> import com . google . gwt . core . client . <RARE_TOKEN> ; </a> 
<a> public class <RARE_TOKEN> { </a> 
<a> public void <RARE_TOKEN> ( <RARE_TOKEN> type , </a> 
<a> JavaScriptObject <RARE_TOKEN> ) { </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( Class type , JavaScriptObject <RARE_TOKEN> ) { </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( Object <RARE_TOKEN> , JavaScriptObject wrapper ) { </a> 
<a> } </a> 
<a> public JavaScriptObject <RARE_TOKEN> ( <RARE_TOKEN> type ) { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> public JavaScriptObject <RARE_TOKEN> ( String type ) { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> public JavaScriptObject wrap ( <RARE_TOKEN> type ) { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> public JavaScriptObject wrap ( <RARE_TOKEN> [ ] type ) { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> public JavaScriptObject wrap ( double [ ] type ) { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> public JavaScriptObject wrap ( float [ ] type ) { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> public JavaScriptObject wrap ( int [ ] type ) { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> public JavaScriptObject wrap ( char [ ] type ) { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> public JavaScriptObject wrap ( byte [ ] type ) { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> public JavaScriptObject wrap ( long [ ] type ) { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> public JavaScriptObject wrap ( short [ ] type ) { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( String <RARE_TOKEN> , String <RARE_TOKEN> ) { </a> 
<a> } </a> 
<a> public JavaScriptObject <RARE_TOKEN> ( Class clazz , String <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> < JavaScriptObject > <RARE_TOKEN> , boolean <RARE_TOKEN> ) { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( Class clazz , JavaScriptObject <RARE_TOKEN> , boolean <RARE_TOKEN> ) { </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> package org . timepedia . exporter . client ; </a> 
<a> import java . lang . annotation . <RARE_TOKEN> ; </a> 
<a> import java . lang . annotation . <RARE_TOKEN> ; </a> 
<a> import java . lang . annotation . <RARE_TOKEN> ; </a> 
<a> import java . lang . annotation . <RARE_TOKEN> ; </a> 
<a> @ <RARE_TOKEN> ( </a> 
<a> { <RARE_TOKEN> . <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> } ) </a> 
<a> @ <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ) </a> 
<a> public @ interface <RARE_TOKEN> { </a> 
<a> public abstract boolean value ( ) default false ; </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> package org . timepedia . exporter . client ; </a> 
<a> import java . lang . annotation . <RARE_TOKEN> ; </a> 
<a> import java . lang . annotation . <RARE_TOKEN> ; </a> 
<a> import java . lang . annotation . <RARE_TOKEN> ; </a> 
<a> import java . lang . annotation . <RARE_TOKEN> ; </a> 
<a> @ <RARE_TOKEN> ( </a> 
<a> { <RARE_TOKEN> . <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> } ) </a> 
<a> @ <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ) </a> 
<a> public @ interface <RARE_TOKEN> { </a> 
<a> public abstract String value ( ) default "" ; </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> package org . timepedia . exporter . client ; </a> 
<a> import java . lang . annotation . <RARE_TOKEN> ; </a> 
<a> import java . lang . annotation . <RARE_TOKEN> ; </a> 
<a> import java . lang . annotation . <RARE_TOKEN> ; </a> 
<a> import java . lang . annotation . <RARE_TOKEN> ; </a> 
<a> @ <RARE_TOKEN> ( <RARE_TOKEN> . TYPE ) </a> 
<a> @ <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ) </a> 
<a> public @ interface <RARE_TOKEN> { </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> package org . timepedia . exporter . <RARE_TOKEN> ; </a> 
<a> public class <RARE_TOKEN> { </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> package org . timepedia . exporter . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . core . ext . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . core . ext . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . core . ext . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . core . ext . <RARE_TOKEN> . JClassType ; </a> 
<a> import com . google . gwt . user . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . user . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import java . io . <RARE_TOKEN> ; </a> 
<a> import java . util . ArrayList ; </a> 
<a> import java . util . HashMap ; </a> 
<a> import java . util . HashSet ; </a> 
<a> public class <RARE_TOKEN> { </a> 
<a> private <RARE_TOKEN> logger ; </a> 
<a> private <RARE_TOKEN> ctx ; </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> private <RARE_TOKEN> sw ; </a> 
<a> private ArrayList < JExportableClassType > <RARE_TOKEN> ; </a> 
<a> private HashSet < String > <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> public <RARE_TOKEN> ( <RARE_TOKEN> logger , <RARE_TOKEN> ctx ) { </a> 
<a> this ( logger , ctx , new HashSet < String > ( ) ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( <RARE_TOKEN> logger , <RARE_TOKEN> ctx , </a> 
<a> HashSet < String > <RARE_TOKEN> ) { </a> 
<a> this . logger = logger ; </a> 
<a> this . ctx = ctx ; </a> 
<a> <RARE_TOKEN> = new <RARE_TOKEN> ( ctx . <RARE_TOKEN> ( ) , logger ) ; </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = new ArrayList < JExportableClassType > ( ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( JExportableClassType requestedType ) </a> 
<a> throws <RARE_TOKEN> { </a> 
<a> if ( requestedType == null ) { </a> 
<a> logger . log ( <RARE_TOKEN> . <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> + requestedType . getQualifiedSourceName ( ) </a> 
<a> + <RARE_TOKEN> <RARE_TOKEN> not <RARE_TOKEN> <RARE_TOKEN> , null ) ; </a> 
<a> throw new <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> String <RARE_TOKEN> = requestedType . <RARE_TOKEN> ( ) ; </a> 
<a> sw . <RARE_TOKEN> ( ) ; </a> 
<a> sw . println ( <RARE_TOKEN> " + <RARE_TOKEN> . <RARE_TOKEN> + " <RARE_TOKEN> ) ; </a> 
<a> sw . println ( ) ; </a> 
<a> sw . println ( <RARE_TOKEN> " + <RARE_TOKEN> + <RARE_TOKEN> { <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> sw . println ( </a> 
<a> <RARE_TOKEN> " + <RARE_TOKEN> + <RARE_TOKEN> + <RARE_TOKEN> . <RARE_TOKEN> + " <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> sw . <RARE_TOKEN> ( ) ; </a> 
<a> sw . println ( <RARE_TOKEN> = <RARE_TOKEN> ) ; </a> 
<a> if ( requestedType . <RARE_TOKEN> ( ) ) { </a> 
<a> sw . println ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> sw . <RARE_TOKEN> ( ) ; </a> 
<a> sw . println ( <RARE_TOKEN> ) ; </a> 
<a> sw . println ( ) ; </a> 
<a> sw . println ( <RARE_TOKEN> static " + <RARE_TOKEN> + " <RARE_TOKEN> </a> 
<a> + <RARE_TOKEN> . <RARE_TOKEN> + " <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> sw . <RARE_TOKEN> ( ) ; </a> 
<a> sw . println ( <RARE_TOKEN> new " + <RARE_TOKEN> + <RARE_TOKEN> ) ; </a> 
<a> sw . <RARE_TOKEN> ( ) ; </a> 
<a> sw . println ( <RARE_TOKEN> ) ; </a> 
<a> sw . println ( ) ; </a> 
<a> <RARE_TOKEN> [ ] <RARE_TOKEN> = requestedType . <RARE_TOKEN> ( ) ; </a> 
<a> if ( <RARE_TOKEN> . length != 1 ) { </a> 
<a> logger . log ( <RARE_TOKEN> . <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> " + requestedType . getQualifiedSourceName ( ) </a> 
<a> + " has <RARE_TOKEN> <RARE_TOKEN> one " </a> 
<a> + <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> for " </a> 
<a> + <RARE_TOKEN> method <RARE_TOKEN> , null ) ; </a> 
<a> throw new <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> method = <RARE_TOKEN> [ 0 ] ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = method . <RARE_TOKEN> ( ) ; </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> logger . log ( <RARE_TOKEN> . <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> type of method " + method + " is not <RARE_TOKEN> , null ) ; </a> 
<a> throw new <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> . <RARE_TOKEN> ( ) && ! <RARE_TOKEN> </a> 
<a> . contains ( <RARE_TOKEN> . getQualifiedSourceName ( ) ) ) { </a> 
<a> if ( <RARE_TOKEN> ( <RARE_TOKEN> . getQualifiedSourceName ( ) ) ) { </a> 
<a> <RARE_TOKEN> . add ( ( JExportableClassType ) <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( method ) ; </a> 
<a> boolean <RARE_TOKEN> = <RARE_TOKEN> . getQualifiedSourceName ( ) . equals ( <RARE_TOKEN> ) ; </a> 
<a> boolean <RARE_TOKEN> = method . <RARE_TOKEN> ( ) . length == 0 ; </a> 
<a> sw . print ( </a> 
<a> <RARE_TOKEN> " + method . <RARE_TOKEN> ( ) . getQualifiedSourceName ( ) ) ; </a> 
<a> sw . print ( " " + method . getName ( ) + <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( method , - 1 , true ) ; </a> 
<a> sw . println ( <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> sw . <RARE_TOKEN> ( ) ; </a> 
<a> sw . print ( ( <RARE_TOKEN> ? "" : <RARE_TOKEN> " ) + <RARE_TOKEN> + ( <RARE_TOKEN> ? "" : <RARE_TOKEN> ) ) ; </a> 
<a> <RARE_TOKEN> ( method , false ) ; </a> 
<a> sw . println ( <RARE_TOKEN> ) ; </a> 
<a> sw . <RARE_TOKEN> ( ) ; </a> 
<a> sw . println ( <RARE_TOKEN> ) ; </a> 
<a> sw . println ( ) ; </a> 
<a> sw . print ( <RARE_TOKEN> native " + ( <RARE_TOKEN> ? <RARE_TOKEN> </a> 
<a> : method . <RARE_TOKEN> ( ) . getQualifiedSourceName ( ) ) ) ; </a> 
<a> sw . print ( " <RARE_TOKEN> + <RARE_TOKEN> . <RARE_TOKEN> + " <RARE_TOKEN> ) ; </a> 
<a> if ( method . <RARE_TOKEN> ( ) . length > 0 ) { </a> 
<a> sw . print ( ", " ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( method , - 1 , true ) ; </a> 
<a> sw . println ( <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> sw . <RARE_TOKEN> ( ) ; </a> 
<a> sw . print ( ( ! <RARE_TOKEN> ? <RARE_TOKEN> <RARE_TOKEN> " : "" ) + <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( method , true ) ; </a> 
<a> sw . println ( <RARE_TOKEN> ) ; </a> 
<a> boolean <RARE_TOKEN> = <RARE_TOKEN> instanceof <RARE_TOKEN> ; </a> 
<a> if ( <RARE_TOKEN> . <RARE_TOKEN> ( ) && ! <RARE_TOKEN> && ! <RARE_TOKEN> ) { </a> 
<a> sw . println ( <RARE_TOKEN> != null && result != <RARE_TOKEN> " </a> 
<a> + <RARE_TOKEN> ) ; </a> 
<a> sw . println ( <RARE_TOKEN> <RARE_TOKEN> == <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( ! <RARE_TOKEN> ) { </a> 
<a> sw . println ( <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> sw . <RARE_TOKEN> ( ) ; </a> 
<a> sw . println ( <RARE_TOKEN> ) ; </a> 
<a> sw . println ( ) ; </a> 
<a> sw . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> public String <RARE_TOKEN> ( String <RARE_TOKEN> , boolean <RARE_TOKEN> ) </a> 
<a> throws <RARE_TOKEN> { </a> 
<a> JExportableClassType requestedType = <RARE_TOKEN> </a> 
<a> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> if ( requestedType == null ) { </a> 
<a> logger . log ( <RARE_TOKEN> . <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> + <RARE_TOKEN> + <RARE_TOKEN> <RARE_TOKEN> not <RARE_TOKEN> <RARE_TOKEN> , null ) ; </a> 
<a> throw new <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> . add ( requestedType ) ; </a> 
<a> <RARE_TOKEN> . add ( requestedType . getQualifiedSourceName ( ) ) ; </a> 
<a> String <RARE_TOKEN> = requestedType . <RARE_TOKEN> ( ) ; </a> 
<a> String <RARE_TOKEN> = requestedType . <RARE_TOKEN> ( ) ; </a> 
<a> String <RARE_TOKEN> = requestedType . <RARE_TOKEN> ( ) ; </a> 
<a> boolean <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> String <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( requestedType . getType ( ) ) </a> 
<a> ? <RARE_TOKEN> : null ; </a> 
<a> if ( <RARE_TOKEN> ) { </a> 
<a> sw = <RARE_TOKEN> ( logger , ctx , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , requestedType . getQualifiedSourceName ( ) ) ; </a> 
<a> } else { </a> 
<a> sw = <RARE_TOKEN> ( logger , ctx , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( sw == null ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> && <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ) { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } else if ( <RARE_TOKEN> ) { </a> 
<a> if ( <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( requestedType ) ; </a> 
<a> } else if ( requestedType . <RARE_TOKEN> ( ) ) { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> , requestedType ) ; </a> 
<a> } </a> 
<a> if ( requestedType . <RARE_TOKEN> ( ) ) { </a> 
<a> <RARE_TOKEN> ( requestedType ) ; </a> 
<a> <RARE_TOKEN> ( requestedType ) ; </a> 
<a> } </a> 
<a> sw . <RARE_TOKEN> ( ) ; </a> 
<a> if ( ! <RARE_TOKEN> ) { </a> 
<a> sw . println ( <RARE_TOKEN> " + <RARE_TOKEN> + <RARE_TOKEN> { <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> sw . println ( <RARE_TOKEN> native void <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> sw . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> ( requestedType ) ; </a> 
<a> <RARE_TOKEN> ( requestedType ) ; </a> 
<a> <RARE_TOKEN> ( requestedType ) ; </a> 
<a> <RARE_TOKEN> ( requestedType ) ; </a> 
<a> <RARE_TOKEN> ( requestedType ) ; </a> 
<a> sw . <RARE_TOKEN> ( ) ; </a> 
<a> sw . println ( <RARE_TOKEN> ) ; </a> 
<a> sw . println ( ) ; </a> 
<a> if ( requestedType . <RARE_TOKEN> ( ) ) { </a> 
<a> <RARE_TOKEN> ( requestedType ) ; </a> 
<a> } </a> 
<a> if ( requestedType . <RARE_TOKEN> ( ) ) { </a> 
<a> <RARE_TOKEN> ( requestedType ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( requestedType , <RARE_TOKEN> ) ; </a> 
<a> sw . <RARE_TOKEN> ( ) ; </a> 
<a> } else { </a> 
<a> sw . <RARE_TOKEN> ( ) ; </a> 
<a> sw . println ( <RARE_TOKEN> void <RARE_TOKEN> {}" ) ; </a> 
<a> sw . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> sw . <RARE_TOKEN> ( logger ) ; </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( </a> 
<a> JExportableClassType requestedType ) throws <RARE_TOKEN> { </a> 
<a> sw . println ( <RARE_TOKEN> static native boolean <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> sw . <RARE_TOKEN> ( ) ; </a> 
<a> sw . print ( <RARE_TOKEN> " ) ; </a> 
<a> for ( <RARE_TOKEN> field : requestedType . <RARE_TOKEN> ( ) ) { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = field . <RARE_TOKEN> ( ) ; </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> logger . log ( <RARE_TOKEN> . <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> type field " + field . <RARE_TOKEN> ( ) + " for class " </a> 
<a> + requestedType . getQualifiedSourceName ( ) </a> 
<a> + " is not <RARE_TOKEN> ) ; </a> 
<a> throw new <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> instanceof JExportableClassType ) { </a> 
<a> JExportableClassType <RARE_TOKEN> = ( JExportableClassType ) field </a> 
<a> . <RARE_TOKEN> ( ) ; </a> 
<a> if ( <RARE_TOKEN> . <RARE_TOKEN> ( ) && <RARE_TOKEN> . <RARE_TOKEN> ( ) ) { </a> 
<a> sw . print ( <RARE_TOKEN> + field . getName ( ) + " && <RARE_TOKEN> </a> 
<a> + ( ( JExportableClassType ) <RARE_TOKEN> ) </a> 
<a> . <RARE_TOKEN> ( ) </a> 
<a> + <RARE_TOKEN> </a> 
<a> + field . getName ( ) + <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } else if ( <RARE_TOKEN> . <RARE_TOKEN> ( ) ) { </a> 
<a> sw . print ( <RARE_TOKEN> + field . getName ( ) + " && <RARE_TOKEN> + field . getName ( ) </a> 
<a> + <RARE_TOKEN> && " ) ; </a> 
<a> } else if ( ! <RARE_TOKEN> . <RARE_TOKEN> ( ) ) { </a> 
<a> sw . print ( </a> 
<a> <RARE_TOKEN> + field . getName ( ) + <RARE_TOKEN> == <RARE_TOKEN> + <RARE_TOKEN> . <RARE_TOKEN> ( ) </a> 
<a> + <RARE_TOKEN> && " ) ; </a> 
<a> } </a> 
<a> } else if ( <RARE_TOKEN> instanceof <RARE_TOKEN> ) { </a> 
<a> sw . print ( </a> 
<a> <RARE_TOKEN> + field . getName ( ) + <RARE_TOKEN> == <RARE_TOKEN> + <RARE_TOKEN> . <RARE_TOKEN> ( ) </a> 
<a> + <RARE_TOKEN> && " ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> sw . println ( <RARE_TOKEN> ) ; </a> 
<a> sw . <RARE_TOKEN> ( ) ; </a> 
<a> sw . println ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( </a> 
<a> JExportableClassType requestedType ) { </a> 
<a> sw . println ( <RARE_TOKEN> void <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> sw . <RARE_TOKEN> ( ) ; </a> 
<a> for ( <RARE_TOKEN> field : requestedType . <RARE_TOKEN> ( ) ) { </a> 
<a> sw . println ( <RARE_TOKEN> + field . <RARE_TOKEN> ( ) + <RARE_TOKEN> + field . <RARE_TOKEN> ( ) </a> 
<a> + <RARE_TOKEN> </a> 
<a> + field . <RARE_TOKEN> ( ) + <RARE_TOKEN> <RARE_TOKEN> + field . getName ( ) </a> 
<a> + <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> sw . <RARE_TOKEN> ( ) ; </a> 
<a> sw . println ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( String <RARE_TOKEN> , </a> 
<a> JExportableClassType requestedType ) { </a> 
<a> sw . println ( <RARE_TOKEN> " + <RARE_TOKEN> . <RARE_TOKEN> + " <RARE_TOKEN> ) ; </a> 
<a> sw . println ( ) ; </a> 
<a> sw . println ( </a> 
<a> <RARE_TOKEN> " + <RARE_TOKEN> + <RARE_TOKEN> + <RARE_TOKEN> . <RARE_TOKEN> + " <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> sw . <RARE_TOKEN> ( ) ; </a> 
<a> sw . println ( <RARE_TOKEN> = <RARE_TOKEN> ) ; </a> 
<a> if ( requestedType . <RARE_TOKEN> ( ) ) { </a> 
<a> sw . println ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> sw . <RARE_TOKEN> ( ) ; </a> 
<a> sw . println ( <RARE_TOKEN> ) ; </a> 
<a> sw . println ( ) ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( JExportableClassType requestedType ) { </a> 
<a> for ( <RARE_TOKEN> field : requestedType . <RARE_TOKEN> ( ) ) { </a> 
<a> <RARE_TOKEN> ( field ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( <RARE_TOKEN> field ) { </a> 
<a> sw . println ( <RARE_TOKEN> " + field . <RARE_TOKEN> ( ) + <RARE_TOKEN> ) ; </a> 
<a> sw . <RARE_TOKEN> ( ) ; </a> 
<a> if ( field . <RARE_TOKEN> ( ) ) { </a> 
<a> sw . println ( <RARE_TOKEN> + field . <RARE_TOKEN> ( ) + <RARE_TOKEN> ) ; </a> 
<a> sw . println ( </a> 
<a> <RARE_TOKEN> </a> 
<a> + <RARE_TOKEN> <RARE_TOKEN> + field . getName ( ) + <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } else { </a> 
<a> sw . println ( field . <RARE_TOKEN> ( ) + " <RARE_TOKEN> = <RARE_TOKEN> + field . <RARE_TOKEN> ( ) </a> 
<a> + <RARE_TOKEN> ) ; </a> 
<a> sw . println ( </a> 
<a> <RARE_TOKEN> </a> 
<a> + <RARE_TOKEN> <RARE_TOKEN> + field . getName ( ) + <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> sw . println ( <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> sw . <RARE_TOKEN> ( ) ; </a> 
<a> sw . println ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( String <RARE_TOKEN> ) { </a> 
<a> sw . println ( <RARE_TOKEN> " + <RARE_TOKEN> + <RARE_TOKEN> { <RARE_TOKEN> } " ) ; </a> 
<a> sw . println ( <RARE_TOKEN> void <RARE_TOKEN> { " ) ; </a> 
<a> for ( JClassType type : <RARE_TOKEN> . <RARE_TOKEN> ( ) ) { </a> 
<a> sw . <RARE_TOKEN> ( ) ; </a> 
<a> sw . println ( <RARE_TOKEN> + type . getQualifiedSourceName ( ) + <RARE_TOKEN> ) ; </a> 
<a> sw . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> sw . println ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( JExportableClassType requestedType ) { </a> 
<a> sw . print ( </a> 
<a> <RARE_TOKEN> </a> 
<a> + </a> 
<a> <RARE_TOKEN> + requestedType . getQualifiedSourceName ( ) + <RARE_TOKEN> <RARE_TOKEN> </a> 
<a> + requestedType . <RARE_TOKEN> ( ) + <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( </a> 
<a> JExportableClassType requestedType ) { </a> 
<a> <RARE_TOKEN> [ ] <RARE_TOKEN> = requestedType </a> 
<a> . <RARE_TOKEN> ( ) ; </a> 
<a> for ( <RARE_TOKEN> <RARE_TOKEN> : <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( JExportableClassType requestedType ) </a> 
<a> throws <RARE_TOKEN> { </a> 
<a> HashMap < String , <RARE_TOKEN> > <RARE_TOKEN> = <RARE_TOKEN> ( </a> 
<a> requestedType , false ) ; </a> 
<a> HashMap < String , <RARE_TOKEN> > <RARE_TOKEN> = <RARE_TOKEN> ( </a> 
<a> requestedType , true ) ; </a> 
<a> HashSet < String > <RARE_TOKEN> = new HashSet < String > ( ) ; </a> 
<a> HashSet < String > <RARE_TOKEN> = new HashSet < String > ( ) ; </a> 
<a> for ( <RARE_TOKEN> method : requestedType . <RARE_TOKEN> ( ) ) { </a> 
<a> if ( method . <RARE_TOKEN> ( ) ? ! <RARE_TOKEN> . contains ( method . getName ( ) ) </a> 
<a> : ! <RARE_TOKEN> . contains ( method . getName ( ) ) ) { </a> 
<a> <RARE_TOKEN> ( method , </a> 
<a> method . <RARE_TOKEN> ( ) ? <RARE_TOKEN> : <RARE_TOKEN> ) ; </a> 
<a> if ( method . <RARE_TOKEN> ( ) ) { </a> 
<a> <RARE_TOKEN> . add ( method . getName ( ) ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> . add ( method . getName ( ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> if ( ! <RARE_TOKEN> </a> 
<a> . <RARE_TOKEN> ( requestedType . getType ( ) . getQualifiedSourceName ( ) ) ) { </a> 
<a> if ( <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ) { </a> 
<a> <RARE_TOKEN> ( requestedType , <RARE_TOKEN> , false ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ) { </a> 
<a> <RARE_TOKEN> ( requestedType , <RARE_TOKEN> , true ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( JExportableClassType requestedType , </a> 
<a> HashMap < String , <RARE_TOKEN> > <RARE_TOKEN> , boolean <RARE_TOKEN> ) { </a> 
<a> sw . print ( <RARE_TOKEN> </a> 
<a> + <RARE_TOKEN> </a> 
<a> + requestedType . getQualifiedSourceName ( ) + <RARE_TOKEN> </a> 
<a> + <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) + ", " + <RARE_TOKEN> + <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> private HashMap < String , <RARE_TOKEN> > <RARE_TOKEN> ( </a> 
<a> JExportableClassType requestedType , boolean <RARE_TOKEN> ) </a> 
<a> throws <RARE_TOKEN> { </a> 
<a> HashMap < String , <RARE_TOKEN> > <RARE_TOKEN> </a> 
<a> = new HashMap < String , <RARE_TOKEN> > ( ) ; </a> 
<a> for ( <RARE_TOKEN> <RARE_TOKEN> : requestedType . <RARE_TOKEN> ( ) ) { </a> 
<a> if ( <RARE_TOKEN> && ! <RARE_TOKEN> . <RARE_TOKEN> ( ) || ! <RARE_TOKEN> && <RARE_TOKEN> </a> 
<a> . <RARE_TOKEN> ( ) ) { </a> 
<a> continue ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = <RARE_TOKEN> . get ( <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> <RARE_TOKEN> = new <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> . put ( <RARE_TOKEN> . <RARE_TOKEN> ( ) , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( ! <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ) { </a> 
<a> logger . log ( <RARE_TOKEN> . <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> method <RARE_TOKEN> " + <RARE_TOKEN> . <RARE_TOKEN> ( ) </a> 
<a> + " <RARE_TOKEN> <RARE_TOKEN> in <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> throw new <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( JExportableClassType requestedType ) </a> 
<a> throws <RARE_TOKEN> { </a> 
<a> sw . println ( <RARE_TOKEN> + requestedType . <RARE_TOKEN> ( ) + <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> sw . println ( </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = <RARE_TOKEN> + requestedType . <RARE_TOKEN> ( ) + <RARE_TOKEN> ) ; </a> 
<a> sw . println ( <RARE_TOKEN> ) ; </a> 
<a> sw . print ( <RARE_TOKEN> + requestedType . <RARE_TOKEN> ( ) </a> 
<a> + " = <RARE_TOKEN> ) ; </a> 
<a> sw . println ( <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> sw . <RARE_TOKEN> ( ) ; </a> 
<a> sw . println ( <RARE_TOKEN> == 1 && <RARE_TOKEN> != null && " </a> 
<a> + <RARE_TOKEN> == " + <RARE_TOKEN> </a> 
<a> + requestedType . getQualifiedSourceName ( ) + <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> sw . <RARE_TOKEN> ( ) ; </a> 
<a> sw . println ( " <RARE_TOKEN> = <RARE_TOKEN> ) ; </a> 
<a> sw . <RARE_TOKEN> ( ) ; </a> 
<a> sw . println ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> [ ] <RARE_TOKEN> = requestedType </a> 
<a> . <RARE_TOKEN> ( ) ; </a> 
<a> HashMap < Integer , <RARE_TOKEN> > <RARE_TOKEN> </a> 
<a> = new HashMap < Integer , <RARE_TOKEN> > ( ) ; </a> 
<a> for ( <RARE_TOKEN> <RARE_TOKEN> : <RARE_TOKEN> ) { </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( ) . length ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = <RARE_TOKEN> . get ( <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> logger . log ( <RARE_TOKEN> . <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> " + <RARE_TOKEN> + " <RARE_TOKEN> " + <RARE_TOKEN> + " " </a> 
<a> + <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> " + <RARE_TOKEN> + <RARE_TOKEN> </a> 
<a> + <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> not <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> of " </a> 
<a> + <RARE_TOKEN> , null ) ; </a> 
<a> throw new <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> . put ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> sw . println ( <RARE_TOKEN> <RARE_TOKEN> == " + <RARE_TOKEN> + <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> sw . <RARE_TOKEN> ( ) ; </a> 
<a> sw . print ( <RARE_TOKEN> = <RARE_TOKEN> </a> 
<a> + <RARE_TOKEN> . <RARE_TOKEN> ( ) + <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> , true ) ; </a> 
<a> sw . println ( <RARE_TOKEN> ) ; </a> 
<a> sw . println ( </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> sw . <RARE_TOKEN> ( ) ; </a> 
<a> sw . println ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> sw . <RARE_TOKEN> ( ) ; </a> 
<a> sw . println ( <RARE_TOKEN> ) ; </a> 
<a> JExportableClassType <RARE_TOKEN> = requestedType </a> 
<a> . <RARE_TOKEN> ( ) ; </a> 
<a> if ( <RARE_TOKEN> != null && <RARE_TOKEN> . <RARE_TOKEN> ( ) && ! <RARE_TOKEN> </a> 
<a> . contains ( <RARE_TOKEN> ) ) { </a> 
<a> if ( <RARE_TOKEN> ( <RARE_TOKEN> . getQualifiedSourceName ( ) ) ) { </a> 
<a> ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> . add ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> sw . print ( <RARE_TOKEN> <RARE_TOKEN> + requestedType . <RARE_TOKEN> ( ) </a> 
<a> + <RARE_TOKEN> = " ) ; </a> 
<a> sw . println ( <RARE_TOKEN> == null ? <RARE_TOKEN> <RARE_TOKEN> </a> 
<a> : <RARE_TOKEN> <RARE_TOKEN> + <RARE_TOKEN> . <RARE_TOKEN> ( ) + <RARE_TOKEN> ) ; </a> 
<a> sw . println ( <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> sw . println ( </a> 
<a> <RARE_TOKEN> in <RARE_TOKEN> { <RARE_TOKEN> + requestedType . <RARE_TOKEN> ( ) </a> 
<a> + <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> sw . println ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> JExportableClassType <RARE_TOKEN> = ( JExportableClassType ) <RARE_TOKEN> </a> 
<a> . <RARE_TOKEN> ( ) ; </a> 
<a> String <RARE_TOKEN> = <RARE_TOKEN> . getQualifiedSourceName ( ) ; </a> 
<a> sw . print ( <RARE_TOKEN> static " + <RARE_TOKEN> + " " </a> 
<a> + <RARE_TOKEN> . <RARE_TOKEN> ( ) + <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> , - 1 ) ; </a> 
<a> sw . println ( <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> sw . <RARE_TOKEN> ( ) ; </a> 
<a> sw . print ( <RARE_TOKEN> new " + <RARE_TOKEN> + <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> , false ) ; </a> 
<a> sw . println ( <RARE_TOKEN> ) ; </a> 
<a> sw . <RARE_TOKEN> ( ) ; </a> 
<a> sw . println ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( <RARE_TOKEN> method ) { </a> 
<a> <RARE_TOKEN> params [ ] = method . <RARE_TOKEN> ( ) ; </a> 
<a> for ( int i = 0 ; i < params . length ; i ++ ) { </a> 
<a> sw . print ( </a> 
<a> <RARE_TOKEN> + params [ i ] . <RARE_TOKEN> ( <RARE_TOKEN> + i ) </a> 
<a> + <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( <RARE_TOKEN> method , </a> 
<a> boolean <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> params [ ] = method . <RARE_TOKEN> ( ) ; </a> 
<a> for ( int i = 0 ; i < params . length ; i ++ ) { </a> 
<a> sw . print ( params [ i ] . <RARE_TOKEN> ( </a> 
<a> <RARE_TOKEN> ? <RARE_TOKEN> + i + <RARE_TOKEN> : <RARE_TOKEN> + i ) ) ; </a> 
<a> if ( i < params . length - 1 ) { </a> 
<a> sw . print ( ", " ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( <RARE_TOKEN> method , boolean wrap ) { </a> 
<a> <RARE_TOKEN> params [ ] = method . <RARE_TOKEN> ( ) ; </a> 
<a> for ( int i = 0 ; i < params . length ; i ++ ) { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = params [ i ] . <RARE_TOKEN> ( ) ; </a> 
<a> boolean <RARE_TOKEN> = <RARE_TOKEN> != null && <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> boolean <RARE_TOKEN> = <RARE_TOKEN> instanceof <RARE_TOKEN> ; </a> 
<a> String <RARE_TOKEN> = <RARE_TOKEN> && <RARE_TOKEN> ? ( <RARE_TOKEN> </a> 
<a> + ( ( <RARE_TOKEN> ) <RARE_TOKEN> ) . <RARE_TOKEN> ( ) ) : "" ; </a> 
<a> if ( wrap && <RARE_TOKEN> ) { </a> 
<a> sw . print ( <RARE_TOKEN> </a> 
<a> + ( <RARE_TOKEN> ? <RARE_TOKEN> </a> 
<a> : <RARE_TOKEN> ) + <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> sw . print ( <RARE_TOKEN> + i ) ; </a> 
<a> if ( wrap && <RARE_TOKEN> ) { </a> 
<a> sw . print ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( i < params . length - 1 ) { </a> 
<a> sw . print ( ", " ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( <RARE_TOKEN> method , int <RARE_TOKEN> , </a> 
<a> boolean <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> params [ ] = method . <RARE_TOKEN> ( ) ; </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> || <RARE_TOKEN> < 0 ? params . length : <RARE_TOKEN> ; </a> 
<a> for ( int i = 0 ; i < <RARE_TOKEN> ; </a> 
<a> i ++ ) { </a> 
<a> sw . print ( </a> 
<a> ( <RARE_TOKEN> ? params [ i ] . <RARE_TOKEN> ( ) : "" ) + " " + <RARE_TOKEN> + i ) ; </a> 
<a> if ( i < <RARE_TOKEN> - 1 ) { </a> 
<a> sw . print ( ", " ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( <RARE_TOKEN> method , int <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( method , <RARE_TOKEN> , true ) ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( <RARE_TOKEN> method , int <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( method , <RARE_TOKEN> , false ) ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( JExportableClassType requestedType ) </a> 
<a> throws <RARE_TOKEN> { </a> 
<a> for ( <RARE_TOKEN> field : requestedType . <RARE_TOKEN> ( ) ) { </a> 
<a> sw . print ( <RARE_TOKEN> + field . <RARE_TOKEN> ( ) + " = " ) ; </a> 
<a> sw . println ( <RARE_TOKEN> + field . <RARE_TOKEN> ( ) + <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( <RARE_TOKEN> method , </a> 
<a> HashMap < String , <RARE_TOKEN> > <RARE_TOKEN> ) </a> 
<a> throws <RARE_TOKEN> { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = method . <RARE_TOKEN> ( ) ; </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> logger . log ( <RARE_TOKEN> . <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> type of method " + method . toString ( ) + " is not <RARE_TOKEN> , </a> 
<a> null ) ; </a> 
<a> throw new <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> int <RARE_TOKEN> = method . <RARE_TOKEN> ( ) . length ; </a> 
<a> String name = method . <RARE_TOKEN> ( ) ; </a> 
<a> String key = name + <RARE_TOKEN> + <RARE_TOKEN> ; </a> 
<a> if ( <RARE_TOKEN> != null && <RARE_TOKEN> . <RARE_TOKEN> ( ) && ! <RARE_TOKEN> </a> 
<a> . contains ( <RARE_TOKEN> ) ) { </a> 
<a> if ( <RARE_TOKEN> ( <RARE_TOKEN> . getQualifiedSourceName ( ) ) ) { </a> 
<a> ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> . add ( ( JExportableClassType ) <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( method ) ; </a> 
<a> String <RARE_TOKEN> = <RARE_TOKEN> != null ? <RARE_TOKEN> . <RARE_TOKEN> ( ) </a> 
<a> : null ; </a> 
<a> if ( method . <RARE_TOKEN> ( ) ) { </a> 
<a> sw . print ( <RARE_TOKEN> + method . <RARE_TOKEN> ( ) + " = " ) ; </a> 
<a> } else { </a> 
<a> sw . print ( <RARE_TOKEN> + method . <RARE_TOKEN> ( ) + <RARE_TOKEN> " ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> sw . print ( </a> 
<a> <RARE_TOKEN> </a> 
<a> + <RARE_TOKEN> + <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> sw . print ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = <RARE_TOKEN> . get ( method . <RARE_TOKEN> ( ) ) ; </a> 
<a> <RARE_TOKEN> ( method , <RARE_TOKEN> . <RARE_TOKEN> ( ) ? <RARE_TOKEN> . <RARE_TOKEN> ( ) : - 1 ) ; </a> 
<a> sw . print ( <RARE_TOKEN> { " ) ; </a> 
<a> boolean <RARE_TOKEN> = <RARE_TOKEN> . getQualifiedSourceName ( ) . equals ( <RARE_TOKEN> ) ; </a> 
<a> if ( ! <RARE_TOKEN> . <RARE_TOKEN> ( ) ) { </a> 
<a> sw . print ( ( <RARE_TOKEN> ? "" : <RARE_TOKEN> <RARE_TOKEN> ) </a> 
<a> + ( method . <RARE_TOKEN> ( ) ? <RARE_TOKEN> : <RARE_TOKEN> ) </a> 
<a> + method . <RARE_TOKEN> ( ) + <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( method , false ) ; </a> 
<a> sw . print ( <RARE_TOKEN> ) ; </a> 
<a> } else { </a> 
<a> sw . print ( ( <RARE_TOKEN> ? "" </a> 
<a> : <RARE_TOKEN> <RARE_TOKEN> </a> 
<a> + <RARE_TOKEN> </a> 
<a> + <RARE_TOKEN> + <RARE_TOKEN> + method </a> 
<a> . <RARE_TOKEN> ( ) . getQualifiedSourceName ( ) ) + <RARE_TOKEN> </a> 
<a> + method . <RARE_TOKEN> ( ) + <RARE_TOKEN> <RARE_TOKEN> </a> 
<a> + method . <RARE_TOKEN> ( ) + <RARE_TOKEN> </a> 
<a> + ( method . <RARE_TOKEN> ( ) ? <RARE_TOKEN> : <RARE_TOKEN> ) </a> 
<a> + ", <RARE_TOKEN> ) ; </a> 
<a> sw . print ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> . <RARE_TOKEN> ( ) || ! <RARE_TOKEN> . <RARE_TOKEN> ( ) ) { </a> 
<a> sw . print ( <RARE_TOKEN> ? "" : <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } else { </a> 
<a> boolean <RARE_TOKEN> = <RARE_TOKEN> instanceof <RARE_TOKEN> ; </a> 
<a> String <RARE_TOKEN> = <RARE_TOKEN> ? ( ( <RARE_TOKEN> ) <RARE_TOKEN> ) </a> 
<a> . <RARE_TOKEN> ( ) : "" ; </a> 
<a> sw . print ( ( <RARE_TOKEN> ? "" : <RARE_TOKEN> " ) </a> 
<a> + <RARE_TOKEN> </a> 
<a> + ( <RARE_TOKEN> ? <RARE_TOKEN> </a> 
<a> : <RARE_TOKEN> ) + <RARE_TOKEN> </a> 
<a> ) ; </a> 
<a> } </a> 
<a> if ( ! <RARE_TOKEN> ) { </a> 
<a> sw . println ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> sw . print ( <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> sw . print ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> sw . println ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( <RARE_TOKEN> method ) </a> 
<a> throws <RARE_TOKEN> { </a> 
<a> for ( <RARE_TOKEN> <RARE_TOKEN> : method . <RARE_TOKEN> ( ) ) { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> if ( <RARE_TOKEN> != null && <RARE_TOKEN> . <RARE_TOKEN> ( ) && ! <RARE_TOKEN> . contains ( <RARE_TOKEN> ) ) { </a> 
<a> if ( <RARE_TOKEN> ( <RARE_TOKEN> . getQualifiedSourceName ( ) ) ) { </a> 
<a> <RARE_TOKEN> . add ( ( JExportableClassType ) <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> private boolean <RARE_TOKEN> ( String <RARE_TOKEN> ) </a> 
<a> throws <RARE_TOKEN> { </a> 
<a> if ( <RARE_TOKEN> . contains ( <RARE_TOKEN> ) ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> instanceof <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = ( ( <RARE_TOKEN> ) <RARE_TOKEN> ) </a> 
<a> . <RARE_TOKEN> ( ) ; </a> 
<a> if ( <RARE_TOKEN> instanceof <RARE_TOKEN> ) { </a> 
<a> return false ; </a> 
<a> } else { </a> 
<a> return <RARE_TOKEN> ( <RARE_TOKEN> . getQualifiedSourceName ( ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> <RARE_TOKEN> . add ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> exporter = new <RARE_TOKEN> ( logger , ctx , <RARE_TOKEN> ) ; </a> 
<a> exporter . <RARE_TOKEN> ( <RARE_TOKEN> , true ) ; </a> 
<a> return true ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( JExportableClassType <RARE_TOKEN> ) { </a> 
<a> String <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> String <RARE_TOKEN> [ ] = <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> String <RARE_TOKEN> = "" ; </a> 
<a> for ( String <RARE_TOKEN> : <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> += <RARE_TOKEN> + <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . length ( ) > 0 ? <RARE_TOKEN> </a> 
<a> . substring ( 0 , <RARE_TOKEN> . length ( ) - 1 ) : <RARE_TOKEN> ; </a> 
<a> sw . println ( </a> 
<a> <RARE_TOKEN> </a> 
<a> + <RARE_TOKEN> + <RARE_TOKEN> + <RARE_TOKEN> + <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( JExportableClassType requestedType , </a> 
<a> ArrayList < JExportableClassType > <RARE_TOKEN> ) { </a> 
<a> sw . println ( <RARE_TOKEN> static boolean <RARE_TOKEN> ) ; </a> 
<a> sw . println ( <RARE_TOKEN> void <RARE_TOKEN> { " ) ; </a> 
<a> sw . <RARE_TOKEN> ( ) ; </a> 
<a> sw . println ( <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> sw . <RARE_TOKEN> ( ) ; </a> 
<a> sw . println ( <RARE_TOKEN> ) ; </a> 
<a> int <RARE_TOKEN> = 0 ; </a> 
<a> for ( JExportableClassType <RARE_TOKEN> : <RARE_TOKEN> ) { </a> 
<a> if ( requestedType . getQualifiedSourceName ( ) </a> 
<a> . equals ( <RARE_TOKEN> . getQualifiedSourceName ( ) ) </a> 
<a> || <RARE_TOKEN> instanceof <RARE_TOKEN> ) { </a> 
<a> continue ; </a> 
<a> } </a> 
<a> String <RARE_TOKEN> = <RARE_TOKEN> . getQualifiedSourceName ( ) ; </a> 
<a> String <RARE_TOKEN> = <RARE_TOKEN> + <RARE_TOKEN> ++ ; </a> 
<a> sw . println ( <RARE_TOKEN> . <RARE_TOKEN> + " " + <RARE_TOKEN> + " = <RARE_TOKEN> </a> 
<a> + <RARE_TOKEN> . <RARE_TOKEN> + <RARE_TOKEN> <RARE_TOKEN> + <RARE_TOKEN> </a> 
<a> + <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> sw . println ( <RARE_TOKEN> ) ; </a> 
<a> sw . <RARE_TOKEN> ( ) ; </a> 
<a> sw . println ( <RARE_TOKEN> ) ; </a> 
<a> sw . <RARE_TOKEN> ( ) ; </a> 
<a> sw . println ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> protected <RARE_TOKEN> <RARE_TOKEN> ( <RARE_TOKEN> logger , </a> 
<a> <RARE_TOKEN> context , String <RARE_TOKEN> , String <RARE_TOKEN> , </a> 
<a> String <RARE_TOKEN> , String ... <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = context . <RARE_TOKEN> ( logger , <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> </a> 
<a> = new <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> for ( String <RARE_TOKEN> : <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> return <RARE_TOKEN> . <RARE_TOKEN> ( context , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> package org . timepedia . exporter . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . core . ext . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . core . ext . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . core . ext . <RARE_TOKEN> . JClassType ; </a> 
<a> import com . google . gwt . core . ext . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . core . ext . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . core . ext . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . core . ext . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . core . ext . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import org . timepedia . exporter . client . <RARE_TOKEN> ; </a> 
<a> import org . timepedia . exporter . client . <RARE_TOKEN> ; </a> 
<a> import org . timepedia . exporter . client . <RARE_TOKEN> ; </a> 
<a> import org . timepedia . exporter . client . <RARE_TOKEN> ; </a> 
<a> import java . util . ArrayList ; </a> 
<a> import java . util . HashMap ; </a> 
<a> import java . util . List ; </a> 
<a> import java . util . Map ; </a> 
<a> public class <RARE_TOKEN> { </a> 
<a> public static final String <RARE_TOKEN> </a> 
<a> = <RARE_TOKEN> ; </a> 
<a> static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> static final String <RARE_TOKEN> </a> 
<a> = <RARE_TOKEN> ; </a> 
<a> static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> static final String <RARE_TOKEN> </a> 
<a> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private JClassType <RARE_TOKEN> ; </a> 
<a> public boolean <RARE_TOKEN> ( <RARE_TOKEN> field ) { </a> 
<a> return field . <RARE_TOKEN> ( ) && field . <RARE_TOKEN> ( ) && field . <RARE_TOKEN> ( ) && ( </a> 
<a> <RARE_TOKEN> ( field . <RARE_TOKEN> ( <RARE_TOKEN> . class ) ) || ( </a> 
<a> <RARE_TOKEN> ( field . <RARE_TOKEN> ( ) ) && ! <RARE_TOKEN> ( </a> 
<a> field . <RARE_TOKEN> ( <RARE_TOKEN> . class ) ) ) ) ; </a> 
<a> } </a> 
<a> public boolean <RARE_TOKEN> ( JClassType type ) { </a> 
<a> return <RARE_TOKEN> ( type . <RARE_TOKEN> ( <RARE_TOKEN> . class ) ) || ( </a> 
<a> type . <RARE_TOKEN> ( ) != null && <RARE_TOKEN> ( </a> 
<a> type . <RARE_TOKEN> ( <RARE_TOKEN> . class ) ) ) ; </a> 
<a> } </a> 
<a> public static boolean <RARE_TOKEN> ( <RARE_TOKEN> annotation ) { </a> 
<a> return annotation != null ; </a> 
<a> } </a> 
<a> public boolean <RARE_TOKEN> ( <RARE_TOKEN> method ) { </a> 
<a> if ( method instanceof <RARE_TOKEN> ) { </a> 
<a> if ( method . <RARE_TOKEN> ( ) . length == 0 && method . <RARE_TOKEN> ( ) ) { </a> 
<a> return true ; </a> 
<a> } </a> 
<a> } </a> 
<a> return ( <RARE_TOKEN> ( method . <RARE_TOKEN> ( ) ) && method . <RARE_TOKEN> ( ) </a> 
<a> && ! <RARE_TOKEN> ( method . <RARE_TOKEN> ( <RARE_TOKEN> . class ) ) ) </a> 
<a> || ( <RARE_TOKEN> ( method . <RARE_TOKEN> ( <RARE_TOKEN> . class ) ) ) ; </a> 
<a> } </a> 
<a> private static boolean <RARE_TOKEN> ( <RARE_TOKEN> annotation ) { </a> 
<a> return annotation != null ; </a> 
<a> } </a> 
<a> private static boolean <RARE_TOKEN> ( <RARE_TOKEN> annotation ) { </a> 
<a> return annotation != null ; </a> 
<a> } </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> private <RARE_TOKEN> log ; </a> 
<a> private JClassType <RARE_TOKEN> = null ; </a> 
<a> private JClassType <RARE_TOKEN> = null ; </a> 
<a> private JClassType <RARE_TOKEN> = null ; </a> 
<a> private JClassType <RARE_TOKEN> ; </a> 
<a> private Map < String , <RARE_TOKEN> > <RARE_TOKEN> </a> 
<a> = new HashMap < String , <RARE_TOKEN> > ( ) ; </a> 
<a> public <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> , <RARE_TOKEN> log ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> this . log = log ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> assert <RARE_TOKEN> != null ; </a> 
<a> assert <RARE_TOKEN> != null ; </a> 
<a> assert <RARE_TOKEN> != null ; </a> 
<a> assert <RARE_TOKEN> != null ; </a> 
<a> for ( JClassType t : <RARE_TOKEN> . <RARE_TOKEN> ( ) ) { </a> 
<a> if ( t . <RARE_TOKEN> ( <RARE_TOKEN> ) && ! t . equals ( <RARE_TOKEN> ) ) { </a> 
<a> JClassType <RARE_TOKEN> = <RARE_TOKEN> ( t ) ; </a> 
<a> <RARE_TOKEN> . put ( <RARE_TOKEN> . getQualifiedSourceName ( ) , </a> 
<a> new <RARE_TOKEN> ( this , t ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> public JExportableClassType <RARE_TOKEN> ( String <RARE_TOKEN> ) { </a> 
<a> JClassType requestedType = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> if ( requestedType != null ) { </a> 
<a> if ( requestedType . <RARE_TOKEN> ( <RARE_TOKEN> ) ) { </a> 
<a> return new <RARE_TOKEN> ( this , requestedType ) ; </a> 
<a> } else if ( requestedType . <RARE_TOKEN> ( <RARE_TOKEN> ) ) { </a> 
<a> return new JExportableClassType ( this , requestedType ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = <RARE_TOKEN> . get ( <RARE_TOKEN> ) ; </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> return null ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> <RARE_TOKEN> ( String <RARE_TOKEN> ) { </a> 
<a> try { </a> 
<a> <RARE_TOKEN> type = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> JClassType <RARE_TOKEN> = type != null ? type . <RARE_TOKEN> ( ) : null ; </a> 
<a> if ( type . <RARE_TOKEN> ( ) != null ) { </a> 
<a> return new <RARE_TOKEN> ( this , type . <RARE_TOKEN> ( ) ) ; </a> 
<a> } else if ( type . <RARE_TOKEN> ( ) != null ) { </a> 
<a> return new <RARE_TOKEN> ( this , type . <RARE_TOKEN> ( ) ) ; </a> 
<a> } else if ( <RARE_TOKEN> . containsKey ( <RARE_TOKEN> ) ) { </a> 
<a> return <RARE_TOKEN> . get ( <RARE_TOKEN> ) ; </a> 
<a> } else if ( <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ) { </a> 
<a> return new <RARE_TOKEN> ( this , type . <RARE_TOKEN> ( ) ) ; </a> 
<a> } else if ( <RARE_TOKEN> != null && ( <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) </a> 
<a> || <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) || <RARE_TOKEN> </a> 
<a> . <RARE_TOKEN> ( <RARE_TOKEN> ) ) ) { </a> 
<a> return new JExportableClassType ( this , type . <RARE_TOKEN> ( ) ) ; </a> 
<a> } else { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> } catch ( <RARE_TOKEN> e ) { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> } </a> 
<a> public JExportableClassType <RARE_TOKEN> ( </a> 
<a> JClassType type ) { </a> 
<a> if ( type == null ) { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> JExportableClassType <RARE_TOKEN> = <RARE_TOKEN> ( </a> 
<a> type . getQualifiedSourceName ( ) ) ; </a> 
<a> return <RARE_TOKEN> != null && <RARE_TOKEN> . <RARE_TOKEN> ( ) ? <RARE_TOKEN> </a> 
<a> : <RARE_TOKEN> ( type . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> public JClassType <RARE_TOKEN> ( JClassType requestedType ) { </a> 
<a> JClassType [ ] <RARE_TOKEN> = requestedType . <RARE_TOKEN> ( ) ; </a> 
<a> for ( JClassType i : <RARE_TOKEN> ) { </a> 
<a> if ( <RARE_TOKEN> ( i ) ) { </a> 
<a> return i . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( ) [ 0 ] ; </a> 
<a> } </a> 
<a> } </a> 
<a> return null ; </a> 
<a> } </a> 
<a> public boolean <RARE_TOKEN> ( JExportableClassType <RARE_TOKEN> ) { </a> 
<a> return <RARE_TOKEN> . getType ( ) . <RARE_TOKEN> ( ) != null ; </a> 
<a> } </a> 
<a> public boolean <RARE_TOKEN> ( String <RARE_TOKEN> ) { </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> type = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> if ( type == null ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> JClassType <RARE_TOKEN> = type . <RARE_TOKEN> ( ) ; </a> 
<a> if ( <RARE_TOKEN> != null && <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ) { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> . class ) ; </a> 
<a> if ( <RARE_TOKEN> != null && <RARE_TOKEN> . <RARE_TOKEN> ( ) != null ) { </a> 
<a> return <RARE_TOKEN> . <RARE_TOKEN> ( ) . length == 1 ; </a> 
<a> } </a> 
<a> } </a> 
<a> return false ; </a> 
<a> } </a> 
<a> public boolean <RARE_TOKEN> ( JClassType i ) { </a> 
<a> return i . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public boolean <RARE_TOKEN> ( JExportableClassType type ) { </a> 
<a> return type . getType ( ) . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public boolean <RARE_TOKEN> ( JExportableClassType type ) { </a> 
<a> return type . getType ( ) . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public boolean <RARE_TOKEN> ( <RARE_TOKEN> type ) { </a> 
<a> return type . <RARE_TOKEN> ( ) != null && type . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public boolean <RARE_TOKEN> ( <RARE_TOKEN> type ) { </a> 
<a> return type . <RARE_TOKEN> ( ) != null && type . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public boolean <RARE_TOKEN> ( String <RARE_TOKEN> ) { </a> 
<a> return <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public List < JClassType > <RARE_TOKEN> ( ) { </a> 
<a> ArrayList < JClassType > <RARE_TOKEN> = new ArrayList < JClassType > ( ) ; </a> 
<a> for ( JClassType t : <RARE_TOKEN> . <RARE_TOKEN> ( ) ) { </a> 
<a> if ( t . equals ( <RARE_TOKEN> ) || t . equals ( <RARE_TOKEN> ) || t </a> 
<a> . equals ( <RARE_TOKEN> ) ) { </a> 
<a> continue ; </a> 
<a> } </a> 
<a> if ( t . <RARE_TOKEN> ( <RARE_TOKEN> ) || t </a> 
<a> . <RARE_TOKEN> ( <RARE_TOKEN> ) ) { </a> 
<a> if ( t . <RARE_TOKEN> ( ) && t . <RARE_TOKEN> ( ) ) { </a> 
<a> <RARE_TOKEN> . add ( t ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public boolean <RARE_TOKEN> ( JClassType type ) { </a> 
<a> return false && type . <RARE_TOKEN> ( <RARE_TOKEN> . class ) != null ; </a> 
<a> } </a> 
<a> public String <RARE_TOKEN> ( JClassType type ) { </a> 
<a> if ( type . <RARE_TOKEN> ( <RARE_TOKEN> ) ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } else if ( type . <RARE_TOKEN> ( <RARE_TOKEN> ) ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> return <RARE_TOKEN> + type . getQualifiedSourceName ( ) + <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> package org . timepedia . exporter . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . core . ext . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . core . ext . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . core . ext . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . core . ext . <RARE_TOKEN> ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> public String <RARE_TOKEN> ( <RARE_TOKEN> logger , <RARE_TOKEN> ctx , </a> 
<a> String <RARE_TOKEN> ) throws <RARE_TOKEN> { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( logger , ctx ) ; </a> 
<a> String <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> , true ) ; </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> package org . timepedia . exporter . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . core . ext . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . core . ext . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . core . ext . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . core . ext . <RARE_TOKEN> ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> public String <RARE_TOKEN> ( <RARE_TOKEN> logger , <RARE_TOKEN> ctx , </a> 
<a> String <RARE_TOKEN> ) throws <RARE_TOKEN> { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( logger , ctx ) ; </a> 
<a> String <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> , false ) ; </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> package org . timepedia . exporter . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . core . ext . <RARE_TOKEN> . JClassType ; </a> 
<a> public class <RARE_TOKEN> extends JExportableClassType { </a> 
<a> private JClassType <RARE_TOKEN> ; </a> 
<a> public <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> , </a> 
<a> JClassType requestedType ) { </a> 
<a> super ( <RARE_TOKEN> , requestedType ) ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( requestedType ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public JClassType getType ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> package org . timepedia . exporter . <RARE_TOKEN> ; </a> 
<a> public interface <RARE_TOKEN> { </a> 
<a> public String <RARE_TOKEN> ( ) ; </a> 
<a> public String <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> package org . timepedia . exporter . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . core . ext . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . core . ext . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import org . timepedia . exporter . client . <RARE_TOKEN> ; </a> 
<a> public class <RARE_TOKEN> extends JExportableClassType </a> 
<a> implements <RARE_TOKEN> { </a> 
<a> public <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> array ) { </a> 
<a> super ( <RARE_TOKEN> , array ) ; </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> this . array = array ; </a> 
<a> } </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> private <RARE_TOKEN> array ; </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return true ; </a> 
<a> } </a> 
<a> public String getQualifiedSourceName ( ) { </a> 
<a> return array . getQualifiedSourceName ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public String <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> type = array . <RARE_TOKEN> ( ) ; </a> 
<a> return <RARE_TOKEN> + <RARE_TOKEN> . class . getName ( ) + <RARE_TOKEN> </a> 
<a> + type . <RARE_TOKEN> ( ) + <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> </a> 
<a> . <RARE_TOKEN> ( array . <RARE_TOKEN> ( ) . getQualifiedSourceName ( ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> package org . timepedia . exporter . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . core . ext . <RARE_TOKEN> . JClassType ; </a> 
<a> import com . google . gwt . core . ext . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . core . ext . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . core . ext . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import org . timepedia . exporter . client . <RARE_TOKEN> ; </a> 
<a> import org . timepedia . exporter . client . <RARE_TOKEN> ; </a> 
<a> import org . timepedia . exporter . client . <RARE_TOKEN> ; </a> 
<a> import java . util . ArrayList ; </a> 
<a> public class JExportableClassType implements <RARE_TOKEN> , <RARE_TOKEN> { </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> private JClassType type ; </a> 
<a> public JExportableClassType ( <RARE_TOKEN> <RARE_TOKEN> , </a> 
<a> JClassType type ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> this . type = type ; </a> 
<a> } </a> 
<a> public boolean equals ( Object o ) { </a> 
<a> if ( this == o ) { </a> 
<a> return true ; </a> 
<a> } </a> 
<a> if ( o == null || getClass ( ) != o . getClass ( ) ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> JExportableClassType that = ( JExportableClassType ) o ; </a> 
<a> return getQualifiedSourceName ( ) . equals ( that . getQualifiedSourceName ( ) ) ; </a> 
<a> } </a> 
<a> public String [ ] <RARE_TOKEN> ( ) { </a> 
<a> String [ ] <RARE_TOKEN> = type . getName ( ) . split ( <RARE_TOKEN> ) ; </a> 
<a> String [ ] <RARE_TOKEN> = new String [ <RARE_TOKEN> . length - 1 ] ; </a> 
<a> if ( <RARE_TOKEN> . length > 1 ) { </a> 
<a> System . <RARE_TOKEN> ( <RARE_TOKEN> , 0 , <RARE_TOKEN> , 0 , <RARE_TOKEN> . length ) ; </a> 
<a> } </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> [ ] <RARE_TOKEN> ( ) { </a> 
<a> ArrayList < <RARE_TOKEN> > <RARE_TOKEN> </a> 
<a> = new ArrayList < <RARE_TOKEN> > ( ) ; </a> 
<a> if ( <RARE_TOKEN> ( ) ) { </a> 
<a> JClassType <RARE_TOKEN> = type ; </a> 
<a> if ( <RARE_TOKEN> . <RARE_TOKEN> ( type ) ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( type ) ; </a> 
<a> } </a> 
<a> for ( <RARE_TOKEN> method : <RARE_TOKEN> . <RARE_TOKEN> ( ) ) { </a> 
<a> if ( method . <RARE_TOKEN> ( ) == null ) { </a> 
<a> continue ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> . <RARE_TOKEN> ( method ) ) { </a> 
<a> <RARE_TOKEN> . add ( new <RARE_TOKEN> ( this , method ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> return <RARE_TOKEN> . <RARE_TOKEN> ( new <RARE_TOKEN> [ 0 ] ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> [ ] <RARE_TOKEN> ( ) { </a> 
<a> ArrayList < <RARE_TOKEN> > <RARE_TOKEN> </a> 
<a> = new ArrayList < <RARE_TOKEN> > ( ) ; </a> 
<a> for ( <RARE_TOKEN> field : type . <RARE_TOKEN> ( ) ) { </a> 
<a> if ( <RARE_TOKEN> . <RARE_TOKEN> ( field ) ) { </a> 
<a> <RARE_TOKEN> . add ( new <RARE_TOKEN> ( this , field ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> return <RARE_TOKEN> . <RARE_TOKEN> ( new <RARE_TOKEN> [ 0 ] ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> [ ] <RARE_TOKEN> ( ) { </a> 
<a> ArrayList < <RARE_TOKEN> > <RARE_TOKEN> </a> 
<a> = new ArrayList < <RARE_TOKEN> > ( ) ; </a> 
<a> for ( <RARE_TOKEN> method : type . <RARE_TOKEN> ( ) ) { </a> 
<a> if ( method . <RARE_TOKEN> ( ) != null ) { </a> 
<a> continue ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> . <RARE_TOKEN> ( method ) ) { </a> 
<a> <RARE_TOKEN> . add ( new <RARE_TOKEN> ( this , method ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> return <RARE_TOKEN> . <RARE_TOKEN> ( new <RARE_TOKEN> [ 0 ] ) ; </a> 
<a> } </a> 
<a> public JExportableClassType <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> </a> 
<a> . <RARE_TOKEN> ( type . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public String <RARE_TOKEN> ( ) { </a> 
<a> return type . <RARE_TOKEN> ( ) + <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public String <RARE_TOKEN> ( ) { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> public String <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> . <RARE_TOKEN> ( getType ( ) ) ; </a> 
<a> } </a> 
<a> public String <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ( ) + <RARE_TOKEN> + type . getName ( ) ; </a> 
<a> } </a> 
<a> public String <RARE_TOKEN> ( ) { </a> 
<a> String <RARE_TOKEN> = <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = type . <RARE_TOKEN> ( <RARE_TOKEN> . class ) ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . value ( ) ; </a> 
<a> } else if ( type . <RARE_TOKEN> ( ) != null ) { </a> 
<a> JExportableClassType <RARE_TOKEN> = <RARE_TOKEN> </a> 
<a> . <RARE_TOKEN> ( </a> 
<a> type . <RARE_TOKEN> ( ) . getQualifiedSourceName ( ) ) ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> return <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public String <RARE_TOKEN> ( ) { </a> 
<a> return type . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> public String <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> public String <RARE_TOKEN> ( ) { </a> 
<a> return type . <RARE_TOKEN> ( ) . getName ( ) ; </a> 
<a> } </a> 
<a> public String <RARE_TOKEN> ( ) { </a> 
<a> String <RARE_TOKEN> = "" ; </a> 
<a> boolean <RARE_TOKEN> = true ; </a> 
<a> for ( String <RARE_TOKEN> : type . <RARE_TOKEN> ( ) . getName ( ) . split ( <RARE_TOKEN> ) ) { </a> 
<a> if ( <RARE_TOKEN> && <RARE_TOKEN> . equals ( <RARE_TOKEN> ) ) { </a> 
<a> <RARE_TOKEN> = false ; </a> 
<a> continue ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> += <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> += <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> return <RARE_TOKEN> . substring ( 0 , <RARE_TOKEN> . length ( ) - 1 ) ; </a> 
<a> } </a> 
<a> public String <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ( ) + <RARE_TOKEN> + <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> public String getQualifiedSourceName ( ) { </a> 
<a> return getType ( ) . getQualifiedSourceName ( ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> [ ] <RARE_TOKEN> ( ) { </a> 
<a> if ( ! <RARE_TOKEN> ( ) ) { </a> 
<a> return new <RARE_TOKEN> [ 0 ] ; </a> 
<a> } else { </a> 
<a> ArrayList < <RARE_TOKEN> > fields </a> 
<a> = new ArrayList < <RARE_TOKEN> > ( ) ; </a> 
<a> for ( <RARE_TOKEN> method : type . <RARE_TOKEN> ( ) ) { </a> 
<a> if ( method . getName ( ) . startsWith ( <RARE_TOKEN> ) </a> 
<a> && <RARE_TOKEN> . <RARE_TOKEN> ( method . getName ( ) . charAt ( 3 ) ) </a> 
<a> && method . <RARE_TOKEN> ( ) . length == 1 </a> 
<a> || method . <RARE_TOKEN> ( <RARE_TOKEN> . class ) != null ) { </a> 
<a> fields . add ( new <RARE_TOKEN> ( this , method ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> return fields . <RARE_TOKEN> ( new <RARE_TOKEN> [ 0 ] ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public JClassType getType ( ) { </a> 
<a> return type ; </a> 
<a> } </a> 
<a> public JClassType <RARE_TOKEN> ( ) { </a> 
<a> return type ; </a> 
<a> } </a> 
<a> public String <RARE_TOKEN> ( ) { </a> 
<a> if ( ! <RARE_TOKEN> ( ) ) { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> return <RARE_TOKEN> + <RARE_TOKEN> . class . getName ( ) </a> 
<a> + <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public int hashCode ( ) { </a> 
<a> return getQualifiedSourceName ( ) . hashCode ( ) ; </a> 
<a> } </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return type . <RARE_TOKEN> ( ) != null ; </a> 
<a> } </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> . <RARE_TOKEN> ( this . getType ( ) ) ; </a> 
<a> } </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> . <RARE_TOKEN> ( this ) </a> 
<a> || <RARE_TOKEN> . <RARE_TOKEN> ( this ) || <RARE_TOKEN> </a> 
<a> . <RARE_TOKEN> ( this ) ; </a> 
<a> } </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return ! <RARE_TOKEN> ( ) && ! <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return type . <RARE_TOKEN> ( ) == null && ! type . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> package org . timepedia . exporter . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . core . ext . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . core . ext . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . core . ext . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> public <RARE_TOKEN> ( JExportableClassType <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> method ) { </a> 
<a> super ( <RARE_TOKEN> , method ) ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> } </a> 
<a> public String <RARE_TOKEN> ( ) { </a> 
<a> String <RARE_TOKEN> = <RARE_TOKEN> . getQualifiedSourceName ( ) + <RARE_TOKEN> </a> 
<a> + <RARE_TOKEN> ( ) + <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> [ ] params = method . <RARE_TOKEN> ( ) ; </a> 
<a> for ( int i = 0 ; i < params . length ; i ++ ) { </a> 
<a> <RARE_TOKEN> += params [ i ] . getType ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> += <RARE_TOKEN> ; </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public String <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public String <RARE_TOKEN> ( ) { </a> 
<a> String <RARE_TOKEN> = </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) + <RARE_TOKEN> </a> 
<a> + <RARE_TOKEN> ( ) + <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> [ ] params = method . <RARE_TOKEN> ( ) ; </a> 
<a> for ( int i = 0 ; i < params . length ; i ++ ) { </a> 
<a> <RARE_TOKEN> += params [ i ] . getType ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> += <RARE_TOKEN> ; </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public String <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> package org . timepedia . exporter . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . core . ext . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import org . timepedia . exporter . client . <RARE_TOKEN> ; </a> 
<a> public class <RARE_TOKEN> { </a> 
<a> private JExportableClassType <RARE_TOKEN> ; </a> 
<a> private <RARE_TOKEN> field ; </a> 
<a> private String <RARE_TOKEN> ; </a> 
<a> public <RARE_TOKEN> ( JExportableClassType <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> field ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> this . field = field ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = field . <RARE_TOKEN> ( <RARE_TOKEN> . class ) ; </a> 
<a> if ( <RARE_TOKEN> != null && <RARE_TOKEN> . value ( ) . length ( ) > 0 ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . value ( ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> = field . getName ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public String <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public String <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> . <RARE_TOKEN> ( ) + <RARE_TOKEN> </a> 
<a> + <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> public String <RARE_TOKEN> ( ) { </a> 
<a> return field . <RARE_TOKEN> ( ) . getQualifiedSourceName ( ) + <RARE_TOKEN> + field </a> 
<a> . getName ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> package org . timepedia . exporter . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . core . ext . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . core . ext . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . core . ext . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . core . ext . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import org . timepedia . exporter . client . <RARE_TOKEN> ; </a> 
<a> public class <RARE_TOKEN> implements <RARE_TOKEN> { </a> 
<a> protected JExportableClassType <RARE_TOKEN> ; </a> 
<a> protected <RARE_TOKEN> method ; </a> 
<a> private String <RARE_TOKEN> ; </a> 
<a> public <RARE_TOKEN> ( JExportableClassType <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> method ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> this . method = method ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = method . <RARE_TOKEN> ( <RARE_TOKEN> . class ) ; </a> 
<a> if ( <RARE_TOKEN> != null && <RARE_TOKEN> . value ( ) . length ( ) > 0 ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . value ( ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> = method . getName ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public String <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public String <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ( ) . <RARE_TOKEN> ( ) + <RARE_TOKEN> </a> 
<a> + <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = <RARE_TOKEN> ( ) ; </a> 
<a> String <RARE_TOKEN> = ( ( <RARE_TOKEN> ) method ) . <RARE_TOKEN> ( ) </a> 
<a> . getQualifiedSourceName ( ) ; </a> 
<a> return <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> [ ] <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> [ ] params = method . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> [ ] <RARE_TOKEN> = new <RARE_TOKEN> [ params . length ] ; </a> 
<a> int i = 0 ; </a> 
<a> for ( <RARE_TOKEN> <RARE_TOKEN> : params ) { </a> 
<a> <RARE_TOKEN> [ i ++ ] = new <RARE_TOKEN> ( this , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public JExportableClassType <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public String <RARE_TOKEN> ( ) { </a> 
<a> String <RARE_TOKEN> = <RARE_TOKEN> . getQualifiedSourceName ( ) + <RARE_TOKEN> </a> 
<a> + method . getName ( ) + <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> [ ] params = method . <RARE_TOKEN> ( ) ; </a> 
<a> for ( int i = 0 ; i < params . length ; i ++ ) { </a> 
<a> <RARE_TOKEN> += params [ i ] . getType ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> += <RARE_TOKEN> ; </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> if ( method instanceof <RARE_TOKEN> ) { </a> 
<a> return false ; </a> 
<a> } else { </a> 
<a> return ( ( <RARE_TOKEN> ) method ) . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public <RARE_TOKEN> <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> public String toString ( ) { </a> 
<a> String <RARE_TOKEN> = <RARE_TOKEN> . getQualifiedSourceName ( ) + <RARE_TOKEN> </a> 
<a> + method . getName ( ) + <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> [ ] params = <RARE_TOKEN> ( ) ; </a> 
<a> for ( int i = 0 ; i < params . length ; i ++ ) { </a> 
<a> <RARE_TOKEN> += params [ i ] ; </a> 
<a> if ( i < params . length - 1 ) { </a> 
<a> <RARE_TOKEN> += ", " ; </a> 
<a> } </a> 
<a> } </a> 
<a> return <RARE_TOKEN> + <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public String getName ( ) { </a> 
<a> return method . getName ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> package org . timepedia . exporter . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . core . ext . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . core . ext . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> public class <RARE_TOKEN> { </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> private JExportableClassType <RARE_TOKEN> ; </a> 
<a> public <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> public String <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> . getType ( ) . getQualifiedSourceName ( ) ; </a> 
<a> } </a> 
<a> public String <RARE_TOKEN> ( String <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = <RARE_TOKEN> </a> 
<a> . <RARE_TOKEN> ( ) ; </a> 
<a> String <RARE_TOKEN> = <RARE_TOKEN> . getType ( ) . getQualifiedSourceName ( ) ; </a> 
<a> <RARE_TOKEN> type = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> if ( type != null && type . <RARE_TOKEN> ( ) ) { </a> 
<a> JExportableClassType <RARE_TOKEN> = ( JExportableClassType ) type ; </a> 
<a> if ( <RARE_TOKEN> . <RARE_TOKEN> ( ) </a> 
<a> . <RARE_TOKEN> ( type . getQualifiedSourceName ( ) ) ) { </a> 
<a> String value = <RARE_TOKEN> + <RARE_TOKEN> + <RARE_TOKEN> == <RARE_TOKEN> </a> 
<a> + <RARE_TOKEN> . <RARE_TOKEN> ( ) + " ? " + <RARE_TOKEN> </a> 
<a> + <RARE_TOKEN> : " + <RARE_TOKEN> + <RARE_TOKEN> + <RARE_TOKEN> </a> 
<a> + <RARE_TOKEN> ? " + <RARE_TOKEN> + " : <RARE_TOKEN> </a> 
<a> + <RARE_TOKEN> . <RARE_TOKEN> ( ) + <RARE_TOKEN> </a> 
<a> + <RARE_TOKEN> </a> 
<a> + <RARE_TOKEN> + <RARE_TOKEN> ; </a> 
<a> return value ; </a> 
<a> } else { </a> 
<a> return <RARE_TOKEN> + <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean equals ( Object o ) { </a> 
<a> if ( this == o ) { </a> 
<a> return true ; </a> 
<a> } </a> 
<a> if ( o == null || getClass ( ) != o . getClass ( ) ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> that = ( <RARE_TOKEN> ) o ; </a> 
<a> return <RARE_TOKEN> ( ) . equals ( that . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> public String <RARE_TOKEN> ( ) { </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } else if ( <RARE_TOKEN> . getType ( ) . <RARE_TOKEN> ( ) != null ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } else if ( <RARE_TOKEN> . getType ( ) . <RARE_TOKEN> ( ) != null ) { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = <RARE_TOKEN> . getType ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> return <RARE_TOKEN> == <RARE_TOKEN> . <RARE_TOKEN> ? <RARE_TOKEN> : <RARE_TOKEN> ; </a> 
<a> } else if ( <RARE_TOKEN> . <RARE_TOKEN> ( ) </a> 
<a> . <RARE_TOKEN> ( <RARE_TOKEN> . getType ( ) ) ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } else if ( <RARE_TOKEN> . <RARE_TOKEN> ( ) </a> 
<a> . <RARE_TOKEN> ( <RARE_TOKEN> . getType ( ) ) ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } else { </a> 
<a> return <RARE_TOKEN> + <RARE_TOKEN> . getType ( ) . getQualifiedSourceName ( ) + <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int hashCode ( ) { </a> 
<a> return <RARE_TOKEN> != null ? <RARE_TOKEN> ( ) . hashCode ( ) : 0 ; </a> 
<a> } </a> 
<a> public String toString ( ) { </a> 
<a> return <RARE_TOKEN> . getType ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> . <RARE_TOKEN> ( ) </a> 
<a> . <RARE_TOKEN> ( <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> package org . timepedia . exporter . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . core . ext . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> public class <RARE_TOKEN> implements <RARE_TOKEN> { </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> public <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> public String getQualifiedSourceName ( ) { </a> 
<a> return <RARE_TOKEN> . getQualifiedSourceName ( ) ; </a> 
<a> } </a> 
<a> public String <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> . <RARE_TOKEN> ( ) . equals ( <RARE_TOKEN> ) ? <RARE_TOKEN> </a> 
<a> : <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public String <RARE_TOKEN> ( ) { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> public String <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> return <RARE_TOKEN> == <RARE_TOKEN> . <RARE_TOKEN> ? <RARE_TOKEN> : <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> package org . timepedia . exporter . <RARE_TOKEN> ; </a> 
<a> public interface <RARE_TOKEN> { </a> 
<a> boolean <RARE_TOKEN> ( ) ; </a> 
<a> String getQualifiedSourceName ( ) ; </a> 
<a> String <RARE_TOKEN> ( ) ; </a> 
<a> String <RARE_TOKEN> ( ) ; </a> 
<a> String <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> package org . timepedia . exporter . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . core . ext . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . core . ext . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import org . timepedia . exporter . client . <RARE_TOKEN> ; </a> 
<a> public class <RARE_TOKEN> { </a> 
<a> private JExportableClassType <RARE_TOKEN> ; </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> public <RARE_TOKEN> ( JExportableClassType <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public String <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> . <RARE_TOKEN> ( ) . getQualifiedSourceName ( ) + " " </a> 
<a> + <RARE_TOKEN> . getName ( ) + <RARE_TOKEN> </a> 
<a> + <RARE_TOKEN> . <RARE_TOKEN> ( ) [ 0 ] . getType ( ) . getQualifiedSourceName ( ) </a> 
<a> + " <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> . <RARE_TOKEN> ( ) . equals ( <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public String <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> . getName ( ) ; </a> 
<a> } </a> 
<a> public String <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> . <RARE_TOKEN> ( ) . getQualifiedSourceName ( ) ; </a> 
<a> } </a> 
<a> public String <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> . <RARE_TOKEN> ( ) [ 0 ] . getType ( ) . <RARE_TOKEN> ( ) != null ? </a> 
<a> <RARE_TOKEN> : <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public String <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> . <RARE_TOKEN> ( ) [ 0 ] . getType ( ) . <RARE_TOKEN> ( ) != null ? </a> 
<a> <RARE_TOKEN> : <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public String getName ( ) { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> . class ) ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> return <RARE_TOKEN> . value ( ) ; </a> 
<a> } </a> 
<a> return <RARE_TOKEN> ( <RARE_TOKEN> . getName ( ) ) ; </a> 
<a> } </a> 
<a> private String <RARE_TOKEN> ( String name ) { </a> 
<a> String <RARE_TOKEN> = name . startsWith ( <RARE_TOKEN> ) ? name . substring ( 3 ) : name ; </a> 
<a> return <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> . charAt ( 0 ) ) + <RARE_TOKEN> . substring ( 1 ) ; </a> 
<a> } </a> 
<a> public String <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> type = <RARE_TOKEN> . <RARE_TOKEN> ( ) [ 0 ] . getType ( ) </a> 
<a> . <RARE_TOKEN> ( ) ; </a> 
<a> return type != null ? type . getQualifiedSourceName ( ) : <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public String <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> . <RARE_TOKEN> ( ) [ 0 ] . getType ( ) . getQualifiedSourceName ( ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . util . <RARE_TOKEN> ; </a> 
<a> import org . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import org . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import org . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import org . slf4j . Logger ; </a> 
<a> import org . slf4j . LoggerFactory ; </a> 
<a> import java . io . Serializable ; </a> 
<a> import java . util . concurrent . CountDownLatch ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> private static final Logger logger = LoggerFactory . getLogger ( <RARE_TOKEN> . class ) ; </a> 
<a> public static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> private final CountDownLatch <RARE_TOKEN> = new CountDownLatch ( 1 ) ; </a> 
<a> public <RARE_TOKEN> ( ) { </a> 
<a> this ( <RARE_TOKEN> . class . getSimpleName ( ) ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( String id ) { </a> 
<a> super ( id ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> try { </a> 
<a> logger . info ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> support <RARE_TOKEN> group name {}" , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = new <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( new <RARE_TOKEN> ( ) { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( final <RARE_TOKEN> message ) { </a> 
<a> final Object msg = message . <RARE_TOKEN> ( ) ; </a> 
<a> if ( msg != null && <RARE_TOKEN> . class . isAssignableFrom ( msg . getClass ( ) ) ) { </a> 
<a> <RARE_TOKEN> b = <RARE_TOKEN> . class . cast ( msg ) ; </a> 
<a> if ( b . <RARE_TOKEN> ( ) . equalsIgnoreCase ( <RARE_TOKEN> ( ) ) ) { </a> 
<a> <RARE_TOKEN> ( b . getMessage ( ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> <RARE_TOKEN> . connect ( <RARE_TOKEN> ) ; </a> 
<a> } catch ( Throwable t ) { </a> 
<a> logger . warn ( "failed to connect to <RARE_TOKEN> <RARE_TOKEN> , t ) ; </a> 
<a> } finally { </a> 
<a> <RARE_TOKEN> . countDown ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( Object message ) { </a> 
<a> try { </a> 
<a> <RARE_TOKEN> . await ( ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( new <RARE_TOKEN> ( null , null , new <RARE_TOKEN> ( <RARE_TOKEN> ( ) , message ) ) ) ; </a> 
<a> } catch ( Throwable e ) { </a> 
<a> logger . error ( "failed to <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> , e . getMessage ( ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public synchronized void destroy ( ) { </a> 
<a> super . destroy ( ) ; </a> 
<a> if ( ! <RARE_TOKEN> . isOpen ( ) ) return ; </a> 
<a> <RARE_TOKEN> . shutdown ( ) ; </a> 
<a> } </a> 
<a> public static class <RARE_TOKEN> implements Serializable { </a> 
<a> private final String <RARE_TOKEN> ; </a> 
<a> private final Object message ; </a> 
<a> public <RARE_TOKEN> ( String <RARE_TOKEN> , Object message ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> this . message = message ; </a> 
<a> } </a> 
<a> public String <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public Object getMessage ( ) { </a> 
<a> return message ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . cpr . Broadcaster ; </a> 
<a> import org . atmosphere . cpr . BroadcasterFactory ; </a> 
<a> import org . atmosphere . cpr . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . cpr . <RARE_TOKEN> ; </a> 
<a> import org . <RARE_TOKEN> . ChannelException ; </a> 
<a> import org . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import org . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import org . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import org . slf4j . Logger ; </a> 
<a> import org . slf4j . LoggerFactory ; </a> 
<a> import java . util . concurrent . ConcurrentLinkedQueue ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> implements <RARE_TOKEN> { </a> 
<a> private static final Logger logger = LoggerFactory . getLogger ( <RARE_TOKEN> . class ) ; </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> private Broadcaster bc ; </a> 
<a> private final ConcurrentLinkedQueue < Object > <RARE_TOKEN> = new ConcurrentLinkedQueue < Object > ( ) ; </a> 
<a> public <RARE_TOKEN> ( ) throws <RARE_TOKEN> , <RARE_TOKEN> { </a> 
<a> this ( BroadcasterFactory . <RARE_TOKEN> ( ) . get ( <RARE_TOKEN> . class , <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( Broadcaster bc ) { </a> 
<a> this . bc = bc ; </a> 
<a> } </a> 
<a> public void init ( ) { </a> 
<a> try { </a> 
<a> logger . info ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> support <RARE_TOKEN> group name {}" , <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = new <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( this ) ; </a> 
<a> <RARE_TOKEN> . connect ( <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> } catch ( Throwable t ) { </a> 
<a> logger . warn ( "failed to connect to <RARE_TOKEN> , t ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public void destroy ( ) { </a> 
<a> <RARE_TOKEN> . shutdown ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( final <RARE_TOKEN> message ) { </a> 
<a> final Object msg = message . <RARE_TOKEN> ( ) ; </a> 
<a> if ( message . <RARE_TOKEN> ( ) != <RARE_TOKEN> . <RARE_TOKEN> ( ) ) { </a> 
<a> if ( msg != null ) { </a> 
<a> if ( msg != null && <RARE_TOKEN> . <RARE_TOKEN> . class . isAssignableFrom ( msg . getClass ( ) ) ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( msg ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> b = <RARE_TOKEN> . <RARE_TOKEN> . class . cast ( msg ) ; </a> 
<a> if ( b . <RARE_TOKEN> ( ) . equalsIgnoreCase ( bc . <RARE_TOKEN> ( ) ) ) { </a> 
<a> bc . broadcast ( b . getMessage ( ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> public BroadcastAction filter ( Object <RARE_TOKEN> , Object message ) { </a> 
<a> if ( ! <RARE_TOKEN> . remove ( message ) ) { </a> 
<a> try { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( new <RARE_TOKEN> ( null , null , new <RARE_TOKEN> . <RARE_TOKEN> ( bc . <RARE_TOKEN> ( ) , message ) ) ) ; </a> 
<a> } catch ( ChannelException e ) { </a> 
<a> logger . warn ( "failed to <RARE_TOKEN> <RARE_TOKEN> , e ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> return new BroadcastAction ( message ) ; </a> 
<a> } </a> 
<a> public Broadcaster getBroadcaster ( ) { </a> 
<a> return bc ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( String name ) { </a> 
<a> bc . <RARE_TOKEN> ( name ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( Broadcaster bc ) { </a> 
<a> this . bc = bc ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . cpr . AtmosphereServlet ; </a> 
<a> import org . atmosphere . cpr . Broadcaster ; </a> 
<a> import org . atmosphere . cpr . <RARE_TOKEN> ; </a> 
<a> import org . slf4j . Logger ; </a> 
<a> import org . slf4j . LoggerFactory ; </a> 
<a> import javax . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import javax . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import javax . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import javax . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import javax . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import javax . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import javax . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import javax . <RARE_TOKEN> . Session ; </a> 
<a> import javax . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import javax . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import javax . <RARE_TOKEN> . Context ; </a> 
<a> import javax . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import java . util . concurrent . ConcurrentLinkedQueue ; </a> 
<a> public class <RARE_TOKEN> implements <RARE_TOKEN> { </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> . class . getName ( ) + <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> . class . getName ( ) + <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> . class . getName ( ) + <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> . class . getName ( ) + <RARE_TOKEN> ; </a> 
<a> private static final Logger logger = LoggerFactory . getLogger ( <RARE_TOKEN> . class ) ; </a> 
<a> private <RARE_TOKEN> connection ; </a> 
<a> private Session session ; </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> private String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private String <RARE_TOKEN> ; </a> 
<a> private Broadcaster bc = null ; </a> 
<a> private final ConcurrentLinkedQueue < String > <RARE_TOKEN> = </a> 
<a> new ConcurrentLinkedQueue < String > ( ) ; </a> 
<a> public <RARE_TOKEN> ( ) { </a> 
<a> this ( null ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( Broadcaster bc ) { </a> 
<a> this ( bc , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( Broadcaster bc , String <RARE_TOKEN> ) { </a> 
<a> this . bc = bc ; </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( String <RARE_TOKEN> ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public void init ( ) { </a> 
<a> try { </a> 
<a> AtmosphereServlet . AtmosphereConfig config = bc . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> if ( config != null ) { </a> 
<a> if ( config . getInitParameter ( <RARE_TOKEN> ) != null ) { </a> 
<a> <RARE_TOKEN> = config . getInitParameter ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( config . getInitParameter ( <RARE_TOKEN> ) != null ) { </a> 
<a> <RARE_TOKEN> = config . getInitParameter ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( config . getInitParameter ( <RARE_TOKEN> ) != null ) { </a> 
<a> <RARE_TOKEN> = config . getInitParameter ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( config . getInitParameter ( <RARE_TOKEN> ) != null ) { </a> 
<a> <RARE_TOKEN> = config . getInitParameter ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> String id = bc . <RARE_TOKEN> ( ) ; </a> 
<a> if ( id . startsWith ( <RARE_TOKEN> ) ) { </a> 
<a> id = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> logger . info ( String . format ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> Factory <RARE_TOKEN> , <RARE_TOKEN> + <RARE_TOKEN> ) ) ; </a> 
<a> Context ctx = new <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = ( <RARE_TOKEN> ) ctx . <RARE_TOKEN> ( <RARE_TOKEN> + <RARE_TOKEN> ) ; </a> 
<a> logger . info ( String . format ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> , <RARE_TOKEN> ) ) ; </a> 
<a> <RARE_TOKEN> topic = ( <RARE_TOKEN> ) ctx . <RARE_TOKEN> ( <RARE_TOKEN> + <RARE_TOKEN> ) ; </a> 
<a> connection = <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> session = connection . <RARE_TOKEN> ( false , Session . <RARE_TOKEN> ) ; </a> 
<a> logger . info ( String . format ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> , id ) ) ; </a> 
<a> String <RARE_TOKEN> = String . format ( <RARE_TOKEN> = <RARE_TOKEN> , id ) ; </a> 
<a> <RARE_TOKEN> = session . <RARE_TOKEN> ( topic , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( new <RARE_TOKEN> ( ) { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( <RARE_TOKEN> msg ) { </a> 
<a> try { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = ( <RARE_TOKEN> ) msg ; </a> 
<a> String message = <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> if ( message != null && bc != null ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( message ) ; </a> 
<a> bc . broadcast ( message ) ; </a> 
<a> } </a> 
<a> } catch ( <RARE_TOKEN> ex ) { </a> 
<a> logger . warn ( "" , ex ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> <RARE_TOKEN> = session . <RARE_TOKEN> ( topic ) ; </a> 
<a> connection . start ( ) ; </a> 
<a> logger . info ( String . format ( <RARE_TOKEN> <RARE_TOKEN> for topic <RARE_TOKEN> <RARE_TOKEN> filter <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> ) ) ; </a> 
<a> } catch ( Throwable ex ) { </a> 
<a> throw new IllegalStateException ( <RARE_TOKEN> to <RARE_TOKEN> <RARE_TOKEN> , ex ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public void destroy ( ) { </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public BroadcastAction filter ( Object <RARE_TOKEN> , Object o ) { </a> 
<a> if ( o instanceof String ) { </a> 
<a> String message = ( String ) o ; </a> 
<a> if ( ! <RARE_TOKEN> . remove ( message ) ) { </a> 
<a> try { </a> 
<a> String id = bc . <RARE_TOKEN> ( ) ; </a> 
<a> if ( id . startsWith ( <RARE_TOKEN> ) ) { </a> 
<a> id = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = session . <RARE_TOKEN> ( message . toString ( ) ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> , id ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } catch ( <RARE_TOKEN> ex ) { </a> 
<a> logger . warn ( "failed to <RARE_TOKEN> <RARE_TOKEN> , ex ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> return new BroadcastAction ( message ) ; </a> 
<a> } else { </a> 
<a> return new BroadcastAction ( o ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public Broadcaster getBroadcaster ( ) { </a> 
<a> return bc ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( Broadcaster bc ) { </a> 
<a> this . bc = bc ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import org . apache . commons . <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . util . <RARE_TOKEN> ; </a> 
<a> import org . slf4j . Logger ; </a> 
<a> import org . slf4j . LoggerFactory ; </a> 
<a> import <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import java . io . IOException ; </a> 
<a> import java . net . URI ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> private static final Logger logger = LoggerFactory . getLogger ( <RARE_TOKEN> . class ) ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> . class . getName ( ) + <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> . class . getName ( ) + <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> . class . getName ( ) + <RARE_TOKEN> ; </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> private URI uri ; </a> 
<a> private String <RARE_TOKEN> = null ; </a> 
<a> private boolean <RARE_TOKEN> = false ; </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> public <RARE_TOKEN> ( ) { </a> 
<a> this ( <RARE_TOKEN> . class . getSimpleName ( ) , URI . create ( <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( String id ) { </a> 
<a> this ( id , URI . create ( <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( URI uri ) { </a> 
<a> this ( <RARE_TOKEN> . class . getSimpleName ( ) , uri ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( String id , URI uri ) { </a> 
<a> super ( id ) ; </a> 
<a> this . uri = uri ; </a> 
<a> } </a> 
<a> public String <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( String <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void start ( ) { </a> 
<a> super . start ( ) ; </a> 
<a> } </a> 
<a> public synchronized void <RARE_TOKEN> ( ) { </a> 
<a> if ( uri == null ) return ; </a> 
<a> if ( config != null ) { </a> 
<a> if ( config . <RARE_TOKEN> ( ) . getInitParameter ( <RARE_TOKEN> ) != null ) { </a> 
<a> <RARE_TOKEN> = config . <RARE_TOKEN> ( ) . getInitParameter ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( config . <RARE_TOKEN> ( ) . getInitParameter ( <RARE_TOKEN> ) != null ) { </a> 
<a> uri = URI . create ( config . <RARE_TOKEN> ( ) . getInitParameter ( <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> if ( config . <RARE_TOKEN> ( ) . getInitParameter ( <RARE_TOKEN> ) != null ) { </a> 
<a> <RARE_TOKEN> = Boolean . <RARE_TOKEN> ( config . <RARE_TOKEN> ( ) . getInitParameter ( <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> logger . info ( <RARE_TOKEN> <RARE_TOKEN> connection <RARE_TOKEN> {}" , getClass ( ) . getName ( ) , <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> ) { </a> 
<a> if ( config . <RARE_TOKEN> ( ) . get ( <RARE_TOKEN> ) != null ) { </a> 
<a> <RARE_TOKEN> = ( <RARE_TOKEN> ) config . <RARE_TOKEN> ( ) . get ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> = true ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> = true ; </a> 
<a> <RARE_TOKEN> = new <RARE_TOKEN> ( <RARE_TOKEN> , uri . <RARE_TOKEN> ( ) , uri . <RARE_TOKEN> ( ) ) ; </a> 
<a> config . <RARE_TOKEN> ( ) . put ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } else { </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ? <RARE_TOKEN> . getResource ( ) : new <RARE_TOKEN> ( uri . <RARE_TOKEN> ( ) , uri . <RARE_TOKEN> ( ) ) ; </a> 
<a> try { </a> 
<a> <RARE_TOKEN> . connect ( ) ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> } catch ( IOException e ) { </a> 
<a> logger . error ( "failed to connect <RARE_TOKEN> , e ) ; </a> 
<a> try { </a> 
<a> <RARE_TOKEN> . disconnect ( ) ; </a> 
<a> } catch ( IOException <RARE_TOKEN> ) { </a> 
<a> logger . error ( "failed to disconnect <RARE_TOKEN> , e ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ? <RARE_TOKEN> . getResource ( ) : new <RARE_TOKEN> ( uri . <RARE_TOKEN> ( ) , uri . <RARE_TOKEN> ( ) ) ; </a> 
<a> try { </a> 
<a> <RARE_TOKEN> . connect ( ) ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> } catch ( IOException e ) { </a> 
<a> logger . error ( "failed to connect <RARE_TOKEN> , e ) ; </a> 
<a> try { </a> 
<a> <RARE_TOKEN> . disconnect ( ) ; </a> 
<a> } catch ( IOException <RARE_TOKEN> ) { </a> 
<a> logger . error ( "failed to disconnect <RARE_TOKEN> , e ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public synchronized void <RARE_TOKEN> ( String id ) { </a> 
<a> super . <RARE_TOKEN> ( id ) ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void destroy ( ) { </a> 
<a> super . destroy ( ) ; </a> 
<a> try { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } catch ( Throwable t ) { </a> 
<a> logger . warn ( <RARE_TOKEN> error <RARE_TOKEN> <RARE_TOKEN> , t ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> logger . info ( <RARE_TOKEN> <RARE_TOKEN> {}" , <RARE_TOKEN> ( ) ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( new <RARE_TOKEN> ( ) { </a> 
<a> public void <RARE_TOKEN> ( String channel , String message ) { </a> 
<a> <RARE_TOKEN> ( message ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( String channel , int <RARE_TOKEN> ) { </a> 
<a> logger . debug ( <RARE_TOKEN> {}" , channel ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( String channel , int <RARE_TOKEN> ) { </a> 
<a> logger . debug ( <RARE_TOKEN> {}" , channel ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( String <RARE_TOKEN> , int <RARE_TOKEN> ) { </a> 
<a> logger . debug ( <RARE_TOKEN> {}" , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( String <RARE_TOKEN> , int <RARE_TOKEN> ) { </a> 
<a> logger . debug ( <RARE_TOKEN> {}" , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( String <RARE_TOKEN> , String channel , String message ) { </a> 
<a> logger . debug ( <RARE_TOKEN> {}" , <RARE_TOKEN> + " " + channel + " " + message ) ; </a> 
<a> } </a> 
<a> } , <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( Object message ) { </a> 
<a> synchronized ( <RARE_TOKEN> ) { </a> 
<a> try { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ( ) , message . toString ( ) ) ; </a> 
<a> } catch ( <RARE_TOKEN> e ) { </a> 
<a> logger . warn ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> a <RARE_TOKEN> , e ) ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ? <RARE_TOKEN> . getResource ( ) : new <RARE_TOKEN> ( uri . <RARE_TOKEN> ( ) , uri . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( ) { </a> 
<a> if ( <RARE_TOKEN> == null ) return ; </a> 
<a> synchronized ( <RARE_TOKEN> ) { </a> 
<a> try { </a> 
<a> <RARE_TOKEN> . disconnect ( ) ; </a> 
<a> } catch ( IOException e ) { </a> 
<a> logger . error ( "failed to disconnect <RARE_TOKEN> , e ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( ) { </a> 
<a> if ( <RARE_TOKEN> == null ) return ; </a> 
<a> synchronized ( <RARE_TOKEN> ) { </a> 
<a> try { </a> 
<a> <RARE_TOKEN> . disconnect ( ) ; </a> 
<a> } catch ( IOException e ) { </a> 
<a> logger . error ( "failed to disconnect <RARE_TOKEN> , e ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . cpr . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . cpr . Broadcaster ; </a> 
<a> import org . atmosphere . cpr . <RARE_TOKEN> ; </a> 
<a> import org . slf4j . Logger ; </a> 
<a> import org . slf4j . LoggerFactory ; </a> 
<a> import <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import java . io . IOException ; </a> 
<a> import java . net . URI ; </a> 
<a> import java . util . concurrent . ConcurrentLinkedQueue ; </a> 
<a> import java . util . concurrent . <RARE_TOKEN> ; </a> 
<a> import java . util . concurrent . <RARE_TOKEN> ; </a> 
<a> public class <RARE_TOKEN> implements <RARE_TOKEN> { </a> 
<a> private static final Logger logger = LoggerFactory . getLogger ( <RARE_TOKEN> . class ) ; </a> 
<a> private Broadcaster bc ; </a> 
<a> private final <RARE_TOKEN> listener = <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> private final ConcurrentLinkedQueue < String > <RARE_TOKEN> = new ConcurrentLinkedQueue < String > ( ) ; </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> private URI uri ; </a> 
<a> private String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> public <RARE_TOKEN> ( ) { </a> 
<a> this ( <RARE_TOKEN> . class . getSimpleName ( ) , URI . create ( <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( String id ) { </a> 
<a> this ( id , URI . create ( <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( URI uri ) { </a> 
<a> this ( <RARE_TOKEN> . class . getSimpleName ( ) , uri ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( String id , URI uri ) { </a> 
<a> this . uri = uri ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( Broadcaster bc , String <RARE_TOKEN> ) { </a> 
<a> this . bc = bc ; </a> 
<a> uri = URI . create ( <RARE_TOKEN> ) ; </a> 
<a> if ( uri == null ) return ; </a> 
<a> <RARE_TOKEN> = new <RARE_TOKEN> ( uri . <RARE_TOKEN> ( ) , uri . <RARE_TOKEN> ( ) ) ; </a> 
<a> try { </a> 
<a> <RARE_TOKEN> . connect ( ) ; </a> 
<a> } catch ( IOException e ) { </a> 
<a> logger . error ( "failed to connect to <RARE_TOKEN> " + <RARE_TOKEN> , e ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> = new <RARE_TOKEN> ( uri . <RARE_TOKEN> ( ) , uri . <RARE_TOKEN> ( ) ) ; </a> 
<a> try { </a> 
<a> <RARE_TOKEN> . connect ( ) ; </a> 
<a> } catch ( IOException e ) { </a> 
<a> logger . error ( "failed to connect to <RARE_TOKEN> " + <RARE_TOKEN> , e ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( String <RARE_TOKEN> ) { </a> 
<a> uri = URI . create ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void init ( ) { </a> 
<a> logger . info ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> final Broadcaster broadcaster = bc ; </a> 
<a> listener . <RARE_TOKEN> ( new Runnable ( ) { </a> 
<a> public void run ( ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( new <RARE_TOKEN> ( ) { </a> 
<a> public void <RARE_TOKEN> ( String channel , String message ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( message ) ; </a> 
<a> broadcaster . broadcast ( message ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( String channel , int <RARE_TOKEN> ) { </a> 
<a> logger . debug ( <RARE_TOKEN> <RARE_TOKEN> {}" , channel ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( String channel , int <RARE_TOKEN> ) { </a> 
<a> logger . debug ( <RARE_TOKEN> <RARE_TOKEN> {}" , channel ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( String <RARE_TOKEN> , int <RARE_TOKEN> ) { </a> 
<a> logger . debug ( <RARE_TOKEN> <RARE_TOKEN> {}" , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( String <RARE_TOKEN> , int <RARE_TOKEN> ) { </a> 
<a> logger . debug ( <RARE_TOKEN> <RARE_TOKEN> {}" , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( String <RARE_TOKEN> , String channel , String message ) { </a> 
<a> logger . debug ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> {}" , </a> 
<a> new Object [ ] { <RARE_TOKEN> , channel , message } ) ; </a> 
<a> } </a> 
<a> } , bc . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void destroy ( ) { </a> 
<a> listener . <RARE_TOKEN> ( ) ; </a> 
<a> try { </a> 
<a> <RARE_TOKEN> . disconnect ( ) ; </a> 
<a> <RARE_TOKEN> . disconnect ( ) ; </a> 
<a> } catch ( IOException e ) { </a> 
<a> logger . error ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> , e ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public <RARE_TOKEN> . BroadcastAction filter ( Object <RARE_TOKEN> , Object o ) { </a> 
<a> if ( ! ( <RARE_TOKEN> . remove ( <RARE_TOKEN> . toString ( ) ) ) ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( bc . <RARE_TOKEN> ( ) , <RARE_TOKEN> . toString ( ) ) ; </a> 
<a> } </a> 
<a> return new <RARE_TOKEN> . BroadcastAction ( BroadcastAction . <RARE_TOKEN> . <RARE_TOKEN> , o ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public Broadcaster getBroadcaster ( ) { </a> 
<a> return bc ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( Broadcaster bc ) { </a> 
<a> this . bc = bc ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . util . <RARE_TOKEN> ; </a> 
<a> import org . <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import org . <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import org . <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import org . <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import org . <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import org . <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import org . <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import org . slf4j . Logger ; </a> 
<a> import org . slf4j . LoggerFactory ; </a> 
<a> import java . net . URI ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> private static final Logger logger = LoggerFactory . getLogger ( <RARE_TOKEN> . class ) ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> . class . getName ( ) + <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> . class . getName ( ) + <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> . class . getName ( ) + <RARE_TOKEN> ; </a> 
<a> private URI uri ; </a> 
<a> private String <RARE_TOKEN> ; </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> private <RARE_TOKEN> channel ; </a> 
<a> public <RARE_TOKEN> ( ) { </a> 
<a> this ( <RARE_TOKEN> , URI . create ( <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( String id ) { </a> 
<a> this ( id , URI . create ( <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( URI uri ) { </a> 
<a> this ( <RARE_TOKEN> . class . getSimpleName ( ) , uri ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( String id , URI uri ) { </a> 
<a> super ( id ) ; </a> 
<a> this . uri = uri ; </a> 
<a> } </a> 
<a> private synchronized void <RARE_TOKEN> ( ) { </a> 
<a> if ( uri == null ) return ; </a> 
<a> try { </a> 
<a> if ( config != null ) { </a> 
<a> if ( config . <RARE_TOKEN> ( ) . getInitParameter ( <RARE_TOKEN> ) != null ) { </a> 
<a> <RARE_TOKEN> = config . <RARE_TOKEN> ( ) . getInitParameter ( <RARE_TOKEN> ) ; </a> 
<a> } else { </a> 
<a> throw new IllegalStateException ( <RARE_TOKEN> <RARE_TOKEN> token <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> + </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> + </a> 
<a> " <RARE_TOKEN> + </a> 
<a> " <RARE_TOKEN> + </a> 
<a> " <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( config . <RARE_TOKEN> ( ) . getInitParameter ( <RARE_TOKEN> ) != null ) { </a> 
<a> uri = URI . create ( config . <RARE_TOKEN> ( ) . getInitParameter ( <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> if ( config . <RARE_TOKEN> ( ) . getInitParameter ( <RARE_TOKEN> ) != null ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> = true ; </a> 
<a> } </a> 
<a> } </a> 
<a> <RARE_TOKEN> config = null ; </a> 
<a> int port = - 1 ; </a> 
<a> try { </a> 
<a> port = uri . <RARE_TOKEN> ( ) ; </a> 
<a> } catch ( Throwable t ) { </a> 
<a> ; </a> 
<a> } </a> 
<a> if ( port == - 1 ) { </a> 
<a> config = new <RARE_TOKEN> ( uri . <RARE_TOKEN> ( ) ) ; </a> 
<a> } else { </a> 
<a> config = new <RARE_TOKEN> ( uri . <RARE_TOKEN> ( ) , port ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> = new <RARE_TOKEN> ( config ) ; </a> 
<a> <RARE_TOKEN> . connect ( ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> , 0 ) ; </a> 
<a> String [ ] <RARE_TOKEN> = <RARE_TOKEN> . split ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> [ 0 ] , <RARE_TOKEN> [ 1 ] , <RARE_TOKEN> ( ) ) ; </a> 
<a> logger . info ( <RARE_TOKEN> <RARE_TOKEN> " + <RARE_TOKEN> ( ) ) ; </a> 
<a> channel = <RARE_TOKEN> . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( <RARE_TOKEN> ( ) , new <RARE_TOKEN> ( ) { </a> 
<a> public void <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> , <RARE_TOKEN> message ) { </a> 
<a> <RARE_TOKEN> ( message . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> logger . info ( <RARE_TOKEN> <RARE_TOKEN> " + <RARE_TOKEN> ( ) ) ; </a> 
<a> } catch ( Throwable t ) { </a> 
<a> throw new <RARE_TOKEN> ( t ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( String id ) { </a> 
<a> super . <RARE_TOKEN> ( id ) ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void destroy ( ) { </a> 
<a> super . destroy ( ) ; </a> 
<a> synchronized ( <RARE_TOKEN> ) { </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> . disconnect ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( Object message ) { </a> 
<a> if ( message instanceof String ) { </a> 
<a> try { </a> 
<a> channel . <RARE_TOKEN> ( message . toString ( ) ) ; </a> 
<a> } catch ( <RARE_TOKEN> e ) { </a> 
<a> logger . debug ( "failed to <RARE_TOKEN> message <RARE_TOKEN> <RARE_TOKEN> , e ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . annotation ; </a> 
<a> import org . atmosphere . cpr . <RARE_TOKEN> ; </a> 
<a> import java . lang . annotation . <RARE_TOKEN> ; </a> 
<a> import java . lang . annotation . <RARE_TOKEN> ; </a> 
<a> import java . lang . annotation . <RARE_TOKEN> ; </a> 
<a> import java . lang . annotation . <RARE_TOKEN> ; </a> 
<a> @ <RARE_TOKEN> ( { <RARE_TOKEN> . <RARE_TOKEN> } ) </a> 
<a> @ <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ) </a> 
<a> public @ interface Broadcast { </a> 
<a> public Class < ? extends <RARE_TOKEN> > [ ] value ( ) default { } ; </a> 
<a> public boolean resumeOnBroadcast ( ) default false ; </a> 
<a> public int delay ( ) default - 1 ; </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . annotation ; </a> 
<a> import java . lang . annotation . <RARE_TOKEN> ; </a> 
<a> import java . lang . annotation . <RARE_TOKEN> ; </a> 
<a> import java . lang . annotation . <RARE_TOKEN> ; </a> 
<a> import java . lang . annotation . <RARE_TOKEN> ; </a> 
<a> import java . lang . annotation . <RARE_TOKEN> ; </a> 
<a> @ <RARE_TOKEN> ( { <RARE_TOKEN> . <RARE_TOKEN> } ) </a> 
<a> @ <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ) </a> 
<a> @ <RARE_TOKEN> </a> 
<a> public @ interface <RARE_TOKEN> { </a> 
<a> int value ( ) default 1 ; </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . annotation ; </a> 
<a> import java . lang . annotation . <RARE_TOKEN> ; </a> 
<a> import java . lang . annotation . <RARE_TOKEN> ; </a> 
<a> import java . lang . annotation . <RARE_TOKEN> ; </a> 
<a> import java . lang . annotation . <RARE_TOKEN> ; </a> 
<a> @ <RARE_TOKEN> ( { <RARE_TOKEN> . <RARE_TOKEN> } ) </a> 
<a> @ <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ) </a> 
<a> public @ interface <RARE_TOKEN> { </a> 
<a> public int period ( ) default <RARE_TOKEN> ; </a> 
<a> public int <RARE_TOKEN> ( ) default 0 ; </a> 
<a> public boolean resumeOnBroadcast ( ) default false ; </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . annotation ; </a> 
<a> import org . atmosphere . cpr . AtmosphereResourceEventListener ; </a> 
<a> import java . lang . annotation . <RARE_TOKEN> ; </a> 
<a> import java . lang . annotation . <RARE_TOKEN> ; </a> 
<a> import java . lang . annotation . <RARE_TOKEN> ; </a> 
<a> import java . lang . annotation . <RARE_TOKEN> ; </a> 
<a> import java . lang . annotation . <RARE_TOKEN> ; </a> 
<a> @ <RARE_TOKEN> ( { <RARE_TOKEN> . <RARE_TOKEN> } ) </a> 
<a> @ <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ) </a> 
<a> @ <RARE_TOKEN> </a> 
<a> public @ interface <RARE_TOKEN> { </a> 
<a> String value ( ) ; </a> 
<a> public Class < ? extends AtmosphereResourceEventListener > [ ] listeners ( ) default { } ; </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . annotation ; </a> 
<a> import org . atmosphere . cpr . AtmosphereResourceEventListener ; </a> 
<a> import java . lang . annotation . <RARE_TOKEN> ; </a> 
<a> import java . lang . annotation . <RARE_TOKEN> ; </a> 
<a> import java . lang . annotation . <RARE_TOKEN> ; </a> 
<a> import java . lang . annotation . <RARE_TOKEN> ; </a> 
<a> import java . lang . annotation . <RARE_TOKEN> ; </a> 
<a> import java . util . concurrent . TimeUnit ; </a> 
<a> @ <RARE_TOKEN> ( { <RARE_TOKEN> . <RARE_TOKEN> } ) </a> 
<a> @ <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ) </a> 
<a> @ <RARE_TOKEN> </a> 
<a> public @ interface Suspend { </a> 
<a> int period ( ) default - 1 ; </a> 
<a> TimeUnit <RARE_TOKEN> ( ) default TimeUnit . MILLISECONDS ; </a> 
<a> enum SCOPE { </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> </a> 
<a> } </a> 
<a> SCOPE scope ( ) default SCOPE . <RARE_TOKEN> ; </a> 
<a> boolean outputComments ( ) default true ; </a> 
<a> public boolean resumeOnBroadcast ( ) default false ; </a> 
<a> public Class < ? extends AtmosphereResourceEventListener > [ ] listeners ( ) default { } ; </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . jboss . servlet . http ; </a> 
<a> import javax . servlet . <RARE_TOKEN> ; </a> 
<a> import javax . servlet . ServletException ; </a> 
<a> import java . io . IOException ; </a> 
<a> public interface <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> public void event ( <RARE_TOKEN> event ) </a> 
<a> throws IOException , ServletException ; </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . <RARE_TOKEN> . jetty . websocket ; </a> 
<a> import java . io . IOException ; </a> 
<a> public interface WebSocket { </a> 
<a> public final byte <RARE_TOKEN> = ( byte ) <RARE_TOKEN> ; </a> 
<a> public final byte <RARE_TOKEN> = ( byte ) 0x00 ; </a> 
<a> void <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> void <RARE_TOKEN> ( byte frame , String data ) ; </a> 
<a> void <RARE_TOKEN> ( byte frame , byte [ ] data , int offset , int length ) ; </a> 
<a> void <RARE_TOKEN> ( boolean <RARE_TOKEN> , byte <RARE_TOKEN> , byte [ ] data , int offset , int length ) ; </a> 
<a> void <RARE_TOKEN> ( ) ; </a> 
<a> public interface <RARE_TOKEN> { </a> 
<a> void <RARE_TOKEN> ( byte frame , String data ) throws IOException ; </a> 
<a> void <RARE_TOKEN> ( byte frame , byte [ ] data ) throws IOException ; </a> 
<a> void <RARE_TOKEN> ( byte frame , byte [ ] data , int offset , int length ) throws IOException ; </a> 
<a> void disconnect ( ) ; </a> 
<a> boolean isOpen ( ) ; </a> 
<a> } </a> 
<a> void <RARE_TOKEN> ( <RARE_TOKEN> connection ) ; </a> 
<a> void <RARE_TOKEN> ( int <RARE_TOKEN> , String message ) ; </a> 
<a> interface <RARE_TOKEN> extends WebSocket { </a> 
<a> void <RARE_TOKEN> ( String data ) ; </a> 
<a> } </a> 
<a> interface <RARE_TOKEN> extends WebSocket { </a> 
<a> void <RARE_TOKEN> ( byte [ ] data , int offset , int length ) ; </a> 
<a> } </a> 
<a> interface <RARE_TOKEN> extends WebSocket { </a> 
<a> boolean <RARE_TOKEN> ( byte <RARE_TOKEN> , byte [ ] data , int offset , int length ) ; </a> 
<a> } </a> 
<a> interface <RARE_TOKEN> extends WebSocket { </a> 
<a> boolean <RARE_TOKEN> ( byte <RARE_TOKEN> , byte <RARE_TOKEN> , byte [ ] data , int offset , int length ) ; </a> 
<a> void <RARE_TOKEN> ( <RARE_TOKEN> connection ) ; </a> 
<a> } </a> 
<a> public interface <RARE_TOKEN> { </a> 
<a> String <RARE_TOKEN> ( ) ; </a> 
<a> void <RARE_TOKEN> ( String data ) throws IOException ; </a> 
<a> void <RARE_TOKEN> ( byte [ ] data , int offset , int length ) throws IOException ; </a> 
<a> void disconnect ( ) ; </a> 
<a> boolean isOpen ( ) ; </a> 
<a> void <RARE_TOKEN> ( int size ) ; </a> 
<a> void <RARE_TOKEN> ( int size ) ; </a> 
<a> int <RARE_TOKEN> ( ) ; </a> 
<a> int <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> public interface <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> boolean <RARE_TOKEN> ( byte <RARE_TOKEN> ) ; </a> 
<a> void close ( int <RARE_TOKEN> , String message ) ; </a> 
<a> byte <RARE_TOKEN> ( ) ; </a> 
<a> byte <RARE_TOKEN> ( ) ; </a> 
<a> byte <RARE_TOKEN> ( ) ; </a> 
<a> byte <RARE_TOKEN> ( ) ; </a> 
<a> boolean <RARE_TOKEN> ( byte <RARE_TOKEN> ) ; </a> 
<a> boolean <RARE_TOKEN> ( byte <RARE_TOKEN> ) ; </a> 
<a> boolean <RARE_TOKEN> ( byte <RARE_TOKEN> ) ; </a> 
<a> boolean <RARE_TOKEN> ( byte <RARE_TOKEN> ) ; </a> 
<a> boolean <RARE_TOKEN> ( byte <RARE_TOKEN> ) ; </a> 
<a> boolean <RARE_TOKEN> ( byte <RARE_TOKEN> ) ; </a> 
<a> boolean <RARE_TOKEN> ( byte <RARE_TOKEN> ) ; </a> 
<a> void <RARE_TOKEN> ( byte <RARE_TOKEN> , byte [ ] data , int offset , int length ) throws IOException ; </a> 
<a> void <RARE_TOKEN> ( byte <RARE_TOKEN> , byte <RARE_TOKEN> , byte [ ] data , int offset , int length ) throws IOException ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . <RARE_TOKEN> . jetty . websocket ; </a> 
<a> import org . <RARE_TOKEN> . jetty . util . log . Log ; </a> 
<a> import org . <RARE_TOKEN> . jetty . util . log . Logger ; </a> 
<a> import javax . servlet . http . HttpServletRequest ; </a> 
<a> import javax . servlet . http . HttpServletResponse ; </a> 
<a> import java . io . IOException ; </a> 
<a> import java . util . HashMap ; </a> 
<a> import java . util . List ; </a> 
<a> import java . util . Map ; </a> 
<a> public class <RARE_TOKEN> { </a> 
<a> private static final Logger <RARE_TOKEN> = Log . getLogger ( <RARE_TOKEN> . class ) ; </a> 
<a> public interface <RARE_TOKEN> { </a> 
<a> WebSocket <RARE_TOKEN> ( HttpServletRequest request , String <RARE_TOKEN> ) ; </a> 
<a> boolean <RARE_TOKEN> ( HttpServletRequest request , String <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> private final Map < String , Class < ? extends <RARE_TOKEN> > > <RARE_TOKEN> = new HashMap < String , Class < ? extends <RARE_TOKEN> > > ( ) ; </a> 
<a> { </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> , int <RARE_TOKEN> ) { </a> 
<a> } </a> 
<a> public Map < String , Class < ? extends <RARE_TOKEN> > > <RARE_TOKEN> ( ) { </a> 
<a> throw new UnsupportedOperationException ( <RARE_TOKEN> remove the <RARE_TOKEN> from <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public long <RARE_TOKEN> ( ) { </a> 
<a> throw new UnsupportedOperationException ( <RARE_TOKEN> remove the <RARE_TOKEN> from <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( int <RARE_TOKEN> ) { </a> 
<a> throw new UnsupportedOperationException ( <RARE_TOKEN> remove the <RARE_TOKEN> from <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public int <RARE_TOKEN> ( ) { </a> 
<a> throw new UnsupportedOperationException ( <RARE_TOKEN> remove the <RARE_TOKEN> from <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( int <RARE_TOKEN> ) { </a> 
<a> throw new UnsupportedOperationException ( <RARE_TOKEN> remove the <RARE_TOKEN> from <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public int <RARE_TOKEN> ( ) { </a> 
<a> throw new UnsupportedOperationException ( <RARE_TOKEN> remove the <RARE_TOKEN> from <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( int <RARE_TOKEN> ) { </a> 
<a> throw new UnsupportedOperationException ( <RARE_TOKEN> remove the <RARE_TOKEN> from <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public int <RARE_TOKEN> ( ) { </a> 
<a> throw new UnsupportedOperationException ( <RARE_TOKEN> remove the <RARE_TOKEN> from <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( int <RARE_TOKEN> ) { </a> 
<a> throw new UnsupportedOperationException ( <RARE_TOKEN> remove the <RARE_TOKEN> from <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( HttpServletRequest request , HttpServletResponse response , WebSocket websocket , String <RARE_TOKEN> ) </a> 
<a> throws IOException { </a> 
<a> throw new UnsupportedOperationException ( <RARE_TOKEN> remove the <RARE_TOKEN> from <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> protected String [ ] <RARE_TOKEN> ( String <RARE_TOKEN> ) { </a> 
<a> throw new UnsupportedOperationException ( <RARE_TOKEN> remove the <RARE_TOKEN> from <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public boolean <RARE_TOKEN> ( HttpServletRequest request , HttpServletResponse response ) </a> 
<a> throws IOException { </a> 
<a> throw new UnsupportedOperationException ( <RARE_TOKEN> remove the <RARE_TOKEN> from <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public List < <RARE_TOKEN> > <RARE_TOKEN> ( List < String > <RARE_TOKEN> , int <RARE_TOKEN> , int <RARE_TOKEN> , int <RARE_TOKEN> ) { </a> 
<a> throw new UnsupportedOperationException ( <RARE_TOKEN> remove the <RARE_TOKEN> from <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> ( String name ) { </a> 
<a> throw new UnsupportedOperationException ( <RARE_TOKEN> remove the <RARE_TOKEN> from <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . <RARE_TOKEN> . jetty . websocket ; </a> 
<a> import javax . servlet . http . <RARE_TOKEN> ; </a> 
<a> public abstract class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . apache . <RARE_TOKEN> ; </a> 
<a> import javax . servlet . ServletException ; </a> 
<a> import javax . servlet . http . HttpServletRequest ; </a> 
<a> import javax . servlet . http . HttpServletResponse ; </a> 
<a> import java . io . IOException ; </a> 
<a> public interface <RARE_TOKEN> { </a> 
<a> public enum <RARE_TOKEN> { </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> </a> 
<a> } </a> 
<a> public enum <RARE_TOKEN> { </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> </a> 
<a> } </a> 
<a> public HttpServletRequest <RARE_TOKEN> ( ) ; </a> 
<a> public HttpServletResponse <RARE_TOKEN> ( ) ; </a> 
<a> public <RARE_TOKEN> <RARE_TOKEN> ( ) ; </a> 
<a> public <RARE_TOKEN> <RARE_TOKEN> ( ) ; </a> 
<a> public void close ( ) throws IOException ; </a> 
<a> public void <RARE_TOKEN> ( int timeout ) </a> 
<a> throws IOException , ServletException , UnsupportedOperationException ; </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . apache . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import javax . servlet . ServletException ; </a> 
<a> import javax . servlet . http . HttpServletRequest ; </a> 
<a> import javax . servlet . http . HttpServletResponse ; </a> 
<a> import java . io . IOException ; </a> 
<a> public interface <RARE_TOKEN> { </a> 
<a> public enum <RARE_TOKEN> { </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> </a> 
<a> } </a> 
<a> public enum <RARE_TOKEN> { </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> </a> 
<a> } </a> 
<a> public HttpServletRequest <RARE_TOKEN> ( ) ; </a> 
<a> public HttpServletResponse <RARE_TOKEN> ( ) ; </a> 
<a> public <RARE_TOKEN> <RARE_TOKEN> ( ) ; </a> 
<a> public <RARE_TOKEN> <RARE_TOKEN> ( ) ; </a> 
<a> public void close ( ) throws IOException ; </a> 
<a> public void <RARE_TOKEN> ( int timeout ) </a> 
<a> throws IOException , ServletException , UnsupportedOperationException ; </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . apache . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import javax . servlet . <RARE_TOKEN> ; </a> 
<a> import javax . servlet . ServletException ; </a> 
<a> import java . io . IOException ; </a> 
<a> public interface <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> public void event ( <RARE_TOKEN> event ) </a> 
<a> throws IOException , ServletException ; </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package <RARE_TOKEN> . servlet . http ; </a> 
<a> import org . <RARE_TOKEN> . jetty . websocket . <RARE_TOKEN> ; </a> 
<a> import javax . servlet . ServletException ; </a> 
<a> import java . io . IOException ; </a> 
<a> public abstract class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> protected abstract boolean <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> ) </a> 
<a> throws IOException , ServletException ; </a> 
<a> protected abstract void <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> , Object o ) </a> 
<a> throws IOException , ServletException ; </a> 
<a> protected abstract void <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> ) </a> 
<a> throws IOException , ServletException ; </a> 
<a> public final static void <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> , Object context ) throws IOException { </a> 
<a> return ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . cache ; </a> 
<a> import org . atmosphere . cpr . AtmosphereResource ; </a> 
<a> import org . atmosphere . cpr . AtmosphereResourceImpl ; </a> 
<a> import org . atmosphere . cpr . <RARE_TOKEN> ; </a> 
<a> import org . slf4j . Logger ; </a> 
<a> import org . slf4j . LoggerFactory ; </a> 
<a> import javax . servlet . http . HttpServletRequest ; </a> 
<a> import javax . servlet . http . HttpServletResponse ; </a> 
<a> import java . io . Serializable ; </a> 
<a> import java . util . ArrayList ; </a> 
<a> import java . util . Iterator ; </a> 
<a> import java . util . List ; </a> 
<a> import java . util . concurrent . <RARE_TOKEN> ; </a> 
<a> import java . util . concurrent . <RARE_TOKEN> ; </a> 
<a> import java . util . concurrent . <RARE_TOKEN> ; </a> 
<a> import java . util . concurrent . TimeUnit ; </a> 
<a> public abstract class <RARE_TOKEN> implements <RARE_TOKEN> < HttpServletRequest , HttpServletResponse > { </a> 
<a> private static final Logger logger = LoggerFactory . getLogger ( <RARE_TOKEN> . class ) ; </a> 
<a> protected final List < <RARE_TOKEN> > queue = new <RARE_TOKEN> < <RARE_TOKEN> > ( ) ; </a> 
<a> protected final <RARE_TOKEN> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> protected int <RARE_TOKEN> = 1000 * 5 * <RARE_TOKEN> ; </a> 
<a> public <RARE_TOKEN> ( ) { </a> 
<a> } </a> 
<a> public final void start ( ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( new Runnable ( ) { </a> 
<a> public void run ( ) { </a> 
<a> Iterator < <RARE_TOKEN> > i = queue . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> message ; </a> 
<a> while ( i . <RARE_TOKEN> ( ) ) { </a> 
<a> message = i . next ( ) ; </a> 
<a> logger . debug ( <RARE_TOKEN> {}" , message . message ( ) ) ; </a> 
<a> if ( System . currentTimeMillis ( ) - message . currentTime ( ) > <RARE_TOKEN> ) { </a> 
<a> logger . debug ( <RARE_TOKEN> {}" , message . message ( ) ) ; </a> 
<a> queue . remove ( message ) ; </a> 
<a> } else { </a> 
<a> break ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } , 0 , <RARE_TOKEN> , TimeUnit . SECONDS ) ; </a> 
<a> } </a> 
<a> public final void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> . shutdown ( ) ; </a> 
<a> } </a> 
<a> public final synchronized void <RARE_TOKEN> ( </a> 
<a> final AtmosphereResource < HttpServletRequest , HttpServletResponse > resource , final Object object ) { </a> 
<a> logger . debug ( <RARE_TOKEN> message for <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> {}" , resource , object ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( object , System . currentTimeMillis ( ) , null ) ; </a> 
<a> <RARE_TOKEN> prev = null ; </a> 
<a> if ( ! queue . isEmpty ( ) ) { </a> 
<a> prev = queue . get ( queue . size ( ) - 1 ) ; </a> 
<a> } </a> 
<a> if ( prev != null ) { </a> 
<a> prev . next ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( ! queue . contains ( <RARE_TOKEN> ) ) { </a> 
<a> queue . add ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( prev == null ) { </a> 
<a> <RARE_TOKEN> = new <RARE_TOKEN> ( true ) ; </a> 
<a> } </a> 
<a> if ( resource != null ) { </a> 
<a> cache ( resource , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public abstract void cache ( final AtmosphereResource < HttpServletRequest , HttpServletResponse > r , <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> public abstract <RARE_TOKEN> <RARE_TOKEN> ( final AtmosphereResource < HttpServletRequest , HttpServletResponse > r ) ; </a> 
<a> public final synchronized List < Object > <RARE_TOKEN> ( final AtmosphereResource < HttpServletRequest , HttpServletResponse > r ) { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = <RARE_TOKEN> ( r ) ; </a> 
<a> boolean <RARE_TOKEN> = false ; </a> 
<a> if ( <RARE_TOKEN> == null && r . getRequest ( ) . getAttribute ( AtmosphereResourceImpl . <RARE_TOKEN> ) != null ) { </a> 
<a> <RARE_TOKEN> = true ; </a> 
<a> } </a> 
<a> boolean <RARE_TOKEN> = false ; </a> 
<a> if ( <RARE_TOKEN> != null && <RARE_TOKEN> . <RARE_TOKEN> ) <RARE_TOKEN> = null ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> if ( ! queue . contains ( <RARE_TOKEN> ) && ! queue . isEmpty ( ) ) { </a> 
<a> <RARE_TOKEN> = queue . get ( 0 ) ; </a> 
<a> <RARE_TOKEN> = true ; </a> 
<a> } </a> 
<a> } else if ( <RARE_TOKEN> && ! queue . isEmpty ( ) ) { </a> 
<a> <RARE_TOKEN> = queue . get ( 0 ) ; </a> 
<a> <RARE_TOKEN> = true ; </a> 
<a> } </a> 
<a> final ArrayList < Object > l = new ArrayList < Object > ( ) ; </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> return l ; </a> 
<a> } </a> 
<a> if ( ! <RARE_TOKEN> ) </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . next ( ) ; </a> 
<a> <RARE_TOKEN> prev = <RARE_TOKEN> ; </a> 
<a> while ( <RARE_TOKEN> != null ) { </a> 
<a> l . add ( <RARE_TOKEN> . message ( ) ) ; </a> 
<a> prev = <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . next ( ) ; </a> 
<a> } </a> 
<a> if ( prev != null ) </a> 
<a> cache ( r , prev ) ; </a> 
<a> return l ; </a> 
<a> } </a> 
<a> public int <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( final int <RARE_TOKEN> ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> protected static class <RARE_TOKEN> implements Serializable { </a> 
<a> public final Object message ; </a> 
<a> public final long currentTime ; </a> 
<a> public <RARE_TOKEN> next ; </a> 
<a> public final boolean <RARE_TOKEN> ; </a> 
<a> public <RARE_TOKEN> ( boolean <RARE_TOKEN> ) { </a> 
<a> this . currentTime = <RARE_TOKEN> ; </a> 
<a> this . message = null ; </a> 
<a> this . next = null ; </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( Object message , long currentTime , <RARE_TOKEN> next ) { </a> 
<a> this . currentTime = currentTime ; </a> 
<a> this . message = message ; </a> 
<a> this . next = next ; </a> 
<a> this . <RARE_TOKEN> = false ; </a> 
<a> } </a> 
<a> public Object message ( ) { </a> 
<a> return message ; </a> 
<a> } </a> 
<a> public long currentTime ( ) { </a> 
<a> return currentTime ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> next ( ) { </a> 
<a> return next ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> next ( <RARE_TOKEN> next ) { </a> 
<a> this . next = next ; </a> 
<a> return next ; </a> 
<a> } </a> 
<a> public String toString ( ) { </a> 
<a> if ( message != null ) { </a> 
<a> return message . toString ( ) ; </a> 
<a> } else { </a> 
<a> return "" ; </a> 
<a> } </a> 
<a> } </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . cache ; </a> 
<a> import org . atmosphere . cpr . AtmosphereResource ; </a> 
<a> import javax . servlet . http . HttpServletRequest ; </a> 
<a> import javax . servlet . http . HttpServletResponse ; </a> 
<a> import javax . servlet . http . <RARE_TOKEN> ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> public <RARE_TOKEN> ( ) { </a> 
<a> } </a> 
<a> public void cache ( final AtmosphereResource < HttpServletRequest , HttpServletResponse > r , <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> r . getRequest ( ) . getSession ( true ) . setAttribute ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> <RARE_TOKEN> ( final AtmosphereResource < HttpServletRequest , HttpServletResponse > r ) { </a> 
<a> <RARE_TOKEN> session = r . getRequest ( ) . getSession ( false ) ; </a> 
<a> if ( session == null ) { </a> 
<a> session = r . getRequest ( ) . getSession ( true ) ; </a> 
<a> } </a> 
<a> return ( <RARE_TOKEN> ) session . getAttribute ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . client ; </a> 
<a> import org . atmosphere . cpr . <RARE_TOKEN> ; </a> 
<a> import javax . servlet . http . HttpServletRequest ; </a> 
<a> import javax . servlet . http . HttpServletResponse ; </a> 
<a> import java . util . concurrent . atomic . AtomicInteger ; </a> 
<a> import static org . atmosphere . cpr . HeaderConfig . <RARE_TOKEN> ; </a> 
<a> import static org . atmosphere . cpr . HeaderConfig . <RARE_TOKEN> ; </a> 
<a> public class <RARE_TOKEN> implements <RARE_TOKEN> { </a> 
<a> private final AtomicInteger <RARE_TOKEN> = new AtomicInteger ( ) ; </a> 
<a> @ Override </a> 
<a> public BroadcastAction filter ( Object <RARE_TOKEN> , Object message ) { </a> 
<a> return new BroadcastAction ( BroadcastAction . <RARE_TOKEN> . <RARE_TOKEN> , message ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public BroadcastAction filter ( HttpServletRequest request , HttpServletResponse response , Object message ) { </a> 
<a> String <RARE_TOKEN> = request . getHeader ( <RARE_TOKEN> ) == null ? "" : request . getHeader ( <RARE_TOKEN> ) . <RARE_TOKEN> ( ) ; </a> 
<a> String transport = request . getHeader ( <RARE_TOKEN> ) == null ? <RARE_TOKEN> : request . getHeader ( <RARE_TOKEN> ) . toString ( ) ; </a> 
<a> if ( transport . equals ( <RARE_TOKEN> ) && <RARE_TOKEN> . startsWith ( <RARE_TOKEN> ) ) { </a> 
<a> StringBuilder sb = new StringBuilder ( <RARE_TOKEN> <RARE_TOKEN> ) </a> 
<a> . append ( <RARE_TOKEN> . <RARE_TOKEN> ( ) ) </a> 
<a> . append ( <RARE_TOKEN> ) </a> 
<a> . append ( <RARE_TOKEN> ) </a> 
<a> . append ( <RARE_TOKEN> ) </a> 
<a> . append ( message . toString ( ) ) </a> 
<a> . append ( <RARE_TOKEN> ) ; </a> 
<a> message = sb . toString ( ) ; </a> 
<a> return new BroadcastAction ( BroadcastAction . <RARE_TOKEN> . <RARE_TOKEN> , message ) ; </a> 
<a> } </a> 
<a> return new BroadcastAction ( BroadcastAction . <RARE_TOKEN> . <RARE_TOKEN> , message ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . container ; </a> 
<a> import com . sun . <RARE_TOKEN> . <RARE_TOKEN> . Request ; </a> 
<a> import com . sun . <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import com . sun . <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import com . sun . <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import com . sun . <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . cpr . AtmosphereServlet ; </a> 
<a> import org . atmosphere . cpr . AtmosphereServlet . Action ; </a> 
<a> import org . atmosphere . cpr . AtmosphereServlet . AtmosphereConfig ; </a> 
<a> import org . atmosphere . websocket . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . websocket . WebSocket ; </a> 
<a> import org . slf4j . Logger ; </a> 
<a> import org . slf4j . LoggerFactory ; </a> 
<a> import javax . servlet . ServletConfig ; </a> 
<a> import javax . servlet . ServletException ; </a> 
<a> import javax . servlet . http . HttpServletRequest ; </a> 
<a> import javax . servlet . http . <RARE_TOKEN> ; </a> 
<a> import javax . servlet . http . HttpServletResponse ; </a> 
<a> import java . io . IOException ; </a> 
<a> import static org . atmosphere . cpr . HeaderConfig . <RARE_TOKEN> ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> private static final Logger logger = LoggerFactory . getLogger ( <RARE_TOKEN> . class ) ; </a> 
<a> public <RARE_TOKEN> ( AtmosphereConfig config ) { </a> 
<a> super ( config ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void init ( ServletConfig sc ) throws ServletException { </a> 
<a> super . init ( sc ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( sc . getServletContext ( ) . <RARE_TOKEN> ( ) , new <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public Action service ( HttpServletRequest request , HttpServletResponse response ) </a> 
<a> throws IOException , ServletException { </a> 
<a> boolean <RARE_TOKEN> = false ; </a> 
<a> if ( request . getHeaders ( <RARE_TOKEN> ) != null && request . getHeaders ( <RARE_TOKEN> ) . <RARE_TOKEN> ( ) ) { </a> 
<a> String [ ] e = request . getHeaders ( <RARE_TOKEN> ) . <RARE_TOKEN> ( ) . split ( <RARE_TOKEN> ) ; </a> 
<a> for ( String <RARE_TOKEN> : e ) { </a> 
<a> if ( <RARE_TOKEN> . equalsIgnoreCase ( <RARE_TOKEN> ) ) { </a> 
<a> <RARE_TOKEN> = true ; </a> 
<a> break ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> if ( ! <RARE_TOKEN> ) { </a> 
<a> return super . service ( request , response ) ; </a> 
<a> } else { </a> 
<a> Action action = suspended ( request , response ) ; </a> 
<a> if ( action . type == Action . TYPE . <RARE_TOKEN> ) { </a> 
<a> logger . debug ( <RARE_TOKEN> response: {}" , response ) ; </a> 
<a> } else if ( action . type == Action . TYPE . <RARE_TOKEN> ) { </a> 
<a> logger . debug ( <RARE_TOKEN> response: {}" , response ) ; </a> 
<a> } </a> 
<a> return action ; </a> 
<a> } </a> 
<a> } </a> 
<a> public String <RARE_TOKEN> ( ) { </a> 
<a> return config . <RARE_TOKEN> ( ) . getServletContext ( ) . <RARE_TOKEN> ( ) + " <RARE_TOKEN> WebSocket <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> private <RARE_TOKEN> webSocketProcessor ; </a> 
<a> public void <RARE_TOKEN> ( com . sun . <RARE_TOKEN> . <RARE_TOKEN> . WebSocket w ) { </a> 
<a> if ( ! <RARE_TOKEN> . class . isAssignableFrom ( w . getClass ( ) ) ) { </a> 
<a> throw new IllegalStateException ( ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = <RARE_TOKEN> . class . cast ( w ) ; </a> 
<a> try { </a> 
<a> webSocketProcessor = ( <RARE_TOKEN> ) <RARE_TOKEN> . class . <RARE_TOKEN> ( ) </a> 
<a> . <RARE_TOKEN> ( config . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( ) ) </a> 
<a> . <RARE_TOKEN> ( new Class [ ] { AtmosphereServlet . class , WebSocket . class } ) </a> 
<a> . newInstance ( new Object [ ] { config . <RARE_TOKEN> ( ) , new <RARE_TOKEN> ( <RARE_TOKEN> ) } ) ; </a> 
<a> webSocketProcessor . <RARE_TOKEN> ( new <RARE_TOKEN> ( <RARE_TOKEN> . getRequest ( ) ) ) ; </a> 
<a> } catch ( Exception e ) { </a> 
<a> logger . warn ( "failed to connect to <RARE_TOKEN> <RARE_TOKEN> , e ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( Request request ) { </a> 
<a> return true ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( com . sun . <RARE_TOKEN> . <RARE_TOKEN> . WebSocket <RARE_TOKEN> , <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> webSocketProcessor . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( com . sun . <RARE_TOKEN> . <RARE_TOKEN> . WebSocket <RARE_TOKEN> ) { </a> 
<a> webSocketProcessor . close ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return true ; </a> 
<a> } </a> 
<a> public class <RARE_TOKEN> implements WebSocket { </a> 
<a> private final com . sun . <RARE_TOKEN> . <RARE_TOKEN> . WebSocket <RARE_TOKEN> ; </a> 
<a> public <RARE_TOKEN> ( com . sun . <RARE_TOKEN> . <RARE_TOKEN> . WebSocket <RARE_TOKEN> ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( int errorCode , String message ) throws IOException { </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( String location ) throws IOException { </a> 
<a> } </a> 
<a> public void write ( byte frame , String data ) throws IOException { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( data ) ; </a> 
<a> } </a> 
<a> public void write ( byte frame , byte [ ] data ) throws IOException { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( new String ( data ) ) ; </a> 
<a> } </a> 
<a> public void write ( byte frame , byte [ ] data , int offset , int length ) throws IOException { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( new String ( data , offset , length ) ) ; </a> 
<a> } </a> 
<a> public void close ( ) throws IOException { </a> 
<a> <RARE_TOKEN> . close ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . container ; </a> 
<a> import com . sun . <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import com . sun . <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import com . sun . <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import com . sun . <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . cpr . ApplicationConfig ; </a> 
<a> import org . atmosphere . cpr . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . cpr . AtmosphereResource ; </a> 
<a> import org . atmosphere . cpr . AtmosphereResourceImpl ; </a> 
<a> import org . atmosphere . cpr . AtmosphereServlet . Action ; </a> 
<a> import org . atmosphere . cpr . AtmosphereServlet . AtmosphereConfig ; </a> 
<a> import org . slf4j . Logger ; </a> 
<a> import org . slf4j . LoggerFactory ; </a> 
<a> import javax . servlet . ServletConfig ; </a> 
<a> import javax . servlet . <RARE_TOKEN> ; </a> 
<a> import javax . servlet . ServletException ; </a> 
<a> import javax . servlet . http . HttpServletRequest ; </a> 
<a> import javax . servlet . http . HttpServletResponse ; </a> 
<a> import java . io . IOException ; </a> 
<a> import static org . atmosphere . cpr . ApplicationConfig . <RARE_TOKEN> ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> private static final Logger logger = LoggerFactory . getLogger ( <RARE_TOKEN> . class ) ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private String <RARE_TOKEN> = "" ; </a> 
<a> public <RARE_TOKEN> ( AtmosphereConfig config ) { </a> 
<a> super ( config ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void init ( ServletConfig sc ) throws ServletException { </a> 
<a> super . init ( sc ) ; </a> 
<a> <RARE_TOKEN> = sc . getServletContext ( ) . <RARE_TOKEN> ( ) + <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> context = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> context . <RARE_TOKEN> ( - 1 ) ; </a> 
<a> logger . debug ( <RARE_TOKEN> <RARE_TOKEN> for atmosphere <RARE_TOKEN> {}" , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public Action service ( HttpServletRequest req , HttpServletResponse res ) </a> 
<a> throws IOException , ServletException { </a> 
<a> <RARE_TOKEN> ctx = <RARE_TOKEN> . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> Action action = suspended ( req , res ) ; </a> 
<a> if ( action . type == Action . TYPE . <RARE_TOKEN> ) { </a> 
<a> logger . debug ( <RARE_TOKEN> response: {}" , res ) ; </a> 
<a> suspend ( ctx , action , req , res ) ; </a> 
<a> } else if ( action . type == Action . TYPE . <RARE_TOKEN> ) { </a> 
<a> logger . debug ( <RARE_TOKEN> response: {}" , res ) ; </a> 
<a> resume ( req , ctx ) ; </a> 
<a> } </a> 
<a> return action ; </a> 
<a> } </a> 
<a> private void suspend ( <RARE_TOKEN> ctx , Action action , HttpServletRequest req , </a> 
<a> HttpServletResponse res ) { </a> 
<a> <RARE_TOKEN> c = new <RARE_TOKEN> ( req , res ) ; </a> 
<a> ctx . <RARE_TOKEN> ( action . timeout ) ; </a> 
<a> ctx . <RARE_TOKEN> ( c ) ; </a> 
<a> ctx . <RARE_TOKEN> ( <RARE_TOKEN> , System . currentTimeMillis ( ) ) ; </a> 
<a> req . setAttribute ( <RARE_TOKEN> , c . hashCode ( ) ) ; </a> 
<a> if ( <RARE_TOKEN> ( ) ) { </a> 
<a> req . getSession ( ) . setAttribute ( <RARE_TOKEN> , c . hashCode ( ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private void resume ( HttpServletRequest req , <RARE_TOKEN> ctx ) { </a> 
<a> if ( req . getAttribute ( <RARE_TOKEN> ) == null ) { </a> 
<a> return ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> handler = ctx . <RARE_TOKEN> ( ( Integer ) req . getAttribute ( <RARE_TOKEN> ) ) ; </a> 
<a> req . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> if ( handler == null && <RARE_TOKEN> ( ) && req . getSession ( false ) != null ) { </a> 
<a> handler = ctx . <RARE_TOKEN> ( ( Integer ) req . getSession ( false ) . getAttribute ( <RARE_TOKEN> ) ) ; </a> 
<a> req . getSession ( ) . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( handler != null && ( config . getInitParameter ( ApplicationConfig . <RARE_TOKEN> ) == null </a> 
<a> || config . getInitParameter ( ApplicationConfig . <RARE_TOKEN> ) . equalsIgnoreCase ( <RARE_TOKEN> ) ) ) { </a> 
<a> ctx . <RARE_TOKEN> ( handler ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void action ( AtmosphereResourceImpl <RARE_TOKEN> ) { </a> 
<a> super . action ( <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> . action ( ) . type == Action . TYPE . <RARE_TOKEN> && <RARE_TOKEN> . <RARE_TOKEN> ( ) ) { </a> 
<a> <RARE_TOKEN> ctx = <RARE_TOKEN> . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> resume ( <RARE_TOKEN> . getRequest ( ) , ctx ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public Action <RARE_TOKEN> ( HttpServletRequest req , HttpServletResponse res ) </a> 
<a> throws IOException , ServletException { </a> 
<a> Action action = super . <RARE_TOKEN> ( req , res ) ; </a> 
<a> if ( req . getAttribute ( <RARE_TOKEN> ) != null && Long . class . cast ( req . getAttribute ( <RARE_TOKEN> ) ) == - 1 ) { </a> 
<a> resume ( req , <RARE_TOKEN> . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> return action ; </a> 
<a> } </a> 
<a> private class <RARE_TOKEN> implements <RARE_TOKEN> { </a> 
<a> private final HttpServletRequest req ; </a> 
<a> private final HttpServletResponse res ; </a> 
<a> private <RARE_TOKEN> ( HttpServletRequest req , HttpServletResponse res ) { </a> 
<a> this . req = req ; </a> 
<a> this . res = res ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( Object o ) { </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> ) throws IOException { </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> ) throws IOException { </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> ) throws IOException { </a> 
<a> } </a> 
<a> public synchronized void <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> ) throws IOException { </a> 
<a> long <RARE_TOKEN> = ( Long ) <RARE_TOKEN> . <RARE_TOKEN> ( ) . getAttribute ( <RARE_TOKEN> ) ; </a> 
<a> try { </a> 
<a> if ( <RARE_TOKEN> . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( ) > 0 </a> 
<a> && ( System . currentTimeMillis ( ) - <RARE_TOKEN> ) >= <RARE_TOKEN> . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( ) ) { </a> 
<a> <RARE_TOKEN> ( req , res ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> ( req , res ) ; </a> 
<a> } </a> 
<a> } catch ( ServletException ex ) { </a> 
<a> logger . warn ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> , ex ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . container ; </a> 
<a> import com . sun . <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import com . sun . <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import com . sun . <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import com . sun . <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . cpr . ApplicationConfig ; </a> 
<a> import org . atmosphere . cpr . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . cpr . AtmosphereResourceImpl ; </a> 
<a> import org . atmosphere . cpr . AtmosphereServlet . Action ; </a> 
<a> import org . atmosphere . cpr . AtmosphereServlet . AtmosphereConfig ; </a> 
<a> import org . slf4j . Logger ; </a> 
<a> import org . slf4j . LoggerFactory ; </a> 
<a> import javax . servlet . ServletConfig ; </a> 
<a> import javax . servlet . <RARE_TOKEN> ; </a> 
<a> import javax . servlet . ServletException ; </a> 
<a> import javax . servlet . http . HttpServletRequest ; </a> 
<a> import javax . servlet . http . HttpServletResponse ; </a> 
<a> import java . io . IOException ; </a> 
<a> import static org . atmosphere . cpr . ApplicationConfig . <RARE_TOKEN> ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> private static final Logger logger = LoggerFactory . getLogger ( <RARE_TOKEN> . class ) ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private String <RARE_TOKEN> = "" ; </a> 
<a> public <RARE_TOKEN> ( AtmosphereConfig config ) { </a> 
<a> super ( config ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void init ( ServletConfig sc ) throws ServletException { </a> 
<a> super . init ( sc ) ; </a> 
<a> <RARE_TOKEN> = sc . getServletContext ( ) . <RARE_TOKEN> ( ) + <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> context = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> context . <RARE_TOKEN> ( - 1 ) ; </a> 
<a> logger . debug ( <RARE_TOKEN> <RARE_TOKEN> for atmosphere <RARE_TOKEN> {}" , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public Action service ( HttpServletRequest req , HttpServletResponse res ) </a> 
<a> throws IOException , ServletException { </a> 
<a> <RARE_TOKEN> ctx = <RARE_TOKEN> . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> Action action = suspended ( req , res ) ; </a> 
<a> if ( action . type == Action . TYPE . <RARE_TOKEN> ) { </a> 
<a> logger . debug ( <RARE_TOKEN> response: {}" , res ) ; </a> 
<a> suspend ( ctx , action , req , res ) ; </a> 
<a> } else if ( action . type == Action . TYPE . <RARE_TOKEN> ) { </a> 
<a> logger . debug ( <RARE_TOKEN> response: {}" , res ) ; </a> 
<a> resume ( req , ctx ) ; </a> 
<a> } </a> 
<a> return action ; </a> 
<a> } </a> 
<a> private void suspend ( <RARE_TOKEN> ctx , Action action , HttpServletRequest req , </a> 
<a> HttpServletResponse res ) { </a> 
<a> <RARE_TOKEN> c = new <RARE_TOKEN> ( req , res ) ; </a> 
<a> ctx . <RARE_TOKEN> ( action . timeout ) ; </a> 
<a> ctx . <RARE_TOKEN> ( c ) ; </a> 
<a> req . setAttribute ( <RARE_TOKEN> , c . hashCode ( ) ) ; </a> 
<a> ctx . <RARE_TOKEN> ( <RARE_TOKEN> , System . currentTimeMillis ( ) ) ; </a> 
<a> if ( <RARE_TOKEN> ( ) ) { </a> 
<a> req . getSession ( ) . setAttribute ( <RARE_TOKEN> , c . hashCode ( ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private void resume ( HttpServletRequest req , <RARE_TOKEN> ctx ) { </a> 
<a> if ( req . getAttribute ( <RARE_TOKEN> ) == null ) { </a> 
<a> return ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> handler = ctx . <RARE_TOKEN> ( ( Integer ) req . getAttribute ( <RARE_TOKEN> ) ) ; </a> 
<a> req . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> if ( handler == null && <RARE_TOKEN> ( ) && req . getSession ( false ) != null ) { </a> 
<a> handler = ctx . <RARE_TOKEN> ( ( Integer ) req . getSession ( false ) . getAttribute ( <RARE_TOKEN> ) ) ; </a> 
<a> req . getSession ( ) . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( handler != null && ( config . getInitParameter ( ApplicationConfig . <RARE_TOKEN> ) == null </a> 
<a> || config . getInitParameter ( ApplicationConfig . <RARE_TOKEN> ) . equalsIgnoreCase ( <RARE_TOKEN> ) ) ) { </a> 
<a> ctx . <RARE_TOKEN> ( handler ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void action ( AtmosphereResourceImpl r ) { </a> 
<a> super . action ( r ) ; </a> 
<a> if ( r . action ( ) . type == Action . TYPE . <RARE_TOKEN> && r . <RARE_TOKEN> ( ) ) { </a> 
<a> <RARE_TOKEN> ctx = <RARE_TOKEN> . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> resume ( r . getRequest ( ) , ctx ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public Action <RARE_TOKEN> ( HttpServletRequest req , HttpServletResponse res ) </a> 
<a> throws IOException , ServletException { </a> 
<a> Action action = super . <RARE_TOKEN> ( req , res ) ; </a> 
<a> if ( req . getAttribute ( <RARE_TOKEN> ) != null && Long . class . cast ( req . getAttribute ( <RARE_TOKEN> ) ) == - 1 ) { </a> 
<a> resume ( req , <RARE_TOKEN> . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> return action ; </a> 
<a> } </a> 
<a> private class <RARE_TOKEN> implements <RARE_TOKEN> { </a> 
<a> HttpServletRequest req ; </a> 
<a> HttpServletResponse res ; </a> 
<a> public <RARE_TOKEN> ( HttpServletRequest req , HttpServletResponse res ) { </a> 
<a> this . req = req ; </a> 
<a> this . res = res ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( Object o ) { </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> ) throws IOException { </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> ) throws IOException { </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> ) throws IOException { </a> 
<a> } </a> 
<a> public synchronized void <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> ) throws IOException { </a> 
<a> long <RARE_TOKEN> = ( Long ) <RARE_TOKEN> . <RARE_TOKEN> ( ) . getAttribute ( <RARE_TOKEN> ) ; </a> 
<a> try { </a> 
<a> if ( <RARE_TOKEN> . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( ) > 0 </a> 
<a> && ( System . currentTimeMillis ( ) - <RARE_TOKEN> ) >= <RARE_TOKEN> . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( ) ) { </a> 
<a> <RARE_TOKEN> ( req , res ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> ( req , res ) ; </a> 
<a> } </a> 
<a> } catch ( ServletException ex ) { </a> 
<a> logger . warn ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> , ex ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . container ; </a> 
<a> import org . atmosphere . cpr . ApplicationConfig ; </a> 
<a> import org . atmosphere . cpr . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . cpr . AtmosphereResourceImpl ; </a> 
<a> import org . atmosphere . cpr . AtmosphereServlet . Action ; </a> 
<a> import org . atmosphere . cpr . AtmosphereServlet . AtmosphereConfig ; </a> 
<a> import org . jboss . servlet . http . <RARE_TOKEN> ; </a> 
<a> import org . slf4j . Logger ; </a> 
<a> import org . slf4j . LoggerFactory ; </a> 
<a> import javax . servlet . ServletException ; </a> 
<a> import javax . servlet . http . HttpServletRequest ; </a> 
<a> import javax . servlet . http . HttpServletResponse ; </a> 
<a> import java . io . IOException ; </a> 
<a> import java . util . concurrent . ConcurrentLinkedQueue ; </a> 
<a> import static org . atmosphere . cpr . ApplicationConfig . <RARE_TOKEN> ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> private static final Logger logger = LoggerFactory . getLogger ( <RARE_TOKEN> . class ) ; </a> 
<a> public static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final IllegalStateException <RARE_TOKEN> = new IllegalStateException ( <RARE_TOKEN> ( ) ) ; </a> 
<a> private final ConcurrentLinkedQueue < <RARE_TOKEN> > <RARE_TOKEN> = new ConcurrentLinkedQueue < <RARE_TOKEN> > ( ) ; </a> 
<a> public <RARE_TOKEN> ( AtmosphereConfig config ) { </a> 
<a> super ( config ) ; </a> 
<a> } </a> 
<a> public Action service ( HttpServletRequest req , HttpServletResponse res ) throws IOException , ServletException { </a> 
<a> <RARE_TOKEN> event = ( <RARE_TOKEN> ) req . getAttribute ( <RARE_TOKEN> ) ; </a> 
<a> if ( event == null ) { </a> 
<a> throw <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> Action action = null ; </a> 
<a> if ( event . getType ( ) == <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> ) { </a> 
<a> action = suspended ( req , res ) ; </a> 
<a> if ( action . type == Action . TYPE . <RARE_TOKEN> ) { </a> 
<a> logger . debug ( <RARE_TOKEN> response: {}" , res ) ; </a> 
<a> try { </a> 
<a> if ( action . timeout != - 1 ) { </a> 
<a> event . <RARE_TOKEN> ( ( int ) action . timeout ) ; </a> 
<a> } else { </a> 
<a> event . <RARE_TOKEN> ( Integer . MAX_VALUE ) ; </a> 
<a> } </a> 
<a> } catch ( UnsupportedOperationException ex ) { </a> 
<a> } </a> 
<a> } else if ( action . type == Action . TYPE . <RARE_TOKEN> ) { </a> 
<a> logger . debug ( <RARE_TOKEN> response: {}" , res ) ; </a> 
<a> event . close ( ) ; </a> 
<a> } else { </a> 
<a> event . close ( ) ; </a> 
<a> } </a> 
<a> } else if ( event . getType ( ) == <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> ) { </a> 
<a> } else if ( event . getType ( ) == <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> ) { </a> 
<a> logger . debug ( <RARE_TOKEN> closed <RARE_TOKEN> response: {}" , res ) ; </a> 
<a> if ( ! <RARE_TOKEN> . remove ( event ) ) { </a> 
<a> logger . debug ( <RARE_TOKEN> closed <RARE_TOKEN> response: {}" , res ) ; </a> 
<a> action = <RARE_TOKEN> ( req , res ) ; </a> 
<a> } else { </a> 
<a> logger . debug ( <RARE_TOKEN> response: {}" , res ) ; </a> 
<a> } </a> 
<a> event . close ( ) ; </a> 
<a> } else if ( event . getType ( ) == <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> ) { </a> 
<a> event . close ( ) ; </a> 
<a> } else if ( event . getType ( ) == <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> ) { </a> 
<a> if ( ! <RARE_TOKEN> . remove ( event ) ) { </a> 
<a> logger . debug ( <RARE_TOKEN> closed connection response: {}" , res ) ; </a> 
<a> action = <RARE_TOKEN> ( req , res ) ; </a> 
<a> } else { </a> 
<a> logger . debug ( <RARE_TOKEN> response: {}" , res ) ; </a> 
<a> } </a> 
<a> event . close ( ) ; </a> 
<a> } else if ( event . getType ( ) == <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> ) { </a> 
<a> logger . debug ( <RARE_TOKEN> out {}" , res ) ; </a> 
<a> action = <RARE_TOKEN> ( req , res ) ; </a> 
<a> event . close ( ) ; </a> 
<a> } </a> 
<a> return action ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public Action <RARE_TOKEN> ( HttpServletRequest req , HttpServletResponse res ) throws IOException , ServletException { </a> 
<a> Action action = super . <RARE_TOKEN> ( req , res ) ; </a> 
<a> if ( req . getAttribute ( <RARE_TOKEN> ) != null && Long . class . cast ( req . getAttribute ( <RARE_TOKEN> ) ) == - 1 ) { </a> 
<a> <RARE_TOKEN> event = ( <RARE_TOKEN> ) req . getAttribute ( <RARE_TOKEN> ) ; </a> 
<a> if ( event == null ) { </a> 
<a> return action ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( event ) ; </a> 
<a> event . close ( ) ; </a> 
<a> } </a> 
<a> return action ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void action ( AtmosphereResourceImpl <RARE_TOKEN> ) { </a> 
<a> super . action ( <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> . action ( ) . type == Action . TYPE . <RARE_TOKEN> && <RARE_TOKEN> . <RARE_TOKEN> ( ) ) { </a> 
<a> try { </a> 
<a> <RARE_TOKEN> event = ( <RARE_TOKEN> ) <RARE_TOKEN> . getRequest ( ) . getAttribute ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( event ) ; </a> 
<a> if ( config . getInitParameter ( ApplicationConfig . <RARE_TOKEN> ) == null || </a> 
<a> config . getInitParameter ( ApplicationConfig . <RARE_TOKEN> ) . equalsIgnoreCase ( <RARE_TOKEN> ) ) { </a> 
<a> event . close ( ) ; </a> 
<a> } </a> 
<a> } catch ( IOException ex ) { </a> 
<a> logger . debug ( "" , ex ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> private static String <RARE_TOKEN> ( ) { </a> 
<a> StringBuilder sb = new StringBuilder ( ) ; </a> 
<a> sb . append ( <RARE_TOKEN> <RARE_TOKEN> to <RARE_TOKEN> this is a <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> the <RARE_TOKEN> <RARE_TOKEN> is not <RARE_TOKEN> " ) ; </a> 
<a> sb . append ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> is not <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> " ) ; </a> 
<a> sb . append ( <RARE_TOKEN> is <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> return sb . toString ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . container ; </a> 
<a> import org . atmosphere . cpr . ApplicationConfig ; </a> 
<a> import org . atmosphere . cpr . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . cpr . AtmosphereHandler ; </a> 
<a> import org . atmosphere . cpr . AtmosphereResourceImpl ; </a> 
<a> import org . atmosphere . cpr . AtmosphereServlet . Action ; </a> 
<a> import org . atmosphere . cpr . AtmosphereServlet . AtmosphereConfig ; </a> 
<a> import org . atmosphere . cpr . FrameworkConfig ; </a> 
<a> import org . <RARE_TOKEN> . jetty . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import org . <RARE_TOKEN> . jetty . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import org . slf4j . Logger ; </a> 
<a> import org . slf4j . LoggerFactory ; </a> 
<a> import javax . servlet . ServletException ; </a> 
<a> import javax . servlet . http . HttpServletRequest ; </a> 
<a> import javax . servlet . http . HttpServletResponse ; </a> 
<a> import java . io . IOException ; </a> 
<a> import java . util . concurrent . ConcurrentLinkedQueue ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> private static final Logger logger = LoggerFactory . getLogger ( <RARE_TOKEN> . class ) ; </a> 
<a> protected final ConcurrentLinkedQueue < <RARE_TOKEN> > <RARE_TOKEN> = new ConcurrentLinkedQueue < <RARE_TOKEN> > ( ) ; </a> 
<a> public <RARE_TOKEN> ( AtmosphereConfig config ) { </a> 
<a> super ( config ) ; </a> 
<a> } </a> 
<a> public Action service ( HttpServletRequest req , HttpServletResponse res ) throws IOException , ServletException { </a> 
<a> Action action = null ; </a> 
<a> <RARE_TOKEN> c = <RARE_TOKEN> . <RARE_TOKEN> ( req ) ; </a> 
<a> if ( c . <RARE_TOKEN> ( ) ) { </a> 
<a> action = suspended ( req , res ) ; </a> 
<a> if ( action . type == Action . TYPE . <RARE_TOKEN> ) { </a> 
<a> logger . debug ( <RARE_TOKEN> {}" , res ) ; </a> 
<a> if ( action . timeout != - 1 ) { </a> 
<a> c . <RARE_TOKEN> ( action . timeout ) ; </a> 
<a> } else { </a> 
<a> c . <RARE_TOKEN> ( Integer . MAX_VALUE ) ; </a> 
<a> } </a> 
<a> c . suspend ( ) ; </a> 
<a> } else if ( action . type == Action . TYPE . <RARE_TOKEN> ) { </a> 
<a> Boolean resumeOnBroadcast = ( Boolean ) req . getAttribute ( ApplicationConfig . <RARE_TOKEN> ) ; </a> 
<a> if ( resumeOnBroadcast != null && resumeOnBroadcast ) { </a> 
<a> return action ; </a> 
<a> } </a> 
<a> logger . debug ( <RARE_TOKEN> {}" , res ) ; </a> 
<a> if ( ! <RARE_TOKEN> . remove ( c ) ) { </a> 
<a> try { </a> 
<a> c . <RARE_TOKEN> ( ) ; </a> 
<a> } catch ( IllegalStateException ex ) { </a> 
<a> logger . trace ( <RARE_TOKEN> , ex ) ; </a> 
<a> } finally { </a> 
<a> <RARE_TOKEN> ( req , res ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } else if ( ! c . <RARE_TOKEN> ( ) && c . <RARE_TOKEN> ( ) ) { </a> 
<a> <RARE_TOKEN> ( req , res ) ; </a> 
<a> } </a> 
<a> return action ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public Action <RARE_TOKEN> ( HttpServletRequest request , HttpServletResponse response ) </a> 
<a> throws IOException , ServletException { </a> 
<a> logger . debug ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> {}" , request , response ) ; </a> 
<a> AtmosphereResourceImpl r = </a> 
<a> ( AtmosphereResourceImpl ) request . getAttribute ( FrameworkConfig . <RARE_TOKEN> ) ; </a> 
<a> AtmosphereHandler < HttpServletRequest , HttpServletResponse > <RARE_TOKEN> = </a> 
<a> ( AtmosphereHandler < HttpServletRequest , HttpServletResponse > ) </a> 
<a> request . getAttribute ( FrameworkConfig . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( r . <RARE_TOKEN> ( ) ) ; </a> 
<a> return new Action ( Action . TYPE . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void action ( AtmosphereResourceImpl <RARE_TOKEN> ) { </a> 
<a> super . action ( <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> . <RARE_TOKEN> ( ) && <RARE_TOKEN> . action ( ) . type == Action . TYPE . <RARE_TOKEN> && </a> 
<a> ( config . getInitParameter ( ApplicationConfig . <RARE_TOKEN> ) == null || </a> 
<a> config . getInitParameter ( ApplicationConfig . <RARE_TOKEN> ) . equalsIgnoreCase ( <RARE_TOKEN> ) ) ) { </a> 
<a> <RARE_TOKEN> c = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> . getRequest ( ) ) ; </a> 
<a> if ( c != null ) { </a> 
<a> try { </a> 
<a> c . <RARE_TOKEN> ( ) ; </a> 
<a> } catch ( IllegalStateException ex ) { </a> 
<a> logger . trace ( <RARE_TOKEN> failed" , ex ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } else { </a> 
<a> try { </a> 
<a> <RARE_TOKEN> . getResponse ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> } catch ( IOException e ) { </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . container ; </a> 
<a> import org . atmosphere . cpr . ApplicationConfig ; </a> 
<a> import org . atmosphere . cpr . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . cpr . AtmosphereResourceImpl ; </a> 
<a> import org . atmosphere . cpr . AtmosphereServlet . Action ; </a> 
<a> import org . atmosphere . cpr . AtmosphereServlet . AtmosphereConfig ; </a> 
<a> import org . <RARE_TOKEN> . util . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import org . <RARE_TOKEN> . util . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import org . slf4j . Logger ; </a> 
<a> import org . slf4j . LoggerFactory ; </a> 
<a> import javax . servlet . ServletException ; </a> 
<a> import javax . servlet . http . HttpServletRequest ; </a> 
<a> import javax . servlet . http . HttpServletResponse ; </a> 
<a> import java . io . IOException ; </a> 
<a> import java . util . concurrent . ConcurrentLinkedQueue ; </a> 
<a> import static org . atmosphere . cpr . ApplicationConfig . <RARE_TOKEN> ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> private static final Logger logger = LoggerFactory . getLogger ( <RARE_TOKEN> . class ) ; </a> 
<a> private final ConcurrentLinkedQueue < <RARE_TOKEN> > <RARE_TOKEN> = new ConcurrentLinkedQueue < <RARE_TOKEN> > ( ) ; </a> 
<a> public <RARE_TOKEN> ( AtmosphereConfig config ) { </a> 
<a> super ( config ) ; </a> 
<a> } </a> 
<a> public Action service ( HttpServletRequest req , HttpServletResponse response ) </a> 
<a> throws IOException , ServletException { </a> 
<a> <RARE_TOKEN> c = <RARE_TOKEN> . <RARE_TOKEN> ( req , null ) ; </a> 
<a> Action action = null ; </a> 
<a> if ( ! c . <RARE_TOKEN> ( ) && ! c . <RARE_TOKEN> ( ) ) { </a> 
<a> action = suspended ( req , response ) ; </a> 
<a> if ( action . type == Action . TYPE . <RARE_TOKEN> ) { </a> 
<a> logger . debug ( <RARE_TOKEN> response: {}" , response ) ; </a> 
<a> if ( action . timeout != - 1 ) { </a> 
<a> c . suspend ( action . timeout ) ; </a> 
<a> } else { </a> 
<a> c . suspend ( 0 ) ; </a> 
<a> } </a> 
<a> } else if ( action . type == Action . TYPE . <RARE_TOKEN> ) { </a> 
<a> logger . debug ( <RARE_TOKEN> response: {}" , response ) ; </a> 
<a> if ( ! <RARE_TOKEN> . remove ( c ) ) { </a> 
<a> c . <RARE_TOKEN> ( ) ; </a> 
<a> if ( req . getAttribute ( ApplicationConfig . <RARE_TOKEN> ) == null ) { </a> 
<a> <RARE_TOKEN> ( req , response ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> ( req , response ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } else { </a> 
<a> logger . debug ( <RARE_TOKEN> response: {}" , response ) ; </a> 
<a> if ( ! <RARE_TOKEN> . remove ( c ) ) { </a> 
<a> c . <RARE_TOKEN> ( ) ; </a> 
<a> if ( req . getAttribute ( ApplicationConfig . <RARE_TOKEN> ) == null ) { </a> 
<a> <RARE_TOKEN> ( req , response ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> ( req , response ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> return action ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void action ( AtmosphereResourceImpl r ) { </a> 
<a> super . action ( r ) ; </a> 
<a> if ( r . action ( ) . type == Action . TYPE . <RARE_TOKEN> && r . <RARE_TOKEN> ( ) ) { </a> 
<a> <RARE_TOKEN> c = <RARE_TOKEN> . <RARE_TOKEN> ( r . getRequest ( ) , null ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( c ) ; </a> 
<a> if ( config . getInitParameter ( ApplicationConfig . <RARE_TOKEN> ) == null </a> 
<a> || config . getInitParameter ( ApplicationConfig . <RARE_TOKEN> ) . equalsIgnoreCase ( <RARE_TOKEN> ) ) { </a> 
<a> c . resume ( ) ; </a> 
<a> } else { </a> 
<a> try { </a> 
<a> r . getResponse ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> } catch ( IOException e ) { </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public Action <RARE_TOKEN> ( HttpServletRequest req , HttpServletResponse res ) </a> 
<a> throws IOException , ServletException { </a> 
<a> Action action = super . <RARE_TOKEN> ( req , res ) ; </a> 
<a> if ( req . getAttribute ( <RARE_TOKEN> ) != null && Long . class . cast ( req . getAttribute ( <RARE_TOKEN> ) ) == - 1 ) { </a> 
<a> <RARE_TOKEN> c = <RARE_TOKEN> . <RARE_TOKEN> ( req , null ) ; </a> 
<a> if ( c != null ) { </a> 
<a> c . resume ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> return action ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . container ; </a> 
<a> import org . atmosphere . cpr . ApplicationConfig ; </a> 
<a> import org . atmosphere . cpr . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . cpr . AtmosphereServlet ; </a> 
<a> import org . atmosphere . websocket . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . websocket . WebSocket ; </a> 
<a> import org . <RARE_TOKEN> . jetty . websocket . <RARE_TOKEN> ; </a> 
<a> import org . slf4j . Logger ; </a> 
<a> import org . slf4j . LoggerFactory ; </a> 
<a> import javax . servlet . ServletException ; </a> 
<a> import javax . servlet . http . HttpServletRequest ; </a> 
<a> import javax . servlet . http . HttpServletResponse ; </a> 
<a> import java . io . IOException ; </a> 
<a> import static org . atmosphere . cpr . HeaderConfig . <RARE_TOKEN> ; </a> 
<a> public class <RARE_TOKEN> { </a> 
<a> private static final Logger logger = LoggerFactory . getLogger ( <RARE_TOKEN> . class ) ; </a> 
<a> public final static AtmosphereServlet . Action <RARE_TOKEN> ( <RARE_TOKEN> cometSupport , </a> 
<a> HttpServletRequest req , </a> 
<a> HttpServletResponse res , </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> ) throws IOException , ServletException { </a> 
<a> boolean <RARE_TOKEN> = false ; </a> 
<a> if ( req . getHeaders ( <RARE_TOKEN> ) != null && req . getHeaders ( <RARE_TOKEN> ) . <RARE_TOKEN> ( ) ) { </a> 
<a> String [ ] e = req . getHeaders ( <RARE_TOKEN> ) . <RARE_TOKEN> ( ) . split ( <RARE_TOKEN> ) ; </a> 
<a> for ( String <RARE_TOKEN> : e ) { </a> 
<a> if ( <RARE_TOKEN> . <RARE_TOKEN> ( ) . equalsIgnoreCase ( <RARE_TOKEN> ) ) { </a> 
<a> <RARE_TOKEN> = true ; </a> 
<a> break ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> Boolean b = ( Boolean ) req . getAttribute ( WebSocket . <RARE_TOKEN> ) ; </a> 
<a> if ( b == null ) b = Boolean . <RARE_TOKEN> ; </a> 
<a> if ( ! <RARE_TOKEN> ) { </a> 
<a> return null ; </a> 
<a> } else { </a> 
<a> if ( <RARE_TOKEN> != null && ! b ) { </a> 
<a> req . setAttribute ( WebSocket . <RARE_TOKEN> , true ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( req , res ) ; </a> 
<a> return new AtmosphereServlet . Action ( ) ; </a> 
<a> } </a> 
<a> AtmosphereServlet . Action action = cometSupport . suspended ( req , res ) ; </a> 
<a> if ( action . type == AtmosphereServlet . Action . TYPE . <RARE_TOKEN> ) { </a> 
<a> logger . debug ( <RARE_TOKEN> response: {}" , res ) ; </a> 
<a> } else if ( action . type == AtmosphereServlet . Action . TYPE . <RARE_TOKEN> ) { </a> 
<a> logger . debug ( <RARE_TOKEN> response: {}" , res ) ; </a> 
<a> req . setAttribute ( WebSocket . <RARE_TOKEN> , true ) ; </a> 
<a> } </a> 
<a> return action ; </a> 
<a> } </a> 
<a> } </a> 
<a> public final static <RARE_TOKEN> <RARE_TOKEN> ( final AtmosphereServlet . AtmosphereConfig config ) { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( new <RARE_TOKEN> . <RARE_TOKEN> ( ) { </a> 
<a> public boolean <RARE_TOKEN> ( HttpServletRequest request , String <RARE_TOKEN> ) { </a> 
<a> logger . debug ( <RARE_TOKEN> request <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> {}" , request . <RARE_TOKEN> ( ) , <RARE_TOKEN> ) ; </a> 
<a> return true ; </a> 
<a> } </a> 
<a> public org . <RARE_TOKEN> . jetty . websocket . WebSocket <RARE_TOKEN> ( HttpServletRequest request , String <RARE_TOKEN> ) { </a> 
<a> logger . debug ( <RARE_TOKEN> request <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> {}" , request . <RARE_TOKEN> ( ) , <RARE_TOKEN> ) ; </a> 
<a> return new <RARE_TOKEN> ( request , config . <RARE_TOKEN> ( ) , config . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> if ( config . getInitParameter ( ApplicationConfig . <RARE_TOKEN> ) != null ) { </a> 
<a> <RARE_TOKEN> = Integer . valueOf ( config . getInitParameter ( ApplicationConfig . <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> logger . info ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> {}" , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> int timeOut = 5 * <RARE_TOKEN> ; </a> 
<a> if ( config . getInitParameter ( ApplicationConfig . <RARE_TOKEN> ) != null ) { </a> 
<a> timeOut = Integer . valueOf ( config . getInitParameter ( ApplicationConfig . <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> logger . info ( <RARE_TOKEN> <RARE_TOKEN> timeout {}" , timeOut ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( timeOut ) ; </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . container ; </a> 
<a> import org . atmosphere . cpr . AtmosphereServlet . Action ; </a> 
<a> import org . atmosphere . cpr . AtmosphereServlet . AtmosphereConfig ; </a> 
<a> import org . atmosphere . websocket . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . websocket . WebSocket ; </a> 
<a> import org . <RARE_TOKEN> . jetty . websocket . <RARE_TOKEN> ; </a> 
<a> import org . slf4j . Logger ; </a> 
<a> import org . slf4j . LoggerFactory ; </a> 
<a> import javax . servlet . ServletException ; </a> 
<a> import javax . servlet . http . HttpServletRequest ; </a> 
<a> import javax . servlet . http . HttpServletResponse ; </a> 
<a> import java . io . IOException ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> private static final Logger logger = LoggerFactory . getLogger ( <RARE_TOKEN> . class ) ; </a> 
<a> private final <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> public <RARE_TOKEN> ( final AtmosphereConfig config ) { </a> 
<a> super ( config ) ; </a> 
<a> boolean <RARE_TOKEN> = config . getServletContext ( ) . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( ) . startsWith ( <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( config ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> = null ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public Action service ( HttpServletRequest req , HttpServletResponse res ) </a> 
<a> throws IOException , ServletException { </a> 
<a> Action action = <RARE_TOKEN> . <RARE_TOKEN> ( this , req , res , <RARE_TOKEN> ) ; </a> 
<a> return action == null ? super . service ( req , res ) : action ; </a> 
<a> } </a> 
<a> public String <RARE_TOKEN> ( ) { </a> 
<a> return config . <RARE_TOKEN> ( ) . getServletContext ( ) . <RARE_TOKEN> ( ) + " <RARE_TOKEN> WebSocket <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return true ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . container ; </a> 
<a> import org . apache . <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import org . apache . <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . cpr . ApplicationConfig ; </a> 
<a> import org . atmosphere . cpr . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . cpr . AtmosphereResourceImpl ; </a> 
<a> import org . atmosphere . cpr . AtmosphereServlet . Action ; </a> 
<a> import org . atmosphere . cpr . AtmosphereServlet . AtmosphereConfig ; </a> 
<a> import org . slf4j . Logger ; </a> 
<a> import org . slf4j . LoggerFactory ; </a> 
<a> import javax . servlet . ServletException ; </a> 
<a> import javax . servlet . http . HttpServletRequest ; </a> 
<a> import javax . servlet . http . HttpServletResponse ; </a> 
<a> import java . io . IOException ; </a> 
<a> import java . util . concurrent . ConcurrentLinkedQueue ; </a> 
<a> import static org . atmosphere . cpr . ApplicationConfig . <RARE_TOKEN> ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> private static final Logger logger = LoggerFactory . getLogger ( <RARE_TOKEN> . class ) ; </a> 
<a> public static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final IllegalStateException <RARE_TOKEN> </a> 
<a> = new IllegalStateException ( <RARE_TOKEN> ( ) ) ; </a> 
<a> private final ConcurrentLinkedQueue < <RARE_TOKEN> > <RARE_TOKEN> </a> 
<a> = new ConcurrentLinkedQueue < <RARE_TOKEN> > ( ) ; </a> 
<a> public <RARE_TOKEN> ( AtmosphereConfig config ) { </a> 
<a> super ( config ) ; </a> 
<a> } </a> 
<a> public Action service ( HttpServletRequest req , HttpServletResponse res ) </a> 
<a> throws IOException , ServletException { </a> 
<a> <RARE_TOKEN> event = ( <RARE_TOKEN> ) req . getAttribute ( <RARE_TOKEN> ) ; </a> 
<a> if ( event == null ) { </a> 
<a> throw <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> Action action = null ; </a> 
<a> if ( event . <RARE_TOKEN> ( ) == <RARE_TOKEN> . <RARE_TOKEN> ) { </a> 
<a> action = suspended ( req , res ) ; </a> 
<a> if ( action . type == Action . TYPE . <RARE_TOKEN> ) { </a> 
<a> logger . debug ( <RARE_TOKEN> response: {}" , res ) ; </a> 
<a> try { </a> 
<a> if ( action . timeout != - 1 ) { </a> 
<a> event . <RARE_TOKEN> ( ( int ) action . timeout ) ; </a> 
<a> } else { </a> 
<a> event . <RARE_TOKEN> ( Integer . MAX_VALUE ) ; </a> 
<a> } </a> 
<a> } catch ( UnsupportedOperationException ex ) { </a> 
<a> } </a> 
<a> } else if ( action . type == Action . TYPE . <RARE_TOKEN> ) { </a> 
<a> logger . debug ( <RARE_TOKEN> response: {}" , res ) ; </a> 
<a> event . close ( ) ; </a> 
<a> } else { </a> 
<a> event . close ( ) ; </a> 
<a> } </a> 
<a> } else if ( event . <RARE_TOKEN> ( ) == <RARE_TOKEN> . <RARE_TOKEN> ) { </a> 
<a> } else if ( event . <RARE_TOKEN> ( ) == <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> ) { </a> 
<a> logger . debug ( <RARE_TOKEN> closed <RARE_TOKEN> response: {}" , res ) ; </a> 
<a> if ( ! <RARE_TOKEN> . remove ( event ) ) { </a> 
<a> logger . debug ( <RARE_TOKEN> closed <RARE_TOKEN> response: {}" , res ) ; </a> 
<a> action = <RARE_TOKEN> ( req , res ) ; </a> 
<a> } else { </a> 
<a> logger . debug ( <RARE_TOKEN> response: {}" , res ) ; </a> 
<a> } </a> 
<a> event . close ( ) ; </a> 
<a> } else if ( event . <RARE_TOKEN> ( ) == <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> ) { </a> 
<a> logger . debug ( <RARE_TOKEN> out response: {}" , res ) ; </a> 
<a> action = <RARE_TOKEN> ( req , res ) ; </a> 
<a> event . close ( ) ; </a> 
<a> } else if ( event . <RARE_TOKEN> ( ) == <RARE_TOKEN> . <RARE_TOKEN> ) { </a> 
<a> event . close ( ) ; </a> 
<a> } else if ( event . <RARE_TOKEN> ( ) == <RARE_TOKEN> . <RARE_TOKEN> ) { </a> 
<a> if ( ! <RARE_TOKEN> . remove ( event ) ) { </a> 
<a> logger . debug ( <RARE_TOKEN> closed <RARE_TOKEN> response: {}" , res ) ; </a> 
<a> action = <RARE_TOKEN> ( req , res ) ; </a> 
<a> } else { </a> 
<a> logger . debug ( <RARE_TOKEN> response: {}" , res ) ; </a> 
<a> } </a> 
<a> event . close ( ) ; </a> 
<a> } </a> 
<a> return action ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void action ( AtmosphereResourceImpl resource ) { </a> 
<a> super . action ( resource ) ; </a> 
<a> if ( resource . action ( ) . type == Action . TYPE . <RARE_TOKEN> && resource . <RARE_TOKEN> ( ) ) { </a> 
<a> try { </a> 
<a> <RARE_TOKEN> event = ( <RARE_TOKEN> ) resource . getRequest ( ) . getAttribute ( <RARE_TOKEN> ) ; </a> 
<a> if ( event == null ) return ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( event ) ; </a> 
<a> if ( config . getInitParameter ( ApplicationConfig . <RARE_TOKEN> ) == null </a> 
<a> || config . getInitParameter ( ApplicationConfig . <RARE_TOKEN> ) . equalsIgnoreCase ( <RARE_TOKEN> ) ) { </a> 
<a> event . close ( ) ; </a> 
<a> } </a> 
<a> } catch ( IOException ex ) { </a> 
<a> logger . debug ( <RARE_TOKEN> failed" , ex ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public Action <RARE_TOKEN> ( HttpServletRequest req , HttpServletResponse res ) </a> 
<a> throws IOException , ServletException { </a> 
<a> Action action = super . <RARE_TOKEN> ( req , res ) ; </a> 
<a> if ( req . getAttribute ( <RARE_TOKEN> ) != null && Long . class . cast ( req . getAttribute ( <RARE_TOKEN> ) ) == - 1 ) { </a> 
<a> <RARE_TOKEN> event = ( <RARE_TOKEN> ) req . getAttribute ( <RARE_TOKEN> ) ; </a> 
<a> if ( event == null ) return action ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( event ) ; </a> 
<a> event . close ( ) ; </a> 
<a> } </a> 
<a> return action ; </a> 
<a> } </a> 
<a> private static String <RARE_TOKEN> ( ) { </a> 
<a> StringBuilder sb = new StringBuilder ( ) ; </a> 
<a> sb . append ( <RARE_TOKEN> <RARE_TOKEN> to <RARE_TOKEN> this is a <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> " ) ; </a> 
<a> sb . append ( <RARE_TOKEN> <RARE_TOKEN> or the <RARE_TOKEN> <RARE_TOKEN> is not <RARE_TOKEN> ) ; </a> 
<a> sb . append ( <RARE_TOKEN> <RARE_TOKEN> not the <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> remove <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> return sb . toString ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . container ; </a> 
<a> import org . atmosphere . cpr . ApplicationConfig ; </a> 
<a> import org . atmosphere . cpr . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . cpr . AtmosphereResourceImpl ; </a> 
<a> import org . atmosphere . cpr . AtmosphereServlet . Action ; </a> 
<a> import org . atmosphere . cpr . AtmosphereServlet . AtmosphereConfig ; </a> 
<a> import org . slf4j . Logger ; </a> 
<a> import org . slf4j . LoggerFactory ; </a> 
<a> import <RARE_TOKEN> . servlet . http . <RARE_TOKEN> ; </a> 
<a> import <RARE_TOKEN> . servlet . http . <RARE_TOKEN> ; </a> 
<a> import javax . servlet . ServletException ; </a> 
<a> import javax . servlet . http . HttpServletRequest ; </a> 
<a> import javax . servlet . http . HttpServletResponse ; </a> 
<a> import java . io . IOException ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> private static final Logger logger = LoggerFactory . getLogger ( <RARE_TOKEN> . class ) ; </a> 
<a> public static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> public <RARE_TOKEN> ( AtmosphereConfig config ) { </a> 
<a> super ( config ) ; </a> 
<a> } </a> 
<a> public Action service ( HttpServletRequest req , HttpServletResponse res ) </a> 
<a> throws IOException , ServletException { </a> 
<a> Action action = suspended ( req , res ) ; </a> 
<a> if ( action . type == Action . TYPE . <RARE_TOKEN> ) { </a> 
<a> logger . debug ( <RARE_TOKEN> response: {}" , res ) ; </a> 
<a> } else if ( action . type == Action . TYPE . <RARE_TOKEN> ) { </a> 
<a> logger . debug ( <RARE_TOKEN> response: {}" , res ) ; </a> 
<a> Action <RARE_TOKEN> = <RARE_TOKEN> ( req , res ) ; </a> 
<a> if ( <RARE_TOKEN> . type == Action . TYPE . <RARE_TOKEN> ) { </a> 
<a> logger . debug ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> response: {}" , res ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> return action ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void action ( AtmosphereResourceImpl <RARE_TOKEN> ) { </a> 
<a> super . action ( <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> . <RARE_TOKEN> ( ) && <RARE_TOKEN> . action ( ) . type == Action . TYPE . <RARE_TOKEN> && </a> 
<a> ( config . getInitParameter ( ApplicationConfig . <RARE_TOKEN> ) == null </a> 
<a> || config . getInitParameter ( ApplicationConfig . <RARE_TOKEN> ) . equalsIgnoreCase ( <RARE_TOKEN> ) ) ) { </a> 
<a> try { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = ( <RARE_TOKEN> ) <RARE_TOKEN> . getRequest ( ) . getSession ( ) . getAttribute ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> , null ) ; </a> 
<a> } catch ( IOException ex ) { </a> 
<a> logger . debug ( <RARE_TOKEN> failed" , ex ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . cpr ; </a> 
<a> import org . atmosphere . websocket . <RARE_TOKEN> ; </a> 
<a> public interface ApplicationConfig { </a> 
<a> String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> String <RARE_TOKEN> = ApplicationConfig . class . <RARE_TOKEN> ( ) . getName ( ) + <RARE_TOKEN> ; </a> 
<a> String <RARE_TOKEN> = ApplicationConfig . class . <RARE_TOKEN> ( ) . getName ( ) + <RARE_TOKEN> ; </a> 
<a> String <RARE_TOKEN> = ApplicationConfig . class . <RARE_TOKEN> ( ) . getName ( ) + <RARE_TOKEN> ; </a> 
<a> String <RARE_TOKEN> = ApplicationConfig . class . <RARE_TOKEN> ( ) . getName ( ) + <RARE_TOKEN> ; </a> 
<a> String <RARE_TOKEN> = ApplicationConfig . class . <RARE_TOKEN> ( ) . getName ( ) + <RARE_TOKEN> ; </a> 
<a> String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> String <RARE_TOKEN> = ApplicationConfig . class . <RARE_TOKEN> ( ) . getName ( ) + <RARE_TOKEN> ; </a> 
<a> String <RARE_TOKEN> = ApplicationConfig . class . <RARE_TOKEN> ( ) . getName ( ) + <RARE_TOKEN> ; </a> 
<a> String <RARE_TOKEN> = ApplicationConfig . class . <RARE_TOKEN> ( ) . getName ( ) + <RARE_TOKEN> ; </a> 
<a> String <RARE_TOKEN> = <RARE_TOKEN> . class . getName ( ) ; </a> 
<a> String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> String <RARE_TOKEN> = AtmosphereResource . class . getName ( ) ; </a> 
<a> String <RARE_TOKEN> = ApplicationConfig . class . <RARE_TOKEN> ( ) . getName ( ) + <RARE_TOKEN> ; </a> 
<a> String <RARE_TOKEN> = AtmosphereServlet . class . getName ( ) + <RARE_TOKEN> ; </a> 
<a> String <RARE_TOKEN> = AtmosphereServlet . class . getName ( ) + <RARE_TOKEN> ; </a> 
<a> String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> String <RARE_TOKEN> = <RARE_TOKEN> . class . getName ( ) + <RARE_TOKEN> ; </a> 
<a> String <RARE_TOKEN> = ApplicationConfig . class . <RARE_TOKEN> ( ) . getName ( ) + <RARE_TOKEN> ; </a> 
<a> String <RARE_TOKEN> = ApplicationConfig . class . <RARE_TOKEN> ( ) . getName ( ) + <RARE_TOKEN> ; </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . cpr ; </a> 
<a> import org . atmosphere . cpr . AtmosphereServlet . Action ; </a> 
<a> import org . atmosphere . cpr . AtmosphereServlet . AtmosphereConfig ; </a> 
<a> import org . atmosphere . cpr . AtmosphereServlet . <RARE_TOKEN> ; </a> 
<a> import org . slf4j . Logger ; </a> 
<a> import org . slf4j . LoggerFactory ; </a> 
<a> import javax . servlet . <RARE_TOKEN> ; </a> 
<a> import javax . servlet . ServletConfig ; </a> 
<a> import javax . servlet . ServletException ; </a> 
<a> import javax . servlet . http . HttpServletRequest ; </a> 
<a> import javax . servlet . http . HttpServletResponse ; </a> 
<a> import javax . servlet . http . <RARE_TOKEN> ; </a> 
<a> import java . io . IOException ; </a> 
<a> import java . util . <RARE_TOKEN> ; </a> 
<a> import java . util . HashMap ; </a> 
<a> import java . util . Map ; </a> 
<a> import java . util . concurrent . ConcurrentHashMap ; </a> 
<a> import java . util . concurrent . <RARE_TOKEN> ; </a> 
<a> import java . util . concurrent . <RARE_TOKEN> ; </a> 
<a> import java . util . concurrent . TimeUnit ; </a> 
<a> import static org . atmosphere . cpr . ApplicationConfig . <RARE_TOKEN> ; </a> 
<a> import static org . atmosphere . cpr . HeaderConfig . <RARE_TOKEN> ; </a> 
<a> public abstract class <RARE_TOKEN> implements <RARE_TOKEN> < AtmosphereResourceImpl > { </a> 
<a> private static final Logger logger = LoggerFactory . getLogger ( <RARE_TOKEN> . class ) ; </a> 
<a> protected static final Action <RARE_TOKEN> = new Action ( Action . TYPE . <RARE_TOKEN> ) ; </a> 
<a> protected static final Action <RARE_TOKEN> = new Action ( Action . TYPE . <RARE_TOKEN> ) ; </a> 
<a> private static final int <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> protected final AtmosphereConfig config ; </a> 
<a> protected final ConcurrentHashMap < HttpServletRequest , AtmosphereResource < HttpServletRequest , HttpServletResponse > > </a> 
<a> <RARE_TOKEN> = new ConcurrentHashMap < HttpServletRequest , AtmosphereResource < HttpServletRequest , HttpServletResponse > > ( ) ; </a> 
<a> private final <RARE_TOKEN> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( 1 ) ; </a> 
<a> public <RARE_TOKEN> ( AtmosphereConfig config ) { </a> 
<a> this . config = config ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void init ( ServletConfig sc ) throws ServletException { </a> 
<a> String <RARE_TOKEN> = sc . getInitParameter ( <RARE_TOKEN> ) != null ? sc . getInitParameter ( <RARE_TOKEN> ) : </a> 
<a> config . getInitParameter ( <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> final long <RARE_TOKEN> = Long . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> <= 0 ) return ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( new Runnable ( ) { </a> 
<a> public void run ( ) { </a> 
<a> for ( HttpServletRequest req : <RARE_TOKEN> . <RARE_TOKEN> ( ) ) { </a> 
<a> long l = ( Long ) req . getAttribute ( <RARE_TOKEN> ) ; </a> 
<a> if ( l > 0 && System . currentTimeMillis ( ) - l > <RARE_TOKEN> ) { </a> 
<a> try { </a> 
<a> <RARE_TOKEN> ( req , <RARE_TOKEN> . get ( req ) . getResponse ( ) ) ; </a> 
<a> req . setAttribute ( <RARE_TOKEN> , ( long ) - 1 ) ; </a> 
<a> } catch ( IOException e ) { </a> 
<a> } catch ( ServletException e ) { </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } , 0 , 1 , TimeUnit . SECONDS ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> protected boolean <RARE_TOKEN> ( ) { </a> 
<a> return config . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> public String <RARE_TOKEN> ( ) { </a> 
<a> return config . <RARE_TOKEN> ( ) . getServletContext ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> public Action suspended ( HttpServletRequest request , HttpServletResponse response ) </a> 
<a> throws IOException , ServletException { </a> 
<a> return action ( request , response ) ; </a> 
<a> } </a> 
<a> Action action ( HttpServletRequest req , HttpServletResponse res ) </a> 
<a> throws IOException , ServletException { </a> 
<a> boolean <RARE_TOKEN> = false ; </a> 
<a> if ( req . getHeaders ( <RARE_TOKEN> ) != null && req . getHeaders ( <RARE_TOKEN> ) . <RARE_TOKEN> ( ) ) { </a> 
<a> String [ ] e = req . getHeaders ( <RARE_TOKEN> ) . <RARE_TOKEN> ( ) . split ( <RARE_TOKEN> ) ; </a> 
<a> for ( String <RARE_TOKEN> : e ) { </a> 
<a> if ( <RARE_TOKEN> . equalsIgnoreCase ( <RARE_TOKEN> ) ) { </a> 
<a> <RARE_TOKEN> = true ; </a> 
<a> break ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> && ! <RARE_TOKEN> ( ) ) { </a> 
<a> res . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> res . addHeader ( <RARE_TOKEN> , <RARE_TOKEN> <RARE_TOKEN> not <RARE_TOKEN> ) ; </a> 
<a> res . <RARE_TOKEN> ( ) ; </a> 
<a> return new Action ( ) ; </a> 
<a> } </a> 
<a> if ( config . <RARE_TOKEN> ( ) . isEmpty ( ) ) { </a> 
<a> logger . error ( <RARE_TOKEN> AtmosphereHandler <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> throw new ServletException ( <RARE_TOKEN> AtmosphereHandler <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> ( ) ) { </a> 
<a> <RARE_TOKEN> session = req . getSession ( true ) ; </a> 
<a> if ( session . <RARE_TOKEN> ( ) == <RARE_TOKEN> ) { </a> 
<a> session . <RARE_TOKEN> ( - 1 ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> req . setAttribute ( FrameworkConfig . <RARE_TOKEN> , <RARE_TOKEN> ( ) ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = map ( req ) ; </a> 
<a> AtmosphereResourceImpl resource = new AtmosphereResourceImpl ( config , <RARE_TOKEN> . broadcaster , req , res , this , <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . broadcaster . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( config ) ; </a> 
<a> req . setAttribute ( FrameworkConfig . <RARE_TOKEN> , resource ) ; </a> 
<a> req . setAttribute ( FrameworkConfig . <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> try { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> ( resource ) ; </a> 
<a> } catch ( IOException t ) { </a> 
<a> resource . <RARE_TOKEN> ( t ) ; </a> 
<a> throw t ; </a> 
<a> } </a> 
<a> if ( resource . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( ) ) { </a> 
<a> req . setAttribute ( <RARE_TOKEN> , System . currentTimeMillis ( ) ) ; </a> 
<a> <RARE_TOKEN> . put ( req , resource ) ; </a> 
<a> } </a> 
<a> return resource . action ( ) ; </a> 
<a> } </a> 
<a> public void action ( AtmosphereResourceImpl r ) { </a> 
<a> <RARE_TOKEN> . remove ( r . getRequest ( ) ) ; </a> 
<a> } </a> 
<a> protected <RARE_TOKEN> map ( HttpServletRequest req ) throws ServletException { </a> 
<a> String path = req . <RARE_TOKEN> ( ) ; </a> 
<a> if ( path == null || path . length ( ) == 0 ) { </a> 
<a> path = "/" ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = config . <RARE_TOKEN> ( ) . get ( path ) ; </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> if ( ! path . <RARE_TOKEN> ( "/" ) ) { </a> 
<a> path += <RARE_TOKEN> ; </a> 
<a> } else { </a> 
<a> path += <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> = config . <RARE_TOKEN> ( ) . get ( path ) ; </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> <RARE_TOKEN> = config . <RARE_TOKEN> ( ) . get ( <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> if ( req . <RARE_TOKEN> ( ) != null ) { </a> 
<a> path = req . <RARE_TOKEN> ( ) + req . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> = config . <RARE_TOKEN> ( ) . get ( path ) ; </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> if ( ! path . <RARE_TOKEN> ( "/" ) ) { </a> 
<a> path += <RARE_TOKEN> ; </a> 
<a> } else { </a> 
<a> path += <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> = config . <RARE_TOKEN> ( ) . get ( path ) ; </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> logger . warn ( <RARE_TOKEN> AtmosphereHandler <RARE_TOKEN> request for {}" , path ) ; </a> 
<a> for ( String m : config . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( ) ) { </a> 
<a> logger . warn ( <RARE_TOKEN> <RARE_TOKEN> {}" , m ) ; </a> 
<a> } </a> 
<a> throw new ServletException ( <RARE_TOKEN> AtmosphereHandler <RARE_TOKEN> request for " + path ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> config . <RARE_TOKEN> ( ) . add ( <RARE_TOKEN> . broadcaster , </a> 
<a> <RARE_TOKEN> . broadcaster . <RARE_TOKEN> ( ) ) ; </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public Action <RARE_TOKEN> ( HttpServletRequest request , HttpServletResponse response ) </a> 
<a> throws IOException , ServletException { </a> 
<a> logger . debug ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> {}" , request , response ) ; </a> 
<a> return action ( request , response ) ; </a> 
<a> } </a> 
<a> public Action <RARE_TOKEN> ( HttpServletRequest request , HttpServletResponse response ) </a> 
<a> throws IOException , ServletException { </a> 
<a> AtmosphereResourceImpl <RARE_TOKEN> ; </a> 
<a> long l = ( Long ) request . getAttribute ( <RARE_TOKEN> ) ; </a> 
<a> if ( l == - 1 ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> request . setAttribute ( <RARE_TOKEN> , ( long ) - 1 ) ; </a> 
<a> if ( request == null || response == null ) { </a> 
<a> logger . warn ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> , request , response ) ; </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> = ( AtmosphereResourceImpl ) request . getAttribute ( FrameworkConfig . <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( true ) ; </a> 
<a> Broadcaster b = <RARE_TOKEN> . getBroadcaster ( ) ; </a> 
<a> if ( b instanceof <RARE_TOKEN> ) { </a> 
<a> ( ( <RARE_TOKEN> ) b ) . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> . getRequest ( ) . getAttribute ( ApplicationConfig . <RARE_TOKEN> ) != null ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( </a> 
<a> ( Boolean ) <RARE_TOKEN> . getRequest ( ) . getAttribute ( ApplicationConfig . <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> void <RARE_TOKEN> ( AtmosphereResourceImpl r ) throws IOException { </a> 
<a> HttpServletRequest req = r . getRequest ( ) ; </a> 
<a> HttpServletResponse response = r . getResponse ( ) ; </a> 
<a> String <RARE_TOKEN> = r . <RARE_TOKEN> ( ) . getInitParameter ( ApplicationConfig . <RARE_TOKEN> ) ; </a> 
<a> try { </a> 
<a> if ( ! r . getResponse ( ) . equals ( response ) ) { </a> 
<a> logger . warn ( <RARE_TOKEN> response: {}" , response ) ; </a> 
<a> } else if ( <RARE_TOKEN> == null || ! <RARE_TOKEN> . equals ( String . valueOf ( true ) ) ) { </a> 
<a> AtmosphereHandler < HttpServletRequest , HttpServletResponse > <RARE_TOKEN> = </a> 
<a> ( AtmosphereHandler < HttpServletRequest , HttpServletResponse > ) </a> 
<a> req . getAttribute ( FrameworkConfig . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( r . <RARE_TOKEN> ( ) ) ; </a> 
<a> } else { </a> 
<a> r . getResponse ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } catch ( IOException ex ) { </a> 
<a> try { </a> 
<a> r . <RARE_TOKEN> ( ex ) ; </a> 
<a> } catch ( Throwable t ) { </a> 
<a> logger . warn ( "failed <RARE_TOKEN> <RARE_TOKEN> , ex ) ; </a> 
<a> } </a> 
<a> } finally { </a> 
<a> try { </a> 
<a> <RARE_TOKEN> . remove ( req ) ; </a> 
<a> r . <RARE_TOKEN> ( ) ; </a> 
<a> } finally { </a> 
<a> <RARE_TOKEN> ( r ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( AtmosphereResourceImpl r ) { </a> 
<a> r . <RARE_TOKEN> ( ) ; </a> 
<a> try { </a> 
<a> r . getBroadcaster ( ) . <RARE_TOKEN> ( r ) ; </a> 
<a> } catch ( IllegalStateException ex ) { </a> 
<a> logger . trace ( ex . getMessage ( ) , ex ) ; </a> 
<a> } </a> 
<a> if ( BroadcasterFactory . <RARE_TOKEN> ( ) != null ) { </a> 
<a> BroadcasterFactory . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( r ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public Action <RARE_TOKEN> ( HttpServletRequest req , HttpServletResponse res ) </a> 
<a> throws IOException , ServletException { </a> 
<a> AtmosphereResourceImpl <RARE_TOKEN> = null ; </a> 
<a> long l = ( Long ) req . getAttribute ( <RARE_TOKEN> ) ; </a> 
<a> if ( l == - 1 ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> req . setAttribute ( <RARE_TOKEN> , ( long ) - 1 ) ; </a> 
<a> try { </a> 
<a> <RARE_TOKEN> = ( AtmosphereResourceImpl ) req . getAttribute ( FrameworkConfig . <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( true ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( false ) ; </a> 
<a> } </a> 
<a> } catch ( Throwable ex ) { </a> 
<a> logger . debug ( "failed to cancel <RARE_TOKEN> " + <RARE_TOKEN> , ex ) ; </a> 
<a> } finally { </a> 
<a> try { </a> 
<a> <RARE_TOKEN> . remove ( req ) ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } finally { </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> void shutdown ( ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> for ( AtmosphereResource < HttpServletRequest , HttpServletResponse > resource : <RARE_TOKEN> . values ( ) ) { </a> 
<a> try { </a> 
<a> resource . resume ( ) ; </a> 
<a> } catch ( Throwable t ) { </a> 
<a> logger . debug ( "failed <RARE_TOKEN> <RARE_TOKEN> " + resource , t ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . cpr ; </a> 
<a> public interface <RARE_TOKEN> { </a> 
<a> public void <RARE_TOKEN> ( AtmosphereResourceEventListener e ) ; </a> 
<a> public void <RARE_TOKEN> ( AtmosphereResourceEventListener e ) ; </a> 
<a> public void <RARE_TOKEN> ( ) ; </a> 
<a> public void <RARE_TOKEN> ( AtmosphereResourceEvent e ) ; </a> 
<a> public void <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . cpr ; </a> 
<a> import org . atmosphere . container . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . cpr . AtmosphereServlet . Action ; </a> 
<a> import org . slf4j . Logger ; </a> 
<a> import org . slf4j . LoggerFactory ; </a> 
<a> import javax . servlet . Filter ; </a> 
<a> import javax . servlet . <RARE_TOKEN> ; </a> 
<a> import javax . servlet . <RARE_TOKEN> ; </a> 
<a> import javax . servlet . ServletConfig ; </a> 
<a> import javax . servlet . <RARE_TOKEN> ; </a> 
<a> import javax . servlet . ServletException ; </a> 
<a> import javax . servlet . <RARE_TOKEN> ; </a> 
<a> import javax . servlet . <RARE_TOKEN> ; </a> 
<a> import javax . servlet . http . HttpServletRequest ; </a> 
<a> import javax . servlet . http . HttpServletResponse ; </a> 
<a> import java . io . IOException ; </a> 
<a> import java . util . <RARE_TOKEN> ; </a> 
<a> public class <RARE_TOKEN> implements Filter { </a> 
<a> private static final Logger logger = LoggerFactory . getLogger ( <RARE_TOKEN> . class ) ; </a> 
<a> private final AtmosphereServlet <RARE_TOKEN> ; </a> 
<a> public <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> = new AtmosphereServlet ( true ) ; </a> 
<a> } </a> 
<a> public void init ( final <RARE_TOKEN> <RARE_TOKEN> ) throws ServletException { </a> 
<a> logger . info ( <RARE_TOKEN> running <RARE_TOKEN> a <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . init ( new ServletConfig ( ) { </a> 
<a> public String <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> getServletContext ( ) { </a> 
<a> return <RARE_TOKEN> . getServletContext ( ) ; </a> 
<a> } </a> 
<a> public String getInitParameter ( String name ) { </a> 
<a> return <RARE_TOKEN> . getInitParameter ( name ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> < String > <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( <RARE_TOKEN> request , <RARE_TOKEN> response , <RARE_TOKEN> <RARE_TOKEN> ) </a> 
<a> throws IOException , ServletException { </a> 
<a> Action a = <RARE_TOKEN> . <RARE_TOKEN> ( ( HttpServletRequest ) request , ( HttpServletResponse ) response ) ; </a> 
<a> if ( a == null || a . type != Action . TYPE . <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( request , response ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public void destroy ( ) { </a> 
<a> <RARE_TOKEN> . destroy ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . cpr ; </a> 
<a> import java . io . IOException ; </a> 
<a> public interface AtmosphereHandler < <RARE_TOKEN> , <RARE_TOKEN> > { </a> 
<a> void <RARE_TOKEN> ( AtmosphereResource < <RARE_TOKEN> , <RARE_TOKEN> > resource ) throws IOException ; </a> 
<a> void <RARE_TOKEN> ( AtmosphereResourceEvent < <RARE_TOKEN> , <RARE_TOKEN> > event ) throws IOException ; </a> 
<a> void destroy ( ) ; </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . cpr ; </a> 
<a> import javax . servlet . <RARE_TOKEN> ; </a> 
<a> import javax . servlet . http . HttpServletRequest ; </a> 
<a> import javax . servlet . http . <RARE_TOKEN> ; </a> 
<a> import java . io . <RARE_TOKEN> ; </a> 
<a> import java . io . <RARE_TOKEN> ; </a> 
<a> import java . io . IOException ; </a> 
<a> import java . io . <RARE_TOKEN> ; </a> 
<a> import java . io . <RARE_TOKEN> ; </a> 
<a> import java . util . ArrayList ; </a> 
<a> import java . util . Collections ; </a> 
<a> import java . util . <RARE_TOKEN> ; </a> 
<a> import java . util . Map ; </a> 
<a> import static org . atmosphere . cpr . HeaderConfig . <RARE_TOKEN> ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> private final <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> private final <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> private final String <RARE_TOKEN> ; </a> 
<a> private final Map < String , String > headers ; </a> 
<a> private final String <RARE_TOKEN> ; </a> 
<a> private final String contentType ; </a> 
<a> private final HttpServletRequest request ; </a> 
<a> private <RARE_TOKEN> ( Builder b ) { </a> 
<a> super ( b . request ) ; </a> 
<a> <RARE_TOKEN> = b . <RARE_TOKEN> == null ? b . request . <RARE_TOKEN> ( ) : b . <RARE_TOKEN> ; </a> 
<a> request = b . request ; </a> 
<a> headers = b . headers ; </a> 
<a> if ( b . <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> = new <RARE_TOKEN> ( b . <RARE_TOKEN> , b . offset , b . length ) ; </a> 
<a> try { </a> 
<a> <RARE_TOKEN> = new <RARE_TOKEN> ( new <RARE_TOKEN> ( new String ( b . <RARE_TOKEN> , b . offset , b . length , b . <RARE_TOKEN> ) ) ) ; </a> 
<a> } catch ( <RARE_TOKEN> e ) { </a> 
<a> throw new <RARE_TOKEN> ( e ) ; </a> 
<a> } </a> 
<a> } else if ( b . data != null ) { </a> 
<a> <RARE_TOKEN> = new <RARE_TOKEN> ( b . data . getBytes ( ) , 0 , b . data . getBytes ( ) . length ) ; </a> 
<a> <RARE_TOKEN> = new <RARE_TOKEN> ( new <RARE_TOKEN> ( b . data ) ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> = null ; </a> 
<a> <RARE_TOKEN> = null ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> = b . <RARE_TOKEN> == null ? b . request . <RARE_TOKEN> ( ) : b . <RARE_TOKEN> ; </a> 
<a> contentType = b . contentType == null ? b . request . <RARE_TOKEN> ( ) : b . contentType ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public String <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public String <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public String <RARE_TOKEN> ( ) { </a> 
<a> return contentType ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public <RARE_TOKEN> getHeaders ( String name ) { </a> 
<a> ArrayList list = Collections . list ( super . getHeaders ( name ) ) ; </a> 
<a> if ( name . equalsIgnoreCase ( <RARE_TOKEN> ) ) { </a> 
<a> list . add ( contentType ) ; </a> 
<a> } </a> 
<a> if ( headers . get ( name ) != null ) { </a> 
<a> list . add ( headers . get ( name ) ) ; </a> 
<a> } </a> 
<a> if ( list . size ( ) == 0 && name . startsWith ( <RARE_TOKEN> ) ) { </a> 
<a> if ( request . getAttribute ( name ) != null ) { </a> 
<a> list . add ( request . getAttribute ( name ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> return Collections . <RARE_TOKEN> ( list ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> < String > <RARE_TOKEN> ( ) { </a> 
<a> ArrayList list = Collections . list ( super . <RARE_TOKEN> ( ) ) ; </a> 
<a> list . add ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> e = request . <RARE_TOKEN> ( ) ; </a> 
<a> while ( e . <RARE_TOKEN> ( ) ) { </a> 
<a> String name = e . <RARE_TOKEN> ( ) . toString ( ) ; </a> 
<a> if ( name . startsWith ( <RARE_TOKEN> ) ) { </a> 
<a> list . add ( name ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> for ( String s : headers . <RARE_TOKEN> ( ) ) { </a> 
<a> list . add ( s ) ; </a> 
<a> } </a> 
<a> return Collections . <RARE_TOKEN> ( list ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public String getHeader ( String s ) { </a> 
<a> if ( s . equalsIgnoreCase ( <RARE_TOKEN> ) ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } else if ( <RARE_TOKEN> . equalsIgnoreCase ( s ) ) { </a> 
<a> return contentType ; </a> 
<a> } else { </a> 
<a> String name = super . getHeader ( s ) ; </a> 
<a> if ( name == null ) { </a> 
<a> if ( headers . get ( s ) != null ) { </a> 
<a> return headers . get ( s ) ; </a> 
<a> } </a> 
<a> if ( s . startsWith ( <RARE_TOKEN> ) ) { </a> 
<a> return ( String ) request . getAttribute ( s ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> return name ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public <RARE_TOKEN> <RARE_TOKEN> ( ) throws IOException { </a> 
<a> return <RARE_TOKEN> == null ? request . <RARE_TOKEN> ( ) : <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public <RARE_TOKEN> <RARE_TOKEN> ( ) throws IOException { </a> 
<a> return <RARE_TOKEN> == null ? request . <RARE_TOKEN> ( ) : <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> private static class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> private final <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> public <RARE_TOKEN> ( byte [ ] data , int offset , int length ) { </a> 
<a> this . <RARE_TOKEN> = new <RARE_TOKEN> ( data , offset , length ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int read ( ) throws IOException { </a> 
<a> return <RARE_TOKEN> . read ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public final static class Builder { </a> 
<a> public HttpServletRequest request ; </a> 
<a> public String <RARE_TOKEN> ; </a> 
<a> public byte [ ] <RARE_TOKEN> ; </a> 
<a> public int offset ; </a> 
<a> public int length ; </a> 
<a> public String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> public String <RARE_TOKEN> ; </a> 
<a> public String contentType ; </a> 
<a> public String data ; </a> 
<a> public Map < String , String > headers ; </a> 
<a> public Builder ( ) { </a> 
<a> } </a> 
<a> public Builder headers ( Map < String , String > headers ) { </a> 
<a> this . headers = headers ; </a> 
<a> return this ; </a> 
<a> } </a> 
<a> public Builder request ( HttpServletRequest request ) { </a> 
<a> this . request = request ; </a> 
<a> return this ; </a> 
<a> } </a> 
<a> public Builder <RARE_TOKEN> ( String <RARE_TOKEN> ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> return this ; </a> 
<a> } </a> 
<a> public Builder <RARE_TOKEN> ( byte [ ] <RARE_TOKEN> , int offset , int length ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> this . offset = offset ; </a> 
<a> this . length = length ; </a> 
<a> return this ; </a> 
<a> } </a> 
<a> public Builder <RARE_TOKEN> ( String <RARE_TOKEN> ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> return this ; </a> 
<a> } </a> 
<a> public Builder method ( String <RARE_TOKEN> ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> return this ; </a> 
<a> } </a> 
<a> public Builder contentType ( String contentType ) { </a> 
<a> this . contentType = contentType ; </a> 
<a> return this ; </a> 
<a> } </a> 
<a> public Builder <RARE_TOKEN> ( String data ) { </a> 
<a> this . data = data ; </a> 
<a> return this ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> build ( ) { </a> 
<a> return new <RARE_TOKEN> ( this ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . cpr ; </a> 
<a> import java . io . IOException ; </a> 
<a> import java . io . OutputStream ; </a> 
<a> public interface AtmosphereResourceEvent < E , <RARE_TOKEN> > { </a> 
<a> public Object getMessage ( ) ; </a> 
<a> public void <RARE_TOKEN> ( Object o ) ; </a> 
<a> public boolean <RARE_TOKEN> ( ) ; </a> 
<a> public boolean isCancelled ( ) ; </a> 
<a> public boolean <RARE_TOKEN> ( ) ; </a> 
<a> public boolean <RARE_TOKEN> ( ) ; </a> 
<a> public AtmosphereResource < E , <RARE_TOKEN> > getResource ( ) ; </a> 
<a> public void write ( OutputStream os , Object o ) throws IOException ; </a> 
<a> public Throwable throwable ( ) ; </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . cpr ; </a> 
<a> import javax . servlet . http . HttpServletRequest ; </a> 
<a> import javax . servlet . http . HttpServletResponse ; </a> 
<a> import java . io . IOException ; </a> 
<a> import java . io . OutputStream ; </a> 
<a> import java . util . concurrent . atomic . AtomicBoolean ; </a> 
<a> public class <RARE_TOKEN> implements AtmosphereResourceEvent < HttpServletRequest , </a> 
<a> HttpServletResponse > { </a> 
<a> private final AtomicBoolean isCancelled = new AtomicBoolean ( false ) ; </a> 
<a> private final AtomicBoolean <RARE_TOKEN> = new AtomicBoolean ( false ) ; </a> 
<a> private Throwable throwable ; </a> 
<a> protected Object message ; </a> 
<a> protected final AtmosphereResourceImpl resource ; </a> 
<a> public <RARE_TOKEN> ( AtmosphereResourceImpl resource ) { </a> 
<a> this . resource = resource ; </a> 
<a> this . throwable = null ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( AtmosphereResourceImpl resource , boolean isCancelled , </a> 
<a> boolean <RARE_TOKEN> ) { </a> 
<a> this . isCancelled . set ( isCancelled ) ; </a> 
<a> this . <RARE_TOKEN> . set ( <RARE_TOKEN> ) ; </a> 
<a> this . resource = resource ; </a> 
<a> this . throwable = null ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( AtmosphereResourceImpl resource , boolean isCancelled , </a> 
<a> boolean <RARE_TOKEN> , </a> 
<a> Throwable throwable ) { </a> 
<a> this . isCancelled . set ( isCancelled ) ; </a> 
<a> this . <RARE_TOKEN> . set ( <RARE_TOKEN> ) ; </a> 
<a> this . resource = resource ; </a> 
<a> this . throwable = throwable ; </a> 
<a> } </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return resource . action ( ) . type == AtmosphereServlet . Action . TYPE . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return resource . action ( ) . type == AtmosphereServlet . Action . TYPE . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public Object getMessage ( ) { </a> 
<a> return message ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( Object message ) { </a> 
<a> this . message = message ; </a> 
<a> } </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> . get ( ) ; </a> 
<a> } </a> 
<a> public boolean isCancelled ( ) { </a> 
<a> return isCancelled . get ( ) ; </a> 
<a> } </a> 
<a> protected void <RARE_TOKEN> ( boolean isCancelled ) { </a> 
<a> this . isCancelled . set ( isCancelled ) ; </a> 
<a> } </a> 
<a> protected void <RARE_TOKEN> ( boolean <RARE_TOKEN> ) { </a> 
<a> this . <RARE_TOKEN> . set ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public Throwable throwable ( ) { </a> 
<a> return throwable ; </a> 
<a> } </a> 
<a> public AtmosphereResource < HttpServletRequest , HttpServletResponse > getResource ( ) { </a> 
<a> return resource ; </a> 
<a> } </a> 
<a> public void write ( OutputStream os , Object o ) throws IOException { </a> 
<a> resource . write ( os , o ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( Throwable t ) { </a> 
<a> this . throwable = throwable ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public String toString ( ) { </a> 
<a> return <RARE_TOKEN> + <RARE_TOKEN> + <RARE_TOKEN> ( ) + " <RARE_TOKEN> + isCancelled + ", <RARE_TOKEN> + </a> 
<a> <RARE_TOKEN> + ", <RARE_TOKEN> + message + ", <RARE_TOKEN> + resource + ", <RARE_TOKEN> + throwable + </a> 
<a> <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . cpr ; </a> 
<a> import javax . servlet . http . HttpServletRequest ; </a> 
<a> import javax . servlet . http . HttpServletResponse ; </a> 
<a> public interface AtmosphereResourceEventListener { </a> 
<a> void <RARE_TOKEN> ( AtmosphereResourceEvent < HttpServletRequest , HttpServletResponse > event ) ; </a> 
<a> void <RARE_TOKEN> ( AtmosphereResourceEvent < HttpServletRequest , HttpServletResponse > event ) ; </a> 
<a> void <RARE_TOKEN> ( AtmosphereResourceEvent < HttpServletRequest , HttpServletResponse > event ) ; </a> 
<a> void <RARE_TOKEN> ( AtmosphereResourceEvent < HttpServletRequest , HttpServletResponse > event ) ; </a> 
<a> void <RARE_TOKEN> ( AtmosphereResourceEvent < HttpServletRequest , HttpServletResponse > event ) ; </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . cpr ; </a> 
<a> import org . atmosphere . cpr . AtmosphereServlet . Action ; </a> 
<a> import org . atmosphere . cpr . AtmosphereServlet . AtmosphereConfig ; </a> 
<a> import org . slf4j . Logger ; </a> 
<a> import org . slf4j . LoggerFactory ; </a> 
<a> import javax . servlet . http . HttpServletRequest ; </a> 
<a> import javax . servlet . http . HttpServletResponse ; </a> 
<a> import java . io . IOException ; </a> 
<a> import java . io . OutputStream ; </a> 
<a> import java . util . <RARE_TOKEN> ; </a> 
<a> import java . util . concurrent . ConcurrentLinkedQueue ; </a> 
<a> import java . util . concurrent . TimeUnit ; </a> 
<a> import java . util . concurrent . atomic . AtomicBoolean ; </a> 
<a> import static org . atmosphere . cpr . HeaderConfig . <RARE_TOKEN> ; </a> 
<a> import static org . atmosphere . cpr . HeaderConfig . <RARE_TOKEN> ; </a> 
<a> import static org . atmosphere . cpr . HeaderConfig . <RARE_TOKEN> ; </a> 
<a> import static org . atmosphere . cpr . HeaderConfig . <RARE_TOKEN> ; </a> 
<a> import static org . atmosphere . cpr . HeaderConfig . <RARE_TOKEN> ; </a> 
<a> import static org . atmosphere . cpr . HeaderConfig . <RARE_TOKEN> ; </a> 
<a> import static org . atmosphere . cpr . HeaderConfig . <RARE_TOKEN> ; </a> 
<a> public class AtmosphereResourceImpl implements </a> 
<a> AtmosphereResource < HttpServletRequest , HttpServletResponse > , <RARE_TOKEN> { </a> 
<a> private static final Logger logger = LoggerFactory . getLogger ( AtmosphereResourceImpl . class ) ; </a> 
<a> public static final String <RARE_TOKEN> = AtmosphereResourceImpl . class . getName ( ) + <RARE_TOKEN> ; </a> 
<a> private final HttpServletRequest req ; </a> 
<a> private final HttpServletResponse response ; </a> 
<a> protected final AtmosphereServlet . Action action = new AtmosphereServlet . Action ( ) ; </a> 
<a> protected Broadcaster broadcaster ; </a> 
<a> private final AtmosphereConfig config ; </a> 
<a> protected final <RARE_TOKEN> cometSupport ; </a> 
<a> private <RARE_TOKEN> serializer ; </a> 
<a> private boolean <RARE_TOKEN> = true ; </a> 
<a> private final <RARE_TOKEN> event ; </a> 
<a> private final static String <RARE_TOKEN> = <RARE_TOKEN> ( ) ; </a> 
<a> private boolean <RARE_TOKEN> = true ; </a> 
<a> private final ConcurrentLinkedQueue < AtmosphereResourceEventListener > listeners = </a> 
<a> new ConcurrentLinkedQueue < AtmosphereResourceEventListener > ( ) ; </a> 
<a> private final boolean <RARE_TOKEN> ; </a> 
<a> private final boolean <RARE_TOKEN> ; </a> 
<a> private final AtomicBoolean <RARE_TOKEN> = new AtomicBoolean ( false ) ; </a> 
<a> private final AtmosphereHandler <RARE_TOKEN> ; </a> 
<a> private final boolean <RARE_TOKEN> ; </a> 
<a> public AtmosphereResourceImpl ( AtmosphereConfig config , Broadcaster broadcaster , </a> 
<a> HttpServletRequest req , HttpServletResponse response , </a> 
<a> <RARE_TOKEN> cometSupport , AtmosphereHandler <RARE_TOKEN> ) { </a> 
<a> this . req = req ; </a> 
<a> this . response = response ; </a> 
<a> this . broadcaster = broadcaster ; </a> 
<a> this . config = config ; </a> 
<a> this . cometSupport = cometSupport ; </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> this . event = new <RARE_TOKEN> ( this ) ; </a> 
<a> String <RARE_TOKEN> = config . getInitParameter ( ApplicationConfig . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> != null ? false : true ; </a> 
<a> String <RARE_TOKEN> = config . getInitParameter ( ApplicationConfig . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> != null ? ! Boolean . <RARE_TOKEN> ( <RARE_TOKEN> ) : true ; </a> 
<a> String <RARE_TOKEN> = config . getInitParameter ( FrameworkConfig . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> != null ? Boolean . <RARE_TOKEN> ( <RARE_TOKEN> ) : true ; </a> 
<a> req . setAttribute ( ApplicationConfig . <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> req . setAttribute ( ApplicationConfig . <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> <RARE_TOKEN> ( ) { </a> 
<a> return event ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public AtmosphereHandler <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public void resume ( ) { </a> 
<a> if ( ! event . <RARE_TOKEN> ( ) && ! event . <RARE_TOKEN> ( ) && event . <RARE_TOKEN> ( ) && <RARE_TOKEN> ) { </a> 
<a> action . type = AtmosphereServlet . Action . TYPE . <RARE_TOKEN> ; </a> 
<a> Broadcaster b = getBroadcaster ( ) ; </a> 
<a> if ( b instanceof <RARE_TOKEN> ) { </a> 
<a> ( ( <RARE_TOKEN> ) b ) . <RARE_TOKEN> ( this ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> listeners . clear ( ) ; </a> 
<a> try { </a> 
<a> broadcaster . <RARE_TOKEN> ( this ) ; </a> 
<a> } catch ( IllegalStateException ex ) { </a> 
<a> logger . warn ( <RARE_TOKEN> to <RARE_TOKEN> , this ) ; </a> 
<a> logger . debug ( ex . getMessage ( ) , ex ) ; </a> 
<a> } </a> 
<a> if ( BroadcasterFactory . <RARE_TOKEN> ( ) != null ) { </a> 
<a> BroadcasterFactory . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( this ) ; </a> 
<a> } </a> 
<a> try { </a> 
<a> req . setAttribute ( ApplicationConfig . <RARE_TOKEN> , Boolean . <RARE_TOKEN> ) ; </a> 
<a> } catch ( Exception ex ) { </a> 
<a> logger . debug ( <RARE_TOKEN> resume an <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( req . getAttribute ( <RARE_TOKEN> ) == null ) { </a> 
<a> cometSupport . action ( this ) ; </a> 
<a> } </a> 
<a> } else { </a> 
<a> logger . debug ( <RARE_TOKEN> resume an <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public void suspend ( ) { </a> 
<a> suspend ( - 1 ) ; </a> 
<a> } </a> 
<a> public void suspend ( long timeout ) { </a> 
<a> suspend ( timeout , true ) ; </a> 
<a> } </a> 
<a> public void suspend ( long timeout , TimeUnit <RARE_TOKEN> ) { </a> 
<a> suspend ( timeout , <RARE_TOKEN> , true ) ; </a> 
<a> } </a> 
<a> public void suspend ( long timeout , TimeUnit <RARE_TOKEN> , boolean <RARE_TOKEN> ) { </a> 
<a> long <RARE_TOKEN> = - 1 ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> = TimeUnit . MILLISECONDS . <RARE_TOKEN> ( timeout , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> suspend ( <RARE_TOKEN> , true ) ; </a> 
<a> } </a> 
<a> public void suspend ( long timeout , boolean <RARE_TOKEN> ) { </a> 
<a> if ( req . getSession ( false ) != null && req . getSession ( ) . <RARE_TOKEN> ( ) != - 1 && req . getSession ( ) . <RARE_TOKEN> ( ) * 1000 < timeout ) { </a> 
<a> throw new IllegalStateException ( <RARE_TOKEN> suspend a " + </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> the session <RARE_TOKEN> <RARE_TOKEN> the value of <RARE_TOKEN> in <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( req . getAttribute ( <RARE_TOKEN> . <RARE_TOKEN> ) != null ) { </a> 
<a> req . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> return ; </a> 
<a> } </a> 
<a> if ( ! event . <RARE_TOKEN> ( ) ) { </a> 
<a> if ( req . getHeaders ( <RARE_TOKEN> ) != null && req . getHeaders ( <RARE_TOKEN> ) . <RARE_TOKEN> ( ) ) { </a> 
<a> String [ ] e = req . getHeaders ( <RARE_TOKEN> ) . <RARE_TOKEN> ( ) . split ( <RARE_TOKEN> ) ; </a> 
<a> for ( String <RARE_TOKEN> : e ) { </a> 
<a> if ( <RARE_TOKEN> . <RARE_TOKEN> ( ) . equalsIgnoreCase ( <RARE_TOKEN> ) ) { </a> 
<a> if ( <RARE_TOKEN> && ! cometSupport . <RARE_TOKEN> ( ) ) { </a> 
<a> response . addHeader ( <RARE_TOKEN> , <RARE_TOKEN> <RARE_TOKEN> not <RARE_TOKEN> ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> = false ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> && <RARE_TOKEN> ) { </a> 
<a> response . setHeader ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> response . setHeader ( <RARE_TOKEN> , <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> response . setHeader ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> && <RARE_TOKEN> ) { </a> 
<a> response . setHeader ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> response . setHeader ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> ) { </a> 
<a> write ( ) ; </a> 
<a> } </a> 
<a> req . setAttribute ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> action . type = AtmosphereServlet . Action . TYPE . <RARE_TOKEN> ; </a> 
<a> action . timeout = timeout ; </a> 
<a> if ( broadcaster . <RARE_TOKEN> ( ) == Broadcaster . SCOPE . <RARE_TOKEN> ) { </a> 
<a> String id = broadcaster . <RARE_TOKEN> ( ) ; </a> 
<a> Class < ? extends Broadcaster > clazz = broadcaster . getClass ( ) ; </a> 
<a> broadcaster = BroadcasterFactory . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( clazz , id , false ) ; </a> 
<a> if ( broadcaster == null || broadcaster . <RARE_TOKEN> ( ) . size ( ) > 0 ) { </a> 
<a> broadcaster = BroadcasterFactory . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( clazz , id + "/" + <RARE_TOKEN> . <RARE_TOKEN> ( ) , true ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> broadcaster . <RARE_TOKEN> ( this ) ; </a> 
<a> req . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> void write ( ) { </a> 
<a> try { </a> 
<a> if ( <RARE_TOKEN> && ! ( ( Boolean ) req . getAttribute ( ApplicationConfig . <RARE_TOKEN> ) ) ) { </a> 
<a> try { </a> 
<a> response . <RARE_TOKEN> ( ) ; </a> 
<a> } catch ( IllegalStateException e ) { </a> 
<a> return ; </a> 
<a> } </a> 
<a> response . <RARE_TOKEN> ( ) . write ( <RARE_TOKEN> ) ; </a> 
<a> response . <RARE_TOKEN> ( ) . flush ( ) ; </a> 
<a> } else { </a> 
<a> try { </a> 
<a> response . <RARE_TOKEN> ( ) ; </a> 
<a> } catch ( IllegalStateException e ) { </a> 
<a> return ; </a> 
<a> } </a> 
<a> response . <RARE_TOKEN> ( ) . write ( <RARE_TOKEN> . getBytes ( ) ) ; </a> 
<a> response . <RARE_TOKEN> ( ) . flush ( ) ; </a> 
<a> } </a> 
<a> } catch ( Throwable ex ) { </a> 
<a> logger . warn ( "failed to write to <RARE_TOKEN> , ex ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public HttpServletRequest getRequest ( ) { </a> 
<a> if ( ! <RARE_TOKEN> ) { </a> 
<a> throw new IllegalStateException ( <RARE_TOKEN> object <RARE_TOKEN> <RARE_TOKEN> + " <RARE_TOKEN> <RARE_TOKEN> object has <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> return req ; </a> 
<a> } </a> 
<a> public HttpServletResponse getResponse ( ) { </a> 
<a> if ( ! <RARE_TOKEN> ) { </a> 
<a> throw new IllegalStateException ( <RARE_TOKEN> object <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> object has <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> return response ; </a> 
<a> } </a> 
<a> public Broadcaster getBroadcaster ( ) { </a> 
<a> if ( broadcaster == null ) { </a> 
<a> throw new IllegalStateException ( <RARE_TOKEN> Broadcaster <RARE_TOKEN> <RARE_TOKEN> this <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> return broadcaster ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( Broadcaster broadcaster ) { </a> 
<a> this . broadcaster = broadcaster ; </a> 
<a> if ( broadcaster != null ) { </a> 
<a> broadcaster . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( config ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public AtmosphereConfig <RARE_TOKEN> ( ) { </a> 
<a> return config ; </a> 
<a> } </a> 
<a> public Action action ( ) { </a> 
<a> return action ; </a> 
<a> } </a> 
<a> protected void <RARE_TOKEN> ( boolean <RARE_TOKEN> ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( <RARE_TOKEN> s ) { </a> 
<a> serializer = s ; </a> 
<a> } </a> 
<a> public void write ( OutputStream os , Object o ) throws IOException { </a> 
<a> if ( o == null ) throw new IllegalStateException ( <RARE_TOKEN> <RARE_TOKEN> be <RARE_TOKEN> ) ; </a> 
<a> if ( serializer != null ) { </a> 
<a> serializer . write ( os , o ) ; </a> 
<a> } else { </a> 
<a> response . <RARE_TOKEN> ( ) . write ( o . toString ( ) . getBytes ( ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public <RARE_TOKEN> <RARE_TOKEN> ( ) { </a> 
<a> return serializer ; </a> 
<a> } </a> 
<a> public static String <RARE_TOKEN> ( ) { </a> 
<a> StringBuilder s = new StringBuilder ( ) ; </a> 
<a> s . append ( <RARE_TOKEN> <RARE_TOKEN> + </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> + </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> s . append ( <RARE_TOKEN> <RARE_TOKEN> to the <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> + </a> 
<a> " <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> must output <RARE_TOKEN> + </a> 
<a> " data to <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> for ( int i = 0 ; i < 10 ; i ++ ) { </a> 
<a> s . append ( <RARE_TOKEN> <RARE_TOKEN> + </a> 
<a> <RARE_TOKEN> + </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> s . append ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> return s . toString ( ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( AtmosphereResourceEventListener e ) { </a> 
<a> if ( listeners . contains ( e ) ) return ; </a> 
<a> listeners . add ( e ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( AtmosphereResourceEventListener e ) { </a> 
<a> listeners . remove ( e ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> listeners . clear ( ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> ( event ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( AtmosphereResourceEvent event ) { </a> 
<a> logger . debug ( <RARE_TOKEN> listener <RARE_TOKEN> {}" , event ) ; </a> 
<a> if ( event . <RARE_TOKEN> ( ) || event . <RARE_TOKEN> ( ) ) { </a> 
<a> <RARE_TOKEN> ( event ) ; </a> 
<a> } else if ( event . isCancelled ( ) ) { </a> 
<a> <RARE_TOKEN> ( event ) ; </a> 
<a> } else if ( ! <RARE_TOKEN> . <RARE_TOKEN> ( true ) && event . <RARE_TOKEN> ( ) ) { </a> 
<a> <RARE_TOKEN> ( event ) ; </a> 
<a> } else if ( event . throwable ( ) != null ) { </a> 
<a> <RARE_TOKEN> ( event ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> ( event ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( Throwable t ) { </a> 
<a> <RARE_TOKEN> ( new <RARE_TOKEN> ( this , false , false , t ) ) ; </a> 
<a> } </a> 
<a> void <RARE_TOKEN> ( AtmosphereResourceEvent e ) { </a> 
<a> AtmosphereHandler < HttpServletRequest , HttpServletResponse > <RARE_TOKEN> = </a> 
<a> ( AtmosphereHandler < HttpServletRequest , HttpServletResponse > ) </a> 
<a> req . getAttribute ( FrameworkConfig . <RARE_TOKEN> ) ; </a> 
<a> for ( AtmosphereResourceEventListener r : listeners ) { </a> 
<a> r . <RARE_TOKEN> ( e ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> void <RARE_TOKEN> ( AtmosphereResourceEvent < HttpServletRequest , HttpServletResponse > e ) { </a> 
<a> for ( AtmosphereResourceEventListener r : listeners ) { </a> 
<a> r . <RARE_TOKEN> ( e ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> void <RARE_TOKEN> ( AtmosphereResourceEvent < HttpServletRequest , HttpServletResponse > e ) { </a> 
<a> for ( AtmosphereResourceEventListener r : listeners ) { </a> 
<a> r . <RARE_TOKEN> ( e ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> void <RARE_TOKEN> ( AtmosphereResourceEvent < HttpServletRequest , HttpServletResponse > e ) { </a> 
<a> for ( AtmosphereResourceEventListener r : listeners ) { </a> 
<a> r . <RARE_TOKEN> ( e ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> void <RARE_TOKEN> ( AtmosphereResourceEvent < HttpServletRequest , HttpServletResponse > e ) { </a> 
<a> for ( AtmosphereResourceEventListener r : listeners ) { </a> 
<a> r . <RARE_TOKEN> ( e ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public ConcurrentLinkedQueue < AtmosphereResourceEventListener > <RARE_TOKEN> ( ) { </a> 
<a> return listeners ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public String toString ( ) { </a> 
<a> return <RARE_TOKEN> + </a> 
<a> ", <RARE_TOKEN> + action + </a> 
<a> ", <RARE_TOKEN> + broadcaster . getClass ( ) . getName ( ) + </a> 
<a> ", <RARE_TOKEN> + cometSupport + </a> 
<a> ", <RARE_TOKEN> + serializer + </a> 
<a> ", <RARE_TOKEN> + <RARE_TOKEN> + </a> 
<a> ", <RARE_TOKEN> + <RARE_TOKEN> + </a> 
<a> ", <RARE_TOKEN> + listeners + </a> 
<a> <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . cpr ; </a> 
<a> import org . apache . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import org . apache . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . container . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . container . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . container . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . container . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . container . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . handler . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . util . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . util . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . util . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . util . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . websocket . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . websocket . WebSocket ; </a> 
<a> import org . atmosphere . websocket . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import org . jboss . servlet . http . <RARE_TOKEN> ; </a> 
<a> import org . jboss . servlet . http . <RARE_TOKEN> ; </a> 
<a> import org . slf4j . Logger ; </a> 
<a> import org . slf4j . LoggerFactory ; </a> 
<a> import <RARE_TOKEN> . servlet . http . <RARE_TOKEN> ; </a> 
<a> import <RARE_TOKEN> . servlet . http . <RARE_TOKEN> ; </a> 
<a> import javax . servlet . <RARE_TOKEN> ; </a> 
<a> import javax . servlet . ServletConfig ; </a> 
<a> import javax . servlet . <RARE_TOKEN> ; </a> 
<a> import javax . servlet . ServletException ; </a> 
<a> import javax . servlet . http . HttpServletRequest ; </a> 
<a> import javax . servlet . http . HttpServletResponse ; </a> 
<a> import java . io . File ; </a> 
<a> import java . io . IOException ; </a> 
<a> import java . io . InputStream ; </a> 
<a> import java . lang . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import java . net . <RARE_TOKEN> ; </a> 
<a> import java . net . <RARE_TOKEN> ; </a> 
<a> import java . net . URL ; </a> 
<a> import java . net . <RARE_TOKEN> ; </a> 
<a> import java . util . ArrayList ; </a> 
<a> import java . util . <RARE_TOKEN> ; </a> 
<a> import java . util . HashMap ; </a> 
<a> import java . util . Iterator ; </a> 
<a> import java . util . Map ; </a> 
<a> import java . util . Map . Entry ; </a> 
<a> import java . util . Set ; </a> 
<a> import java . util . concurrent . ConcurrentHashMap ; </a> 
<a> import java . util . concurrent . ConcurrentLinkedQueue ; </a> 
<a> import java . util . concurrent . atomic . AtomicBoolean ; </a> 
<a> import static org . atmosphere . cpr . ApplicationConfig . <RARE_TOKEN> ; </a> 
<a> import static org . atmosphere . cpr . ApplicationConfig . <RARE_TOKEN> ; </a> 
<a> import static org . atmosphere . cpr . ApplicationConfig . <RARE_TOKEN> ; </a> 
<a> import static org . atmosphere . cpr . ApplicationConfig . <RARE_TOKEN> ; </a> 
<a> import static org . atmosphere . cpr . ApplicationConfig . <RARE_TOKEN> ; </a> 
<a> import static org . atmosphere . cpr . ApplicationConfig . <RARE_TOKEN> ; </a> 
<a> import static org . atmosphere . cpr . ApplicationConfig . <RARE_TOKEN> ; </a> 
<a> import static org . atmosphere . cpr . ApplicationConfig . <RARE_TOKEN> ; </a> 
<a> import static org . atmosphere . cpr . ApplicationConfig . <RARE_TOKEN> ; </a> 
<a> import static org . atmosphere . cpr . ApplicationConfig . <RARE_TOKEN> ; </a> 
<a> import static org . atmosphere . cpr . ApplicationConfig . <RARE_TOKEN> ; </a> 
<a> import static org . atmosphere . cpr . ApplicationConfig . <RARE_TOKEN> ; </a> 
<a> import static org . atmosphere . cpr . ApplicationConfig . <RARE_TOKEN> ; </a> 
<a> import static org . atmosphere . cpr . ApplicationConfig . <RARE_TOKEN> ; </a> 
<a> import static org . atmosphere . cpr . ApplicationConfig . <RARE_TOKEN> ; </a> 
<a> import static org . atmosphere . cpr . ApplicationConfig . <RARE_TOKEN> ; </a> 
<a> import static org . atmosphere . cpr . ApplicationConfig . <RARE_TOKEN> ; </a> 
<a> import static org . atmosphere . cpr . ApplicationConfig . <RARE_TOKEN> ; </a> 
<a> import static org . atmosphere . cpr . FrameworkConfig . <RARE_TOKEN> ; </a> 
<a> import static org . atmosphere . cpr . FrameworkConfig . <RARE_TOKEN> ; </a> 
<a> import static org . atmosphere . cpr . FrameworkConfig . <RARE_TOKEN> ; </a> 
<a> import static org . atmosphere . cpr . FrameworkConfig . <RARE_TOKEN> ; </a> 
<a> import static org . atmosphere . cpr . FrameworkConfig . <RARE_TOKEN> ; </a> 
<a> import static org . atmosphere . cpr . FrameworkConfig . <RARE_TOKEN> ; </a> 
<a> import static org . atmosphere . cpr . FrameworkConfig . <RARE_TOKEN> ; </a> 
<a> import static org . atmosphere . cpr . FrameworkConfig . <RARE_TOKEN> ; </a> 
<a> import static org . atmosphere . cpr . FrameworkConfig . <RARE_TOKEN> ; </a> 
<a> import static org . atmosphere . cpr . HeaderConfig . <RARE_TOKEN> ; </a> 
<a> public class AtmosphereServlet extends <RARE_TOKEN> implements <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , org . apache . <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> { </a> 
<a> private static final Logger logger = LoggerFactory . getLogger ( AtmosphereServlet . class ) ; </a> 
<a> private final ArrayList < String > <RARE_TOKEN> = new ArrayList < String > ( ) ; </a> 
<a> private final HashMap < String , String > <RARE_TOKEN> = new HashMap < String , String > ( ) ; </a> 
<a> protected final AtmosphereConfig config = new AtmosphereConfig ( ) ; </a> 
<a> protected final AtomicBoolean <RARE_TOKEN> = new AtomicBoolean ( false ) ; </a> 
<a> protected final boolean <RARE_TOKEN> ; </a> 
<a> public static String [ ] <RARE_TOKEN> = new String [ 0 ] ; </a> 
<a> protected final Map < String , <RARE_TOKEN> > <RARE_TOKEN> = </a> 
<a> new ConcurrentHashMap < String , <RARE_TOKEN> > ( ) ; </a> 
<a> private final ConcurrentLinkedQueue < String > <RARE_TOKEN> = new ConcurrentLinkedQueue < String > ( ) ; </a> 
<a> protected boolean <RARE_TOKEN> = false ; </a> 
<a> protected boolean <RARE_TOKEN> = false ; </a> 
<a> protected boolean <RARE_TOKEN> = false ; </a> 
<a> protected <RARE_TOKEN> cometSupport ; </a> 
<a> protected static String <RARE_TOKEN> = <RARE_TOKEN> . class . getName ( ) ; </a> 
<a> protected boolean <RARE_TOKEN> = false ; </a> 
<a> protected boolean <RARE_TOKEN> = false ; </a> 
<a> protected boolean <RARE_TOKEN> = false ; </a> 
<a> private BroadcasterFactory <RARE_TOKEN> ; </a> 
<a> protected String <RARE_TOKEN> ; </a> 
<a> protected static String <RARE_TOKEN> ; </a> 
<a> private boolean <RARE_TOKEN> = false ; </a> 
<a> private String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private String <RARE_TOKEN> = <RARE_TOKEN> . class . getName ( ) ; </a> 
<a> public static final class <RARE_TOKEN> { </a> 
<a> public final AtmosphereHandler <RARE_TOKEN> ; </a> 
<a> public Broadcaster broadcaster ; </a> 
<a> public <RARE_TOKEN> ( AtmosphereHandler <RARE_TOKEN> ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> try { </a> 
<a> broadcaster = BroadcasterFactory . <RARE_TOKEN> ( ) . get ( ) ; </a> 
<a> } catch ( Exception t ) { </a> 
<a> throw new <RARE_TOKEN> ( t ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( AtmosphereHandler <RARE_TOKEN> , Broadcaster broadcaster ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> this . broadcaster = broadcaster ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public String toString ( ) { </a> 
<a> return <RARE_TOKEN> <RARE_TOKEN> + <RARE_TOKEN> + ", <RARE_TOKEN> + </a> 
<a> broadcaster + " <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<a> public AtmosphereConfig <RARE_TOKEN> ( ) { </a> 
<a> return config ; </a> 
<a> } </a> 
<a> public class AtmosphereConfig { </a> 
<a> private boolean <RARE_TOKEN> = true ; </a> 
<a> private BroadcasterFactory <RARE_TOKEN> ; </a> 
<a> private String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private Map < String , Object > <RARE_TOKEN> = new HashMap < String , Object > ( ) ; </a> 
<a> protected Map < String , <RARE_TOKEN> > <RARE_TOKEN> ( ) { </a> 
<a> return AtmosphereServlet . this . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> getServletContext ( ) { </a> 
<a> return AtmosphereServlet . this . getServletContext ( ) ; </a> 
<a> } </a> 
<a> public String <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( String <RARE_TOKEN> ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public String getInitParameter ( String name ) { </a> 
<a> String s = <RARE_TOKEN> . get ( name ) ; </a> 
<a> if ( s != null ) { </a> 
<a> return s ; </a> 
<a> } </a> 
<a> return AtmosphereServlet . this . getInitParameter ( name ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> <RARE_TOKEN> ( ) { </a> 
<a> return AtmosphereServlet . this . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> public ServletConfig <RARE_TOKEN> ( ) { </a> 
<a> return AtmosphereServlet . this . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> public String <RARE_TOKEN> ( ) { </a> 
<a> return AtmosphereServlet . this . cometSupport . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> public BroadcasterFactory <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( boolean <RARE_TOKEN> ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public AtmosphereServlet <RARE_TOKEN> ( ) { </a> 
<a> return AtmosphereServlet . this ; </a> 
<a> } </a> 
<a> public Map < String , Object > <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<a> public static class Action { </a> 
<a> public enum TYPE { </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> </a> 
<a> } </a> 
<a> public long timeout = - <RARE_TOKEN> ; </a> 
<a> public TYPE type ; </a> 
<a> public Action ( ) { </a> 
<a> type = TYPE . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public Action ( TYPE type ) { </a> 
<a> this . type = type ; </a> 
<a> } </a> 
<a> public Action ( TYPE type , long timeout ) { </a> 
<a> this . timeout = timeout ; </a> 
<a> this . type = type ; </a> 
<a> } </a> 
<a> } </a> 
<a> public AtmosphereServlet ( ) { </a> 
<a> this ( false ) ; </a> 
<a> } </a> 
<a> public AtmosphereServlet ( boolean <RARE_TOKEN> ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> protected void <RARE_TOKEN> ( ) { </a> 
<a> Class < ? extends Broadcaster > b = null ; </a> 
<a> String <RARE_TOKEN> = AtmosphereServlet . <RARE_TOKEN> ( ) ; </a> 
<a> try { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = Thread . currentThread ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> b = ( Class < ? extends Broadcaster > ) <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } catch ( <RARE_TOKEN> e ) { </a> 
<a> logger . error ( "failed to <RARE_TOKEN> default broadcaster class <RARE_TOKEN> " + <RARE_TOKEN> , e ) ; </a> 
<a> } </a> 
<a> Class bc = ( b == null ? <RARE_TOKEN> . class : b ) ; </a> 
<a> BroadcasterFactory . <RARE_TOKEN> ( new <RARE_TOKEN> ( bc , <RARE_TOKEN> ) , config ) ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> . add ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . add ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . add ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . add ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( String mapping , AtmosphereHandler h ) { </a> 
<a> if ( ! mapping . startsWith ( "/" ) ) { </a> 
<a> mapping = "/" + mapping ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> w = new <RARE_TOKEN> ( h ) ; </a> 
<a> <RARE_TOKEN> . put ( mapping , w ) ; </a> 
<a> logger . info ( <RARE_TOKEN> AtmosphereHandler <RARE_TOKEN> <RARE_TOKEN> to <RARE_TOKEN> {}" , h . getClass ( ) . getName ( ) , mapping ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( String mapping , AtmosphereHandler h , String <RARE_TOKEN> ) { </a> 
<a> if ( ! mapping . startsWith ( "/" ) ) { </a> 
<a> mapping = "/" + mapping ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> w = new <RARE_TOKEN> ( h ) ; </a> 
<a> w . broadcaster . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . put ( mapping , w ) ; </a> 
<a> logger . info ( <RARE_TOKEN> AtmosphereHandler <RARE_TOKEN> <RARE_TOKEN> to <RARE_TOKEN> {}" , h . getClass ( ) . getName ( ) , mapping ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( String mapping , AtmosphereHandler < HttpServletRequest , HttpServletResponse > h , Broadcaster broadcaster ) { </a> 
<a> if ( ! mapping . startsWith ( "/" ) ) { </a> 
<a> mapping = "/" + mapping ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> w = new <RARE_TOKEN> ( h , broadcaster ) ; </a> 
<a> <RARE_TOKEN> . put ( mapping , w ) ; </a> 
<a> logger . info ( <RARE_TOKEN> AtmosphereHandler <RARE_TOKEN> <RARE_TOKEN> to <RARE_TOKEN> {}" , h . getClass ( ) . getName ( ) , mapping ) ; </a> 
<a> } </a> 
<a> public boolean <RARE_TOKEN> ( String mapping ) { </a> 
<a> return <RARE_TOKEN> . remove ( mapping ) == null ? false : true ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> . clear ( ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> . clear ( ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( String name , String value ) { </a> 
<a> <RARE_TOKEN> . put ( name , value ) ; </a> 
<a> } </a> 
<a> protected void <RARE_TOKEN> ( ) { </a> 
<a> if ( System . getProperty ( <RARE_TOKEN> ) != null ) { </a> 
<a> <RARE_TOKEN> = Boolean </a> 
<a> . <RARE_TOKEN> ( System . getProperty ( <RARE_TOKEN> ) ) ; </a> 
<a> <RARE_TOKEN> = true ; </a> 
<a> } </a> 
<a> if ( System . getProperty ( <RARE_TOKEN> ) != null ) { </a> 
<a> <RARE_TOKEN> = Boolean </a> 
<a> . <RARE_TOKEN> ( System . getProperty ( <RARE_TOKEN> ) ) ; </a> 
<a> <RARE_TOKEN> = true ; </a> 
<a> } </a> 
<a> if ( System . getProperty ( <RARE_TOKEN> ) != null ) { </a> 
<a> <RARE_TOKEN> . put ( <RARE_TOKEN> , System . getProperty ( <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void init ( final ServletConfig sc ) throws ServletException { </a> 
<a> try { </a> 
<a> super . init ( sc ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( this ) ; </a> 
<a> ServletConfig <RARE_TOKEN> = new ServletConfig ( ) { </a> 
<a> public String <RARE_TOKEN> ( ) { </a> 
<a> return sc . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> getServletContext ( ) { </a> 
<a> return sc . getServletContext ( ) ; </a> 
<a> } </a> 
<a> public String getInitParameter ( String name ) { </a> 
<a> String <RARE_TOKEN> = sc . getInitParameter ( name ) ; </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> return <RARE_TOKEN> . get ( name ) ; </a> 
<a> } </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> < String > <RARE_TOKEN> ( ) { </a> 
<a> return sc . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> ( sc . getServletContext ( ) ) ; </a> 
<a> <RARE_TOKEN> ( sc ) ; </a> 
<a> cometSupport . init ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> logger . info ( <RARE_TOKEN> broadcaster <RARE_TOKEN> {}" , <RARE_TOKEN> ) ; </a> 
<a> logger . info ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> } catch ( Throwable t ) { </a> 
<a> logger . error ( "failed to <RARE_TOKEN> atmosphere <RARE_TOKEN> , t ) ; </a> 
<a> if ( t instanceof ServletException ) { </a> 
<a> throw ( ServletException ) t ; </a> 
<a> } </a> 
<a> throw new ServletException ( t . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> protected void <RARE_TOKEN> ( ServletConfig sc ) { </a> 
<a> String s = sc . getInitParameter ( <RARE_TOKEN> ) ; </a> 
<a> if ( s != null ) { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = Thread . currentThread ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> try { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> , ( AtmosphereHandler < ? , ? > ) <RARE_TOKEN> . <RARE_TOKEN> ( s ) . newInstance ( ) ) ; </a> 
<a> } catch ( Exception ex ) { </a> 
<a> logger . warn ( <RARE_TOKEN> to <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> , ex ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> protected void <RARE_TOKEN> ( <RARE_TOKEN> sc ) throws <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> { </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> logger . info ( <RARE_TOKEN> BroadcasterFactory <RARE_TOKEN> {}" , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = ( BroadcasterFactory ) Thread . currentThread ( ) . <RARE_TOKEN> ( ) </a> 
<a> . <RARE_TOKEN> ( <RARE_TOKEN> ) . newInstance ( ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> Class < ? extends Broadcaster > bc = </a> 
<a> ( Class < ? extends Broadcaster > ) Thread . currentThread ( ) . <RARE_TOKEN> ( ) </a> 
<a> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = new <RARE_TOKEN> ( bc , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> sc . setAttribute ( BroadcasterFactory . class . getName ( ) , <RARE_TOKEN> ) ; </a> 
<a> config . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> BroadcasterFactory . <RARE_TOKEN> ( <RARE_TOKEN> , config ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) . inject ( <RARE_TOKEN> ) ; </a> 
<a> Iterator < Entry < String , <RARE_TOKEN> > > i = <RARE_TOKEN> . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> w ; </a> 
<a> Entry < String , <RARE_TOKEN> > e ; </a> 
<a> while ( i . <RARE_TOKEN> ( ) ) { </a> 
<a> e = i . next ( ) ; </a> 
<a> w = e . getValue ( ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( <RARE_TOKEN> , config ) ; </a> 
<a> if ( w . broadcaster == null ) { </a> 
<a> w . broadcaster = <RARE_TOKEN> . get ( ) ; </a> 
<a> } else { </a> 
<a> w . broadcaster . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> cache = ( <RARE_TOKEN> ) Thread . currentThread ( ) . <RARE_TOKEN> ( ) </a> 
<a> . <RARE_TOKEN> ( <RARE_TOKEN> ) . newInstance ( ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) . inject ( cache ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( cache ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> w . broadcaster . <RARE_TOKEN> ( e . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> protected void <RARE_TOKEN> ( ServletConfig sc ) { </a> 
<a> String s = sc . getInitParameter ( <RARE_TOKEN> ) ; </a> 
<a> if ( s != null ) { </a> 
<a> <RARE_TOKEN> = true ; </a> 
<a> <RARE_TOKEN> ( false ) ; </a> 
<a> } </a> 
<a> s = sc . getInitParameter ( <RARE_TOKEN> ) ; </a> 
<a> if ( s != null ) { </a> 
<a> <RARE_TOKEN> = s ; </a> 
<a> } </a> 
<a> } </a> 
<a> protected void <RARE_TOKEN> ( ServletConfig sc ) { </a> 
<a> String s = sc . getInitParameter ( <RARE_TOKEN> ) ; </a> 
<a> if ( s != null ) { </a> 
<a> <RARE_TOKEN> = Boolean . <RARE_TOKEN> ( s ) ; </a> 
<a> if ( <RARE_TOKEN> ) <RARE_TOKEN> = true ; </a> 
<a> } </a> 
<a> s = sc . getInitParameter ( <RARE_TOKEN> ) ; </a> 
<a> if ( s != null ) { </a> 
<a> <RARE_TOKEN> = Boolean . <RARE_TOKEN> ( s ) ; </a> 
<a> if ( <RARE_TOKEN> ) <RARE_TOKEN> = true ; </a> 
<a> } </a> 
<a> s = sc . getInitParameter ( <RARE_TOKEN> ) ; </a> 
<a> if ( s != null ) { </a> 
<a> <RARE_TOKEN> = Boolean . <RARE_TOKEN> ( s ) ; </a> 
<a> } </a> 
<a> s = sc . getInitParameter ( <RARE_TOKEN> ) ; </a> 
<a> if ( s != null ) { </a> 
<a> cometSupport = new <RARE_TOKEN> ( config ) . <RARE_TOKEN> ( s ) ; </a> 
<a> <RARE_TOKEN> = true ; </a> 
<a> } </a> 
<a> s = sc . getInitParameter ( <RARE_TOKEN> ) ; </a> 
<a> if ( s != null ) { </a> 
<a> <RARE_TOKEN> = s ; </a> 
<a> <RARE_TOKEN> = true ; </a> 
<a> } </a> 
<a> s = sc . getInitParameter ( <RARE_TOKEN> ) ; </a> 
<a> if ( s != null ) { </a> 
<a> <RARE_TOKEN> = s ; </a> 
<a> } </a> 
<a> s = sc . getInitParameter ( <RARE_TOKEN> ) ; </a> 
<a> if ( s != null ) { </a> 
<a> config . <RARE_TOKEN> = Boolean . valueOf ( s ) ; </a> 
<a> <RARE_TOKEN> = true ; </a> 
<a> } </a> 
<a> s = sc . getInitParameter ( <RARE_TOKEN> ) ; </a> 
<a> if ( s != null ) { </a> 
<a> <RARE_TOKEN> . put ( <RARE_TOKEN> , s ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> . put ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> s = sc . getInitParameter ( <RARE_TOKEN> ) ; </a> 
<a> if ( s != null ) { </a> 
<a> <RARE_TOKEN> . put ( <RARE_TOKEN> , s ) ; </a> 
<a> } </a> 
<a> s = sc . getInitParameter ( <RARE_TOKEN> ) ; </a> 
<a> if ( s != null ) { </a> 
<a> <RARE_TOKEN> = s . split ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> s = sc . getInitParameter ( <RARE_TOKEN> ) ; </a> 
<a> if ( s != null ) { </a> 
<a> <RARE_TOKEN> = s ; </a> 
<a> } </a> 
<a> s = sc . getInitParameter ( <RARE_TOKEN> ) ; </a> 
<a> if ( s != null ) { </a> 
<a> <RARE_TOKEN> = s ; </a> 
<a> } </a> 
<a> } </a> 
<a> protected void <RARE_TOKEN> ( ServletConfig sc ) throws ServletException { </a> 
<a> try { </a> 
<a> URL url = sc . getServletContext ( ) . getResource ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( new URL [ ] { url } , </a> 
<a> Thread . currentThread ( ) . <RARE_TOKEN> ( ) ) ; </a> 
<a> <RARE_TOKEN> ( sc . getServletContext ( ) . </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) , <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> . size ( ) == 0 ) { </a> 
<a> <RARE_TOKEN> ( sc . getServletContext ( ) , <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> . size ( ) == 0 ) { </a> 
<a> <RARE_TOKEN> ( sc ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } catch ( Throwable t ) { </a> 
<a> throw new ServletException ( t ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> protected boolean <RARE_TOKEN> ( ServletConfig sc ) throws <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = Thread . currentThread ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> String <RARE_TOKEN> = null ; </a> 
<a> try { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> if ( ! <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> = true ; </a> 
<a> } catch ( Throwable t ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> logger . warn ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> the <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . put ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( ) ; </a> 
<a> if ( <RARE_TOKEN> != null ) <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( false ) ; </a> 
<a> <RARE_TOKEN> . put ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> String mapping = sc . getInitParameter ( <RARE_TOKEN> ) ; </a> 
<a> if ( mapping == null ) { </a> 
<a> mapping = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> Class < ? extends Broadcaster > bc = ( Class < ? extends Broadcaster > ) <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> Broadcaster b = BroadcasterFactory . <RARE_TOKEN> ( ) . get ( bc , mapping ) ; </a> 
<a> <RARE_TOKEN> ( mapping , <RARE_TOKEN> , b ) ; </a> 
<a> return true ; </a> 
<a> } </a> 
<a> protected String <RARE_TOKEN> ( ) { </a> 
<a> for ( String b : <RARE_TOKEN> ) { </a> 
<a> try { </a> 
<a> Class . <RARE_TOKEN> ( b ) ; </a> 
<a> return b ; </a> 
<a> } catch ( <RARE_TOKEN> e ) { </a> 
<a> } </a> 
<a> } </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> protected void <RARE_TOKEN> ( boolean <RARE_TOKEN> ) { </a> 
<a> if ( ! <RARE_TOKEN> ) { </a> 
<a> config . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<a> void <RARE_TOKEN> ( ServletConfig sc ) throws ServletException { </a> 
<a> AtmosphereHandler a ; </a> 
<a> for ( Entry < String , <RARE_TOKEN> > h : <RARE_TOKEN> . <RARE_TOKEN> ( ) ) { </a> 
<a> a = h . getValue ( ) . <RARE_TOKEN> ; </a> 
<a> if ( a instanceof <RARE_TOKEN> ) { </a> 
<a> ( ( <RARE_TOKEN> ) a ) . init ( sc ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void destroy ( ) { </a> 
<a> if ( cometSupport != null && <RARE_TOKEN> . class . isAssignableFrom ( cometSupport . getClass ( ) ) ) { </a> 
<a> ( ( <RARE_TOKEN> ) cometSupport ) . shutdown ( ) ; </a> 
<a> } </a> 
<a> for ( Entry < String , <RARE_TOKEN> > entry : <RARE_TOKEN> . <RARE_TOKEN> ( ) ) { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = entry . getValue ( ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> . destroy ( ) ; </a> 
<a> Broadcaster broadcaster = <RARE_TOKEN> . broadcaster ; </a> 
<a> if ( broadcaster != null ) { </a> 
<a> broadcaster . destroy ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> BroadcasterFactory factory = BroadcasterFactory . <RARE_TOKEN> ( ) ; </a> 
<a> if ( factory != null ) { </a> 
<a> factory . destroy ( ) ; </a> 
<a> BroadcasterFactory . factory = null ; </a> 
<a> } </a> 
<a> } </a> 
<a> protected void <RARE_TOKEN> ( InputStream stream , <RARE_TOKEN> c ) </a> 
<a> throws IOException , ServletException { </a> 
<a> if ( stream == null ) { </a> 
<a> return ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( stream ) ; </a> 
<a> Map < String , String > <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> Set < Entry < String , String > > <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> for ( Entry < String , String > entry : <RARE_TOKEN> ) { </a> 
<a> AtmosphereHandler handler ; </a> 
<a> String <RARE_TOKEN> = entry . getValue ( ) ; </a> 
<a> String <RARE_TOKEN> = entry . <RARE_TOKEN> ( ) ; </a> 
<a> try { </a> 
<a> if ( ! <RARE_TOKEN> . equals ( <RARE_TOKEN> . class . getName ( ) ) ) { </a> 
<a> handler = ( AtmosphereHandler ) c . <RARE_TOKEN> ( <RARE_TOKEN> ) . newInstance ( ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) . inject ( handler ) ; </a> 
<a> } else { </a> 
<a> handler = new <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> logger . info ( <RARE_TOKEN> AtmosphereHandler <RARE_TOKEN> <RARE_TOKEN> to <RARE_TOKEN> {}" , handler , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> wrapper = new <RARE_TOKEN> ( handler ) ; </a> 
<a> <RARE_TOKEN> . put ( <RARE_TOKEN> , wrapper ) ; </a> 
<a> boolean <RARE_TOKEN> = false ; </a> 
<a> for ( <RARE_TOKEN> p : <RARE_TOKEN> . getProperty ( <RARE_TOKEN> ) ) { </a> 
<a> if ( p . value != null && p . value . indexOf ( <RARE_TOKEN> ) != - 1 ) { </a> 
<a> <RARE_TOKEN> = true ; </a> 
<a> <RARE_TOKEN> . put ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = true ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> . setProperty ( handler , p . name , p . value ) ; </a> 
<a> } </a> 
<a> config . <RARE_TOKEN> = ! <RARE_TOKEN> ; </a> 
<a> if ( ! <RARE_TOKEN> . <RARE_TOKEN> ( ) . equals ( "" ) ) { </a> 
<a> <RARE_TOKEN> ( Boolean . valueOf ( <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ) ; </a> 
<a> } </a> 
<a> for ( <RARE_TOKEN> p : <RARE_TOKEN> . getProperty ( <RARE_TOKEN> ) ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( handler , p . name , p . value ) ; </a> 
<a> } </a> 
<a> String <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = Thread . currentThread ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> Class < ? extends Broadcaster > bc = ( Class < ? extends Broadcaster > ) <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> wrapper . broadcaster = BroadcasterFactory . <RARE_TOKEN> ( ) . get ( bc , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> String bc = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> if ( bc != null ) { </a> 
<a> <RARE_TOKEN> = bc ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> . <RARE_TOKEN> ( ) != null ) { </a> 
<a> cometSupport = ( <RARE_TOKEN> ) c . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ( ) ) </a> 
<a> . <RARE_TOKEN> ( new Class [ ] { AtmosphereConfig . class } ) </a> 
<a> . newInstance ( new Object [ ] { config } ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> . <RARE_TOKEN> ( ) != null ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } catch ( Throwable t ) { </a> 
<a> logger . warn ( <RARE_TOKEN> to <RARE_TOKEN> AtmosphereHandler <RARE_TOKEN> " + <RARE_TOKEN> , t ) ; </a> 
<a> throw new ServletException ( t ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( <RARE_TOKEN> cometSupport ) { </a> 
<a> this . cometSupport = cometSupport ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> <RARE_TOKEN> ( ) { </a> 
<a> return cometSupport ; </a> 
<a> } </a> 
<a> protected <RARE_TOKEN> <RARE_TOKEN> ( ) { </a> 
<a> return new <RARE_TOKEN> ( config ) ; </a> 
<a> } </a> 
<a> protected void <RARE_TOKEN> ( ) { </a> 
<a> if ( <RARE_TOKEN> ( ) == null ) { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ( ) </a> 
<a> . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> logger . info ( <RARE_TOKEN> is <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> running <RARE_TOKEN> <RARE_TOKEN> {}" , </a> 
<a> <RARE_TOKEN> ( ) . getClass ( ) . getName ( ) , cometSupport . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> protected void <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> , <RARE_TOKEN> <RARE_TOKEN> ) </a> 
<a> throws <RARE_TOKEN> , <RARE_TOKEN> { </a> 
<a> logger . info ( <RARE_TOKEN> <RARE_TOKEN> atmosphere <RARE_TOKEN> in <RARE_TOKEN> ) ; </a> 
<a> String <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> URL <RARE_TOKEN> = <RARE_TOKEN> . getResource ( <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> == null ) return ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . getPath ( ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> protected void <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> , String <RARE_TOKEN> ) { </a> 
<a> File file = new File ( <RARE_TOKEN> ) ; </a> 
<a> if ( file . <RARE_TOKEN> ( ) ) { </a> 
<a> <RARE_TOKEN> ( file ) ; </a> 
<a> for ( String <RARE_TOKEN> : <RARE_TOKEN> ) { </a> 
<a> try { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) . <RARE_TOKEN> ( "/" , <RARE_TOKEN> ) ; </a> 
<a> Class < ? > clazz = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> if ( AtmosphereHandler . class . isAssignableFrom ( clazz ) ) { </a> 
<a> AtmosphereHandler handler = ( AtmosphereHandler ) clazz . newInstance ( ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) . inject ( handler ) ; </a> 
<a> <RARE_TOKEN> . put ( "/" + handler . getClass ( ) . getSimpleName ( ) , </a> 
<a> new <RARE_TOKEN> ( handler , null ) ) ; </a> 
<a> logger . info ( <RARE_TOKEN> AtmosphereHandler <RARE_TOKEN> <RARE_TOKEN> to <RARE_TOKEN> {}" , handler , handler . getClass ( ) . getName ( ) ) ; </a> 
<a> } </a> 
<a> } catch ( Throwable t ) { </a> 
<a> logger . trace ( "failed to <RARE_TOKEN> class <RARE_TOKEN> an <RARE_TOKEN> " + <RARE_TOKEN> , t ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( File f ) { </a> 
<a> File [ ] <RARE_TOKEN> = f . <RARE_TOKEN> ( ) ; </a> 
<a> for ( File test : <RARE_TOKEN> ) { </a> 
<a> if ( test . <RARE_TOKEN> ( ) ) { </a> 
<a> <RARE_TOKEN> ( test ) ; </a> 
<a> } else { </a> 
<a> String clazz = test . <RARE_TOKEN> ( ) ; </a> 
<a> if ( clazz . <RARE_TOKEN> ( <RARE_TOKEN> ) ) { </a> 
<a> <RARE_TOKEN> . add ( clazz ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( HttpServletRequest req , HttpServletResponse res ) </a> 
<a> throws IOException , ServletException { </a> 
<a> <RARE_TOKEN> ( req , res ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( HttpServletRequest req , HttpServletResponse res ) </a> 
<a> throws IOException , ServletException { </a> 
<a> <RARE_TOKEN> ( req , res ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( HttpServletRequest req , HttpServletResponse res ) </a> 
<a> throws IOException , ServletException { </a> 
<a> <RARE_TOKEN> ( req , res ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( HttpServletRequest req , HttpServletResponse res ) </a> 
<a> throws IOException , ServletException { </a> 
<a> <RARE_TOKEN> ( req , res ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( HttpServletRequest req , HttpServletResponse res ) </a> 
<a> throws IOException , ServletException { </a> 
<a> <RARE_TOKEN> ( req , res ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( HttpServletRequest req , HttpServletResponse res ) </a> 
<a> throws IOException , ServletException { </a> 
<a> <RARE_TOKEN> ( req , res ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( HttpServletRequest req , HttpServletResponse res ) </a> 
<a> throws IOException , ServletException { </a> 
<a> <RARE_TOKEN> ( req , res ) ; </a> 
<a> } </a> 
<a> public Action <RARE_TOKEN> ( HttpServletRequest req , HttpServletResponse res ) </a> 
<a> throws IOException , ServletException { </a> 
<a> req . setAttribute ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> req . setAttribute ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> req . setAttribute ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> req . setAttribute ( <RARE_TOKEN> , config . getInitParameter ( <RARE_TOKEN> ) ) ; </a> 
<a> try { </a> 
<a> if ( config . getInitParameter ( <RARE_TOKEN> ) != null </a> 
<a> && <RARE_TOKEN> ( req ) </a> 
<a> && req . getAttribute ( WebSocket . <RARE_TOKEN> ) == null ) { </a> 
<a> Map < String , String > headers = <RARE_TOKEN> ( req ) ; </a> 
<a> String <RARE_TOKEN> = headers . remove ( <RARE_TOKEN> ) ; </a> 
<a> return cometSupport . service ( new <RARE_TOKEN> . Builder ( ) </a> 
<a> . headers ( headers ) </a> 
<a> . method ( <RARE_TOKEN> != null ? <RARE_TOKEN> : <RARE_TOKEN> ) </a> 
<a> . <RARE_TOKEN> ( <RARE_TOKEN> ) </a> 
<a> . request ( req ) . build ( ) , res ) ; </a> 
<a> } else { </a> 
<a> return cometSupport . service ( req , res ) ; </a> 
<a> } </a> 
<a> } catch ( IllegalStateException ex ) { </a> 
<a> logger . warn ( ex . getMessage ( ) , ex ) ; </a> 
<a> if ( ex . getMessage ( ) != null && ex . getMessage ( ) . startsWith ( <RARE_TOKEN> failed" ) ) { </a> 
<a> if ( ! <RARE_TOKEN> ) { </a> 
<a> logger . warn ( "Failed <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> {}" , cometSupport . getClass ( ) . getName ( ) , </a> 
<a> ex . getMessage ( ) ) ; </a> 
<a> logger . warn ( <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> cometSupport = new <RARE_TOKEN> ( config ) ; </a> 
<a> service ( req , res ) ; </a> 
<a> } else { </a> 
<a> logger . error ( <RARE_TOKEN> <RARE_TOKEN> , ex ) ; </a> 
<a> throw ex ; </a> 
<a> } </a> 
<a> } </a> 
<a> return null ; </a> 
<a> } </a> 
<a> public void event ( <RARE_TOKEN> <RARE_TOKEN> ) throws IOException , ServletException { </a> 
<a> HttpServletRequest req = <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> HttpServletResponse res = <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> req . setAttribute ( <RARE_TOKEN> . <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> if ( ! <RARE_TOKEN> && ! <RARE_TOKEN> . <RARE_TOKEN> ( true ) ) { </a> 
<a> synchronized ( cometSupport ) { </a> 
<a> if ( ! cometSupport . getClass ( ) . equals ( <RARE_TOKEN> . class ) ) { </a> 
<a> logger . warn ( <RARE_TOKEN> is <RARE_TOKEN> <RARE_TOKEN> to <RARE_TOKEN> ) ; </a> 
<a> cometSupport = new <RARE_TOKEN> ( config ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( req , res ) ; </a> 
<a> } </a> 
<a> public void event ( org . apache . <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> <RARE_TOKEN> ) throws IOException , ServletException { </a> 
<a> HttpServletRequest req = <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> HttpServletResponse res = <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> req . setAttribute ( <RARE_TOKEN> . <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> if ( ! <RARE_TOKEN> && ! <RARE_TOKEN> . <RARE_TOKEN> ( true ) ) { </a> 
<a> synchronized ( cometSupport ) { </a> 
<a> if ( ! cometSupport . getClass ( ) . equals ( <RARE_TOKEN> . class ) ) { </a> 
<a> logger . warn ( <RARE_TOKEN> is <RARE_TOKEN> <RARE_TOKEN> to <RARE_TOKEN> ) ; </a> 
<a> cometSupport = new <RARE_TOKEN> ( config ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( req , res ) ; </a> 
<a> } </a> 
<a> public void event ( <RARE_TOKEN> <RARE_TOKEN> ) throws IOException , ServletException { </a> 
<a> HttpServletRequest req = <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> HttpServletResponse res = <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> req . setAttribute ( <RARE_TOKEN> . <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> if ( ! <RARE_TOKEN> && ! <RARE_TOKEN> . <RARE_TOKEN> ( true ) ) { </a> 
<a> synchronized ( cometSupport ) { </a> 
<a> if ( ! cometSupport . getClass ( ) . equals ( <RARE_TOKEN> . class ) ) { </a> 
<a> logger . warn ( <RARE_TOKEN> is <RARE_TOKEN> <RARE_TOKEN> to <RARE_TOKEN> ) ; </a> 
<a> cometSupport = new <RARE_TOKEN> ( config ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( req , res ) ; </a> 
<a> } </a> 
<a> protected boolean <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> ) throws IOException , ServletException { </a> 
<a> try { </a> 
<a> <RARE_TOKEN> . getRequest ( ) . getSession ( ) . setAttribute ( <RARE_TOKEN> . <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> Action action = <RARE_TOKEN> ( <RARE_TOKEN> . getRequest ( ) , <RARE_TOKEN> . getResponse ( ) ) ; </a> 
<a> if ( action . type == Action . TYPE . <RARE_TOKEN> ) { </a> 
<a> if ( action . timeout == - 1 ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( Integer . MAX_VALUE ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ( int ) action . timeout ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> return action . type == Action . TYPE . <RARE_TOKEN> ; </a> 
<a> } catch ( IllegalStateException ex ) { </a> 
<a> logger . error ( <RARE_TOKEN> <RARE_TOKEN> , ex ) ; </a> 
<a> throw ex ; </a> 
<a> } </a> 
<a> } </a> 
<a> protected void <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> , Object context ) </a> 
<a> throws IOException , ServletException { </a> 
<a> <RARE_TOKEN> . getResponse ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> protected void <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> ) throws IOException , ServletException { </a> 
<a> ( ( <RARE_TOKEN> ) cometSupport ) . <RARE_TOKEN> ( <RARE_TOKEN> . getRequest ( ) , <RARE_TOKEN> . getResponse ( ) ) ; </a> 
<a> } </a> 
<a> public static String <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public static void <RARE_TOKEN> ( String <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( boolean <RARE_TOKEN> ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public BroadcasterFactory <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public AtmosphereServlet <RARE_TOKEN> ( final BroadcasterFactory <RARE_TOKEN> ) throws <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> ( config . getServletContext ( ) ) ; </a> 
<a> return this ; </a> 
<a> } </a> 
<a> public String <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( String <RARE_TOKEN> ) throws <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> ( config . getServletContext ( ) ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( String <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> . add ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public String <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( String <RARE_TOKEN> ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> protected Map < String , String > <RARE_TOKEN> ( HttpServletRequest request ) { </a> 
<a> Map < String , String > headers = new HashMap < String , String > ( ) ; </a> 
<a> <RARE_TOKEN> < String > e = request . <RARE_TOKEN> ( ) ; </a> 
<a> String s ; </a> 
<a> while ( e . <RARE_TOKEN> ( ) ) { </a> 
<a> s = e . <RARE_TOKEN> ( ) ; </a> 
<a> headers . put ( s , request . <RARE_TOKEN> ( s ) ) ; </a> 
<a> } </a> 
<a> return headers ; </a> 
<a> } </a> 
<a> protected boolean <RARE_TOKEN> ( HttpServletRequest request ) { </a> 
<a> String <RARE_TOKEN> = request . getHeader ( <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> == null ) return false ; </a> 
<a> if ( <RARE_TOKEN> . contains ( <RARE_TOKEN> ) || <RARE_TOKEN> . contains ( <RARE_TOKEN> ) ) { </a> 
<a> String transport = request . getHeader ( HeaderConfig . <RARE_TOKEN> ) ; </a> 
<a> if ( transport != null ) { </a> 
<a> return false ; </a> 
<a> } else { </a> 
<a> return true ; </a> 
<a> } </a> 
<a> } </a> 
<a> return false ; </a> 
<a> } </a> 
<a> public org . <RARE_TOKEN> . jetty . websocket . WebSocket <RARE_TOKEN> ( final HttpServletRequest request , final String <RARE_TOKEN> ) { </a> 
<a> logger . info ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> request . setAttribute ( WebSocket . <RARE_TOKEN> , true ) ; </a> 
<a> return new <RARE_TOKEN> ( request , this , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . cpr ; </a> 
<a> import javax . servlet . <RARE_TOKEN> ; </a> 
<a> import javax . servlet . ServletConfig ; </a> 
<a> import javax . servlet . ServletException ; </a> 
<a> import javax . servlet . http . HttpServletRequest ; </a> 
<a> import javax . servlet . http . HttpServletResponse ; </a> 
<a> public interface <RARE_TOKEN> extends </a> 
<a> AtmosphereHandler < HttpServletRequest , HttpServletResponse > { </a> 
<a> void init ( ServletConfig sc ) throws ServletException ; </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . cpr ; </a> 
<a> public interface <RARE_TOKEN> { </a> 
<a> public class BroadcastAction { </a> 
<a> private final <RARE_TOKEN> a ; </a> 
<a> private final Object o ; </a> 
<a> private Object <RARE_TOKEN> ; </a> 
<a> public enum <RARE_TOKEN> { </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> </a> 
<a> } </a> 
<a> public BroadcastAction ( <RARE_TOKEN> a , Object o ) { </a> 
<a> this . a = a ; </a> 
<a> this . o = o ; </a> 
<a> } </a> 
<a> public BroadcastAction ( Object o ) { </a> 
<a> this . a = <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> this . o = o ; </a> 
<a> } </a> 
<a> public Object message ( ) { </a> 
<a> return o ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> action ( ) { </a> 
<a> return a ; </a> 
<a> } </a> 
<a> public Object <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> void <RARE_TOKEN> ( Object <RARE_TOKEN> ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<a> BroadcastAction filter ( Object <RARE_TOKEN> , Object message ) ; </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . cpr ; </a> 
<a> import java . util . Collection ; </a> 
<a> import java . util . List ; </a> 
<a> import java . util . Set ; </a> 
<a> import java . util . concurrent . <RARE_TOKEN> ; </a> 
<a> import java . util . concurrent . Future ; </a> 
<a> import java . util . concurrent . TimeUnit ; </a> 
<a> public interface Broadcaster extends <RARE_TOKEN> { </a> 
<a> enum SCOPE { </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> </a> 
<a> } </a> 
<a> enum <RARE_TOKEN> { </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> </a> 
<a> } </a> 
<a> void <RARE_TOKEN> ( long <RARE_TOKEN> , <RARE_TOKEN> policy ) ; </a> 
<a> < T > Future < T > broadcast ( T o ) ; </a> 
<a> < T > Future < T > <RARE_TOKEN> ( T o ) ; </a> 
<a> < T > Future < T > <RARE_TOKEN> ( T o , long delay , TimeUnit t ) ; </a> 
<a> < T > Future < T > <RARE_TOKEN> ( T o , long period , TimeUnit t ) ; </a> 
<a> < T > Future < T > <RARE_TOKEN> ( T o , long <RARE_TOKEN> , long period , TimeUnit t ) ; </a> 
<a> < T > Future < T > broadcast ( T o , AtmosphereResource < ? , ? > resource ) ; </a> 
<a> < T > Future < T > <RARE_TOKEN> ( T o ) ; </a> 
<a> < T > Future < T > broadcast ( T o , Set < AtmosphereResource < ? , ? > > <RARE_TOKEN> ) ; </a> 
<a> AtmosphereResource < ? , ? > <RARE_TOKEN> ( AtmosphereResource < ? , ? > resource ) ; </a> 
<a> AtmosphereResource < ? , ? > <RARE_TOKEN> ( AtmosphereResource < ? , ? > resource ) ; </a> 
<a> void <RARE_TOKEN> ( <RARE_TOKEN> bc ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> ( ) ; </a> 
<a> void destroy ( ) ; </a> 
<a> Collection < AtmosphereResource < ? , ? > > <RARE_TOKEN> ( ) ; </a> 
<a> void <RARE_TOKEN> ( SCOPE scope ) ; </a> 
<a> SCOPE <RARE_TOKEN> ( ) ; </a> 
<a> void <RARE_TOKEN> ( String name ) ; </a> 
<a> String <RARE_TOKEN> ( ) ; </a> 
<a> void <RARE_TOKEN> ( ) ; </a> 
<a> public void <RARE_TOKEN> ( ) ; </a> 
<a> public void <RARE_TOKEN> ( <RARE_TOKEN> policy ) ; </a> 
<a> void <RARE_TOKEN> ( <RARE_TOKEN> b ) ; </a> 
<a> void <RARE_TOKEN> ( <RARE_TOKEN> b ) ; </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . cpr ; </a> 
<a> import java . util . Collection ; </a> 
<a> public abstract class BroadcasterFactory { </a> 
<a> protected static BroadcasterFactory factory ; </a> 
<a> protected static AtmosphereServlet . AtmosphereConfig config ; </a> 
<a> abstract public Broadcaster get ( ) throws <RARE_TOKEN> , <RARE_TOKEN> ; </a> 
<a> abstract public Broadcaster get ( Class < ? extends Broadcaster > c , Object id ) throws <RARE_TOKEN> , <RARE_TOKEN> ; </a> 
<a> abstract public void destroy ( ) ; </a> 
<a> abstract public boolean add ( Broadcaster b , Object id ) ; </a> 
<a> abstract public boolean remove ( Broadcaster b , Object id ) ; </a> 
<a> abstract public Broadcaster <RARE_TOKEN> ( Class < ? extends Broadcaster > c , Object id ) ; </a> 
<a> abstract public Broadcaster <RARE_TOKEN> ( Class < ? extends Broadcaster > c , Object id , boolean <RARE_TOKEN> ) ; </a> 
<a> abstract public void <RARE_TOKEN> ( AtmosphereResource < ? , ? > r ) ; </a> 
<a> abstract public Collection < Broadcaster > <RARE_TOKEN> ( ) ; </a> 
<a> public synchronized static BroadcasterFactory <RARE_TOKEN> ( ) { </a> 
<a> return factory ; </a> 
<a> } </a> 
<a> static void <RARE_TOKEN> ( BroadcasterFactory f , AtmosphereServlet . AtmosphereConfig c ) { </a> 
<a> factory = f ; </a> 
<a> config = c ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . cpr ; </a> 
<a> import java . util . concurrent . CountDownLatch ; </a> 
<a> import java . util . concurrent . <RARE_TOKEN> ; </a> 
<a> import java . util . concurrent . Future ; </a> 
<a> import java . util . concurrent . TimeUnit ; </a> 
<a> import java . util . concurrent . <RARE_TOKEN> ; </a> 
<a> public class <RARE_TOKEN> < E > implements Future { </a> 
<a> private final CountDownLatch latch ; </a> 
<a> private boolean isCancelled = false ; </a> 
<a> private boolean <RARE_TOKEN> = false ; </a> 
<a> private final E msg ; </a> 
<a> private final Future < ? > <RARE_TOKEN> ; </a> 
<a> public <RARE_TOKEN> ( E msg ) { </a> 
<a> this ( null , msg ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( Future < ? > <RARE_TOKEN> , E msg ) { </a> 
<a> this . msg = msg ; </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> latch = new CountDownLatch ( 1 ) ; </a> 
<a> } else { </a> 
<a> latch = null ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean cancel ( boolean b ) { </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> return <RARE_TOKEN> . cancel ( b ) ; </a> 
<a> } </a> 
<a> if ( latch . <RARE_TOKEN> ( ) == 1 ) { </a> 
<a> latch . countDown ( ) ; </a> 
<a> isCancelled = true ; </a> 
<a> } </a> 
<a> return isCancelled ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean isCancelled ( ) { </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> return <RARE_TOKEN> . isCancelled ( ) ; </a> 
<a> } </a> 
<a> return isCancelled ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> return <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> = true ; </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public void done ( ) { </a> 
<a> <RARE_TOKEN> = true ; </a> 
<a> if ( latch != null ) { </a> 
<a> latch . countDown ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public E get ( ) throws InterruptedException , <RARE_TOKEN> { </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> return ( E ) <RARE_TOKEN> . get ( ) ; </a> 
<a> } </a> 
<a> latch . await ( ) ; </a> 
<a> return msg ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public E get ( long l , TimeUnit <RARE_TOKEN> ) throws InterruptedException , <RARE_TOKEN> , <RARE_TOKEN> { </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> return ( E ) <RARE_TOKEN> . get ( ) ; </a> 
<a> } </a> 
<a> latch . await ( l , <RARE_TOKEN> ) ; </a> 
<a> return msg ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . cpr ; </a> 
<a> import java . util . concurrent . TimeUnit ; </a> 
<a> public class <RARE_TOKEN> { </a> 
<a> public enum <RARE_TOKEN> { </a> 
<a> <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> </a> 
<a> } </a> 
<a> private final <RARE_TOKEN> policy ; </a> 
<a> private final int time ; </a> 
<a> private final TimeUnit <RARE_TOKEN> ; </a> 
<a> private <RARE_TOKEN> ( <RARE_TOKEN> policy , int time , TimeUnit <RARE_TOKEN> ) { </a> 
<a> this . policy = policy ; </a> 
<a> this . time = time ; </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> private <RARE_TOKEN> ( <RARE_TOKEN> policy ) { </a> 
<a> this . policy = policy ; </a> 
<a> this . time = - 1 ; </a> 
<a> this . <RARE_TOKEN> = null ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> <RARE_TOKEN> ( ) { </a> 
<a> return policy ; </a> 
<a> } </a> 
<a> public TimeUnit <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public int <RARE_TOKEN> ( ) { </a> 
<a> return time ; </a> 
<a> } </a> 
<a> public static final class Builder { </a> 
<a> private <RARE_TOKEN> policy ; </a> 
<a> private int time ; </a> 
<a> private TimeUnit <RARE_TOKEN> ; </a> 
<a> public Builder policy ( <RARE_TOKEN> policy ) { </a> 
<a> this . policy = policy ; </a> 
<a> return this ; </a> 
<a> } </a> 
<a> public Builder <RARE_TOKEN> ( int time ) { </a> 
<a> <RARE_TOKEN> = TimeUnit . MILLISECONDS ; </a> 
<a> this . time = time ; </a> 
<a> return this ; </a> 
<a> } </a> 
<a> public Builder <RARE_TOKEN> ( int time , TimeUnit <RARE_TOKEN> ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> this . time = time ; </a> 
<a> return this ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> build ( ) { </a> 
<a> return new <RARE_TOKEN> ( policy , time , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . cpr ; </a> 
<a> import org . atmosphere . container . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . cpr . AtmosphereServlet . Action ; </a> 
<a> import javax . servlet . ServletConfig ; </a> 
<a> import javax . servlet . ServletException ; </a> 
<a> import javax . servlet . http . HttpServletRequest ; </a> 
<a> import javax . servlet . http . HttpServletResponse ; </a> 
<a> import java . <RARE_TOKEN> . event . <RARE_TOKEN> ; </a> 
<a> import java . io . IOException ; </a> 
<a> public interface <RARE_TOKEN> < E extends AtmosphereResource > { </a> 
<a> public String <RARE_TOKEN> ( ) ; </a> 
<a> public void init ( ServletConfig sc ) throws ServletException ; </a> 
<a> public Action service ( HttpServletRequest req , HttpServletResponse res ) </a> 
<a> throws IOException , ServletException ; </a> 
<a> public void action ( E <RARE_TOKEN> ) ; </a> 
<a> public boolean <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . cpr ; </a> 
<a> public interface <RARE_TOKEN> { </a> 
<a> public <RARE_TOKEN> <RARE_TOKEN> ( final boolean <RARE_TOKEN> , final boolean <RARE_TOKEN> , </a> 
<a> final boolean <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . cpr ; </a> 
<a> import org . atmosphere . cpr . <RARE_TOKEN> . BroadcastAction ; </a> 
<a> import org . atmosphere . cpr . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import org . slf4j . Logger ; </a> 
<a> import org . slf4j . LoggerFactory ; </a> 
<a> import javax . servlet . http . HttpServletRequest ; </a> 
<a> import javax . servlet . http . HttpServletResponse ; </a> 
<a> import java . io . IOException ; </a> 
<a> import java . util . Collection ; </a> 
<a> import java . util . Collections ; </a> 
<a> import java . util . Iterator ; </a> 
<a> import java . util . List ; </a> 
<a> import java . util . Set ; </a> 
<a> import java . util . <RARE_TOKEN> ; </a> 
<a> import java . util . concurrent . <RARE_TOKEN> ; </a> 
<a> import java . util . concurrent . <RARE_TOKEN> ; </a> 
<a> import java . util . concurrent . ConcurrentLinkedQueue ; </a> 
<a> import java . util . concurrent . Future ; </a> 
<a> import java . util . concurrent . <RARE_TOKEN> ; </a> 
<a> import java . util . concurrent . <RARE_TOKEN> ; </a> 
<a> import java . util . concurrent . TimeUnit ; </a> 
<a> import java . util . concurrent . atomic . AtomicBoolean ; </a> 
<a> import java . util . concurrent . atomic . <RARE_TOKEN> ; </a> 
<a> import java . util . concurrent . atomic . AtomicReference ; </a> 
<a> import static org . atmosphere . cpr . ApplicationConfig . <RARE_TOKEN> ; </a> 
<a> public class <RARE_TOKEN> implements Broadcaster { </a> 
<a> private static final Logger logger = LoggerFactory . getLogger ( <RARE_TOKEN> . class ) ; </a> 
<a> public static final String <RARE_TOKEN> = <RARE_TOKEN> . class . getName ( ) + <RARE_TOKEN> ; </a> 
<a> protected final ConcurrentLinkedQueue < AtmosphereResource < ? , ? > > <RARE_TOKEN> = </a> 
<a> new ConcurrentLinkedQueue < AtmosphereResource < ? , ? > > ( ) ; </a> 
<a> protected <RARE_TOKEN> bc ; </a> 
<a> protected final <RARE_TOKEN> < Entry > messages = new <RARE_TOKEN> < Entry > ( ) ; </a> 
<a> protected final <RARE_TOKEN> < <RARE_TOKEN> > <RARE_TOKEN> = new <RARE_TOKEN> < <RARE_TOKEN> > ( ) ; </a> 
<a> protected final AtomicBoolean <RARE_TOKEN> = new AtomicBoolean ( false ) ; </a> 
<a> protected final AtomicBoolean <RARE_TOKEN> = new AtomicBoolean ( false ) ; </a> 
<a> protected SCOPE scope = SCOPE . <RARE_TOKEN> ; </a> 
<a> protected String name = <RARE_TOKEN> . class . getSimpleName ( ) ; </a> 
<a> protected final ConcurrentLinkedQueue < Entry > <RARE_TOKEN> = new ConcurrentLinkedQueue < Entry > ( ) ; </a> 
<a> protected final ConcurrentLinkedQueue < Entry > <RARE_TOKEN> = new ConcurrentLinkedQueue < Entry > ( ) ; </a> 
<a> protected final ConcurrentLinkedQueue < <RARE_TOKEN> > <RARE_TOKEN> = new ConcurrentLinkedQueue < <RARE_TOKEN> > ( ) ; </a> 
<a> protected Future < ? > <RARE_TOKEN> ; </a> 
<a> protected Future < ? > <RARE_TOKEN> ; </a> 
<a> protected <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> private <RARE_TOKEN> policy = <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> private final <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( - 1 ) ; </a> 
<a> private final AtomicBoolean <RARE_TOKEN> = new AtomicBoolean ( false ) ; </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> . Builder ( ) </a> 
<a> . policy ( <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> ) . build ( ) ; </a> 
<a> private Future < ? > <RARE_TOKEN> ; </a> 
<a> public <RARE_TOKEN> ( ) { </a> 
<a> this ( <RARE_TOKEN> . class . getSimpleName ( ) ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( String name ) { </a> 
<a> this . name = name ; </a> 
<a> <RARE_TOKEN> = new <RARE_TOKEN> ( ) ; </a> 
<a> bc = new <RARE_TOKEN> ( AtmosphereServlet . <RARE_TOKEN> , null ) ; </a> 
<a> <RARE_TOKEN> ( name ) ; </a> 
<a> } </a> 
<a> public synchronized void destroy ( ) { </a> 
<a> if ( <RARE_TOKEN> . get ( ) ) return ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> . cancel ( true ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> . set ( false ) ; </a> 
<a> <RARE_TOKEN> . set ( true ) ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> . cancel ( true ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> . cancel ( true ) ; </a> 
<a> } </a> 
<a> if ( bc != null ) { </a> 
<a> bc . destroy ( ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> . clear ( ) ; </a> 
<a> <RARE_TOKEN> . clear ( ) ; </a> 
<a> messages . clear ( ) ; </a> 
<a> <RARE_TOKEN> . clear ( ) ; </a> 
<a> <RARE_TOKEN> . clear ( ) ; </a> 
<a> <RARE_TOKEN> = null ; </a> 
<a> if ( BroadcasterFactory . <RARE_TOKEN> ( ) != null ) { </a> 
<a> BroadcasterFactory . <RARE_TOKEN> ( ) . remove ( this , name ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public Collection < AtmosphereResource < ? , ? > > <RARE_TOKEN> ( ) { </a> 
<a> return Collections . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( SCOPE scope ) { </a> 
<a> this . scope = scope ; </a> 
<a> if ( scope != SCOPE . <RARE_TOKEN> ) { </a> 
<a> return ; </a> 
<a> } </a> 
<a> try { </a> 
<a> for ( AtmosphereResource < ? , ? > resource : <RARE_TOKEN> ) { </a> 
<a> Broadcaster b = BroadcasterFactory . <RARE_TOKEN> ( ) </a> 
<a> . get ( getClass ( ) , getClass ( ) . getSimpleName ( ) + "/" + <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> if ( <RARE_TOKEN> . class . isAssignableFrom ( this . getClass ( ) ) ) { </a> 
<a> <RARE_TOKEN> cache = bc . <RARE_TOKEN> ( ) . getClass ( ) . newInstance ( ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) . inject ( cache ) ; </a> 
<a> <RARE_TOKEN> . class . cast ( b ) . <RARE_TOKEN> = cache ; </a> 
<a> } </a> 
<a> resource . <RARE_TOKEN> ( b ) ; </a> 
<a> if ( resource . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( ) ) { </a> 
<a> b . <RARE_TOKEN> ( resource ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> if ( ! <RARE_TOKEN> . isEmpty ( ) ) { </a> 
<a> destroy ( ) ; </a> 
<a> } </a> 
<a> } catch ( Exception e ) { </a> 
<a> logger . error ( "failed to set request scope for current <RARE_TOKEN> , e ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public SCOPE <RARE_TOKEN> ( ) { </a> 
<a> return scope ; </a> 
<a> } </a> 
<a> public synchronized void <RARE_TOKEN> ( String id ) { </a> 
<a> if ( id == null ) { </a> 
<a> id = getClass ( ) . getSimpleName ( ) + "/" + <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> Broadcaster b = BroadcasterFactory . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( this . getClass ( ) , id ) ; </a> 
<a> if ( b != null && b . <RARE_TOKEN> ( ) == SCOPE . <RARE_TOKEN> ) { </a> 
<a> throw new IllegalStateException ( <RARE_TOKEN> ID <RARE_TOKEN> <RARE_TOKEN> to <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> the <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> BroadcasterFactory . <RARE_TOKEN> ( ) . remove ( this , name ) ; </a> 
<a> this . name = id ; </a> 
<a> BroadcasterFactory . <RARE_TOKEN> ( ) . add ( this , name ) ; </a> 
<a> } </a> 
<a> public String <RARE_TOKEN> ( ) { </a> 
<a> return name ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> for ( AtmosphereResource < ? , ? > r : <RARE_TOKEN> ) { </a> 
<a> r . resume ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( final <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> . cancel ( false ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> . <RARE_TOKEN> ( ) == <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> </a> 
<a> || <RARE_TOKEN> . <RARE_TOKEN> ( ) == <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> ) { </a> 
<a> int time = <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> if ( time == - 1 ) { </a> 
<a> throw new IllegalStateException ( <RARE_TOKEN> time is not <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> final AtomicReference < Future < ? > > <RARE_TOKEN> = new AtomicReference < Future < ? > > ( ) ; </a> 
<a> <RARE_TOKEN> = bc . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( new Runnable ( ) { </a> 
<a> @ Override </a> 
<a> public void run ( ) { </a> 
<a> try { </a> 
<a> if ( <RARE_TOKEN> . isEmpty ( ) ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> if ( <RARE_TOKEN> . <RARE_TOKEN> ( ) == <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> logger . debug ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> destroy ( ) ; </a> 
<a> if ( <RARE_TOKEN> . get ( ) != null ) { </a> 
<a> <RARE_TOKEN> . cancel ( true ) ; </a> 
<a> } </a> 
<a> logger . debug ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } catch ( Throwable t ) { </a> 
<a> logger . warn ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> , t ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } , time , time , <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> <RARE_TOKEN> . set ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( <RARE_TOKEN> b ) { </a> 
<a> <RARE_TOKEN> . add ( b ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( <RARE_TOKEN> b ) { </a> 
<a> <RARE_TOKEN> . remove ( b ) ; </a> 
<a> } </a> 
<a> public class Entry { </a> 
<a> public Object message ; </a> 
<a> public Object <RARE_TOKEN> ; </a> 
<a> public <RARE_TOKEN> < ? > future ; </a> 
<a> public boolean <RARE_TOKEN> ; </a> 
<a> public Object <RARE_TOKEN> ; </a> 
<a> public Entry ( Object message , Object <RARE_TOKEN> , <RARE_TOKEN> < ? > future , Object <RARE_TOKEN> ) { </a> 
<a> this . message = message ; </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> this . future = future ; </a> 
<a> this . <RARE_TOKEN> = true ; </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public Entry ( Object message , Object <RARE_TOKEN> , <RARE_TOKEN> < ? > future , boolean <RARE_TOKEN> ) { </a> 
<a> this . message = message ; </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> this . future = future ; </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public String toString ( ) { </a> 
<a> return <RARE_TOKEN> + </a> 
<a> <RARE_TOKEN> + message + </a> 
<a> ", <RARE_TOKEN> + <RARE_TOKEN> + </a> 
<a> ", <RARE_TOKEN> + future + </a> 
<a> <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<a> protected Runnable <RARE_TOKEN> ( ) { </a> 
<a> return new Runnable ( ) { </a> 
<a> public void run ( ) { </a> 
<a> Entry msg ; </a> 
<a> while ( <RARE_TOKEN> . get ( ) ) { </a> 
<a> try { </a> 
<a> msg = messages . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> ( msg ) ; </a> 
<a> } catch ( Throwable ex ) { </a> 
<a> if ( ! <RARE_TOKEN> . get ( ) ) { </a> 
<a> logger . trace ( "failed to <RARE_TOKEN> broadcast handler <RARE_TOKEN> to broadcast executor service <RARE_TOKEN> <RARE_TOKEN> , ex ) ; </a> 
<a> } else { </a> 
<a> logger . debug ( "failed to <RARE_TOKEN> broadcast handler <RARE_TOKEN> to broadcast executor <RARE_TOKEN> , ex ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } ; </a> 
<a> } </a> 
<a> protected void start ( ) { </a> 
<a> if ( ! <RARE_TOKEN> . <RARE_TOKEN> ( true ) ) { </a> 
<a> <RARE_TOKEN> = bc . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> . start ( ) ; </a> 
<a> <RARE_TOKEN> = bc . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( <RARE_TOKEN> ( ) ) ; </a> 
<a> <RARE_TOKEN> = bc . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> protected void <RARE_TOKEN> ( Entry entry ) { </a> 
<a> if ( <RARE_TOKEN> . get ( ) ) { </a> 
<a> return ; </a> 
<a> } </a> 
<a> String <RARE_TOKEN> = entry . message . toString ( ) ; </a> 
<a> if ( ! <RARE_TOKEN> . isEmpty ( ) ) { </a> 
<a> Iterator < Entry > i = <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> StringBuilder b = new StringBuilder ( ) ; </a> 
<a> while ( i . <RARE_TOKEN> ( ) ) { </a> 
<a> Entry e = i . next ( ) ; </a> 
<a> e . future . cancel ( true ) ; </a> 
<a> try { </a> 
<a> if ( e . message instanceof String </a> 
<a> && entry . message instanceof String ) { </a> 
<a> b . append ( e . message ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> ( e ) ; </a> 
<a> } </a> 
<a> } finally { </a> 
<a> i . remove ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> if ( b . length ( ) > 0 ) { </a> 
<a> entry . message = b . append ( entry . message ) . toString ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> . isEmpty ( ) ) { </a> 
<a> <RARE_TOKEN> ( null , entry . message ) ; </a> 
<a> if ( entry . future != null ) { </a> 
<a> entry . future . done ( ) ; </a> 
<a> } </a> 
<a> return ; </a> 
<a> } </a> 
<a> Object <RARE_TOKEN> = <RARE_TOKEN> ( entry . message ) ; </a> 
<a> entry . message = <RARE_TOKEN> ; </a> 
<a> try { </a> 
<a> if ( entry . <RARE_TOKEN> == null ) { </a> 
<a> for ( AtmosphereResource < ? , ? > r : <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ( r , entry ) ; </a> 
<a> if ( entry . <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( r , <RARE_TOKEN> , entry ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } else if ( entry . <RARE_TOKEN> instanceof AtmosphereResource < ? , ? > ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ( ( AtmosphereResource < ? , ? > ) entry . <RARE_TOKEN> , entry ) ; </a> 
<a> if ( entry . <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( ( AtmosphereResource < ? , ? > ) entry . <RARE_TOKEN> , <RARE_TOKEN> , entry ) ; </a> 
<a> } </a> 
<a> } else if ( entry . <RARE_TOKEN> instanceof Set ) { </a> 
<a> Set < AtmosphereResource < ? , ? > > <RARE_TOKEN> = ( Set < AtmosphereResource < ? , ? > > ) entry . <RARE_TOKEN> ; </a> 
<a> for ( AtmosphereResource < ? , ? > r : <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ( r , entry ) ; </a> 
<a> if ( entry . <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( r , <RARE_TOKEN> , entry ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> entry . message = <RARE_TOKEN> ; </a> 
<a> } catch ( InterruptedException ex ) { </a> 
<a> logger . debug ( ex . getMessage ( ) , ex ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> protected void <RARE_TOKEN> ( AtmosphereResource < ? , ? > r , Object <RARE_TOKEN> , Entry entry ) throws InterruptedException { </a> 
<a> <RARE_TOKEN> . put ( new <RARE_TOKEN> ( r , <RARE_TOKEN> , entry . future ) ) ; </a> 
<a> } </a> 
<a> protected Object <RARE_TOKEN> ( AtmosphereResource < ? , ? > r , Entry msg ) { </a> 
<a> Object <RARE_TOKEN> = msg . message ; </a> 
<a> if ( AtmosphereResourceImpl . class . isAssignableFrom ( r . getClass ( ) ) ) { </a> 
<a> if ( AtmosphereResourceImpl . class . cast ( r ) . <RARE_TOKEN> ( ) ) { </a> 
<a> if ( r . getRequest ( ) instanceof HttpServletRequest && bc . <RARE_TOKEN> ( ) ) { </a> 
<a> Object message = msg . <RARE_TOKEN> ; </a> 
<a> BroadcastAction a = bc . filter ( ( HttpServletRequest ) r . getRequest ( ) , ( HttpServletResponse ) r . getResponse ( ) , message ) ; </a> 
<a> if ( a . action ( ) == BroadcastAction . <RARE_TOKEN> . <RARE_TOKEN> </a> 
<a> || a . message ( ) != msg . <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> = a . message ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( r , <RARE_TOKEN> ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> ( r ) ; </a> 
<a> BroadcasterFactory . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( r ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> private Object <RARE_TOKEN> ( Object msg ) { </a> 
<a> if ( <RARE_TOKEN> . class . isAssignableFrom ( msg . getClass ( ) ) ) { </a> 
<a> try { </a> 
<a> return <RARE_TOKEN> . class . cast ( msg ) . <RARE_TOKEN> ( ) ; </a> 
<a> } catch ( Exception e ) { </a> 
<a> logger . error ( "failed to cast <RARE_TOKEN> " + msg , e ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> return msg ; </a> 
<a> } </a> 
<a> protected void <RARE_TOKEN> ( final AtmosphereResource < ? , ? > resource , final Object msg , final <RARE_TOKEN> future ) { </a> 
<a> boolean <RARE_TOKEN> = true ; </a> 
<a> try { </a> 
<a> final <RARE_TOKEN> event = ( <RARE_TOKEN> ) resource . <RARE_TOKEN> ( ) ; </a> 
<a> boolean <RARE_TOKEN> = event . isCancelled ( ) || event . <RARE_TOKEN> ( ) || event . <RARE_TOKEN> ( ) || ! event . <RARE_TOKEN> ( ) ; </a> 
<a> if ( <RARE_TOKEN> ) { </a> 
<a> logger . debug ( <RARE_TOKEN> <RARE_TOKEN> has <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> , event ) ; </a> 
<a> <RARE_TOKEN> = false ; </a> 
<a> return ; </a> 
<a> } </a> 
<a> event . <RARE_TOKEN> ( msg ) ; </a> 
<a> try { </a> 
<a> if ( resource . <RARE_TOKEN> ( ) != null </a> 
<a> && ! resource . <RARE_TOKEN> ( ) . isCancelled ( ) </a> 
<a> && HttpServletRequest . class . isAssignableFrom ( resource . getRequest ( ) . getClass ( ) ) ) { </a> 
<a> HttpServletRequest . class . cast ( resource . getRequest ( ) ) </a> 
<a> . setAttribute ( <RARE_TOKEN> , System . currentTimeMillis ( ) ) ; </a> 
<a> } </a> 
<a> } catch ( Exception t ) { </a> 
<a> logger . warn ( <RARE_TOKEN> <RARE_TOKEN> , t ) ; </a> 
<a> logger . debug ( <RARE_TOKEN> <RARE_TOKEN> of a <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> + resource , event ) ; </a> 
<a> <RARE_TOKEN> ( resource ) ; </a> 
<a> BroadcasterFactory . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( resource ) ; </a> 
<a> event . <RARE_TOKEN> ( true ) ; </a> 
<a> event . <RARE_TOKEN> ( t ) ; </a> 
<a> return ; </a> 
<a> } </a> 
<a> broadcast ( resource , event ) ; </a> 
<a> } finally { </a> 
<a> if ( <RARE_TOKEN> && resource instanceof <RARE_TOKEN> ) { </a> 
<a> ( ( <RARE_TOKEN> ) resource ) . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> if ( future != null ) { </a> 
<a> future . done ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> protected Runnable <RARE_TOKEN> ( ) { </a> 
<a> return new Runnable ( ) { </a> 
<a> public void run ( ) { </a> 
<a> <RARE_TOKEN> token ; </a> 
<a> try { </a> 
<a> token = <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> bc . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( this ) ; </a> 
<a> synchronized ( token . resource ) { </a> 
<a> if ( AtmosphereResourceImpl . class . cast ( token . resource ) . <RARE_TOKEN> ( ) ) { </a> 
<a> <RARE_TOKEN> ( token . resource , token . msg , token . future ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } catch ( Throwable ex ) { </a> 
<a> if ( ! <RARE_TOKEN> . get ( ) ) { </a> 
<a> logger . trace ( "failed to <RARE_TOKEN> <RARE_TOKEN> write task <RARE_TOKEN> <RARE_TOKEN> , ex ) ; </a> 
<a> } else { </a> 
<a> logger . debug ( "failed to <RARE_TOKEN> <RARE_TOKEN> write <RARE_TOKEN> , ex ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } ; </a> 
<a> } </a> 
<a> protected void <RARE_TOKEN> ( final AtmosphereResource < ? , ? > r , final AtmosphereResourceEvent e ) { </a> 
<a> <RARE_TOKEN> ( r , e ) ; </a> 
<a> if ( e . getMessage ( ) instanceof List && ! ( ( List ) e . getMessage ( ) ) . isEmpty ( ) ) { </a> 
<a> HttpServletRequest . class . cast ( r . getRequest ( ) ) . setAttribute ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> broadcast ( r , e ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> protected boolean <RARE_TOKEN> ( final AtmosphereResource < ? , ? > r , final AtmosphereResourceEvent e ) { </a> 
<a> List < ? > <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( r ) ; </a> 
<a> if ( ! <RARE_TOKEN> . isEmpty ( ) ) { </a> 
<a> e . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> return true ; </a> 
<a> } </a> 
<a> return false ; </a> 
<a> } </a> 
<a> protected void <RARE_TOKEN> ( final AtmosphereResource < ? , ? > r , Object msg ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( r , msg ) ; </a> 
<a> } </a> 
<a> protected void broadcast ( final AtmosphereResource < ? , ? > r , final AtmosphereResourceEvent e ) { </a> 
<a> try { </a> 
<a> r . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( e ) ; </a> 
<a> } catch ( Throwable t ) { </a> 
<a> <RARE_TOKEN> ( t , r ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> protected void <RARE_TOKEN> ( Throwable t , final AtmosphereResource < ? , ? > r ) { </a> 
<a> logger . debug ( <RARE_TOKEN> , t ) ; </a> 
<a> <RARE_TOKEN> ( r ) ; </a> 
<a> final <RARE_TOKEN> event = ( <RARE_TOKEN> ) r . <RARE_TOKEN> ( ) ; </a> 
<a> event . <RARE_TOKEN> ( t ) ; </a> 
<a> if ( r instanceof <RARE_TOKEN> ) { </a> 
<a> ( ( <RARE_TOKEN> ) r ) </a> 
<a> . <RARE_TOKEN> ( event ) ; </a> 
<a> ( ( <RARE_TOKEN> ) r ) . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> bc . <RARE_TOKEN> ( ) . execute ( new Runnable ( ) { </a> 
<a> @ Override </a> 
<a> public void run ( ) { </a> 
<a> try { </a> 
<a> r . resume ( ) ; </a> 
<a> } catch ( Throwable t ) { </a> 
<a> logger . warn ( <RARE_TOKEN> <RARE_TOKEN> to resume a <RARE_TOKEN> AtmosphereResource {}" , r ) ; </a> 
<a> logger . warn ( <RARE_TOKEN> , t ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( long <RARE_TOKEN> , <RARE_TOKEN> policy ) { </a> 
<a> this . <RARE_TOKEN> . set ( <RARE_TOKEN> ) ; </a> 
<a> this . policy = policy ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public < T > Future < T > broadcast ( T msg ) { </a> 
<a> if ( <RARE_TOKEN> . get ( ) ) { </a> 
<a> logger . error ( <RARE_TOKEN> Broadcaster has <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> be <RARE_TOKEN> ) ; </a> 
<a> return null ; </a> 
<a> } </a> 
<a> start ( ) ; </a> 
<a> Object newMsg = filter ( msg ) ; </a> 
<a> if ( newMsg == null ) return null ; </a> 
<a> <RARE_TOKEN> < Object > f = new <RARE_TOKEN> < Object > ( newMsg ) ; </a> 
<a> messages . <RARE_TOKEN> ( new Entry ( newMsg , null , f , msg ) ) ; </a> 
<a> return f ; </a> 
<a> } </a> 
<a> protected Object filter ( Object msg ) { </a> 
<a> BroadcastAction a = bc . filter ( msg ) ; </a> 
<a> if ( a . action ( ) == BroadcastAction . <RARE_TOKEN> . <RARE_TOKEN> || msg == null ) </a> 
<a> return null ; </a> 
<a> else </a> 
<a> return a . message ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public < T > Future < T > broadcast ( T msg , AtmosphereResource < ? , ? > r ) { </a> 
<a> if ( <RARE_TOKEN> . get ( ) ) { </a> 
<a> logger . error ( <RARE_TOKEN> Broadcaster has <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> be <RARE_TOKEN> ) ; </a> 
<a> return null ; </a> 
<a> } </a> 
<a> start ( ) ; </a> 
<a> Object newMsg = filter ( msg ) ; </a> 
<a> if ( newMsg == null ) return null ; </a> 
<a> <RARE_TOKEN> < Object > f = new <RARE_TOKEN> < Object > ( newMsg ) ; </a> 
<a> messages . <RARE_TOKEN> ( new Entry ( newMsg , r , f , msg ) ) ; </a> 
<a> return f ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public < T > Future < T > <RARE_TOKEN> ( T msg ) { </a> 
<a> if ( <RARE_TOKEN> . get ( ) ) { </a> 
<a> logger . error ( <RARE_TOKEN> Broadcaster has <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> be <RARE_TOKEN> ) ; </a> 
<a> return null ; </a> 
<a> } </a> 
<a> start ( ) ; </a> 
<a> Object newMsg = filter ( msg ) ; </a> 
<a> if ( newMsg == null ) return null ; </a> 
<a> <RARE_TOKEN> < Object > f = new <RARE_TOKEN> < Object > ( newMsg ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( new Entry ( newMsg , null , f , msg ) ) ; </a> 
<a> return f ; </a> 
<a> } </a> 
<a> protected void <RARE_TOKEN> ( AtmosphereResource < ? , ? > r ) { </a> 
<a> Iterator < Entry > i = <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> while ( i . <RARE_TOKEN> ( ) ) { </a> 
<a> Entry e = i . next ( ) ; </a> 
<a> e . <RARE_TOKEN> = r ; </a> 
<a> <RARE_TOKEN> ( e ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> . isEmpty ( ) ) { </a> 
<a> <RARE_TOKEN> . clear ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public < T > Future < T > broadcast ( T msg , Set < AtmosphereResource < ? , ? > > <RARE_TOKEN> ) { </a> 
<a> if ( <RARE_TOKEN> . get ( ) ) { </a> 
<a> logger . error ( <RARE_TOKEN> Broadcaster has <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> be <RARE_TOKEN> ) ; </a> 
<a> return null ; </a> 
<a> } </a> 
<a> start ( ) ; </a> 
<a> Object newMsg = filter ( msg ) ; </a> 
<a> if ( newMsg == null ) return null ; </a> 
<a> <RARE_TOKEN> < Object > f = new <RARE_TOKEN> < Object > ( newMsg ) ; </a> 
<a> messages . <RARE_TOKEN> ( new Entry ( newMsg , <RARE_TOKEN> , f , msg ) ) ; </a> 
<a> return f ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public AtmosphereResource < ? , ? > <RARE_TOKEN> ( AtmosphereResource < ? , ? > r ) { </a> 
<a> if ( <RARE_TOKEN> . get ( ) ) { </a> 
<a> logger . error ( <RARE_TOKEN> Broadcaster has <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> be <RARE_TOKEN> ) ; </a> 
<a> return r ; </a> 
<a> } </a> 
<a> if ( scope == SCOPE . <RARE_TOKEN> && <RARE_TOKEN> . <RARE_TOKEN> ( true ) ) { </a> 
<a> throw new IllegalStateException ( <RARE_TOKEN> " + this </a> 
<a> + " <RARE_TOKEN> be <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> scope is set to <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> . get ( ) > 0 && <RARE_TOKEN> . size ( ) >= <RARE_TOKEN> . get ( ) ) { </a> 
<a> if ( policy == <RARE_TOKEN> . <RARE_TOKEN> ) { </a> 
<a> AtmosphereResource < ? , ? > resource = <RARE_TOKEN> . poll ( ) ; </a> 
<a> try { </a> 
<a> logger . warn ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> resume of <RARE_TOKEN> " , resource ) ; </a> 
<a> resource . resume ( ) ; </a> 
<a> } catch ( Throwable t ) { </a> 
<a> logger . warn ( "failed to resume resource <RARE_TOKEN> " , resource , t ) ; </a> 
<a> } </a> 
<a> } else if ( policy == <RARE_TOKEN> . <RARE_TOKEN> ) { </a> 
<a> throw new <RARE_TOKEN> ( String . format ( <RARE_TOKEN> suspended <RARE_TOKEN> <RARE_TOKEN> , <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> . contains ( r ) ) { </a> 
<a> return r ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> . isEmpty ( ) ) { </a> 
<a> BroadcasterFactory . <RARE_TOKEN> ( ) . add ( this , name ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> . add ( r ) ; </a> 
<a> <RARE_TOKEN> ( r , r . <RARE_TOKEN> ( ) ) ; </a> 
<a> return r ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public AtmosphereResource < ? , ? > <RARE_TOKEN> ( AtmosphereResource r ) { </a> 
<a> if ( <RARE_TOKEN> . get ( ) ) { </a> 
<a> logger . error ( <RARE_TOKEN> Broadcaster has <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> be <RARE_TOKEN> ) ; </a> 
<a> return r ; </a> 
<a> } </a> 
<a> if ( ! <RARE_TOKEN> . contains ( r ) ) { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> . remove ( r ) ; </a> 
<a> if ( <RARE_TOKEN> . isEmpty ( ) ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> if ( scope != SCOPE . <RARE_TOKEN> && <RARE_TOKEN> . <RARE_TOKEN> ( ) == <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } else if ( <RARE_TOKEN> . <RARE_TOKEN> ( ) == <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> BroadcasterFactory . <RARE_TOKEN> ( ) . remove ( this , name ) ; </a> 
<a> destroy ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> return r ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( ) { </a> 
<a> for ( <RARE_TOKEN> b : <RARE_TOKEN> ) { </a> 
<a> b . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( ) { </a> 
<a> for ( <RARE_TOKEN> b : <RARE_TOKEN> ) { </a> 
<a> b . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( ) { </a> 
<a> for ( <RARE_TOKEN> b : <RARE_TOKEN> ) { </a> 
<a> b . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( <RARE_TOKEN> bc ) { </a> 
<a> this . bc = bc ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> <RARE_TOKEN> ( ) { </a> 
<a> return bc ; </a> 
<a> } </a> 
<a> public < T > Future < T > <RARE_TOKEN> ( T o ) { </a> 
<a> return <RARE_TOKEN> ( o , 0 , null ) ; </a> 
<a> } </a> 
<a> public < T > Future < T > <RARE_TOKEN> ( final T o , long delay , TimeUnit t ) { </a> 
<a> if ( <RARE_TOKEN> . get ( ) ) { </a> 
<a> logger . error ( <RARE_TOKEN> Broadcaster has <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> be <RARE_TOKEN> ) ; </a> 
<a> return null ; </a> 
<a> } </a> 
<a> start ( ) ; </a> 
<a> final Object msg = filter ( o ) ; </a> 
<a> if ( msg == null ) return null ; </a> 
<a> final <RARE_TOKEN> < Object > future = new <RARE_TOKEN> < Object > ( msg ) ; </a> 
<a> final Entry e = new Entry ( msg , null , future , o ) ; </a> 
<a> Future < T > f ; </a> 
<a> if ( delay > 0 ) { </a> 
<a> f = bc . <RARE_TOKEN> ( ) . schedule ( new <RARE_TOKEN> < T > ( ) { </a> 
<a> public T <RARE_TOKEN> ( ) throws Exception { </a> 
<a> <RARE_TOKEN> . remove ( e ) ; </a> 
<a> if ( <RARE_TOKEN> . class . isAssignableFrom ( o . getClass ( ) ) ) { </a> 
<a> try { </a> 
<a> Object r = <RARE_TOKEN> . class . cast ( o ) . <RARE_TOKEN> ( ) ; </a> 
<a> final Object msg = filter ( r ) ; </a> 
<a> if ( msg != null ) { </a> 
<a> Entry entry = new Entry ( msg , null , null , r ) ; </a> 
<a> <RARE_TOKEN> ( entry ) ; </a> 
<a> } </a> 
<a> return ( T ) msg ; </a> 
<a> } catch ( Exception <RARE_TOKEN> ) { </a> 
<a> logger . error ( "" , e ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> final Object msg = filter ( o ) ; </a> 
<a> final Entry e = new Entry ( msg , null , null , o ) ; </a> 
<a> <RARE_TOKEN> ( e ) ; </a> 
<a> return ( T ) msg ; </a> 
<a> } </a> 
<a> } , delay , t ) ; </a> 
<a> e . future = new <RARE_TOKEN> < Object > ( f , msg ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( e ) ; </a> 
<a> return future ; </a> 
<a> } </a> 
<a> public Future < ? > <RARE_TOKEN> ( final Object o , long period , TimeUnit t ) { </a> 
<a> return <RARE_TOKEN> ( o , 0 , period , t ) ; </a> 
<a> } </a> 
<a> public Future < ? > <RARE_TOKEN> ( final Object o , long <RARE_TOKEN> , long period , TimeUnit t ) { </a> 
<a> if ( <RARE_TOKEN> . get ( ) ) { </a> 
<a> logger . error ( <RARE_TOKEN> Broadcaster has <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> be <RARE_TOKEN> ) ; </a> 
<a> return null ; </a> 
<a> } </a> 
<a> start ( ) ; </a> 
<a> if ( period == 0 || t == null ) { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> start ( ) ; </a> 
<a> final Object msg = filter ( o ) ; </a> 
<a> if ( msg == null ) return null ; </a> 
<a> return bc . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( new Runnable ( ) { </a> 
<a> public void run ( ) { </a> 
<a> if ( <RARE_TOKEN> . class . isAssignableFrom ( o . getClass ( ) ) ) { </a> 
<a> try { </a> 
<a> Object r = <RARE_TOKEN> . class . cast ( o ) . <RARE_TOKEN> ( ) ; </a> 
<a> final Object msg = filter ( r ) ; </a> 
<a> if ( msg != null ) { </a> 
<a> Entry entry = new Entry ( msg , null , null , r ) ; </a> 
<a> <RARE_TOKEN> ( entry ) ; </a> 
<a> } </a> 
<a> return ; </a> 
<a> } catch ( Exception e ) { </a> 
<a> logger . error ( "" , e ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> final Object msg = filter ( o ) ; </a> 
<a> final Entry e = new Entry ( msg , null , null , o ) ; </a> 
<a> <RARE_TOKEN> ( e ) ; </a> 
<a> } </a> 
<a> } , <RARE_TOKEN> , period , t ) ; </a> 
<a> } </a> 
<a> public String toString ( ) { </a> 
<a> return new StringBuilder ( this . getClass ( ) . getName ( ) ) . append ( <RARE_TOKEN> ) . append ( this . hashCode ( ) ) . append ( <RARE_TOKEN> ) </a> 
<a> . append ( <RARE_TOKEN> " ) . append ( name ) . append ( <RARE_TOKEN> ) </a> 
<a> . append ( <RARE_TOKEN> " ) . append ( scope ) . append ( <RARE_TOKEN> ) </a> 
<a> . append ( <RARE_TOKEN> " ) . append ( <RARE_TOKEN> ) . append ( <RARE_TOKEN> ) </a> 
<a> . append ( <RARE_TOKEN> " ) . append ( <RARE_TOKEN> . size ( ) ) . append ( <RARE_TOKEN> ) </a> 
<a> . toString ( ) ; </a> 
<a> } </a> 
<a> private static class <RARE_TOKEN> { </a> 
<a> final AtmosphereResource < ? , ? > resource ; </a> 
<a> final Object msg ; </a> 
<a> final <RARE_TOKEN> future ; </a> 
<a> public <RARE_TOKEN> ( AtmosphereResource < ? , ? > resource , Object msg , <RARE_TOKEN> future ) { </a> 
<a> this . resource = resource ; </a> 
<a> this . msg = msg ; </a> 
<a> this . future = future ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . cpr ; </a> 
<a> import org . atmosphere . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . util . <RARE_TOKEN> ; </a> 
<a> import org . slf4j . Logger ; </a> 
<a> import org . slf4j . LoggerFactory ; </a> 
<a> import java . util . Collection ; </a> 
<a> import java . util . Collections ; </a> 
<a> import java . util . <RARE_TOKEN> ; </a> 
<a> import java . util . <RARE_TOKEN> ; </a> 
<a> import java . util . concurrent . ConcurrentHashMap ; </a> 
<a> import static org . atmosphere . cpr . <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import static org . atmosphere . cpr . <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import static org . atmosphere . cpr . <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import static org . atmosphere . cpr . <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import static org . atmosphere . cpr . <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> public class <RARE_TOKEN> extends BroadcasterFactory { </a> 
<a> private static final Logger logger = LoggerFactory . getLogger ( <RARE_TOKEN> . class ) ; </a> 
<a> private final ConcurrentHashMap < Object , Broadcaster > <RARE_TOKEN> </a> 
<a> = new ConcurrentHashMap < Object , Broadcaster > ( ) ; </a> 
<a> private final Class < ? extends Broadcaster > clazz ; </a> 
<a> private <RARE_TOKEN> policy = </a> 
<a> new <RARE_TOKEN> . Builder ( ) . policy ( <RARE_TOKEN> ) . build ( ) ; </a> 
<a> protected <RARE_TOKEN> ( Class < ? extends Broadcaster > clazz , String <RARE_TOKEN> ) { </a> 
<a> this . clazz = clazz ; </a> 
<a> if ( factory == null ) { </a> 
<a> this . factory = this ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( String <RARE_TOKEN> ) { </a> 
<a> if ( <RARE_TOKEN> . name ( ) . equalsIgnoreCase ( <RARE_TOKEN> ) ) { </a> 
<a> policy = new <RARE_TOKEN> . Builder ( ) . policy ( <RARE_TOKEN> ) . build ( ) ; </a> 
<a> } else if ( <RARE_TOKEN> . name ( ) . equalsIgnoreCase ( <RARE_TOKEN> ) ) { </a> 
<a> policy = new <RARE_TOKEN> . Builder ( ) . policy ( <RARE_TOKEN> ) . build ( ) ; </a> 
<a> } else if ( <RARE_TOKEN> . name ( ) . equalsIgnoreCase ( <RARE_TOKEN> ) ) { </a> 
<a> policy = new <RARE_TOKEN> . Builder ( ) . policy ( <RARE_TOKEN> ) . <RARE_TOKEN> ( 5 * <RARE_TOKEN> * <RARE_TOKEN> ) . build ( ) ; </a> 
<a> } else if ( <RARE_TOKEN> . name ( ) . equalsIgnoreCase ( <RARE_TOKEN> ) ) { </a> 
<a> policy = new <RARE_TOKEN> . Builder ( ) . policy ( <RARE_TOKEN> ) . <RARE_TOKEN> ( 5 * <RARE_TOKEN> * <RARE_TOKEN> ) . build ( ) ; </a> 
<a> } else if ( <RARE_TOKEN> . name ( ) . equalsIgnoreCase ( <RARE_TOKEN> ) ) { </a> 
<a> policy = new <RARE_TOKEN> . Builder ( ) . policy ( <RARE_TOKEN> ) . build ( ) ; </a> 
<a> } else { </a> 
<a> logger . warn ( <RARE_TOKEN> <RARE_TOKEN> policy {}" , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public synchronized final Broadcaster get ( ) throws <RARE_TOKEN> , <RARE_TOKEN> { </a> 
<a> Broadcaster b = clazz . newInstance ( ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) . inject ( b ) ; </a> 
<a> if ( <RARE_TOKEN> . class . isAssignableFrom ( b . getClass ( ) ) ) { </a> 
<a> <RARE_TOKEN> . class . cast ( b ) . <RARE_TOKEN> ( config ) ; </a> 
<a> } </a> 
<a> b . <RARE_TOKEN> ( new <RARE_TOKEN> ( AtmosphereServlet . <RARE_TOKEN> , config ) ) ; </a> 
<a> b . <RARE_TOKEN> ( clazz . getSimpleName ( ) + <RARE_TOKEN> + <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> b . <RARE_TOKEN> ( policy ) ; </a> 
<a> <RARE_TOKEN> . put ( b . <RARE_TOKEN> ( ) , b ) ; </a> 
<a> return b ; </a> 
<a> } </a> 
<a> public synchronized final Broadcaster get ( Class < ? extends Broadcaster > c , Object id ) throws <RARE_TOKEN> , <RARE_TOKEN> { </a> 
<a> if ( id == null ) throw new NullPointerException ( <RARE_TOKEN> is <RARE_TOKEN> ) ; </a> 
<a> if ( c == null ) throw new NullPointerException ( <RARE_TOKEN> is <RARE_TOKEN> ) ; </a> 
<a> if ( getBroadcaster ( id ) != null ) </a> 
<a> throw new IllegalStateException ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> Broadcaster b = c . newInstance ( ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) . inject ( b ) ; </a> 
<a> if ( <RARE_TOKEN> . class . isAssignableFrom ( b . getClass ( ) ) ) { </a> 
<a> <RARE_TOKEN> . class . cast ( b ) . <RARE_TOKEN> ( config ) ; </a> 
<a> } </a> 
<a> b . <RARE_TOKEN> ( new <RARE_TOKEN> ( AtmosphereServlet . <RARE_TOKEN> , config ) ) ; </a> 
<a> b . <RARE_TOKEN> ( id . toString ( ) ) ; </a> 
<a> b . <RARE_TOKEN> ( policy ) ; </a> 
<a> <RARE_TOKEN> . put ( id , b ) ; </a> 
<a> return b ; </a> 
<a> } </a> 
<a> private Broadcaster getBroadcaster ( Object name ) { </a> 
<a> return <RARE_TOKEN> . get ( name ) ; </a> 
<a> } </a> 
<a> public boolean add ( Broadcaster b , Object id ) { </a> 
<a> return ( <RARE_TOKEN> . put ( id , b ) == null ) ; </a> 
<a> } </a> 
<a> public boolean remove ( Broadcaster b , Object id ) { </a> 
<a> return ( <RARE_TOKEN> . remove ( id ) != null ) ; </a> 
<a> } </a> 
<a> public final Broadcaster <RARE_TOKEN> ( Class < ? extends Broadcaster > c , Object id ) { </a> 
<a> return <RARE_TOKEN> ( c , id , false ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public Broadcaster <RARE_TOKEN> ( Class < ? extends Broadcaster > c , Object id , boolean <RARE_TOKEN> ) { </a> 
<a> Broadcaster b = getBroadcaster ( id ) ; </a> 
<a> if ( b != null && ! c . isAssignableFrom ( b . getClass ( ) ) ) { </a> 
<a> String msg = <RARE_TOKEN> <RARE_TOKEN> class " + c . getName ( ) + <RARE_TOKEN> <RARE_TOKEN> class <RARE_TOKEN> " + b . getClass ( ) . getName ( ) ; </a> 
<a> logger . debug ( <RARE_TOKEN> , msg ) ; </a> 
<a> throw new IllegalStateException ( msg ) ; </a> 
<a> } </a> 
<a> if ( b == null && <RARE_TOKEN> ) { </a> 
<a> try { </a> 
<a> b = get ( c , id ) ; </a> 
<a> } catch ( <RARE_TOKEN> e ) { </a> 
<a> throw new IllegalStateException ( e ) ; </a> 
<a> } catch ( <RARE_TOKEN> e ) { </a> 
<a> throw new IllegalStateException ( e ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> return b ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( AtmosphereResource < ? , ? > r ) { </a> 
<a> try { </a> 
<a> synchronized ( r ) { </a> 
<a> if ( <RARE_TOKEN> . size ( ) > 0 ) { </a> 
<a> for ( Broadcaster b : <RARE_TOKEN> ( ) ) { </a> 
<a> try { </a> 
<a> b . <RARE_TOKEN> ( r ) ; </a> 
<a> } catch ( IllegalStateException ex ) { </a> 
<a> logger . trace ( ex . getMessage ( ) , ex ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } catch ( Exception ex ) { </a> 
<a> logger . warn ( ex . getMessage ( ) , ex ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public Collection < Broadcaster > <RARE_TOKEN> ( ) { </a> 
<a> return Collections . <RARE_TOKEN> ( <RARE_TOKEN> . values ( ) ) ; </a> 
<a> } </a> 
<a> public synchronized void destroy ( ) { </a> 
<a> <RARE_TOKEN> < Broadcaster > e = <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> while ( e . <RARE_TOKEN> ( ) ) { </a> 
<a> e . <RARE_TOKEN> ( ) . destroy ( ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> . clear ( ) ; </a> 
<a> factory = null ; </a> 
<a> } </a> 
<a> public static BroadcasterFactory <RARE_TOKEN> ( Class < ? extends Broadcaster > clazz , AtmosphereServlet . AtmosphereConfig c ) </a> 
<a> throws <RARE_TOKEN> , <RARE_TOKEN> { </a> 
<a> factory = new <RARE_TOKEN> ( clazz , <RARE_TOKEN> ) ; </a> 
<a> config = c ; </a> 
<a> return factory ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . cpr ; </a> 
<a> public interface FrameworkConfig { </a> 
<a> String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> String <RARE_TOKEN> = AtmosphereServlet . class . getName ( ) ; </a> 
<a> String <RARE_TOKEN> = AtmosphereResource . class . getName ( ) ; </a> 
<a> String <RARE_TOKEN> = <RARE_TOKEN> . class . getName ( ) + <RARE_TOKEN> ; </a> 
<a> String <RARE_TOKEN> = AtmosphereHandler . class . getName ( ) ; </a> 
<a> String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> String <RARE_TOKEN> = AtmosphereResource . class . getName ( ) + <RARE_TOKEN> + <RARE_TOKEN> ; </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . cpr ; </a> 
<a> public interface HeaderConfig { </a> 
<a> String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . cpr ; </a> 
<a> import org . atmosphere . handler . <RARE_TOKEN> ; </a> 
<a> import javax . servlet . ServletConfig ; </a> 
<a> import javax . servlet . <RARE_TOKEN> ; </a> 
<a> import javax . servlet . ServletException ; </a> 
<a> public class <RARE_TOKEN> extends AtmosphereServlet { </a> 
<a> private final static String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private final static String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private final static String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private final static String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( ServletConfig sc ) throws ServletException { </a> 
<a> String <RARE_TOKEN> = sc . getInitParameter ( <RARE_TOKEN> ) ; </a> 
<a> String mapping = sc . getInitParameter ( <RARE_TOKEN> ) ; </a> 
<a> String <RARE_TOKEN> = sc . getInitParameter ( <RARE_TOKEN> ) ; </a> 
<a> String <RARE_TOKEN> = sc . getInitParameter ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> r = new <RARE_TOKEN> ( ) ; </a> 
<a> r . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> r . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> r . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> if ( mapping == null ) { </a> 
<a> mapping = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( mapping , r ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void destroy ( ) { </a> 
<a> super . destroy ( ) ; </a> 
<a> <RARE_TOKEN> . destroy ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . cpr ; </a> 
<a> import javax . servlet . http . HttpServletRequest ; </a> 
<a> import javax . servlet . http . HttpServletResponse ; </a> 
<a> public interface <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> BroadcastAction filter ( HttpServletRequest request , HttpServletResponse response , Object message ) ; </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . cpr ; </a> 
<a> public interface <RARE_TOKEN> { </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . <RARE_TOKEN> ; </a> 
<a> public interface <RARE_TOKEN> { </a> 
<a> void inject ( Object o ) ; </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . <RARE_TOKEN> ; </a> 
<a> import java . util . <RARE_TOKEN> ; </a> 
<a> import java . util . <RARE_TOKEN> ; </a> 
<a> public final class <RARE_TOKEN> { </a> 
<a> private <RARE_TOKEN> ( ) { </a> 
<a> } </a> 
<a> public static <RARE_TOKEN> <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> private static final class <RARE_TOKEN> { </a> 
<a> private static final <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> static { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( ) ; </a> 
<a> try { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> . class ) . <RARE_TOKEN> ( ) . next ( ) ; </a> 
<a> } catch ( <RARE_TOKEN> e ) { </a> 
<a> } </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . <RARE_TOKEN> ; </a> 
<a> final class <RARE_TOKEN> implements <RARE_TOKEN> { </a> 
<a> public void inject ( Object o ) { </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . <RARE_TOKEN> ; </a> 
<a> import javax . servlet . <RARE_TOKEN> ; </a> 
<a> public interface <RARE_TOKEN> { </a> 
<a> <RARE_TOKEN> getServletContext ( ) ; </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . handler ; </a> 
<a> import org . atmosphere . cpr . AtmosphereHandler ; </a> 
<a> import org . atmosphere . cpr . AtmosphereResource ; </a> 
<a> import org . atmosphere . cpr . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . cpr . FrameworkConfig ; </a> 
<a> import org . atmosphere . util . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . util . <RARE_TOKEN> ; </a> 
<a> import org . slf4j . Logger ; </a> 
<a> import org . slf4j . LoggerFactory ; </a> 
<a> import javax . servlet . Filter ; </a> 
<a> import javax . servlet . <RARE_TOKEN> ; </a> 
<a> import javax . servlet . <RARE_TOKEN> ; </a> 
<a> import javax . servlet . ServletConfig ; </a> 
<a> import javax . servlet . <RARE_TOKEN> ; </a> 
<a> import javax . servlet . ServletException ; </a> 
<a> import javax . servlet . <RARE_TOKEN> ; </a> 
<a> import javax . servlet . <RARE_TOKEN> ; </a> 
<a> import javax . servlet . http . <RARE_TOKEN> ; </a> 
<a> import javax . servlet . http . HttpServletRequest ; </a> 
<a> import javax . servlet . http . HttpServletResponse ; </a> 
<a> import java . io . IOException ; </a> 
<a> import java . net . <RARE_TOKEN> ; </a> 
<a> import java . net . URL ; </a> 
<a> import java . net . <RARE_TOKEN> ; </a> 
<a> import java . util . ArrayList ; </a> 
<a> import java . util . <RARE_TOKEN> ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> </a> 
<a> implements <RARE_TOKEN> { </a> 
<a> private final static String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final Logger logger = LoggerFactory . getLogger ( <RARE_TOKEN> . class ) ; </a> 
<a> private String <RARE_TOKEN> ; </a> 
<a> private final ArrayList < String > <RARE_TOKEN> = new ArrayList < String > ( ) ; </a> 
<a> private final <RARE_TOKEN> wrapper = new <RARE_TOKEN> ( ) ; </a> 
<a> private final <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( ) ; </a> 
<a> private <RARE_TOKEN> servlet ; </a> 
<a> private String <RARE_TOKEN> ; </a> 
<a> public <RARE_TOKEN> ( ) { </a> 
<a> } </a> 
<a> void <RARE_TOKEN> ( ServletConfig sc ) throws <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> { </a> 
<a> URL url = sc . getServletContext ( ) . getResource ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( new URL [ ] { url } , </a> 
<a> Thread . currentThread ( ) . <RARE_TOKEN> ( ) ) ; </a> 
<a> if ( <RARE_TOKEN> ( ) != null && servlet == null ) { </a> 
<a> try { </a> 
<a> servlet = ( <RARE_TOKEN> ) <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ( ) ) . newInstance ( ) ; </a> 
<a> } catch ( NullPointerException ex ) { </a> 
<a> servlet = ( <RARE_TOKEN> ) Thread . currentThread ( ) . <RARE_TOKEN> ( ) </a> 
<a> . <RARE_TOKEN> ( <RARE_TOKEN> ) . newInstance ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> logger . info ( <RARE_TOKEN> <RARE_TOKEN> {}" , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( sc , servlet ) ; </a> 
<a> Filter f ; </a> 
<a> for ( String <RARE_TOKEN> : <RARE_TOKEN> ) { </a> 
<a> try { </a> 
<a> f = ( Filter ) <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) . newInstance ( ) ; </a> 
<a> } catch ( NullPointerException ex ) { </a> 
<a> f = ( Filter ) Thread . currentThread ( ) . <RARE_TOKEN> ( ) </a> 
<a> . <RARE_TOKEN> ( <RARE_TOKEN> ) . newInstance ( ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( sc ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( f ) ; </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> if ( sc . getInitParameter ( <RARE_TOKEN> ) != null ) { </a> 
<a> <RARE_TOKEN> = sc . getInitParameter ( <RARE_TOKEN> ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> = f . getClass ( ) . getSimpleName ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> logger . info ( <RARE_TOKEN> Filter {}" , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( AtmosphereResource < HttpServletRequest , HttpServletResponse > r ) </a> 
<a> throws IOException { </a> 
<a> r . getRequest ( ) . setAttribute ( FrameworkConfig . <RARE_TOKEN> , r ) ; </a> 
<a> r . getRequest ( ) . setAttribute ( FrameworkConfig . <RARE_TOKEN> , this ) ; </a> 
<a> try { </a> 
<a> wrapper . service ( r . getRequest ( ) , r . getResponse ( ) ) ; </a> 
<a> } catch ( Throwable ex ) { </a> 
<a> logger . error ( <RARE_TOKEN> , ex ) ; </a> 
<a> throw new <RARE_TOKEN> ( ex ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public void init ( ServletConfig sc ) throws ServletException { </a> 
<a> try { </a> 
<a> <RARE_TOKEN> ( sc ) ; </a> 
<a> } catch ( Exception ex ) { </a> 
<a> throw new ServletException ( ex ) ; </a> 
<a> } </a> 
<a> wrapper . init ( sc ) ; </a> 
<a> } </a> 
<a> public void destroy ( ) { </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> . destroy ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public String <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( String <RARE_TOKEN> ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public String <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( String <RARE_TOKEN> ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( String <RARE_TOKEN> ) { </a> 
<a> if ( <RARE_TOKEN> == null ) return ; </a> 
<a> <RARE_TOKEN> . add ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> <RARE_TOKEN> ( ) { </a> 
<a> return servlet ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( <RARE_TOKEN> servlet ) { </a> 
<a> this . servlet = servlet ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( String <RARE_TOKEN> ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> private class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> @ Override </a> 
<a> public void destroy ( ) { </a> 
<a> <RARE_TOKEN> . destroy ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public String getInitParameter ( String name ) { </a> 
<a> return <RARE_TOKEN> ( ) . getInitParameter ( name ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public <RARE_TOKEN> <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ServletConfig <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public <RARE_TOKEN> getServletContext ( ) { </a> 
<a> return <RARE_TOKEN> ( ) . getServletContext ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public String <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void init ( ServletConfig sc ) throws ServletException { </a> 
<a> <RARE_TOKEN> . init ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void init ( ) throws ServletException { </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void log ( String msg ) { </a> 
<a> getServletContext ( ) . log ( <RARE_TOKEN> ( ) + <RARE_TOKEN> " + msg ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void log ( String message , Throwable t ) { </a> 
<a> getServletContext ( ) . log ( <RARE_TOKEN> ( ) + <RARE_TOKEN> " + message , t ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void service ( <RARE_TOKEN> req , <RARE_TOKEN> res ) </a> 
<a> throws ServletException , IOException { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( req , res ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public String <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . handler ; </a> 
<a> import org . atmosphere . cpr . AtmosphereHandler ; </a> 
<a> import org . atmosphere . cpr . AtmosphereResource ; </a> 
<a> import org . atmosphere . cpr . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . cpr . Broadcaster ; </a> 
<a> import org . atmosphere . cpr . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . websocket . <RARE_TOKEN> ; </a> 
<a> import org . slf4j . Logger ; </a> 
<a> import org . slf4j . LoggerFactory ; </a> 
<a> import javax . servlet . ServletException ; </a> 
<a> import javax . servlet . http . HttpServletRequest ; </a> 
<a> import javax . servlet . http . HttpServletResponse ; </a> 
<a> import java . io . IOException ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> private static final Logger logger = LoggerFactory . getLogger ( <RARE_TOKEN> . class ) ; </a> 
<a> @ Override </a> 
<a> public final void <RARE_TOKEN> ( AtmosphereResource < HttpServletRequest , HttpServletResponse > r ) throws IOException { </a> 
<a> if ( ! r . getResponse ( ) . getClass ( ) . isAssignableFrom ( <RARE_TOKEN> . class ) ) { </a> 
<a> try { </a> 
<a> r . <RARE_TOKEN> ( ) . getServletContext ( ) </a> 
<a> . <RARE_TOKEN> ( r . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( ) ) </a> 
<a> . <RARE_TOKEN> ( r . getRequest ( ) , r . getResponse ( ) ) ; </a> 
<a> } catch ( ServletException e ) { </a> 
<a> IOException <RARE_TOKEN> = new IOException ( ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( e ) ; </a> 
<a> throw <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> ( r ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( AtmosphereResource < HttpServletRequest , HttpServletResponse > resource ) throws IOException { </a> 
<a> logger . debug ( <RARE_TOKEN> <RARE_TOKEN> {}" , resource . getRequest ( ) ) ; </a> 
<a> resource . suspend ( - 1 , false ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void destroy ( ) { </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . util ; </a> 
<a> import org . atmosphere . cpr . AtmosphereResource ; </a> 
<a> import org . atmosphere . cpr . AtmosphereResourceEvent ; </a> 
<a> import org . atmosphere . cpr . AtmosphereServlet ; </a> 
<a> import org . atmosphere . cpr . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . cpr . FrameworkConfig ; </a> 
<a> import org . atmosphere . cpr . <RARE_TOKEN> ; </a> 
<a> import org . slf4j . Logger ; </a> 
<a> import org . slf4j . LoggerFactory ; </a> 
<a> import javax . servlet . http . HttpServletRequest ; </a> 
<a> import java . lang . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import java . util . Set ; </a> 
<a> import java . util . concurrent . Future ; </a> 
<a> public abstract class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> private static final Logger logger = LoggerFactory . getLogger ( <RARE_TOKEN> . class ) ; </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> protected AtmosphereServlet . AtmosphereConfig config ; </a> 
<a> public <RARE_TOKEN> ( ) { </a> 
<a> this ( <RARE_TOKEN> . class . getSimpleName ( ) ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( String id ) { </a> 
<a> super ( id ) ; </a> 
<a> start ( ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( AtmosphereServlet . AtmosphereConfig config ) { </a> 
<a> this . config = config ; </a> 
<a> } </a> 
<a> abstract public void <RARE_TOKEN> ( ) ; </a> 
<a> abstract public void <RARE_TOKEN> ( Object message ) ; </a> 
<a> @ Override </a> 
<a> protected Runnable <RARE_TOKEN> ( ) { </a> 
<a> return new Runnable ( ) { </a> 
<a> public void run ( ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } ; </a> 
<a> } </a> 
<a> protected void <RARE_TOKEN> ( ) { </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> . cancel ( true ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> = bc . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void broadcast ( final AtmosphereResource < ? , ? > r , final AtmosphereResourceEvent e ) { </a> 
<a> if ( r . getRequest ( ) instanceof HttpServletRequest ) { </a> 
<a> if ( ( ( HttpServletRequest ) r . getRequest ( ) ) . getAttribute ( FrameworkConfig . <RARE_TOKEN> ) != null ) { </a> 
<a> try { </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> Class <RARE_TOKEN> = Class . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> , new Class [ ] { AtmosphereResource . class , AtmosphereResourceEvent . class } ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( null , new Object [ ] { r , e } ) ; </a> 
<a> } catch ( Throwable t ) { </a> 
<a> super . broadcast ( r , e ) ; </a> 
<a> } </a> 
<a> } else { </a> 
<a> super . broadcast ( r , e ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> protected void <RARE_TOKEN> ( Object message ) { </a> 
<a> try { </a> 
<a> Object newMsg = filter ( message ) ; </a> 
<a> <RARE_TOKEN> ( new Entry ( newMsg , null , new <RARE_TOKEN> < Object > ( newMsg ) , message ) ) ; </a> 
<a> } catch ( Throwable t ) { </a> 
<a> logger . error ( "failed to <RARE_TOKEN> <RARE_TOKEN> " + message , t ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public < T > Future < T > broadcast ( T msg ) { </a> 
<a> Object newMsg = filter ( msg ) ; </a> 
<a> if ( newMsg == null ) return null ; </a> 
<a> <RARE_TOKEN> < Object > f = new <RARE_TOKEN> < Object > ( newMsg ) ; </a> 
<a> try { </a> 
<a> <RARE_TOKEN> ( msg ) ; </a> 
<a> <RARE_TOKEN> ( new Entry ( newMsg , null , f , false ) ) ; </a> 
<a> } finally { </a> 
<a> f . done ( ) ; </a> 
<a> } </a> 
<a> return f ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public < T > Future < T > broadcast ( T msg , AtmosphereResource < ? , ? > r ) { </a> 
<a> Object newMsg = filter ( msg ) ; </a> 
<a> if ( newMsg == null ) return null ; </a> 
<a> <RARE_TOKEN> < Object > f = new <RARE_TOKEN> < Object > ( newMsg ) ; </a> 
<a> try { </a> 
<a> <RARE_TOKEN> ( msg ) ; </a> 
<a> <RARE_TOKEN> ( new Entry ( newMsg , r , f , false ) ) ; </a> 
<a> } finally { </a> 
<a> f . done ( ) ; </a> 
<a> } </a> 
<a> return f ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public < T > Future < T > broadcast ( T msg , Set < AtmosphereResource < ? , ? > > <RARE_TOKEN> ) { </a> 
<a> Object newMsg = filter ( msg ) ; </a> 
<a> if ( newMsg == null ) return null ; </a> 
<a> <RARE_TOKEN> < Object > f = new <RARE_TOKEN> < Object > ( newMsg ) ; </a> 
<a> try { </a> 
<a> <RARE_TOKEN> ( msg ) ; </a> 
<a> <RARE_TOKEN> ( new Entry ( newMsg , <RARE_TOKEN> , f , false ) ) ; </a> 
<a> } finally { </a> 
<a> f . done ( ) ; </a> 
<a> } </a> 
<a> return f ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . util ; </a> 
<a> import javax . servlet . Filter ; </a> 
<a> import javax . servlet . <RARE_TOKEN> ; </a> 
<a> import javax . servlet . <RARE_TOKEN> ; </a> 
<a> import javax . servlet . ServletConfig ; </a> 
<a> import javax . servlet . ServletException ; </a> 
<a> import javax . servlet . <RARE_TOKEN> ; </a> 
<a> import javax . servlet . <RARE_TOKEN> ; </a> 
<a> import java . io . IOException ; </a> 
<a> import java . util . concurrent . atomic . AtomicInteger ; </a> 
<a> public final class <RARE_TOKEN> implements <RARE_TOKEN> { </a> 
<a> public static final int <RARE_TOKEN> = 20 ; </a> 
<a> private <RARE_TOKEN> [ ] <RARE_TOKEN> = new <RARE_TOKEN> [ 20 ] ; </a> 
<a> private int n = 0 ; </a> 
<a> private <RARE_TOKEN> servlet = null ; </a> 
<a> private ServletConfig <RARE_TOKEN> ; </a> 
<a> public <RARE_TOKEN> ( ) { </a> 
<a> } </a> 
<a> public void init ( ) throws ServletException { </a> 
<a> for ( <RARE_TOKEN> f : <RARE_TOKEN> ) { </a> 
<a> if ( f != null ) { </a> 
<a> f . <RARE_TOKEN> ( ) . init ( f ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> if ( servlet != null ) { </a> 
<a> servlet . init ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( <RARE_TOKEN> request , <RARE_TOKEN> response ) </a> 
<a> throws IOException , ServletException { </a> 
<a> request . setAttribute ( <RARE_TOKEN> , new AtomicInteger ( 0 ) ) ; </a> 
<a> <RARE_TOKEN> ( request , response ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( <RARE_TOKEN> request , <RARE_TOKEN> response ) </a> 
<a> throws IOException , ServletException { </a> 
<a> AtomicInteger pos = ( ( AtomicInteger ) request . getAttribute ( <RARE_TOKEN> ) ) ; </a> 
<a> if ( pos . get ( ) < n ) { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = <RARE_TOKEN> [ pos . <RARE_TOKEN> ( ) ] ; </a> 
<a> Filter filter = null ; </a> 
<a> try { </a> 
<a> filter = <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> filter . <RARE_TOKEN> ( request , response , this ) ; </a> 
<a> } catch ( IOException e ) { </a> 
<a> throw e ; </a> 
<a> } catch ( ServletException e ) { </a> 
<a> throw e ; </a> 
<a> } catch ( <RARE_TOKEN> e ) { </a> 
<a> throw e ; </a> 
<a> } catch ( Throwable e ) { </a> 
<a> throw new ServletException ( <RARE_TOKEN> , e ) ; </a> 
<a> } </a> 
<a> return ; </a> 
<a> } </a> 
<a> try { </a> 
<a> if ( servlet != null ) { </a> 
<a> servlet . service ( request , response ) ; </a> 
<a> } </a> 
<a> } catch ( IOException e ) { </a> 
<a> throw e ; </a> 
<a> } catch ( ServletException e ) { </a> 
<a> throw e ; </a> 
<a> } catch ( <RARE_TOKEN> e ) { </a> 
<a> throw e ; </a> 
<a> } catch ( Throwable e ) { </a> 
<a> throw new ServletException ( <RARE_TOKEN> , e ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> if ( <RARE_TOKEN> . <RARE_TOKEN> ( ) == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> is <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( n == <RARE_TOKEN> . length ) { </a> 
<a> <RARE_TOKEN> [ ] <RARE_TOKEN> = </a> 
<a> new <RARE_TOKEN> [ n + <RARE_TOKEN> ] ; </a> 
<a> System . <RARE_TOKEN> ( <RARE_TOKEN> , 0 , <RARE_TOKEN> , 0 , n ) ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> [ n ++ ] = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( ServletConfig <RARE_TOKEN> , <RARE_TOKEN> servlet ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> this . servlet = servlet ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> <RARE_TOKEN> ( int i ) { </a> 
<a> return <RARE_TOKEN> [ i ] ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> <RARE_TOKEN> ( ) { </a> 
<a> return servlet ; </a> 
<a> } </a> 
<a> public ServletConfig <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public void destroy ( ) { </a> 
<a> if ( n > 0 && <RARE_TOKEN> != null ) { </a> 
<a> for ( int i = 0 ; i < <RARE_TOKEN> . length ; i ++ ) { </a> 
<a> if ( <RARE_TOKEN> [ i ] != null ) { </a> 
<a> <RARE_TOKEN> [ i ] . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> <RARE_TOKEN> = null ; </a> 
<a> } </a> 
<a> if ( servlet != null ) { </a> 
<a> servlet . destroy ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . util ; </a> 
<a> import javax . servlet . Filter ; </a> 
<a> import javax . servlet . <RARE_TOKEN> ; </a> 
<a> import javax . servlet . ServletConfig ; </a> 
<a> import javax . servlet . <RARE_TOKEN> ; </a> 
<a> import java . util . <RARE_TOKEN> ; </a> 
<a> public final class <RARE_TOKEN> implements <RARE_TOKEN> { </a> 
<a> private final ServletConfig sc ; </a> 
<a> private Filter filter = null ; </a> 
<a> private String <RARE_TOKEN> ; </a> 
<a> public <RARE_TOKEN> ( ServletConfig sc ) { </a> 
<a> this . sc = sc ; </a> 
<a> } </a> 
<a> public String getInitParameter ( String name ) { </a> 
<a> return sc . getInitParameter ( name ) ; </a> 
<a> } </a> 
<a> public String <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> <RARE_TOKEN> ( ) { </a> 
<a> return sc . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> getServletContext ( ) { </a> 
<a> return sc . getServletContext ( ) ; </a> 
<a> } </a> 
<a> public Filter <RARE_TOKEN> ( ) { </a> 
<a> return filter ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> if ( this . filter != null ) { </a> 
<a> filter . destroy ( ) ; </a> 
<a> } </a> 
<a> this . filter = null ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( Filter filter ) { </a> 
<a> this . filter = filter ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( String <RARE_TOKEN> ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . util ; </a> 
<a> import org . atmosphere . cpr . AtmosphereResource ; </a> 
<a> import org . atmosphere . cpr . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . cpr . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . cpr . <RARE_TOKEN> ; </a> 
<a> import java . util . Set ; </a> 
<a> import java . util . concurrent . Future ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> public <RARE_TOKEN> ( ) { </a> 
<a> this ( <RARE_TOKEN> . class . getSimpleName ( ) ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( String id ) { </a> 
<a> super ( id ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( <RARE_TOKEN> bc ) { </a> 
<a> this . bc = bc ; </a> 
<a> bc . <RARE_TOKEN> ( null , false ) . <RARE_TOKEN> ( null , false ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public < T > Future < T > broadcast ( T msg ) { </a> 
<a> Object newMsg = filter ( msg ) ; </a> 
<a> if ( newMsg == null ) return null ; </a> 
<a> <RARE_TOKEN> < Object > f = new <RARE_TOKEN> < Object > ( newMsg ) ; </a> 
<a> f . done ( ) ; </a> 
<a> <RARE_TOKEN> ( new Entry ( newMsg , null , f , msg ) ) ; </a> 
<a> return f ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public < T > Future < T > broadcast ( T msg , AtmosphereResource < ? , ? > r ) { </a> 
<a> Object newMsg = filter ( msg ) ; </a> 
<a> if ( newMsg == null ) return null ; </a> 
<a> <RARE_TOKEN> < Object > f = new <RARE_TOKEN> < Object > ( newMsg ) ; </a> 
<a> f . done ( ) ; </a> 
<a> <RARE_TOKEN> ( new Entry ( newMsg , r , f , msg ) ) ; </a> 
<a> return f ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public < T > Future < T > broadcast ( T msg , Set < AtmosphereResource < ? , ? > > <RARE_TOKEN> ) { </a> 
<a> Object newMsg = filter ( msg ) ; </a> 
<a> if ( newMsg == null ) return null ; </a> 
<a> <RARE_TOKEN> < Object > f = new <RARE_TOKEN> < Object > ( newMsg ) ; </a> 
<a> f . done ( ) ; </a> 
<a> <RARE_TOKEN> ( new Entry ( newMsg , <RARE_TOKEN> , f , msg ) ) ; </a> 
<a> return f ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( AtmosphereResource < ? , ? > r , Object <RARE_TOKEN> , Entry entry ) throws InterruptedException { </a> 
<a> synchronized ( r ) { </a> 
<a> <RARE_TOKEN> ( r , <RARE_TOKEN> , entry . future ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . util ; </a> 
<a> import org . atmosphere . cpr . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . cpr . <RARE_TOKEN> . BroadcastAction . <RARE_TOKEN> ; </a> 
<a> import java . util . concurrent . atomic . AtomicReference ; </a> 
<a> public class <RARE_TOKEN> implements <RARE_TOKEN> { </a> 
<a> private final int <RARE_TOKEN> ; </a> 
<a> private final AtomicReference < StringBuilder > <RARE_TOKEN> = new AtomicReference < StringBuilder > ( new StringBuilder ( ) ) ; </a> 
<a> public <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( int <RARE_TOKEN> ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public BroadcastAction filter ( Object <RARE_TOKEN> , Object message ) { </a> 
<a> if ( message instanceof String ) { </a> 
<a> <RARE_TOKEN> . get ( ) . append ( message ) ; </a> 
<a> if ( <RARE_TOKEN> . get ( ) . length ( ) < <RARE_TOKEN> ) { </a> 
<a> return new BroadcastAction ( <RARE_TOKEN> . <RARE_TOKEN> , message ) ; </a> 
<a> } else { </a> 
<a> message = <RARE_TOKEN> . toString ( ) ; </a> 
<a> <RARE_TOKEN> . get ( ) . <RARE_TOKEN> ( 0 , <RARE_TOKEN> . get ( ) . length ( ) ) ; </a> 
<a> return new BroadcastAction ( <RARE_TOKEN> . <RARE_TOKEN> , message ) ; </a> 
<a> } </a> 
<a> } else { </a> 
<a> return new BroadcastAction ( message ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . util ; </a> 
<a> import java . io . IOException ; </a> 
<a> import java . io . InputStream ; </a> 
<a> import java . util . <RARE_TOKEN> ; </a> 
<a> import java . util . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import java . util . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> public class <RARE_TOKEN> { </a> 
<a> private static final <RARE_TOKEN> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> private static final String <RARE_TOKEN> ; </a> 
<a> private static final int <RARE_TOKEN> ; </a> 
<a> private static final int <RARE_TOKEN> ; </a> 
<a> private static final int <RARE_TOKEN> ; </a> 
<a> private static final String version ; </a> 
<a> public static void <RARE_TOKEN> ( String [ ] args ) { </a> 
<a> System . out . println ( <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> static { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( ) ; </a> 
<a> InputStream s = null ; </a> 
<a> try { </a> 
<a> s = <RARE_TOKEN> . class . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( s ) ; </a> 
<a> } catch ( IOException e ) { </a> 
<a> e . printStackTrace ( ) ; </a> 
<a> } finally { </a> 
<a> if ( s != null ) { </a> 
<a> try { </a> 
<a> s . close ( ) ; </a> 
<a> } catch ( IOException ex ) { </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> version = <RARE_TOKEN> . getProperty ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( version ) ; </a> 
<a> if ( <RARE_TOKEN> . <RARE_TOKEN> ( ) ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . group ( 1 ) ; </a> 
<a> <RARE_TOKEN> = Integer . parseInt ( <RARE_TOKEN> . group ( 2 ) ) ; </a> 
<a> <RARE_TOKEN> = Integer . parseInt ( <RARE_TOKEN> . group ( 3 ) ) ; </a> 
<a> <RARE_TOKEN> = Integer . parseInt ( <RARE_TOKEN> . group ( 4 ) ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = - 1 ; </a> 
<a> <RARE_TOKEN> = - 1 ; </a> 
<a> <RARE_TOKEN> = - 1 ; </a> 
<a> } </a> 
<a> } </a> 
<a> public static String <RARE_TOKEN> ( ) { </a> 
<a> return version ; </a> 
<a> } </a> 
<a> public static String <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public static int <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public static int <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public static int <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public static boolean <RARE_TOKEN> ( int <RARE_TOKEN> , int <RARE_TOKEN> ) { </a> 
<a> return <RARE_TOKEN> == <RARE_TOKEN> . <RARE_TOKEN> && <RARE_TOKEN> == <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . util ; </a> 
<a> import org . atmosphere . cpr . AtmosphereServlet ; </a> 
<a> import org . slf4j . Logger ; </a> 
<a> import org . slf4j . LoggerFactory ; </a> 
<a> import org . <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import org . <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import org . <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import org . <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import org . <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import javax . <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import javax . <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import java . io . IOException ; </a> 
<a> import java . io . InputStream ; </a> 
<a> import java . util . ArrayList ; </a> 
<a> public class <RARE_TOKEN> { </a> 
<a> private static final Logger logger = LoggerFactory . getLogger ( <RARE_TOKEN> . class ) ; </a> 
<a> private static final String <RARE_TOKEN> = AtmosphereServlet . class . getName ( ) ; </a> 
<a> private final ArrayList < String > <RARE_TOKEN> = new ArrayList < String > ( ) ; </a> 
<a> public <RARE_TOKEN> ( InputStream stream ) { </a> 
<a> <RARE_TOKEN> factory = <RARE_TOKEN> . newInstance ( ) ; </a> 
<a> try { </a> 
<a> <RARE_TOKEN> ( factory . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( stream ) ) ; </a> 
<a> } catch ( <RARE_TOKEN> e ) { </a> 
<a> logger . error ( e . getMessage ( ) , e ) ; </a> 
<a> throw new <RARE_TOKEN> ( e ) ; </a> 
<a> } catch ( IOException e ) { </a> 
<a> logger . error ( e . getMessage ( ) , e ) ; </a> 
<a> throw new <RARE_TOKEN> ( e ) ; </a> 
<a> } catch ( <RARE_TOKEN> e ) { </a> 
<a> logger . error ( e . getMessage ( ) , e ) ; </a> 
<a> throw new <RARE_TOKEN> ( e ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> String <RARE_TOKEN> = null ; </a> 
<a> for ( int i = 0 ; i < <RARE_TOKEN> . <RARE_TOKEN> ( ) ; i ++ ) { </a> 
<a> <RARE_TOKEN> m = <RARE_TOKEN> . <RARE_TOKEN> ( i ) ; </a> 
<a> <RARE_TOKEN> list = m . <RARE_TOKEN> ( ) ; </a> 
<a> for ( int j = 0 ; j < list . <RARE_TOKEN> ( ) ; j ++ ) { </a> 
<a> <RARE_TOKEN> n = list . <RARE_TOKEN> ( j ) ; </a> 
<a> if ( n . <RARE_TOKEN> ( ) . equals ( <RARE_TOKEN> ) ) { </a> 
<a> <RARE_TOKEN> = n . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> if ( n . <RARE_TOKEN> ( ) . equals ( <RARE_TOKEN> ) ) { </a> 
<a> if ( n . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( ) . equals ( <RARE_TOKEN> ) ) { </a> 
<a> break ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> for ( int i = 0 ; i < <RARE_TOKEN> . <RARE_TOKEN> ( ) ; i ++ ) { </a> 
<a> <RARE_TOKEN> m = <RARE_TOKEN> . <RARE_TOKEN> ( i ) ; </a> 
<a> <RARE_TOKEN> list = m . <RARE_TOKEN> ( ) ; </a> 
<a> String <RARE_TOKEN> = null ; </a> 
<a> String <RARE_TOKEN> = null ; </a> 
<a> for ( int j = 0 ; j < list . <RARE_TOKEN> ( ) ; j ++ ) { </a> 
<a> <RARE_TOKEN> n = list . <RARE_TOKEN> ( j ) ; </a> 
<a> if ( n . <RARE_TOKEN> ( ) . equals ( <RARE_TOKEN> ) ) { </a> 
<a> <RARE_TOKEN> = n . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> if ( ! <RARE_TOKEN> . equals ( <RARE_TOKEN> ) ) { </a> 
<a> <RARE_TOKEN> = null ; </a> 
<a> } </a> 
<a> } </a> 
<a> if ( n . <RARE_TOKEN> ( ) . equals ( <RARE_TOKEN> ) ) { </a> 
<a> <RARE_TOKEN> = n . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> != null && <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> . add ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = null ; </a> 
<a> <RARE_TOKEN> = null ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> public ArrayList < String > <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . websocket ; </a> 
<a> import org . atmosphere . cpr . AtmosphereResource ; </a> 
<a> import org . atmosphere . cpr . AtmosphereServlet ; </a> 
<a> import org . atmosphere . cpr . FrameworkConfig ; </a> 
<a> import org . atmosphere . websocket . container . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . websocket . container . <RARE_TOKEN> ; </a> 
<a> import org . slf4j . Logger ; </a> 
<a> import org . slf4j . LoggerFactory ; </a> 
<a> import javax . servlet . http . HttpServletRequest ; </a> 
<a> import javax . servlet . http . <RARE_TOKEN> ; </a> 
<a> import java . io . <RARE_TOKEN> ; </a> 
<a> import static org . atmosphere . websocket . <RARE_TOKEN> . <RARE_TOKEN> . TYPE . * ; </a> 
<a> public class <RARE_TOKEN> implements org . <RARE_TOKEN> . jetty . websocket . WebSocket , org . <RARE_TOKEN> . jetty . websocket . WebSocket . <RARE_TOKEN> , org . <RARE_TOKEN> . jetty . websocket . WebSocket . <RARE_TOKEN> , org . <RARE_TOKEN> . jetty . websocket . WebSocket . <RARE_TOKEN> , org . <RARE_TOKEN> . jetty . websocket . WebSocket . <RARE_TOKEN> { </a> 
<a> private static final Logger logger = LoggerFactory . getLogger ( <RARE_TOKEN> . class ) ; </a> 
<a> private <RARE_TOKEN> webSocketProcessor ; </a> 
<a> private final HttpServletRequest request ; </a> 
<a> private final AtmosphereServlet <RARE_TOKEN> ; </a> 
<a> private final String <RARE_TOKEN> ; </a> 
<a> public <RARE_TOKEN> ( HttpServletRequest request , AtmosphereServlet <RARE_TOKEN> , final String <RARE_TOKEN> ) { </a> 
<a> this . request = new <RARE_TOKEN> ( request , request . <RARE_TOKEN> ( ) , request . <RARE_TOKEN> ( ) , request . <RARE_TOKEN> ( ) , request . <RARE_TOKEN> ( ) ) ; </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( org . <RARE_TOKEN> . jetty . websocket . WebSocket . <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> logger . debug ( <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> try { </a> 
<a> webSocketProcessor = ( <RARE_TOKEN> ) <RARE_TOKEN> . class . <RARE_TOKEN> ( ) </a> 
<a> . <RARE_TOKEN> ( <RARE_TOKEN> ) </a> 
<a> . <RARE_TOKEN> ( new Class [ ] { AtmosphereServlet . class , WebSocket . class } ) </a> 
<a> . newInstance ( new Object [ ] { <RARE_TOKEN> , new <RARE_TOKEN> ( <RARE_TOKEN> ) } ) ; </a> 
<a> webSocketProcessor . <RARE_TOKEN> ( request ) ; </a> 
<a> } catch ( Exception e ) { </a> 
<a> logger . warn ( "failed to connect to <RARE_TOKEN> <RARE_TOKEN> , e ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( byte frame , String data ) { </a> 
<a> logger . debug ( <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> webSocketProcessor . <RARE_TOKEN> ( data ) ; </a> 
<a> webSocketProcessor . <RARE_TOKEN> ( new <RARE_TOKEN> . <RARE_TOKEN> ( data , <RARE_TOKEN> , webSocketProcessor . <RARE_TOKEN> ( ) ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( byte frame , byte [ ] data , int offset , int length ) { </a> 
<a> logger . debug ( <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> webSocketProcessor . <RARE_TOKEN> ( new String ( data , offset , length ) ) ; </a> 
<a> try { </a> 
<a> webSocketProcessor . <RARE_TOKEN> ( new <RARE_TOKEN> . <RARE_TOKEN> ( new String ( data , offset , length , <RARE_TOKEN> ) , <RARE_TOKEN> , webSocketProcessor . <RARE_TOKEN> ( ) ) ) ; </a> 
<a> } catch ( <RARE_TOKEN> e ) { </a> 
<a> logger . warn ( <RARE_TOKEN> , e ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( boolean <RARE_TOKEN> , byte <RARE_TOKEN> , byte [ ] data , int offset , int length ) { </a> 
<a> logger . debug ( <RARE_TOKEN> ) ; </a> 
<a> webSocketProcessor . <RARE_TOKEN> ( new String ( data , offset , length ) ) ; </a> 
<a> try { </a> 
<a> webSocketProcessor . <RARE_TOKEN> ( new <RARE_TOKEN> . <RARE_TOKEN> ( new String ( data , offset , length , <RARE_TOKEN> ) , <RARE_TOKEN> , webSocketProcessor . <RARE_TOKEN> ( ) ) ) ; </a> 
<a> } catch ( <RARE_TOKEN> e ) { </a> 
<a> logger . warn ( <RARE_TOKEN> , e ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> logger . debug ( <RARE_TOKEN> ) ; </a> 
<a> webSocketProcessor . close ( ) ; </a> 
<a> webSocketProcessor . <RARE_TOKEN> ( new <RARE_TOKEN> . <RARE_TOKEN> ( "" , <RARE_TOKEN> , webSocketProcessor . <RARE_TOKEN> ( ) ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( byte [ ] data , int offset , int length ) { </a> 
<a> logger . debug ( <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> webSocketProcessor . <RARE_TOKEN> ( data , offset , length ) ; </a> 
<a> try { </a> 
<a> webSocketProcessor . <RARE_TOKEN> ( new <RARE_TOKEN> . <RARE_TOKEN> ( new String ( data , offset , length , <RARE_TOKEN> ) , <RARE_TOKEN> , webSocketProcessor . <RARE_TOKEN> ( ) ) ) ; </a> 
<a> } catch ( <RARE_TOKEN> e ) { </a> 
<a> logger . warn ( <RARE_TOKEN> , e ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( byte <RARE_TOKEN> , byte [ ] data , int offset , int length ) { </a> 
<a> logger . debug ( <RARE_TOKEN> ) ; </a> 
<a> webSocketProcessor . <RARE_TOKEN> ( data , offset , length ) ; </a> 
<a> try { </a> 
<a> webSocketProcessor . <RARE_TOKEN> ( new <RARE_TOKEN> . <RARE_TOKEN> ( new String ( data , offset , length , <RARE_TOKEN> ) , <RARE_TOKEN> , webSocketProcessor . <RARE_TOKEN> ( ) ) ) ; </a> 
<a> } catch ( <RARE_TOKEN> e ) { </a> 
<a> logger . warn ( <RARE_TOKEN> , e ) ; </a> 
<a> } </a> 
<a> return false ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( byte <RARE_TOKEN> , byte <RARE_TOKEN> , byte [ ] data , int offset , int length ) { </a> 
<a> logger . debug ( <RARE_TOKEN> ) ; </a> 
<a> return false ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( org . <RARE_TOKEN> . jetty . websocket . WebSocket . <RARE_TOKEN> connection ) { </a> 
<a> logger . debug ( <RARE_TOKEN> ) ; </a> 
<a> try { </a> 
<a> webSocketProcessor = ( <RARE_TOKEN> ) <RARE_TOKEN> . class . <RARE_TOKEN> ( ) </a> 
<a> . <RARE_TOKEN> ( <RARE_TOKEN> ) </a> 
<a> . <RARE_TOKEN> ( new Class [ ] { AtmosphereServlet . class , WebSocket . class } ) </a> 
<a> . newInstance ( new Object [ ] { <RARE_TOKEN> , new <RARE_TOKEN> ( connection ) } ) ; </a> 
<a> } catch ( Exception e ) { </a> 
<a> logger . warn ( "failed to connect to <RARE_TOKEN> <RARE_TOKEN> , e ) ; </a> 
<a> } </a> 
<a> webSocketProcessor . <RARE_TOKEN> ( new <RARE_TOKEN> . <RARE_TOKEN> ( "" , <RARE_TOKEN> , webSocketProcessor . <RARE_TOKEN> ( ) ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( String data ) { </a> 
<a> logger . debug ( <RARE_TOKEN> ) ; </a> 
<a> webSocketProcessor . <RARE_TOKEN> ( data ) ; </a> 
<a> webSocketProcessor . <RARE_TOKEN> ( new <RARE_TOKEN> . <RARE_TOKEN> ( data , <RARE_TOKEN> , webSocketProcessor . <RARE_TOKEN> ( ) ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( org . <RARE_TOKEN> . jetty . websocket . WebSocket . <RARE_TOKEN> connection ) { </a> 
<a> logger . debug ( <RARE_TOKEN> ) ; </a> 
<a> try { </a> 
<a> webSocketProcessor = ( <RARE_TOKEN> ) <RARE_TOKEN> . class . <RARE_TOKEN> ( ) </a> 
<a> . <RARE_TOKEN> ( <RARE_TOKEN> ) </a> 
<a> . <RARE_TOKEN> ( new Class [ ] { AtmosphereServlet . class , WebSocket . class } ) </a> 
<a> . newInstance ( new Object [ ] { <RARE_TOKEN> , new <RARE_TOKEN> ( connection ) } ) ; </a> 
<a> webSocketProcessor . <RARE_TOKEN> ( request ) ; </a> 
<a> webSocketProcessor . <RARE_TOKEN> ( new <RARE_TOKEN> . <RARE_TOKEN> ( "" , <RARE_TOKEN> , webSocketProcessor . <RARE_TOKEN> ( ) ) ) ; </a> 
<a> } catch ( Exception e ) { </a> 
<a> logger . warn ( "failed to connect to <RARE_TOKEN> <RARE_TOKEN> , e ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( int <RARE_TOKEN> , String message ) { </a> 
<a> logger . debug ( <RARE_TOKEN> ) ; </a> 
<a> webSocketProcessor . <RARE_TOKEN> ( new <RARE_TOKEN> . <RARE_TOKEN> ( "" , <RARE_TOKEN> , webSocketProcessor . <RARE_TOKEN> ( ) ) ) ; </a> 
<a> AtmosphereResource < ? , ? > r = ( AtmosphereResource < ? , ? > ) request . getAttribute ( FrameworkConfig . <RARE_TOKEN> ) ; </a> 
<a> if ( r != null ) { </a> 
<a> r . getBroadcaster ( ) . <RARE_TOKEN> ( r ) ; </a> 
<a> } </a> 
<a> webSocketProcessor . close ( ) ; </a> 
<a> } </a> 
<a> private static class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> private final String <RARE_TOKEN> ; </a> 
<a> private final String <RARE_TOKEN> ; </a> 
<a> private final String <RARE_TOKEN> ; </a> 
<a> private final String <RARE_TOKEN> ; </a> 
<a> public <RARE_TOKEN> ( HttpServletRequest request , String <RARE_TOKEN> , String <RARE_TOKEN> , String <RARE_TOKEN> , String <RARE_TOKEN> ) { </a> 
<a> super ( request ) ; </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public String <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public String <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public String <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public String <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . websocket ; </a> 
<a> import org . atmosphere . cpr . <RARE_TOKEN> ; </a> 
<a> import java . io . IOException ; </a> 
<a> public interface WebSocket { </a> 
<a> public final static String <RARE_TOKEN> = WebSocket . class . getName ( ) + <RARE_TOKEN> ; </a> 
<a> public final static String <RARE_TOKEN> = WebSocket . class . getName ( ) + <RARE_TOKEN> ; </a> 
<a> public final static String <RARE_TOKEN> = WebSocket . class . getName ( ) + <RARE_TOKEN> ; </a> 
<a> void <RARE_TOKEN> ( int errorCode , String message ) throws IOException ; </a> 
<a> void <RARE_TOKEN> ( String location ) throws IOException ; </a> 
<a> void write ( byte frame , String data ) throws IOException ; </a> 
<a> void write ( byte frame , byte [ ] data ) throws IOException ; </a> 
<a> void write ( byte frame , byte [ ] data , int offset , int length ) throws IOException ; </a> 
<a> void close ( ) throws IOException ; </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . websocket ; </a> 
<a> import org . atmosphere . cpr . AtmosphereResourceEventListener ; </a> 
<a> public interface <RARE_TOKEN> extends AtmosphereResourceEventListener { </a> 
<a> void <RARE_TOKEN> ( <RARE_TOKEN> event ) ; </a> 
<a> void <RARE_TOKEN> ( <RARE_TOKEN> event ) ; </a> 
<a> void <RARE_TOKEN> ( <RARE_TOKEN> event ) ; </a> 
<a> void <RARE_TOKEN> ( <RARE_TOKEN> event ) ; </a> 
<a> void <RARE_TOKEN> ( <RARE_TOKEN> event ) ; </a> 
<a> void <RARE_TOKEN> ( <RARE_TOKEN> event ) ; </a> 
<a> public class <RARE_TOKEN> { </a> 
<a> public enum TYPE { <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> } </a> 
<a> private final String message ; </a> 
<a> private final TYPE type ; </a> 
<a> private final WebSocket <RARE_TOKEN> ; </a> 
<a> public <RARE_TOKEN> ( String message , TYPE type , WebSocket <RARE_TOKEN> ) { </a> 
<a> this . message = message ; </a> 
<a> this . type = type ; </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public String message ( ) { </a> 
<a> return message ; </a> 
<a> } </a> 
<a> public WebSocket <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public TYPE type ( ) { </a> 
<a> return type ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public String toString ( ) { </a> 
<a> return <RARE_TOKEN> + </a> 
<a> <RARE_TOKEN> + message + <RARE_TOKEN> + </a> 
<a> ", <RARE_TOKEN> + type + </a> 
<a> ", <RARE_TOKEN> + <RARE_TOKEN> + </a> 
<a> <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . websocket ; </a> 
<a> import org . atmosphere . cpr . AtmosphereResourceEvent ; </a> 
<a> import org . slf4j . Logger ; </a> 
<a> import org . slf4j . LoggerFactory ; </a> 
<a> import javax . servlet . http . HttpServletRequest ; </a> 
<a> import javax . servlet . http . HttpServletResponse ; </a> 
<a> public class <RARE_TOKEN> implements <RARE_TOKEN> { </a> 
<a> private final static Logger logger = LoggerFactory . getLogger ( <RARE_TOKEN> . class ) ; </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( <RARE_TOKEN> event ) { </a> 
<a> logger . trace ( "" , event ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( <RARE_TOKEN> event ) { </a> 
<a> logger . trace ( "" , event ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( <RARE_TOKEN> event ) { </a> 
<a> logger . trace ( "" , event ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( <RARE_TOKEN> event ) { </a> 
<a> logger . trace ( "" , event ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( <RARE_TOKEN> event ) { </a> 
<a> logger . trace ( "" , event ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( <RARE_TOKEN> event ) { </a> 
<a> logger . trace ( "" , event ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( AtmosphereResourceEvent < HttpServletRequest , HttpServletResponse > event ) { </a> 
<a> logger . trace ( "" , event ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( AtmosphereResourceEvent < HttpServletRequest , HttpServletResponse > event ) { </a> 
<a> logger . trace ( "" , event ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( AtmosphereResourceEvent < HttpServletRequest , HttpServletResponse > event ) { </a> 
<a> logger . trace ( "" , event ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( AtmosphereResourceEvent < HttpServletRequest , HttpServletResponse > event ) { </a> 
<a> logger . trace ( "" , event ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( AtmosphereResourceEvent < HttpServletRequest , HttpServletResponse > event ) { </a> 
<a> logger . trace ( "" , event ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . websocket ; </a> 
<a> import javax . servlet . <RARE_TOKEN> ; </a> 
<a> import javax . servlet . <RARE_TOKEN> ; </a> 
<a> import javax . servlet . http . Cookie ; </a> 
<a> import javax . servlet . http . HttpServletResponse ; </a> 
<a> import javax . servlet . http . <RARE_TOKEN> ; </a> 
<a> import java . io . IOException ; </a> 
<a> import java . io . <RARE_TOKEN> ; </a> 
<a> import java . util . ArrayList ; </a> 
<a> import java . util . Collection ; </a> 
<a> import java . util . Collections ; </a> 
<a> import java . util . HashMap ; </a> 
<a> import java . util . <RARE_TOKEN> ; </a> 
<a> public class <RARE_TOKEN> < <RARE_TOKEN> extends WebSocket > extends <RARE_TOKEN> { </a> 
<a> private final ArrayList < Cookie > <RARE_TOKEN> = new ArrayList < Cookie > ( ) ; </a> 
<a> private final HashMap < String , String > headers = new HashMap < String , String > ( ) ; </a> 
<a> private final <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> private int status = 200 ; </a> 
<a> private String <RARE_TOKEN> = "" ; </a> 
<a> private String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private byte frame ; </a> 
<a> private long <RARE_TOKEN> = - 1 ; </a> 
<a> private String contentType = <RARE_TOKEN> ; </a> 
<a> private boolean <RARE_TOKEN> = false ; </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> public <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> super ( new HttpServletResponse ( ) { </a> 
<a> public void <RARE_TOKEN> ( Cookie cookie ) { </a> 
<a> } </a> 
<a> public boolean <RARE_TOKEN> ( String name ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> public String <RARE_TOKEN> ( String url ) { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> public String <RARE_TOKEN> ( String url ) { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> public String <RARE_TOKEN> ( String url ) { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> public String <RARE_TOKEN> ( String url ) { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( int sc , String msg ) throws IOException { </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( int sc ) throws IOException { </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( String location ) throws IOException { </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( String name , long <RARE_TOKEN> ) { </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( String name , long <RARE_TOKEN> ) { </a> 
<a> } </a> 
<a> public void setHeader ( String name , String value ) { </a> 
<a> } </a> 
<a> public void addHeader ( String name , String value ) { </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( String name , int value ) { </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( String name , int value ) { </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( int sc ) { </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( int sc , String <RARE_TOKEN> ) { </a> 
<a> } </a> 
<a> public int getStatus ( ) { </a> 
<a> return 0 ; </a> 
<a> } </a> 
<a> public String getHeader ( String name ) { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> public Collection < String > getHeaders ( String name ) { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> public Collection < String > <RARE_TOKEN> ( ) { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> public String <RARE_TOKEN> ( ) { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> public String <RARE_TOKEN> ( ) { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> <RARE_TOKEN> ( ) throws IOException { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> <RARE_TOKEN> ( ) throws IOException { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( String charset ) { </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( int len ) { </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( String type ) { </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( int size ) { </a> 
<a> } </a> 
<a> public int <RARE_TOKEN> ( ) { </a> 
<a> return 0 ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( ) throws IOException { </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> } </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> } </a> 
<a> public <RARE_TOKEN> <RARE_TOKEN> ( ) { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( Cookie cookie ) { </a> 
<a> <RARE_TOKEN> . add ( cookie ) ; </a> 
<a> } </a> 
<a> public boolean <RARE_TOKEN> ( String name ) { </a> 
<a> return headers . get ( name ) == null ? false : true ; </a> 
<a> } </a> 
<a> public String <RARE_TOKEN> ( String url ) { </a> 
<a> throw new UnsupportedOperationException ( ) ; </a> 
<a> } </a> 
<a> public String <RARE_TOKEN> ( String url ) { </a> 
<a> throw new UnsupportedOperationException ( ) ; </a> 
<a> } </a> 
<a> public String <RARE_TOKEN> ( String url ) { </a> 
<a> throw new UnsupportedOperationException ( ) ; </a> 
<a> } </a> 
<a> public String <RARE_TOKEN> ( String url ) { </a> 
<a> throw new UnsupportedOperationException ( ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( int sc , String msg ) throws IOException { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( sc , msg ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( int sc ) throws IOException { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( sc , "" ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( String location ) throws IOException { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( location ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( String name , long <RARE_TOKEN> ) { </a> 
<a> headers . put ( name , String . valueOf ( <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( String name , long <RARE_TOKEN> ) { </a> 
<a> headers . put ( name , String . valueOf ( <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> public void setHeader ( String name , String value ) { </a> 
<a> headers . put ( name , value ) ; </a> 
<a> } </a> 
<a> public void addHeader ( String name , String value ) { </a> 
<a> headers . put ( name , value ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( String name , int value ) { </a> 
<a> headers . put ( name , String . valueOf ( value ) ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( String name , int value ) { </a> 
<a> headers . put ( name , String . valueOf ( value ) ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( int status ) { </a> 
<a> this . status = status ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( int status , String <RARE_TOKEN> ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> this . status = status ; </a> 
<a> } </a> 
<a> public int getStatus ( ) { </a> 
<a> return status ; </a> 
<a> } </a> 
<a> public String getHeader ( String name ) { </a> 
<a> return headers . get ( name ) ; </a> 
<a> } </a> 
<a> public Collection < String > getHeaders ( String name ) { </a> 
<a> ArrayList < String > s = new ArrayList < String > ( ) ; </a> 
<a> s . add ( headers . get ( name ) ) ; </a> 
<a> return Collections . <RARE_TOKEN> ( s ) ; </a> 
<a> } </a> 
<a> public Collection < String > <RARE_TOKEN> ( ) { </a> 
<a> return Collections . <RARE_TOKEN> ( headers . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( String charset ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public String <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> <RARE_TOKEN> ( ) throws IOException { </a> 
<a> return new <RARE_TOKEN> ( ) { </a> 
<a> public void write ( int i ) throws java . io . IOException { </a> 
<a> <RARE_TOKEN> . write ( frame , new byte [ ] { ( byte ) i } ) ; </a> 
<a> } </a> 
<a> public void write ( byte [ ] bytes ) throws java . io . IOException { </a> 
<a> <RARE_TOKEN> . write ( frame , bytes ) ; </a> 
<a> } </a> 
<a> public void write ( byte [ ] bytes , int start , int offset ) throws java . io . IOException { </a> 
<a> <RARE_TOKEN> . write ( frame , bytes , start , offset ) ; </a> 
<a> } </a> 
<a> } ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> <RARE_TOKEN> ( ) throws IOException { </a> 
<a> return new <RARE_TOKEN> ( <RARE_TOKEN> ( ) ) { </a> 
<a> public void write ( char [ ] <RARE_TOKEN> , int offset , int <RARE_TOKEN> ) { </a> 
<a> try { </a> 
<a> <RARE_TOKEN> . write ( frame , new String ( <RARE_TOKEN> , offset , <RARE_TOKEN> ) ) ; </a> 
<a> } catch ( IOException e ) { </a> 
<a> throw new <RARE_TOKEN> ( e ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public void write ( char [ ] <RARE_TOKEN> ) { </a> 
<a> try { </a> 
<a> <RARE_TOKEN> . write ( frame , new String ( <RARE_TOKEN> ) ) ; </a> 
<a> } catch ( IOException e ) { </a> 
<a> throw new <RARE_TOKEN> ( e ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public void write ( String s , int offset , int <RARE_TOKEN> ) { </a> 
<a> try { </a> 
<a> <RARE_TOKEN> . write ( frame , new String ( s . substring ( offset , <RARE_TOKEN> ) ) ) ; </a> 
<a> } catch ( IOException e ) { </a> 
<a> throw new <RARE_TOKEN> ( e ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public void write ( java . lang . String s ) { </a> 
<a> try { </a> 
<a> <RARE_TOKEN> . write ( frame , new String ( s ) ) ; </a> 
<a> } catch ( IOException e ) { </a> 
<a> throw new <RARE_TOKEN> ( e ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( int len ) { </a> 
<a> <RARE_TOKEN> = len ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( String contentType ) { </a> 
<a> this . contentType = contentType ; </a> 
<a> } </a> 
<a> public String <RARE_TOKEN> ( ) { </a> 
<a> return contentType ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( int size ) { </a> 
<a> throw new UnsupportedOperationException ( ) ; </a> 
<a> } </a> 
<a> public int <RARE_TOKEN> ( ) { </a> 
<a> throw new UnsupportedOperationException ( ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( ) throws IOException { </a> 
<a> } </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public boolean <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> public boolean <RARE_TOKEN> ( Class <RARE_TOKEN> ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . websocket ; </a> 
<a> import org . atmosphere . cpr . AtmosphereHandler ; </a> 
<a> import org . atmosphere . cpr . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . cpr . AtmosphereResource ; </a> 
<a> import org . atmosphere . cpr . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . cpr . AtmosphereResourceEventListener ; </a> 
<a> import org . atmosphere . cpr . AtmosphereResourceImpl ; </a> 
<a> import org . atmosphere . cpr . AtmosphereServlet ; </a> 
<a> import org . atmosphere . cpr . FrameworkConfig ; </a> 
<a> import org . atmosphere . cpr . HeaderConfig ; </a> 
<a> import org . slf4j . Logger ; </a> 
<a> import org . slf4j . LoggerFactory ; </a> 
<a> import javax . servlet . ServletException ; </a> 
<a> import javax . servlet . http . HttpServletRequest ; </a> 
<a> import javax . servlet . http . HttpServletResponse ; </a> 
<a> import java . io . IOException ; </a> 
<a> import java . io . Serializable ; </a> 
<a> import java . util . <RARE_TOKEN> ; </a> 
<a> import java . util . HashMap ; </a> 
<a> import java . util . Map ; </a> 
<a> import java . util . concurrent . atomic . AtomicBoolean ; </a> 
<a> public abstract class <RARE_TOKEN> implements Serializable { </a> 
<a> private static final Logger logger = LoggerFactory . getLogger ( <RARE_TOKEN> . class ) ; </a> 
<a> private final AtmosphereServlet <RARE_TOKEN> ; </a> 
<a> private final WebSocket <RARE_TOKEN> ; </a> 
<a> private final AtomicBoolean <RARE_TOKEN> = new AtomicBoolean ( false ) ; </a> 
<a> private AtmosphereResource < HttpServletRequest , HttpServletResponse > resource ; </a> 
<a> private AtmosphereHandler handler ; </a> 
<a> public <RARE_TOKEN> ( AtmosphereServlet <RARE_TOKEN> , WebSocket <RARE_TOKEN> ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public final void <RARE_TOKEN> ( final HttpServletRequest request ) throws IOException { </a> 
<a> if ( ! <RARE_TOKEN> . <RARE_TOKEN> ( true ) ) { </a> 
<a> logger . info ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> {}" , <RARE_TOKEN> . getClass ( ) . getName ( ) ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> < WebSocket > ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> r = new <RARE_TOKEN> . Builder ( ) </a> 
<a> . request ( request ) </a> 
<a> . headers ( <RARE_TOKEN> ( request ) ) </a> 
<a> . build ( ) ; </a> 
<a> request . setAttribute ( WebSocket . <RARE_TOKEN> , true ) ; </a> 
<a> <RARE_TOKEN> ( r , <RARE_TOKEN> ) ; </a> 
<a> resource = ( AtmosphereResource ) request . getAttribute ( FrameworkConfig . <RARE_TOKEN> ) ; </a> 
<a> handler = ( AtmosphereHandler ) request . getAttribute ( FrameworkConfig . <RARE_TOKEN> ) ; </a> 
<a> if ( resource == null || ! resource . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( ) ) { </a> 
<a> logger . error ( <RARE_TOKEN> AtmosphereResource has <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> WebSocket <RARE_TOKEN> be <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . close ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> protected final void <RARE_TOKEN> ( final HttpServletRequest request , final HttpServletResponse response ) { </a> 
<a> try { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( request , response ) ; </a> 
<a> } catch ( IOException e ) { </a> 
<a> logger . info ( "failed <RARE_TOKEN> atmosphere servlet <RARE_TOKEN> , e ) ; </a> 
<a> } catch ( ServletException e ) { </a> 
<a> logger . info ( "failed <RARE_TOKEN> atmosphere servlet <RARE_TOKEN> , e ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public AtmosphereResource resource ( ) { </a> 
<a> return resource ; </a> 
<a> } </a> 
<a> public HttpServletRequest request ( ) { </a> 
<a> return resource . getRequest ( ) ; </a> 
<a> } </a> 
<a> public WebSocket <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> abstract public void <RARE_TOKEN> ( String data ) ; </a> 
<a> abstract public void <RARE_TOKEN> ( byte [ ] data , int offset , int length ) ; </a> 
<a> public void close ( ) { </a> 
<a> try { </a> 
<a> if ( handler != null && resource != null ) { </a> 
<a> handler . <RARE_TOKEN> ( new <RARE_TOKEN> ( ( AtmosphereResourceImpl ) resource , false , true ) ) ; </a> 
<a> } </a> 
<a> } catch ( IOException e ) { </a> 
<a> if ( AtmosphereResourceImpl . class . isAssignableFrom ( resource . getClass ( ) ) ) { </a> 
<a> AtmosphereResourceImpl . class . cast ( resource ) . <RARE_TOKEN> ( e ) ; </a> 
<a> } </a> 
<a> logger . info ( "Failed <RARE_TOKEN> atmosphere handler <RARE_TOKEN> , e ) ; </a> 
<a> } </a> 
<a> if ( resource != null ) { </a> 
<a> resource . getBroadcaster ( ) . <RARE_TOKEN> ( resource ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public String toString ( ) { </a> 
<a> return <RARE_TOKEN> <RARE_TOKEN> + handler + ", <RARE_TOKEN> + resource + ", <RARE_TOKEN> + </a> 
<a> <RARE_TOKEN> + " <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> event ) { </a> 
<a> if ( resource == null ) return ; </a> 
<a> AtmosphereResourceImpl r = AtmosphereResourceImpl . class . cast ( resource ) ; </a> 
<a> for ( AtmosphereResourceEventListener l : r . <RARE_TOKEN> ( ) ) { </a> 
<a> if ( <RARE_TOKEN> . class . isAssignableFrom ( l . getClass ( ) ) ) { </a> 
<a> switch ( event . type ( ) ) { </a> 
<a> case <RARE_TOKEN> : </a> 
<a> <RARE_TOKEN> . class . cast ( l ) . <RARE_TOKEN> ( event ) ; </a> 
<a> break ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> <RARE_TOKEN> . class . cast ( l ) . <RARE_TOKEN> ( event ) ; </a> 
<a> break ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> <RARE_TOKEN> . class . cast ( l ) . <RARE_TOKEN> ( event ) ; </a> 
<a> break ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> <RARE_TOKEN> . class . cast ( l ) . <RARE_TOKEN> ( event ) ; </a> 
<a> break ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> <RARE_TOKEN> . class . cast ( l ) . <RARE_TOKEN> ( event ) ; </a> 
<a> break ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> <RARE_TOKEN> . class . cast ( l ) . <RARE_TOKEN> ( event ) ; </a> 
<a> break ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> protected Map < String , String > <RARE_TOKEN> ( HttpServletRequest request ) { </a> 
<a> Map < String , String > headers = new HashMap < String , String > ( ) ; </a> 
<a> <RARE_TOKEN> < String > e = request . <RARE_TOKEN> ( ) ; </a> 
<a> String s ; </a> 
<a> while ( e . <RARE_TOKEN> ( ) ) { </a> 
<a> s = e . <RARE_TOKEN> ( ) ; </a> 
<a> headers . put ( s , request . <RARE_TOKEN> ( s ) ) ; </a> 
<a> } </a> 
<a> headers . put ( HeaderConfig . <RARE_TOKEN> , HeaderConfig . <RARE_TOKEN> ) ; </a> 
<a> return headers ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . websocket . container ; </a> 
<a> import org . atmosphere . websocket . WebSocket ; </a> 
<a> import org . <RARE_TOKEN> . jetty . websocket . WebSocket . <RARE_TOKEN> ; </a> 
<a> import org . slf4j . Logger ; </a> 
<a> import org . slf4j . LoggerFactory ; </a> 
<a> import java . io . IOException ; </a> 
<a> public class <RARE_TOKEN> implements WebSocket { </a> 
<a> private static final Logger logger = LoggerFactory . getLogger ( <RARE_TOKEN> . class ) ; </a> 
<a> private final <RARE_TOKEN> connection ; </a> 
<a> public <RARE_TOKEN> ( <RARE_TOKEN> connection ) { </a> 
<a> this . connection = connection ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( int errorCode , String message ) throws IOException { </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( String location ) throws IOException { </a> 
<a> } </a> 
<a> public void write ( byte frame , String data ) throws IOException { </a> 
<a> if ( ! connection . isOpen ( ) ) throw new IOException ( <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> logger . debug ( <RARE_TOKEN> ) ; </a> 
<a> connection . <RARE_TOKEN> ( data ) ; </a> 
<a> } </a> 
<a> public void write ( byte frame , byte [ ] data ) throws IOException { </a> 
<a> if ( ! connection . isOpen ( ) ) throw new IOException ( <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> logger . debug ( <RARE_TOKEN> ) ; </a> 
<a> connection . <RARE_TOKEN> ( data , 0 , data . length ) ; </a> 
<a> } </a> 
<a> public void write ( byte frame , byte [ ] data , int offset , int length ) throws IOException { </a> 
<a> if ( ! connection . isOpen ( ) ) throw new IOException ( <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> logger . debug ( <RARE_TOKEN> ) ; </a> 
<a> connection . <RARE_TOKEN> ( new String ( data , offset , length , <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> public void close ( ) throws IOException { </a> 
<a> logger . debug ( <RARE_TOKEN> ) ; </a> 
<a> connection . disconnect ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . websocket . container ; </a> 
<a> import org . atmosphere . websocket . WebSocket ; </a> 
<a> import org . <RARE_TOKEN> . jetty . websocket . WebSocket . <RARE_TOKEN> ; </a> 
<a> import java . io . IOException ; </a> 
<a> import java . util . concurrent . atomic . AtomicBoolean ; </a> 
<a> public class <RARE_TOKEN> implements WebSocket { </a> 
<a> private final <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> private AtomicBoolean <RARE_TOKEN> = new AtomicBoolean ( false ) ; </a> 
<a> public <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( int errorCode , String message ) throws IOException { </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( String location ) throws IOException { </a> 
<a> } </a> 
<a> public void write ( byte frame , String data ) throws IOException { </a> 
<a> if ( ! <RARE_TOKEN> . isOpen ( ) ) throw new IOException ( <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( frame , data ) ; </a> 
<a> } </a> 
<a> public void write ( byte frame , byte [ ] data ) throws IOException { </a> 
<a> if ( ! <RARE_TOKEN> . isOpen ( ) ) throw new IOException ( <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( frame , data , 0 , data . length ) ; </a> 
<a> } </a> 
<a> public void write ( byte frame , byte [ ] data , int offset , int length ) throws IOException { </a> 
<a> if ( ! <RARE_TOKEN> . isOpen ( ) ) throw new IOException ( <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( frame , data , offset , length ) ; </a> 
<a> } </a> 
<a> public void close ( ) throws IOException { </a> 
<a> <RARE_TOKEN> . disconnect ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . websocket . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . cpr . AtmosphereServlet ; </a> 
<a> import org . atmosphere . websocket . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . websocket . WebSocket ; </a> 
<a> import org . slf4j . Logger ; </a> 
<a> import org . slf4j . LoggerFactory ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> private static final Logger logger = LoggerFactory . getLogger ( AtmosphereServlet . class ) ; </a> 
<a> public <RARE_TOKEN> ( AtmosphereServlet <RARE_TOKEN> , WebSocket <RARE_TOKEN> ) { </a> 
<a> super ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( String data ) { </a> 
<a> logger . trace ( <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> resource ( ) . getBroadcaster ( ) . broadcast ( data ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( byte [ ] data , int offset , int length ) { </a> 
<a> logger . trace ( <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> byte [ ] b = new byte [ length ] ; </a> 
<a> System . <RARE_TOKEN> ( data , offset , b , 0 , length ) ; </a> 
<a> resource ( ) . getBroadcaster ( ) . broadcast ( b ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . websocket . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . cpr . ApplicationConfig ; </a> 
<a> import org . atmosphere . cpr . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . cpr . AtmosphereServlet ; </a> 
<a> import org . atmosphere . websocket . WebSocket ; </a> 
<a> import org . atmosphere . cpr . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . websocket . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . websocket . <RARE_TOKEN> ; </a> 
<a> import org . slf4j . Logger ; </a> 
<a> import org . slf4j . LoggerFactory ; </a> 
<a> import java . io . IOException ; </a> 
<a> import java . io . Serializable ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> implements Serializable { </a> 
<a> private static final Logger logger = LoggerFactory . getLogger ( AtmosphereServlet . class ) ; </a> 
<a> private final String contentType ; </a> 
<a> private final String <RARE_TOKEN> ; </a> 
<a> private final String <RARE_TOKEN> ; </a> 
<a> public <RARE_TOKEN> ( AtmosphereServlet <RARE_TOKEN> , WebSocket <RARE_TOKEN> ) { </a> 
<a> super ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> String contentType = <RARE_TOKEN> . <RARE_TOKEN> ( ) . getInitParameter ( ApplicationConfig . <RARE_TOKEN> ) ; </a> 
<a> if ( contentType == null ) { </a> 
<a> contentType = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> this . contentType = contentType ; </a> 
<a> String <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( ) . getInitParameter ( ApplicationConfig . <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> String <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( ) . getInitParameter ( ApplicationConfig . <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( String d ) { </a> 
<a> String <RARE_TOKEN> = request ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> if ( d . startsWith ( <RARE_TOKEN> ) ) { </a> 
<a> String [ ] token = d . split ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = token [ 1 ] ; </a> 
<a> d = token [ 2 ] ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> r = new <RARE_TOKEN> . Builder ( ) </a> 
<a> . request ( request ( ) ) </a> 
<a> . method ( <RARE_TOKEN> ) </a> 
<a> . contentType ( contentType ) </a> 
<a> . <RARE_TOKEN> ( d ) </a> 
<a> . <RARE_TOKEN> ( <RARE_TOKEN> ) </a> 
<a> . headers ( <RARE_TOKEN> ( request ( ) ) ) </a> 
<a> . build ( ) ; </a> 
<a> <RARE_TOKEN> ( r , new <RARE_TOKEN> < WebSocket > ( <RARE_TOKEN> ( ) ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( byte [ ] d , final int offset , final int length ) { </a> 
<a> try { </a> 
<a> String <RARE_TOKEN> = request ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> if ( d [ 0 ] == ( byte ) <RARE_TOKEN> . charAt ( 0 ) && d [ 1 ] == ( byte ) <RARE_TOKEN> . charAt ( 0 ) ) { </a> 
<a> final String s = new String ( d , offset , length , <RARE_TOKEN> ) ; </a> 
<a> String [ ] token = s . split ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = token [ 1 ] ; </a> 
<a> d = token [ 2 ] . getBytes ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> r = new <RARE_TOKEN> . Builder ( ) </a> 
<a> . request ( request ( ) ) </a> 
<a> . method ( <RARE_TOKEN> ) </a> 
<a> . contentType ( contentType ) </a> 
<a> . <RARE_TOKEN> ( d , offset , length ) </a> 
<a> . <RARE_TOKEN> ( <RARE_TOKEN> ) </a> 
<a> . headers ( <RARE_TOKEN> ( request ( ) ) ) </a> 
<a> . build ( ) ; </a> 
<a> <RARE_TOKEN> ( r , new <RARE_TOKEN> < WebSocket > ( <RARE_TOKEN> ( ) ) ) ; </a> 
<a> } catch ( IOException e ) { </a> 
<a> logger . warn ( e . getMessage ( ) , e ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> package org . atmosphere . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . cpr . AtmosphereHandler ; </a> 
<a> import javax . servlet . http . HttpServletRequest ; </a> 
<a> import javax . servlet . http . HttpServletResponse ; </a> 
<a> public abstract class <RARE_TOKEN> implements AtmosphereHandler < HttpServletRequest , HttpServletResponse > { </a> 
<a> @ Override </a> 
<a> public void destroy ( ) { </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . <RARE_TOKEN> ; </a> 
<a> import com . <RARE_TOKEN> . http . client . <RARE_TOKEN> ; </a> 
<a> import com . <RARE_TOKEN> . http . client . AsyncHttpClient ; </a> 
<a> import com . <RARE_TOKEN> . http . client . Response ; </a> 
<a> import org . atmosphere . cache . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . cpr . AtmosphereResource ; </a> 
<a> import org . atmosphere . cpr . AtmosphereResourceEvent ; </a> 
<a> import org . atmosphere . cpr . AtmosphereResourceImpl ; </a> 
<a> import org . atmosphere . cpr . AtmosphereServlet ; </a> 
<a> import org . atmosphere . cpr . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . cpr . Broadcaster ; </a> 
<a> import org . atmosphere . cpr . BroadcasterFactory ; </a> 
<a> import org . atmosphere . cpr . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . cpr . HeaderConfig ; </a> 
<a> import org . atmosphere . util . <RARE_TOKEN> ; </a> 
<a> import org . slf4j . Logger ; </a> 
<a> import org . slf4j . LoggerFactory ; </a> 
<a> import org . testng . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import org . testng . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import org . testng . <RARE_TOKEN> . Test ; </a> 
<a> import javax . servlet . http . HttpServletRequest ; </a> 
<a> import javax . servlet . http . HttpServletResponse ; </a> 
<a> import java . io . IOException ; </a> 
<a> import java . io . <RARE_TOKEN> ; </a> 
<a> import java . net . <RARE_TOKEN> ; </a> 
<a> import java . util . List ; </a> 
<a> import java . util . concurrent . CountDownLatch ; </a> 
<a> import java . util . concurrent . <RARE_TOKEN> ; </a> 
<a> import java . util . concurrent . Future ; </a> 
<a> import java . util . concurrent . TimeUnit ; </a> 
<a> import java . util . concurrent . atomic . AtomicBoolean ; </a> 
<a> import java . util . concurrent . atomic . AtomicInteger ; </a> 
<a> import java . util . concurrent . atomic . AtomicReference ; </a> 
<a> import static org . testng . Assert . assertEquals ; </a> 
<a> import static org . testng . Assert . assertFalse ; </a> 
<a> import static org . testng . Assert . assertNotNull ; </a> 
<a> import static org . testng . Assert . assertTrue ; </a> 
<a> import static org . testng . Assert . fail ; </a> 
<a> public abstract class <RARE_TOKEN> { </a> 
<a> protected static final Logger logger = LoggerFactory . getLogger ( <RARE_TOKEN> . class ) ; </a> 
<a> protected AtmosphereServlet atmoServlet ; </a> 
<a> protected final static String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> protected String urlTarget ; </a> 
<a> public static class <RARE_TOKEN> { </a> 
<a> public static int <RARE_TOKEN> ( final String <RARE_TOKEN> , int <RARE_TOKEN> ) { </a> 
<a> if ( null == <RARE_TOKEN> ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> String <RARE_TOKEN> = System . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> if ( null != <RARE_TOKEN> ) { </a> 
<a> try { </a> 
<a> return Integer . parseInt ( <RARE_TOKEN> ) ; </a> 
<a> } catch ( <RARE_TOKEN> e ) { </a> 
<a> } </a> 
<a> } </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<a> protected int <RARE_TOKEN> ( ) throws IOException { </a> 
<a> <RARE_TOKEN> socket = null ; </a> 
<a> try { </a> 
<a> socket = new <RARE_TOKEN> ( 0 ) ; </a> 
<a> return socket . <RARE_TOKEN> ( ) ; </a> 
<a> } finally { </a> 
<a> if ( socket != null ) { </a> 
<a> socket . close ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> @ <RARE_TOKEN> ( <RARE_TOKEN> = true ) </a> 
<a> abstract public void <RARE_TOKEN> ( ) throws Exception ; </a> 
<a> abstract public void <RARE_TOKEN> ( ) ; </a> 
<a> @ <RARE_TOKEN> ( <RARE_TOKEN> = true ) </a> 
<a> abstract public void <RARE_TOKEN> ( ) throws Exception ; </a> 
<a> @ Test ( timeOut = <RARE_TOKEN> , enabled = true ) </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> logger . info ( <RARE_TOKEN> running <RARE_TOKEN> <RARE_TOKEN> , getClass ( ) . getSimpleName ( ) ) ; </a> 
<a> final CountDownLatch latch = new CountDownLatch ( 1 ) ; </a> 
<a> atmoServlet . <RARE_TOKEN> ( <RARE_TOKEN> , new <RARE_TOKEN> ( ) { </a> 
<a> private long currentTime ; </a> 
<a> public void <RARE_TOKEN> ( AtmosphereResource < HttpServletRequest , HttpServletResponse > event ) throws IOException { </a> 
<a> currentTime = System . currentTimeMillis ( ) ; </a> 
<a> event . suspend ( <RARE_TOKEN> , false ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( AtmosphereResourceEvent < HttpServletRequest , HttpServletResponse > event ) throws IOException { </a> 
<a> try { </a> 
<a> event . getResource ( ) . getResponse ( ) . <RARE_TOKEN> ( ) . write ( <RARE_TOKEN> . getBytes ( ) ) ; </a> 
<a> assertTrue ( event . <RARE_TOKEN> ( ) ) ; </a> 
<a> long time = System . currentTimeMillis ( ) - currentTime ; </a> 
<a> if ( time > <RARE_TOKEN> && time < <RARE_TOKEN> ) { </a> 
<a> assertTrue ( true ) ; </a> 
<a> } else { </a> 
<a> assertFalse ( false ) ; </a> 
<a> } </a> 
<a> } finally { </a> 
<a> latch . countDown ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } , new <RARE_TOKEN> ( <RARE_TOKEN> ) ) ; </a> 
<a> AsyncHttpClient c = new AsyncHttpClient ( ) ; </a> 
<a> try { </a> 
<a> Response r = c . prepareGet ( urlTarget ) . execute ( ) . get ( ) ; </a> 
<a> try { </a> 
<a> latch . await ( 20 , TimeUnit . SECONDS ) ; </a> 
<a> } catch ( InterruptedException e ) { </a> 
<a> fail ( e . getMessage ( ) ) ; </a> 
<a> } </a> 
<a> assertNotNull ( r ) ; </a> 
<a> assertEquals ( r . <RARE_TOKEN> ( ) , 200 ) ; </a> 
<a> String resume = r . <RARE_TOKEN> ( ) ; </a> 
<a> assertEquals ( resume , <RARE_TOKEN> ) ; </a> 
<a> } catch ( Exception e ) { </a> 
<a> logger . error ( <RARE_TOKEN> failed" , e ) ; </a> 
<a> fail ( e . getMessage ( ) ) ; </a> 
<a> } </a> 
<a> c . close ( ) ; </a> 
<a> } </a> 
<a> @ Test ( timeOut = <RARE_TOKEN> , enabled = true ) </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> logger . info ( <RARE_TOKEN> running <RARE_TOKEN> <RARE_TOKEN> , getClass ( ) . getSimpleName ( ) ) ; </a> 
<a> final CountDownLatch latch = new CountDownLatch ( 1 ) ; </a> 
<a> atmoServlet . <RARE_TOKEN> ( <RARE_TOKEN> , new <RARE_TOKEN> ( ) { </a> 
<a> private long currentTime ; </a> 
<a> public void <RARE_TOKEN> ( AtmosphereResource < HttpServletRequest , HttpServletResponse > event ) throws IOException { </a> 
<a> currentTime = System . currentTimeMillis ( ) ; </a> 
<a> event . suspend ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( AtmosphereResourceEvent < HttpServletRequest , HttpServletResponse > event ) throws IOException { </a> 
<a> try { </a> 
<a> assertTrue ( event . <RARE_TOKEN> ( ) ) ; </a> 
<a> long time = System . currentTimeMillis ( ) - currentTime ; </a> 
<a> if ( time > <RARE_TOKEN> && time < <RARE_TOKEN> ) { </a> 
<a> assertTrue ( true ) ; </a> 
<a> } else { </a> 
<a> assertFalse ( false ) ; </a> 
<a> } </a> 
<a> } finally { </a> 
<a> latch . countDown ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } , new <RARE_TOKEN> ( <RARE_TOKEN> ) ) ; </a> 
<a> AsyncHttpClient c = new AsyncHttpClient ( ) ; </a> 
<a> try { </a> 
<a> Response r = c . prepareGet ( urlTarget ) . execute ( ) . get ( ) ; </a> 
<a> try { </a> 
<a> latch . await ( 20 , TimeUnit . SECONDS ) ; </a> 
<a> } catch ( InterruptedException e ) { </a> 
<a> fail ( e . getMessage ( ) ) ; </a> 
<a> } </a> 
<a> assertNotNull ( r ) ; </a> 
<a> assertEquals ( r . <RARE_TOKEN> ( ) , 200 ) ; </a> 
<a> String resume = r . <RARE_TOKEN> ( ) ; </a> 
<a> assertEquals ( resume , AtmosphereResourceImpl . <RARE_TOKEN> ( ) ) ; </a> 
<a> } catch ( Exception e ) { </a> 
<a> logger . error ( <RARE_TOKEN> failed" , e ) ; </a> 
<a> fail ( e . getMessage ( ) ) ; </a> 
<a> } </a> 
<a> c . close ( ) ; </a> 
<a> } </a> 
<a> @ Test ( timeOut = <RARE_TOKEN> , enabled = false ) </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> logger . info ( <RARE_TOKEN> running <RARE_TOKEN> <RARE_TOKEN> , getClass ( ) . getSimpleName ( ) ) ; </a> 
<a> final CountDownLatch latch = new CountDownLatch ( 1 ) ; </a> 
<a> atmoServlet . <RARE_TOKEN> ( <RARE_TOKEN> , new <RARE_TOKEN> ( ) { </a> 
<a> private long currentTime ; </a> 
<a> public void <RARE_TOKEN> ( AtmosphereResource < HttpServletRequest , HttpServletResponse > event ) throws IOException { </a> 
<a> currentTime = System . currentTimeMillis ( ) ; </a> 
<a> event . suspend ( ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( AtmosphereResourceEvent < HttpServletRequest , HttpServletResponse > event ) throws IOException { </a> 
<a> try { </a> 
<a> assertTrue ( event . isCancelled ( ) ) ; </a> 
<a> long time = System . currentTimeMillis ( ) - currentTime ; </a> 
<a> if ( time > <RARE_TOKEN> && time < <RARE_TOKEN> ) { </a> 
<a> assertTrue ( true ) ; </a> 
<a> } else { </a> 
<a> assertFalse ( false ) ; </a> 
<a> } </a> 
<a> } finally { </a> 
<a> latch . countDown ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } , new <RARE_TOKEN> ( <RARE_TOKEN> ) ) ; </a> 
<a> AsyncHttpClient c = new AsyncHttpClient ( ) ; </a> 
<a> try { </a> 
<a> Response r = c . prepareGet ( urlTarget ) . execute ( ) . get ( ) ; </a> 
<a> if ( latch . <RARE_TOKEN> ( ) != 0 ) { </a> 
<a> fail ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> assertNotNull ( r ) ; </a> 
<a> } catch ( Exception e ) { </a> 
<a> logger . error ( <RARE_TOKEN> failed" , e ) ; </a> 
<a> fail ( e . getMessage ( ) ) ; </a> 
<a> } </a> 
<a> c . close ( ) ; </a> 
<a> } </a> 
<a> @ Test ( timeOut = <RARE_TOKEN> , enabled = true ) </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> logger . info ( <RARE_TOKEN> running <RARE_TOKEN> <RARE_TOKEN> , getClass ( ) . getSimpleName ( ) ) ; </a> 
<a> final CountDownLatch latch = new CountDownLatch ( 2 ) ; </a> 
<a> final CountDownLatch suspended = new CountDownLatch ( 1 ) ; </a> 
<a> atmoServlet . <RARE_TOKEN> ( <RARE_TOKEN> , new <RARE_TOKEN> ( ) { </a> 
<a> AtomicBoolean b = new AtomicBoolean ( false ) ; </a> 
<a> AtmosphereResource < HttpServletRequest , HttpServletResponse > <RARE_TOKEN> ; </a> 
<a> public void <RARE_TOKEN> ( AtmosphereResource < HttpServletRequest , HttpServletResponse > event ) throws IOException { </a> 
<a> if ( ! b . <RARE_TOKEN> ( true ) ) { </a> 
<a> try { </a> 
<a> <RARE_TOKEN> = event ; </a> 
<a> event . suspend ( ) ; </a> 
<a> } finally { </a> 
<a> suspended . countDown ( ) ; </a> 
<a> } </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> . getResponse ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> . resume ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( AtmosphereResourceEvent < HttpServletRequest , HttpServletResponse > event ) throws IOException { </a> 
<a> try { </a> 
<a> assertTrue ( event . <RARE_TOKEN> ( ) ) ; </a> 
<a> } finally { </a> 
<a> latch . countDown ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } , new <RARE_TOKEN> ( <RARE_TOKEN> ) ) ; </a> 
<a> AsyncHttpClient c = new AsyncHttpClient ( ) ; </a> 
<a> try { </a> 
<a> c . prepareGet ( urlTarget ) . execute ( new <RARE_TOKEN> < String > ( ) { </a> 
<a> @ Override </a> 
<a> public String onCompleted ( Response response ) throws Exception { </a> 
<a> try { </a> 
<a> assertEquals ( response . <RARE_TOKEN> ( ) , </a> 
<a> AtmosphereResourceImpl . <RARE_TOKEN> ( ) ) ; </a> 
<a> } finally { </a> 
<a> latch . countDown ( ) ; </a> 
<a> } </a> 
<a> return null ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> suspended . await ( 20 , TimeUnit . SECONDS ) ; </a> 
<a> Response r = c . prepareGet ( urlTarget ) . execute ( ) . get ( ) ; </a> 
<a> try { </a> 
<a> latch . await ( 20 , TimeUnit . SECONDS ) ; </a> 
<a> } catch ( InterruptedException e ) { </a> 
<a> fail ( e . getMessage ( ) ) ; </a> 
<a> } </a> 
<a> assertNotNull ( r ) ; </a> 
<a> assertEquals ( r . <RARE_TOKEN> ( ) , 200 ) ; </a> 
<a> } catch ( Exception e ) { </a> 
<a> logger . error ( <RARE_TOKEN> failed" , e ) ; </a> 
<a> fail ( e . getMessage ( ) ) ; </a> 
<a> } </a> 
<a> c . close ( ) ; </a> 
<a> } </a> 
<a> @ Test ( timeOut = <RARE_TOKEN> , enabled = true ) </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> logger . info ( <RARE_TOKEN> running <RARE_TOKEN> <RARE_TOKEN> , getClass ( ) . getSimpleName ( ) ) ; </a> 
<a> final CountDownLatch latch = new CountDownLatch ( 2 ) ; </a> 
<a> final CountDownLatch suspended = new CountDownLatch ( 1 ) ; </a> 
<a> atmoServlet . <RARE_TOKEN> ( <RARE_TOKEN> , new <RARE_TOKEN> ( ) { </a> 
<a> AtomicBoolean b = new AtomicBoolean ( false ) ; </a> 
<a> public void <RARE_TOKEN> ( AtmosphereResource < HttpServletRequest , HttpServletResponse > event ) throws IOException { </a> 
<a> if ( ! b . <RARE_TOKEN> ( true ) ) { </a> 
<a> try { </a> 
<a> event . suspend ( ) ; </a> 
<a> } finally { </a> 
<a> suspended . countDown ( ) ; </a> 
<a> } </a> 
<a> } else { </a> 
<a> event . getBroadcaster ( ) . broadcast ( "foo" ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( AtmosphereResourceEvent < HttpServletRequest , HttpServletResponse > event ) throws IOException { </a> 
<a> if ( event . <RARE_TOKEN> ( ) ) { </a> 
<a> return ; </a> 
<a> } </a> 
<a> try { </a> 
<a> assertFalse ( event . isCancelled ( ) ) ; </a> 
<a> assertNotNull ( event . getMessage ( ) ) ; </a> 
<a> assertEquals ( event . getMessage ( ) , "foo" ) ; </a> 
<a> event . getResource ( ) . getResponse ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> event . getResource ( ) . resume ( ) ; </a> 
<a> } finally { </a> 
<a> latch . countDown ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } , new <RARE_TOKEN> ( <RARE_TOKEN> ) ) ; </a> 
<a> AsyncHttpClient c = new AsyncHttpClient ( ) ; </a> 
<a> try { </a> 
<a> c . prepareGet ( urlTarget ) . execute ( new <RARE_TOKEN> < String > ( ) { </a> 
<a> @ Override </a> 
<a> public String onCompleted ( Response response ) throws Exception { </a> 
<a> try { </a> 
<a> assertEquals ( response . <RARE_TOKEN> ( ) , </a> 
<a> AtmosphereResourceImpl . <RARE_TOKEN> ( ) ) ; </a> 
<a> } finally { </a> 
<a> latch . countDown ( ) ; </a> 
<a> } </a> 
<a> return null ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> suspended . await ( 20 , TimeUnit . SECONDS ) ; </a> 
<a> Response r = c . prepareGet ( urlTarget ) . execute ( ) . get ( ) ; </a> 
<a> try { </a> 
<a> latch . await ( 20 , TimeUnit . SECONDS ) ; </a> 
<a> } catch ( InterruptedException e ) { </a> 
<a> fail ( e . getMessage ( ) ) ; </a> 
<a> } </a> 
<a> assertNotNull ( r ) ; </a> 
<a> assertEquals ( r . <RARE_TOKEN> ( ) , 200 ) ; </a> 
<a> } catch ( Exception e ) { </a> 
<a> logger . error ( <RARE_TOKEN> failed" , e ) ; </a> 
<a> fail ( e . getMessage ( ) ) ; </a> 
<a> } </a> 
<a> c . close ( ) ; </a> 
<a> } </a> 
<a> @ Test ( timeOut = <RARE_TOKEN> , enabled = true ) </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> logger . info ( <RARE_TOKEN> running <RARE_TOKEN> <RARE_TOKEN> , getClass ( ) . getSimpleName ( ) ) ; </a> 
<a> final CountDownLatch latch = new CountDownLatch ( 2 ) ; </a> 
<a> final CountDownLatch suspended = new CountDownLatch ( 1 ) ; </a> 
<a> atmoServlet . <RARE_TOKEN> ( <RARE_TOKEN> , new <RARE_TOKEN> ( ) { </a> 
<a> AtomicBoolean b = new AtomicBoolean ( false ) ; </a> 
<a> private long currentTime ; </a> 
<a> public void <RARE_TOKEN> ( AtmosphereResource < HttpServletRequest , HttpServletResponse > event ) throws IOException { </a> 
<a> if ( ! b . <RARE_TOKEN> ( true ) ) { </a> 
<a> try { </a> 
<a> event . suspend ( ) ; </a> 
<a> } finally { </a> 
<a> suspended . countDown ( ) ; </a> 
<a> } </a> 
<a> } else { </a> 
<a> currentTime = System . currentTimeMillis ( ) ; </a> 
<a> event . getBroadcaster ( ) . <RARE_TOKEN> ( "foo" , 5 , TimeUnit . SECONDS ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( AtmosphereResourceEvent < HttpServletRequest , HttpServletResponse > event ) throws IOException { </a> 
<a> if ( event . <RARE_TOKEN> ( ) ) { </a> 
<a> return ; </a> 
<a> } </a> 
<a> try { </a> 
<a> long time = System . currentTimeMillis ( ) - currentTime ; </a> 
<a> if ( time > <RARE_TOKEN> && time < <RARE_TOKEN> ) { </a> 
<a> assertTrue ( true ) ; </a> 
<a> } else { </a> 
<a> assertFalse ( false ) ; </a> 
<a> } </a> 
<a> assertFalse ( event . isCancelled ( ) ) ; </a> 
<a> assertNotNull ( event . getMessage ( ) ) ; </a> 
<a> assertEquals ( event . getMessage ( ) , "foo" ) ; </a> 
<a> event . getResource ( ) . getResponse ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> event . getResource ( ) . resume ( ) ; </a> 
<a> } finally { </a> 
<a> latch . countDown ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } , new <RARE_TOKEN> ( <RARE_TOKEN> ) ) ; </a> 
<a> AsyncHttpClient c = new AsyncHttpClient ( ) ; </a> 
<a> try { </a> 
<a> c . prepareGet ( urlTarget ) . execute ( new <RARE_TOKEN> < String > ( ) { </a> 
<a> @ Override </a> 
<a> public String onCompleted ( Response response ) throws Exception { </a> 
<a> try { </a> 
<a> assertEquals ( response . <RARE_TOKEN> ( ) , </a> 
<a> AtmosphereResourceImpl . <RARE_TOKEN> ( ) ) ; </a> 
<a> } finally { </a> 
<a> latch . countDown ( ) ; </a> 
<a> } </a> 
<a> return null ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> suspended . await ( 20 , TimeUnit . SECONDS ) ; </a> 
<a> Response r = c . prepareGet ( urlTarget ) . execute ( ) . get ( ) ; </a> 
<a> try { </a> 
<a> latch . await ( 20 , TimeUnit . SECONDS ) ; </a> 
<a> } catch ( InterruptedException e ) { </a> 
<a> fail ( e . getMessage ( ) ) ; </a> 
<a> } </a> 
<a> assertNotNull ( r ) ; </a> 
<a> assertEquals ( r . <RARE_TOKEN> ( ) , 200 ) ; </a> 
<a> } catch ( Exception e ) { </a> 
<a> logger . error ( <RARE_TOKEN> failed" , e ) ; </a> 
<a> fail ( e . getMessage ( ) ) ; </a> 
<a> } </a> 
<a> c . close ( ) ; </a> 
<a> } </a> 
<a> @ Test ( timeOut = <RARE_TOKEN> , enabled = true ) </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> logger . info ( <RARE_TOKEN> running <RARE_TOKEN> <RARE_TOKEN> , getClass ( ) . getSimpleName ( ) ) ; </a> 
<a> final CountDownLatch latch = new CountDownLatch ( 2 ) ; </a> 
<a> atmoServlet . <RARE_TOKEN> ( <RARE_TOKEN> , new <RARE_TOKEN> ( ) { </a> 
<a> AtomicBoolean b = new AtomicBoolean ( false ) ; </a> 
<a> AtomicInteger count = new AtomicInteger ( 0 ) ; </a> 
<a> private long currentTime ; </a> 
<a> public void <RARE_TOKEN> ( AtmosphereResource < HttpServletRequest , HttpServletResponse > event ) throws IOException { </a> 
<a> if ( ! b . <RARE_TOKEN> ( true ) ) { </a> 
<a> event . suspend ( - 1 , false ) ; </a> 
<a> } else { </a> 
<a> currentTime = System . currentTimeMillis ( ) ; </a> 
<a> if ( count . get ( ) < 4 ) { </a> 
<a> event . getBroadcaster ( ) . <RARE_TOKEN> ( <RARE_TOKEN> + count . <RARE_TOKEN> ( ) + " " ) ; </a> 
<a> } else { </a> 
<a> event . getBroadcaster ( ) . broadcast ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( AtmosphereResourceEvent < HttpServletRequest , HttpServletResponse > event ) throws IOException { </a> 
<a> if ( event . <RARE_TOKEN> ( ) ) { </a> 
<a> return ; </a> 
<a> } </a> 
<a> try { </a> 
<a> event . getResource ( ) . getResponse ( ) . <RARE_TOKEN> ( ) . write ( ( String ) event . getMessage ( ) ) ; </a> 
<a> event . getResource ( ) . getResponse ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> event . getResource ( ) . resume ( ) ; </a> 
<a> } catch ( Exception ex ) { </a> 
<a> logger . error ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> , ex ) ; </a> 
<a> } finally { </a> 
<a> latch . countDown ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } , new <RARE_TOKEN> ( <RARE_TOKEN> ) ) ; </a> 
<a> AsyncHttpClient c = new AsyncHttpClient ( ) ; </a> 
<a> try { </a> 
<a> Future < Response > f = c . prepareGet ( urlTarget ) . execute ( ) ; </a> 
<a> latch . await ( 5 , TimeUnit . SECONDS ) ; </a> 
<a> c . prepareGet ( urlTarget ) . execute ( ) . get ( ) ; </a> 
<a> c . prepareGet ( urlTarget ) . execute ( ) . get ( ) ; </a> 
<a> c . prepareGet ( urlTarget ) . execute ( ) . get ( ) ; </a> 
<a> c . prepareGet ( urlTarget ) . execute ( ) . get ( ) ; </a> 
<a> c . prepareGet ( urlTarget ) . execute ( ) . get ( ) ; </a> 
<a> Response r = f . get ( 10 , TimeUnit . SECONDS ) ; </a> 
<a> assertNotNull ( r ) ; </a> 
<a> assertEquals ( r . <RARE_TOKEN> ( ) , <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> assertEquals ( r . <RARE_TOKEN> ( ) , 200 ) ; </a> 
<a> } catch ( Exception e ) { </a> 
<a> logger . error ( <RARE_TOKEN> failed" , e ) ; </a> 
<a> fail ( e . getMessage ( ) ) ; </a> 
<a> } </a> 
<a> c . close ( ) ; </a> 
<a> } </a> 
<a> @ Test ( timeOut = <RARE_TOKEN> , enabled = true ) </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> logger . info ( <RARE_TOKEN> running <RARE_TOKEN> <RARE_TOKEN> , getClass ( ) . getSimpleName ( ) ) ; </a> 
<a> final CountDownLatch latch = new CountDownLatch ( 2 ) ; </a> 
<a> final CountDownLatch suspended = new CountDownLatch ( 1 ) ; </a> 
<a> atmoServlet . <RARE_TOKEN> ( <RARE_TOKEN> , new <RARE_TOKEN> ( ) { </a> 
<a> AtomicBoolean b = new AtomicBoolean ( false ) ; </a> 
<a> private long currentTime ; </a> 
<a> public void <RARE_TOKEN> ( AtmosphereResource < HttpServletRequest , HttpServletResponse > event ) throws IOException { </a> 
<a> if ( ! b . <RARE_TOKEN> ( true ) ) { </a> 
<a> try { </a> 
<a> event . suspend ( ) ; </a> 
<a> } finally { </a> 
<a> suspended . countDown ( ) ; </a> 
<a> } </a> 
<a> } else { </a> 
<a> currentTime = System . currentTimeMillis ( ) ; </a> 
<a> event . getBroadcaster ( ) . <RARE_TOKEN> ( "foo" , 0 , 5 , TimeUnit . SECONDS ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( AtmosphereResourceEvent < HttpServletRequest , HttpServletResponse > event ) throws IOException { </a> 
<a> if ( event . <RARE_TOKEN> ( ) ) { </a> 
<a> return ; </a> 
<a> } </a> 
<a> try { </a> 
<a> long time = System . currentTimeMillis ( ) - currentTime ; </a> 
<a> if ( time > <RARE_TOKEN> && time < <RARE_TOKEN> ) { </a> 
<a> assertTrue ( true ) ; </a> 
<a> } else { </a> 
<a> assertFalse ( false ) ; </a> 
<a> } </a> 
<a> assertFalse ( event . isCancelled ( ) ) ; </a> 
<a> assertNotNull ( event . getMessage ( ) ) ; </a> 
<a> assertEquals ( event . getMessage ( ) , "foo" ) ; </a> 
<a> event . getResource ( ) . getResponse ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> event . getResource ( ) . resume ( ) ; </a> 
<a> } finally { </a> 
<a> latch . countDown ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } , new <RARE_TOKEN> ( <RARE_TOKEN> ) ) ; </a> 
<a> AsyncHttpClient c = new AsyncHttpClient ( ) ; </a> 
<a> try { </a> 
<a> c . prepareGet ( urlTarget ) . execute ( new <RARE_TOKEN> < String > ( ) { </a> 
<a> @ Override </a> 
<a> public String onCompleted ( Response response ) throws Exception { </a> 
<a> try { </a> 
<a> assertEquals ( response . <RARE_TOKEN> ( ) , </a> 
<a> AtmosphereResourceImpl . <RARE_TOKEN> ( ) ) ; </a> 
<a> } finally { </a> 
<a> latch . countDown ( ) ; </a> 
<a> } </a> 
<a> return null ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> suspended . await ( 20 , TimeUnit . SECONDS ) ; </a> 
<a> Response r = c . prepareGet ( urlTarget ) . execute ( ) . get ( ) ; </a> 
<a> assertNotNull ( r ) ; </a> 
<a> assertEquals ( r . <RARE_TOKEN> ( ) , 200 ) ; </a> 
<a> } catch ( Exception e ) { </a> 
<a> logger . error ( <RARE_TOKEN> failed" , e ) ; </a> 
<a> fail ( e . getMessage ( ) ) ; </a> 
<a> } </a> 
<a> try { </a> 
<a> latch . await ( 20 , TimeUnit . SECONDS ) ; </a> 
<a> } catch ( InterruptedException e ) { </a> 
<a> fail ( e . getMessage ( ) ) ; </a> 
<a> } </a> 
<a> c . close ( ) ; </a> 
<a> } </a> 
<a> @ Test ( timeOut = <RARE_TOKEN> , enabled = true ) </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> logger . info ( <RARE_TOKEN> running <RARE_TOKEN> <RARE_TOKEN> , getClass ( ) . getSimpleName ( ) ) ; </a> 
<a> final CountDownLatch latch = new CountDownLatch ( 2 ) ; </a> 
<a> final CountDownLatch suspended = new CountDownLatch ( 1 ) ; </a> 
<a> atmoServlet . <RARE_TOKEN> ( <RARE_TOKEN> , new <RARE_TOKEN> ( ) { </a> 
<a> AtomicBoolean b = new AtomicBoolean ( false ) ; </a> 
<a> private long currentTime ; </a> 
<a> public void <RARE_TOKEN> ( AtmosphereResource < HttpServletRequest , HttpServletResponse > event ) throws IOException { </a> 
<a> if ( ! b . <RARE_TOKEN> ( true ) ) { </a> 
<a> try { </a> 
<a> event . suspend ( ) ; </a> 
<a> } finally { </a> 
<a> suspended . countDown ( ) ; </a> 
<a> } </a> 
<a> } else { </a> 
<a> currentTime = System . currentTimeMillis ( ) ; </a> 
<a> event . getBroadcaster ( ) . <RARE_TOKEN> ( "foo" , 10 , 5 , TimeUnit . SECONDS ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( AtmosphereResourceEvent < HttpServletRequest , HttpServletResponse > event ) throws IOException { </a> 
<a> if ( event . <RARE_TOKEN> ( ) ) { </a> 
<a> return ; </a> 
<a> } </a> 
<a> try { </a> 
<a> long time = System . currentTimeMillis ( ) - currentTime ; </a> 
<a> if ( time > <RARE_TOKEN> && time < <RARE_TOKEN> ) { </a> 
<a> assertTrue ( true ) ; </a> 
<a> } else { </a> 
<a> assertFalse ( false ) ; </a> 
<a> } </a> 
<a> assertFalse ( event . isCancelled ( ) ) ; </a> 
<a> assertNotNull ( event . getMessage ( ) ) ; </a> 
<a> assertEquals ( event . getMessage ( ) , "foo" ) ; </a> 
<a> event . getResource ( ) . getResponse ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> event . getResource ( ) . resume ( ) ; </a> 
<a> } finally { </a> 
<a> latch . countDown ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } , new <RARE_TOKEN> ( <RARE_TOKEN> ) ) ; </a> 
<a> AsyncHttpClient c = new AsyncHttpClient ( ) ; </a> 
<a> try { </a> 
<a> c . prepareGet ( urlTarget ) . execute ( new <RARE_TOKEN> < String > ( ) { </a> 
<a> @ Override </a> 
<a> public String onCompleted ( Response response ) throws Exception { </a> 
<a> try { </a> 
<a> assertEquals ( response . <RARE_TOKEN> ( ) , </a> 
<a> AtmosphereResourceImpl . <RARE_TOKEN> ( ) ) ; </a> 
<a> } finally { </a> 
<a> latch . countDown ( ) ; </a> 
<a> } </a> 
<a> return null ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> suspended . await ( 20 , TimeUnit . SECONDS ) ; </a> 
<a> Response r = c . prepareGet ( urlTarget ) . execute ( ) . get ( ) ; </a> 
<a> try { </a> 
<a> latch . await ( 20 , TimeUnit . SECONDS ) ; </a> 
<a> } catch ( InterruptedException e ) { </a> 
<a> fail ( e . getMessage ( ) ) ; </a> 
<a> } </a> 
<a> assertNotNull ( r ) ; </a> 
<a> assertEquals ( r . <RARE_TOKEN> ( ) , 200 ) ; </a> 
<a> } catch ( Exception e ) { </a> 
<a> logger . error ( <RARE_TOKEN> failed" , e ) ; </a> 
<a> fail ( e . getMessage ( ) ) ; </a> 
<a> } </a> 
<a> c . close ( ) ; </a> 
<a> } </a> 
<a> @ Test ( timeOut = <RARE_TOKEN> , enabled = true ) </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> logger . info ( <RARE_TOKEN> running <RARE_TOKEN> <RARE_TOKEN> , getClass ( ) . getSimpleName ( ) ) ; </a> 
<a> final CountDownLatch latch = new CountDownLatch ( 2 ) ; </a> 
<a> final CountDownLatch suspended = new CountDownLatch ( 1 ) ; </a> 
<a> atmoServlet . <RARE_TOKEN> ( <RARE_TOKEN> , new <RARE_TOKEN> ( ) { </a> 
<a> AtomicBoolean b = new AtomicBoolean ( false ) ; </a> 
<a> public void <RARE_TOKEN> ( AtmosphereResource < HttpServletRequest , HttpServletResponse > event ) throws IOException { </a> 
<a> if ( ! b . <RARE_TOKEN> ( true ) ) { </a> 
<a> try { </a> 
<a> event . suspend ( ) ; </a> 
<a> } finally { </a> 
<a> suspended . countDown ( ) ; </a> 
<a> } </a> 
<a> } else { </a> 
<a> event . getBroadcaster ( ) . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( new <RARE_TOKEN> ( ) { </a> 
<a> public BroadcastAction filter ( Object o , Object message ) { </a> 
<a> return new BroadcastAction ( BroadcastAction . <RARE_TOKEN> . <RARE_TOKEN> , <RARE_TOKEN> + message ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> event . getBroadcaster ( ) . broadcast ( "foo" ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( AtmosphereResourceEvent < HttpServletRequest , HttpServletResponse > event ) throws IOException { </a> 
<a> if ( event . <RARE_TOKEN> ( ) ) { </a> 
<a> return ; </a> 
<a> } </a> 
<a> try { </a> 
<a> assertFalse ( event . isCancelled ( ) ) ; </a> 
<a> assertNotNull ( event . getMessage ( ) ) ; </a> 
<a> assertEquals ( event . getMessage ( ) , <RARE_TOKEN> ) ; </a> 
<a> event . getResource ( ) . getResponse ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> event . getResource ( ) . resume ( ) ; </a> 
<a> } finally { </a> 
<a> latch . countDown ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } , new <RARE_TOKEN> ( <RARE_TOKEN> ) ) ; </a> 
<a> AsyncHttpClient c = new AsyncHttpClient ( ) ; </a> 
<a> try { </a> 
<a> c . prepareGet ( urlTarget ) . execute ( new <RARE_TOKEN> < String > ( ) { </a> 
<a> @ Override </a> 
<a> public String onCompleted ( Response response ) throws Exception { </a> 
<a> try { </a> 
<a> assertEquals ( response . <RARE_TOKEN> ( ) , </a> 
<a> AtmosphereResourceImpl . <RARE_TOKEN> ( ) ) ; </a> 
<a> } finally { </a> 
<a> latch . countDown ( ) ; </a> 
<a> } </a> 
<a> return null ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> suspended . await ( 20 , TimeUnit . SECONDS ) ; </a> 
<a> Response r = c . prepareGet ( urlTarget ) . execute ( ) . get ( ) ; </a> 
<a> try { </a> 
<a> latch . await ( 20 , TimeUnit . SECONDS ) ; </a> 
<a> } catch ( InterruptedException e ) { </a> 
<a> fail ( e . getMessage ( ) ) ; </a> 
<a> } </a> 
<a> assertNotNull ( r ) ; </a> 
<a> assertEquals ( r . <RARE_TOKEN> ( ) , 200 ) ; </a> 
<a> } catch ( Exception e ) { </a> 
<a> logger . error ( <RARE_TOKEN> failed" , e ) ; </a> 
<a> fail ( e . getMessage ( ) ) ; </a> 
<a> } </a> 
<a> c . close ( ) ; </a> 
<a> } </a> 
<a> @ Test ( timeOut = <RARE_TOKEN> , enabled = true ) </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> logger . info ( <RARE_TOKEN> running <RARE_TOKEN> <RARE_TOKEN> , getClass ( ) . getSimpleName ( ) ) ; </a> 
<a> final CountDownLatch latch = new CountDownLatch ( 2 ) ; </a> 
<a> final CountDownLatch suspended = new CountDownLatch ( 1 ) ; </a> 
<a> atmoServlet . <RARE_TOKEN> ( <RARE_TOKEN> , new <RARE_TOKEN> ( ) { </a> 
<a> AtomicBoolean b = new AtomicBoolean ( false ) ; </a> 
<a> public void <RARE_TOKEN> ( AtmosphereResource < HttpServletRequest , HttpServletResponse > event ) throws IOException { </a> 
<a> if ( ! b . <RARE_TOKEN> ( true ) ) { </a> 
<a> <RARE_TOKEN> a = new <RARE_TOKEN> ( 25 ) ; </a> 
<a> event . getBroadcaster ( ) . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( a ) ; </a> 
<a> try { </a> 
<a> event . suspend ( ) ; </a> 
<a> } finally { </a> 
<a> suspended . countDown ( ) ; </a> 
<a> } </a> 
<a> } else { </a> 
<a> event . getBroadcaster ( ) . broadcast ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( AtmosphereResourceEvent < HttpServletRequest , HttpServletResponse > event ) throws IOException { </a> 
<a> if ( event . <RARE_TOKEN> ( ) ) { </a> 
<a> return ; </a> 
<a> } </a> 
<a> assertFalse ( event . isCancelled ( ) ) ; </a> 
<a> assertNotNull ( event . getMessage ( ) ) ; </a> 
<a> assertEquals ( event . getMessage ( ) , <RARE_TOKEN> ) ; </a> 
<a> event . getResource ( ) . getResponse ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> event . getResource ( ) . resume ( ) ; </a> 
<a> latch . countDown ( ) ; </a> 
<a> } </a> 
<a> } , new <RARE_TOKEN> ( <RARE_TOKEN> ) ) ; </a> 
<a> AsyncHttpClient c = new AsyncHttpClient ( ) ; </a> 
<a> try { </a> 
<a> c . prepareGet ( urlTarget ) . execute ( new <RARE_TOKEN> < String > ( ) { </a> 
<a> @ Override </a> 
<a> public String onCompleted ( Response response ) throws Exception { </a> 
<a> try { </a> 
<a> assertEquals ( response . <RARE_TOKEN> ( ) , </a> 
<a> AtmosphereResourceImpl . <RARE_TOKEN> ( ) ) ; </a> 
<a> } finally { </a> 
<a> latch . countDown ( ) ; </a> 
<a> } </a> 
<a> return null ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> suspended . await ( 20 , TimeUnit . SECONDS ) ; </a> 
<a> c . prepareGet ( urlTarget ) . execute ( ) . get ( ) ; </a> 
<a> c . prepareGet ( urlTarget ) . execute ( ) . get ( ) ; </a> 
<a> Response r = c . prepareGet ( urlTarget ) . execute ( ) . get ( ) ; </a> 
<a> try { </a> 
<a> latch . await ( 20 , TimeUnit . SECONDS ) ; </a> 
<a> } catch ( InterruptedException e ) { </a> 
<a> fail ( e . getMessage ( ) ) ; </a> 
<a> } </a> 
<a> assertNotNull ( r ) ; </a> 
<a> assertEquals ( r . <RARE_TOKEN> ( ) , 200 ) ; </a> 
<a> } catch ( Exception e ) { </a> 
<a> logger . error ( <RARE_TOKEN> failed" , e ) ; </a> 
<a> fail ( e . getMessage ( ) ) ; </a> 
<a> } </a> 
<a> c . close ( ) ; </a> 
<a> } </a> 
<a> @ Test ( timeOut = <RARE_TOKEN> , enabled = true ) </a> 
<a> public void <RARE_TOKEN> ( ) throws <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> { </a> 
<a> logger . info ( <RARE_TOKEN> running <RARE_TOKEN> <RARE_TOKEN> , getClass ( ) . getSimpleName ( ) ) ; </a> 
<a> atmoServlet . <RARE_TOKEN> ( <RARE_TOKEN> . class . getName ( ) ) ; </a> 
<a> final CountDownLatch latch = new CountDownLatch ( 1 ) ; </a> 
<a> long <RARE_TOKEN> = System . currentTimeMillis ( ) ; </a> 
<a> atmoServlet . <RARE_TOKEN> ( <RARE_TOKEN> , new <RARE_TOKEN> ( ) { </a> 
<a> public void <RARE_TOKEN> ( AtmosphereResource < HttpServletRequest , HttpServletResponse > event ) throws IOException { </a> 
<a> try { </a> 
<a> if ( event . getRequest ( ) . getHeader ( HeaderConfig . <RARE_TOKEN> ) != null ) { </a> 
<a> event . suspend ( - 1 , false ) ; </a> 
<a> return ; </a> 
<a> } </a> 
<a> event . getBroadcaster ( ) . broadcast ( <RARE_TOKEN> ) . get ( ) ; </a> 
<a> } catch ( InterruptedException e ) { </a> 
<a> logger . error ( "" , e ) ; </a> 
<a> } catch ( <RARE_TOKEN> e ) { </a> 
<a> logger . error ( "" , e ) ; </a> 
<a> } </a> 
<a> event . getResponse ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( AtmosphereResourceEvent < HttpServletRequest , HttpServletResponse > event ) throws IOException { </a> 
<a> if ( event . <RARE_TOKEN> ( ) ) { </a> 
<a> return ; </a> 
<a> } </a> 
<a> try { </a> 
<a> assertFalse ( event . isCancelled ( ) ) ; </a> 
<a> assertNotNull ( event . getMessage ( ) ) ; </a> 
<a> if ( List . class . isAssignableFrom ( event . getMessage ( ) . getClass ( ) ) ) { </a> 
<a> for ( String m : ( List < String > ) event . getMessage ( ) ) { </a> 
<a> event . getResource ( ) . getResponse ( ) . <RARE_TOKEN> ( ) . write ( m . getBytes ( ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> event . getResource ( ) . getResponse ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> event . getResource ( ) . resume ( ) ; </a> 
<a> } finally { </a> 
<a> latch . countDown ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } , new <RARE_TOKEN> ( <RARE_TOKEN> ) ) ; </a> 
<a> AsyncHttpClient c = new AsyncHttpClient ( ) ; </a> 
<a> try { </a> 
<a> c . prepareGet ( urlTarget ) . execute ( ) . get ( ) ; </a> 
<a> c . prepareGet ( urlTarget ) . execute ( ) . get ( ) ; </a> 
<a> Response r = c . prepareGet ( urlTarget ) . addHeader ( HeaderConfig . <RARE_TOKEN> , String . valueOf ( <RARE_TOKEN> ) ) . execute ( new <RARE_TOKEN> < Response > ( ) { </a> 
<a> @ Override </a> 
<a> public Response onCompleted ( Response r ) throws Exception { </a> 
<a> try { </a> 
<a> return r ; </a> 
<a> } finally { </a> 
<a> latch . countDown ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } ) . get ( ) ; </a> 
<a> try { </a> 
<a> latch . await ( 20 , TimeUnit . SECONDS ) ; </a> 
<a> } catch ( InterruptedException e ) { </a> 
<a> fail ( e . getMessage ( ) ) ; </a> 
<a> } </a> 
<a> assertNotNull ( r ) ; </a> 
<a> assertEquals ( r . <RARE_TOKEN> ( ) , 200 ) ; </a> 
<a> assertEquals ( r . <RARE_TOKEN> ( ) , <RARE_TOKEN> ) ; </a> 
<a> } catch ( Exception e ) { </a> 
<a> logger . error ( <RARE_TOKEN> failed" , e ) ; </a> 
<a> fail ( e . getMessage ( ) ) ; </a> 
<a> } </a> 
<a> c . close ( ) ; </a> 
<a> } </a> 
<a> @ Test ( timeOut = <RARE_TOKEN> , enabled = true ) </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> logger . info ( <RARE_TOKEN> running <RARE_TOKEN> <RARE_TOKEN> , getClass ( ) . getSimpleName ( ) ) ; </a> 
<a> final CountDownLatch latch = new CountDownLatch ( 1 ) ; </a> 
<a> atmoServlet . <RARE_TOKEN> ( <RARE_TOKEN> , new <RARE_TOKEN> ( ) { </a> 
<a> private long currentTime ; </a> 
<a> public void <RARE_TOKEN> ( AtmosphereResource < HttpServletRequest , HttpServletResponse > event ) throws IOException { </a> 
<a> currentTime = System . currentTimeMillis ( ) ; </a> 
<a> event . getBroadcaster ( ) . <RARE_TOKEN> ( 1 , Broadcaster . <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> event . suspend ( <RARE_TOKEN> , false ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( AtmosphereResourceEvent < HttpServletRequest , HttpServletResponse > event ) throws IOException { </a> 
<a> try { </a> 
<a> event . getResource ( ) . getResponse ( ) . <RARE_TOKEN> ( ) . write ( <RARE_TOKEN> . getBytes ( ) ) ; </a> 
<a> assertTrue ( event . <RARE_TOKEN> ( ) ) ; </a> 
<a> long time = System . currentTimeMillis ( ) - currentTime ; </a> 
<a> if ( time > <RARE_TOKEN> && time < <RARE_TOKEN> ) { </a> 
<a> assertTrue ( true ) ; </a> 
<a> } else { </a> 
<a> assertFalse ( false ) ; </a> 
<a> } </a> 
<a> } finally { </a> 
<a> latch . countDown ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } , new <RARE_TOKEN> ( <RARE_TOKEN> ) ) ; </a> 
<a> AsyncHttpClient c = new AsyncHttpClient ( ) ; </a> 
<a> try { </a> 
<a> Response r = c . prepareGet ( urlTarget ) . execute ( ) . get ( ) ; </a> 
<a> try { </a> 
<a> latch . await ( 20 , TimeUnit . SECONDS ) ; </a> 
<a> } catch ( InterruptedException e ) { </a> 
<a> fail ( e . getMessage ( ) ) ; </a> 
<a> } </a> 
<a> assertNotNull ( r ) ; </a> 
<a> assertEquals ( r . <RARE_TOKEN> ( ) , 200 ) ; </a> 
<a> String resume = r . <RARE_TOKEN> ( ) ; </a> 
<a> assertEquals ( resume , <RARE_TOKEN> ) ; </a> 
<a> } catch ( Exception e ) { </a> 
<a> logger . error ( <RARE_TOKEN> failed" , e ) ; </a> 
<a> fail ( e . getMessage ( ) ) ; </a> 
<a> } </a> 
<a> c . close ( ) ; </a> 
<a> } </a> 
<a> @ Test ( timeOut = <RARE_TOKEN> , enabled = true ) </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> logger . info ( <RARE_TOKEN> running <RARE_TOKEN> <RARE_TOKEN> , getClass ( ) . getSimpleName ( ) ) ; </a> 
<a> final CountDownLatch latch = new CountDownLatch ( 2 ) ; </a> 
<a> final CountDownLatch suspended = new CountDownLatch ( 1 ) ; </a> 
<a> atmoServlet . <RARE_TOKEN> ( <RARE_TOKEN> , new <RARE_TOKEN> ( ) { </a> 
<a> AtomicBoolean b = new AtomicBoolean ( false ) ; </a> 
<a> private long currentTime ; </a> 
<a> public void <RARE_TOKEN> ( AtmosphereResource < HttpServletRequest , HttpServletResponse > event ) throws IOException { </a> 
<a> if ( ! b . <RARE_TOKEN> ( true ) ) { </a> 
<a> try { </a> 
<a> event . suspend ( ) ; </a> 
<a> event . getBroadcaster ( ) . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } finally { </a> 
<a> suspended . countDown ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( AtmosphereResourceEvent < HttpServletRequest , HttpServletResponse > event ) throws IOException { </a> 
<a> if ( event . <RARE_TOKEN> ( ) ) { </a> 
<a> assertFalse ( event . isCancelled ( ) ) ; </a> 
<a> assertNotNull ( event . getMessage ( ) ) ; </a> 
<a> assertEquals ( event . getMessage ( ) , <RARE_TOKEN> ) ; </a> 
<a> event . getResource ( ) . getResponse ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> return ; </a> 
<a> } </a> 
<a> try { </a> 
<a> event . getResource ( ) . resume ( ) ; </a> 
<a> } finally { </a> 
<a> latch . countDown ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } , new <RARE_TOKEN> ( <RARE_TOKEN> ) ) ; </a> 
<a> AsyncHttpClient c = new AsyncHttpClient ( ) ; </a> 
<a> try { </a> 
<a> c . prepareGet ( urlTarget ) . execute ( new <RARE_TOKEN> < String > ( ) { </a> 
<a> @ Override </a> 
<a> public String onCompleted ( Response response ) throws Exception { </a> 
<a> try { </a> 
<a> assertEquals ( response . <RARE_TOKEN> ( ) , </a> 
<a> AtmosphereResourceImpl . <RARE_TOKEN> ( ) ) ; </a> 
<a> } finally { </a> 
<a> latch . countDown ( ) ; </a> 
<a> } </a> 
<a> return null ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> suspended . await ( 20 , TimeUnit . SECONDS ) ; </a> 
<a> Response r = c . prepareGet ( urlTarget ) . execute ( ) . get ( ) ; </a> 
<a> assertNotNull ( r ) ; </a> 
<a> assertEquals ( r . <RARE_TOKEN> ( ) , 200 ) ; </a> 
<a> } catch ( Exception e ) { </a> 
<a> logger . error ( <RARE_TOKEN> failed" , e ) ; </a> 
<a> fail ( e . getMessage ( ) ) ; </a> 
<a> } </a> 
<a> try { </a> 
<a> latch . await ( 20 , TimeUnit . SECONDS ) ; </a> 
<a> } catch ( InterruptedException e ) { </a> 
<a> fail ( e . getMessage ( ) ) ; </a> 
<a> } </a> 
<a> c . close ( ) ; </a> 
<a> } </a> 
<a> @ Test ( timeOut = <RARE_TOKEN> , enabled = true ) </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> logger . info ( <RARE_TOKEN> running <RARE_TOKEN> <RARE_TOKEN> , getClass ( ) . getSimpleName ( ) ) ; </a> 
<a> final CountDownLatch latch = new CountDownLatch ( 2 ) ; </a> 
<a> final CountDownLatch suspended = new CountDownLatch ( 1 ) ; </a> 
<a> atmoServlet . <RARE_TOKEN> ( <RARE_TOKEN> , new <RARE_TOKEN> ( ) { </a> 
<a> AtomicBoolean b = new AtomicBoolean ( false ) ; </a> 
<a> private long currentTime ; </a> 
<a> public void <RARE_TOKEN> ( AtmosphereResource < HttpServletRequest , HttpServletResponse > event ) throws IOException { </a> 
<a> if ( ! b . <RARE_TOKEN> ( true ) ) { </a> 
<a> try { </a> 
<a> event . suspend ( ) ; </a> 
<a> event . getBroadcaster ( ) . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } finally { </a> 
<a> suspended . countDown ( ) ; </a> 
<a> } </a> 
<a> } else { </a> 
<a> event . resume ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( AtmosphereResourceEvent < HttpServletRequest , HttpServletResponse > event ) throws IOException { </a> 
<a> if ( event . <RARE_TOKEN> ( ) ) { </a> 
<a> assertNotNull ( event . getMessage ( ) ) ; </a> 
<a> assertEquals ( event . getMessage ( ) , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } , new <RARE_TOKEN> ( <RARE_TOKEN> ) ) ; </a> 
<a> AsyncHttpClient c = new AsyncHttpClient ( ) ; </a> 
<a> try { </a> 
<a> c . prepareGet ( urlTarget ) . execute ( new <RARE_TOKEN> < String > ( ) { </a> 
<a> @ Override </a> 
<a> public String onCompleted ( Response response ) throws Exception { </a> 
<a> try { </a> 
<a> assertEquals ( response . <RARE_TOKEN> ( ) , </a> 
<a> AtmosphereResourceImpl . <RARE_TOKEN> ( ) ) ; </a> 
<a> } finally { </a> 
<a> latch . countDown ( ) ; </a> 
<a> } </a> 
<a> return null ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> suspended . await ( 10 , TimeUnit . SECONDS ) ; </a> 
<a> Response r = c . prepareGet ( urlTarget ) . execute ( ) . get ( ) ; </a> 
<a> assertNotNull ( r ) ; </a> 
<a> assertEquals ( r . <RARE_TOKEN> ( ) , 200 ) ; </a> 
<a> } catch ( Exception e ) { </a> 
<a> logger . error ( <RARE_TOKEN> failed" , e ) ; </a> 
<a> fail ( e . getMessage ( ) ) ; </a> 
<a> } </a> 
<a> try { </a> 
<a> latch . await ( 20 , TimeUnit . SECONDS ) ; </a> 
<a> } catch ( InterruptedException e ) { </a> 
<a> fail ( e . getMessage ( ) ) ; </a> 
<a> } </a> 
<a> c . close ( ) ; </a> 
<a> } </a> 
<a> @ Test ( timeOut = <RARE_TOKEN> , enabled = true ) </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> logger . info ( <RARE_TOKEN> running <RARE_TOKEN> <RARE_TOKEN> , getClass ( ) . getSimpleName ( ) ) ; </a> 
<a> final CountDownLatch latch = new CountDownLatch ( 2 ) ; </a> 
<a> atmoServlet . <RARE_TOKEN> ( <RARE_TOKEN> , new <RARE_TOKEN> ( ) { </a> 
<a> private long currentTime ; </a> 
<a> public void <RARE_TOKEN> ( AtmosphereResource < HttpServletRequest , HttpServletResponse > event ) throws IOException { </a> 
<a> currentTime = System . currentTimeMillis ( ) ; </a> 
<a> event . suspend ( <RARE_TOKEN> , false ) ; </a> 
<a> try { </a> 
<a> Broadcaster b = BroadcasterFactory . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( <RARE_TOKEN> . class , <RARE_TOKEN> , true ) ; </a> 
<a> b . <RARE_TOKEN> ( event ) ; </a> 
<a> b . broadcast ( <RARE_TOKEN> <RARE_TOKEN> ) . get ( ) ; </a> 
<a> event . getBroadcaster ( ) . broadcast ( <RARE_TOKEN> <RARE_TOKEN> ) . get ( ) ; </a> 
<a> } catch ( InterruptedException e ) { </a> 
<a> e . printStackTrace ( ) ; </a> 
<a> } catch ( <RARE_TOKEN> e ) { </a> 
<a> e . printStackTrace ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( AtmosphereResourceEvent < HttpServletRequest , HttpServletResponse > event ) throws IOException { </a> 
<a> if ( event . <RARE_TOKEN> ( ) ) { </a> 
<a> return ; </a> 
<a> } </a> 
<a> try { </a> 
<a> event . getResource ( ) . getResponse ( ) . <RARE_TOKEN> ( ) . write ( event . getMessage ( ) . toString ( ) ) ; </a> 
<a> } finally { </a> 
<a> latch . countDown ( ) ; </a> 
<a> if ( latch . <RARE_TOKEN> ( ) == 0 ) { </a> 
<a> event . getResource ( ) . resume ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } , new <RARE_TOKEN> ( <RARE_TOKEN> ) ) ; </a> 
<a> AsyncHttpClient c = new AsyncHttpClient ( ) ; </a> 
<a> try { </a> 
<a> Future < Response > f = c . prepareGet ( urlTarget ) . execute ( ) ; </a> 
<a> try { </a> 
<a> latch . await ( 20 , TimeUnit . SECONDS ) ; </a> 
<a> } catch ( InterruptedException e ) { </a> 
<a> fail ( e . getMessage ( ) ) ; </a> 
<a> } </a> 
<a> Response r = f . get ( ) ; </a> 
<a> assertNotNull ( r ) ; </a> 
<a> assertEquals ( r . <RARE_TOKEN> ( ) , 200 ) ; </a> 
<a> String resume = r . <RARE_TOKEN> ( ) ; </a> 
<a> assertEquals ( resume , <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } catch ( Exception e ) { </a> 
<a> logger . error ( <RARE_TOKEN> failed" , e ) ; </a> 
<a> fail ( e . getMessage ( ) ) ; </a> 
<a> } </a> 
<a> c . close ( ) ; </a> 
<a> } </a> 
<a> @ Test ( timeOut = <RARE_TOKEN> , enabled = true ) </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> logger . info ( <RARE_TOKEN> running <RARE_TOKEN> <RARE_TOKEN> , getClass ( ) . getSimpleName ( ) ) ; </a> 
<a> final AtomicInteger <RARE_TOKEN> = new AtomicInteger ( 0 ) ; </a> 
<a> final AtomicReference < Response > response = new AtomicReference < Response > ( ) ; </a> 
<a> final CountDownLatch latch = new CountDownLatch ( 1 ) ; </a> 
<a> final CountDownLatch <RARE_TOKEN> = new CountDownLatch ( 1 ) ; </a> 
<a> atmoServlet . <RARE_TOKEN> ( <RARE_TOKEN> , new <RARE_TOKEN> ( ) { </a> 
<a> public void <RARE_TOKEN> ( AtmosphereResource < HttpServletRequest , HttpServletResponse > event ) throws IOException { </a> 
<a> if ( event . getRequest ( ) . getHeader ( <RARE_TOKEN> ) != null ) { </a> 
<a> try { </a> 
<a> event . suspend ( - 1 , false ) ; </a> 
<a> <RARE_TOKEN> . countDown ( ) ; </a> 
<a> } finally { </a> 
<a> } </a> 
<a> } else { </a> 
<a> event . getBroadcaster ( ) . broadcast ( <RARE_TOKEN> " ) ; </a> 
<a> event . getBroadcaster ( ) . broadcast ( <RARE_TOKEN> " ) ; </a> 
<a> event . getBroadcaster ( ) . broadcast ( <RARE_TOKEN> " ) ; </a> 
<a> event . getBroadcaster ( ) . broadcast ( <RARE_TOKEN> ) ; </a> 
<a> logger . info ( event . getResponse ( ) . toString ( ) ) ; </a> 
<a> event . getResponse ( ) . <RARE_TOKEN> ( ) . write ( <RARE_TOKEN> . getBytes ( ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( AtmosphereResourceEvent < HttpServletRequest , HttpServletResponse > event ) throws IOException { </a> 
<a> if ( event . <RARE_TOKEN> ( ) ) { </a> 
<a> return ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> writer = event . getResource ( ) . getResponse ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> writer . write ( event . getMessage ( ) . toString ( ) ) ; </a> 
<a> writer . flush ( ) ; </a> 
<a> try { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> } finally { </a> 
<a> if ( <RARE_TOKEN> . get ( ) == 4 ) { </a> 
<a> event . getResource ( ) . resume ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } , new <RARE_TOKEN> ( <RARE_TOKEN> ) ) ; </a> 
<a> AsyncHttpClient c = new AsyncHttpClient ( ) ; </a> 
<a> try { </a> 
<a> c . prepareGet ( urlTarget ) . addHeader ( <RARE_TOKEN> , <RARE_TOKEN> ) . execute ( new <RARE_TOKEN> < Object > ( ) { </a> 
<a> @ Override </a> 
<a> public Object onCompleted ( Response r ) throws Exception { </a> 
<a> response . set ( r ) ; </a> 
<a> latch . countDown ( ) ; </a> 
<a> return null ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> <RARE_TOKEN> . await ( 10 , TimeUnit . SECONDS ) ; </a> 
<a> c . prepareGet ( urlTarget ) . execute ( ) ; </a> 
<a> latch . await ( 10 , TimeUnit . SECONDS ) ; </a> 
<a> assertNotNull ( response . get ( ) ) ; </a> 
<a> assertEquals ( response . get ( ) . <RARE_TOKEN> ( ) , 200 ) ; </a> 
<a> assertEquals ( response . get ( ) . <RARE_TOKEN> ( ) , <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } catch ( Exception e ) { </a> 
<a> logger . error ( <RARE_TOKEN> failed" , e ) ; </a> 
<a> fail ( e . getMessage ( ) ) ; </a> 
<a> } finally { </a> 
<a> c . close ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> package org . atmosphere . <RARE_TOKEN> ; </a> 
<a> import com . <RARE_TOKEN> . http . client . <RARE_TOKEN> ; </a> 
<a> import com . <RARE_TOKEN> . http . client . AsyncHttpClient ; </a> 
<a> import com . <RARE_TOKEN> . http . client . Response ; </a> 
<a> import org . atmosphere . container . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . cpr . ApplicationConfig ; </a> 
<a> import org . atmosphere . cpr . AtmosphereResourceEvent ; </a> 
<a> import org . atmosphere . cpr . AtmosphereResourceEventListener ; </a> 
<a> import org . atmosphere . cpr . Broadcaster ; </a> 
<a> import org . atmosphere . cpr . BroadcasterFactory ; </a> 
<a> import org . atmosphere . cpr . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . cpr . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . cpr . <RARE_TOKEN> ; </a> 
<a> import org . <RARE_TOKEN> . jetty . <RARE_TOKEN> ; </a> 
<a> import org . <RARE_TOKEN> . jetty . servlet . Context ; </a> 
<a> import org . <RARE_TOKEN> . jetty . servlet . <RARE_TOKEN> ; </a> 
<a> import org . slf4j . Logger ; </a> 
<a> import org . slf4j . LoggerFactory ; </a> 
<a> import org . testng . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import org . testng . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import org . testng . <RARE_TOKEN> . Test ; </a> 
<a> import javax . servlet . http . <RARE_TOKEN> ; </a> 
<a> import javax . servlet . http . HttpServletRequest ; </a> 
<a> import javax . servlet . http . HttpServletResponse ; </a> 
<a> import java . io . IOException ; </a> 
<a> import java . net . <RARE_TOKEN> ; </a> 
<a> import java . util . concurrent . CountDownLatch ; </a> 
<a> import java . util . concurrent . atomic . AtomicReference ; </a> 
<a> import static org . testng . Assert . assertEquals ; </a> 
<a> import static org . testng . Assert . assertFalse ; </a> 
<a> import static org . testng . Assert . assertNotNull ; </a> 
<a> import static org . testng . Assert . assertTrue ; </a> 
<a> import static org . testng . Assert . fail ; </a> 
<a> public class <RARE_TOKEN> { </a> 
<a> private static final Logger logger = LoggerFactory . getLogger ( <RARE_TOKEN> . class ) ; </a> 
<a> protected <RARE_TOKEN> atmoServlet ; </a> 
<a> protected final static String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> protected String urlTarget ; </a> 
<a> protected <RARE_TOKEN> server ; </a> 
<a> protected Context <RARE_TOKEN> ; </a> 
<a> private static CountDownLatch <RARE_TOKEN> ; </a> 
<a> private static final AtomicReference < String > <RARE_TOKEN> = new AtomicReference < String > ( ) ; </a> 
<a> public static class <RARE_TOKEN> { </a> 
<a> public static int <RARE_TOKEN> ( final String <RARE_TOKEN> , int <RARE_TOKEN> ) { </a> 
<a> if ( null == <RARE_TOKEN> ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> String <RARE_TOKEN> = System . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> if ( null != <RARE_TOKEN> ) { </a> 
<a> try { </a> 
<a> return Integer . parseInt ( <RARE_TOKEN> ) ; </a> 
<a> } catch ( <RARE_TOKEN> e ) { </a> 
<a> } </a> 
<a> } </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<a> protected int <RARE_TOKEN> ( ) throws IOException { </a> 
<a> <RARE_TOKEN> socket = null ; </a> 
<a> try { </a> 
<a> socket = new <RARE_TOKEN> ( 0 ) ; </a> 
<a> return socket . <RARE_TOKEN> ( ) ; </a> 
<a> } finally { </a> 
<a> if ( socket != null ) { </a> 
<a> socket . close ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> public static class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( HttpServletRequest req , HttpServletResponse res ) throws IOException { </a> 
<a> final <RARE_TOKEN> m = <RARE_TOKEN> . build ( req ) ; </a> 
<a> m . getBroadcaster ( ) . <RARE_TOKEN> ( Broadcaster . SCOPE . <RARE_TOKEN> ) ; </a> 
<a> req . getSession ( ) . setAttribute ( <RARE_TOKEN> , m ) ; </a> 
<a> m . suspend ( <RARE_TOKEN> , false ) ; </a> 
<a> <RARE_TOKEN> . set ( m . getBroadcaster ( ) . <RARE_TOKEN> ( ) ) ; </a> 
<a> res . <RARE_TOKEN> ( ) . write ( <RARE_TOKEN> . getBytes ( ) ) ; </a> 
<a> m . addListener ( new AtmosphereResourceEventListener ( ) { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( final AtmosphereResourceEvent < HttpServletRequest , HttpServletResponse > event ) { </a> 
<a> event . getResource ( ) . getRequest ( ) . setAttribute ( ApplicationConfig . <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( AtmosphereResourceEvent < HttpServletRequest , HttpServletResponse > event ) { </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( AtmosphereResourceEvent < HttpServletRequest , HttpServletResponse > event ) { </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( AtmosphereResourceEvent < HttpServletRequest , HttpServletResponse > event ) { </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( AtmosphereResourceEvent < HttpServletRequest , HttpServletResponse > event ) { </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> . countDown ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> @ <RARE_TOKEN> ( <RARE_TOKEN> = true ) </a> 
<a> public void <RARE_TOKEN> ( ) throws Exception { </a> 
<a> int port = <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ( ) ) ; </a> 
<a> urlTarget = <RARE_TOKEN> + port + <RARE_TOKEN> ; </a> 
<a> server = new <RARE_TOKEN> ( port ) ; </a> 
<a> <RARE_TOKEN> = new Context ( server , "/" , Context . <RARE_TOKEN> ) ; </a> 
<a> atmoServlet = new <RARE_TOKEN> ( ) ; </a> 
<a> atmoServlet . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> . class . getName ( ) ) ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( new <RARE_TOKEN> ( atmoServlet ) , <RARE_TOKEN> ) ; </a> 
<a> server . start ( ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> atmoServlet . <RARE_TOKEN> ( new <RARE_TOKEN> ( atmoServlet . <RARE_TOKEN> ( ) ) ) ; </a> 
<a> } </a> 
<a> @ <RARE_TOKEN> ( <RARE_TOKEN> = true ) </a> 
<a> public void <RARE_TOKEN> ( ) throws Exception { </a> 
<a> atmoServlet . destroy ( ) ; </a> 
<a> server . <RARE_TOKEN> ( ) ; </a> 
<a> server = null ; </a> 
<a> } </a> 
<a> @ Test ( timeOut = <RARE_TOKEN> , enabled = true ) </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> logger . info ( <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> final CountDownLatch latch = new CountDownLatch ( 1 ) ; </a> 
<a> final CountDownLatch <RARE_TOKEN> = new CountDownLatch ( 1 ) ; </a> 
<a> <RARE_TOKEN> = new CountDownLatch ( 1 ) ; </a> 
<a> AsyncHttpClient c = new AsyncHttpClient ( ) ; </a> 
<a> Broadcaster b = null ; </a> 
<a> try { </a> 
<a> long currentTime = System . currentTimeMillis ( ) ; </a> 
<a> final AtomicReference < Response > r = new AtomicReference ( ) ; </a> 
<a> c . prepareGet ( urlTarget ) . execute ( new <RARE_TOKEN> < Response > ( ) { </a> 
<a> @ Override </a> 
<a> public Response onCompleted ( Response response ) throws Exception { </a> 
<a> r . set ( response ) ; </a> 
<a> latch . countDown ( ) ; </a> 
<a> return response ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> <RARE_TOKEN> . await ( ) ; </a> 
<a> String id = <RARE_TOKEN> . get ( ) ; </a> 
<a> b = BroadcasterFactory . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( <RARE_TOKEN> . class , id ) ; </a> 
<a> assertNotNull ( b ) ; </a> 
<a> b . broadcast ( <RARE_TOKEN> ) . get ( ) ; </a> 
<a> try { </a> 
<a> latch . await ( ) ; </a> 
<a> } catch ( InterruptedException e ) { </a> 
<a> fail ( e . getMessage ( ) ) ; </a> 
<a> return ; </a> 
<a> } </a> 
<a> long time = System . currentTimeMillis ( ) - currentTime ; </a> 
<a> if ( time < <RARE_TOKEN> ) { </a> 
<a> assertTrue ( true ) ; </a> 
<a> } else { </a> 
<a> assertFalse ( false ) ; </a> 
<a> } </a> 
<a> assertNotNull ( r . get ( ) ) ; </a> 
<a> assertEquals ( r . get ( ) . <RARE_TOKEN> ( ) , 200 ) ; </a> 
<a> String resume = r . get ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> assertEquals ( resume , <RARE_TOKEN> ) ; </a> 
<a> c . prepareGet ( urlTarget ) . execute ( new <RARE_TOKEN> < Response > ( ) { </a> 
<a> @ Override </a> 
<a> public Response onCompleted ( Response response ) throws Exception { </a> 
<a> r . set ( response ) ; </a> 
<a> <RARE_TOKEN> . countDown ( ) ; </a> 
<a> return response ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> try { </a> 
<a> <RARE_TOKEN> . await ( ) ; </a> 
<a> } catch ( InterruptedException e ) { </a> 
<a> fail ( e . getMessage ( ) ) ; </a> 
<a> return ; </a> 
<a> } </a> 
<a> assertFalse ( id . equals ( <RARE_TOKEN> . get ( ) ) ) ; </a> 
<a> } catch ( Exception e ) { </a> 
<a> logger . error ( <RARE_TOKEN> failed" , e ) ; </a> 
<a> fail ( e . getMessage ( ) ) ; </a> 
<a> } finally { </a> 
<a> if ( b != null ) b . destroy ( ) ; </a> 
<a> } </a> 
<a> c . close ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . <RARE_TOKEN> ; </a> 
<a> import com . sun . <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import com . sun . <RARE_TOKEN> . http . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import com . sun . <RARE_TOKEN> . http . servlet . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . container . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . cpr . AtmosphereServlet ; </a> 
<a> import org . testng . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import org . testng . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> protected <RARE_TOKEN> ws ; </a> 
<a> @ <RARE_TOKEN> ( <RARE_TOKEN> = true ) </a> 
<a> public void <RARE_TOKEN> ( ) throws Exception { </a> 
<a> int port = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ( ) ) ; </a> 
<a> urlTarget = <RARE_TOKEN> + port + <RARE_TOKEN> ; </a> 
<a> ws = new <RARE_TOKEN> ( port ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> . setProperty ( <RARE_TOKEN> , 0 ) ; </a> 
<a> ws . <RARE_TOKEN> ( new <RARE_TOKEN> ( ) ) ; </a> 
<a> atmoServlet = new AtmosphereServlet ( ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( atmoServlet ) ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> ws . <RARE_TOKEN> ( <RARE_TOKEN> , new String [ ] { <RARE_TOKEN> } ) ; </a> 
<a> ws . start ( ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> atmoServlet . <RARE_TOKEN> ( new <RARE_TOKEN> ( atmoServlet . <RARE_TOKEN> ( ) ) ) ; </a> 
<a> } </a> 
<a> @ <RARE_TOKEN> ( <RARE_TOKEN> = true ) </a> 
<a> public void <RARE_TOKEN> ( ) throws Exception { </a> 
<a> atmoServlet . destroy ( ) ; </a> 
<a> ws . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . container . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . cpr . AtmosphereServlet ; </a> 
<a> import org . <RARE_TOKEN> . jetty . server . <RARE_TOKEN> ; </a> 
<a> import org . <RARE_TOKEN> . jetty . servlet . <RARE_TOKEN> ; </a> 
<a> import org . <RARE_TOKEN> . jetty . servlet . <RARE_TOKEN> ; </a> 
<a> import org . testng . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import org . testng . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> protected <RARE_TOKEN> server ; </a> 
<a> @ <RARE_TOKEN> ( <RARE_TOKEN> = true ) </a> 
<a> public void <RARE_TOKEN> ( ) throws Exception { </a> 
<a> int port = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ( ) ) ; </a> 
<a> urlTarget = <RARE_TOKEN> + port + <RARE_TOKEN> ; </a> 
<a> server = new <RARE_TOKEN> ( port ) ; </a> 
<a> <RARE_TOKEN> context = new <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> context . <RARE_TOKEN> ( "/" ) ; </a> 
<a> server . <RARE_TOKEN> ( context ) ; </a> 
<a> atmoServlet = new AtmosphereServlet ( ) ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> context . <RARE_TOKEN> ( new <RARE_TOKEN> ( atmoServlet ) , "/" ) ; </a> 
<a> server . start ( ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> atmoServlet . <RARE_TOKEN> ( new <RARE_TOKEN> ( atmoServlet . <RARE_TOKEN> ( ) ) ) ; </a> 
<a> } </a> 
<a> @ <RARE_TOKEN> ( <RARE_TOKEN> = true ) </a> 
<a> public void <RARE_TOKEN> ( ) throws Exception { </a> 
<a> atmoServlet . destroy ( ) ; </a> 
<a> server . <RARE_TOKEN> ( ) ; </a> 
<a> server = null ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . cpr . Broadcaster ; </a> 
<a> import org . atmosphere . cpr . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . cpr . <RARE_TOKEN> ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> public <RARE_TOKEN> ( ) { </a> 
<a> super ( ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( String name ) { </a> 
<a> super ( name ) ; </a> 
<a> } </a> 
<a> public void destroy ( ) { </a> 
<a> <RARE_TOKEN> = new <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> ( Broadcaster . SCOPE . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . <RARE_TOKEN> ; </a> 
<a> import org . apache . <RARE_TOKEN> . Context ; </a> 
<a> import org . apache . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import org . apache . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import org . apache . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import org . apache . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import org . apache . <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import org . apache . <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import org . apache . <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . container . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . cpr . AtmosphereServlet ; </a> 
<a> import org . testng . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import org . testng . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import javax . servlet . ServletConfig ; </a> 
<a> import javax . servlet . ServletException ; </a> 
<a> import java . io . File ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> protected <RARE_TOKEN> embedded ; </a> 
<a> public static class <RARE_TOKEN> extends AtmosphereServlet { </a> 
<a> public void init ( final ServletConfig sc ) throws ServletException { </a> 
<a> cometSupport = new <RARE_TOKEN> ( <RARE_TOKEN> ( ) ) ; </a> 
<a> super . init ( sc ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ <RARE_TOKEN> ( <RARE_TOKEN> = true ) </a> 
<a> public void <RARE_TOKEN> ( ) throws Exception { </a> 
<a> System . setProperty ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> int port = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ( ) ) ; </a> 
<a> urlTarget = <RARE_TOKEN> + port + <RARE_TOKEN> ; </a> 
<a> embedded = new <RARE_TOKEN> ( ) ; </a> 
<a> String path = new File ( <RARE_TOKEN> ) . <RARE_TOKEN> ( ) ; </a> 
<a> embedded . <RARE_TOKEN> ( path ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = embedded . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> host = embedded . <RARE_TOKEN> ( <RARE_TOKEN> , path ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( host ) ; </a> 
<a> Context c = embedded . <RARE_TOKEN> ( "/" , path ) ; </a> 
<a> c . <RARE_TOKEN> ( false ) ; </a> 
<a> <RARE_TOKEN> w = c . <RARE_TOKEN> ( ) ; </a> 
<a> w . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> w . <RARE_TOKEN> ( <RARE_TOKEN> . class . getName ( ) ) ; </a> 
<a> w . <RARE_TOKEN> ( 0 ) ; </a> 
<a> c . <RARE_TOKEN> ( w ) ; </a> 
<a> host . <RARE_TOKEN> ( c ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = embedded . <RARE_TOKEN> ( <RARE_TOKEN> , port , <RARE_TOKEN> . class . getName ( ) ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( host ) ; </a> 
<a> embedded . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> embedded . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> embedded . start ( ) ; </a> 
<a> atmoServlet = ( AtmosphereServlet ) w . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> } </a> 
<a> @ <RARE_TOKEN> ( <RARE_TOKEN> = true ) </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> try { </a> 
<a> embedded . <RARE_TOKEN> ( ) ; </a> 
<a> } catch ( <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> logger . info ( <RARE_TOKEN> <RARE_TOKEN> failed" , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . jersey ; </a> 
<a> import com . sun . jersey . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import com . sun . jersey . <RARE_TOKEN> . model . <RARE_TOKEN> ; </a> 
<a> import com . sun . jersey . <RARE_TOKEN> . container . <RARE_TOKEN> ; </a> 
<a> import com . sun . jersey . <RARE_TOKEN> . container . <RARE_TOKEN> ; </a> 
<a> import com . sun . jersey . <RARE_TOKEN> . container . <RARE_TOKEN> ; </a> 
<a> import com . sun . jersey . <RARE_TOKEN> . container . <RARE_TOKEN> ; </a> 
<a> import com . sun . jersey . <RARE_TOKEN> . container . <RARE_TOKEN> ; </a> 
<a> import com . sun . jersey . <RARE_TOKEN> . container . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . annotation . Broadcast ; </a> 
<a> import org . atmosphere . annotation . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . annotation . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . annotation . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . annotation . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . annotation . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . annotation . Suspend ; </a> 
<a> import org . atmosphere . cpr . ApplicationConfig ; </a> 
<a> import org . atmosphere . cpr . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . cpr . AtmosphereResource ; </a> 
<a> import org . atmosphere . cpr . AtmosphereResourceEvent ; </a> 
<a> import org . atmosphere . cpr . AtmosphereResourceEventListener ; </a> 
<a> import org . atmosphere . cpr . AtmosphereResourceImpl ; </a> 
<a> import org . atmosphere . cpr . AtmosphereServlet ; </a> 
<a> import org . atmosphere . cpr . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . cpr . Broadcaster ; </a> 
<a> import org . atmosphere . cpr . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . cpr . BroadcasterFactory ; </a> 
<a> import org . atmosphere . cpr . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . cpr . FrameworkConfig ; </a> 
<a> import org . atmosphere . cpr . HeaderConfig ; </a> 
<a> import org . atmosphere . cpr . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . websocket . WebSocket ; </a> 
<a> import org . slf4j . Logger ; </a> 
<a> import org . slf4j . LoggerFactory ; </a> 
<a> import javax . servlet . <RARE_TOKEN> ; </a> 
<a> import javax . servlet . http . HttpServletRequest ; </a> 
<a> import javax . servlet . http . HttpServletResponse ; </a> 
<a> import javax . ws . rs . <RARE_TOKEN> ; </a> 
<a> import javax . ws . rs . core . Context ; </a> 
<a> import javax . ws . rs . core . HttpHeaders ; </a> 
<a> import javax . ws . rs . core . <RARE_TOKEN> ; </a> 
<a> import javax . ws . rs . core . <RARE_TOKEN> ; </a> 
<a> import java . io . IOException ; </a> 
<a> import java . lang . annotation . <RARE_TOKEN> ; </a> 
<a> import java . util . ArrayList ; </a> 
<a> import java . util . <RARE_TOKEN> ; </a> 
<a> import java . util . Iterator ; </a> 
<a> import java . util . <RARE_TOKEN> ; </a> 
<a> import java . util . List ; </a> 
<a> import java . util . <RARE_TOKEN> ; </a> 
<a> import java . util . concurrent . ConcurrentHashMap ; </a> 
<a> import java . util . concurrent . <RARE_TOKEN> ; </a> 
<a> import java . util . concurrent . Future ; </a> 
<a> import java . util . concurrent . TimeUnit ; </a> 
<a> import static org . atmosphere . cpr . HeaderConfig . <RARE_TOKEN> ; </a> 
<a> import static org . atmosphere . cpr . HeaderConfig . <RARE_TOKEN> ; </a> 
<a> import static org . atmosphere . cpr . HeaderConfig . <RARE_TOKEN> ; </a> 
<a> import static org . atmosphere . cpr . HeaderConfig . <RARE_TOKEN> ; </a> 
<a> import static org . atmosphere . cpr . HeaderConfig . <RARE_TOKEN> ; </a> 
<a> import static org . atmosphere . cpr . HeaderConfig . <RARE_TOKEN> ; </a> 
<a> import static org . atmosphere . cpr . HeaderConfig . <RARE_TOKEN> ; </a> 
<a> import static org . atmosphere . cpr . HeaderConfig . <RARE_TOKEN> ; </a> 
<a> import static org . atmosphere . cpr . HeaderConfig . <RARE_TOKEN> ; </a> 
<a> import static org . atmosphere . cpr . HeaderConfig . <RARE_TOKEN> ; </a> 
<a> public class <RARE_TOKEN> implements <RARE_TOKEN> { </a> 
<a> private static final Logger logger = LoggerFactory . getLogger ( <RARE_TOKEN> . class ) ; </a> 
<a> public final static String <RARE_TOKEN> = <RARE_TOKEN> . class . getName ( ) + <RARE_TOKEN> ; </a> 
<a> public final static String <RARE_TOKEN> = <RARE_TOKEN> . class . getName ( ) + <RARE_TOKEN> ; </a> 
<a> public final static String <RARE_TOKEN> = <RARE_TOKEN> . class . getName ( ) + <RARE_TOKEN> ; </a> 
<a> public final static String <RARE_TOKEN> = <RARE_TOKEN> . class . getName ( ) + <RARE_TOKEN> ; </a> 
<a> public final static String <RARE_TOKEN> = <RARE_TOKEN> . class . getName ( ) + <RARE_TOKEN> ; </a> 
<a> public final static String <RARE_TOKEN> = FrameworkConfig . <RARE_TOKEN> ; </a> 
<a> enum Action { </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> </a> 
<a> } </a> 
<a> private @ Context HttpServletRequest <RARE_TOKEN> ; </a> 
<a> private </a> 
<a> @ Context </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> private final ConcurrentHashMap < String , AtmosphereResource < HttpServletRequest , HttpServletResponse > > <RARE_TOKEN> = </a> 
<a> new ConcurrentHashMap < String , AtmosphereResource < HttpServletRequest , HttpServletResponse > > ( ) ; </a> 
<a> private class Filter implements <RARE_TOKEN> , <RARE_TOKEN> { </a> 
<a> private final Action action ; </a> 
<a> private final long timeout ; </a> 
<a> private final int <RARE_TOKEN> ; </a> 
<a> private final Suspend . SCOPE scope ; </a> 
<a> private final Class < <RARE_TOKEN> > [ ] <RARE_TOKEN> ; </a> 
<a> private Class < ? extends AtmosphereResourceEventListener > [ ] listeners = null ; </a> 
<a> private final boolean outputComments ; </a> 
<a> private final ArrayList < <RARE_TOKEN> > <RARE_TOKEN> </a> 
<a> = new ArrayList < <RARE_TOKEN> > ( ) ; </a> 
<a> private final String topic ; </a> 
<a> protected Filter ( Action action ) { </a> 
<a> this ( action , - 1 ) ; </a> 
<a> } </a> 
<a> protected Filter ( Action action , long timeout ) { </a> 
<a> this ( action , timeout , 0 ) ; </a> 
<a> } </a> 
<a> protected Filter ( Action action , long timeout , int <RARE_TOKEN> ) { </a> 
<a> this ( action , timeout , <RARE_TOKEN> , Suspend . SCOPE . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> protected Filter ( Action action , long timeout , int <RARE_TOKEN> , Suspend . SCOPE scope ) { </a> 
<a> this ( action , timeout , <RARE_TOKEN> , scope , true ) ; </a> 
<a> } </a> 
<a> protected Filter ( Action action , long timeout , int <RARE_TOKEN> , Suspend . SCOPE scope , boolean outputComments ) { </a> 
<a> this ( action , timeout , <RARE_TOKEN> , scope , outputComments , null , null ) ; </a> 
<a> } </a> 
<a> protected Filter ( Action action , long timeout , int <RARE_TOKEN> , Suspend . SCOPE scope , boolean outputComments , Class < <RARE_TOKEN> > [ ] <RARE_TOKEN> , String topic ) { </a> 
<a> this . action = action ; </a> 
<a> this . timeout = timeout ; </a> 
<a> this . scope = scope ; </a> 
<a> this . outputComments = outputComments ; </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> this . topic = topic ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> <RARE_TOKEN> ( ) { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> <RARE_TOKEN> ( ) { </a> 
<a> return this ; </a> 
<a> } </a> 
<a> boolean resumeOnBroadcast ( <RARE_TOKEN> request , boolean resumeOnBroadcast ) { </a> 
<a> String transport = request . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> if ( transport != null && transport . equals ( <RARE_TOKEN> ) ) { </a> 
<a> return true ; </a> 
<a> } </a> 
<a> return resumeOnBroadcast ; </a> 
<a> } </a> 
<a> boolean <RARE_TOKEN> ( <RARE_TOKEN> request , boolean <RARE_TOKEN> ) { </a> 
<a> boolean <RARE_TOKEN> = false ; </a> 
<a> if ( <RARE_TOKEN> . getHeaders ( <RARE_TOKEN> ) != null && <RARE_TOKEN> . getHeaders ( <RARE_TOKEN> ) . <RARE_TOKEN> ( ) ) { </a> 
<a> String [ ] e = ( ( <RARE_TOKEN> < String > ) <RARE_TOKEN> . getHeaders ( <RARE_TOKEN> ) ) . <RARE_TOKEN> ( ) . split ( <RARE_TOKEN> ) ; </a> 
<a> for ( String <RARE_TOKEN> : e ) { </a> 
<a> if ( <RARE_TOKEN> . <RARE_TOKEN> ( ) . equalsIgnoreCase ( <RARE_TOKEN> ) ) { </a> 
<a> <RARE_TOKEN> = true ; </a> 
<a> break ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> String transport = request . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> ) { </a> 
<a> return false ; </a> 
<a> } else if ( transport != null && transport . equals ( <RARE_TOKEN> ) ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> filter ( <RARE_TOKEN> request , <RARE_TOKEN> response ) { </a> 
<a> if ( response . <RARE_TOKEN> ( ) != null ) { </a> 
<a> return response ; </a> 
<a> } </a> 
<a> AtmosphereResource < HttpServletRequest , HttpServletResponse > r = </a> 
<a> ( AtmosphereResource < HttpServletRequest , HttpServletResponse > ) <RARE_TOKEN> </a> 
<a> . getAttribute ( FrameworkConfig . <RARE_TOKEN> ) ; </a> 
<a> boolean <RARE_TOKEN> = ( Boolean ) <RARE_TOKEN> . getAttribute ( FrameworkConfig . <RARE_TOKEN> ) ; </a> 
<a> switch ( action ) { </a> 
<a> case <RARE_TOKEN> : </a> 
<a> SuspendResponse < ? > s = SuspendResponse . class . cast ( <RARE_TOKEN> . class . cast ( response . getResponse ( ) ) . <RARE_TOKEN> ( ) ) ; </a> 
<a> boolean <RARE_TOKEN> = <RARE_TOKEN> ( request , s . outputComments ( ) ) ; </a> 
<a> boolean resumeOnBroadcast = resumeOnBroadcast ( request , s . resumeOnBroadcast ( ) ) ; </a> 
<a> for ( AtmosphereResourceEventListener <RARE_TOKEN> : s . listeners ( ) ) { </a> 
<a> if ( r instanceof <RARE_TOKEN> ) { </a> 
<a> ( ( <RARE_TOKEN> ) r ) . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> Broadcaster bc = s . broadcaster ( ) ; </a> 
<a> if ( bc == null && s . scope ( ) != Suspend . SCOPE . <RARE_TOKEN> ) { </a> 
<a> bc = ( Broadcaster ) <RARE_TOKEN> . getAttribute ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> boolean <RARE_TOKEN> = <RARE_TOKEN> . getAttribute ( ApplicationConfig . <RARE_TOKEN> ) != null ; </a> 
<a> boolean <RARE_TOKEN> = response . <RARE_TOKEN> ( ) != null ? <RARE_TOKEN> . class . isAssignableFrom ( response . <RARE_TOKEN> ( ) . getClass ( ) ) : <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> < ? extends <RARE_TOKEN> > <RARE_TOKEN> = null ; </a> 
<a> if ( <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ( request , response ) ; </a> 
<a> } </a> 
<a> suspend ( <RARE_TOKEN> , resumeOnBroadcast , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> ( s . period ( ) . value ( ) , s . period ( ) . <RARE_TOKEN> ( ) ) , request , response , bc , r , s . scope ( ) ) ; </a> 
<a> if ( <RARE_TOKEN> && <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> , r ) ; </a> 
<a> } </a> 
<a> break ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> case <RARE_TOKEN> : </a> 
<a> case <RARE_TOKEN> : </a> 
<a> case <RARE_TOKEN> : </a> 
<a> case <RARE_TOKEN> : </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ( request , outputComments ) ; </a> 
<a> resumeOnBroadcast = resumeOnBroadcast ( request , ( action == Action . <RARE_TOKEN> ) ) ; </a> 
<a> for ( Class < ? extends AtmosphereResourceEventListener > listener : listeners ) { </a> 
<a> try { </a> 
<a> AtmosphereResourceEventListener <RARE_TOKEN> = listener . newInstance ( ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) . inject ( <RARE_TOKEN> ) ; </a> 
<a> if ( r instanceof <RARE_TOKEN> ) { </a> 
<a> ( ( <RARE_TOKEN> ) r ) . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } catch ( Throwable t ) { </a> 
<a> throw new <RARE_TOKEN> ( </a> 
<a> new IllegalStateException ( <RARE_TOKEN> AtmosphereResourceEventListener " + listener , t ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> Broadcaster broadcaster = ( Broadcaster ) <RARE_TOKEN> . getAttribute ( <RARE_TOKEN> ) ; </a> 
<a> if ( action == Action . <RARE_TOKEN> ) { </a> 
<a> Class < Broadcaster > c = null ; </a> 
<a> try { </a> 
<a> c = ( Class < Broadcaster > ) Class . <RARE_TOKEN> ( ( String ) <RARE_TOKEN> . getAttribute ( ApplicationConfig . <RARE_TOKEN> ) ) ; </a> 
<a> } catch ( Throwable e ) { </a> 
<a> throw new IllegalStateException ( e . getMessage ( ) ) ; </a> 
<a> } </a> 
<a> broadcaster = BroadcasterFactory . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( c , topic , true ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . getAttribute ( ApplicationConfig . <RARE_TOKEN> ) != null ; </a> 
<a> <RARE_TOKEN> = response . <RARE_TOKEN> ( ) != null ? <RARE_TOKEN> . class . isAssignableFrom ( response . <RARE_TOKEN> ( ) . getClass ( ) ) : <RARE_TOKEN> ; </a> 
<a> if ( <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ( request , response ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> = null ; </a> 
<a> } </a> 
<a> suspend ( <RARE_TOKEN> , resumeOnBroadcast , <RARE_TOKEN> , timeout , request , response , </a> 
<a> broadcaster , r , scope ) ; </a> 
<a> if ( <RARE_TOKEN> && <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> , r ) ; </a> 
<a> } </a> 
<a> break ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> if ( response . <RARE_TOKEN> ( ) != null ) { </a> 
<a> try { </a> 
<a> response . write ( ) ; </a> 
<a> } catch ( IOException ex ) { </a> 
<a> throw new <RARE_TOKEN> ( ex ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> ) { </a> 
<a> r = ( AtmosphereResource ) <RARE_TOKEN> . getSession ( ) . getAttribute ( <RARE_TOKEN> ) ; </a> 
<a> } else { </a> 
<a> String path = response . <RARE_TOKEN> ( ) . getPath ( ) ; </a> 
<a> r = <RARE_TOKEN> . remove ( path . substring ( path . <RARE_TOKEN> ( "/" ) + 1 ) ) ; </a> 
<a> } </a> 
<a> if ( r != null ) { </a> 
<a> resume ( r ) ; </a> 
<a> } else { </a> 
<a> throw new <RARE_TOKEN> ( </a> 
<a> new IllegalStateException ( <RARE_TOKEN> to <RARE_TOKEN> suspended <RARE_TOKEN> " + </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> is not enabled in <RARE_TOKEN> or <RARE_TOKEN> + </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> to resume is <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> break ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> case <RARE_TOKEN> : </a> 
<a> case <RARE_TOKEN> : </a> 
<a> AtmosphereResource <RARE_TOKEN> = ( AtmosphereResource ) <RARE_TOKEN> . getAttribute ( <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> r = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> if ( action == Action . <RARE_TOKEN> ) { </a> 
<a> Class < Broadcaster > c = null ; </a> 
<a> try { </a> 
<a> c = ( Class < Broadcaster > ) Class . <RARE_TOKEN> ( ( String ) <RARE_TOKEN> . getAttribute ( ApplicationConfig . <RARE_TOKEN> ) ) ; </a> 
<a> } catch ( Throwable e ) { </a> 
<a> throw new IllegalStateException ( e . getMessage ( ) ) ; </a> 
<a> } </a> 
<a> r . <RARE_TOKEN> ( BroadcasterFactory . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( c , topic , true ) ) ; </a> 
<a> } </a> 
<a> broadcast ( response , r , timeout ) ; </a> 
<a> break ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> case <RARE_TOKEN> : </a> 
<a> Object o = response . <RARE_TOKEN> ( ) ; </a> 
<a> Broadcaster b = r . getBroadcaster ( ) ; </a> 
<a> if ( response . <RARE_TOKEN> ( ) instanceof Broadcastable ) { </a> 
<a> b = ( ( Broadcastable ) response . <RARE_TOKEN> ( ) ) . getBroadcaster ( ) ; </a> 
<a> o = ( ( Broadcastable ) response . <RARE_TOKEN> ( ) ) . getMessage ( ) ; </a> 
<a> response . <RARE_TOKEN> ( ( ( Broadcastable ) response . <RARE_TOKEN> ( ) ) . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> if ( response . <RARE_TOKEN> ( ) != null ) { </a> 
<a> try { </a> 
<a> response . write ( ) ; </a> 
<a> } catch ( IOException ex ) { </a> 
<a> throw new <RARE_TOKEN> ( ex ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> if ( action == Action . <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( b ) ; </a> 
<a> } </a> 
<a> b . <RARE_TOKEN> ( o , <RARE_TOKEN> , timeout , TimeUnit . SECONDS ) ; </a> 
<a> break ; </a> 
<a> } </a> 
<a> return response ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> ( <RARE_TOKEN> request , <RARE_TOKEN> response ) { </a> 
<a> <RARE_TOKEN> < ? extends <RARE_TOKEN> > <RARE_TOKEN> = <RARE_TOKEN> . class . cast ( response . <RARE_TOKEN> ( ) ) ; </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> <RARE_TOKEN> = new <RARE_TOKEN> < AtmosphereResource > ( AtmosphereResource . class , <RARE_TOKEN> . getHeader ( <RARE_TOKEN> ) , "" ) ; </a> 
<a> } else { </a> 
<a> response . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> String <RARE_TOKEN> = request . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> == null && <RARE_TOKEN> . <RARE_TOKEN> ( ) != null ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> } else if ( <RARE_TOKEN> == null ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( ) . toString ( ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> response . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> <RARE_TOKEN> . setAttribute ( <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> void <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> , AtmosphereResource r ) { </a> 
<a> boolean <RARE_TOKEN> = AtmosphereResource . class . isAssignableFrom ( <RARE_TOKEN> . type ( ) ) ? true : false ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ? r : r . getBroadcaster ( ) ) ; </a> 
<a> } </a> 
<a> void <RARE_TOKEN> ( <RARE_TOKEN> response ) throws IOException { </a> 
<a> boolean <RARE_TOKEN> = <RARE_TOKEN> . getAttribute ( WebSocket . <RARE_TOKEN> ) != null ; </a> 
<a> if ( <RARE_TOKEN> . getHeaders ( <RARE_TOKEN> ) != null && <RARE_TOKEN> . getHeaders ( <RARE_TOKEN> ) . <RARE_TOKEN> ( ) ) { </a> 
<a> String [ ] e = ( ( <RARE_TOKEN> < String > ) <RARE_TOKEN> . getHeaders ( <RARE_TOKEN> ) ) . <RARE_TOKEN> ( ) . split ( <RARE_TOKEN> ) ; </a> 
<a> for ( String <RARE_TOKEN> : e ) { </a> 
<a> if ( <RARE_TOKEN> != null && <RARE_TOKEN> . equalsIgnoreCase ( <RARE_TOKEN> ) ) { </a> 
<a> if ( ! <RARE_TOKEN> ) { </a> 
<a> response . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> <RARE_TOKEN> not <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> boolean <RARE_TOKEN> = ( Boolean ) <RARE_TOKEN> . getAttribute ( ApplicationConfig . <RARE_TOKEN> ) ; </a> 
<a> boolean <RARE_TOKEN> = ( Boolean ) <RARE_TOKEN> . getAttribute ( ApplicationConfig . <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> ) { </a> 
<a> response . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> response . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> response . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> ) { </a> 
<a> response . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> response . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> void <RARE_TOKEN> ( Broadcaster b ) { </a> 
<a> Iterator < AtmosphereResource < ? , ? > > i = b . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> while ( i . <RARE_TOKEN> ( ) ) { </a> 
<a> HttpServletRequest r = ( HttpServletRequest ) i . next ( ) . getRequest ( ) ; </a> 
<a> r . setAttribute ( ApplicationConfig . <RARE_TOKEN> , true ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> void <RARE_TOKEN> ( Broadcaster bc ) { </a> 
<a> if ( bc == null ) throw new <RARE_TOKEN> ( new IllegalStateException ( <RARE_TOKEN> <RARE_TOKEN> be <RARE_TOKEN> ) ) ; </a> 
<a> <RARE_TOKEN> c = bc . <RARE_TOKEN> ( ) ; </a> 
<a> if ( c . <RARE_TOKEN> ( ) ) { </a> 
<a> return ; </a> 
<a> } </a> 
<a> for ( <RARE_TOKEN> <RARE_TOKEN> : <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( bc ) ; </a> 
<a> c . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> f = null ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> for ( Class < <RARE_TOKEN> > filter : <RARE_TOKEN> ) { </a> 
<a> try { </a> 
<a> f = filter . newInstance ( ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) . inject ( f ) ; </a> 
<a> } catch ( Throwable t ) { </a> 
<a> logger . warn ( <RARE_TOKEN> <RARE_TOKEN> " + filter , t ) ; </a> 
<a> } </a> 
<a> c . <RARE_TOKEN> ( f ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( Class < ? extends AtmosphereResourceEventListener > [ ] listeners ) { </a> 
<a> this . listeners = listeners ; </a> 
<a> } </a> 
<a> void broadcast ( <RARE_TOKEN> r , AtmosphereResource <RARE_TOKEN> , long delay ) { </a> 
<a> Object o = r . <RARE_TOKEN> ( ) ; </a> 
<a> Broadcaster b = <RARE_TOKEN> . getBroadcaster ( ) ; </a> 
<a> Object msg = o ; </a> 
<a> String <RARE_TOKEN> = null ; </a> 
<a> if ( o instanceof Broadcastable ) { </a> 
<a> if ( ( ( Broadcastable ) o ) . getBroadcaster ( ) != null ) { </a> 
<a> b = ( ( Broadcastable ) o ) . getBroadcaster ( ) ; </a> 
<a> } </a> 
<a> msg = ( ( Broadcastable ) o ) . getMessage ( ) ; </a> 
<a> <RARE_TOKEN> = ( ( Broadcastable ) o ) . <RARE_TOKEN> ( ) . toString ( ) ; </a> 
<a> } </a> 
<a> if ( action == Action . <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( b ) ; </a> 
<a> } </a> 
<a> if ( o != null ) { </a> 
<a> <RARE_TOKEN> ( b ) ; </a> 
<a> try { </a> 
<a> r . <RARE_TOKEN> ( msg ) ; </a> 
<a> if ( msg == null ) return ; </a> 
<a> if ( delay == - 1 ) { </a> 
<a> Future < Object > f = b . broadcast ( msg ) ; </a> 
<a> if ( f == null ) return ; </a> 
<a> Object t = f . get ( ) ; </a> 
<a> if ( o instanceof Broadcastable ) { </a> 
<a> r . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } else if ( delay == 0 ) { </a> 
<a> b . <RARE_TOKEN> ( msg ) ; </a> 
<a> } else { </a> 
<a> b . <RARE_TOKEN> ( msg , delay , TimeUnit . SECONDS ) ; </a> 
<a> } </a> 
<a> } catch ( InterruptedException ex ) { </a> 
<a> logger . error ( <RARE_TOKEN> <RARE_TOKEN> , ex ) ; </a> 
<a> } catch ( <RARE_TOKEN> ex ) { </a> 
<a> logger . error ( <RARE_TOKEN> exception <RARE_TOKEN> <RARE_TOKEN> , ex ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> void <RARE_TOKEN> ( Broadcaster bc ) { </a> 
<a> <RARE_TOKEN> ( bc ) ; </a> 
<a> } </a> 
<a> void resume ( AtmosphereResource resource ) { </a> 
<a> resource . resume ( ) ; </a> 
<a> } </a> 
<a> void <RARE_TOKEN> ( <RARE_TOKEN> f ) { </a> 
<a> <RARE_TOKEN> . add ( f ) ; </a> 
<a> } </a> 
<a> void suspend ( boolean <RARE_TOKEN> , </a> 
<a> boolean resumeOnBroadcast , </a> 
<a> boolean <RARE_TOKEN> , </a> 
<a> long timeout , </a> 
<a> <RARE_TOKEN> request , </a> 
<a> <RARE_TOKEN> response , </a> 
<a> Broadcaster bc , </a> 
<a> AtmosphereResource < HttpServletRequest , HttpServletResponse > r , </a> 
<a> Suspend . SCOPE <RARE_TOKEN> ) { </a> 
<a> if ( response . getStatus ( ) == <RARE_TOKEN> ) { </a> 
<a> response . <RARE_TOKEN> ( 200 ) ; </a> 
<a> } </a> 
<a> BroadcasterFactory <RARE_TOKEN> = ( BroadcasterFactory ) <RARE_TOKEN> </a> 
<a> . getAttribute ( ApplicationConfig . <RARE_TOKEN> ) ; </a> 
<a> if ( ! <RARE_TOKEN> && ! resumeOnBroadcast && response . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( <RARE_TOKEN> ) == null ) { </a> 
<a> String <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( ) . toString ( ) ; </a> 
<a> response . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( </a> 
<a> HttpHeaders . <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) . path ( <RARE_TOKEN> ) . build ( "" ) ) ; </a> 
<a> <RARE_TOKEN> . put ( <RARE_TOKEN> , r ) ; </a> 
<a> <RARE_TOKEN> . setAttribute ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . setAttribute ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( bc == null && <RARE_TOKEN> != Suspend . SCOPE . <RARE_TOKEN> ) { </a> 
<a> bc = r . getBroadcaster ( ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> && <RARE_TOKEN> != Suspend . SCOPE . <RARE_TOKEN> && <RARE_TOKEN> . getSession ( ) . getAttribute ( <RARE_TOKEN> ) != null ) { </a> 
<a> AtmosphereResource < HttpServletRequest , HttpServletResponse > <RARE_TOKEN> = </a> 
<a> ( AtmosphereResource ) <RARE_TOKEN> . getSession ( ) . getAttribute ( <RARE_TOKEN> ) ; </a> 
<a> bc = <RARE_TOKEN> . getBroadcaster ( ) ; </a> 
<a> try { </a> 
<a> bc . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } catch ( IllegalStateException ex ) { </a> 
<a> logger . trace ( ex . getMessage ( ) , ex ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> if ( response . <RARE_TOKEN> ( ) instanceof Broadcastable ) { </a> 
<a> Broadcastable b = ( Broadcastable ) response . <RARE_TOKEN> ( ) ; </a> 
<a> bc = b . getBroadcaster ( ) ; </a> 
<a> response . <RARE_TOKEN> ( b . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> if ( ( <RARE_TOKEN> == Suspend . SCOPE . <RARE_TOKEN> ) && bc == null ) { </a> 
<a> if ( bc == null ) { </a> 
<a> try { </a> 
<a> String id = <RARE_TOKEN> . <RARE_TOKEN> ( ) . toString ( ) ; </a> 
<a> Class < Broadcaster > c = null ; </a> 
<a> try { </a> 
<a> c = ( Class < Broadcaster > ) Class . <RARE_TOKEN> ( ( String ) <RARE_TOKEN> . getAttribute ( ApplicationConfig . <RARE_TOKEN> ) ) ; </a> 
<a> } catch ( Throwable e ) { </a> 
<a> throw new IllegalStateException ( e . getMessage ( ) ) ; </a> 
<a> } </a> 
<a> bc = <RARE_TOKEN> . get ( c , id ) ; </a> 
<a> bc . <RARE_TOKEN> ( Broadcaster . SCOPE . <RARE_TOKEN> ) ; </a> 
<a> } catch ( Exception ex ) { </a> 
<a> logger . error ( "failed to <RARE_TOKEN> broadcaster <RARE_TOKEN> <RARE_TOKEN> " + <RARE_TOKEN> , ex ) ; </a> 
<a> } </a> 
<a> } else { </a> 
<a> bc . <RARE_TOKEN> ( Broadcaster . SCOPE . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( bc ) ; </a> 
<a> r . <RARE_TOKEN> ( bc ) ; </a> 
<a> if ( <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> . getSession ( ) . setAttribute ( <RARE_TOKEN> , r ) ; </a> 
<a> <RARE_TOKEN> . getSession ( ) . setAttribute ( FrameworkConfig . <RARE_TOKEN> , response ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> . setAttribute ( <RARE_TOKEN> , r ) ; </a> 
<a> <RARE_TOKEN> . setAttribute ( FrameworkConfig . <RARE_TOKEN> , response ) ; </a> 
<a> logger . debug ( <RARE_TOKEN> HttpServletRequest <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> {}" , <RARE_TOKEN> , response ) ; </a> 
<a> if ( resumeOnBroadcast ) { </a> 
<a> <RARE_TOKEN> . setAttribute ( ApplicationConfig . <RARE_TOKEN> , new Boolean ( true ) ) ; </a> 
<a> } </a> 
<a> try { </a> 
<a> <RARE_TOKEN> contentType = response . <RARE_TOKEN> ( ) ; </a> 
<a> if ( contentType == null && response . <RARE_TOKEN> ( ) != null ) { </a> 
<a> <RARE_TOKEN> < <RARE_TOKEN> > l = new <RARE_TOKEN> < <RARE_TOKEN> > ( ) ; </a> 
<a> l . add ( request . <RARE_TOKEN> ( new <RARE_TOKEN> < <RARE_TOKEN> > ( ) ) ) ; </a> 
<a> contentType = response . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( </a> 
<a> response . <RARE_TOKEN> ( ) . getClass ( ) , </a> 
<a> response . <RARE_TOKEN> ( ) , </a> 
<a> response . <RARE_TOKEN> ( ) , </a> 
<a> l ) ; </a> 
<a> if ( contentType == null || </a> 
<a> contentType . <RARE_TOKEN> ( ) || contentType . <RARE_TOKEN> ( ) ) </a> 
<a> contentType = <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> Object <RARE_TOKEN> = response . <RARE_TOKEN> ( ) ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> r . getResponse ( ) . <RARE_TOKEN> ( contentType != null ? </a> 
<a> contentType . toString ( ) : <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( response ) ; </a> 
<a> if ( <RARE_TOKEN> && ! resumeOnBroadcast ) { </a> 
<a> response . <RARE_TOKEN> ( AtmosphereResourceImpl . <RARE_TOKEN> ( ) ) ; </a> 
<a> response . write ( ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> response . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> response . write ( ) ; </a> 
<a> } </a> 
<a> r . suspend ( timeout , false ) ; </a> 
<a> } catch ( IOException ex ) { </a> 
<a> throw new <RARE_TOKEN> ( ex ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> public List < <RARE_TOKEN> > create ( <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> < <RARE_TOKEN> > list = new <RARE_TOKEN> < <RARE_TOKEN> > ( ) ; </a> 
<a> Filter f ; </a> 
<a> if ( logger . isDebugEnabled ( ) ) { </a> 
<a> for ( <RARE_TOKEN> annotation : <RARE_TOKEN> . <RARE_TOKEN> ( ) ) { </a> 
<a> logger . debug ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> {}" , annotation ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> . <RARE_TOKEN> ( ) == null ) { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> if ( SuspendResponse . class . isAssignableFrom ( <RARE_TOKEN> . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( ) ) ) { </a> 
<a> list . addLast ( new Filter ( Action . <RARE_TOKEN> ) ) ; </a> 
<a> return list ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> . <RARE_TOKEN> ( Broadcast . class ) ) { </a> 
<a> int delay = <RARE_TOKEN> . <RARE_TOKEN> ( Broadcast . class ) . delay ( ) ; </a> 
<a> Class [ ] <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( Broadcast . class ) . value ( ) ; </a> 
<a> if ( <RARE_TOKEN> . <RARE_TOKEN> ( Broadcast . class ) . resumeOnBroadcast ( ) ) { </a> 
<a> f = new Filter ( Action . <RARE_TOKEN> , delay , 0 , Suspend . SCOPE . <RARE_TOKEN> , true , <RARE_TOKEN> , null ) ; </a> 
<a> } else { </a> 
<a> f = new Filter ( Action . <RARE_TOKEN> , delay , 0 , Suspend . SCOPE . <RARE_TOKEN> , true , <RARE_TOKEN> , null ) ; </a> 
<a> } </a> 
<a> list . addLast ( f ) ; </a> 
<a> if ( <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> . class ) ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> . class ) . value ( ) ; </a> 
<a> for ( Class < <RARE_TOKEN> > c : <RARE_TOKEN> ) { </a> 
<a> try { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = c . newInstance ( ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) . inject ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> . class ) . name ( ) ) ; </a> 
<a> f . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } catch ( Throwable t ) { </a> 
<a> logger . warn ( <RARE_TOKEN> <RARE_TOKEN> , t ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> . <RARE_TOKEN> ( Suspend . class ) ) { </a> 
<a> long <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( Suspend . class ) . period ( ) ; </a> 
<a> TimeUnit <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( Suspend . class ) . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> Suspend . SCOPE scope = <RARE_TOKEN> . <RARE_TOKEN> ( Suspend . class ) . scope ( ) ; </a> 
<a> boolean outputComments = <RARE_TOKEN> . <RARE_TOKEN> ( Suspend . class ) . outputComments ( ) ; </a> 
<a> boolean <RARE_TOKEN> = false ; </a> 
<a> if ( <RARE_TOKEN> . class . isAssignableFrom ( <RARE_TOKEN> . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( ) ) ) { </a> 
<a> <RARE_TOKEN> = true ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> . <RARE_TOKEN> ( Suspend . class ) . resumeOnBroadcast ( ) ) { </a> 
<a> f = new Filter ( <RARE_TOKEN> ? Action . <RARE_TOKEN> : Action . <RARE_TOKEN> , <RARE_TOKEN> , 0 , scope , outputComments ) ; </a> 
<a> } else { </a> 
<a> f = new Filter ( <RARE_TOKEN> ? Action . <RARE_TOKEN> : Action . <RARE_TOKEN> , <RARE_TOKEN> , 0 , scope , outputComments ) ; </a> 
<a> } </a> 
<a> f . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ( Suspend . class ) . listeners ( ) ) ; </a> 
<a> list . <RARE_TOKEN> ( f ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> . class ) ) { </a> 
<a> boolean <RARE_TOKEN> = false ; </a> 
<a> if ( <RARE_TOKEN> . class . isAssignableFrom ( <RARE_TOKEN> . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( ) ) ) { </a> 
<a> <RARE_TOKEN> = true ; </a> 
<a> } </a> 
<a> f = new Filter ( <RARE_TOKEN> ? Action . <RARE_TOKEN> : Action . <RARE_TOKEN> , <RARE_TOKEN> , - 1 , Suspend . SCOPE . <RARE_TOKEN> , </a> 
<a> false , null , <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> . class ) . value ( ) ) ; </a> 
<a> f . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> . class ) . listeners ( ) ) ; </a> 
<a> list . <RARE_TOKEN> ( f ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> . class ) ) { </a> 
<a> f = new Filter ( Action . <RARE_TOKEN> , - 1 , - 1 , Suspend . SCOPE . <RARE_TOKEN> , </a> 
<a> false , null , <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> . class ) . value ( ) ) ; </a> 
<a> list . <RARE_TOKEN> ( f ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> . class ) ) { </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> . class ) . value ( ) ; </a> 
<a> list . <RARE_TOKEN> ( new Filter ( Action . <RARE_TOKEN> , <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> . class ) ) { </a> 
<a> int period = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> . class ) . period ( ) ; </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> . class ) . <RARE_TOKEN> ( ) ; </a> 
<a> if ( <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> . class ) . resumeOnBroadcast ( ) ) { </a> 
<a> list . <RARE_TOKEN> ( new Filter ( Action . <RARE_TOKEN> , period , <RARE_TOKEN> ) ) ; </a> 
<a> } else { </a> 
<a> list . <RARE_TOKEN> ( new Filter ( Action . <RARE_TOKEN> , period , <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> return list . size ( ) > 0 ? list : null ; </a> 
<a> } </a> 
<a> private long <RARE_TOKEN> ( long period , TimeUnit <RARE_TOKEN> ) { </a> 
<a> if ( period == - 1 ) return period ; </a> 
<a> switch ( <RARE_TOKEN> ) { </a> 
<a> case SECONDS : </a> 
<a> return TimeUnit . MILLISECONDS . <RARE_TOKEN> ( period , TimeUnit . SECONDS ) ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> return TimeUnit . MILLISECONDS . <RARE_TOKEN> ( period , TimeUnit . <RARE_TOKEN> ) ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> return TimeUnit . MILLISECONDS . <RARE_TOKEN> ( period , TimeUnit . <RARE_TOKEN> ) ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> return TimeUnit . MILLISECONDS . <RARE_TOKEN> ( period , TimeUnit . <RARE_TOKEN> ) ; </a> 
<a> case MILLISECONDS : </a> 
<a> return period ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> return TimeUnit . MILLISECONDS . <RARE_TOKEN> ( period , TimeUnit . <RARE_TOKEN> ) ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> return TimeUnit . MILLISECONDS . <RARE_TOKEN> ( period , TimeUnit . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> return period ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . jersey ; </a> 
<a> import com . sun . jersey . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import com . sun . jersey . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . cpr . ApplicationConfig ; </a> 
<a> import org . atmosphere . cpr . AtmosphereResource ; </a> 
<a> import org . atmosphere . cpr . AtmosphereResourceImpl ; </a> 
<a> import org . atmosphere . cpr . Broadcaster ; </a> 
<a> import org . atmosphere . cpr . BroadcasterFactory ; </a> 
<a> import org . atmosphere . cpr . FrameworkConfig ; </a> 
<a> import javax . servlet . http . HttpServletRequest ; </a> 
<a> import javax . servlet . http . HttpServletResponse ; </a> 
<a> import javax . ws . rs . <RARE_TOKEN> ; </a> 
<a> import javax . ws . rs . core . Context ; </a> 
<a> import java . lang . annotation . <RARE_TOKEN> ; </a> 
<a> import java . lang . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import static org . atmosphere . cpr . HeaderConfig . <RARE_TOKEN> ; </a> 
<a> import static org . atmosphere . cpr . HeaderConfig . <RARE_TOKEN> ; </a> 
<a> import static org . atmosphere . cpr . FrameworkConfig . <RARE_TOKEN> ; </a> 
<a> public class <RARE_TOKEN> { </a> 
<a> public static class <RARE_TOKEN> implements <RARE_TOKEN> { </a> 
<a> @ Context </a> 
<a> HttpServletRequest req ; </a> 
<a> @ Override </a> 
<a> public <RARE_TOKEN> <RARE_TOKEN> ( Class type , <RARE_TOKEN> <RARE_TOKEN> , <RARE_TOKEN> [ ] <RARE_TOKEN> ) { </a> 
<a> if ( Broadcaster . class . isAssignableFrom ( type ) ) { </a> 
<a> return new <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> return null ; </a> 
<a> } </a> 
<a> @ <RARE_TOKEN> . <RARE_TOKEN> ( false ) </a> 
<a> public class <RARE_TOKEN> implements <RARE_TOKEN> { </a> 
<a> @ Override </a> 
<a> public Object <RARE_TOKEN> ( String topic ) { </a> 
<a> Broadcaster broadcaster ; </a> 
<a> try { </a> 
<a> AtmosphereResource < HttpServletRequest , HttpServletResponse > r = </a> 
<a> ( AtmosphereResource < HttpServletRequest , HttpServletResponse > ) </a> 
<a> req . getAttribute ( FrameworkConfig . <RARE_TOKEN> ) ; </a> 
<a> BroadcasterFactory <RARE_TOKEN> = ( BroadcasterFactory ) </a> 
<a> req . getAttribute ( ApplicationConfig . <RARE_TOKEN> ) ; </a> 
<a> broadcaster = <RARE_TOKEN> . <RARE_TOKEN> ( r . getBroadcaster ( ) . getClass ( ) , topic , true ) ; </a> 
<a> } catch ( Throwable ex ) { </a> 
<a> throw new <RARE_TOKEN> ( ex ) ; </a> 
<a> } </a> 
<a> req . setAttribute ( <RARE_TOKEN> . <RARE_TOKEN> , broadcaster ) ; </a> 
<a> return broadcaster ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> public static class <RARE_TOKEN> implements <RARE_TOKEN> { </a> 
<a> @ Context </a> 
<a> HttpServletRequest req ; </a> 
<a> @ Override </a> 
<a> public <RARE_TOKEN> <RARE_TOKEN> ( Class type , <RARE_TOKEN> <RARE_TOKEN> , <RARE_TOKEN> [ ] <RARE_TOKEN> ) { </a> 
<a> if ( <RARE_TOKEN> . class . isAssignableFrom ( type ) ) { </a> 
<a> return new <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> return null ; </a> 
<a> } </a> 
<a> @ <RARE_TOKEN> . <RARE_TOKEN> ( false ) </a> 
<a> public class <RARE_TOKEN> implements <RARE_TOKEN> { </a> 
<a> @ Override </a> 
<a> public Object <RARE_TOKEN> ( String topic ) { </a> 
<a> <RARE_TOKEN> < AtmosphereResourceImpl > <RARE_TOKEN> = null ; </a> 
<a> try { </a> 
<a> String <RARE_TOKEN> = req . getHeader ( <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> <RARE_TOKEN> = ( String ) req . getAttribute ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> = ( <RARE_TOKEN> < AtmosphereResourceImpl > ) <RARE_TOKEN> . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> if ( req . getAttribute ( ApplicationConfig . <RARE_TOKEN> ) != null ) { </a> 
<a> AtmosphereResource < ? , ? > r = ( AtmosphereResource < ? , ? > ) req . getAttribute ( <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> == null && r != null && r . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( ) ) { </a> 
<a> <RARE_TOKEN> = new <RARE_TOKEN> < AtmosphereResourceImpl > ( AtmosphereResourceImpl . class , <RARE_TOKEN> , "" ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( r ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> req . setAttribute ( <RARE_TOKEN> . <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } catch ( Throwable ex ) { </a> 
<a> throw new <RARE_TOKEN> ( ex ) ; </a> 
<a> } </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . jersey ; </a> 
<a> import org . atmosphere . cpr . AtmosphereResource ; </a> 
<a> import org . atmosphere . cpr . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . cpr . Broadcaster ; </a> 
<a> import org . slf4j . Logger ; </a> 
<a> import org . slf4j . LoggerFactory ; </a> 
<a> public class Broadcastable { </a> 
<a> private static final Logger logger = LoggerFactory . getLogger ( Broadcastable . class ) ; </a> 
<a> private final Object message ; </a> 
<a> private final Broadcaster b ; </a> 
<a> private final Object <RARE_TOKEN> ; </a> 
<a> public Broadcastable ( Broadcaster b ) { </a> 
<a> this . b = b ; </a> 
<a> message = "" ; </a> 
<a> <RARE_TOKEN> = "" ; </a> 
<a> } </a> 
<a> public Broadcastable ( Object message , Broadcaster b ) { </a> 
<a> this . b = b ; </a> 
<a> this . message = message ; </a> 
<a> <RARE_TOKEN> = message ; </a> 
<a> } </a> 
<a> public Broadcastable ( Object message , Object <RARE_TOKEN> , Broadcaster b ) { </a> 
<a> this . b = b ; </a> 
<a> this . message = message ; </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public Object broadcast ( ) { </a> 
<a> try { </a> 
<a> return b . broadcast ( message ) . get ( ) ; </a> 
<a> } catch ( Exception ex ) { </a> 
<a> logger . error ( "failed to broadcast <RARE_TOKEN> " + message , ex ) ; </a> 
<a> } </a> 
<a> return null ; </a> 
<a> } </a> 
<a> public Object getMessage ( ) { </a> 
<a> return message ; </a> 
<a> } </a> 
<a> public Broadcaster getBroadcaster ( ) { </a> 
<a> return b ; </a> 
<a> } </a> 
<a> public Object <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . jersey ; </a> 
<a> import com . sun . jersey . core . <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import com . sun . jersey . core . <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import com . sun . jersey . <RARE_TOKEN> . inject . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . cpr . Broadcaster ; </a> 
<a> import javax . ws . rs . core . Context ; </a> 
<a> import java . lang . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import java . lang . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import java . lang . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import java . lang . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> abstract class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> boolean <RARE_TOKEN> ( <RARE_TOKEN> t ) { </a> 
<a> return ( t instanceof Class ) && Broadcaster . class . isAssignableFrom ( ( Class ) t ) ; </a> 
<a> } </a> 
<a> public static final class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> @ Override </a> 
<a> public <RARE_TOKEN> <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public <RARE_TOKEN> <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> , Context a , <RARE_TOKEN> t ) { </a> 
<a> if ( ! <RARE_TOKEN> ( t ) ) </a> 
<a> return null ; </a> 
<a> return new <RARE_TOKEN> < Broadcaster > ( ) { </a> 
<a> @ Override </a> 
<a> public Broadcaster getValue ( ) { </a> 
<a> return <RARE_TOKEN> ( Broadcaster . class , true ) . getBroadcaster ( ) ; </a> 
<a> } </a> 
<a> } ; </a> 
<a> } </a> 
<a> } </a> 
<a> public static final class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> @ Override </a> 
<a> public <RARE_TOKEN> <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public <RARE_TOKEN> <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> , Context a , <RARE_TOKEN> t ) { </a> 
<a> if ( ! <RARE_TOKEN> ( t ) ) </a> 
<a> return null ; </a> 
<a> return new <RARE_TOKEN> < Broadcaster > ( ) { </a> 
<a> @ Override </a> 
<a> public Broadcaster getValue ( ) { </a> 
<a> return ( Broadcaster ) <RARE_TOKEN> . <RARE_TOKEN> ( this . getClass ( ) . <RARE_TOKEN> ( ) , </a> 
<a> new Class [ ] { Broadcaster . class } , </a> 
<a> new <RARE_TOKEN> ( ) { </a> 
<a> @ Override </a> 
<a> public Object <RARE_TOKEN> ( Object <RARE_TOKEN> , <RARE_TOKEN> method , Object [ ] args ) throws Throwable { </a> 
<a> return method . <RARE_TOKEN> ( <RARE_TOKEN> ( Broadcaster . class , true ) . getBroadcaster ( ) , </a> 
<a> args ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> } </a> 
<a> } ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . jersey ; </a> 
<a> import com . sun . jersey . <RARE_TOKEN> . container . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . cpr . AtmosphereResource ; </a> 
<a> import org . atmosphere . cpr . AtmosphereResourceEvent ; </a> 
<a> import org . atmosphere . cpr . Broadcaster ; </a> 
<a> import org . atmosphere . cpr . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . jersey . util . <RARE_TOKEN> ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> public <RARE_TOKEN> ( ) { </a> 
<a> super ( ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> . class . getSimpleName ( ) ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( String id ) { </a> 
<a> super ( id ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void broadcast ( final AtmosphereResource < ? , ? > r , final AtmosphereResourceEvent e ) { </a> 
<a> <RARE_TOKEN> . broadcast ( r , e ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . jersey ; </a> 
<a> import com . sun . jersey . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . annotation . Suspend ; </a> 
<a> import org . atmosphere . cpr . AtmosphereResourceEventListener ; </a> 
<a> import org . atmosphere . cpr . Broadcaster ; </a> 
<a> import java . util . ArrayList ; </a> 
<a> import java . util . Collection ; </a> 
<a> import java . util . Collections ; </a> 
<a> import java . util . concurrent . TimeUnit ; </a> 
<a> public class SuspendResponse < E > extends <RARE_TOKEN> { </a> 
<a> private final <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> private final Suspend . SCOPE scope ; </a> 
<a> private final boolean outputComments ; </a> 
<a> private final boolean resumeOnBroadcast ; </a> 
<a> private final Collection < AtmosphereResourceEventListener > listeners ; </a> 
<a> private final Broadcaster broadcaster ; </a> 
<a> protected SuspendResponse ( <RARE_TOKEN> < E > b ) { </a> 
<a> super ( b ) ; </a> 
<a> this . <RARE_TOKEN> = b . <RARE_TOKEN> ; </a> 
<a> this . scope = b . scope ; </a> 
<a> this . outputComments = b . outputComments ; </a> 
<a> this . resumeOnBroadcast = b . resumeOnBroadcast ; </a> 
<a> this . listeners = b . listeners ; </a> 
<a> this . broadcaster = b . broadcaster ; </a> 
<a> } </a> 
<a> public Suspend . SCOPE scope ( ) { </a> 
<a> return scope ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> period ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public boolean outputComments ( ) { </a> 
<a> return outputComments ; </a> 
<a> } </a> 
<a> public boolean resumeOnBroadcast ( ) { </a> 
<a> return resumeOnBroadcast ; </a> 
<a> } </a> 
<a> public Broadcaster broadcaster ( ) { </a> 
<a> return broadcaster ; </a> 
<a> } </a> 
<a> public Collection < AtmosphereResourceEventListener > listeners ( ) { </a> 
<a> return Collections . <RARE_TOKEN> ( listeners ) ; </a> 
<a> } </a> 
<a> public static class <RARE_TOKEN> < E > extends <RARE_TOKEN> < E , <RARE_TOKEN> < E > > { </a> 
<a> protected <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( - 1 , TimeUnit . MILLISECONDS ) ; </a> 
<a> protected Suspend . SCOPE scope = Suspend . SCOPE . <RARE_TOKEN> ; </a> 
<a> protected boolean outputComments = true ; </a> 
<a> protected boolean resumeOnBroadcast = false ; </a> 
<a> protected final Collection < AtmosphereResourceEventListener > listeners </a> 
<a> = new ArrayList < AtmosphereResourceEventListener > ( ) ; </a> 
<a> private Broadcaster broadcaster ; </a> 
<a> public <RARE_TOKEN> ( ) { </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( <RARE_TOKEN> < E > that ) { </a> 
<a> super ( that ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> < E > scope ( Suspend . SCOPE scope ) { </a> 
<a> this . scope = scope ; </a> 
<a> return this ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> < E > period ( int <RARE_TOKEN> , TimeUnit <RARE_TOKEN> ) { </a> 
<a> this . <RARE_TOKEN> = new <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> return this ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> < E > outputComments ( boolean outputComments ) { </a> 
<a> this . outputComments = outputComments ; </a> 
<a> return this ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> < E > resumeOnBroadcast ( boolean resumeOnBroadcast ) { </a> 
<a> this . resumeOnBroadcast = resumeOnBroadcast ; </a> 
<a> return this ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> < E > broadcaster ( Broadcaster broadcaster ) { </a> 
<a> this . broadcaster = broadcaster ; </a> 
<a> return this ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> < E > addListener ( AtmosphereResourceEventListener e ) { </a> 
<a> listeners . add ( e ) ; </a> 
<a> return this ; </a> 
<a> } </a> 
<a> public SuspendResponse < E > build ( ) { </a> 
<a> SuspendResponse < E > r = new SuspendResponse < E > ( this ) ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> return r ; </a> 
<a> } </a> 
<a> } </a> 
<a> public static class <RARE_TOKEN> { </a> 
<a> private final TimeUnit <RARE_TOKEN> ; </a> 
<a> private final int period ; </a> 
<a> public <RARE_TOKEN> ( int period , TimeUnit <RARE_TOKEN> ) { </a> 
<a> this . period = period ; </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public int value ( ) { </a> 
<a> return period ; </a> 
<a> } </a> 
<a> public TimeUnit <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . jersey ; </a> 
<a> import org . atmosphere . cpr . <RARE_TOKEN> ; </a> 
<a> import org . slf4j . Logger ; </a> 
<a> import org . slf4j . LoggerFactory ; </a> 
<a> import java . util . concurrent . ConcurrentHashMap ; </a> 
<a> import java . util . concurrent . ConcurrentLinkedQueue ; </a> 
<a> import java . util . concurrent . CountDownLatch ; </a> 
<a> import java . util . concurrent . TimeUnit ; </a> 
<a> public class <RARE_TOKEN> { </a> 
<a> private static final Logger logger = LoggerFactory . getLogger ( <RARE_TOKEN> . class ) ; </a> 
<a> private final static <RARE_TOKEN> factory = new <RARE_TOKEN> ( ) ; </a> 
<a> private final ConcurrentHashMap < String , <RARE_TOKEN> > <RARE_TOKEN> = new ConcurrentHashMap < String , <RARE_TOKEN> > ( ) ; </a> 
<a> private final ConcurrentHashMap < String , CountDownLatch > <RARE_TOKEN> = new ConcurrentHashMap < String , CountDownLatch > ( ) ; </a> 
<a> private <RARE_TOKEN> ( ) { </a> 
<a> } </a> 
<a> public static <RARE_TOKEN> <RARE_TOKEN> ( ) { </a> 
<a> return factory ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( <RARE_TOKEN> < ? extends <RARE_TOKEN> > <RARE_TOKEN> ) { </a> 
<a> logger . debug ( <RARE_TOKEN> {}" , <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> <RARE_TOKEN> . put ( <RARE_TOKEN> . <RARE_TOKEN> ( ) , <RARE_TOKEN> ) ; </a> 
<a> CountDownLatch latch = <RARE_TOKEN> . remove ( <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> if ( latch != null ) { </a> 
<a> latch . countDown ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public <RARE_TOKEN> < ? extends <RARE_TOKEN> > <RARE_TOKEN> ( String <RARE_TOKEN> ) { </a> 
<a> return <RARE_TOKEN> . get ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> < ? extends <RARE_TOKEN> > <RARE_TOKEN> ( String <RARE_TOKEN> ) { </a> 
<a> logger . debug ( <RARE_TOKEN> <RARE_TOKEN> {}" , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> < ? extends <RARE_TOKEN> > r = <RARE_TOKEN> . get ( <RARE_TOKEN> ) ; </a> 
<a> if ( r == null ) { </a> 
<a> CountDownLatch latch = new CountDownLatch ( 1 ) ; </a> 
<a> <RARE_TOKEN> . put ( <RARE_TOKEN> , latch ) ; </a> 
<a> try { </a> 
<a> if ( ! latch . await ( 5 , TimeUnit . SECONDS ) ) { </a> 
<a> } </a> 
<a> <RARE_TOKEN> . remove ( <RARE_TOKEN> ) ; </a> 
<a> } catch ( InterruptedException e ) { </a> 
<a> logger . trace ( "" , e ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> return <RARE_TOKEN> . get ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> package org . atmosphere . jersey . util ; </a> 
<a> import com . sun . jersey . <RARE_TOKEN> . container . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . cpr . ApplicationConfig ; </a> 
<a> import org . atmosphere . cpr . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . cpr . AtmosphereResource ; </a> 
<a> import org . atmosphere . cpr . AtmosphereResourceEvent ; </a> 
<a> import org . atmosphere . cpr . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . cpr . AtmosphereResourceImpl ; </a> 
<a> import org . atmosphere . cpr . BroadcasterFactory ; </a> 
<a> import org . atmosphere . cpr . FrameworkConfig ; </a> 
<a> import org . atmosphere . jersey . <RARE_TOKEN> ; </a> 
<a> import org . slf4j . Logger ; </a> 
<a> import org . slf4j . LoggerFactory ; </a> 
<a> import javax . servlet . http . HttpServletRequest ; </a> 
<a> import javax . ws . rs . core . HttpHeaders ; </a> 
<a> import javax . ws . rs . core . <RARE_TOKEN> ; </a> 
<a> import javax . ws . rs . core . Response ; </a> 
<a> import java . io . IOException ; </a> 
<a> import java . util . List ; </a> 
<a> import java . util . concurrent . ConcurrentHashMap ; </a> 
<a> public final class <RARE_TOKEN> { </a> 
<a> private static final Logger logger = LoggerFactory . getLogger ( <RARE_TOKEN> . class ) ; </a> 
<a> public final static void broadcast ( final AtmosphereResource < ? , ? > r , final AtmosphereResourceEvent e ) { </a> 
<a> HttpServletRequest request = ( HttpServletRequest ) r . getRequest ( ) ; </a> 
<a> try { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = ( <RARE_TOKEN> ) request . getAttribute ( FrameworkConfig . <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> logger . debug ( <RARE_TOKEN> HttpServletRequest <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> {}" , request , <RARE_TOKEN> ) ; </a> 
<a> logger . error ( "Unexpected <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> be <RARE_TOKEN> <RARE_TOKEN> connection <RARE_TOKEN> <RARE_TOKEN> suspended <RARE_TOKEN> ) ; </a> 
<a> r . getBroadcaster ( ) . <RARE_TOKEN> ( r ) ; </a> 
<a> return ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> m = ( <RARE_TOKEN> ) <RARE_TOKEN> . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( HttpHeaders . <RARE_TOKEN> ) ; </a> 
<a> if ( e . getMessage ( ) instanceof Response ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ( Response ) e . getMessage ( ) ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) . add ( HttpHeaders . <RARE_TOKEN> , m ) ; </a> 
<a> <RARE_TOKEN> . write ( ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) . flush ( ) ; </a> 
<a> } else if ( e . getMessage ( ) instanceof List ) { </a> 
<a> for ( Object msg : ( List < Object > ) e . getMessage ( ) ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( Response . <RARE_TOKEN> ( msg ) . build ( ) ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) . add ( HttpHeaders . <RARE_TOKEN> , m ) ; </a> 
<a> <RARE_TOKEN> . write ( ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) . flush ( ) ; </a> 
<a> } </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( Response . <RARE_TOKEN> ( e . getMessage ( ) ) . build ( ) ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) . add ( HttpHeaders . <RARE_TOKEN> , m ) ; </a> 
<a> <RARE_TOKEN> . write ( ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) . flush ( ) ; </a> 
<a> } </a> 
<a> } catch ( Throwable t ) { </a> 
<a> <RARE_TOKEN> ( t , r ) ; </a> 
<a> } finally { </a> 
<a> Boolean resumeOnBroadcast = ( Boolean ) request . getAttribute ( ApplicationConfig . <RARE_TOKEN> ) ; </a> 
<a> if ( resumeOnBroadcast != null && resumeOnBroadcast ) { </a> 
<a> String <RARE_TOKEN> = ( String ) request . getAttribute ( <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> if ( request . getAttribute ( <RARE_TOKEN> . <RARE_TOKEN> ) != null ) { </a> 
<a> ( ( ConcurrentHashMap < String , AtmosphereResource < ? , ? > > ) request . getAttribute ( <RARE_TOKEN> . <RARE_TOKEN> ) ) . remove ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> r . resume ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> final static void <RARE_TOKEN> ( Throwable t , AtmosphereResource < ? , ? > r ) { </a> 
<a> try { </a> 
<a> logger . debug ( <RARE_TOKEN> , t ) ; </a> 
<a> if ( t instanceof IOException && r instanceof <RARE_TOKEN> ) { </a> 
<a> ( ( <RARE_TOKEN> ) r ) . <RARE_TOKEN> ( new <RARE_TOKEN> ( ( AtmosphereResourceImpl ) r , true , false ) ) ; </a> 
<a> ( ( <RARE_TOKEN> ) r ) . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } finally { </a> 
<a> try { </a> 
<a> r . getBroadcaster ( ) . <RARE_TOKEN> ( r ) ; </a> 
<a> } catch ( IllegalStateException ex ) { </a> 
<a> logger . trace ( ex . getMessage ( ) , ex ) ; </a> 
<a> } </a> 
<a> BroadcasterFactory . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( r ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . jersey . util ; </a> 
<a> import org . atmosphere . cpr . AtmosphereResource ; </a> 
<a> import org . atmosphere . cpr . AtmosphereResourceEvent ; </a> 
<a> import org . atmosphere . util . <RARE_TOKEN> ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> public <RARE_TOKEN> ( ) { </a> 
<a> super ( ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> . class . getSimpleName ( ) ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( String id ) { </a> 
<a> super ( id ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void broadcast ( final AtmosphereResource < ? , ? > r , final AtmosphereResourceEvent e ) { </a> 
<a> <RARE_TOKEN> . broadcast ( r , e ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . jersey . <RARE_TOKEN> ; </a> 
<a> import com . sun . <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import com . sun . <RARE_TOKEN> . http . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import com . sun . <RARE_TOKEN> . http . servlet . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . container . <RARE_TOKEN> ; </a> 
<a> public abstract class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> protected <RARE_TOKEN> ws ; </a> 
<a> protected <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> atmoServlet . <RARE_TOKEN> ( new <RARE_TOKEN> ( atmoServlet . <RARE_TOKEN> ( ) ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ) throws Exception { </a> 
<a> ws = new <RARE_TOKEN> ( port ) ; </a> 
<a> <RARE_TOKEN> = new <RARE_TOKEN> ( ) ; </a> 
<a> ws . <RARE_TOKEN> ( new <RARE_TOKEN> ( ) ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( atmoServlet ) ; </a> 
<a> ws . <RARE_TOKEN> ( <RARE_TOKEN> , new String [ ] { <RARE_TOKEN> } ) ; </a> 
<a> ws . start ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ) throws Exception { </a> 
<a> ws . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . jersey . <RARE_TOKEN> ; </a> 
<a> import com . <RARE_TOKEN> . http . client . <RARE_TOKEN> ; </a> 
<a> import com . <RARE_TOKEN> . http . client . <RARE_TOKEN> ; </a> 
<a> import com . <RARE_TOKEN> . http . client . AsyncHttpClient ; </a> 
<a> import com . <RARE_TOKEN> . http . client . <RARE_TOKEN> ; </a> 
<a> import com . <RARE_TOKEN> . http . client . <RARE_TOKEN> ; </a> 
<a> import com . <RARE_TOKEN> . http . client . HttpResponseStatus ; </a> 
<a> import com . <RARE_TOKEN> . http . client . Response ; </a> 
<a> import org . atmosphere . cache . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . cpr . ApplicationConfig ; </a> 
<a> import org . atmosphere . cpr . AtmosphereResourceImpl ; </a> 
<a> import org . atmosphere . cpr . HeaderConfig ; </a> 
<a> import org . slf4j . Logger ; </a> 
<a> import org . slf4j . LoggerFactory ; </a> 
<a> import org . testng . <RARE_TOKEN> . Test ; </a> 
<a> import java . util . concurrent . CountDownLatch ; </a> 
<a> import java . util . concurrent . TimeUnit ; </a> 
<a> import java . util . concurrent . atomic . AtomicReference ; </a> 
<a> import static org . testng . Assert . assertEquals ; </a> 
<a> import static org . testng . Assert . assertNotNull ; </a> 
<a> import static org . testng . Assert . assertTrue ; </a> 
<a> import static org . testng . Assert . fail ; </a> 
<a> public abstract class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> protected static final Logger logger = LoggerFactory . getLogger ( <RARE_TOKEN> . class ) ; </a> 
<a> String <RARE_TOKEN> ( int port ) { </a> 
<a> return <RARE_TOKEN> + port + <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Test ( timeOut = <RARE_TOKEN> , enabled = true ) </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> logger . info ( <RARE_TOKEN> running <RARE_TOKEN> <RARE_TOKEN> , getClass ( ) . getSimpleName ( ) ) ; </a> 
<a> AsyncHttpClient c = new AsyncHttpClient ( ) ; </a> 
<a> try { </a> 
<a> long <RARE_TOKEN> = System . currentTimeMillis ( ) ; </a> 
<a> Response r = c . prepareGet ( urlTarget ) . execute ( ) . get ( 10 , TimeUnit . SECONDS ) ; </a> 
<a> assertNotNull ( r ) ; </a> 
<a> assertEquals ( r . <RARE_TOKEN> ( ) , 200 ) ; </a> 
<a> String resume = r . <RARE_TOKEN> ( ) ; </a> 
<a> assertEquals ( resume , <RARE_TOKEN> ) ; </a> 
<a> long current = System . currentTimeMillis ( ) - <RARE_TOKEN> ; </a> 
<a> assertTrue ( current > <RARE_TOKEN> && current < <RARE_TOKEN> ) ; </a> 
<a> } catch ( Exception e ) { </a> 
<a> logger . error ( <RARE_TOKEN> failed" , e ) ; </a> 
<a> fail ( e . getMessage ( ) ) ; </a> 
<a> } </a> 
<a> c . close ( ) ; </a> 
<a> } </a> 
<a> @ Test ( timeOut = <RARE_TOKEN> , enabled = true ) </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> logger . info ( <RARE_TOKEN> running <RARE_TOKEN> <RARE_TOKEN> , getClass ( ) . getSimpleName ( ) ) ; </a> 
<a> AsyncHttpClient c = new AsyncHttpClient ( ) ; </a> 
<a> try { </a> 
<a> Response r = c . prepareGet ( urlTarget + <RARE_TOKEN> ) . execute ( ) . get ( 10 , TimeUnit . SECONDS ) ; </a> 
<a> assertNotNull ( r ) ; </a> 
<a> assertEquals ( r . <RARE_TOKEN> ( ) , 200 ) ; </a> 
<a> String resume = r . <RARE_TOKEN> ( ) ; </a> 
<a> String [ ] <RARE_TOKEN> = r . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( ) . split ( <RARE_TOKEN> ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> [ 0 ] . <RARE_TOKEN> ( ) , <RARE_TOKEN> ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> [ 1 ] . <RARE_TOKEN> ( ) , <RARE_TOKEN> ) ; </a> 
<a> assertEquals ( resume , AtmosphereResourceImpl . <RARE_TOKEN> ( ) ) ; </a> 
<a> } catch ( Exception e ) { </a> 
<a> logger . error ( <RARE_TOKEN> failed" , e ) ; </a> 
<a> fail ( e . getMessage ( ) ) ; </a> 
<a> } </a> 
<a> c . close ( ) ; </a> 
<a> } </a> 
<a> @ Test ( timeOut = <RARE_TOKEN> , enabled = false ) </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> logger . info ( <RARE_TOKEN> running <RARE_TOKEN> <RARE_TOKEN> , getClass ( ) . getSimpleName ( ) ) ; </a> 
<a> AsyncHttpClient c = new AsyncHttpClient ( ) ; </a> 
<a> long <RARE_TOKEN> = System . currentTimeMillis ( ) ; </a> 
<a> try { </a> 
<a> Response r = c . prepareGet ( urlTarget + <RARE_TOKEN> ) . execute ( ) . get ( <RARE_TOKEN> , TimeUnit . SECONDS ) ; </a> 
<a> assertNotNull ( r ) ; </a> 
<a> } catch ( Exception e ) { </a> 
<a> } </a> 
<a> long current = System . currentTimeMillis ( ) - <RARE_TOKEN> ; </a> 
<a> assertTrue ( current > <RARE_TOKEN> && current < <RARE_TOKEN> ) ; </a> 
<a> c . close ( ) ; </a> 
<a> } </a> 
<a> @ Test ( timeOut = <RARE_TOKEN> , enabled = true ) </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> logger . info ( <RARE_TOKEN> running <RARE_TOKEN> <RARE_TOKEN> , getClass ( ) . getSimpleName ( ) ) ; </a> 
<a> AsyncHttpClient c = new AsyncHttpClient ( ) ; </a> 
<a> final AtomicReference < String > location = new AtomicReference < String > ( ) ; </a> 
<a> final AtomicReference < String > response = new AtomicReference < String > ( "" ) ; </a> 
<a> final CountDownLatch latch = new CountDownLatch ( 1 ) ; </a> 
<a> final CountDownLatch <RARE_TOKEN> = new CountDownLatch ( 1 ) ; </a> 
<a> try { </a> 
<a> c . prepareGet ( urlTarget + <RARE_TOKEN> ) . execute ( new <RARE_TOKEN> < String > ( ) { </a> 
<a> public void <RARE_TOKEN> ( Throwable throwable ) { </a> 
<a> fail ( <RARE_TOKEN> , throwable ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> ) throws Exception { </a> 
<a> logger . info ( <RARE_TOKEN> <RARE_TOKEN> byte <RARE_TOKEN> {}" , new String ( <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ) ; </a> 
<a> response . set ( response . get ( ) + new String ( <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ) ; </a> 
<a> <RARE_TOKEN> . countDown ( ) ; </a> 
<a> return <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> <RARE_TOKEN> ( HttpResponseStatus <RARE_TOKEN> ) throws Exception { </a> 
<a> return <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> ) throws Exception { </a> 
<a> location . set ( <RARE_TOKEN> . getHeaders ( ) . <RARE_TOKEN> ( <RARE_TOKEN> ) ) ; </a> 
<a> return <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public String onCompleted ( ) throws Exception { </a> 
<a> latch . countDown ( ) ; </a> 
<a> return "" ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> <RARE_TOKEN> . await ( 5 , TimeUnit . SECONDS ) ; </a> 
<a> Response r = c . prepareGet ( location . get ( ) ) . execute ( ) . get ( 10 , TimeUnit . SECONDS ) ; </a> 
<a> latch . await ( 20 , TimeUnit . SECONDS ) ; </a> 
<a> assertNotNull ( r ) ; </a> 
<a> assertEquals ( r . <RARE_TOKEN> ( ) , 200 ) ; </a> 
<a> assertEquals ( response . get ( ) , <RARE_TOKEN> ) ; </a> 
<a> } catch ( Exception e ) { </a> 
<a> logger . error ( <RARE_TOKEN> failed" , e ) ; </a> 
<a> fail ( e . getMessage ( ) ) ; </a> 
<a> } </a> 
<a> c . close ( ) ; </a> 
<a> } </a> 
<a> @ Test ( timeOut = <RARE_TOKEN> , enabled = true ) </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> logger . info ( <RARE_TOKEN> running <RARE_TOKEN> <RARE_TOKEN> , getClass ( ) . getSimpleName ( ) ) ; </a> 
<a> AsyncHttpClient c = new AsyncHttpClient ( ) ; </a> 
<a> long <RARE_TOKEN> = System . currentTimeMillis ( ) ; </a> 
<a> try { </a> 
<a> Response r = c . prepareGet ( urlTarget + <RARE_TOKEN> ) . execute ( ) . get ( ) ; </a> 
<a> assertNotNull ( r ) ; </a> 
<a> assertEquals ( r . <RARE_TOKEN> ( ) , 200 ) ; </a> 
<a> long current = System . currentTimeMillis ( ) - <RARE_TOKEN> ; </a> 
<a> assertTrue ( current > <RARE_TOKEN> && current < <RARE_TOKEN> ) ; </a> 
<a> } catch ( Exception e ) { </a> 
<a> logger . error ( <RARE_TOKEN> failed" , e ) ; </a> 
<a> fail ( e . getMessage ( ) ) ; </a> 
<a> } </a> 
<a> c . close ( ) ; </a> 
<a> } </a> 
<a> @ Test ( timeOut = <RARE_TOKEN> , enabled = true ) </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> logger . info ( <RARE_TOKEN> running <RARE_TOKEN> <RARE_TOKEN> , getClass ( ) . getSimpleName ( ) ) ; </a> 
<a> final CountDownLatch latch = new CountDownLatch ( 1 ) ; </a> 
<a> AsyncHttpClient c = new AsyncHttpClient ( ) ; </a> 
<a> try { </a> 
<a> final AtomicReference < Response > response = new AtomicReference < Response > ( ) ; </a> 
<a> c . prepareGet ( urlTarget + <RARE_TOKEN> ) . execute ( new <RARE_TOKEN> < Response > ( ) { </a> 
<a> @ Override </a> 
<a> public Response onCompleted ( Response r ) throws Exception { </a> 
<a> try { </a> 
<a> response . set ( r ) ; </a> 
<a> return r ; </a> 
<a> } finally { </a> 
<a> latch . countDown ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> Thread . sleep ( <RARE_TOKEN> ) ; </a> 
<a> c . <RARE_TOKEN> ( urlTarget + <RARE_TOKEN> ) . <RARE_TOKEN> ( "message" , "foo" ) . execute ( ) . get ( ) ; </a> 
<a> c . <RARE_TOKEN> ( urlTarget + <RARE_TOKEN> ) . <RARE_TOKEN> ( "message" , <RARE_TOKEN> ) . execute ( ) . get ( ) ; </a> 
<a> try { </a> 
<a> latch . await ( 20 , TimeUnit . SECONDS ) ; </a> 
<a> } catch ( InterruptedException e ) { </a> 
<a> fail ( e . getMessage ( ) ) ; </a> 
<a> } </a> 
<a> Response r = response . get ( ) ; </a> 
<a> assertNotNull ( r ) ; </a> 
<a> assertEquals ( r . <RARE_TOKEN> ( ) , AtmosphereResourceImpl . <RARE_TOKEN> ( ) + <RARE_TOKEN> ) ; </a> 
<a> assertEquals ( r . <RARE_TOKEN> ( ) , 200 ) ; </a> 
<a> } catch ( Exception e ) { </a> 
<a> logger . error ( <RARE_TOKEN> failed" , e ) ; </a> 
<a> fail ( e . getMessage ( ) ) ; </a> 
<a> } </a> 
<a> c . close ( ) ; </a> 
<a> } </a> 
<a> @ Test ( timeOut = <RARE_TOKEN> , enabled = true ) </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> logger . info ( <RARE_TOKEN> running <RARE_TOKEN> <RARE_TOKEN> , getClass ( ) . getSimpleName ( ) ) ; </a> 
<a> final CountDownLatch latch = new CountDownLatch ( 1 ) ; </a> 
<a> long <RARE_TOKEN> = System . currentTimeMillis ( ) ; </a> 
<a> AsyncHttpClient c = new AsyncHttpClient ( ) ; </a> 
<a> try { </a> 
<a> final AtomicReference < Response > response = new AtomicReference < Response > ( ) ; </a> 
<a> c . prepareGet ( urlTarget + <RARE_TOKEN> ) . execute ( new <RARE_TOKEN> < Response > ( ) { </a> 
<a> @ Override </a> 
<a> public Response onCompleted ( Response r ) throws Exception { </a> 
<a> try { </a> 
<a> response . set ( r ) ; </a> 
<a> return r ; </a> 
<a> } finally { </a> 
<a> latch . countDown ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> Thread . sleep ( <RARE_TOKEN> ) ; </a> 
<a> c . <RARE_TOKEN> ( urlTarget + <RARE_TOKEN> ) . <RARE_TOKEN> ( "message" , "foo" ) . execute ( ) . get ( ) ; </a> 
<a> c . <RARE_TOKEN> ( urlTarget + <RARE_TOKEN> ) . <RARE_TOKEN> ( "message" , <RARE_TOKEN> ) . execute ( ) . get ( ) ; </a> 
<a> try { </a> 
<a> latch . await ( 20 , TimeUnit . SECONDS ) ; </a> 
<a> } catch ( InterruptedException e ) { </a> 
<a> fail ( e . getMessage ( ) ) ; </a> 
<a> } </a> 
<a> Response r = response . get ( ) ; </a> 
<a> assertNotNull ( r ) ; </a> 
<a> assertEquals ( r . <RARE_TOKEN> ( ) , AtmosphereResourceImpl . <RARE_TOKEN> ( ) + <RARE_TOKEN> ) ; </a> 
<a> assertEquals ( r . <RARE_TOKEN> ( ) , 200 ) ; </a> 
<a> long current = System . currentTimeMillis ( ) - <RARE_TOKEN> ; </a> 
<a> assertTrue ( current > <RARE_TOKEN> && current < <RARE_TOKEN> ) ; </a> 
<a> } catch ( Exception e ) { </a> 
<a> logger . error ( <RARE_TOKEN> failed" , e ) ; </a> 
<a> fail ( e . getMessage ( ) ) ; </a> 
<a> } </a> 
<a> c . close ( ) ; </a> 
<a> } </a> 
<a> @ Test ( timeOut = <RARE_TOKEN> , enabled = true ) </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> logger . info ( <RARE_TOKEN> running <RARE_TOKEN> <RARE_TOKEN> , getClass ( ) . getSimpleName ( ) ) ; </a> 
<a> final CountDownLatch latch = new CountDownLatch ( 1 ) ; </a> 
<a> long <RARE_TOKEN> = System . currentTimeMillis ( ) ; </a> 
<a> AsyncHttpClient c = new AsyncHttpClient ( ) ; </a> 
<a> try { </a> 
<a> final AtomicReference < Response > response = new AtomicReference < Response > ( ) ; </a> 
<a> c . prepareGet ( urlTarget + <RARE_TOKEN> ) . execute ( new <RARE_TOKEN> < Response > ( ) { </a> 
<a> @ Override </a> 
<a> public Response onCompleted ( Response r ) throws Exception { </a> 
<a> try { </a> 
<a> response . set ( r ) ; </a> 
<a> return r ; </a> 
<a> } finally { </a> 
<a> latch . countDown ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> Thread . sleep ( <RARE_TOKEN> ) ; </a> 
<a> c . <RARE_TOKEN> ( urlTarget + <RARE_TOKEN> ) . <RARE_TOKEN> ( "message" , "foo" ) . execute ( ) . get ( ) ; </a> 
<a> try { </a> 
<a> latch . await ( 20 , TimeUnit . SECONDS ) ; </a> 
<a> } catch ( InterruptedException e ) { </a> 
<a> fail ( e . getMessage ( ) ) ; </a> 
<a> } </a> 
<a> Response r = response . get ( ) ; </a> 
<a> assertNotNull ( r ) ; </a> 
<a> assertEquals ( r . <RARE_TOKEN> ( ) , 200 ) ; </a> 
<a> assertEquals ( r . <RARE_TOKEN> ( ) , <RARE_TOKEN> ) ; </a> 
<a> long current = System . currentTimeMillis ( ) - <RARE_TOKEN> ; </a> 
<a> assertTrue ( current > <RARE_TOKEN> && current < <RARE_TOKEN> ) ; </a> 
<a> } catch ( Exception e ) { </a> 
<a> logger . error ( <RARE_TOKEN> failed" , e ) ; </a> 
<a> fail ( e . getMessage ( ) ) ; </a> 
<a> } </a> 
<a> c . close ( ) ; </a> 
<a> } </a> 
<a> @ Test ( timeOut = <RARE_TOKEN> , enabled = true ) </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> logger . info ( <RARE_TOKEN> running <RARE_TOKEN> <RARE_TOKEN> , getClass ( ) . getSimpleName ( ) ) ; </a> 
<a> final CountDownLatch latch = new CountDownLatch ( 1 ) ; </a> 
<a> long <RARE_TOKEN> = System . currentTimeMillis ( ) ; </a> 
<a> AsyncHttpClient c = new AsyncHttpClient ( ) ; </a> 
<a> try { </a> 
<a> final AtomicReference < Response > response = new AtomicReference < Response > ( ) ; </a> 
<a> c . prepareGet ( urlTarget + <RARE_TOKEN> ) . execute ( new <RARE_TOKEN> < Response > ( ) { </a> 
<a> @ Override </a> 
<a> public Response onCompleted ( Response r ) throws Exception { </a> 
<a> try { </a> 
<a> response . set ( r ) ; </a> 
<a> return r ; </a> 
<a> } finally { </a> 
<a> latch . countDown ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> Thread . sleep ( <RARE_TOKEN> ) ; </a> 
<a> c . <RARE_TOKEN> ( urlTarget + <RARE_TOKEN> ) . <RARE_TOKEN> ( "message" , <RARE_TOKEN> ) . execute ( ) . get ( ) ; </a> 
<a> try { </a> 
<a> latch . await ( 20 , TimeUnit . SECONDS ) ; </a> 
<a> } catch ( InterruptedException e ) { </a> 
<a> fail ( e . getMessage ( ) ) ; </a> 
<a> } </a> 
<a> Response r = response . get ( ) ; </a> 
<a> assertNotNull ( r ) ; </a> 
<a> assertEquals ( r . <RARE_TOKEN> ( ) , 200 ) ; </a> 
<a> assertEquals ( r . <RARE_TOKEN> ( ) , <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } catch ( Exception e ) { </a> 
<a> logger . error ( <RARE_TOKEN> failed" , e ) ; </a> 
<a> fail ( e . getMessage ( ) ) ; </a> 
<a> } </a> 
<a> c . close ( ) ; </a> 
<a> } </a> 
<a> @ Test ( timeOut = <RARE_TOKEN> , enabled = true ) </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> logger . info ( <RARE_TOKEN> running <RARE_TOKEN> <RARE_TOKEN> , getClass ( ) . getSimpleName ( ) ) ; </a> 
<a> final CountDownLatch latch = new CountDownLatch ( 1 ) ; </a> 
<a> long <RARE_TOKEN> = System . currentTimeMillis ( ) ; </a> 
<a> AsyncHttpClient c = new AsyncHttpClient ( ) ; </a> 
<a> try { </a> 
<a> final AtomicReference < Response > response = new AtomicReference < Response > ( ) ; </a> 
<a> c . prepareGet ( urlTarget + <RARE_TOKEN> ) . execute ( new <RARE_TOKEN> < Response > ( ) { </a> 
<a> @ Override </a> 
<a> public Response onCompleted ( Response r ) throws Exception { </a> 
<a> try { </a> 
<a> response . set ( r ) ; </a> 
<a> return r ; </a> 
<a> } finally { </a> 
<a> latch . countDown ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> Thread . sleep ( <RARE_TOKEN> ) ; </a> 
<a> for ( int i = 0 ; i < 10 ; i ++ ) { </a> 
<a> c . <RARE_TOKEN> ( urlTarget + <RARE_TOKEN> ) . <RARE_TOKEN> ( "message" , </a> 
<a> <RARE_TOKEN> ) . execute ( ) . get ( 5 , TimeUnit . SECONDS ) ; </a> 
<a> } </a> 
<a> try { </a> 
<a> latch . await ( 20 , TimeUnit . SECONDS ) ; </a> 
<a> } catch ( InterruptedException e ) { </a> 
<a> fail ( e . getMessage ( ) ) ; </a> 
<a> } </a> 
<a> Response r = response . get ( ) ; </a> 
<a> assertNotNull ( r ) ; </a> 
<a> assertEquals ( r . <RARE_TOKEN> ( ) , 200 ) ; </a> 
<a> assertEquals ( r . <RARE_TOKEN> ( ) , <RARE_TOKEN> + </a> 
<a> <RARE_TOKEN> + </a> 
<a> <RARE_TOKEN> + </a> 
<a> <RARE_TOKEN> + </a> 
<a> <RARE_TOKEN> + </a> 
<a> <RARE_TOKEN> ) ; </a> 
<a> } catch ( Exception e ) { </a> 
<a> logger . error ( <RARE_TOKEN> failed" , e ) ; </a> 
<a> fail ( e . getMessage ( ) ) ; </a> 
<a> } </a> 
<a> c . close ( ) ; </a> 
<a> } </a> 
<a> @ Test ( timeOut = <RARE_TOKEN> , enabled = true ) </a> 
<a> public void <RARE_TOKEN> ( ) throws <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> { </a> 
<a> logger . info ( <RARE_TOKEN> running <RARE_TOKEN> <RARE_TOKEN> , getClass ( ) . getSimpleName ( ) ) ; </a> 
<a> atmoServlet . <RARE_TOKEN> ( <RARE_TOKEN> . class . getName ( ) ) ; </a> 
<a> final CountDownLatch latch = new CountDownLatch ( 1 ) ; </a> 
<a> long <RARE_TOKEN> = System . currentTimeMillis ( ) ; </a> 
<a> AsyncHttpClient c = new AsyncHttpClient ( ) ; </a> 
<a> try { </a> 
<a> c . <RARE_TOKEN> ( urlTarget ) . <RARE_TOKEN> ( "message" , <RARE_TOKEN> ) . execute ( ) . get ( ) ; </a> 
<a> c . <RARE_TOKEN> ( urlTarget ) . <RARE_TOKEN> ( "message" , <RARE_TOKEN> ) . execute ( ) . get ( ) ; </a> 
<a> Response r = c . prepareGet ( urlTarget + <RARE_TOKEN> ) . addHeader ( HeaderConfig . <RARE_TOKEN> , String . valueOf ( <RARE_TOKEN> ) ) . execute ( new <RARE_TOKEN> < Response > ( ) { </a> 
<a> @ Override </a> 
<a> public Response onCompleted ( Response r ) throws Exception { </a> 
<a> try { </a> 
<a> return r ; </a> 
<a> } finally { </a> 
<a> latch . countDown ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } ) . get ( ) ; </a> 
<a> try { </a> 
<a> latch . await ( 20 , TimeUnit . SECONDS ) ; </a> 
<a> } catch ( InterruptedException e ) { </a> 
<a> fail ( e . getMessage ( ) ) ; </a> 
<a> } </a> 
<a> assertNotNull ( r ) ; </a> 
<a> assertEquals ( r . <RARE_TOKEN> ( ) , 200 ) ; </a> 
<a> assertEquals ( r . <RARE_TOKEN> ( ) , <RARE_TOKEN> ) ; </a> 
<a> } catch ( Exception e ) { </a> 
<a> logger . error ( <RARE_TOKEN> failed" , e ) ; </a> 
<a> fail ( e . getMessage ( ) ) ; </a> 
<a> } </a> 
<a> c . close ( ) ; </a> 
<a> } </a> 
<a> @ Test ( timeOut = <RARE_TOKEN> , enabled = true ) </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> logger . info ( <RARE_TOKEN> running <RARE_TOKEN> <RARE_TOKEN> , getClass ( ) . getSimpleName ( ) ) ; </a> 
<a> final CountDownLatch latch = new CountDownLatch ( 1 ) ; </a> 
<a> AsyncHttpClient c = new AsyncHttpClient ( ) ; </a> 
<a> try { </a> 
<a> final AtomicReference < Response > response = new AtomicReference < Response > ( ) ; </a> 
<a> c . prepareGet ( urlTarget + <RARE_TOKEN> ) . execute ( new <RARE_TOKEN> < Response > ( ) { </a> 
<a> @ Override </a> 
<a> public Response onCompleted ( Response r ) throws Exception { </a> 
<a> try { </a> 
<a> response . set ( r ) ; </a> 
<a> return r ; </a> 
<a> } finally { </a> 
<a> latch . countDown ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> Thread . sleep ( <RARE_TOKEN> ) ; </a> 
<a> c . <RARE_TOKEN> ( urlTarget + <RARE_TOKEN> ) . <RARE_TOKEN> ( "message" , "foo" ) . execute ( ) . get ( ) ; </a> 
<a> c . <RARE_TOKEN> ( urlTarget + <RARE_TOKEN> ) . <RARE_TOKEN> ( "message" , <RARE_TOKEN> ) . execute ( ) . get ( ) ; </a> 
<a> try { </a> 
<a> latch . await ( 20 , TimeUnit . SECONDS ) ; </a> 
<a> } catch ( InterruptedException e ) { </a> 
<a> fail ( e . getMessage ( ) ) ; </a> 
<a> } </a> 
<a> Response r = response . get ( ) ; </a> 
<a> assertNotNull ( r ) ; </a> 
<a> assertEquals ( r . <RARE_TOKEN> ( ) , AtmosphereResourceImpl . <RARE_TOKEN> ( ) + <RARE_TOKEN> ) ; </a> 
<a> assertEquals ( r . <RARE_TOKEN> ( ) , 200 ) ; </a> 
<a> } catch ( Exception e ) { </a> 
<a> logger . error ( <RARE_TOKEN> failed" , e ) ; </a> 
<a> fail ( e . getMessage ( ) ) ; </a> 
<a> } </a> 
<a> c . close ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . jersey . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . cpr . AtmosphereServlet ; </a> 
<a> import org . slf4j . Logger ; </a> 
<a> import org . slf4j . LoggerFactory ; </a> 
<a> import org . testng . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import org . testng . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import java . io . IOException ; </a> 
<a> import java . net . <RARE_TOKEN> ; </a> 
<a> public abstract class <RARE_TOKEN> { </a> 
<a> protected static final Logger logger = LoggerFactory . getLogger ( <RARE_TOKEN> . class ) ; </a> 
<a> protected static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> protected AtmosphereServlet atmoServlet ; </a> 
<a> public String urlTarget ; </a> 
<a> public int port ; </a> 
<a> abstract public void <RARE_TOKEN> ( ) ; </a> 
<a> abstract public void <RARE_TOKEN> ( ) throws Exception ; </a> 
<a> abstract public void <RARE_TOKEN> ( ) throws Exception ; </a> 
<a> public static class <RARE_TOKEN> { </a> 
<a> public static int <RARE_TOKEN> ( final String <RARE_TOKEN> , int <RARE_TOKEN> ) { </a> 
<a> if ( null == <RARE_TOKEN> ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> String <RARE_TOKEN> = System . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> if ( null != <RARE_TOKEN> ) { </a> 
<a> try { </a> 
<a> return Integer . parseInt ( <RARE_TOKEN> ) ; </a> 
<a> } catch ( <RARE_TOKEN> e ) { </a> 
<a> } </a> 
<a> } </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<a> protected int <RARE_TOKEN> ( ) throws IOException { </a> 
<a> <RARE_TOKEN> socket = null ; </a> 
<a> try { </a> 
<a> socket = new <RARE_TOKEN> ( 0 ) ; </a> 
<a> return socket . <RARE_TOKEN> ( ) ; </a> 
<a> } finally { </a> 
<a> if ( socket != null ) { </a> 
<a> socket . close ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> @ <RARE_TOKEN> ( <RARE_TOKEN> = true ) </a> 
<a> public void <RARE_TOKEN> ( ) throws Exception { </a> 
<a> port = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ( ) ) ; </a> 
<a> urlTarget = <RARE_TOKEN> ( port ) ; </a> 
<a> atmoServlet = new AtmosphereServlet ( ) ; </a> 
<a> atmoServlet . <RARE_TOKEN> ( <RARE_TOKEN> , this . getClass ( ) . <RARE_TOKEN> ( ) . getName ( ) ) ; </a> 
<a> atmoServlet . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> . class . getName ( ) ) ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> abstract String <RARE_TOKEN> ( int port ) ; </a> 
<a> @ <RARE_TOKEN> ( <RARE_TOKEN> = true ) </a> 
<a> public void <RARE_TOKEN> ( ) throws Exception { </a> 
<a> if ( atmoServlet != null ) atmoServlet . destroy ( ) ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> package org . atmosphere . jersey . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . annotation . Broadcast ; </a> 
<a> import org . atmosphere . annotation . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . annotation . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . annotation . Suspend ; </a> 
<a> import org . atmosphere . cpr . Broadcaster ; </a> 
<a> import org . atmosphere . cpr . BroadcasterFactory ; </a> 
<a> import org . atmosphere . jersey . Broadcastable ; </a> 
<a> import org . atmosphere . jersey . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . jersey . SuspendResponse ; </a> 
<a> import org . atmosphere . util . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . util . <RARE_TOKEN> ; </a> 
<a> import javax . ws . rs . FormParam ; </a> 
<a> import javax . ws . rs . GET ; </a> 
<a> import javax . ws . rs . POST ; </a> 
<a> import javax . ws . rs . Path ; </a> 
<a> import javax . ws . rs . <RARE_TOKEN> ; </a> 
<a> import javax . ws . rs . Produces ; </a> 
<a> import java . util . concurrent . <RARE_TOKEN> ; </a> 
<a> import java . util . concurrent . <RARE_TOKEN> ; </a> 
<a> import java . util . concurrent . TimeUnit ; </a> 
<a> @ Path ( <RARE_TOKEN> ) </a> 
<a> @ Produces ( <RARE_TOKEN> ) </a> 
<a> public class <RARE_TOKEN> { </a> 
<a> private </a> 
<a> @ <RARE_TOKEN> ( <RARE_TOKEN> ) </a> 
<a> Broadcaster broadcaster ; </a> 
<a> @ GET </a> 
<a> public SuspendResponse < String > <RARE_TOKEN> ( ) { </a> 
<a> SuspendResponse < String > r = new SuspendResponse . <RARE_TOKEN> < String > ( ) </a> 
<a> . <RARE_TOKEN> ( <RARE_TOKEN> ) </a> 
<a> . broadcaster ( broadcaster ) </a> 
<a> . outputComments ( false ) </a> 
<a> . resumeOnBroadcast ( true ) </a> 
<a> . period ( 5 , TimeUnit . SECONDS ) </a> 
<a> . build ( ) ; </a> 
<a> return r ; </a> 
<a> } </a> 
<a> @ GET </a> 
<a> @ Path ( <RARE_TOKEN> ) </a> 
<a> public SuspendResponse < String > <RARE_TOKEN> ( @ <RARE_TOKEN> ( <RARE_TOKEN> ) Broadcaster b ) throws <RARE_TOKEN> , InterruptedException { </a> 
<a> SuspendResponse < String > r = new SuspendResponse . <RARE_TOKEN> < String > ( ) </a> 
<a> . <RARE_TOKEN> ( <RARE_TOKEN> ) </a> 
<a> . broadcaster ( broadcaster ) </a> 
<a> . scope ( Suspend . SCOPE . <RARE_TOKEN> ) </a> 
<a> . outputComments ( false ) </a> 
<a> . resumeOnBroadcast ( true ) </a> 
<a> . period ( 5 , TimeUnit . SECONDS ) </a> 
<a> . build ( ) ; </a> 
<a> b . broadcast ( "foo" ) . get ( ) ; </a> 
<a> return r ; </a> 
<a> } </a> 
<a> @ GET </a> 
<a> @ Path ( <RARE_TOKEN> ) </a> 
<a> public SuspendResponse < String > <RARE_TOKEN> ( ) { </a> 
<a> SuspendResponse < String > r = new SuspendResponse . <RARE_TOKEN> < String > ( ) </a> 
<a> . broadcaster ( broadcaster ) </a> 
<a> . outputComments ( true ) </a> 
<a> . period ( 5 , TimeUnit . SECONDS ) </a> 
<a> . build ( ) ; </a> 
<a> return r ; </a> 
<a> } </a> 
<a> @ GET </a> 
<a> @ Path ( <RARE_TOKEN> ) </a> 
<a> public SuspendResponse < String > <RARE_TOKEN> ( ) { </a> 
<a> SuspendResponse < String > r = new SuspendResponse . <RARE_TOKEN> < String > ( ) </a> 
<a> . broadcaster ( broadcaster ) </a> 
<a> . outputComments ( true ) </a> 
<a> . <RARE_TOKEN> ( "" ) </a> 
<a> . build ( ) ; </a> 
<a> return r ; </a> 
<a> } </a> 
<a> @ GET </a> 
<a> @ Path ( <RARE_TOKEN> ) </a> 
<a> public SuspendResponse < String > <RARE_TOKEN> ( ) { </a> 
<a> SuspendResponse < String > r = new SuspendResponse . <RARE_TOKEN> < String > ( ) </a> 
<a> . broadcaster ( broadcaster ) </a> 
<a> . outputComments ( false ) </a> 
<a> . <RARE_TOKEN> ( "" ) </a> 
<a> . build ( ) ; </a> 
<a> return r ; </a> 
<a> } </a> 
<a> @ GET </a> 
<a> @ Path ( <RARE_TOKEN> ) </a> 
<a> public SuspendResponse < String > <RARE_TOKEN> ( final @ <RARE_TOKEN> ( <RARE_TOKEN> ) String topic ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( new Runnable ( ) { </a> 
<a> public void run ( ) { </a> 
<a> try { </a> 
<a> Thread . sleep ( <RARE_TOKEN> ) ; </a> 
<a> } catch ( InterruptedException e ) { </a> 
<a> } </a> 
<a> BroadcasterFactory . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( <RARE_TOKEN> . class , topic ) . broadcast ( <RARE_TOKEN> " + topic ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> SuspendResponse < String > r = new SuspendResponse . <RARE_TOKEN> < String > ( ) </a> 
<a> . broadcaster ( broadcaster ) </a> 
<a> . resumeOnBroadcast ( true ) </a> 
<a> . <RARE_TOKEN> ( "foo" ) </a> 
<a> . build ( ) ; </a> 
<a> return r ; </a> 
<a> } </a> 
<a> @ GET </a> 
<a> @ Path ( <RARE_TOKEN> ) </a> 
<a> @ Suspend ( outputComments = false ) </a> 
<a> public SuspendResponse < String > <RARE_TOKEN> ( ) { </a> 
<a> SuspendResponse < String > r = new SuspendResponse . <RARE_TOKEN> < String > ( ) </a> 
<a> . outputComments ( false ) </a> 
<a> . <RARE_TOKEN> ( <RARE_TOKEN> ) </a> 
<a> . build ( ) ; </a> 
<a> return r ; </a> 
<a> } </a> 
<a> @ GET </a> 
<a> @ Path ( <RARE_TOKEN> ) </a> 
<a> public SuspendResponse < String > <RARE_TOKEN> ( ) { </a> 
<a> SuspendResponse < String > r = new SuspendResponse . <RARE_TOKEN> < String > ( ) </a> 
<a> . outputComments ( false ) </a> 
<a> . resumeOnBroadcast ( true ) </a> 
<a> . build ( ) ; </a> 
<a> return r ; </a> 
<a> } </a> 
<a> @ GET </a> 
<a> @ <RARE_TOKEN> </a> 
<a> @ Path ( <RARE_TOKEN> ) </a> 
<a> public String resume ( ) throws <RARE_TOKEN> , InterruptedException { </a> 
<a> broadcaster . broadcast ( <RARE_TOKEN> ) . get ( ) ; </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ POST </a> 
<a> @ Broadcast </a> 
<a> public Broadcastable <RARE_TOKEN> ( @ FormParam ( "message" ) String message ) { </a> 
<a> return broadcast ( message ) ; </a> 
<a> } </a> 
<a> @ POST </a> 
<a> @ Path ( <RARE_TOKEN> ) </a> 
<a> @ Broadcast ( resumeOnBroadcast = true ) </a> 
<a> public Broadcastable <RARE_TOKEN> ( @ FormParam ( "message" ) String message ) { </a> 
<a> return broadcast ( message ) ; </a> 
<a> } </a> 
<a> @ POST </a> 
<a> @ Path ( <RARE_TOKEN> ) </a> 
<a> @ Broadcast ( resumeOnBroadcast = true , value = { <RARE_TOKEN> . class } ) </a> 
<a> public Broadcastable filter ( @ FormParam ( "message" ) String message ) { </a> 
<a> return broadcast ( message ) ; </a> 
<a> } </a> 
<a> @ POST </a> 
<a> @ Path ( <RARE_TOKEN> ) </a> 
<a> @ Broadcast ( resumeOnBroadcast = true , value = { <RARE_TOKEN> . class } ) </a> 
<a> public Broadcastable <RARE_TOKEN> ( @ FormParam ( "message" ) String message ) { </a> 
<a> return broadcast ( message ) ; </a> 
<a> } </a> 
<a> @ <RARE_TOKEN> ( period = 5 , resumeOnBroadcast = true , <RARE_TOKEN> = 5 ) </a> 
<a> @ POST </a> 
<a> @ Path ( <RARE_TOKEN> ) </a> 
<a> public Broadcastable <RARE_TOKEN> ( @ FormParam ( "message" ) String message ) { </a> 
<a> return broadcast ( message ) ; </a> 
<a> } </a> 
<a> @ <RARE_TOKEN> ( period = 10 , <RARE_TOKEN> = 5 ) </a> 
<a> @ POST </a> 
<a> @ Path ( <RARE_TOKEN> ) </a> 
<a> public Broadcastable <RARE_TOKEN> ( @ FormParam ( "message" ) String message ) { </a> 
<a> return broadcast ( message ) ; </a> 
<a> } </a> 
<a> @ <RARE_TOKEN> ( period = 5 ) </a> 
<a> @ POST </a> 
<a> @ Path ( <RARE_TOKEN> ) </a> 
<a> public Broadcastable schedule ( @ FormParam ( "message" ) String message ) { </a> 
<a> return broadcast ( message ) ; </a> 
<a> } </a> 
<a> @ Broadcast ( delay = 0 ) </a> 
<a> @ POST </a> 
<a> @ Path ( <RARE_TOKEN> ) </a> 
<a> public Broadcastable <RARE_TOKEN> ( @ FormParam ( "message" ) String message ) { </a> 
<a> return broadcast ( message ) ; </a> 
<a> } </a> 
<a> @ Broadcast ( delay = 5 , resumeOnBroadcast = true ) </a> 
<a> @ POST </a> 
<a> @ Path ( <RARE_TOKEN> ) </a> 
<a> public Broadcastable <RARE_TOKEN> ( @ FormParam ( "message" ) String message ) { </a> 
<a> return broadcast ( message ) ; </a> 
<a> } </a> 
<a> @ POST </a> 
<a> @ Path ( <RARE_TOKEN> ) </a> 
<a> public String <RARE_TOKEN> ( @ FormParam ( "message" ) String message ) { </a> 
<a> broadcaster . <RARE_TOKEN> ( message ) ; </a> 
<a> return message ; </a> 
<a> } </a> 
<a> Broadcastable broadcast ( String m ) { </a> 
<a> return new Broadcastable ( m + <RARE_TOKEN> , broadcaster ) ; </a> 
<a> } </a> 
<a> @ GET </a> 
<a> @ Path ( <RARE_TOKEN> ) </a> 
<a> public SuspendResponse < String > <RARE_TOKEN> ( ) { </a> 
<a> SuspendResponse < String > r = new SuspendResponse . <RARE_TOKEN> < String > ( ) </a> 
<a> . broadcaster ( broadcaster ) </a> 
<a> . outputComments ( false ) </a> 
<a> . resumeOnBroadcast ( true ) </a> 
<a> . period ( 5 , TimeUnit . SECONDS ) </a> 
<a> . build ( ) ; </a> 
<a> return r ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> package org . atmosphere . jersey . <RARE_TOKEN> ; </a> 
<a> import com . <RARE_TOKEN> . http . client . AsyncHttpClient ; </a> 
<a> import com . <RARE_TOKEN> . http . client . Response ; </a> 
<a> import org . atmosphere . container . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . cpr . AtmosphereServlet ; </a> 
<a> import org . testng . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import org . testng . <RARE_TOKEN> . Test ; </a> 
<a> import java . util . concurrent . TimeUnit ; </a> 
<a> import static org . testng . Assert . assertEquals ; </a> 
<a> import static org . testng . Assert . assertNotNull ; </a> 
<a> import static org . testng . Assert . assertTrue ; </a> 
<a> import static org . testng . Assert . fail ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> atmoServlet . <RARE_TOKEN> ( new <RARE_TOKEN> ( atmoServlet . <RARE_TOKEN> ( ) ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> @ <RARE_TOKEN> ( <RARE_TOKEN> = true ) </a> 
<a> public void <RARE_TOKEN> ( ) throws Exception { </a> 
<a> port = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ( ) ) ; </a> 
<a> urlTarget = <RARE_TOKEN> + port + <RARE_TOKEN> ; </a> 
<a> atmoServlet = new AtmosphereServlet ( ) ; </a> 
<a> atmoServlet . <RARE_TOKEN> ( <RARE_TOKEN> , this . getClass ( ) . <RARE_TOKEN> ( ) . getName ( ) ) ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Test ( timeOut = <RARE_TOKEN> , enabled = true ) </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> logger . info ( <RARE_TOKEN> running <RARE_TOKEN> <RARE_TOKEN> , getClass ( ) . getSimpleName ( ) ) ; </a> 
<a> AsyncHttpClient c = new AsyncHttpClient ( ) ; </a> 
<a> urlTarget = <RARE_TOKEN> + port + <RARE_TOKEN> ; </a> 
<a> try { </a> 
<a> long <RARE_TOKEN> = System . currentTimeMillis ( ) ; </a> 
<a> Response r = c . prepareGet ( urlTarget ) . execute ( ) . get ( 10 , TimeUnit . SECONDS ) ; </a> 
<a> assertNotNull ( r ) ; </a> 
<a> assertEquals ( r . <RARE_TOKEN> ( ) , 200 ) ; </a> 
<a> String resume = r . <RARE_TOKEN> ( ) ; </a> 
<a> long current = System . currentTimeMillis ( ) - <RARE_TOKEN> ; </a> 
<a> assertTrue ( current > <RARE_TOKEN> && current < <RARE_TOKEN> ) ; </a> 
<a> } catch ( Exception e ) { </a> 
<a> logger . error ( <RARE_TOKEN> failed" , e ) ; </a> 
<a> fail ( e . getMessage ( ) ) ; </a> 
<a> } </a> 
<a> c . close ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . jersey . <RARE_TOKEN> ; </a> 
<a> import com . <RARE_TOKEN> . http . client . <RARE_TOKEN> ; </a> 
<a> import com . <RARE_TOKEN> . http . client . AsyncHttpClient ; </a> 
<a> import com . <RARE_TOKEN> . http . client . Response ; </a> 
<a> import com . sun . <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import com . sun . <RARE_TOKEN> . http . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import com . sun . <RARE_TOKEN> . http . servlet . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . cache . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . container . <RARE_TOKEN> ; </a> 
<a> import org . testng . <RARE_TOKEN> . Test ; </a> 
<a> import java . util . concurrent . CountDownLatch ; </a> 
<a> import java . util . concurrent . TimeUnit ; </a> 
<a> import static org . testng . Assert . assertEquals ; </a> 
<a> import static org . testng . Assert . assertNotNull ; </a> 
<a> import static org . testng . Assert . fail ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> protected <RARE_TOKEN> ws ; </a> 
<a> protected <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> atmoServlet . <RARE_TOKEN> ( new <RARE_TOKEN> ( atmoServlet . <RARE_TOKEN> ( ) ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ) throws Exception { </a> 
<a> ws = new <RARE_TOKEN> ( port ) ; </a> 
<a> <RARE_TOKEN> = new <RARE_TOKEN> ( ) ; </a> 
<a> ws . <RARE_TOKEN> ( new <RARE_TOKEN> ( ) ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( atmoServlet ) ; </a> 
<a> ws . <RARE_TOKEN> ( <RARE_TOKEN> , new String [ ] { <RARE_TOKEN> } ) ; </a> 
<a> ws . start ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ) throws Exception { </a> 
<a> ws . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Test ( timeOut = <RARE_TOKEN> , enabled = false ) </a> 
<a> public void <RARE_TOKEN> ( ) throws <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> { </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . jersey . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . container . <RARE_TOKEN> ; </a> 
<a> import org . <RARE_TOKEN> . jetty . <RARE_TOKEN> ; </a> 
<a> import org . <RARE_TOKEN> . jetty . <RARE_TOKEN> ; </a> 
<a> import org . <RARE_TOKEN> . jetty . nio . <RARE_TOKEN> ; </a> 
<a> import org . <RARE_TOKEN> . jetty . servlet . Context ; </a> 
<a> import org . <RARE_TOKEN> . jetty . servlet . <RARE_TOKEN> ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ) throws Exception { </a> 
<a> server = new <RARE_TOKEN> ( port ) ; </a> 
<a> <RARE_TOKEN> = new Context ( server , "/" , Context . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( new <RARE_TOKEN> ( atmoServlet ) , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> listener = new <RARE_TOKEN> ( ) ; </a> 
<a> listener . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> listener . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ( ) ) ) ; </a> 
<a> server . <RARE_TOKEN> ( listener ) ; </a> 
<a> server . start ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> atmoServlet . <RARE_TOKEN> ( new <RARE_TOKEN> ( atmoServlet . <RARE_TOKEN> ( ) ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . jersey . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . annotation . Broadcast ; </a> 
<a> import org . atmosphere . annotation . Suspend ; </a> 
<a> import org . atmosphere . cpr . AtmosphereResource ; </a> 
<a> import org . atmosphere . cpr . Broadcaster ; </a> 
<a> import org . atmosphere . cpr . BroadcasterFactory ; </a> 
<a> import org . slf4j . Logger ; </a> 
<a> import org . slf4j . LoggerFactory ; </a> 
<a> import javax . servlet . http . HttpServletRequest ; </a> 
<a> import javax . servlet . http . HttpServletResponse ; </a> 
<a> import javax . ws . rs . FormParam ; </a> 
<a> import javax . ws . rs . GET ; </a> 
<a> import javax . ws . rs . POST ; </a> 
<a> import javax . ws . rs . Path ; </a> 
<a> import javax . ws . rs . Produces ; </a> 
<a> import javax . ws . rs . core . Context ; </a> 
<a> @ Path ( <RARE_TOKEN> ) </a> 
<a> @ Produces ( <RARE_TOKEN> ) </a> 
<a> public class <RARE_TOKEN> { </a> 
<a> private static final Logger logger = LoggerFactory . getLogger ( <RARE_TOKEN> . class ) ; </a> 
<a> @ Context </a> 
<a> Broadcaster broadcaster ; </a> 
<a> @ Context </a> 
<a> BroadcasterFactory <RARE_TOKEN> ; </a> 
<a> @ Context </a> 
<a> AtmosphereResource < HttpServletRequest , HttpServletResponse > resource ; </a> 
<a> @ GET </a> 
<a> @ Suspend ( period = <RARE_TOKEN> , outputComments = false ) </a> 
<a> public String <RARE_TOKEN> ( ) { </a> 
<a> logger . info ( <RARE_TOKEN> {}" , broadcaster ) ; </a> 
<a> logger . info ( <RARE_TOKEN> {}" , <RARE_TOKEN> ) ; </a> 
<a> logger . info ( <RARE_TOKEN> {}" , resource ) ; </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ POST </a> 
<a> @ Broadcast </a> 
<a> public String <RARE_TOKEN> ( @ FormParam ( "message" ) String message ) { </a> 
<a> return message ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . jersey . <RARE_TOKEN> ; </a> 
<a> import com . <RARE_TOKEN> . http . client . AsyncHttpClient ; </a> 
<a> import com . <RARE_TOKEN> . http . client . Response ; </a> 
<a> import org . testng . <RARE_TOKEN> . Test ; </a> 
<a> import java . util . concurrent . TimeUnit ; </a> 
<a> import static org . testng . Assert . assertEquals ; </a> 
<a> import static org . testng . Assert . assertNotNull ; </a> 
<a> import static org . testng . Assert . assertTrue ; </a> 
<a> import static org . testng . Assert . fail ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> String <RARE_TOKEN> ( int port ) { </a> 
<a> return <RARE_TOKEN> + port + <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Test ( timeOut = <RARE_TOKEN> , enabled = true ) </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> logger . info ( <RARE_TOKEN> running <RARE_TOKEN> <RARE_TOKEN> , getClass ( ) . getSimpleName ( ) ) ; </a> 
<a> AsyncHttpClient c = new AsyncHttpClient ( ) ; </a> 
<a> try { </a> 
<a> long <RARE_TOKEN> = System . currentTimeMillis ( ) ; </a> 
<a> Response r = c . prepareGet ( urlTarget ) . execute ( ) . get ( 10 , TimeUnit . SECONDS ) ; </a> 
<a> assertNotNull ( r ) ; </a> 
<a> assertEquals ( r . <RARE_TOKEN> ( ) , 200 ) ; </a> 
<a> String resume = r . <RARE_TOKEN> ( ) ; </a> 
<a> assertEquals ( resume , <RARE_TOKEN> ) ; </a> 
<a> long current = System . currentTimeMillis ( ) - <RARE_TOKEN> ; </a> 
<a> assertTrue ( current > <RARE_TOKEN> && current < <RARE_TOKEN> ) ; </a> 
<a> } catch ( Exception e ) { </a> 
<a> logger . error ( <RARE_TOKEN> failed" , e ) ; </a> 
<a> fail ( e . getMessage ( ) ) ; </a> 
<a> } </a> 
<a> c . close ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . jersey . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . annotation . Broadcast ; </a> 
<a> import org . atmosphere . annotation . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . annotation . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . annotation . Suspend ; </a> 
<a> import org . atmosphere . cpr . Broadcaster ; </a> 
<a> import org . atmosphere . cpr . BroadcasterFactory ; </a> 
<a> import org . atmosphere . jersey . Broadcastable ; </a> 
<a> import org . atmosphere . jersey . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . util . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . util . <RARE_TOKEN> ; </a> 
<a> import javax . ws . rs . FormParam ; </a> 
<a> import javax . ws . rs . GET ; </a> 
<a> import javax . ws . rs . POST ; </a> 
<a> import javax . ws . rs . Path ; </a> 
<a> import javax . ws . rs . <RARE_TOKEN> ; </a> 
<a> import javax . ws . rs . Produces ; </a> 
<a> import java . util . concurrent . <RARE_TOKEN> ; </a> 
<a> import java . util . concurrent . <RARE_TOKEN> ; </a> 
<a> @ Path ( <RARE_TOKEN> ) </a> 
<a> @ Produces ( <RARE_TOKEN> ) </a> 
<a> public class <RARE_TOKEN> { </a> 
<a> private </a> 
<a> @ <RARE_TOKEN> ( <RARE_TOKEN> ) </a> 
<a> Broadcaster broadcaster ; </a> 
<a> private final static int count = 0 ; </a> 
<a> @ GET </a> 
<a> @ Path ( <RARE_TOKEN> ) </a> 
<a> @ Suspend ( period = <RARE_TOKEN> , outputComments = false , scope = Suspend . SCOPE . <RARE_TOKEN> , resumeOnBroadcast = true ) </a> 
<a> public Broadcastable <RARE_TOKEN> ( @ <RARE_TOKEN> ( <RARE_TOKEN> ) Broadcaster b ) throws <RARE_TOKEN> , InterruptedException { </a> 
<a> b . broadcast ( "foo" ) . get ( ) ; </a> 
<a> return new Broadcastable ( <RARE_TOKEN> , b ) ; </a> 
<a> } </a> 
<a> @ GET </a> 
<a> @ Suspend ( period = <RARE_TOKEN> , outputComments = false ) </a> 
<a> public Broadcastable <RARE_TOKEN> ( ) { </a> 
<a> return new Broadcastable ( <RARE_TOKEN> , broadcaster ) ; </a> 
<a> } </a> 
<a> @ GET </a> 
<a> @ Path ( <RARE_TOKEN> ) </a> 
<a> @ Suspend ( period = <RARE_TOKEN> , outputComments = true ) </a> 
<a> public Broadcastable <RARE_TOKEN> ( ) { </a> 
<a> return new Broadcastable ( broadcaster ) ; </a> 
<a> } </a> 
<a> @ GET </a> 
<a> @ Path ( <RARE_TOKEN> ) </a> 
<a> @ Suspend ( outputComments = true ) </a> 
<a> public Broadcastable <RARE_TOKEN> ( ) { </a> 
<a> return new Broadcastable ( broadcaster ) ; </a> 
<a> } </a> 
<a> @ GET </a> 
<a> @ Path ( <RARE_TOKEN> ) </a> 
<a> @ Suspend ( outputComments = false ) </a> 
<a> public Broadcastable <RARE_TOKEN> ( ) { </a> 
<a> return new Broadcastable ( broadcaster ) ; </a> 
<a> } </a> 
<a> @ GET </a> 
<a> @ Path ( <RARE_TOKEN> ) </a> 
<a> @ Suspend ( resumeOnBroadcast = true ) </a> 
<a> public String <RARE_TOKEN> ( final @ <RARE_TOKEN> ( <RARE_TOKEN> ) String topic ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( new Runnable ( ) { </a> 
<a> public void run ( ) { </a> 
<a> try { </a> 
<a> Thread . sleep ( <RARE_TOKEN> ) ; </a> 
<a> } catch ( InterruptedException e ) { </a> 
<a> } </a> 
<a> BroadcasterFactory . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( <RARE_TOKEN> . class , topic ) . broadcast ( <RARE_TOKEN> " + topic ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> return "foo" ; </a> 
<a> } </a> 
<a> @ GET </a> 
<a> @ Path ( <RARE_TOKEN> ) </a> 
<a> @ Suspend ( outputComments = false ) </a> 
<a> public String suspend ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ GET </a> 
<a> @ Suspend ( resumeOnBroadcast = true , outputComments = false ) </a> 
<a> @ Path ( <RARE_TOKEN> ) </a> 
<a> public Broadcastable <RARE_TOKEN> ( ) { </a> 
<a> return new Broadcastable ( broadcaster ) ; </a> 
<a> } </a> 
<a> @ GET </a> 
<a> @ <RARE_TOKEN> </a> 
<a> @ Path ( <RARE_TOKEN> ) </a> 
<a> public String resume ( ) throws <RARE_TOKEN> , InterruptedException { </a> 
<a> broadcaster . broadcast ( <RARE_TOKEN> ) . get ( ) ; </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ POST </a> 
<a> @ Broadcast </a> 
<a> public Broadcastable <RARE_TOKEN> ( @ FormParam ( "message" ) String message ) { </a> 
<a> return broadcast ( message ) ; </a> 
<a> } </a> 
<a> @ POST </a> 
<a> @ Path ( <RARE_TOKEN> ) </a> 
<a> @ Broadcast ( resumeOnBroadcast = true ) </a> 
<a> public Broadcastable <RARE_TOKEN> ( @ FormParam ( "message" ) String message ) { </a> 
<a> return broadcast ( message ) ; </a> 
<a> } </a> 
<a> @ POST </a> 
<a> @ Path ( <RARE_TOKEN> ) </a> 
<a> @ Broadcast ( resumeOnBroadcast = true , value = { <RARE_TOKEN> . class } ) </a> 
<a> public Broadcastable filter ( @ FormParam ( "message" ) String message ) { </a> 
<a> return broadcast ( message ) ; </a> 
<a> } </a> 
<a> @ POST </a> 
<a> @ Path ( <RARE_TOKEN> ) </a> 
<a> @ Broadcast ( resumeOnBroadcast = true , value = { <RARE_TOKEN> . class } ) </a> 
<a> public Broadcastable <RARE_TOKEN> ( @ FormParam ( "message" ) String message ) { </a> 
<a> return broadcast ( message ) ; </a> 
<a> } </a> 
<a> @ <RARE_TOKEN> ( period = 5 , resumeOnBroadcast = true , <RARE_TOKEN> = 5 ) </a> 
<a> @ POST </a> 
<a> @ Path ( <RARE_TOKEN> ) </a> 
<a> public Broadcastable <RARE_TOKEN> ( @ FormParam ( "message" ) String message ) { </a> 
<a> return broadcast ( message ) ; </a> 
<a> } </a> 
<a> @ <RARE_TOKEN> ( period = 10 , <RARE_TOKEN> = 5 ) </a> 
<a> @ POST </a> 
<a> @ Path ( <RARE_TOKEN> ) </a> 
<a> public Broadcastable <RARE_TOKEN> ( @ FormParam ( "message" ) String message ) { </a> 
<a> return broadcast ( message ) ; </a> 
<a> } </a> 
<a> @ <RARE_TOKEN> ( period = 5 ) </a> 
<a> @ POST </a> 
<a> @ Path ( <RARE_TOKEN> ) </a> 
<a> public Broadcastable schedule ( @ FormParam ( "message" ) String message ) { </a> 
<a> return broadcast ( message ) ; </a> 
<a> } </a> 
<a> @ Broadcast ( delay = 0 ) </a> 
<a> @ POST </a> 
<a> @ Path ( <RARE_TOKEN> ) </a> 
<a> public Broadcastable <RARE_TOKEN> ( @ FormParam ( "message" ) String message ) { </a> 
<a> return broadcast ( message ) ; </a> 
<a> } </a> 
<a> @ Broadcast ( delay = 5 , resumeOnBroadcast = true ) </a> 
<a> @ POST </a> 
<a> @ Path ( <RARE_TOKEN> ) </a> 
<a> public Broadcastable <RARE_TOKEN> ( @ FormParam ( "message" ) String message ) { </a> 
<a> return broadcast ( message ) ; </a> 
<a> } </a> 
<a> @ POST </a> 
<a> @ Path ( <RARE_TOKEN> ) </a> 
<a> public String <RARE_TOKEN> ( @ FormParam ( "message" ) String message ) { </a> 
<a> broadcaster . <RARE_TOKEN> ( message ) ; </a> 
<a> return message ; </a> 
<a> } </a> 
<a> Broadcastable broadcast ( String m ) { </a> 
<a> return new Broadcastable ( m + <RARE_TOKEN> , broadcaster ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . jersey . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . cpr . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . jersey . <RARE_TOKEN> ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> public <RARE_TOKEN> ( ) { </a> 
<a> super ( ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( String name ) { </a> 
<a> super ( name ) ; </a> 
<a> } </a> 
<a> public void destroy ( ) { </a> 
<a> <RARE_TOKEN> = new <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> ( SCOPE . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . jersey . <RARE_TOKEN> ; </a> 
<a> import com . <RARE_TOKEN> . http . client . AsyncHttpClient ; </a> 
<a> import com . <RARE_TOKEN> . http . client . Response ; </a> 
<a> import org . testng . <RARE_TOKEN> . Test ; </a> 
<a> import java . util . concurrent . TimeUnit ; </a> 
<a> import static org . testng . Assert . assertEquals ; </a> 
<a> import static org . testng . Assert . assertNotNull ; </a> 
<a> import static org . testng . Assert . assertTrue ; </a> 
<a> import static org . testng . Assert . fail ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> String <RARE_TOKEN> ( int port ) { </a> 
<a> return <RARE_TOKEN> + port + <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Test ( timeOut = <RARE_TOKEN> , enabled = true ) </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> logger . info ( <RARE_TOKEN> running <RARE_TOKEN> <RARE_TOKEN> , getClass ( ) . getSimpleName ( ) ) ; </a> 
<a> AsyncHttpClient c = new AsyncHttpClient ( ) ; </a> 
<a> try { </a> 
<a> long <RARE_TOKEN> = System . currentTimeMillis ( ) ; </a> 
<a> Response r = c . prepareGet ( urlTarget ) . execute ( ) . get ( 10 , TimeUnit . SECONDS ) ; </a> 
<a> assertNotNull ( r ) ; </a> 
<a> assertEquals ( r . <RARE_TOKEN> ( ) , 200 ) ; </a> 
<a> String resume = r . <RARE_TOKEN> ( ) ; </a> 
<a> assertEquals ( resume , <RARE_TOKEN> ) ; </a> 
<a> long current = System . currentTimeMillis ( ) - <RARE_TOKEN> ; </a> 
<a> assertTrue ( current > <RARE_TOKEN> && current < <RARE_TOKEN> ) ; </a> 
<a> } catch ( Exception e ) { </a> 
<a> logger . error ( <RARE_TOKEN> failed" , e ) ; </a> 
<a> fail ( e . getMessage ( ) ) ; </a> 
<a> } </a> 
<a> c . close ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . jersey . <RARE_TOKEN> ; </a> 
<a> import org . apache . <RARE_TOKEN> . Context ; </a> 
<a> import org . apache . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import org . apache . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import org . apache . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import org . apache . <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import org . apache . <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import org . apache . <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . container . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . cpr . ApplicationConfig ; </a> 
<a> import org . atmosphere . cpr . AtmosphereServlet ; </a> 
<a> import org . atmosphere . cpr . <RARE_TOKEN> ; </a> 
<a> import org . testng . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import javax . servlet . ServletConfig ; </a> 
<a> import javax . servlet . ServletException ; </a> 
<a> import java . io . File ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> protected <RARE_TOKEN> embedded ; </a> 
<a> public static class <RARE_TOKEN> extends AtmosphereServlet { </a> 
<a> public void init ( final ServletConfig sc ) throws ServletException { </a> 
<a> <RARE_TOKEN> ( ApplicationConfig . <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> , this . getClass ( ) . <RARE_TOKEN> ( ) . getName ( ) ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> . class . getName ( ) ) ; </a> 
<a> cometSupport = new <RARE_TOKEN> ( <RARE_TOKEN> ( ) ) ; </a> 
<a> super . init ( sc ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ <RARE_TOKEN> ( <RARE_TOKEN> = true ) </a> 
<a> public void <RARE_TOKEN> ( ) throws Exception { </a> 
<a> System . setProperty ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> port = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ( ) ) ; </a> 
<a> urlTarget = <RARE_TOKEN> + port + <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ) throws Exception { </a> 
<a> embedded = new <RARE_TOKEN> ( ) ; </a> 
<a> String path = new File ( <RARE_TOKEN> ) . <RARE_TOKEN> ( ) ; </a> 
<a> embedded . <RARE_TOKEN> ( path ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = embedded . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> host = embedded . <RARE_TOKEN> ( <RARE_TOKEN> , path ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( host ) ; </a> 
<a> Context c = embedded . <RARE_TOKEN> ( "/" , path ) ; </a> 
<a> c . <RARE_TOKEN> ( false ) ; </a> 
<a> <RARE_TOKEN> w = c . <RARE_TOKEN> ( ) ; </a> 
<a> w . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> w . <RARE_TOKEN> ( <RARE_TOKEN> . class . getName ( ) ) ; </a> 
<a> w . <RARE_TOKEN> ( 0 ) ; </a> 
<a> c . <RARE_TOKEN> ( w ) ; </a> 
<a> host . <RARE_TOKEN> ( c ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = embedded . <RARE_TOKEN> ( <RARE_TOKEN> , port , <RARE_TOKEN> . class . getName ( ) ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( host ) ; </a> 
<a> embedded . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> embedded . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> embedded . start ( ) ; </a> 
<a> atmoServlet = ( AtmosphereServlet ) w . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ) throws Exception { </a> 
<a> if ( atmoServlet != null ) atmoServlet . destroy ( ) ; </a> 
<a> embedded . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . jersey . <RARE_TOKEN> . samples . <RARE_TOKEN> . atmosphere ; </a> 
<a> import org . atmosphere . annotation . Suspend ; </a> 
<a> import org . atmosphere . cpr . Broadcaster ; </a> 
<a> import org . atmosphere . cpr . BroadcasterFactory ; </a> 
<a> import org . atmosphere . jersey . Broadcastable ; </a> 
<a> import org . atmosphere . jersey . <RARE_TOKEN> ; </a> 
<a> import org . slf4j . Logger ; </a> 
<a> import org . slf4j . LoggerFactory ; </a> 
<a> import javax . annotation . <RARE_TOKEN> ; </a> 
<a> import javax . annotation . <RARE_TOKEN> ; </a> 
<a> import javax . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import javax . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import javax . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import javax . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import javax . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import javax . ws . rs . GET ; </a> 
<a> import javax . ws . rs . POST ; </a> 
<a> import javax . ws . rs . Path ; </a> 
<a> import javax . ws . rs . core . Context ; </a> 
<a> import java . util . Date ; </a> 
<a> import java . util . concurrent . <RARE_TOKEN> ; </a> 
<a> @ Path ( <RARE_TOKEN> ) </a> 
<a> @ <RARE_TOKEN> </a> 
<a> public class <RARE_TOKEN> { </a> 
<a> private static final Logger logger = LoggerFactory . getLogger ( <RARE_TOKEN> . class ) ; </a> 
<a> private </a> 
<a> @ <RARE_TOKEN> </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> private </a> 
<a> @ Context </a> 
<a> BroadcasterFactory <RARE_TOKEN> ; </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( 1 ) ; </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( 1 ) ; </a> 
<a> private Broadcaster <RARE_TOKEN> ; </a> 
<a> private <RARE_TOKEN> t ; </a> 
<a> private </a> 
<a> @ <RARE_TOKEN> </a> 
<a> void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> private Broadcaster <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> . class , <RARE_TOKEN> , true ) ; </a> 
<a> } </a> 
<a> @ Suspend </a> 
<a> @ GET </a> 
<a> public Broadcastable get ( ) { </a> 
<a> return new Broadcastable ( <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> @ Path ( <RARE_TOKEN> ) </a> 
<a> @ POST </a> 
<a> public void start ( ) { </a> 
<a> if ( <RARE_TOKEN> . <RARE_TOKEN> ( ) ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ( ) ; </a> 
<a> t = <RARE_TOKEN> . <RARE_TOKEN> ( 1000 , 1000 , new <RARE_TOKEN> ( <RARE_TOKEN> , false ) ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ <RARE_TOKEN> </a> 
<a> public void timeout ( <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> logger . info ( <RARE_TOKEN> {}" , getClass ( ) . getName ( ) , new Date ( ) ) ; </a> 
<a> <RARE_TOKEN> . broadcast ( new Date ( ) . toString ( ) + <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Path ( <RARE_TOKEN> ) </a> 
<a> @ POST </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> if ( <RARE_TOKEN> . <RARE_TOKEN> ( ) ) { </a> 
<a> t . cancel ( ) ; </a> 
<a> <RARE_TOKEN> = null ; </a> 
<a> t = null ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Path ( <RARE_TOKEN> ) </a> 
<a> @ POST </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . samples . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . annotation . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . annotation . <RARE_TOKEN> ; </a> 
<a> import javax . ws . rs . FormParam ; </a> 
<a> import javax . ws . rs . GET ; </a> 
<a> import javax . ws . rs . POST ; </a> 
<a> import javax . ws . rs . Path ; </a> 
<a> import javax . ws . rs . Produces ; </a> 
<a> @ Path ( "/" ) </a> 
<a> @ Produces ( <RARE_TOKEN> ) </a> 
<a> public class <RARE_TOKEN> { </a> 
<a> @ GET </a> 
<a> @ <RARE_TOKEN> ( <RARE_TOKEN> ) </a> 
<a> public String <RARE_TOKEN> ( ) { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> @ POST </a> 
<a> @ <RARE_TOKEN> ( <RARE_TOKEN> ) </a> 
<a> public String <RARE_TOKEN> ( @ FormParam ( "message" ) String message ) { </a> 
<a> return message ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . commons . jersey ; </a> 
<a> import org . atmosphere . annotation . Broadcast ; </a> 
<a> import org . atmosphere . annotation . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . annotation . Suspend ; </a> 
<a> import org . atmosphere . util . <RARE_TOKEN> ; </a> 
<a> import javax . ws . rs . <RARE_TOKEN> ; </a> 
<a> import javax . ws . rs . GET ; </a> 
<a> import javax . ws . rs . POST ; </a> 
<a> import javax . ws . rs . Path ; </a> 
<a> import javax . ws . rs . Produces ; </a> 
<a> import javax . ws . rs . <RARE_TOKEN> ; </a> 
<a> import javax . ws . rs . core . <RARE_TOKEN> ; </a> 
<a> @ Path ( <RARE_TOKEN> ) </a> 
<a> @ Produces ( <RARE_TOKEN> ) </a> 
<a> public class <RARE_TOKEN> { </a> 
<a> @ Suspend </a> 
<a> @ GET </a> 
<a> public String suspend ( ) { </a> 
<a> return "" ; </a> 
<a> } </a> 
<a> @ Broadcast ( { <RARE_TOKEN> . class , <RARE_TOKEN> . class } ) </a> 
<a> @ <RARE_TOKEN> ( <RARE_TOKEN> ) </a> 
<a> @ POST </a> 
<a> public String <RARE_TOKEN> ( <RARE_TOKEN> < String , String > <RARE_TOKEN> ) { </a> 
<a> String action = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> String name = <RARE_TOKEN> . <RARE_TOKEN> ( "name" ) ; </a> 
<a> if ( <RARE_TOKEN> . equals ( action ) ) { </a> 
<a> return ( <RARE_TOKEN> <RARE_TOKEN> + <RARE_TOKEN> + name + " has <RARE_TOKEN> ) ; </a> 
<a> } else if ( <RARE_TOKEN> . equals ( action ) ) { </a> 
<a> return name + <RARE_TOKEN> + <RARE_TOKEN> . <RARE_TOKEN> ( "message" ) ; </a> 
<a> } else { </a> 
<a> throw new <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ <RARE_TOKEN> ( period = <RARE_TOKEN> ) </a> 
<a> @ POST </a> 
<a> @ Path ( <RARE_TOKEN> ) </a> 
<a> public String <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . samples . <RARE_TOKEN> ; </a> 
<a> import com . google . inject . <RARE_TOKEN> ; </a> 
<a> import com . google . inject . <RARE_TOKEN> ; </a> 
<a> import com . google . inject . servlet . <RARE_TOKEN> ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> @ Override </a> 
<a> protected <RARE_TOKEN> <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> . <RARE_TOKEN> ( new <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . samples . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . cpr . AtmosphereHandler ; </a> 
<a> import org . atmosphere . cpr . AtmosphereResource ; </a> 
<a> import org . atmosphere . cpr . AtmosphereResourceEvent ; </a> 
<a> import org . atmosphere . cpr . AtmosphereServlet ; </a> 
<a> import org . atmosphere . cpr . Broadcaster ; </a> 
<a> import org . atmosphere . <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . util . <RARE_TOKEN> ; </a> 
<a> import org . slf4j . Logger ; </a> 
<a> import org . slf4j . LoggerFactory ; </a> 
<a> import javax . servlet . http . HttpServletRequest ; </a> 
<a> import javax . servlet . http . HttpServletResponse ; </a> 
<a> import java . io . IOException ; </a> 
<a> import java . util . concurrent . <RARE_TOKEN> ; </a> 
<a> import java . util . concurrent . Future ; </a> 
<a> import java . util . concurrent . TimeUnit ; </a> 
<a> import java . util . concurrent . atomic . AtomicBoolean ; </a> 
<a> public class <RARE_TOKEN> implements AtmosphereHandler < HttpServletRequest , HttpServletResponse > { </a> 
<a> private static final Logger logger = LoggerFactory . getLogger ( <RARE_TOKEN> . class ) ; </a> 
<a> private final static String <RARE_TOKEN> = <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> private final static String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private final static long serialVersionUID = - <RARE_TOKEN> ; </a> 
<a> private final static String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private AtomicBoolean <RARE_TOKEN> = new AtomicBoolean ( false ) ; </a> 
<a> public <RARE_TOKEN> ( ) { </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( AtmosphereResource < HttpServletRequest , </a> 
<a> HttpServletResponse > event ) throws IOException { </a> 
<a> HttpServletRequest req = event . getRequest ( ) ; </a> 
<a> HttpServletResponse res = event . getResponse ( ) ; </a> 
<a> res . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> if ( req . <RARE_TOKEN> ( ) . equalsIgnoreCase ( <RARE_TOKEN> ) ) { </a> 
<a> event . suspend ( ) ; </a> 
<a> Broadcaster bc = event . getBroadcaster ( ) ; </a> 
<a> String <RARE_TOKEN> = event . <RARE_TOKEN> ( ) . getInitParameter ( <RARE_TOKEN> ) ; </a> 
<a> if ( ! <RARE_TOKEN> . <RARE_TOKEN> ( true ) && <RARE_TOKEN> != null ) { </a> 
<a> if ( <RARE_TOKEN> . equals ( <RARE_TOKEN> ) ) { </a> 
<a> event . <RARE_TOKEN> ( ) . getServletContext ( ) . log ( <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> bc . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( </a> 
<a> new <RARE_TOKEN> ( bc ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> bc . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( new <RARE_TOKEN> ( ) ) ; </a> 
<a> Future < String > f = bc . broadcast ( event . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( ) </a> 
<a> + <RARE_TOKEN> suspended a connection from " </a> 
<a> + req . <RARE_TOKEN> ( ) ) ; </a> 
<a> try { </a> 
<a> f . get ( ) ; </a> 
<a> } catch ( InterruptedException ex ) { </a> 
<a> logger . error ( "" , ex ) ; </a> 
<a> } catch ( <RARE_TOKEN> ex ) { </a> 
<a> logger . error ( "" , ex ) ; </a> 
<a> } </a> 
<a> bc . <RARE_TOKEN> ( req . <RARE_TOKEN> ( ) + <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> , <RARE_TOKEN> , TimeUnit . SECONDS ) ; </a> 
<a> bc . <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } else if ( req . <RARE_TOKEN> ( ) . equalsIgnoreCase ( <RARE_TOKEN> ) ) { </a> 
<a> String action = req . <RARE_TOKEN> ( <RARE_TOKEN> ) [ 0 ] ; </a> 
<a> String name = req . <RARE_TOKEN> ( "name" ) [ 0 ] ; </a> 
<a> if ( <RARE_TOKEN> . equals ( action ) ) { </a> 
<a> req . getSession ( ) . setAttribute ( "name" , name ) ; </a> 
<a> event . getBroadcaster ( ) . broadcast ( <RARE_TOKEN> <RARE_TOKEN> from " </a> 
<a> + event . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( ) + <RARE_TOKEN> + name + " has <RARE_TOKEN> ) ; </a> 
<a> } else if ( <RARE_TOKEN> . equals ( action ) ) { </a> 
<a> String message = req . <RARE_TOKEN> ( "message" ) [ 0 ] ; </a> 
<a> event . getBroadcaster ( ) . broadcast ( name + <RARE_TOKEN> + message ) ; </a> 
<a> } else { </a> 
<a> res . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> res . <RARE_TOKEN> ( ) . write ( <RARE_TOKEN> ) ; </a> 
<a> res . <RARE_TOKEN> ( ) . flush ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( AtmosphereResourceEvent < HttpServletRequest , </a> 
<a> HttpServletResponse > event ) throws IOException { </a> 
<a> HttpServletRequest req = event . getResource ( ) . getRequest ( ) ; </a> 
<a> HttpServletResponse res = event . getResource ( ) . getResponse ( ) ; </a> 
<a> if ( event . getMessage ( ) == null ) return ; </a> 
<a> String e = event . getMessage ( ) . toString ( ) ; </a> 
<a> String name = e ; </a> 
<a> String message = "" ; </a> 
<a> if ( e . indexOf ( <RARE_TOKEN> ) > 0 ) { </a> 
<a> name = e . substring ( 0 , e . indexOf ( <RARE_TOKEN> ) ) ; </a> 
<a> message = e . substring ( e . indexOf ( <RARE_TOKEN> ) + 2 ) ; </a> 
<a> } </a> 
<a> String msg = <RARE_TOKEN> + <RARE_TOKEN> ( name , message ) + <RARE_TOKEN> ; </a> 
<a> if ( event . isCancelled ( ) ) { </a> 
<a> event . getResource ( ) . getBroadcaster ( ) </a> 
<a> . broadcast ( req . getSession ( ) . getAttribute ( "name" ) + " has <RARE_TOKEN> ) ; </a> 
<a> } else if ( event . <RARE_TOKEN> ( ) || event . <RARE_TOKEN> ( ) ) { </a> 
<a> String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> res . <RARE_TOKEN> ( ) . write ( <RARE_TOKEN> ) ; </a> 
<a> } else { </a> 
<a> res . <RARE_TOKEN> ( ) . write ( msg ) ; </a> 
<a> } </a> 
<a> res . <RARE_TOKEN> ( ) . flush ( ) ; </a> 
<a> } </a> 
<a> private String <RARE_TOKEN> ( String name , String message ) { </a> 
<a> return <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> + name + <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> </a> 
<a> + message + <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public void destroy ( ) { </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . commons . jersey ; </a> 
<a> import org . atmosphere . cpr . <RARE_TOKEN> ; </a> 
<a> public class <RARE_TOKEN> implements <RARE_TOKEN> { </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> public BroadcastAction filter ( Object <RARE_TOKEN> , Object o ) { </a> 
<a> if ( o instanceof String ) { </a> 
<a> String m = ( String ) o ; </a> 
<a> String name = m ; </a> 
<a> String message = "" ; </a> 
<a> if ( m . indexOf ( <RARE_TOKEN> ) > 0 ) { </a> 
<a> name = m . substring ( 0 , m . indexOf ( <RARE_TOKEN> ) ) ; </a> 
<a> message = m . substring ( m . indexOf ( <RARE_TOKEN> ) + 2 ) ; </a> 
<a> } </a> 
<a> return new BroadcastAction ( <RARE_TOKEN> + <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> </a> 
<a> + name + <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> + message + <RARE_TOKEN> <RARE_TOKEN> + <RARE_TOKEN> ) ; </a> 
<a> } else { </a> 
<a> return new BroadcastAction ( o ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . samples . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . cpr . AtmosphereHandler ; </a> 
<a> import org . atmosphere . cpr . AtmosphereResource ; </a> 
<a> import org . atmosphere . cpr . AtmosphereResourceEvent ; </a> 
<a> import javax . servlet . http . HttpServletRequest ; </a> 
<a> import javax . servlet . http . HttpServletResponse ; </a> 
<a> import java . io . IOException ; </a> 
<a> import java . io . <RARE_TOKEN> ; </a> 
<a> import java . util . concurrent . atomic . AtomicInteger ; </a> 
<a> public class <RARE_TOKEN> implements AtmosphereHandler < HttpServletRequest , HttpServletResponse > { </a> 
<a> private final AtomicInteger <RARE_TOKEN> = new AtomicInteger ( 0 ) ; </a> 
<a> public void <RARE_TOKEN> ( AtmosphereResource < HttpServletRequest , HttpServletResponse > resource ) throws IOException { </a> 
<a> HttpServletRequest req = resource . getRequest ( ) ; </a> 
<a> if ( req . <RARE_TOKEN> ( ) . equals ( <RARE_TOKEN> ) ) { </a> 
<a> resource . suspend ( - 1 , false ) ; </a> 
<a> } else { </a> 
<a> if ( req . <RARE_TOKEN> ( <RARE_TOKEN> ) . equalsIgnoreCase ( <RARE_TOKEN> ) ) { </a> 
<a> resource . getBroadcaster ( ) . broadcast ( "" ) ; </a> 
<a> } else if ( req . <RARE_TOKEN> ( <RARE_TOKEN> ) != null ) { </a> 
<a> Integer i = Integer . valueOf ( req . <RARE_TOKEN> ( <RARE_TOKEN> ) ) ; </a> 
<a> if ( i > <RARE_TOKEN> . get ( ) ) { </a> 
<a> <RARE_TOKEN> . set ( i ) ; </a> 
<a> } </a> 
<a> resource . getBroadcaster ( ) . broadcast ( i > <RARE_TOKEN> . get ( ) ? i : <RARE_TOKEN> . get ( ) ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> writer = resource . getResponse ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> writer . write ( <RARE_TOKEN> ) ; </a> 
<a> writer . flush ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( AtmosphereResourceEvent < HttpServletRequest , </a> 
<a> HttpServletResponse > event ) throws IOException { </a> 
<a> if ( event . isCancelled ( ) ) { </a> 
<a> return ; </a> 
<a> } </a> 
<a> int count = 0 ; </a> 
<a> if ( event . getMessage ( ) instanceof Integer ) { </a> 
<a> count = ( ( Integer ) event . getMessage ( ) ) . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> try { </a> 
<a> event . getResource ( ) . getResponse ( ) . addHeader ( <RARE_TOKEN> , <RARE_TOKEN> + count + " <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> writer = event . getResource ( ) . getResponse ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> writer . write ( <RARE_TOKEN> ) ; </a> 
<a> writer . flush ( ) ; </a> 
<a> } finally { </a> 
<a> if ( ! event . <RARE_TOKEN> ( ) ) { </a> 
<a> event . getResource ( ) . resume ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> public void destroy ( ) { </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . samples . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import com . google . inject . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . cpr . AtmosphereResourceEvent ; </a> 
<a> import org . atmosphere . cpr . AtmosphereResourceEventListener ; </a> 
<a> import org . slf4j . Logger ; </a> 
<a> import org . slf4j . LoggerFactory ; </a> 
<a> import javax . servlet . http . HttpServletRequest ; </a> 
<a> import javax . servlet . http . HttpServletResponse ; </a> 
<a> public class <RARE_TOKEN> implements AtmosphereResourceEventListener { </a> 
<a> private static final Logger logger = LoggerFactory . getLogger ( <RARE_TOKEN> . class ) ; </a> 
<a> @ <RARE_TOKEN> </a> 
<a> private <RARE_TOKEN> service ; </a> 
<a> public void <RARE_TOKEN> ( final AtmosphereResourceEvent < HttpServletRequest , HttpServletResponse > event ) { </a> 
<a> if ( service == null ) { </a> 
<a> throw new <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> logger . info ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> , </a> 
<a> new Object [ ] { Thread . currentThread ( ) . getName ( ) , event . getResource ( ) . getRequest ( ) . <RARE_TOKEN> ( ) , </a> 
<a> event . getResource ( ) . getRequest ( ) . <RARE_TOKEN> ( ) } ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( AtmosphereResourceEvent < HttpServletRequest , HttpServletResponse > event ) { </a> 
<a> if ( service == null ) { </a> 
<a> throw new <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> logger . info ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> , </a> 
<a> new Object [ ] { Thread . currentThread ( ) . getName ( ) , event . getResource ( ) . getRequest ( ) . <RARE_TOKEN> ( ) , </a> 
<a> event . getResource ( ) . getRequest ( ) . <RARE_TOKEN> ( ) } ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( AtmosphereResourceEvent < HttpServletRequest , HttpServletResponse > event ) { </a> 
<a> if ( service == null ) { </a> 
<a> throw new <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> logger . info ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> , </a> 
<a> new Object [ ] { Thread . currentThread ( ) . getName ( ) , event . getResource ( ) . getRequest ( ) . <RARE_TOKEN> ( ) , </a> 
<a> event . getResource ( ) . getRequest ( ) . <RARE_TOKEN> ( ) } ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( AtmosphereResourceEvent < HttpServletRequest , HttpServletResponse > event ) { </a> 
<a> if ( service == null ) { </a> 
<a> throw new <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> logger . info ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> , </a> 
<a> new Object [ ] { Thread . currentThread ( ) . getName ( ) , event . getResource ( ) . getRequest ( ) . <RARE_TOKEN> ( ) , </a> 
<a> event . getResource ( ) . getRequest ( ) . <RARE_TOKEN> ( ) } ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( AtmosphereResourceEvent < HttpServletRequest , HttpServletResponse > event ) { </a> 
<a> if ( service == null ) { </a> 
<a> throw new <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> logger . info ( <RARE_TOKEN> <RARE_TOKEN> " + event . getResource ( ) . getRequest ( ) . <RARE_TOKEN> ( ) + <RARE_TOKEN> + </a> 
<a> event . getResource ( ) . getRequest ( ) . <RARE_TOKEN> ( ) , event . throwable ( ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . samples . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> final class <RARE_TOKEN> { </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> package start ; </a> 
<a> import org . <RARE_TOKEN> . jetty . server . <RARE_TOKEN> ; </a> 
<a> import org . <RARE_TOKEN> . jetty . server . <RARE_TOKEN> ; </a> 
<a> import org . <RARE_TOKEN> . jetty . server . handler . <RARE_TOKEN> ; </a> 
<a> import org . <RARE_TOKEN> . jetty . server . handler . <RARE_TOKEN> ; </a> 
<a> import org . <RARE_TOKEN> . jetty . server . handler . <RARE_TOKEN> ; </a> 
<a> import org . <RARE_TOKEN> . jetty . server . nio . <RARE_TOKEN> ; </a> 
<a> import org . <RARE_TOKEN> . jetty . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> public class <RARE_TOKEN> { </a> 
<a> public static void <RARE_TOKEN> ( String [ ] args ) throws Exception { </a> 
<a> <RARE_TOKEN> server = new <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( 1000 * <RARE_TOKEN> * <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( - 1 ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> server . <RARE_TOKEN> ( new <RARE_TOKEN> [ ] { <RARE_TOKEN> } ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( <RARE_TOKEN> , "/" ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( new <RARE_TOKEN> ( ) ) ; </a> 
<a> server . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> try { </a> 
<a> System . out . println ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> server . start ( ) ; </a> 
<a> System . in . read ( ) ; </a> 
<a> System . out . println ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> server . <RARE_TOKEN> ( ) ; </a> 
<a> server . <RARE_TOKEN> ( ) ; </a> 
<a> } catch ( Exception e ) { </a> 
<a> e . printStackTrace ( ) ; </a> 
<a> System . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . samples . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . cpr . AtmosphereHandler ; </a> 
<a> import org . atmosphere . cpr . AtmosphereResource ; </a> 
<a> import org . atmosphere . cpr . AtmosphereResourceEvent ; </a> 
<a> import org . slf4j . Logger ; </a> 
<a> import org . slf4j . LoggerFactory ; </a> 
<a> import javax . servlet . http . HttpServletRequest ; </a> 
<a> import javax . servlet . http . HttpServletResponse ; </a> 
<a> import java . io . IOException ; </a> 
<a> public class <RARE_TOKEN> implements AtmosphereHandler < HttpServletRequest , HttpServletResponse > { </a> 
<a> private static final Logger logger = LoggerFactory . getLogger ( <RARE_TOKEN> . class ) ; </a> 
<a> private int <RARE_TOKEN> ; </a> 
<a> public void <RARE_TOKEN> ( AtmosphereResource < HttpServletRequest , </a> 
<a> HttpServletResponse > event ) throws IOException { </a> 
<a> HttpServletRequest req = event . getRequest ( ) ; </a> 
<a> HttpServletResponse res = event . getResponse ( ) ; </a> 
<a> logger . info ( <RARE_TOKEN> {}" , req . <RARE_TOKEN> ( ) ) ; </a> 
<a> String [ ] <RARE_TOKEN> = req . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> != null && <RARE_TOKEN> [ 0 ] != null ) { </a> 
<a> String action = req . <RARE_TOKEN> ( <RARE_TOKEN> ) [ 0 ] ; </a> 
<a> if ( <RARE_TOKEN> . equals ( action ) ) { </a> 
<a> String message = req . <RARE_TOKEN> ( "message" ) [ 0 ] ; </a> 
<a> String callback = req . <RARE_TOKEN> ( <RARE_TOKEN> ) [ 0 ] ; </a> 
<a> if ( callback == null ) { </a> 
<a> callback = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> event . getBroadcaster ( ) . broadcast ( <RARE_TOKEN> <RARE_TOKEN> + <RARE_TOKEN> ++ + <RARE_TOKEN> </a> 
<a> + <RARE_TOKEN> </a> 
<a> + callback + <RARE_TOKEN> + message + <RARE_TOKEN> ) ; </a> 
<a> res . <RARE_TOKEN> ( ) . write ( <RARE_TOKEN> ) ; </a> 
<a> res . <RARE_TOKEN> ( ) . flush ( ) ; </a> 
<a> } else if ( <RARE_TOKEN> . equals ( action ) ) { </a> 
<a> res . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> res . addHeader ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> res . addHeader ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> String callback = req . <RARE_TOKEN> ( <RARE_TOKEN> ) [ 0 ] ; </a> 
<a> if ( callback == null ) { </a> 
<a> callback = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> event . suspend ( ) ; </a> 
<a> String message = <RARE_TOKEN> message : <RARE_TOKEN> ; </a> 
<a> res . <RARE_TOKEN> ( ) . write ( <RARE_TOKEN> <RARE_TOKEN> + <RARE_TOKEN> ++ + <RARE_TOKEN> </a> 
<a> + <RARE_TOKEN> </a> 
<a> + callback + <RARE_TOKEN> + message + <RARE_TOKEN> ) ; </a> 
<a> res . <RARE_TOKEN> ( ) . write ( <RARE_TOKEN> <RARE_TOKEN> " + </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> res . <RARE_TOKEN> ( ) . flush ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( AtmosphereResourceEvent < HttpServletRequest , </a> 
<a> HttpServletResponse > event ) throws IOException { </a> 
<a> HttpServletResponse res = event . getResource ( ) . getResponse ( ) ; </a> 
<a> if ( event . <RARE_TOKEN> ( ) ) { </a> 
<a> res . <RARE_TOKEN> ( ) . write ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> res . <RARE_TOKEN> ( ) . write ( <RARE_TOKEN> ) ; </a> 
<a> } else { </a> 
<a> res . <RARE_TOKEN> ( ) . write ( event . getMessage ( ) . toString ( ) ) ; </a> 
<a> } </a> 
<a> res . <RARE_TOKEN> ( ) . flush ( ) ; </a> 
<a> } </a> 
<a> public void destroy ( ) { </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . samples . client ; </a> 
<a> import java . io . Serializable ; </a> 
<a> public class <RARE_TOKEN> implements Serializable { </a> 
<a> private long code ; </a> 
<a> private String data ; </a> 
<a> public <RARE_TOKEN> ( ) { </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( long code , String data ) { </a> 
<a> this . code = code ; </a> 
<a> this . data = data ; </a> 
<a> } </a> 
<a> public long <RARE_TOKEN> ( ) { </a> 
<a> return code ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( long code ) { </a> 
<a> this . code = code ; </a> 
<a> } </a> 
<a> public String getData ( ) { </a> 
<a> return data ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( String data ) { </a> 
<a> this . data = data ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public String toString ( ) { </a> 
<a> return <RARE_TOKEN> ( ) + <RARE_TOKEN> " + getData ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . samples . client ; </a> 
<a> import org . atmosphere . gwt . client . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . gwt . client . <RARE_TOKEN> ; </a> 
<a> @ <RARE_TOKEN> ( value = { <RARE_TOKEN> . class } ) </a> 
<a> public abstract class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . samples . client ; </a> 
<a> import com . google . gwt . core . client . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . core . client . GWT ; </a> 
<a> import com . google . gwt . core . client . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . core . client . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . <RARE_TOKEN> . client . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . event . <RARE_TOKEN> . client . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . event . <RARE_TOKEN> . client . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . user . client . rpc . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . user . client . rpc . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . user . client . <RARE_TOKEN> . Button ; </a> 
<a> import com . google . gwt . user . client . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . gwt . client . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . gwt . client . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . gwt . client . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . gwt . client . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . gwt . client . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . gwt . client . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import java . io . Serializable ; </a> 
<a> import java . util . List ; </a> 
<a> import java . util . logging . Level ; </a> 
<a> import java . util . logging . Logger ; </a> 
<a> public class <RARE_TOKEN> implements <RARE_TOKEN> { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = GWT . create ( <RARE_TOKEN> . class ) ; </a> 
<a> <RARE_TOKEN> client ; </a> 
<a> Logger logger = Logger . getLogger ( getClass ( ) . getName ( ) ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> Button button = new Button ( <RARE_TOKEN> ) ; </a> 
<a> button . <RARE_TOKEN> ( new <RARE_TOKEN> ( ) { </a> 
<a> @ Override </a> 
<a> public void onClick ( <RARE_TOKEN> event ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> Button post = new Button ( <RARE_TOKEN> ) ; </a> 
<a> post . <RARE_TOKEN> ( new <RARE_TOKEN> ( ) { </a> 
<a> @ Override </a> 
<a> public void onClick ( <RARE_TOKEN> event ) { </a> 
<a> client . post ( new <RARE_TOKEN> ( count ++ , <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> the post <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> Button <RARE_TOKEN> = new Button ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( new <RARE_TOKEN> ( ) { </a> 
<a> @ Override </a> 
<a> public void onClick ( <RARE_TOKEN> event ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> , new <RARE_TOKEN> < <RARE_TOKEN> > ( ) { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( Throwable <RARE_TOKEN> ) { </a> 
<a> GWT . log ( "Failed to <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( <RARE_TOKEN> result ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> message <RARE_TOKEN> " + result . <RARE_TOKEN> ( ) , result . getData ( ) ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> Button <RARE_TOKEN> = new Button ( <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( new <RARE_TOKEN> ( ) { </a> 
<a> @ Override </a> 
<a> public void onClick ( <RARE_TOKEN> event ) { </a> 
<a> <RARE_TOKEN> . get ( ) . <RARE_TOKEN> ( new <RARE_TOKEN> ( ) { </a> 
<a> @ Override </a> 
<a> public void execute ( ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . current ( ) . open ( <RARE_TOKEN> . get ( ) . <RARE_TOKEN> ( ) , <RARE_TOKEN> , new <RARE_TOKEN> ( ) . <RARE_TOKEN> ( true ) . <RARE_TOKEN> ( true ) ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> Button <RARE_TOKEN> = new Button ( <RARE_TOKEN> to <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( new <RARE_TOKEN> ( ) { </a> 
<a> @ Override </a> 
<a> public void onClick ( <RARE_TOKEN> event ) { </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> . post ( <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> <RARE_TOKEN> socket = new <RARE_TOKEN> ( ) ; </a> 
<a> socket . <RARE_TOKEN> ( new <RARE_TOKEN> . <RARE_TOKEN> ( ) { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( String message ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> window <RARE_TOKEN> , message ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> socket . bind ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . get ( <RARE_TOKEN> ) . add ( button ) ; </a> 
<a> <RARE_TOKEN> . get ( <RARE_TOKEN> ) . add ( post ) ; </a> 
<a> <RARE_TOKEN> . get ( <RARE_TOKEN> ) . add ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . get ( <RARE_TOKEN> ) . add ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . get ( <RARE_TOKEN> ) . add ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> Button <RARE_TOKEN> = new Button ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( new <RARE_TOKEN> ( ) { </a> 
<a> @ Override </a> 
<a> public void onClick ( <RARE_TOKEN> event ) { </a> 
<a> client . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> <RARE_TOKEN> . get ( <RARE_TOKEN> ) . add ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> private class <RARE_TOKEN> implements <RARE_TOKEN> { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( int <RARE_TOKEN> , int <RARE_TOKEN> ) { </a> 
<a> GWT . log ( <RARE_TOKEN> <RARE_TOKEN> + <RARE_TOKEN> + ", " + <RARE_TOKEN> + <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> logger . log ( Level . <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> GWT . log ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void onError ( Throwable exception , boolean <RARE_TOKEN> ) { </a> 
<a> int <RARE_TOKEN> = - 1 ; </a> 
<a> if ( exception instanceof <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> = ( ( <RARE_TOKEN> ) exception ) . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> GWT . log ( <RARE_TOKEN> <RARE_TOKEN> + <RARE_TOKEN> + <RARE_TOKEN> <RARE_TOKEN> + <RARE_TOKEN> + <RARE_TOKEN> , exception ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> GWT . log ( <RARE_TOKEN> <RARE_TOKEN> + client . <RARE_TOKEN> ( ) + <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> GWT . log ( <RARE_TOKEN> <RARE_TOKEN> + client . <RARE_TOKEN> ( ) + <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( List < ? extends Serializable > messages ) { </a> 
<a> StringBuilder result = new StringBuilder ( ) ; </a> 
<a> for ( Serializable obj : messages ) { </a> 
<a> result . append ( obj . toString ( ) ) . append ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> logger . log ( Level . <RARE_TOKEN> , <RARE_TOKEN> <RARE_TOKEN> + client . <RARE_TOKEN> ( ) + <RARE_TOKEN> " + result . toString ( ) ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> + client . <RARE_TOKEN> ( ) + <RARE_TOKEN> <RARE_TOKEN> " + messages . size ( ) + " <RARE_TOKEN> , result . toString ( ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> ; </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> serializer = GWT . create ( <RARE_TOKEN> . class ) ; </a> 
<a> client = new <RARE_TOKEN> ( GWT . <RARE_TOKEN> ( ) + <RARE_TOKEN> , serializer , <RARE_TOKEN> ) ; </a> 
<a> client . start ( ) ; </a> 
<a> } </a> 
<a> static int count = 0 ; </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> client . broadcast ( new <RARE_TOKEN> ( count ++ , <RARE_TOKEN> <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . samples . client ; </a> 
<a> import com . google . gwt . core . client . GWT ; </a> 
<a> import com . google . gwt . <RARE_TOKEN> . client . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . <RARE_TOKEN> . client . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . user . client . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . user . client . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . user . client . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . user . client . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . user . client . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . user . client . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import java . util . ArrayList ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> public static void <RARE_TOKEN> ( String <RARE_TOKEN> , String message ) { </a> 
<a> final <RARE_TOKEN> info = new <RARE_TOKEN> ( <RARE_TOKEN> , message ) ; </a> 
<a> info . show ( ) ; </a> 
<a> <RARE_TOKEN> t = new <RARE_TOKEN> ( ) { </a> 
<a> @ Override </a> 
<a> public void run ( ) { </a> 
<a> info . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } ; </a> 
<a> t . schedule ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void show ( ) { </a> 
<a> super . show ( ) ; </a> 
<a> <RARE_TOKEN> . add ( level , this ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> super . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> . set ( level , null ) ; </a> 
<a> } </a> 
<a> protected <RARE_TOKEN> ( String <RARE_TOKEN> , String message ) { </a> 
<a> add ( new <RARE_TOKEN> ( <RARE_TOKEN> , message ) ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> level = <RARE_TOKEN> ( ) ; </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> - <RARE_TOKEN> ; </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> - 80 - ( level * <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> private static ArrayList < <RARE_TOKEN> > <RARE_TOKEN> = new ArrayList < <RARE_TOKEN> > ( ) ; </a> 
<a> private int level ; </a> 
<a> private static int <RARE_TOKEN> ( ) { </a> 
<a> int size = <RARE_TOKEN> . size ( ) ; </a> 
<a> for ( int i = 0 ; i < size ; i ++ ) { </a> 
<a> if ( <RARE_TOKEN> . get ( i ) == null ) { </a> 
<a> return i ; </a> 
<a> } </a> 
<a> } </a> 
<a> return size ; </a> 
<a> } </a> 
<a> public static class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = GWT . create ( <RARE_TOKEN> . class ) ; </a> 
<a> interface <RARE_TOKEN> extends <RARE_TOKEN> < <RARE_TOKEN> , <RARE_TOKEN> > { </a> 
<a> } </a> 
<a> @ <RARE_TOKEN> </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> @ <RARE_TOKEN> </a> 
<a> <RARE_TOKEN> message ; </a> 
<a> private <RARE_TOKEN> ( String <RARE_TOKEN> , String message ) { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ( this ) ) ; </a> 
<a> this . <RARE_TOKEN> . setText ( <RARE_TOKEN> ) ; </a> 
<a> this . message . setText ( message ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . samples . client ; </a> 
<a> import com . google . gwt . user . client . rpc . <RARE_TOKEN> ; </a> 
<a> import com . google . gwt . user . client . rpc . <RARE_TOKEN> ; </a> 
<a> @ <RARE_TOKEN> ( <RARE_TOKEN> ) </a> 
<a> public interface <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> public <RARE_TOKEN> <RARE_TOKEN> ( int <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . samples . client ; </a> 
<a> import com . google . gwt . user . client . rpc . <RARE_TOKEN> ; </a> 
<a> public interface <RARE_TOKEN> { </a> 
<a> public void <RARE_TOKEN> ( int <RARE_TOKEN> , <RARE_TOKEN> < <RARE_TOKEN> > callback ) ; </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . samples . server ; </a> 
<a> import org . atmosphere . gwt . server . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . gwt . server . <RARE_TOKEN> ; </a> 
<a> import javax . servlet . ServletConfig ; </a> 
<a> import javax . servlet . ServletException ; </a> 
<a> import javax . servlet . http . <RARE_TOKEN> ; </a> 
<a> import java . io . IOException ; </a> 
<a> import java . util . logging . Level ; </a> 
<a> import java . util . logging . Logger ; </a> 
<a> public class AtmosphereHandler extends <RARE_TOKEN> { </a> 
<a> @ Override </a> 
<a> public void init ( ServletConfig <RARE_TOKEN> ) throws ServletException { </a> 
<a> super . init ( <RARE_TOKEN> ) ; </a> 
<a> Logger . getLogger ( "" ) . <RARE_TOKEN> ( Level . <RARE_TOKEN> ) ; </a> 
<a> Logger . getLogger ( <RARE_TOKEN> ) . <RARE_TOKEN> ( Level . <RARE_TOKEN> ) ; </a> 
<a> Logger . getLogger ( "" ) . <RARE_TOKEN> ( ) [ 0 ] . <RARE_TOKEN> ( Level . <RARE_TOKEN> ) ; </a> 
<a> logger . trace ( <RARE_TOKEN> logging <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int <RARE_TOKEN> ( <RARE_TOKEN> resource ) throws ServletException , IOException { </a> 
<a> resource . getBroadcaster ( ) . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> session = resource . <RARE_TOKEN> ( ) . getRequest ( ) . getSession ( false ) ; </a> 
<a> if ( session != null ) { </a> 
<a> logger . debug ( <RARE_TOKEN> session <RARE_TOKEN> <RARE_TOKEN> " + session . getId ( ) ) ; </a> 
<a> logger . debug ( <RARE_TOKEN> <RARE_TOKEN> " + session . getAttribute ( <RARE_TOKEN> ) ) ; </a> 
<a> } else { </a> 
<a> logger . warn ( <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( logger . isDebugEnabled ( ) ) { </a> 
<a> logger . debug ( <RARE_TOKEN> " + resource . <RARE_TOKEN> ( ) . getRequest ( ) . <RARE_TOKEN> ( ) </a> 
<a> + <RARE_TOKEN> + resource . <RARE_TOKEN> ( ) . getRequest ( ) . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> , boolean <RARE_TOKEN> ) { </a> 
<a> super . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> logger . debug ( <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . samples . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . cpr . AtmosphereResourceEvent ; </a> 
<a> import org . atmosphere . cpr . AtmosphereResourceEventListener ; </a> 
<a> import org . slf4j . Logger ; </a> 
<a> import org . slf4j . LoggerFactory ; </a> 
<a> import javax . servlet . http . HttpServletRequest ; </a> 
<a> import javax . servlet . http . HttpServletResponse ; </a> 
<a> public class <RARE_TOKEN> implements AtmosphereResourceEventListener { </a> 
<a> private static final Logger logger = LoggerFactory . getLogger ( <RARE_TOKEN> . class ) ; </a> 
<a> public <RARE_TOKEN> ( ) { </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( final AtmosphereResourceEvent < HttpServletRequest , HttpServletResponse > event ) { </a> 
<a> logger . info ( <RARE_TOKEN> <RARE_TOKEN> , event . getResource ( ) . getRequest ( ) . <RARE_TOKEN> ( ) , </a> 
<a> event . getResource ( ) . getRequest ( ) . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( AtmosphereResourceEvent < HttpServletRequest , HttpServletResponse > event ) { </a> 
<a> logger . info ( <RARE_TOKEN> <RARE_TOKEN> , event . getResource ( ) . getRequest ( ) . <RARE_TOKEN> ( ) , </a> 
<a> event . getResource ( ) . getRequest ( ) . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( AtmosphereResourceEvent < HttpServletRequest , HttpServletResponse > event ) { </a> 
<a> logger . info ( <RARE_TOKEN> <RARE_TOKEN> , event . getResource ( ) . getRequest ( ) . <RARE_TOKEN> ( ) , </a> 
<a> event . getResource ( ) . getRequest ( ) . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( AtmosphereResourceEvent < HttpServletRequest , HttpServletResponse > event ) { </a> 
<a> logger . info ( <RARE_TOKEN> {}" , event . getMessage ( ) ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( AtmosphereResourceEvent < HttpServletRequest , HttpServletResponse > event ) { </a> 
<a> logger . warn ( <RARE_TOKEN> {}" , event ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . samples . <RARE_TOKEN> ; </a> 
<a> import javax . servlet . <RARE_TOKEN> ; </a> 
<a> import javax . ws . rs . GET ; </a> 
<a> import javax . ws . rs . Path ; </a> 
<a> import javax . ws . rs . <RARE_TOKEN> ; </a> 
<a> import javax . ws . rs . Produces ; </a> 
<a> import javax . ws . rs . core . Context ; </a> 
<a> import javax . ws . rs . core . <RARE_TOKEN> ; </a> 
<a> import java . io . InputStream ; </a> 
<a> @ Path ( "/" ) </a> 
<a> @ Produces ( <RARE_TOKEN> ) </a> 
<a> public class <RARE_TOKEN> { </a> 
<a> private </a> 
<a> @ Context </a> 
<a> <RARE_TOKEN> sc ; </a> 
<a> @ Path ( <RARE_TOKEN> ) </a> 
<a> @ GET </a> 
<a> public InputStream <RARE_TOKEN> ( @ <RARE_TOKEN> ( <RARE_TOKEN> ) <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> return sc . <RARE_TOKEN> ( <RARE_TOKEN> + <RARE_TOKEN> . getPath ( ) ) ; </a> 
<a> } </a> 
<a> @ GET </a> 
<a> public InputStream <RARE_TOKEN> ( ) { </a> 
<a> return sc . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . samples . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . annotation . Broadcast ; </a> 
<a> import org . atmosphere . jersey . Broadcastable ; </a> 
<a> import org . atmosphere . jersey . SuspendResponse ; </a> 
<a> import org . atmosphere . <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import javax . ws . rs . FormParam ; </a> 
<a> import javax . ws . rs . GET ; </a> 
<a> import javax . ws . rs . POST ; </a> 
<a> import javax . ws . rs . Path ; </a> 
<a> import javax . ws . rs . <RARE_TOKEN> ; </a> 
<a> import javax . ws . rs . Produces ; </a> 
<a> @ Path ( <RARE_TOKEN> ) </a> 
<a> @ Produces ( <RARE_TOKEN> ) </a> 
<a> public class <RARE_TOKEN> { </a> 
<a> private </a> 
<a> @ <RARE_TOKEN> ( <RARE_TOKEN> ) </a> 
<a> <RARE_TOKEN> topic ; </a> 
<a> @ GET </a> 
<a> public SuspendResponse < String > <RARE_TOKEN> ( ) { </a> 
<a> return new SuspendResponse . <RARE_TOKEN> < String > ( ) </a> 
<a> . broadcaster ( topic ) </a> 
<a> . outputComments ( true ) </a> 
<a> . addListener ( new <RARE_TOKEN> ( ) ) </a> 
<a> . build ( ) ; </a> 
<a> } </a> 
<a> @ POST </a> 
<a> @ Broadcast </a> 
<a> public Broadcastable <RARE_TOKEN> ( @ FormParam ( "message" ) String message ) { </a> 
<a> return new Broadcastable ( message , "" , topic ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . samples . <RARE_TOKEN> ; </a> 
<a> import javax . servlet . <RARE_TOKEN> ; </a> 
<a> import javax . ws . rs . GET ; </a> 
<a> import javax . ws . rs . Path ; </a> 
<a> import javax . ws . rs . <RARE_TOKEN> ; </a> 
<a> import javax . ws . rs . Produces ; </a> 
<a> import javax . ws . rs . core . Context ; </a> 
<a> import javax . ws . rs . core . <RARE_TOKEN> ; </a> 
<a> import java . io . InputStream ; </a> 
<a> @ Path ( "/" ) </a> 
<a> @ Produces ( <RARE_TOKEN> ) </a> 
<a> public class <RARE_TOKEN> { </a> 
<a> private </a> 
<a> @ Context </a> 
<a> <RARE_TOKEN> sc ; </a> 
<a> @ Path ( <RARE_TOKEN> ) </a> 
<a> @ GET </a> 
<a> public InputStream <RARE_TOKEN> ( @ <RARE_TOKEN> ( <RARE_TOKEN> ) <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> return sc . <RARE_TOKEN> ( <RARE_TOKEN> + <RARE_TOKEN> . getPath ( ) ) ; </a> 
<a> } </a> 
<a> @ GET </a> 
<a> public InputStream <RARE_TOKEN> ( ) { </a> 
<a> return sc . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . samples . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . annotation . Broadcast ; </a> 
<a> import org . atmosphere . jersey . Broadcastable ; </a> 
<a> import org . atmosphere . jersey . SuspendResponse ; </a> 
<a> import org . atmosphere . <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import javax . ws . rs . FormParam ; </a> 
<a> import javax . ws . rs . GET ; </a> 
<a> import javax . ws . rs . POST ; </a> 
<a> import javax . ws . rs . Path ; </a> 
<a> import javax . ws . rs . <RARE_TOKEN> ; </a> 
<a> import javax . ws . rs . Produces ; </a> 
<a> @ Path ( <RARE_TOKEN> ) </a> 
<a> @ Produces ( <RARE_TOKEN> ) </a> 
<a> public class <RARE_TOKEN> { </a> 
<a> private </a> 
<a> @ <RARE_TOKEN> ( <RARE_TOKEN> ) </a> 
<a> <RARE_TOKEN> topic ; </a> 
<a> @ GET </a> 
<a> public SuspendResponse < String > <RARE_TOKEN> ( ) { </a> 
<a> return new SuspendResponse . <RARE_TOKEN> < String > ( ) </a> 
<a> . broadcaster ( topic ) </a> 
<a> . outputComments ( true ) </a> 
<a> . addListener ( new <RARE_TOKEN> ( ) ) </a> 
<a> . build ( ) ; </a> 
<a> } </a> 
<a> @ POST </a> 
<a> @ Broadcast </a> 
<a> public Broadcastable <RARE_TOKEN> ( @ FormParam ( "message" ) String message ) { </a> 
<a> return new Broadcastable ( message , "" , topic ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . samples . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . cpr . AtmosphereResourceEvent ; </a> 
<a> import org . atmosphere . cpr . AtmosphereResourceEventListener ; </a> 
<a> import org . atmosphere . websocket . <RARE_TOKEN> ; </a> 
<a> import org . slf4j . Logger ; </a> 
<a> import org . slf4j . LoggerFactory ; </a> 
<a> import javax . servlet . http . HttpServletRequest ; </a> 
<a> import javax . servlet . http . HttpServletResponse ; </a> 
<a> public class <RARE_TOKEN> implements <RARE_TOKEN> { </a> 
<a> private static final Logger logger = LoggerFactory . getLogger ( <RARE_TOKEN> . class ) ; </a> 
<a> public <RARE_TOKEN> ( ) { </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( final AtmosphereResourceEvent < HttpServletRequest , HttpServletResponse > event ) { </a> 
<a> logger . info ( <RARE_TOKEN> <RARE_TOKEN> , event . getResource ( ) . getRequest ( ) . <RARE_TOKEN> ( ) , </a> 
<a> event . getResource ( ) . getRequest ( ) . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( AtmosphereResourceEvent < HttpServletRequest , HttpServletResponse > event ) { </a> 
<a> logger . info ( <RARE_TOKEN> <RARE_TOKEN> , event . getResource ( ) . getRequest ( ) . <RARE_TOKEN> ( ) , </a> 
<a> event . getResource ( ) . getRequest ( ) . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( AtmosphereResourceEvent < HttpServletRequest , HttpServletResponse > event ) { </a> 
<a> logger . info ( <RARE_TOKEN> <RARE_TOKEN> , event . getResource ( ) . getRequest ( ) . <RARE_TOKEN> ( ) , </a> 
<a> event . getResource ( ) . getRequest ( ) . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( AtmosphereResourceEvent < HttpServletRequest , HttpServletResponse > event ) { </a> 
<a> logger . info ( <RARE_TOKEN> {}" , event . getMessage ( ) ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( AtmosphereResourceEvent < HttpServletRequest , HttpServletResponse > event ) { </a> 
<a> logger . warn ( <RARE_TOKEN> {}" , event ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( <RARE_TOKEN> event ) { </a> 
<a> logger . info ( <RARE_TOKEN> {}" , event ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( <RARE_TOKEN> event ) { </a> 
<a> logger . info ( <RARE_TOKEN> {}" , event ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( <RARE_TOKEN> event ) { </a> 
<a> logger . info ( <RARE_TOKEN> {}" , event ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( <RARE_TOKEN> event ) { </a> 
<a> logger . info ( <RARE_TOKEN> {}" , event ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( <RARE_TOKEN> event ) { </a> 
<a> logger . info ( <RARE_TOKEN> {}" , event ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( <RARE_TOKEN> event ) { </a> 
<a> logger . info ( <RARE_TOKEN> {}" , event ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . samples . <RARE_TOKEN> ; </a> 
<a> import javax . servlet . <RARE_TOKEN> ; </a> 
<a> import javax . ws . rs . GET ; </a> 
<a> import javax . ws . rs . Path ; </a> 
<a> import javax . ws . rs . <RARE_TOKEN> ; </a> 
<a> import javax . ws . rs . Produces ; </a> 
<a> import javax . ws . rs . core . Context ; </a> 
<a> import javax . ws . rs . core . <RARE_TOKEN> ; </a> 
<a> import java . io . InputStream ; </a> 
<a> @ Path ( "/" ) </a> 
<a> @ Produces ( <RARE_TOKEN> ) </a> 
<a> public class <RARE_TOKEN> { </a> 
<a> private </a> 
<a> @ Context </a> 
<a> <RARE_TOKEN> sc ; </a> 
<a> @ Path ( <RARE_TOKEN> ) </a> 
<a> @ GET </a> 
<a> public InputStream <RARE_TOKEN> ( @ <RARE_TOKEN> ( <RARE_TOKEN> ) <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> return sc . <RARE_TOKEN> ( <RARE_TOKEN> + <RARE_TOKEN> . getPath ( ) ) ; </a> 
<a> } </a> 
<a> @ GET </a> 
<a> public InputStream <RARE_TOKEN> ( ) { </a> 
<a> return sc . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . samples . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . annotation . Broadcast ; </a> 
<a> import org . atmosphere . cpr . Broadcaster ; </a> 
<a> import org . atmosphere . jersey . Broadcastable ; </a> 
<a> import org . atmosphere . jersey . SuspendResponse ; </a> 
<a> import javax . ws . rs . FormParam ; </a> 
<a> import javax . ws . rs . GET ; </a> 
<a> import javax . ws . rs . POST ; </a> 
<a> import javax . ws . rs . Path ; </a> 
<a> import javax . ws . rs . <RARE_TOKEN> ; </a> 
<a> import javax . ws . rs . Produces ; </a> 
<a> @ Path ( <RARE_TOKEN> ) </a> 
<a> @ Produces ( <RARE_TOKEN> ) </a> 
<a> public class <RARE_TOKEN> { </a> 
<a> private </a> 
<a> @ <RARE_TOKEN> ( <RARE_TOKEN> ) </a> 
<a> Broadcaster topic ; </a> 
<a> @ GET </a> 
<a> public SuspendResponse < String > <RARE_TOKEN> ( ) { </a> 
<a> return new SuspendResponse . <RARE_TOKEN> < String > ( ) </a> 
<a> . broadcaster ( topic ) </a> 
<a> . outputComments ( true ) </a> 
<a> . addListener ( new <RARE_TOKEN> ( ) ) </a> 
<a> . build ( ) ; </a> 
<a> } </a> 
<a> @ POST </a> 
<a> @ Broadcast </a> 
<a> public Broadcastable <RARE_TOKEN> ( @ FormParam ( "message" ) String message ) { </a> 
<a> return new Broadcastable ( message , "" , topic ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . samples . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . commons . jersey . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . commons . util . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . cpr . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . cpr . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . util . <RARE_TOKEN> ; </a> 
<a> import javax . servlet . http . <RARE_TOKEN> ; </a> 
<a> import javax . servlet . http . HttpServletRequest ; </a> 
<a> import javax . servlet . http . HttpServletResponse ; </a> 
<a> import java . io . IOException ; </a> 
<a> import java . util . <RARE_TOKEN> ; </a> 
<a> import java . util . List ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> private final static long serialVersionUID = - <RARE_TOKEN> ; </a> 
<a> private final List < <RARE_TOKEN> > list ; </a> 
<a> public <RARE_TOKEN> ( ) { </a> 
<a> list = new <RARE_TOKEN> < <RARE_TOKEN> > ( ) ; </a> 
<a> list . add ( new <RARE_TOKEN> ( ) ) ; </a> 
<a> list . add ( new <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( HttpServletRequest req , HttpServletResponse res ) throws IOException { </a> 
<a> <RARE_TOKEN> m = <RARE_TOKEN> . build ( req , list , null ) ; </a> 
<a> m . addListener ( new <RARE_TOKEN> ( ) ) ; </a> 
<a> req . getSession ( ) . setAttribute ( <RARE_TOKEN> , m ) ; </a> 
<a> res . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> m . suspend ( - 1 ) ; </a> 
<a> m . broadcast ( req . <RARE_TOKEN> ( ) + <RARE_TOKEN> suspended a connection from " + req . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( HttpServletRequest req , HttpServletResponse res ) throws IOException { </a> 
<a> <RARE_TOKEN> m = ( <RARE_TOKEN> ) req . getSession ( ) . getAttribute ( <RARE_TOKEN> ) ; </a> 
<a> res . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> String action = req . <RARE_TOKEN> ( <RARE_TOKEN> ) [ 0 ] ; </a> 
<a> String name = req . <RARE_TOKEN> ( "name" ) [ 0 ] ; </a> 
<a> if ( <RARE_TOKEN> . equals ( action ) ) { </a> 
<a> req . getSession ( ) . setAttribute ( "name" , name ) ; </a> 
<a> m . broadcast ( <RARE_TOKEN> <RARE_TOKEN> from " + req . <RARE_TOKEN> ( ) + <RARE_TOKEN> + name + " has <RARE_TOKEN> ) ; </a> 
<a> res . <RARE_TOKEN> ( ) . write ( <RARE_TOKEN> ) ; </a> 
<a> res . <RARE_TOKEN> ( ) . flush ( ) ; </a> 
<a> } else if ( <RARE_TOKEN> . equals ( action ) ) { </a> 
<a> String message = req . <RARE_TOKEN> ( "message" ) [ 0 ] ; </a> 
<a> m . broadcast ( name + <RARE_TOKEN> + message ) ; </a> 
<a> res . <RARE_TOKEN> ( ) . write ( <RARE_TOKEN> ) ; </a> 
<a> res . <RARE_TOKEN> ( ) . flush ( ) ; </a> 
<a> } else { </a> 
<a> res . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> res . <RARE_TOKEN> ( ) . write ( <RARE_TOKEN> ) ; </a> 
<a> res . <RARE_TOKEN> ( ) . flush ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> package org . atmosphere . samples . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . cpr . AtmosphereResourceEvent ; </a> 
<a> import org . atmosphere . cpr . AtmosphereResourceEventListener ; </a> 
<a> import javax . servlet . http . HttpServletRequest ; </a> 
<a> import javax . servlet . http . HttpServletResponse ; </a> 
<a> public class <RARE_TOKEN> implements AtmosphereResourceEventListener { </a> 
<a> public <RARE_TOKEN> ( ) { </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( final AtmosphereResourceEvent < HttpServletRequest , HttpServletResponse > event ) { </a> 
<a> System . out . println ( <RARE_TOKEN> " + event ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( AtmosphereResourceEvent < HttpServletRequest , HttpServletResponse > event ) { </a> 
<a> System . out . println ( <RARE_TOKEN> " + event ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( AtmosphereResourceEvent < HttpServletRequest , HttpServletResponse > event ) { </a> 
<a> System . out . println ( <RARE_TOKEN> " + event ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( AtmosphereResourceEvent < HttpServletRequest , HttpServletResponse > event ) { </a> 
<a> System . out . println ( <RARE_TOKEN> " + event ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( AtmosphereResourceEvent < HttpServletRequest , HttpServletResponse > event ) { </a> 
<a> event . throwable ( ) . printStackTrace ( System . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . samples . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . annotation . Broadcast ; </a> 
<a> import org . atmosphere . annotation . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . annotation . Suspend ; </a> 
<a> import org . atmosphere . cpr . AtmosphereResourceEventListener ; </a> 
<a> import org . atmosphere . cpr . Broadcaster ; </a> 
<a> import org . atmosphere . cpr . BroadcasterFactory ; </a> 
<a> import org . atmosphere . jersey . Broadcastable ; </a> 
<a> import org . atmosphere . jersey . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . util . <RARE_TOKEN> ; </a> 
<a> import org . slf4j . Logger ; </a> 
<a> import org . slf4j . LoggerFactory ; </a> 
<a> import javax . annotation . <RARE_TOKEN> ; </a> 
<a> import javax . ws . rs . FormParam ; </a> 
<a> import javax . ws . rs . GET ; </a> 
<a> import javax . ws . rs . POST ; </a> 
<a> import javax . ws . rs . Path ; </a> 
<a> import javax . ws . rs . <RARE_TOKEN> ; </a> 
<a> import javax . ws . rs . Produces ; </a> 
<a> import java . util . concurrent . <RARE_TOKEN> ; </a> 
<a> import java . util . concurrent . TimeUnit ; </a> 
<a> @ Path ( <RARE_TOKEN> ) </a> 
<a> @ Produces ( <RARE_TOKEN> ) </a> 
<a> public class <RARE_TOKEN> { </a> 
<a> private static final Logger logger = LoggerFactory . getLogger ( <RARE_TOKEN> . class ) ; </a> 
<a> @ <RARE_TOKEN> </a> 
<a> public void destroy ( ) { </a> 
<a> logger . info ( <RARE_TOKEN> the <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> private </a> 
<a> @ <RARE_TOKEN> ( <RARE_TOKEN> ) </a> 
<a> Broadcaster topic ; </a> 
<a> @ GET </a> 
<a> @ Suspend ( listeners = { <RARE_TOKEN> . class } ) </a> 
<a> public Broadcastable <RARE_TOKEN> ( ) { </a> 
<a> return new Broadcastable ( topic ) ; </a> 
<a> } </a> 
<a> @ GET </a> 
<a> @ Path ( <RARE_TOKEN> ) </a> 
<a> @ Suspend ( resumeOnBroadcast = true , listeners = { <RARE_TOKEN> . class } ) </a> 
<a> public String <RARE_TOKEN> ( final @ <RARE_TOKEN> ( <RARE_TOKEN> ) String topic ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( new Runnable ( ) { </a> 
<a> public void run ( ) { </a> 
<a> try { </a> 
<a> Thread . sleep ( <RARE_TOKEN> ) ; </a> 
<a> } catch ( InterruptedException e ) { </a> 
<a> } </a> 
<a> BroadcasterFactory . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( <RARE_TOKEN> . class , topic ) . broadcast ( <RARE_TOKEN> " + topic ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> return "foo" ; </a> 
<a> } </a> 
<a> @ GET </a> 
<a> @ Suspend ( resumeOnBroadcast = true , listeners = { <RARE_TOKEN> . class } ) </a> 
<a> @ Path ( <RARE_TOKEN> ) </a> 
<a> public Broadcastable <RARE_TOKEN> ( ) { </a> 
<a> return new Broadcastable ( topic ) ; </a> 
<a> } </a> 
<a> @ POST </a> 
<a> @ Produces ( <RARE_TOKEN> ) </a> 
<a> @ Broadcast </a> 
<a> public Broadcastable <RARE_TOKEN> ( @ FormParam ( "message" ) String message ) { </a> 
<a> return new Broadcastable ( new <RARE_TOKEN> ( message ) , topic ) ; </a> 
<a> } </a> 
<a> @ POST </a> 
<a> @ Broadcast </a> 
<a> public Broadcastable <RARE_TOKEN> ( @ FormParam ( "message" ) String message ) { </a> 
<a> return broadcast ( message ) ; </a> 
<a> } </a> 
<a> @ POST </a> 
<a> @ Broadcast ( value = { <RARE_TOKEN> . class } ) </a> 
<a> @ Path ( <RARE_TOKEN> ) </a> 
<a> public Broadcastable <RARE_TOKEN> ( @ FormParam ( "message" ) String message ) { </a> 
<a> return broadcast ( message ) ; </a> 
<a> } </a> 
<a> @ <RARE_TOKEN> ( period = 5 , resumeOnBroadcast = true ) </a> 
<a> @ POST </a> 
<a> @ Path ( <RARE_TOKEN> ) </a> 
<a> public Broadcastable <RARE_TOKEN> ( @ FormParam ( "message" ) String message ) { </a> 
<a> return broadcast ( message ) ; </a> 
<a> } </a> 
<a> @ <RARE_TOKEN> ( period = 10 , <RARE_TOKEN> = 5 ) </a> 
<a> @ POST </a> 
<a> @ Path ( <RARE_TOKEN> ) </a> 
<a> public Broadcastable <RARE_TOKEN> ( @ FormParam ( "message" ) String message ) { </a> 
<a> return broadcast ( message ) ; </a> 
<a> } </a> 
<a> @ <RARE_TOKEN> ( period = 5 ) </a> 
<a> @ POST </a> 
<a> @ Path ( <RARE_TOKEN> ) </a> 
<a> public Broadcastable schedule ( @ FormParam ( "message" ) String message ) { </a> 
<a> return broadcast ( message ) ; </a> 
<a> } </a> 
<a> @ Broadcast ( delay = 5 ) </a> 
<a> @ POST </a> 
<a> @ Path ( <RARE_TOKEN> ) </a> 
<a> public Broadcastable <RARE_TOKEN> ( @ FormParam ( "message" ) String message ) { </a> 
<a> return broadcast ( message ) ; </a> 
<a> } </a> 
<a> @ Broadcast ( delay = 5 , resumeOnBroadcast = true ) </a> 
<a> @ POST </a> 
<a> @ Path ( <RARE_TOKEN> ) </a> 
<a> public Broadcastable <RARE_TOKEN> ( @ FormParam ( "message" ) String message ) { </a> 
<a> return broadcast ( message ) ; </a> 
<a> } </a> 
<a> @ Path ( <RARE_TOKEN> ) </a> 
<a> @ POST </a> 
<a> @ Broadcast ( delay = 0 ) </a> 
<a> public Broadcastable buffer ( @ FormParam ( "message" ) String message ) { </a> 
<a> return broadcast ( message ) ; </a> 
<a> } </a> 
<a> @ POST </a> 
<a> @ Path ( <RARE_TOKEN> ) </a> 
<a> public String <RARE_TOKEN> ( @ FormParam ( "message" ) String message ) { </a> 
<a> topic . <RARE_TOKEN> ( message , 10 , TimeUnit . SECONDS ) ; </a> 
<a> return message ; </a> 
<a> } </a> 
<a> Broadcastable broadcast ( String m ) { </a> 
<a> return new Broadcastable ( m + <RARE_TOKEN> , topic ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . samples . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . cpr . AtmosphereResource ; </a> 
<a> import org . atmosphere . cpr . AtmosphereResourceEvent ; </a> 
<a> import org . atmosphere . jersey . <RARE_TOKEN> ; </a> 
<a> import org . slf4j . Logger ; </a> 
<a> import org . slf4j . LoggerFactory ; </a> 
<a> import java . util . concurrent . atomic . AtomicBoolean ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> private static final Logger logger = LoggerFactory . getLogger ( <RARE_TOKEN> . class ) ; </a> 
<a> private final AtomicBoolean <RARE_TOKEN> = new AtomicBoolean ( false ) ; </a> 
<a> public <RARE_TOKEN> ( ) { </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( String id ) { </a> 
<a> super ( id ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void broadcast ( final AtmosphereResource r , final AtmosphereResourceEvent e ) { </a> 
<a> if ( ! <RARE_TOKEN> . <RARE_TOKEN> ( true ) ) { </a> 
<a> logger . info ( <RARE_TOKEN> is <RARE_TOKEN> an example that <RARE_TOKEN> " + </a> 
<a> <RARE_TOKEN> a Broadcaster <RARE_TOKEN> be <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> or <RARE_TOKEN> " + </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> super . broadcast ( r , e ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . commons . jersey ; </a> 
<a> import org . atmosphere . annotation . Broadcast ; </a> 
<a> import org . atmosphere . annotation . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . annotation . Suspend ; </a> 
<a> import org . atmosphere . util . <RARE_TOKEN> ; </a> 
<a> import javax . ws . rs . <RARE_TOKEN> ; </a> 
<a> import javax . ws . rs . GET ; </a> 
<a> import javax . ws . rs . POST ; </a> 
<a> import javax . ws . rs . Path ; </a> 
<a> import javax . ws . rs . Produces ; </a> 
<a> import javax . ws . rs . <RARE_TOKEN> ; </a> 
<a> import javax . ws . rs . core . <RARE_TOKEN> ; </a> 
<a> @ Path ( <RARE_TOKEN> ) </a> 
<a> @ Produces ( <RARE_TOKEN> ) </a> 
<a> public class <RARE_TOKEN> { </a> 
<a> @ Suspend </a> 
<a> @ GET </a> 
<a> public String suspend ( ) { </a> 
<a> return "" ; </a> 
<a> } </a> 
<a> @ Broadcast ( { <RARE_TOKEN> . class , <RARE_TOKEN> . class } ) </a> 
<a> @ <RARE_TOKEN> ( <RARE_TOKEN> ) </a> 
<a> @ POST </a> 
<a> public String <RARE_TOKEN> ( <RARE_TOKEN> < String , String > <RARE_TOKEN> ) { </a> 
<a> String action = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> String name = <RARE_TOKEN> . <RARE_TOKEN> ( "name" ) ; </a> 
<a> if ( <RARE_TOKEN> . equals ( action ) ) { </a> 
<a> return ( <RARE_TOKEN> <RARE_TOKEN> + <RARE_TOKEN> + name + " has <RARE_TOKEN> ) ; </a> 
<a> } else if ( <RARE_TOKEN> . equals ( action ) ) { </a> 
<a> return name + <RARE_TOKEN> + <RARE_TOKEN> . <RARE_TOKEN> ( "message" ) ; </a> 
<a> } else { </a> 
<a> throw new <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ <RARE_TOKEN> ( period = <RARE_TOKEN> ) </a> 
<a> @ POST </a> 
<a> @ Path ( <RARE_TOKEN> ) </a> 
<a> public String <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . samples . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . annotation . Broadcast ; </a> 
<a> import org . atmosphere . annotation . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . annotation . Suspend ; </a> 
<a> import org . atmosphere . commons . jersey . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . util . <RARE_TOKEN> ; </a> 
<a> import javax . ws . rs . <RARE_TOKEN> ; </a> 
<a> import javax . ws . rs . GET ; </a> 
<a> import javax . ws . rs . POST ; </a> 
<a> import javax . ws . rs . Path ; </a> 
<a> import javax . ws . rs . Produces ; </a> 
<a> import javax . ws . rs . <RARE_TOKEN> ; </a> 
<a> import javax . ws . rs . core . <RARE_TOKEN> ; </a> 
<a> @ Path ( <RARE_TOKEN> ) </a> 
<a> public class <RARE_TOKEN> { </a> 
<a> @ Suspend </a> 
<a> @ GET </a> 
<a> @ Produces ( <RARE_TOKEN> ) </a> 
<a> public String suspend ( ) { </a> 
<a> return "" ; </a> 
<a> } </a> 
<a> @ Broadcast ( { <RARE_TOKEN> . class , <RARE_TOKEN> . class } ) </a> 
<a> @ <RARE_TOKEN> ( <RARE_TOKEN> ) </a> 
<a> @ POST </a> 
<a> @ Produces ( <RARE_TOKEN> ) </a> 
<a> @ <RARE_TOKEN> ( </a> 
<a> name = <RARE_TOKEN> , </a> 
<a> value = <RARE_TOKEN> . class </a> 
<a> ) </a> 
<a> public String <RARE_TOKEN> ( <RARE_TOKEN> < String , String > <RARE_TOKEN> ) { </a> 
<a> String action = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> String name = <RARE_TOKEN> . <RARE_TOKEN> ( "name" ) ; </a> 
<a> if ( <RARE_TOKEN> . equals ( action ) ) { </a> 
<a> return ( <RARE_TOKEN> <RARE_TOKEN> + <RARE_TOKEN> + name + " has <RARE_TOKEN> ) ; </a> 
<a> } else if ( <RARE_TOKEN> . equals ( action ) ) { </a> 
<a> return name + <RARE_TOKEN> + <RARE_TOKEN> . <RARE_TOKEN> ( "message" ) ; </a> 
<a> } else { </a> 
<a> throw new <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . samples . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import com . sun . jersey . <RARE_TOKEN> . resource . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . annotation . Broadcast ; </a> 
<a> import org . atmosphere . annotation . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . annotation . Suspend ; </a> 
<a> import org . atmosphere . cpr . AtmosphereHandler ; </a> 
<a> import org . slf4j . Logger ; </a> 
<a> import org . slf4j . LoggerFactory ; </a> 
<a> import javax . ws . rs . GET ; </a> 
<a> import javax . ws . rs . POST ; </a> 
<a> import javax . ws . rs . Path ; </a> 
<a> import javax . ws . rs . <RARE_TOKEN> ; </a> 
<a> import javax . ws . rs . Produces ; </a> 
<a> import java . util . concurrent . atomic . AtomicInteger ; </a> 
<a> @ Path ( <RARE_TOKEN> ) </a> 
<a> @ <RARE_TOKEN> </a> 
<a> public class <RARE_TOKEN> { </a> 
<a> private static final Logger logger = LoggerFactory . getLogger ( <RARE_TOKEN> . class ) ; </a> 
<a> private final AtomicInteger <RARE_TOKEN> = new AtomicInteger ( ) ; </a> 
<a> @ Suspend </a> 
<a> @ GET </a> 
<a> @ Produces ( <RARE_TOKEN> ) </a> 
<a> public String suspend ( ) { </a> 
<a> return "" ; </a> 
<a> } </a> 
<a> @ POST </a> 
<a> @ Path ( <RARE_TOKEN> ) </a> 
<a> @ Broadcast ( resumeOnBroadcast = true ) </a> 
<a> public String <RARE_TOKEN> ( @ <RARE_TOKEN> ( <RARE_TOKEN> ) String count ) { </a> 
<a> logger . info ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> {}" , count ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> return <RARE_TOKEN> . toString ( ) ; </a> 
<a> } </a> 
<a> @ GET </a> 
<a> @ Path ( <RARE_TOKEN> ) </a> 
<a> @ <RARE_TOKEN> </a> 
<a> public String resume ( ) { </a> 
<a> logger . info ( <RARE_TOKEN> ) ; </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . samples . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . cpr . AtmosphereResource ; </a> 
<a> import org . atmosphere . cpr . AtmosphereResourceEvent ; </a> 
<a> import org . atmosphere . cpr . Broadcaster ; </a> 
<a> import org . atmosphere . jersey . <RARE_TOKEN> ; </a> 
<a> import javax . servlet . http . HttpServletRequest ; </a> 
<a> import javax . servlet . http . HttpServletResponse ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> public <RARE_TOKEN> ( ) { </a> 
<a> } </a> 
<a> private AtmosphereResourceEvent event ; </a> 
<a> public void <RARE_TOKEN> ( AtmosphereResourceEvent event ) { </a> 
<a> this . event = event ; </a> 
<a> } </a> 
<a> public AtmosphereResourceEvent < HttpServletRequest , HttpServletResponse > <RARE_TOKEN> ( ) { </a> 
<a> return event ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public AtmosphereResource < ? , ? > <RARE_TOKEN> ( AtmosphereResource < ? , ? > r ) { </a> 
<a> if ( <RARE_TOKEN> ( ) . size ( ) == 0 ) { </a> 
<a> event = r . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> return super . <RARE_TOKEN> ( r ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . samples . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . samples . <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import org . slf4j . Logger ; </a> 
<a> import org . slf4j . LoggerFactory ; </a> 
<a> import javax . ws . rs . <RARE_TOKEN> ; </a> 
<a> import javax . ws . rs . <RARE_TOKEN> ; </a> 
<a> import javax . ws . rs . FormParam ; </a> 
<a> import javax . ws . rs . GET ; </a> 
<a> import javax . ws . rs . POST ; </a> 
<a> import javax . ws . rs . Path ; </a> 
<a> import javax . ws . rs . <RARE_TOKEN> ; </a> 
<a> import javax . ws . rs . core . <RARE_TOKEN> ; </a> 
<a> public class <RARE_TOKEN> { </a> 
<a> private static final Logger logger = LoggerFactory . getLogger ( <RARE_TOKEN> . class ) ; </a> 
<a> private final <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> private String user ; </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> public <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> , String name , <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> this . user = name ; </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ GET </a> 
<a> public String get ( ) { </a> 
<a> return "" ; </a> 
<a> } </a> 
<a> @ <RARE_TOKEN> </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> . remove ( user ) ; </a> 
<a> } </a> 
<a> @ Path ( <RARE_TOKEN> ) </a> 
<a> @ POST </a> 
<a> public void post ( String message ) { </a> 
<a> logger . info ( <RARE_TOKEN> {}" , message ) ; </a> 
<a> } </a> 
<a> @ Path ( <RARE_TOKEN> ) </a> 
<a> @ POST </a> 
<a> @ <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ) </a> 
<a> public void <RARE_TOKEN> ( @ FormParam ( <RARE_TOKEN> ) String <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = <RARE_TOKEN> . get ( <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> throw new <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> . bc . <RARE_TOKEN> ( <RARE_TOKEN> . get ( user ) . bc . <RARE_TOKEN> ( ) . getResource ( ) ) ; </a> 
<a> <RARE_TOKEN> . bc . broadcast ( user + " is <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> " , </a> 
<a> <RARE_TOKEN> . bc . <RARE_TOKEN> ( ) . getResource ( ) ) ; </a> 
<a> logger . info ( <RARE_TOKEN> is <RARE_TOKEN> {}" , user , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . samples . <RARE_TOKEN> ; </a> 
<a> import java . util . HashMap ; </a> 
<a> import java . util . Map ; </a> 
<a> public class <RARE_TOKEN> { </a> 
<a> private Map < String , <RARE_TOKEN> > map = new HashMap < String , <RARE_TOKEN> > ( ) ; </a> 
<a> public static class <RARE_TOKEN> { </a> 
<a> public final <RARE_TOKEN> bc ; </a> 
<a> public <RARE_TOKEN> ( <RARE_TOKEN> bc ) { </a> 
<a> this . bc = bc ; </a> 
<a> } </a> 
<a> } </a> 
<a> public synchronized <RARE_TOKEN> get ( String name ) { </a> 
<a> return map . get ( name ) ; </a> 
<a> } </a> 
<a> public synchronized <RARE_TOKEN> create ( String user , <RARE_TOKEN> bc ) { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = get ( user ) ; </a> 
<a> if ( <RARE_TOKEN> != null ) </a> 
<a> return null ; </a> 
<a> <RARE_TOKEN> = new <RARE_TOKEN> ( bc ) ; </a> 
<a> map . put ( user , <RARE_TOKEN> ) ; </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public synchronized boolean remove ( String user ) { </a> 
<a> return map . remove ( user ) != null ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package app ; </a> 
<a> import org . apache . <RARE_TOKEN> . Logger ; </a> 
<a> import org . apache . <RARE_TOKEN> . action . <RARE_TOKEN> ; </a> 
<a> import org . apache . <RARE_TOKEN> . action . <RARE_TOKEN> ; </a> 
<a> import org . apache . <RARE_TOKEN> . action . <RARE_TOKEN> ; </a> 
<a> import org . apache . <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . cpr . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . cpr . Broadcaster ; </a> 
<a> import org . atmosphere . cpr . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . cpr . <RARE_TOKEN> ; </a> 
<a> import javax . servlet . http . HttpServletRequest ; </a> 
<a> import javax . servlet . http . HttpServletResponse ; </a> 
<a> import java . util . <RARE_TOKEN> ; </a> 
<a> import java . util . List ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> public static final Logger logger = Logger . getLogger ( <RARE_TOKEN> . class ) ; </a> 
<a> private final List < <RARE_TOKEN> > list ; </a> 
<a> private final Broadcaster b = new <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> public <RARE_TOKEN> ( ) { </a> 
<a> list = new <RARE_TOKEN> < <RARE_TOKEN> > ( ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> <RARE_TOKEN> ( <RARE_TOKEN> mapping , <RARE_TOKEN> <RARE_TOKEN> , HttpServletRequest req , HttpServletResponse res ) throws Exception { </a> 
<a> logger . error ( <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> return mapping . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> <RARE_TOKEN> ( <RARE_TOKEN> mapping , <RARE_TOKEN> <RARE_TOKEN> , HttpServletRequest req , HttpServletResponse res ) throws Exception { </a> 
<a> logger . info ( <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> String value = req . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> res . <RARE_TOKEN> ( ) . print ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> " + value + <RARE_TOKEN> ) ; </a> 
<a> return null ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> <RARE_TOKEN> ( <RARE_TOKEN> mapping , <RARE_TOKEN> <RARE_TOKEN> , HttpServletRequest req , HttpServletResponse res ) throws Exception { </a> 
<a> logger . info ( <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> m = <RARE_TOKEN> . build ( req , list , null ) ; </a> 
<a> m . <RARE_TOKEN> ( b ) ; </a> 
<a> req . getSession ( ) . setAttribute ( <RARE_TOKEN> , m ) ; </a> 
<a> m . suspend ( - 1 ) ; </a> 
<a> m . broadcast ( req . <RARE_TOKEN> ( ) </a> 
<a> + <RARE_TOKEN> suspended a connection from " + req . <RARE_TOKEN> ( ) ) ; </a> 
<a> return null ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> <RARE_TOKEN> ( <RARE_TOKEN> mapping , <RARE_TOKEN> <RARE_TOKEN> , HttpServletRequest req , HttpServletResponse res ) throws Exception { </a> 
<a> logger . info ( <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> m = ( <RARE_TOKEN> ) req . getSession ( ) . getAttribute ( <RARE_TOKEN> ) ; </a> 
<a> logger . info ( <RARE_TOKEN> " + m ) ; </a> 
<a> res . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> String value = req . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> logger . debug ( <RARE_TOKEN> " + value ) ; </a> 
<a> m . broadcast ( <RARE_TOKEN> " + value + <RARE_TOKEN> ) ; </a> 
<a> res . <RARE_TOKEN> ( ) . write ( <RARE_TOKEN> ) ; </a> 
<a> res . <RARE_TOKEN> ( ) . flush ( ) ; </a> 
<a> return null ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . samples . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . cpr . AtmosphereHandler ; </a> 
<a> import org . atmosphere . cpr . AtmosphereResource ; </a> 
<a> import org . atmosphere . cpr . AtmosphereResourceEvent ; </a> 
<a> import org . atmosphere . cpr . Broadcaster ; </a> 
<a> import javax . servlet . http . HttpServletRequest ; </a> 
<a> import javax . servlet . http . HttpServletResponse ; </a> 
<a> import java . io . IOException ; </a> 
<a> import java . io . <RARE_TOKEN> ; </a> 
<a> public class <RARE_TOKEN> implements AtmosphereHandler < HttpServletRequest , HttpServletResponse > { </a> 
<a> private static <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( ) ; </a> 
<a> public void <RARE_TOKEN> ( AtmosphereResource < HttpServletRequest , HttpServletResponse > event ) throws IOException { </a> 
<a> HttpServletRequest req = event . getRequest ( ) ; </a> 
<a> HttpServletResponse res = event . getResponse ( ) ; </a> 
<a> res . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> res . addHeader ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> res . addHeader ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> if ( req . <RARE_TOKEN> ( ) . equalsIgnoreCase ( <RARE_TOKEN> ) ) { </a> 
<a> event . suspend ( ) ; </a> 
<a> } else if ( req . <RARE_TOKEN> ( ) . equalsIgnoreCase ( <RARE_TOKEN> ) ) { </a> 
<a> synchronized ( <RARE_TOKEN> ) { </a> 
<a> int <RARE_TOKEN> = - 1 ; </a> 
<a> String <RARE_TOKEN> = req . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> writer = res . <RARE_TOKEN> ( ) ; </a> 
<a> writer . println ( <RARE_TOKEN> is <RARE_TOKEN> + <RARE_TOKEN> + <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> writer . println ( <RARE_TOKEN> - <RARE_TOKEN> not <RARE_TOKEN> ) ; </a> 
<a> return ; </a> 
<a> } </a> 
<a> try { </a> 
<a> <RARE_TOKEN> = Integer . parseInt ( <RARE_TOKEN> ) ; </a> 
<a> } catch ( <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> writer . println ( <RARE_TOKEN> - <RARE_TOKEN> not an <RARE_TOKEN> " + <RARE_TOKEN> ) ; </a> 
<a> return ; </a> 
<a> } </a> 
<a> if ( ! <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ) { </a> 
<a> writer . println ( <RARE_TOKEN> - <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> writer . println ( <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> Broadcaster bc = event . getBroadcaster ( ) ; </a> 
<a> String response = <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> bc . broadcast ( response ) ; </a> 
<a> writer . flush ( ) ; </a> 
<a> if ( <RARE_TOKEN> . <RARE_TOKEN> ( ) != - 1 ) { </a> 
<a> <RARE_TOKEN> = new <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( </a> 
<a> AtmosphereResourceEvent < HttpServletRequest , HttpServletResponse > event ) throws IOException { </a> 
<a> if ( event . isCancelled ( ) ) { </a> 
<a> return ; </a> 
<a> } </a> 
<a> if ( ! event . <RARE_TOKEN> ( ) ) { </a> 
<a> String response = ( String ) event . getMessage ( ) ; </a> 
<a> response = <RARE_TOKEN> <RARE_TOKEN> + response + <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> writer = event . getResource ( ) . getResponse ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> writer . write ( response ) ; </a> 
<a> writer . flush ( ) ; </a> 
<a> event . getResource ( ) . resume ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public void destroy ( ) { </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . samples . <RARE_TOKEN> ; </a> 
<a> import javax . servlet . <RARE_TOKEN> ; </a> 
<a> import javax . ws . rs . GET ; </a> 
<a> import javax . ws . rs . Path ; </a> 
<a> import javax . ws . rs . <RARE_TOKEN> ; </a> 
<a> import javax . ws . rs . Produces ; </a> 
<a> import javax . ws . rs . core . Context ; </a> 
<a> import javax . ws . rs . core . <RARE_TOKEN> ; </a> 
<a> import java . io . InputStream ; </a> 
<a> @ Path ( "/" ) </a> 
<a> @ Produces ( <RARE_TOKEN> ) </a> 
<a> public class <RARE_TOKEN> { </a> 
<a> private </a> 
<a> @ Context </a> 
<a> <RARE_TOKEN> sc ; </a> 
<a> @ Path ( <RARE_TOKEN> ) </a> 
<a> @ GET </a> 
<a> public InputStream <RARE_TOKEN> ( @ <RARE_TOKEN> ( <RARE_TOKEN> ) <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> return sc . <RARE_TOKEN> ( <RARE_TOKEN> + <RARE_TOKEN> . getPath ( ) ) ; </a> 
<a> } </a> 
<a> @ GET </a> 
<a> public InputStream <RARE_TOKEN> ( ) { </a> 
<a> return sc . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . samples . <RARE_TOKEN> ; </a> 
<a> import com . <RARE_TOKEN> . http . client . <RARE_TOKEN> ; </a> 
<a> import com . <RARE_TOKEN> . http . client . AsyncHttpClient ; </a> 
<a> import com . <RARE_TOKEN> . http . client . Response ; </a> 
<a> import com . sun . jersey . <RARE_TOKEN> . resource . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . cpr . AtmosphereResourceEvent ; </a> 
<a> import org . atmosphere . cpr . Broadcaster ; </a> 
<a> import org . atmosphere . jersey . SuspendResponse ; </a> 
<a> import org . <RARE_TOKEN> . <RARE_TOKEN> . json . JSONObject ; </a> 
<a> import org . slf4j . Logger ; </a> 
<a> import org . slf4j . LoggerFactory ; </a> 
<a> import javax . servlet . http . HttpServletRequest ; </a> 
<a> import javax . servlet . http . HttpServletResponse ; </a> 
<a> import javax . ws . rs . GET ; </a> 
<a> import javax . ws . rs . Path ; </a> 
<a> import javax . ws . rs . <RARE_TOKEN> ; </a> 
<a> import javax . ws . rs . Produces ; </a> 
<a> import javax . ws . rs . <RARE_TOKEN> ; </a> 
<a> import java . util . concurrent . <RARE_TOKEN> ; </a> 
<a> import java . util . concurrent . ConcurrentHashMap ; </a> 
<a> import java . util . concurrent . CountDownLatch ; </a> 
<a> import java . util . concurrent . Future ; </a> 
<a> import java . util . concurrent . TimeUnit ; </a> 
<a> import java . util . concurrent . atomic . AtomicReference ; </a> 
<a> @ Path ( <RARE_TOKEN> ) </a> 
<a> @ Produces ( <RARE_TOKEN> ) </a> 
<a> @ <RARE_TOKEN> </a> 
<a> public class <RARE_TOKEN> { </a> 
<a> private static final Logger logger = LoggerFactory . getLogger ( <RARE_TOKEN> . class ) ; </a> 
<a> private final AsyncHttpClient <RARE_TOKEN> = new AsyncHttpClient ( ) ; </a> 
<a> private final ConcurrentHashMap < String , Future < ? > > futures = new ConcurrentHashMap < String , Future < ? > > ( ) ; </a> 
<a> private final CountDownLatch <RARE_TOKEN> = new CountDownLatch ( 1 ) ; </a> 
<a> @ GET </a> 
<a> public SuspendResponse < String > <RARE_TOKEN> ( final @ <RARE_TOKEN> ( <RARE_TOKEN> ) Broadcaster <RARE_TOKEN> , </a> 
<a> final @ <RARE_TOKEN> ( <RARE_TOKEN> ) String <RARE_TOKEN> ) { </a> 
<a> if ( <RARE_TOKEN> . isEmpty ( ) ) { </a> 
<a> throw new <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> . <RARE_TOKEN> ( ) . size ( ) == 0 ) { </a> 
<a> final Future < ? > future = <RARE_TOKEN> . <RARE_TOKEN> ( new <RARE_TOKEN> < String > ( ) { </a> 
<a> private final AtomicReference < String > <RARE_TOKEN> = new AtomicReference < String > ( "" ) ; </a> 
<a> public String <RARE_TOKEN> ( ) throws Exception { </a> 
<a> String <RARE_TOKEN> = null ; </a> 
<a> if ( ! <RARE_TOKEN> . get ( ) . isEmpty ( ) ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . get ( ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> + <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> . await ( ) ; </a> 
<a> <RARE_TOKEN> . prepareGet ( <RARE_TOKEN> + <RARE_TOKEN> ) . execute ( </a> 
<a> new <RARE_TOKEN> < Object > ( ) { </a> 
<a> @ Override </a> 
<a> public Object onCompleted ( Response response ) throws Exception { </a> 
<a> String s = response . <RARE_TOKEN> ( ) ; </a> 
<a> if ( response . <RARE_TOKEN> ( ) != 200 ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> . destroy ( ) ; </a> 
<a> logger . info ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> , s ) ; </a> 
<a> return null ; </a> 
<a> } </a> 
<a> JSONObject json = new JSONObject ( s ) ; </a> 
<a> <RARE_TOKEN> . set ( json . getString ( <RARE_TOKEN> ) ) ; </a> 
<a> if ( json . <RARE_TOKEN> ( <RARE_TOKEN> ) . length ( ) > 1 ) { </a> 
<a> <RARE_TOKEN> . broadcast ( s ) . get ( ) ; </a> 
<a> } </a> 
<a> return null ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> return null ; </a> 
<a> } </a> 
<a> } , 1 , TimeUnit . SECONDS ) ; </a> 
<a> futures . put ( <RARE_TOKEN> , future ) ; </a> 
<a> } </a> 
<a> return new SuspendResponse . <RARE_TOKEN> < String > ( ) . broadcaster ( <RARE_TOKEN> ) . outputComments ( true ) </a> 
<a> . addListener ( new <RARE_TOKEN> ( ) { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( </a> 
<a> final AtmosphereResourceEvent < HttpServletRequest , HttpServletResponse > event ) { </a> 
<a> super . <RARE_TOKEN> ( event ) ; </a> 
<a> <RARE_TOKEN> . countDown ( ) ; </a> 
<a> } </a> 
<a> } ) . build ( ) ; </a> 
<a> } </a> 
<a> @ GET </a> 
<a> @ Path ( <RARE_TOKEN> ) </a> 
<a> public String <RARE_TOKEN> ( final @ <RARE_TOKEN> ( <RARE_TOKEN> ) Broadcaster <RARE_TOKEN> , </a> 
<a> final @ <RARE_TOKEN> ( <RARE_TOKEN> ) String <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> futures . get ( <RARE_TOKEN> ) . cancel ( true ) ; </a> 
<a> logger . info ( <RARE_TOKEN> <RARE_TOKEN> time <RARE_TOKEN> for {}" , <RARE_TOKEN> ) ; </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . samples . <RARE_TOKEN> ; </a> 
<a> import org . apache . <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import org . apache . <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import org . apache . <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import org . apache . <RARE_TOKEN> . model . <RARE_TOKEN> ; </a> 
<a> import java . util . Date ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> public <RARE_TOKEN> ( String id ) { </a> 
<a> super ( id ) ; </a> 
<a> add ( new <RARE_TOKEN> < <RARE_TOKEN> > ( <RARE_TOKEN> , <RARE_TOKEN> . class ) ) ; </a> 
<a> add ( new <RARE_TOKEN> ( <RARE_TOKEN> , new <RARE_TOKEN> < String > ( ) { </a> 
<a> @ Override </a> 
<a> public String <RARE_TOKEN> ( ) { </a> 
<a> return new Date ( ) . toString ( ) ; </a> 
<a> } </a> 
<a> } ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . samples . <RARE_TOKEN> ; </a> 
<a> import org . apache . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import org . apache . <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import org . apache . <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> private static final long serialVersionUID = <RARE_TOKEN> ; </a> 
<a> public <RARE_TOKEN> ( final <RARE_TOKEN> parameters ) { </a> 
<a> add ( new <RARE_TOKEN> ( "message" , <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> the time <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ) ; </a> 
<a> add ( new <RARE_TOKEN> ( <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package org . atmosphere . samples . <RARE_TOKEN> ; </a> 
<a> import org . apache . <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . cpr . AtmosphereResourceEvent ; </a> 
<a> import org . atmosphere . cpr . AtmosphereResourceEventListener ; </a> 
<a> import org . atmosphere . cpr . <RARE_TOKEN> ; </a> 
<a> import org . slf4j . Logger ; </a> 
<a> import org . slf4j . LoggerFactory ; </a> 
<a> import javax . servlet . http . HttpServletRequest ; </a> 
<a> import javax . servlet . http . HttpServletResponse ; </a> 
<a> import java . util . Date ; </a> 
<a> import java . util . concurrent . <RARE_TOKEN> ; </a> 
<a> import java . util . concurrent . atomic . AtomicBoolean ; </a> 
<a> import static org . atmosphere . cpr . HeaderConfig . <RARE_TOKEN> ; </a> 
<a> import static org . atmosphere . cpr . HeaderConfig . <RARE_TOKEN> ; </a> 
<a> import static org . atmosphere . cpr . HeaderConfig . <RARE_TOKEN> ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> implements AtmosphereResourceEventListener { </a> 
<a> private static final Logger logger = LoggerFactory . getLogger ( <RARE_TOKEN> . class ) ; </a> 
<a> private final AtomicBoolean <RARE_TOKEN> = new AtomicBoolean ( false ) ; </a> 
<a> public <RARE_TOKEN> ( ) { </a> 
<a> HttpServletRequest req = <RARE_TOKEN> ( ) . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = <RARE_TOKEN> . build ( req ) ; </a> 
<a> if ( ! <RARE_TOKEN> . <RARE_TOKEN> ( true ) ) { </a> 
<a> <RARE_TOKEN> . schedule ( new <RARE_TOKEN> < String > ( ) { </a> 
<a> public String <RARE_TOKEN> ( ) { </a> 
<a> String s = new Date ( ) . toString ( ) ; </a> 
<a> return s ; </a> 
<a> } </a> 
<a> } , 1 ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> . addListener ( this ) ; </a> 
<a> String transport = req . getHeader ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . suspend ( - 1 , ! ( transport != null && transport . equalsIgnoreCase ( <RARE_TOKEN> ) ) ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( AtmosphereResourceEvent < HttpServletRequest , HttpServletResponse > event ) { </a> 
<a> logger . info ( <RARE_TOKEN> {}" , event . getMessage ( ) ) ; </a> 
<a> String transport = event . getResource ( ) . getRequest ( ) . getHeader ( <RARE_TOKEN> ) ; </a> 
<a> if ( transport != null && transport . equalsIgnoreCase ( <RARE_TOKEN> ) ) { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( event . getResource ( ) . getRequest ( ) ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( this ) ; </a> 
<a> <RARE_TOKEN> . resume ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( AtmosphereResourceEvent < HttpServletRequest , HttpServletResponse > event ) { </a> 
<a> String transport = event . getResource ( ) . getRequest ( ) . getHeader ( <RARE_TOKEN> ) ; </a> 
<a> HttpServletRequest req = event . getResource ( ) . getRequest ( ) ; </a> 
<a> logger . info ( <RARE_TOKEN> the <RARE_TOKEN> response from <RARE_TOKEN> <RARE_TOKEN> , </a> 
<a> new Object [ ] { transport == null ? <RARE_TOKEN> : transport , req . <RARE_TOKEN> ( ) , req . <RARE_TOKEN> ( ) } ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( AtmosphereResourceEvent < HttpServletRequest , HttpServletResponse > event ) { </a> 
<a> String transport = event . getResource ( ) . getRequest ( ) . getHeader ( <RARE_TOKEN> ) ; </a> 
<a> HttpServletRequest req = event . getResource ( ) . getRequest ( ) ; </a> 
<a> logger . info ( <RARE_TOKEN> the <RARE_TOKEN> response from <RARE_TOKEN> <RARE_TOKEN> , </a> 
<a> new Object [ ] { transport == null ? <RARE_TOKEN> : transport , req . <RARE_TOKEN> ( ) , req . <RARE_TOKEN> ( ) } ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( AtmosphereResourceEvent < HttpServletRequest , HttpServletResponse > event ) { </a> 
<a> String transport = event . getResource ( ) . getRequest ( ) . getHeader ( <RARE_TOKEN> ) ; </a> 
<a> HttpServletRequest req = event . getResource ( ) . getRequest ( ) ; </a> 
<a> logger . info ( <RARE_TOKEN> connection <RARE_TOKEN> from <RARE_TOKEN> <RARE_TOKEN> , </a> 
<a> new Object [ ] { transport == null ? <RARE_TOKEN> : transport , req . <RARE_TOKEN> ( ) , req . <RARE_TOKEN> ( ) } ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( AtmosphereResourceEvent < HttpServletRequest , HttpServletResponse > event ) { </a> 
<a> logger . info ( <RARE_TOKEN> , event . throwable ( ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> package org . atmosphere . samples . test ; </a> 
<a> import org . <RARE_TOKEN> . jetty . <RARE_TOKEN> ; </a> 
<a> import org . <RARE_TOKEN> . jetty . <RARE_TOKEN> ; </a> 
<a> import org . <RARE_TOKEN> . jetty . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import org . <RARE_TOKEN> . jetty . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> public class <RARE_TOKEN> { </a> 
<a> public static void <RARE_TOKEN> ( String [ ] args ) throws Exception { </a> 
<a> <RARE_TOKEN> server = new <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( 1000 * <RARE_TOKEN> * <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( - 1 ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> server . <RARE_TOKEN> ( new <RARE_TOKEN> [ ] { <RARE_TOKEN> } ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( server ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( "/" ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> server . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> try { </a> 
<a> System . out . println ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> server . start ( ) ; </a> 
<a> System . in . read ( ) ; </a> 
<a> System . out . println ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> server . <RARE_TOKEN> ( ) ; </a> 
<a> server . <RARE_TOKEN> ( ) ; </a> 
<a> } catch ( Exception e ) { </a> 
<a> e . printStackTrace ( ) ; </a> 
<a> System . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> package org . atmosphere . samples . test ; </a> 
<a> import junit . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import org . apache . <RARE_TOKEN> . util . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . samples . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import org . atmosphere . samples . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ) throws <RARE_TOKEN> , <RARE_TOKEN> { </a> 
<a> <RARE_TOKEN> = new <RARE_TOKEN> ( new <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> . class ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> . class ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( "message" , <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> the time <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package com . facebook . <RARE_TOKEN> ; </a> 
<a> import android . app . Activity ; </a> 
<a> import android . os . Bundle ; </a> 
<a> public class <RARE_TOKEN> extends Activity </a> 
<a> { </a> 
<a> @ Override </a> 
<a> public void onCreate ( Bundle savedInstanceState ) </a> 
<a> { </a> 
<a> super . onCreate ( savedInstanceState ) ; </a> 
<a> <RARE_TOKEN> ( R . layout . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package com . facebook ; </a> 
<a> import android . annotation . <RARE_TOKEN> ; </a> 
<a> import android . content . Intent ; </a> 
<a> import android . os . Bundle ; </a> 
<a> import android . text . <RARE_TOKEN> ; </a> 
<a> import com . facebook . internal . Utility ; </a> 
<a> import com . facebook . internal . Validate ; </a> 
<a> import java . io . <RARE_TOKEN> ; </a> 
<a> import java . io . <RARE_TOKEN> ; </a> 
<a> import java . io . Serializable ; </a> 
<a> import java . util . ArrayList ; </a> 
<a> import java . util . Collections ; </a> 
<a> import java . util . Date ; </a> 
<a> import java . util . List ; </a> 
<a> public final class AccessToken implements Serializable { </a> 
<a> private static final long serialVersionUID = <RARE_TOKEN> ; </a> 
<a> static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final Date <RARE_TOKEN> = new Date ( Long . <RARE_TOKEN> ) ; </a> 
<a> private static final Date <RARE_TOKEN> = new Date ( Long . MAX_VALUE ) ; </a> 
<a> private static final Date <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final Date <RARE_TOKEN> = new Date ( ) ; </a> 
<a> private static final AccessTokenSource <RARE_TOKEN> = AccessTokenSource . <RARE_TOKEN> ; </a> 
<a> private static final Date <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private final Date <RARE_TOKEN> ; </a> 
<a> private final List < String > permissions ; </a> 
<a> private final String token ; </a> 
<a> private final AccessTokenSource source ; </a> 
<a> private final Date <RARE_TOKEN> ; </a> 
<a> AccessToken ( String token , Date <RARE_TOKEN> , List < String > permissions , AccessTokenSource source , Date <RARE_TOKEN> ) { </a> 
<a> if ( permissions == null ) { </a> 
<a> permissions = Collections . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> this . permissions = Collections . <RARE_TOKEN> ( permissions ) ; </a> 
<a> this . token = token ; </a> 
<a> this . source = source ; </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public String getToken ( ) { </a> 
<a> return this . token ; </a> 
<a> } </a> 
<a> public Date <RARE_TOKEN> ( ) { </a> 
<a> return this . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public List < String > getPermissions ( ) { </a> 
<a> return this . permissions ; </a> 
<a> } </a> 
<a> public AccessTokenSource <RARE_TOKEN> ( ) { </a> 
<a> return source ; </a> 
<a> } </a> 
<a> public Date <RARE_TOKEN> ( ) { </a> 
<a> return this . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public static AccessToken <RARE_TOKEN> ( String accessToken , Date <RARE_TOKEN> , </a> 
<a> Date <RARE_TOKEN> , AccessTokenSource <RARE_TOKEN> , List < String > permissions ) { </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> return new AccessToken ( accessToken , <RARE_TOKEN> , permissions , <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public static AccessToken <RARE_TOKEN> ( Intent intent ) { </a> 
<a> Validate . <RARE_TOKEN> ( intent , <RARE_TOKEN> ) ; </a> 
<a> if ( intent . <RARE_TOKEN> ( ) == null ) { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> return <RARE_TOKEN> ( null , intent . <RARE_TOKEN> ( ) , AccessTokenSource . <RARE_TOKEN> , new Date ( ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public String toString ( ) { </a> 
<a> StringBuilder builder = new StringBuilder ( ) ; </a> 
<a> builder . append ( <RARE_TOKEN> ) ; </a> 
<a> builder . append ( " <RARE_TOKEN> ) . append ( <RARE_TOKEN> ( ) ) ; </a> 
<a> <RARE_TOKEN> ( builder ) ; </a> 
<a> builder . append ( <RARE_TOKEN> ) ; </a> 
<a> return builder . toString ( ) ; </a> 
<a> } </a> 
<a> static AccessToken <RARE_TOKEN> ( List < String > permissions ) { </a> 
<a> return new AccessToken ( "" , <RARE_TOKEN> , permissions , AccessTokenSource . <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> static AccessToken <RARE_TOKEN> ( String token , List < String > permissions , AccessTokenSource source ) { </a> 
<a> return new AccessToken ( token , <RARE_TOKEN> , permissions , source , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> static AccessToken <RARE_TOKEN> ( Bundle bundle , AccessTokenSource source ) { </a> 
<a> Date <RARE_TOKEN> = <RARE_TOKEN> ( </a> 
<a> bundle , NativeProtocol . <RARE_TOKEN> , new Date ( 0 ) ) ; </a> 
<a> ArrayList < String > permissions = bundle . <RARE_TOKEN> ( NativeProtocol . <RARE_TOKEN> ) ; </a> 
<a> String token = bundle . getString ( NativeProtocol . <RARE_TOKEN> ) ; </a> 
<a> return <RARE_TOKEN> ( permissions , token , <RARE_TOKEN> , source ) ; </a> 
<a> } </a> 
<a> static AccessToken <RARE_TOKEN> ( List < String > <RARE_TOKEN> , Bundle bundle , AccessTokenSource source ) { </a> 
<a> Date <RARE_TOKEN> = <RARE_TOKEN> ( bundle , <RARE_TOKEN> , new Date ( ) ) ; </a> 
<a> String token = bundle . getString ( <RARE_TOKEN> ) ; </a> 
<a> return <RARE_TOKEN> ( <RARE_TOKEN> , token , <RARE_TOKEN> , source ) ; </a> 
<a> } </a> 
<a> @ <RARE_TOKEN> ( <RARE_TOKEN> ) </a> 
<a> static AccessToken <RARE_TOKEN> ( AccessToken current , Bundle bundle ) { </a> 
<a> assert ( current . source == AccessTokenSource . <RARE_TOKEN> || </a> 
<a> current . source == AccessTokenSource . <RARE_TOKEN> || </a> 
<a> current . source == AccessTokenSource . <RARE_TOKEN> ) ; </a> 
<a> Date <RARE_TOKEN> = <RARE_TOKEN> ( bundle , <RARE_TOKEN> , new Date ( 0 ) ) ; </a> 
<a> String token = bundle . getString ( <RARE_TOKEN> ) ; </a> 
<a> return <RARE_TOKEN> ( current . getPermissions ( ) , token , <RARE_TOKEN> , current . source ) ; </a> 
<a> } </a> 
<a> static AccessToken <RARE_TOKEN> ( AccessToken token , List < String > permissions ) { </a> 
<a> return new AccessToken ( token . token , token . <RARE_TOKEN> , permissions , token . source , token . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> private static AccessToken <RARE_TOKEN> ( </a> 
<a> List < String > <RARE_TOKEN> , String accessToken , Date <RARE_TOKEN> , AccessTokenSource source ) { </a> 
<a> if ( Utility . <RARE_TOKEN> ( accessToken ) || ( <RARE_TOKEN> == null ) ) { </a> 
<a> return <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } else { </a> 
<a> return new AccessToken ( accessToken , <RARE_TOKEN> , <RARE_TOKEN> , source , new Date ( ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> static AccessToken <RARE_TOKEN> ( Bundle bundle ) { </a> 
<a> List < String > <RARE_TOKEN> = bundle . <RARE_TOKEN> ( TokenCachingStrategy . <RARE_TOKEN> ) ; </a> 
<a> List < String > permissions ; </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> permissions = Collections . <RARE_TOKEN> ( ) ; </a> 
<a> } else { </a> 
<a> permissions = Collections . <RARE_TOKEN> ( new ArrayList < String > ( <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> return new AccessToken ( bundle . getString ( TokenCachingStrategy . <RARE_TOKEN> ) , TokenCachingStrategy . <RARE_TOKEN> ( bundle , </a> 
<a> TokenCachingStrategy . <RARE_TOKEN> ) , permissions , TokenCachingStrategy . <RARE_TOKEN> ( bundle ) , </a> 
<a> TokenCachingStrategy . <RARE_TOKEN> ( bundle , TokenCachingStrategy . <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> Bundle <RARE_TOKEN> ( ) { </a> 
<a> Bundle bundle = new Bundle ( ) ; </a> 
<a> bundle . putString ( TokenCachingStrategy . <RARE_TOKEN> , this . token ) ; </a> 
<a> TokenCachingStrategy . <RARE_TOKEN> ( bundle , TokenCachingStrategy . <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> bundle . <RARE_TOKEN> ( TokenCachingStrategy . <RARE_TOKEN> , new ArrayList < String > ( permissions ) ) ; </a> 
<a> bundle . <RARE_TOKEN> ( TokenCachingStrategy . <RARE_TOKEN> , source ) ; </a> 
<a> TokenCachingStrategy . <RARE_TOKEN> ( bundle , TokenCachingStrategy . <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> return bundle ; </a> 
<a> } </a> 
<a> boolean <RARE_TOKEN> ( ) { </a> 
<a> return Utility . <RARE_TOKEN> ( this . token ) || new Date ( ) . <RARE_TOKEN> ( this . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> private static AccessToken <RARE_TOKEN> ( List < String > <RARE_TOKEN> , Bundle bundle , </a> 
<a> AccessTokenSource source , </a> 
<a> Date <RARE_TOKEN> ) { </a> 
<a> String token = bundle . getString ( <RARE_TOKEN> ) ; </a> 
<a> Date <RARE_TOKEN> = <RARE_TOKEN> ( bundle , <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> if ( Utility . <RARE_TOKEN> ( token ) || ( <RARE_TOKEN> == null ) ) { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> return new AccessToken ( token , <RARE_TOKEN> , <RARE_TOKEN> , source , new Date ( ) ) ; </a> 
<a> } </a> 
<a> private String <RARE_TOKEN> ( ) { </a> 
<a> if ( this . token == null ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } else if ( <RARE_TOKEN> . <RARE_TOKEN> ( LoggingBehavior . <RARE_TOKEN> ) ) { </a> 
<a> return this . token ; </a> 
<a> } else { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( StringBuilder builder ) { </a> 
<a> builder . append ( " <RARE_TOKEN> ) ; </a> 
<a> if ( this . permissions == null ) { </a> 
<a> builder . append ( <RARE_TOKEN> ) ; </a> 
<a> } else { </a> 
<a> builder . append ( <RARE_TOKEN> ) ; </a> 
<a> builder . append ( <RARE_TOKEN> . <RARE_TOKEN> ( ", " , permissions ) ) ; </a> 
<a> builder . append ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private static class <RARE_TOKEN> implements Serializable { </a> 
<a> private static final long serialVersionUID = - <RARE_TOKEN> ; </a> 
<a> private final Date <RARE_TOKEN> ; </a> 
<a> private final List < String > permissions ; </a> 
<a> private final String token ; </a> 
<a> private final AccessTokenSource source ; </a> 
<a> private final Date <RARE_TOKEN> ; </a> 
<a> private <RARE_TOKEN> ( String token , Date <RARE_TOKEN> , </a> 
<a> List < String > permissions , AccessTokenSource source , Date <RARE_TOKEN> ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> this . permissions = permissions ; </a> 
<a> this . token = token ; </a> 
<a> this . source = source ; </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> private Object <RARE_TOKEN> ( ) { </a> 
<a> return new AccessToken ( token , <RARE_TOKEN> , permissions , source , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private Object <RARE_TOKEN> ( ) { </a> 
<a> return new <RARE_TOKEN> ( token , <RARE_TOKEN> , permissions , source , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( <RARE_TOKEN> stream ) throws <RARE_TOKEN> { </a> 
<a> throw new <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> private static Date <RARE_TOKEN> ( Bundle bundle , String key , Date <RARE_TOKEN> ) { </a> 
<a> if ( bundle == null ) { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> long <RARE_TOKEN> = Long . <RARE_TOKEN> ; </a> 
<a> Object <RARE_TOKEN> = bundle . get ( key ) ; </a> 
<a> if ( <RARE_TOKEN> instanceof Long ) { </a> 
<a> <RARE_TOKEN> = ( Long ) <RARE_TOKEN> ; </a> 
<a> } else if ( <RARE_TOKEN> instanceof String ) { </a> 
<a> try { </a> 
<a> <RARE_TOKEN> = Long . <RARE_TOKEN> ( ( String ) <RARE_TOKEN> ) ; </a> 
<a> } catch ( <RARE_TOKEN> e ) { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> } else { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> == 0 ) { </a> 
<a> return new Date ( Long . MAX_VALUE ) ; </a> 
<a> } else { </a> 
<a> return new Date ( <RARE_TOKEN> . getTime ( ) + ( <RARE_TOKEN> * <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package com . facebook ; </a> 
<a> public enum AccessTokenSource { </a> 
<a> <RARE_TOKEN> ( false ) , </a> 
<a> <RARE_TOKEN> ( true ) , </a> 
<a> <RARE_TOKEN> ( true ) , </a> 
<a> <RARE_TOKEN> ( true ) , </a> 
<a> <RARE_TOKEN> ( false ) , </a> 
<a> <RARE_TOKEN> ( true ) ; </a> 
<a> private final boolean <RARE_TOKEN> ; </a> 
<a> AccessTokenSource ( boolean <RARE_TOKEN> ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> boolean <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package com . facebook ; </a> 
<a> import android . <RARE_TOKEN> ; </a> 
<a> import android . app . Activity ; </a> 
<a> import android . content . <RARE_TOKEN> ; </a> 
<a> import android . content . Context ; </a> 
<a> import android . content . Intent ; </a> 
<a> import android . content . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import android . os . Bundle ; </a> 
<a> import android . text . <RARE_TOKEN> ; </a> 
<a> import android . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import com . facebook . android . R ; </a> 
<a> import com . facebook . internal . <RARE_TOKEN> ; </a> 
<a> import com . facebook . internal . Utility ; </a> 
<a> import com . facebook . model . <RARE_TOKEN> ; </a> 
<a> import com . facebook . model . GraphObject ; </a> 
<a> import com . facebook . model . GraphObjectList ; </a> 
<a> import com . facebook . model . GraphUser ; </a> 
<a> import com . facebook . widget . <RARE_TOKEN> ; </a> 
<a> import java . io . Serializable ; </a> 
<a> import java . util . ArrayList ; </a> 
<a> import java . util . List ; </a> 
<a> class AuthorizationClient implements Serializable { </a> 
<a> private static final long serialVersionUID = <RARE_TOKEN> ; </a> 
<a> List < <RARE_TOKEN> > <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> Context context ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> boolean <RARE_TOKEN> ; </a> 
<a> AuthorizationRequest pendingRequest ; </a> 
<a> interface <RARE_TOKEN> { </a> 
<a> void onCompleted ( Result result ) ; </a> 
<a> } </a> 
<a> interface <RARE_TOKEN> { </a> 
<a> void <RARE_TOKEN> ( ) ; </a> 
<a> void <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> interface <RARE_TOKEN> { </a> 
<a> public void <RARE_TOKEN> ( Intent intent , int requestCode ) ; </a> 
<a> public Activity <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> void <RARE_TOKEN> ( final Context context ) { </a> 
<a> this . context = context ; </a> 
<a> <RARE_TOKEN> = null ; </a> 
<a> } </a> 
<a> void <RARE_TOKEN> ( final Activity activity ) { </a> 
<a> this . context = activity ; </a> 
<a> <RARE_TOKEN> = new <RARE_TOKEN> ( ) { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( Intent intent , int requestCode ) { </a> 
<a> activity . <RARE_TOKEN> ( intent , requestCode ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public Activity <RARE_TOKEN> ( ) { </a> 
<a> return activity ; </a> 
<a> } </a> 
<a> } ; </a> 
<a> } </a> 
<a> void <RARE_TOKEN> ( AuthorizationRequest request ) { </a> 
<a> if ( <RARE_TOKEN> ( ) ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> ( request ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> void <RARE_TOKEN> ( AuthorizationRequest request ) { </a> 
<a> if ( request == null ) { </a> 
<a> return ; </a> 
<a> } </a> 
<a> if ( pendingRequest != null ) { </a> 
<a> throw new FacebookException ( <RARE_TOKEN> to <RARE_TOKEN> while a request is <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( request . <RARE_TOKEN> ( ) && ! <RARE_TOKEN> ( ) ) { </a> 
<a> return ; </a> 
<a> } </a> 
<a> pendingRequest = request ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ( request ) ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> void <RARE_TOKEN> ( ) { </a> 
<a> if ( pendingRequest == null || <RARE_TOKEN> == null ) { </a> 
<a> throw new FacebookException ( <RARE_TOKEN> to continue <RARE_TOKEN> <RARE_TOKEN> a <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> . <RARE_TOKEN> ( ) ) { </a> 
<a> <RARE_TOKEN> . cancel ( ) ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> boolean <RARE_TOKEN> ( ) { </a> 
<a> return pendingRequest != null && <RARE_TOKEN> != null ; </a> 
<a> } </a> 
<a> void <RARE_TOKEN> ( ) { </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> . cancel ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> boolean onActivityResult ( int requestCode , int resultCode , Intent data ) { </a> 
<a> if ( requestCode == pendingRequest . <RARE_TOKEN> ( ) ) { </a> 
<a> return <RARE_TOKEN> . onActivityResult ( requestCode , resultCode , data ) ; </a> 
<a> } </a> 
<a> return false ; </a> 
<a> } </a> 
<a> private List < <RARE_TOKEN> > <RARE_TOKEN> ( AuthorizationRequest request ) { </a> 
<a> ArrayList < <RARE_TOKEN> > <RARE_TOKEN> = new ArrayList < <RARE_TOKEN> > ( ) ; </a> 
<a> final SessionLoginBehavior <RARE_TOKEN> = request . <RARE_TOKEN> ( ) ; </a> 
<a> if ( <RARE_TOKEN> . <RARE_TOKEN> ( ) ) { </a> 
<a> if ( ! request . <RARE_TOKEN> ( ) ) { </a> 
<a> <RARE_TOKEN> . add ( new <RARE_TOKEN> ( ) ) ; </a> 
<a> <RARE_TOKEN> . add ( new <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> . add ( new <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> . <RARE_TOKEN> ( ) ) { </a> 
<a> <RARE_TOKEN> . add ( new <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> boolean <RARE_TOKEN> ( ) { </a> 
<a> if ( <RARE_TOKEN> ) { </a> 
<a> return true ; </a> 
<a> } </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> != <RARE_TOKEN> . <RARE_TOKEN> ) { </a> 
<a> String <RARE_TOKEN> = context . getString ( R . string . <RARE_TOKEN> ) ; </a> 
<a> String <RARE_TOKEN> = context . getString ( R . string . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( Result . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ) ; </a> 
<a> return false ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> = true ; </a> 
<a> return true ; </a> 
<a> } </a> 
<a> void <RARE_TOKEN> ( ) { </a> 
<a> while ( <RARE_TOKEN> != null && ! <RARE_TOKEN> . isEmpty ( ) ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . remove ( 0 ) ; </a> 
<a> boolean <RARE_TOKEN> = <RARE_TOKEN> ( ) ; </a> 
<a> if ( <RARE_TOKEN> ) { </a> 
<a> return ; </a> 
<a> } </a> 
<a> } </a> 
<a> if ( pendingRequest != null ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> ( Result . <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> , null ) ) ; </a> 
<a> } </a> 
<a> boolean <RARE_TOKEN> ( ) { </a> 
<a> if ( <RARE_TOKEN> . <RARE_TOKEN> ( ) && ! <RARE_TOKEN> ( ) ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> return <RARE_TOKEN> . <RARE_TOKEN> ( pendingRequest ) ; </a> 
<a> } </a> 
<a> void <RARE_TOKEN> ( Result <RARE_TOKEN> ) { </a> 
<a> if ( <RARE_TOKEN> . token != null && pendingRequest . <RARE_TOKEN> ( ) ) { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> void <RARE_TOKEN> ( Result <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> = null ; </a> 
<a> <RARE_TOKEN> = null ; </a> 
<a> pendingRequest = null ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> void <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> void <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> ( ) { </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } else if ( pendingRequest != null ) { </a> 
<a> return new <RARE_TOKEN> ( ) { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( Intent intent , int requestCode ) { </a> 
<a> pendingRequest . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( intent , requestCode ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public Activity <RARE_TOKEN> ( ) { </a> 
<a> return pendingRequest . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } ; </a> 
<a> } </a> 
<a> return null ; </a> 
<a> } </a> 
<a> int <RARE_TOKEN> ( String <RARE_TOKEN> ) { </a> 
<a> return context . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> void <RARE_TOKEN> ( Result <RARE_TOKEN> ) { </a> 
<a> if ( <RARE_TOKEN> . token == null ) { </a> 
<a> throw new FacebookException ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> a <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> RequestBatch batch = <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> batch . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> RequestBatch <RARE_TOKEN> ( final Result <RARE_TOKEN> ) { </a> 
<a> final ArrayList < String > <RARE_TOKEN> = new ArrayList < String > ( ) ; </a> 
<a> final ArrayList < String > <RARE_TOKEN> = new ArrayList < String > ( ) ; </a> 
<a> final String <RARE_TOKEN> = <RARE_TOKEN> . token . getToken ( ) ; </a> 
<a> Request . Callback <RARE_TOKEN> = new Request . Callback ( ) { </a> 
<a> @ Override </a> 
<a> public void onCompleted ( Response response ) { </a> 
<a> try { </a> 
<a> GraphUser user = response . <RARE_TOKEN> ( GraphUser . class ) ; </a> 
<a> if ( user != null ) { </a> 
<a> <RARE_TOKEN> . add ( user . getId ( ) ) ; </a> 
<a> } </a> 
<a> } catch ( Exception ex ) { </a> 
<a> } </a> 
<a> } </a> 
<a> } ; </a> 
<a> String <RARE_TOKEN> = pendingRequest . <RARE_TOKEN> ( ) ; </a> 
<a> Request <RARE_TOKEN> = <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . setCallback ( <RARE_TOKEN> ) ; </a> 
<a> Request <RARE_TOKEN> = <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . setCallback ( <RARE_TOKEN> ) ; </a> 
<a> Request <RARE_TOKEN> = <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . setCallback ( new Request . Callback ( ) { </a> 
<a> @ Override </a> 
<a> public void onCompleted ( Response response ) { </a> 
<a> try { </a> 
<a> <RARE_TOKEN> result = response . <RARE_TOKEN> ( <RARE_TOKEN> . class ) ; </a> 
<a> if ( result != null ) { </a> 
<a> GraphObjectList < GraphObject > data = result . getData ( ) ; </a> 
<a> if ( data != null && data . size ( ) == 1 ) { </a> 
<a> GraphObject permissions = data . get ( 0 ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( permissions . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } catch ( Exception ex ) { </a> 
<a> } </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> RequestBatch batch = new RequestBatch ( <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> ) ; </a> 
<a> batch . <RARE_TOKEN> ( pendingRequest . <RARE_TOKEN> ( ) ) ; </a> 
<a> batch . <RARE_TOKEN> ( new RequestBatch . Callback ( ) { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( RequestBatch batch ) { </a> 
<a> try { </a> 
<a> Result result = null ; </a> 
<a> if ( <RARE_TOKEN> . size ( ) == 2 && <RARE_TOKEN> . get ( 0 ) != null && <RARE_TOKEN> . get ( 1 ) != null && </a> 
<a> <RARE_TOKEN> . get ( 0 ) . equals ( <RARE_TOKEN> . get ( 1 ) ) ) { </a> 
<a> AccessToken <RARE_TOKEN> = AccessToken </a> 
<a> . <RARE_TOKEN> ( <RARE_TOKEN> . token , </a> 
<a> <RARE_TOKEN> ) ; </a> 
<a> result = Result . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } else { </a> 
<a> result = Result </a> 
<a> . <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> in <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> , null ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( result ) ; </a> 
<a> } catch ( Exception ex ) { </a> 
<a> <RARE_TOKEN> ( Result . <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> , ex . getMessage ( ) ) ) ; </a> 
<a> } finally { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> return batch ; </a> 
<a> } </a> 
<a> Request <RARE_TOKEN> ( String accessToken ) { </a> 
<a> Bundle parameters = new Bundle ( ) ; </a> 
<a> parameters . putString ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> parameters . putString ( <RARE_TOKEN> , accessToken ) ; </a> 
<a> return new Request ( null , <RARE_TOKEN> , parameters , HttpMethod . GET , null ) ; </a> 
<a> } </a> 
<a> Request <RARE_TOKEN> ( String accessToken ) { </a> 
<a> Bundle parameters = new Bundle ( ) ; </a> 
<a> parameters . putString ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> parameters . putString ( <RARE_TOKEN> , accessToken ) ; </a> 
<a> return new Request ( null , <RARE_TOKEN> , parameters , HttpMethod . GET , null ) ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( Result <RARE_TOKEN> ) { </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> . onCompleted ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( ) { </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( ) { </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> abstract class <RARE_TOKEN> implements Serializable { </a> 
<a> private static final long serialVersionUID = <RARE_TOKEN> ; </a> 
<a> abstract boolean <RARE_TOKEN> ( AuthorizationRequest request ) ; </a> 
<a> boolean onActivityResult ( int requestCode , int resultCode , Intent data ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> boolean <RARE_TOKEN> ( ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> boolean <RARE_TOKEN> ( ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> void cancel ( ) { </a> 
<a> } </a> 
<a> } </a> 
<a> class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> private static final long serialVersionUID = <RARE_TOKEN> ; </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> @ Override </a> 
<a> boolean <RARE_TOKEN> ( ) { </a> 
<a> return true ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> boolean <RARE_TOKEN> ( ) { </a> 
<a> return true ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> void cancel ( ) { </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> . dismiss ( ) ; </a> 
<a> <RARE_TOKEN> = null ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> boolean <RARE_TOKEN> ( final AuthorizationRequest request ) { </a> 
<a> String applicationId = request . <RARE_TOKEN> ( ) ; </a> 
<a> Bundle parameters = new Bundle ( ) ; </a> 
<a> if ( ! Utility . <RARE_TOKEN> ( request . getPermissions ( ) ) ) { </a> 
<a> parameters . putString ( <RARE_TOKEN> . <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> , request . getPermissions ( ) ) ) ; </a> 
<a> } </a> 
<a> Utility . <RARE_TOKEN> ( context ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> listener = new <RARE_TOKEN> . <RARE_TOKEN> ( ) { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( Bundle values , FacebookException error ) { </a> 
<a> <RARE_TOKEN> ( request , values , error ) ; </a> 
<a> } </a> 
<a> } ; </a> 
<a> <RARE_TOKEN> . Builder builder = </a> 
<a> new <RARE_TOKEN> ( <RARE_TOKEN> ( ) . <RARE_TOKEN> ( ) , applicationId , parameters ) </a> 
<a> . <RARE_TOKEN> ( listener ) ; </a> 
<a> <RARE_TOKEN> = builder . build ( ) ; </a> 
<a> <RARE_TOKEN> . show ( ) ; </a> 
<a> return true ; </a> 
<a> } </a> 
<a> void <RARE_TOKEN> ( AuthorizationRequest request , Bundle values , </a> 
<a> FacebookException error ) { </a> 
<a> Result <RARE_TOKEN> ; </a> 
<a> if ( values != null ) { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( context ) ; </a> 
<a> <RARE_TOKEN> . sync ( ) ; </a> 
<a> AccessToken token = AccessToken </a> 
<a> . <RARE_TOKEN> ( request . getPermissions ( ) , values , AccessTokenSource . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = Result . <RARE_TOKEN> ( token ) ; </a> 
<a> } else { </a> 
<a> if ( error instanceof <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> = Result . <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> log <RARE_TOKEN> ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> = Result . <RARE_TOKEN> ( error . getMessage ( ) , null ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> private static final long serialVersionUID = <RARE_TOKEN> ; </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> @ Override </a> 
<a> void cancel ( ) { </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> . cancel ( ) ; </a> 
<a> <RARE_TOKEN> = null ; </a> 
<a> } </a> 
<a> } </a> 
<a> boolean <RARE_TOKEN> ( final AuthorizationRequest request ) { </a> 
<a> <RARE_TOKEN> = new <RARE_TOKEN> ( context , request . <RARE_TOKEN> ( ) ) ; </a> 
<a> if ( ! <RARE_TOKEN> . start ( ) ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> callback = new <RARE_TOKEN> . <RARE_TOKEN> ( ) { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( Bundle result ) { </a> 
<a> <RARE_TOKEN> ( request , result ) ; </a> 
<a> } </a> 
<a> } ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( callback ) ; </a> 
<a> return true ; </a> 
<a> } </a> 
<a> void <RARE_TOKEN> ( AuthorizationRequest request , Bundle result ) { </a> 
<a> <RARE_TOKEN> = null ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> if ( result != null ) { </a> 
<a> ArrayList < String > <RARE_TOKEN> = result . <RARE_TOKEN> ( NativeProtocol . <RARE_TOKEN> ) ; </a> 
<a> List < String > permissions = request . getPermissions ( ) ; </a> 
<a> if ( ( <RARE_TOKEN> != null ) && </a> 
<a> ( ( permissions == null ) || <RARE_TOKEN> . <RARE_TOKEN> ( permissions ) ) ) { </a> 
<a> AccessToken token = AccessToken </a> 
<a> . <RARE_TOKEN> ( result , AccessTokenSource . <RARE_TOKEN> ) ; </a> 
<a> Result <RARE_TOKEN> = Result . <RARE_TOKEN> ( token ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> return ; </a> 
<a> } </a> 
<a> ArrayList < String > <RARE_TOKEN> = new ArrayList < String > ( ) ; </a> 
<a> for ( String <RARE_TOKEN> : permissions ) { </a> 
<a> if ( ! <RARE_TOKEN> . contains ( <RARE_TOKEN> ) ) { </a> 
<a> <RARE_TOKEN> . add ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> request . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> abstract class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> private static final long serialVersionUID = <RARE_TOKEN> ; </a> 
<a> protected boolean <RARE_TOKEN> ( Intent intent , int requestCode ) { </a> 
<a> if ( intent == null ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> try { </a> 
<a> <RARE_TOKEN> ( ) . <RARE_TOKEN> ( intent , requestCode ) ; </a> 
<a> } catch ( <RARE_TOKEN> e ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> return true ; </a> 
<a> } </a> 
<a> } </a> 
<a> class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> private static final long serialVersionUID = <RARE_TOKEN> ; </a> 
<a> @ Override </a> 
<a> boolean <RARE_TOKEN> ( AuthorizationRequest request ) { </a> 
<a> Intent intent = NativeProtocol . <RARE_TOKEN> ( context , request . <RARE_TOKEN> ( ) , </a> 
<a> new ArrayList < String > ( request . getPermissions ( ) ) , </a> 
<a> request . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( ) ) ; </a> 
<a> return <RARE_TOKEN> ( intent , request . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> boolean onActivityResult ( int requestCode , int resultCode , Intent data ) { </a> 
<a> if ( NativeProtocol . <RARE_TOKEN> ( data ) ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } else { </a> 
<a> Result <RARE_TOKEN> = null ; </a> 
<a> if ( resultCode == Activity . <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> = Result . <RARE_TOKEN> ( </a> 
<a> data . <RARE_TOKEN> ( NativeProtocol . <RARE_TOKEN> ) ) ; </a> 
<a> } else if ( resultCode != Activity . <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> = Result </a> 
<a> . <RARE_TOKEN> ( "Unexpected resultCode from <RARE_TOKEN> , null ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ( data ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> return true ; </a> 
<a> } </a> 
<a> private Result <RARE_TOKEN> ( Intent data ) { </a> 
<a> Bundle extras = data . <RARE_TOKEN> ( ) ; </a> 
<a> String <RARE_TOKEN> = extras . getString ( NativeProtocol . <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> return Result . <RARE_TOKEN> ( </a> 
<a> AccessToken . <RARE_TOKEN> ( extras , AccessTokenSource . <RARE_TOKEN> ) ) ; </a> 
<a> } else if ( NativeProtocol . <RARE_TOKEN> . equals ( <RARE_TOKEN> ) ) { </a> 
<a> return null ; </a> 
<a> } else if ( NativeProtocol . <RARE_TOKEN> . equals ( <RARE_TOKEN> ) ) { </a> 
<a> return Result . <RARE_TOKEN> ( null ) ; </a> 
<a> } else { </a> 
<a> return Result . <RARE_TOKEN> ( <RARE_TOKEN> , extras . getString ( <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> private static final long serialVersionUID = <RARE_TOKEN> ; </a> 
<a> @ Override </a> 
<a> boolean <RARE_TOKEN> ( AuthorizationRequest request ) { </a> 
<a> Intent intent = NativeProtocol . <RARE_TOKEN> ( context , </a> 
<a> request . <RARE_TOKEN> ( ) , request . getPermissions ( ) ) ; </a> 
<a> return <RARE_TOKEN> ( intent , request . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> boolean onActivityResult ( int requestCode , int resultCode , Intent data ) { </a> 
<a> Result <RARE_TOKEN> = null ; </a> 
<a> if ( resultCode == Activity . <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> = Result . <RARE_TOKEN> ( data . <RARE_TOKEN> ( <RARE_TOKEN> ) ) ; </a> 
<a> } else if ( resultCode != Activity . <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> = Result . <RARE_TOKEN> ( "Unexpected resultCode from <RARE_TOKEN> , null ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ( data ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> return true ; </a> 
<a> } </a> 
<a> private Result <RARE_TOKEN> ( Intent data ) { </a> 
<a> Bundle extras = data . <RARE_TOKEN> ( ) ; </a> 
<a> String error = extras . getString ( <RARE_TOKEN> ) ; </a> 
<a> if ( error == null ) { </a> 
<a> error = extras . getString ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( error == null ) { </a> 
<a> AccessToken token = AccessToken . <RARE_TOKEN> ( pendingRequest . getPermissions ( ) , extras , </a> 
<a> AccessTokenSource . <RARE_TOKEN> ) ; </a> 
<a> return Result . <RARE_TOKEN> ( token ) ; </a> 
<a> } else if ( <RARE_TOKEN> . <RARE_TOKEN> . contains ( error ) ) { </a> 
<a> return null ; </a> 
<a> } else if ( <RARE_TOKEN> . <RARE_TOKEN> . contains ( error ) ) { </a> 
<a> return Result . <RARE_TOKEN> ( null ) ; </a> 
<a> } else { </a> 
<a> return Result . <RARE_TOKEN> ( error , extras . getString ( <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> static class <RARE_TOKEN> extends <RARE_TOKEN> . Builder { </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> public <RARE_TOKEN> ( Context context , String applicationId , Bundle parameters ) { </a> 
<a> super ( context , applicationId , <RARE_TOKEN> , parameters ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public <RARE_TOKEN> build ( ) { </a> 
<a> Bundle parameters = <RARE_TOKEN> ( ) ; </a> 
<a> parameters . putString ( <RARE_TOKEN> . <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> parameters . putString ( <RARE_TOKEN> . <RARE_TOKEN> , <RARE_TOKEN> ( ) ) ; </a> 
<a> return new <RARE_TOKEN> ( getContext ( ) , <RARE_TOKEN> , parameters , <RARE_TOKEN> ( ) , <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> static class AuthorizationRequest implements Serializable { </a> 
<a> private static final long serialVersionUID = <RARE_TOKEN> ; </a> 
<a> private <RARE_TOKEN> final <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> private SessionLoginBehavior loginBehavior ; </a> 
<a> private int requestCode ; </a> 
<a> private boolean <RARE_TOKEN> = false ; </a> 
<a> private List < String > permissions ; </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> private String applicationId ; </a> 
<a> private String <RARE_TOKEN> ; </a> 
<a> AuthorizationRequest ( SessionLoginBehavior loginBehavior , int requestCode , boolean <RARE_TOKEN> , </a> 
<a> List < String > permissions , <RARE_TOKEN> <RARE_TOKEN> , String applicationId , </a> 
<a> String <RARE_TOKEN> , <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> this . loginBehavior = loginBehavior ; </a> 
<a> this . requestCode = requestCode ; </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> this . permissions = permissions ; </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> this . applicationId = applicationId ; </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> List < String > getPermissions ( ) { </a> 
<a> return permissions ; </a> 
<a> } </a> 
<a> void <RARE_TOKEN> ( List < String > permissions ) { </a> 
<a> this . permissions = permissions ; </a> 
<a> } </a> 
<a> SessionLoginBehavior <RARE_TOKEN> ( ) { </a> 
<a> return loginBehavior ; </a> 
<a> } </a> 
<a> int <RARE_TOKEN> ( ) { </a> 
<a> return requestCode ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> String <RARE_TOKEN> ( ) { </a> 
<a> return applicationId ; </a> 
<a> } </a> 
<a> boolean <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> void <RARE_TOKEN> ( boolean <RARE_TOKEN> ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> String <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> boolean <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> != null && ! <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<a> static class Result implements Serializable { </a> 
<a> private static final long serialVersionUID = <RARE_TOKEN> ; </a> 
<a> enum <RARE_TOKEN> { </a> 
<a> <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> </a> 
<a> } </a> 
<a> final <RARE_TOKEN> code ; </a> 
<a> final AccessToken token ; </a> 
<a> final String errorMessage ; </a> 
<a> private Result ( <RARE_TOKEN> code , AccessToken token , String errorMessage ) { </a> 
<a> this . token = token ; </a> 
<a> this . errorMessage = errorMessage ; </a> 
<a> this . code = code ; </a> 
<a> } </a> 
<a> static Result <RARE_TOKEN> ( AccessToken token ) { </a> 
<a> return new Result ( <RARE_TOKEN> . <RARE_TOKEN> , token , null ) ; </a> 
<a> } </a> 
<a> static Result <RARE_TOKEN> ( String message ) { </a> 
<a> return new Result ( <RARE_TOKEN> . <RARE_TOKEN> , null , message ) ; </a> 
<a> } </a> 
<a> static Result <RARE_TOKEN> ( String <RARE_TOKEN> , String <RARE_TOKEN> ) { </a> 
<a> String message = <RARE_TOKEN> ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> message += <RARE_TOKEN> " + <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> return new Result ( <RARE_TOKEN> . <RARE_TOKEN> , null , message ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package com . facebook ; </a> 
<a> public class <RARE_TOKEN> extends FacebookException { </a> 
<a> static final long serialVersionUID = 1 ; </a> 
<a> private int errorCode ; </a> 
<a> private String <RARE_TOKEN> ; </a> 
<a> public <RARE_TOKEN> ( String message , int errorCode , String <RARE_TOKEN> ) { </a> 
<a> super ( message ) ; </a> 
<a> this . errorCode = errorCode ; </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public int <RARE_TOKEN> ( ) { </a> 
<a> return errorCode ; </a> 
<a> } </a> 
<a> public String <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package com . facebook ; </a> 
<a> public class FacebookException extends <RARE_TOKEN> { </a> 
<a> static final long serialVersionUID = 1 ; </a> 
<a> public FacebookException ( ) { </a> 
<a> super ( ) ; </a> 
<a> } </a> 
<a> public FacebookException ( String message ) { </a> 
<a> super ( message ) ; </a> 
<a> } </a> 
<a> public FacebookException ( String message , Throwable throwable ) { </a> 
<a> super ( message , throwable ) ; </a> 
<a> } </a> 
<a> public FacebookException ( Throwable throwable ) { </a> 
<a> super ( throwable ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package com . facebook ; </a> 
<a> public class <RARE_TOKEN> extends FacebookException { </a> 
<a> static final long serialVersionUID = 1 ; </a> 
<a> public <RARE_TOKEN> ( ) { </a> 
<a> super ( ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( String message ) { </a> 
<a> super ( message ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( String message , Throwable throwable ) { </a> 
<a> super ( message , throwable ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( Throwable throwable ) { </a> 
<a> super ( throwable ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package com . facebook ; </a> 
<a> public class <RARE_TOKEN> extends FacebookException { </a> 
<a> static final long serialVersionUID = 1 ; </a> 
<a> public <RARE_TOKEN> ( ) { </a> 
<a> super ( ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( String message ) { </a> 
<a> super ( message ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( String message , Throwable throwable ) { </a> 
<a> super ( message , throwable ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( Throwable throwable ) { </a> 
<a> super ( throwable ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package com . facebook ; </a> 
<a> import com . facebook . android . R ; </a> 
<a> import com . facebook . internal . Utility ; </a> 
<a> import org . json . JSONException ; </a> 
<a> import org . json . JSONObject ; </a> 
<a> import java . net . HttpURLConnection ; </a> 
<a> public final class FacebookRequestError { </a> 
<a> public static final int <RARE_TOKEN> = - 1 ; </a> 
<a> public static final int <RARE_TOKEN> = - 1 ; </a> 
<a> private static final int <RARE_TOKEN> = 0 ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = "message" ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static class <RARE_TOKEN> { </a> 
<a> private final int start , end ; </a> 
<a> private <RARE_TOKEN> ( int start , int end ) { </a> 
<a> this . start = start ; </a> 
<a> this . end = end ; </a> 
<a> } </a> 
<a> boolean contains ( int value ) { </a> 
<a> return start <= value && value <= end ; </a> 
<a> } </a> 
<a> } </a> 
<a> private static final int <RARE_TOKEN> = 1 ; </a> 
<a> private static final int <RARE_TOKEN> = 2 ; </a> 
<a> private static final int <RARE_TOKEN> = 4 ; </a> 
<a> private static final int <RARE_TOKEN> = 17 ; </a> 
<a> private static final int <RARE_TOKEN> = 10 ; </a> 
<a> private static final int <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final int <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( 200 , <RARE_TOKEN> ) ; </a> 
<a> private static final int <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final int <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final int <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final int <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( 200 , <RARE_TOKEN> ) ; </a> 
<a> private static final <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> private static final <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> private final int <RARE_TOKEN> ; </a> 
<a> private final boolean <RARE_TOKEN> ; </a> 
<a> private final <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> private final int <RARE_TOKEN> ; </a> 
<a> private final int errorCode ; </a> 
<a> private final int <RARE_TOKEN> ; </a> 
<a> private final String <RARE_TOKEN> ; </a> 
<a> private final String errorMessage ; </a> 
<a> private final JSONObject <RARE_TOKEN> ; </a> 
<a> private final JSONObject <RARE_TOKEN> ; </a> 
<a> private final Object <RARE_TOKEN> ; </a> 
<a> private final HttpURLConnection connection ; </a> 
<a> private final FacebookException exception ; </a> 
<a> private FacebookRequestError ( int <RARE_TOKEN> , int errorCode , </a> 
<a> int <RARE_TOKEN> , String <RARE_TOKEN> , String errorMessage , JSONObject <RARE_TOKEN> , </a> 
<a> JSONObject <RARE_TOKEN> , Object <RARE_TOKEN> , HttpURLConnection connection , </a> 
<a> FacebookException exception ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> this . errorCode = errorCode ; </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> this . errorMessage = errorMessage ; </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> this . connection = connection ; </a> 
<a> boolean <RARE_TOKEN> = false ; </a> 
<a> if ( exception != null ) { </a> 
<a> this . exception = exception ; </a> 
<a> <RARE_TOKEN> = true ; </a> 
<a> } else { </a> 
<a> this . exception = new <RARE_TOKEN> ( this , errorMessage ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = null ; </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> boolean <RARE_TOKEN> = false ; </a> 
<a> if ( <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } else { </a> 
<a> if ( errorCode == <RARE_TOKEN> || errorCode == <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> } else if ( errorCode == <RARE_TOKEN> || errorCode == <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> } else if ( errorCode == <RARE_TOKEN> || <RARE_TOKEN> . contains ( errorCode ) ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = R . string . <RARE_TOKEN> ; </a> 
<a> } else if ( errorCode == <RARE_TOKEN> || errorCode == <RARE_TOKEN> ) { </a> 
<a> if ( <RARE_TOKEN> == <RARE_TOKEN> || <RARE_TOKEN> == <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = R . string . <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = true ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> if ( <RARE_TOKEN> == <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> = R . string . <RARE_TOKEN> ; </a> 
<a> } else if ( <RARE_TOKEN> == <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> = R . string . <RARE_TOKEN> ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> = R . string . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> if ( <RARE_TOKEN> . contains ( <RARE_TOKEN> ) ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> } else if ( <RARE_TOKEN> . contains ( <RARE_TOKEN> ) ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> private FacebookRequestError ( int <RARE_TOKEN> , int errorCode , </a> 
<a> int <RARE_TOKEN> , String <RARE_TOKEN> , String errorMessage , JSONObject <RARE_TOKEN> , </a> 
<a> JSONObject <RARE_TOKEN> , Object <RARE_TOKEN> , HttpURLConnection connection ) { </a> 
<a> this ( <RARE_TOKEN> , errorCode , <RARE_TOKEN> , <RARE_TOKEN> , errorMessage , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , connection , null ) ; </a> 
<a> } </a> 
<a> FacebookRequestError ( HttpURLConnection connection , Exception exception ) { </a> 
<a> this ( <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> null , null , null , null , null , connection , </a> 
<a> ( exception instanceof FacebookException ) ? </a> 
<a> ( FacebookException ) exception : new FacebookException ( exception ) ) ; </a> 
<a> } </a> 
<a> public FacebookRequestError ( int errorCode , String <RARE_TOKEN> , String errorMessage ) { </a> 
<a> this ( <RARE_TOKEN> , errorCode , <RARE_TOKEN> , <RARE_TOKEN> , errorMessage , </a> 
<a> null , null , null , null , null ) ; </a> 
<a> } </a> 
<a> public int <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public int <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public int <RARE_TOKEN> ( ) { </a> 
<a> return errorCode ; </a> 
<a> } </a> 
<a> public int <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public String <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public String <RARE_TOKEN> ( ) { </a> 
<a> if ( errorMessage != null ) { </a> 
<a> return errorMessage ; </a> 
<a> } else { </a> 
<a> return exception . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public JSONObject <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public JSONObject <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public Object <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public HttpURLConnection <RARE_TOKEN> ( ) { </a> 
<a> return connection ; </a> 
<a> } </a> 
<a> public FacebookException <RARE_TOKEN> ( ) { </a> 
<a> return exception ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public String toString ( ) { </a> 
<a> return new StringBuilder ( <RARE_TOKEN> " ) </a> 
<a> . append ( <RARE_TOKEN> ) </a> 
<a> . append ( ", <RARE_TOKEN> " ) </a> 
<a> . append ( errorCode ) </a> 
<a> . append ( ", <RARE_TOKEN> " ) </a> 
<a> . append ( <RARE_TOKEN> ) </a> 
<a> . append ( ", <RARE_TOKEN> " ) </a> 
<a> . append ( errorMessage ) </a> 
<a> . append ( <RARE_TOKEN> ) </a> 
<a> . toString ( ) ; </a> 
<a> } </a> 
<a> static FacebookRequestError <RARE_TOKEN> ( JSONObject <RARE_TOKEN> , </a> 
<a> Object <RARE_TOKEN> , HttpURLConnection connection ) { </a> 
<a> try { </a> 
<a> if ( <RARE_TOKEN> . has ( <RARE_TOKEN> ) ) { </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> . getInt ( <RARE_TOKEN> ) ; </a> 
<a> Object <RARE_TOKEN> = Utility . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> Response . <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> != null && <RARE_TOKEN> instanceof JSONObject ) { </a> 
<a> JSONObject <RARE_TOKEN> = ( JSONObject ) <RARE_TOKEN> ; </a> 
<a> String <RARE_TOKEN> = null ; </a> 
<a> String errorMessage = null ; </a> 
<a> int errorCode = <RARE_TOKEN> ; </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> boolean <RARE_TOKEN> = false ; </a> 
<a> if ( <RARE_TOKEN> . has ( <RARE_TOKEN> ) ) { </a> 
<a> JSONObject error = ( JSONObject ) Utility . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> , null ) ; </a> 
<a> <RARE_TOKEN> = error . <RARE_TOKEN> ( <RARE_TOKEN> , null ) ; </a> 
<a> errorMessage = error . <RARE_TOKEN> ( <RARE_TOKEN> , null ) ; </a> 
<a> errorCode = error . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = error . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = true ; </a> 
<a> } else if ( <RARE_TOKEN> . has ( <RARE_TOKEN> ) || <RARE_TOKEN> . has ( <RARE_TOKEN> ) </a> 
<a> || <RARE_TOKEN> . has ( <RARE_TOKEN> ) ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> , null ) ; </a> 
<a> errorMessage = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> , null ) ; </a> 
<a> errorCode = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = true ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> ) { </a> 
<a> return new FacebookRequestError ( <RARE_TOKEN> , errorCode , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , errorMessage , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , connection ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> if ( ! <RARE_TOKEN> . contains ( <RARE_TOKEN> ) ) { </a> 
<a> return new FacebookRequestError ( <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , null , null , </a> 
<a> <RARE_TOKEN> . has ( <RARE_TOKEN> ) ? </a> 
<a> ( JSONObject ) Utility . <RARE_TOKEN> ( </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , Response . <RARE_TOKEN> ) : null , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , connection ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } catch ( JSONException e ) { </a> 
<a> } </a> 
<a> return null ; </a> 
<a> } </a> 
<a> public enum <RARE_TOKEN> { </a> 
<a> <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> </a> 
<a> } ; </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package com . facebook ; </a> 
<a> final class <RARE_TOKEN> { </a> 
<a> public static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> public static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package com . facebook ; </a> 
<a> import android . content . <RARE_TOKEN> ; </a> 
<a> import android . content . Context ; </a> 
<a> import android . content . Intent ; </a> 
<a> import android . content . <RARE_TOKEN> ; </a> 
<a> import android . os . * ; </a> 
<a> final class <RARE_TOKEN> implements <RARE_TOKEN> { </a> 
<a> final Context context ; </a> 
<a> final String applicationId ; </a> 
<a> final Handler handler ; </a> 
<a> <RARE_TOKEN> listener ; </a> 
<a> boolean running ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> ( Context context , String applicationId ) { </a> 
<a> Context <RARE_TOKEN> = context . <RARE_TOKEN> ( ) ; </a> 
<a> this . context = ( <RARE_TOKEN> != null ) ? <RARE_TOKEN> : context ; </a> 
<a> this . applicationId = applicationId ; </a> 
<a> handler = new Handler ( ) { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( <RARE_TOKEN> message ) { </a> 
<a> <RARE_TOKEN> . this . <RARE_TOKEN> ( message ) ; </a> 
<a> } </a> 
<a> } ; </a> 
<a> } </a> 
<a> void <RARE_TOKEN> ( <RARE_TOKEN> listener ) { </a> 
<a> this . listener = listener ; </a> 
<a> } </a> 
<a> boolean start ( ) { </a> 
<a> Intent intent = new Intent ( NativeProtocol . <RARE_TOKEN> ) ; </a> 
<a> intent . <RARE_TOKEN> ( Intent . <RARE_TOKEN> ) ; </a> 
<a> intent = NativeProtocol . <RARE_TOKEN> ( context , intent ) ; </a> 
<a> if ( intent == null ) { </a> 
<a> callback ( null ) ; </a> 
<a> return false ; </a> 
<a> } else { </a> 
<a> running = true ; </a> 
<a> context . <RARE_TOKEN> ( intent , this , Context . <RARE_TOKEN> ) ; </a> 
<a> return true ; </a> 
<a> } </a> 
<a> } </a> 
<a> void cancel ( ) { </a> 
<a> running = false ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( <RARE_TOKEN> name , <RARE_TOKEN> service ) { </a> 
<a> <RARE_TOKEN> = new <RARE_TOKEN> ( service ) ; </a> 
<a> getToken ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( <RARE_TOKEN> name ) { </a> 
<a> <RARE_TOKEN> = null ; </a> 
<a> context . <RARE_TOKEN> ( this ) ; </a> 
<a> callback ( null ) ; </a> 
<a> } </a> 
<a> private void getToken ( ) { </a> 
<a> Bundle data = new Bundle ( ) ; </a> 
<a> data . putString ( NativeProtocol . <RARE_TOKEN> , applicationId ) ; </a> 
<a> <RARE_TOKEN> request = <RARE_TOKEN> . <RARE_TOKEN> ( null , NativeProtocol . <RARE_TOKEN> ) ; </a> 
<a> request . <RARE_TOKEN> = NativeProtocol . <RARE_TOKEN> ; </a> 
<a> request . <RARE_TOKEN> ( data ) ; </a> 
<a> request . <RARE_TOKEN> = new <RARE_TOKEN> ( handler ) ; </a> 
<a> try { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( request ) ; </a> 
<a> } catch ( <RARE_TOKEN> e ) { </a> 
<a> callback ( null ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( <RARE_TOKEN> message ) { </a> 
<a> if ( message . <RARE_TOKEN> == NativeProtocol . <RARE_TOKEN> ) { </a> 
<a> Bundle extras = message . getData ( ) ; </a> 
<a> String <RARE_TOKEN> = extras . getString ( NativeProtocol . <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> callback ( null ) ; </a> 
<a> } else { </a> 
<a> callback ( extras ) ; </a> 
<a> } </a> 
<a> context . <RARE_TOKEN> ( this ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private void callback ( Bundle result ) { </a> 
<a> if ( ! running ) { </a> 
<a> return ; </a> 
<a> } </a> 
<a> running = false ; </a> 
<a> <RARE_TOKEN> callback = listener ; </a> 
<a> if ( callback != null ) { </a> 
<a> callback . <RARE_TOKEN> ( result ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> interface <RARE_TOKEN> { </a> 
<a> void <RARE_TOKEN> ( Bundle result ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package com . facebook ; </a> 
<a> public enum HttpMethod { </a> 
<a> GET , </a> 
<a> POST , </a> 
<a> <RARE_TOKEN> , </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package com . facebook ; </a> 
<a> import android . os . Bundle ; </a> 
<a> public class <RARE_TOKEN> { </a> 
<a> @ Deprecated </a> 
<a> public static void <RARE_TOKEN> ( Session session , Bundle bundle ) { </a> 
<a> session . <RARE_TOKEN> ( bundle ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package com . facebook ; </a> 
<a> public enum LoggingBehavior { </a> 
<a> <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package com . facebook ; </a> 
<a> import android . app . Activity ; </a> 
<a> import android . content . Intent ; </a> 
<a> import android . os . Bundle ; </a> 
<a> import android . view . View ; </a> 
<a> import com . facebook . android . R ; </a> 
<a> public class <RARE_TOKEN> extends Activity { </a> 
<a> static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> a null <RARE_TOKEN> <RARE_TOKEN> " + </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> if the <RARE_TOKEN> of the <RARE_TOKEN> is <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private String <RARE_TOKEN> ; </a> 
<a> private AuthorizationClient <RARE_TOKEN> ; </a> 
<a> private AuthorizationClient . AuthorizationRequest request ; </a> 
<a> @ Override </a> 
<a> public void onCreate ( Bundle savedInstanceState ) { </a> 
<a> super . onCreate ( savedInstanceState ) ; </a> 
<a> <RARE_TOKEN> ( R . layout . <RARE_TOKEN> ) ; </a> 
<a> if ( savedInstanceState != null ) { </a> 
<a> <RARE_TOKEN> = savedInstanceState . getString ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = ( AuthorizationClient ) savedInstanceState . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> = new AuthorizationClient ( ) ; </a> 
<a> request = ( AuthorizationClient . AuthorizationRequest ) <RARE_TOKEN> ( ) . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( this ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( new AuthorizationClient . <RARE_TOKEN> ( ) { </a> 
<a> @ Override </a> 
<a> public void onCompleted ( AuthorizationClient . Result <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( new AuthorizationClient . <RARE_TOKEN> ( ) { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> findViewById ( R . id . <RARE_TOKEN> ) . setVisibility ( View . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> findViewById ( R . id . <RARE_TOKEN> ) . setVisibility ( View . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( AuthorizationClient . Result <RARE_TOKEN> ) { </a> 
<a> request = null ; </a> 
<a> int resultCode = ( <RARE_TOKEN> . code == AuthorizationClient . Result . <RARE_TOKEN> . <RARE_TOKEN> ) ? </a> 
<a> <RARE_TOKEN> : <RARE_TOKEN> ; </a> 
<a> Bundle bundle = new Bundle ( ) ; </a> 
<a> bundle . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> Intent <RARE_TOKEN> = new Intent ( ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( bundle ) ; </a> 
<a> <RARE_TOKEN> ( resultCode , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> super . <RARE_TOKEN> ( ) ; </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> throw new FacebookException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( request ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> super . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> findViewById ( R . id . <RARE_TOKEN> ) . setVisibility ( View . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void onSaveInstanceState ( Bundle outState ) { </a> 
<a> super . onSaveInstanceState ( outState ) ; </a> 
<a> outState . putString ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> outState . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void onActivityResult ( int requestCode , int resultCode , Intent data ) { </a> 
<a> <RARE_TOKEN> . onActivityResult ( requestCode , resultCode , data ) ; </a> 
<a> } </a> 
<a> static Bundle <RARE_TOKEN> ( AuthorizationClient . AuthorizationRequest request ) { </a> 
<a> Bundle extras = new Bundle ( ) ; </a> 
<a> extras . <RARE_TOKEN> ( <RARE_TOKEN> , request ) ; </a> 
<a> return extras ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package com . facebook ; </a> 
<a> import android . content . Context ; </a> 
<a> import android . content . Intent ; </a> 
<a> import android . content . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import android . content . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import android . content . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import android . content . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import android . os . Bundle ; </a> 
<a> import android . text . <RARE_TOKEN> ; </a> 
<a> import com . facebook . internal . Utility ; </a> 
<a> import java . util . ArrayList ; </a> 
<a> import java . util . List ; </a> 
<a> final class NativeProtocol { </a> 
<a> static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> static final String <RARE_TOKEN> = </a> 
<a> <RARE_TOKEN> </a> 
<a> + <RARE_TOKEN> </a> 
<a> + <RARE_TOKEN> </a> 
<a> + <RARE_TOKEN> </a> 
<a> + <RARE_TOKEN> </a> 
<a> + <RARE_TOKEN> </a> 
<a> + <RARE_TOKEN> </a> 
<a> + <RARE_TOKEN> </a> 
<a> + <RARE_TOKEN> </a> 
<a> + <RARE_TOKEN> </a> 
<a> + <RARE_TOKEN> </a> 
<a> + <RARE_TOKEN> </a> 
<a> + <RARE_TOKEN> </a> 
<a> + <RARE_TOKEN> </a> 
<a> + <RARE_TOKEN> </a> 
<a> + <RARE_TOKEN> </a> 
<a> + <RARE_TOKEN> </a> 
<a> + <RARE_TOKEN> </a> 
<a> + <RARE_TOKEN> </a> 
<a> + <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> public static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> public static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> static final boolean <RARE_TOKEN> ( Context context , String <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = null ; </a> 
<a> try { </a> 
<a> <RARE_TOKEN> = context . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> } catch ( <RARE_TOKEN> . <RARE_TOKEN> e ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> for ( <RARE_TOKEN> <RARE_TOKEN> : <RARE_TOKEN> . <RARE_TOKEN> ) { </a> 
<a> if ( <RARE_TOKEN> . <RARE_TOKEN> ( ) . equals ( <RARE_TOKEN> ) ) { </a> 
<a> return true ; </a> 
<a> } </a> 
<a> } </a> 
<a> return false ; </a> 
<a> } </a> 
<a> static Intent <RARE_TOKEN> ( Context context , Intent intent ) { </a> 
<a> if ( intent == null ) { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = context . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( intent , 0 ) ; </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> if ( ! <RARE_TOKEN> ( context , <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> ) ) { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> return intent ; </a> 
<a> } </a> 
<a> static Intent <RARE_TOKEN> ( Context context , Intent intent ) { </a> 
<a> if ( intent == null ) { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = context . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( intent , 0 ) ; </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> if ( ! <RARE_TOKEN> ( context , <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> ) ) { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> return intent ; </a> 
<a> } </a> 
<a> static Intent <RARE_TOKEN> ( Context context , String applicationId , List < String > permissions ) { </a> 
<a> Intent intent = new Intent ( ) </a> 
<a> . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) </a> 
<a> . <RARE_TOKEN> ( <RARE_TOKEN> , applicationId ) ; </a> 
<a> if ( ! Utility . <RARE_TOKEN> ( permissions ) ) { </a> 
<a> intent . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> , permissions ) ) ; </a> 
<a> } </a> 
<a> return <RARE_TOKEN> ( context , intent ) ; </a> 
<a> } </a> 
<a> static Intent <RARE_TOKEN> ( Context context ) { </a> 
<a> Intent intent = new Intent ( ) ; </a> 
<a> intent . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> return <RARE_TOKEN> ( context , intent ) ; </a> 
<a> } </a> 
<a> static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> static final int <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> static final int <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> static final int <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> static final String <RARE_TOKEN> = </a> 
<a> <RARE_TOKEN> ; </a> 
<a> static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> static final String <RARE_TOKEN> = </a> 
<a> <RARE_TOKEN> ; </a> 
<a> static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> static final String <RARE_TOKEN> = </a> 
<a> <RARE_TOKEN> ; </a> 
<a> static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> static Intent <RARE_TOKEN> ( Context context , String applicationId , ArrayList < String > permissions , </a> 
<a> String <RARE_TOKEN> ) { </a> 
<a> Intent intent = new Intent ( ) </a> 
<a> . <RARE_TOKEN> ( <RARE_TOKEN> ) </a> 
<a> . <RARE_TOKEN> ( Intent . <RARE_TOKEN> ) </a> 
<a> . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) </a> 
<a> . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) </a> 
<a> . <RARE_TOKEN> ( <RARE_TOKEN> , applicationId ) </a> 
<a> . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ( permissions ) ) </a> 
<a> . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ( <RARE_TOKEN> ) ) ; </a> 
<a> return <RARE_TOKEN> ( context , intent ) ; </a> 
<a> } </a> 
<a> private static String <RARE_TOKEN> ( String <RARE_TOKEN> ) { </a> 
<a> if ( Utility . <RARE_TOKEN> ( <RARE_TOKEN> ) ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } else { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<a> private static ArrayList < String > <RARE_TOKEN> ( ArrayList < String > permissions ) { </a> 
<a> ArrayList < String > <RARE_TOKEN> ; </a> 
<a> if ( Utility . <RARE_TOKEN> ( permissions ) ) { </a> 
<a> <RARE_TOKEN> = new ArrayList < String > ( ) ; </a> 
<a> } else { </a> 
<a> for ( String <RARE_TOKEN> : permissions ) { </a> 
<a> if ( Session . <RARE_TOKEN> ( <RARE_TOKEN> ) || <RARE_TOKEN> . equals ( <RARE_TOKEN> ) ) { </a> 
<a> return permissions ; </a> 
<a> } </a> 
<a> } </a> 
<a> <RARE_TOKEN> = new ArrayList < String > ( permissions ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> . add ( <RARE_TOKEN> ) ; </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> static boolean <RARE_TOKEN> ( Intent data ) { </a> 
<a> int <RARE_TOKEN> = data . <RARE_TOKEN> ( <RARE_TOKEN> , 0 ) ; </a> 
<a> String <RARE_TOKEN> = data . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> return ( ( <RARE_TOKEN> == <RARE_TOKEN> ) && <RARE_TOKEN> . equals ( <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> static AccessTokenSource <RARE_TOKEN> ( Bundle extras ) { </a> 
<a> long expected = <RARE_TOKEN> ; </a> 
<a> long <RARE_TOKEN> = extras . getInt ( <RARE_TOKEN> , 0 ) ; </a> 
<a> if ( expected == <RARE_TOKEN> ) { </a> 
<a> return AccessTokenSource . <RARE_TOKEN> ; </a> 
<a> } else { </a> 
<a> return AccessTokenSource . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package com . facebook ; </a> 
<a> import android . os . Bundle ; </a> 
<a> public class <RARE_TOKEN> extends TokenCachingStrategy { </a> 
<a> @ Override </a> 
<a> public Bundle <RARE_TOKEN> ( ) { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( Bundle bundle ) { </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void clear ( ) { </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package com . facebook ; </a> 
<a> import android . <RARE_TOKEN> . Bitmap ; </a> 
<a> import android . location . Location ; </a> 
<a> import android . net . <RARE_TOKEN> ; </a> 
<a> import android . os . Bundle ; </a> 
<a> import android . os . Handler ; </a> 
<a> import android . os . <RARE_TOKEN> ; </a> 
<a> import android . text . <RARE_TOKEN> ; </a> 
<a> import android . util . <RARE_TOKEN> ; </a> 
<a> import com . facebook . internal . <RARE_TOKEN> ; </a> 
<a> import com . facebook . model . * ; </a> 
<a> import com . facebook . internal . Logger ; </a> 
<a> import com . facebook . internal . Utility ; </a> 
<a> import com . facebook . internal . Validate ; </a> 
<a> import org . json . JSONArray ; </a> 
<a> import org . json . JSONException ; </a> 
<a> import org . json . JSONObject ; </a> 
<a> import java . io . * ; </a> 
<a> import java . net . HttpURLConnection ; </a> 
<a> import java . net . <RARE_TOKEN> ; </a> 
<a> import java . net . URL ; </a> 
<a> import java . net . <RARE_TOKEN> ; </a> 
<a> import java . text . <RARE_TOKEN> ; </a> 
<a> import java . util . * ; </a> 
<a> import java . util . Map . Entry ; </a> 
<a> public class Request { </a> 
<a> public static final int <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = "name" ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static String <RARE_TOKEN> ; </a> 
<a> private Session session ; </a> 
<a> private HttpMethod <RARE_TOKEN> ; </a> 
<a> private String graphPath ; </a> 
<a> private GraphObject graphObject ; </a> 
<a> private String <RARE_TOKEN> ; </a> 
<a> private String <RARE_TOKEN> ; </a> 
<a> private String <RARE_TOKEN> ; </a> 
<a> private boolean <RARE_TOKEN> = true ; </a> 
<a> private Bundle parameters ; </a> 
<a> private Callback callback ; </a> 
<a> private String <RARE_TOKEN> ; </a> 
<a> public Request ( ) { </a> 
<a> this ( null , null , null , null , null ) ; </a> 
<a> } </a> 
<a> public Request ( Session session , String graphPath ) { </a> 
<a> this ( session , graphPath , null , null , null ) ; </a> 
<a> } </a> 
<a> public Request ( Session session , String graphPath , Bundle parameters , HttpMethod <RARE_TOKEN> ) { </a> 
<a> this ( session , graphPath , parameters , <RARE_TOKEN> , null ) ; </a> 
<a> } </a> 
<a> public Request ( Session session , String graphPath , Bundle parameters , HttpMethod <RARE_TOKEN> , Callback callback ) { </a> 
<a> this . session = session ; </a> 
<a> this . graphPath = graphPath ; </a> 
<a> this . callback = callback ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> if ( parameters != null ) { </a> 
<a> this . parameters = new Bundle ( parameters ) ; </a> 
<a> } else { </a> 
<a> this . parameters = new Bundle ( ) ; </a> 
<a> } </a> 
<a> if ( ! this . parameters . containsKey ( <RARE_TOKEN> ) ) { </a> 
<a> this . parameters . putString ( <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> Request ( Session session , URL <RARE_TOKEN> ) { </a> 
<a> this . session = session ; </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> . toString ( ) ; </a> 
<a> <RARE_TOKEN> ( HttpMethod . GET ) ; </a> 
<a> this . parameters = new Bundle ( ) ; </a> 
<a> } </a> 
<a> public static Request <RARE_TOKEN> ( Session session , String graphPath , GraphObject graphObject , Callback callback ) { </a> 
<a> Request request = new Request ( session , graphPath , null , HttpMethod . POST , callback ) ; </a> 
<a> request . <RARE_TOKEN> ( graphObject ) ; </a> 
<a> return request ; </a> 
<a> } </a> 
<a> public static Request <RARE_TOKEN> ( Session session , String <RARE_TOKEN> , Bundle parameters , HttpMethod <RARE_TOKEN> ) { </a> 
<a> Request request = new Request ( session , null , parameters , <RARE_TOKEN> ) ; </a> 
<a> request . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> return request ; </a> 
<a> } </a> 
<a> public static Request <RARE_TOKEN> ( Session session , final <RARE_TOKEN> callback ) { </a> 
<a> Callback wrapper = new Callback ( ) { </a> 
<a> @ Override </a> 
<a> public void onCompleted ( Response response ) { </a> 
<a> if ( callback != null ) { </a> 
<a> callback . onCompleted ( response . <RARE_TOKEN> ( GraphUser . class ) , response ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } ; </a> 
<a> return new Request ( session , <RARE_TOKEN> , null , null , wrapper ) ; </a> 
<a> } </a> 
<a> public static Request <RARE_TOKEN> ( Session session , final <RARE_TOKEN> callback ) { </a> 
<a> Callback wrapper = new Callback ( ) { </a> 
<a> @ Override </a> 
<a> public void onCompleted ( Response response ) { </a> 
<a> if ( callback != null ) { </a> 
<a> callback . onCompleted ( <RARE_TOKEN> ( response , GraphUser . class ) , response ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } ; </a> 
<a> return new Request ( session , <RARE_TOKEN> , null , null , wrapper ) ; </a> 
<a> } </a> 
<a> public static Request <RARE_TOKEN> ( Session session , Bitmap <RARE_TOKEN> , Callback callback ) { </a> 
<a> Bundle parameters = new Bundle ( 1 ) ; </a> 
<a> parameters . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> return new Request ( session , <RARE_TOKEN> , parameters , HttpMethod . POST , callback ) ; </a> 
<a> } </a> 
<a> public static Request <RARE_TOKEN> ( Session session , File file , </a> 
<a> Callback callback ) throws <RARE_TOKEN> { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = <RARE_TOKEN> . open ( file , <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> Bundle parameters = new Bundle ( 1 ) ; </a> 
<a> parameters . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> return new Request ( session , <RARE_TOKEN> , parameters , HttpMethod . POST , callback ) ; </a> 
<a> } </a> 
<a> public static Request <RARE_TOKEN> ( Session session , File file , </a> 
<a> Callback callback ) throws <RARE_TOKEN> { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = <RARE_TOKEN> . open ( file , <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> Bundle parameters = new Bundle ( 1 ) ; </a> 
<a> parameters . <RARE_TOKEN> ( file . getName ( ) , <RARE_TOKEN> ) ; </a> 
<a> return new Request ( session , <RARE_TOKEN> , parameters , HttpMethod . POST , callback ) ; </a> 
<a> } </a> 
<a> public static Request <RARE_TOKEN> ( Session session , String graphPath , Callback callback ) { </a> 
<a> return new Request ( session , graphPath , null , null , callback ) ; </a> 
<a> } </a> 
<a> public static Request <RARE_TOKEN> ( Session session , Location location , int <RARE_TOKEN> , </a> 
<a> int <RARE_TOKEN> , String <RARE_TOKEN> , final <RARE_TOKEN> callback ) { </a> 
<a> if ( location == null && Utility . <RARE_TOKEN> ( <RARE_TOKEN> ) ) { </a> 
<a> throw new FacebookException ( <RARE_TOKEN> location or <RARE_TOKEN> must be <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> Bundle parameters = new Bundle ( 5 ) ; </a> 
<a> parameters . putString ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> parameters . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> if ( location != null ) { </a> 
<a> parameters . putString ( <RARE_TOKEN> , </a> 
<a> String . format ( <RARE_TOKEN> . <RARE_TOKEN> , <RARE_TOKEN> , location . <RARE_TOKEN> ( ) , location . <RARE_TOKEN> ( ) ) ) ; </a> 
<a> parameters . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( ! Utility . <RARE_TOKEN> ( <RARE_TOKEN> ) ) { </a> 
<a> parameters . putString ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> Callback wrapper = new Callback ( ) { </a> 
<a> @ Override </a> 
<a> public void onCompleted ( Response response ) { </a> 
<a> if ( callback != null ) { </a> 
<a> callback . onCompleted ( <RARE_TOKEN> ( response , GraphPlace . class ) , response ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } ; </a> 
<a> return new Request ( session , <RARE_TOKEN> , parameters , HttpMethod . GET , wrapper ) ; </a> 
<a> } </a> 
<a> public static Request <RARE_TOKEN> ( Session session , String message , Callback callback ) { </a> 
<a> Bundle parameters = new Bundle ( ) ; </a> 
<a> parameters . putString ( "message" , message ) ; </a> 
<a> return new Request ( session , <RARE_TOKEN> , parameters , HttpMethod . POST , callback ) ; </a> 
<a> } </a> 
<a> public final GraphObject <RARE_TOKEN> ( ) { </a> 
<a> return this . graphObject ; </a> 
<a> } </a> 
<a> public final void <RARE_TOKEN> ( GraphObject graphObject ) { </a> 
<a> this . graphObject = graphObject ; </a> 
<a> } </a> 
<a> public final String <RARE_TOKEN> ( ) { </a> 
<a> return this . graphPath ; </a> 
<a> } </a> 
<a> public final void <RARE_TOKEN> ( String graphPath ) { </a> 
<a> this . graphPath = graphPath ; </a> 
<a> } </a> 
<a> public final HttpMethod <RARE_TOKEN> ( ) { </a> 
<a> return this . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public final void <RARE_TOKEN> ( HttpMethod <RARE_TOKEN> ) { </a> 
<a> if ( <RARE_TOKEN> != null && <RARE_TOKEN> != HttpMethod . GET ) { </a> 
<a> throw new FacebookException ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> method <RARE_TOKEN> request <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> this . <RARE_TOKEN> = ( <RARE_TOKEN> != null ) ? <RARE_TOKEN> : HttpMethod . GET ; </a> 
<a> } </a> 
<a> public final Bundle <RARE_TOKEN> ( ) { </a> 
<a> return this . parameters ; </a> 
<a> } </a> 
<a> public final void <RARE_TOKEN> ( Bundle parameters ) { </a> 
<a> this . parameters = parameters ; </a> 
<a> } </a> 
<a> public final String <RARE_TOKEN> ( ) { </a> 
<a> return this . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public final void <RARE_TOKEN> ( String <RARE_TOKEN> ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public final Session getSession ( ) { </a> 
<a> return this . session ; </a> 
<a> } </a> 
<a> public final void <RARE_TOKEN> ( Session session ) { </a> 
<a> this . session = session ; </a> 
<a> } </a> 
<a> public final String <RARE_TOKEN> ( ) { </a> 
<a> return this . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public final void <RARE_TOKEN> ( String <RARE_TOKEN> ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public final String <RARE_TOKEN> ( ) { </a> 
<a> return this . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public final void <RARE_TOKEN> ( String <RARE_TOKEN> ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public final boolean <RARE_TOKEN> ( ) { </a> 
<a> return this . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public final void <RARE_TOKEN> ( boolean <RARE_TOKEN> ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public static final String <RARE_TOKEN> ( ) { </a> 
<a> return Request . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public static final void <RARE_TOKEN> ( String applicationId ) { </a> 
<a> Request . <RARE_TOKEN> = applicationId ; </a> 
<a> } </a> 
<a> public final Callback <RARE_TOKEN> ( ) { </a> 
<a> return callback ; </a> 
<a> } </a> 
<a> public final void setCallback ( Callback callback ) { </a> 
<a> this . callback = callback ; </a> 
<a> } </a> 
<a> public static <RARE_TOKEN> <RARE_TOKEN> ( Session session , String graphPath , GraphObject graphObject , </a> 
<a> Callback callback ) { </a> 
<a> return <RARE_TOKEN> ( session , graphPath , graphObject , callback ) . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> public static <RARE_TOKEN> <RARE_TOKEN> ( Session session , String <RARE_TOKEN> , Bundle parameters , </a> 
<a> HttpMethod <RARE_TOKEN> ) { </a> 
<a> return <RARE_TOKEN> ( session , <RARE_TOKEN> , parameters , <RARE_TOKEN> ) . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> public static <RARE_TOKEN> <RARE_TOKEN> ( Session session , <RARE_TOKEN> callback ) { </a> 
<a> return <RARE_TOKEN> ( session , callback ) . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> public static <RARE_TOKEN> <RARE_TOKEN> ( Session session , <RARE_TOKEN> callback ) { </a> 
<a> return <RARE_TOKEN> ( session , callback ) . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> public static <RARE_TOKEN> <RARE_TOKEN> ( Session session , Bitmap <RARE_TOKEN> , Callback callback ) { </a> 
<a> return <RARE_TOKEN> ( session , <RARE_TOKEN> , callback ) . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> public static <RARE_TOKEN> <RARE_TOKEN> ( Session session , File file , </a> 
<a> Callback callback ) throws <RARE_TOKEN> { </a> 
<a> return <RARE_TOKEN> ( session , file , callback ) . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> public static <RARE_TOKEN> <RARE_TOKEN> ( Session session , String graphPath , Callback callback ) { </a> 
<a> return <RARE_TOKEN> ( session , graphPath , callback ) . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> public static <RARE_TOKEN> <RARE_TOKEN> ( Session session , Location location , int <RARE_TOKEN> , </a> 
<a> int <RARE_TOKEN> , String <RARE_TOKEN> , <RARE_TOKEN> callback ) { </a> 
<a> return <RARE_TOKEN> ( session , location , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , callback ) . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> public static <RARE_TOKEN> <RARE_TOKEN> ( Session session , String message , Callback callback ) { </a> 
<a> return <RARE_TOKEN> ( session , message , callback ) . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> public final Response <RARE_TOKEN> ( ) { </a> 
<a> return Request . <RARE_TOKEN> ( this ) ; </a> 
<a> } </a> 
<a> public final <RARE_TOKEN> <RARE_TOKEN> ( ) { </a> 
<a> return Request . <RARE_TOKEN> ( this ) ; </a> 
<a> } </a> 
<a> public static HttpURLConnection <RARE_TOKEN> ( Request ... requests ) { </a> 
<a> return <RARE_TOKEN> ( Arrays . asList ( requests ) ) ; </a> 
<a> } </a> 
<a> public static HttpURLConnection <RARE_TOKEN> ( Collection < Request > requests ) { </a> 
<a> Validate . <RARE_TOKEN> ( requests , <RARE_TOKEN> ) ; </a> 
<a> return <RARE_TOKEN> ( new RequestBatch ( requests ) ) ; </a> 
<a> } </a> 
<a> public static HttpURLConnection <RARE_TOKEN> ( RequestBatch requests ) { </a> 
<a> for ( Request request : requests ) { </a> 
<a> request . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> URL url = null ; </a> 
<a> try { </a> 
<a> if ( requests . size ( ) == 1 ) { </a> 
<a> Request request = requests . get ( 0 ) ; </a> 
<a> url = new URL ( request . <RARE_TOKEN> ( ) ) ; </a> 
<a> } else { </a> 
<a> url = new URL ( <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } catch ( <RARE_TOKEN> e ) { </a> 
<a> throw new FacebookException ( <RARE_TOKEN> not <RARE_TOKEN> URL for <RARE_TOKEN> , e ) ; </a> 
<a> } </a> 
<a> HttpURLConnection connection ; </a> 
<a> try { </a> 
<a> connection = <RARE_TOKEN> ( url ) ; </a> 
<a> <RARE_TOKEN> ( requests , connection ) ; </a> 
<a> } catch ( IOException e ) { </a> 
<a> throw new FacebookException ( <RARE_TOKEN> not <RARE_TOKEN> request <RARE_TOKEN> , e ) ; </a> 
<a> } catch ( JSONException e ) { </a> 
<a> throw new FacebookException ( <RARE_TOKEN> not <RARE_TOKEN> request <RARE_TOKEN> , e ) ; </a> 
<a> } </a> 
<a> return connection ; </a> 
<a> } </a> 
<a> public static Response <RARE_TOKEN> ( Request request ) { </a> 
<a> List < Response > responses = <RARE_TOKEN> ( request ) ; </a> 
<a> if ( responses == null || responses . size ( ) != 1 ) { </a> 
<a> throw new FacebookException ( <RARE_TOKEN> <RARE_TOKEN> expected a <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> return responses . get ( 0 ) ; </a> 
<a> } </a> 
<a> public static List < Response > <RARE_TOKEN> ( Request ... requests ) { </a> 
<a> Validate . <RARE_TOKEN> ( requests , <RARE_TOKEN> ) ; </a> 
<a> return <RARE_TOKEN> ( Arrays . asList ( requests ) ) ; </a> 
<a> } </a> 
<a> public static List < Response > <RARE_TOKEN> ( Collection < Request > requests ) { </a> 
<a> return <RARE_TOKEN> ( new RequestBatch ( requests ) ) ; </a> 
<a> } </a> 
<a> public static List < Response > <RARE_TOKEN> ( RequestBatch requests ) { </a> 
<a> Validate . <RARE_TOKEN> ( requests , <RARE_TOKEN> ) ; </a> 
<a> HttpURLConnection connection = null ; </a> 
<a> try { </a> 
<a> connection = <RARE_TOKEN> ( requests ) ; </a> 
<a> } catch ( Exception ex ) { </a> 
<a> List < Response > responses = Response . <RARE_TOKEN> ( requests . <RARE_TOKEN> ( ) , null , new FacebookException ( ex ) ) ; </a> 
<a> <RARE_TOKEN> ( requests , responses ) ; </a> 
<a> return responses ; </a> 
<a> } </a> 
<a> List < Response > responses = <RARE_TOKEN> ( connection , requests ) ; </a> 
<a> return responses ; </a> 
<a> } </a> 
<a> public static <RARE_TOKEN> <RARE_TOKEN> ( Request ... requests ) { </a> 
<a> Validate . <RARE_TOKEN> ( requests , <RARE_TOKEN> ) ; </a> 
<a> return <RARE_TOKEN> ( Arrays . asList ( requests ) ) ; </a> 
<a> } </a> 
<a> public static <RARE_TOKEN> <RARE_TOKEN> ( Collection < Request > requests ) { </a> 
<a> return <RARE_TOKEN> ( new RequestBatch ( requests ) ) ; </a> 
<a> } </a> 
<a> public static <RARE_TOKEN> <RARE_TOKEN> ( RequestBatch requests ) { </a> 
<a> Validate . <RARE_TOKEN> ( requests , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( requests ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public static List < Response > <RARE_TOKEN> ( HttpURLConnection connection , Collection < Request > requests ) { </a> 
<a> return <RARE_TOKEN> ( connection , new RequestBatch ( requests ) ) ; </a> 
<a> } </a> 
<a> public static List < Response > <RARE_TOKEN> ( HttpURLConnection connection , RequestBatch requests ) { </a> 
<a> List < Response > responses = Response . <RARE_TOKEN> ( connection , requests ) ; </a> 
<a> Utility . <RARE_TOKEN> ( connection ) ; </a> 
<a> int <RARE_TOKEN> = requests . size ( ) ; </a> 
<a> if ( <RARE_TOKEN> != responses . size ( ) ) { </a> 
<a> throw new FacebookException ( String . format ( <RARE_TOKEN> <RARE_TOKEN> responses while <RARE_TOKEN> <RARE_TOKEN> , responses . size ( ) , </a> 
<a> <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( requests , responses ) ; </a> 
<a> HashSet < Session > <RARE_TOKEN> = new HashSet < Session > ( ) ; </a> 
<a> for ( Request request : requests ) { </a> 
<a> if ( request . session != null ) { </a> 
<a> <RARE_TOKEN> . add ( request . session ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> for ( Session session : <RARE_TOKEN> ) { </a> 
<a> session . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> return responses ; </a> 
<a> } </a> 
<a> public static <RARE_TOKEN> <RARE_TOKEN> ( HttpURLConnection connection , RequestBatch requests ) { </a> 
<a> return <RARE_TOKEN> ( null , connection , requests ) ; </a> 
<a> } </a> 
<a> public static <RARE_TOKEN> <RARE_TOKEN> ( Handler <RARE_TOKEN> , HttpURLConnection connection , </a> 
<a> RequestBatch requests ) { </a> 
<a> Validate . <RARE_TOKEN> ( connection , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( connection , requests ) ; </a> 
<a> requests . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public String toString ( ) { </a> 
<a> return new StringBuilder ( ) . append ( <RARE_TOKEN> " ) . append ( " <RARE_TOKEN> " ) . append ( session ) . append ( ", <RARE_TOKEN> " ) </a> 
<a> . append ( graphPath ) . append ( ", <RARE_TOKEN> " ) . append ( graphObject ) . append ( ", <RARE_TOKEN> " ) </a> 
<a> . append ( <RARE_TOKEN> ) . append ( ", <RARE_TOKEN> " ) . append ( <RARE_TOKEN> ) . append ( ", <RARE_TOKEN> " ) </a> 
<a> . append ( parameters ) . append ( <RARE_TOKEN> ) . toString ( ) ; </a> 
<a> } </a> 
<a> static void <RARE_TOKEN> ( final RequestBatch requests , List < Response > responses ) { </a> 
<a> int <RARE_TOKEN> = requests . size ( ) ; </a> 
<a> final ArrayList < <RARE_TOKEN> < Callback , Response > > <RARE_TOKEN> = new ArrayList < <RARE_TOKEN> < Callback , Response > > ( ) ; </a> 
<a> for ( int i = 0 ; i < <RARE_TOKEN> ; ++ i ) { </a> 
<a> Request request = requests . get ( i ) ; </a> 
<a> if ( request . callback != null ) { </a> 
<a> <RARE_TOKEN> . add ( new <RARE_TOKEN> < Callback , Response > ( request . callback , responses . get ( i ) ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> . size ( ) > 0 ) { </a> 
<a> Runnable <RARE_TOKEN> = new Runnable ( ) { </a> 
<a> public void run ( ) { </a> 
<a> for ( <RARE_TOKEN> < Callback , Response > <RARE_TOKEN> : <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> . onCompleted ( <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> List < RequestBatch . Callback > <RARE_TOKEN> = requests . <RARE_TOKEN> ( ) ; </a> 
<a> for ( RequestBatch . Callback <RARE_TOKEN> : <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( requests ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } ; </a> 
<a> Handler <RARE_TOKEN> = requests . <RARE_TOKEN> ( ) ; </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> <RARE_TOKEN> . run ( ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> . post ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> static HttpURLConnection <RARE_TOKEN> ( URL url ) throws IOException { </a> 
<a> HttpURLConnection connection ; </a> 
<a> connection = ( HttpURLConnection ) url . <RARE_TOKEN> ( ) ; </a> 
<a> connection . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ( ) ) ; </a> 
<a> connection . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ( ) ) ; </a> 
<a> connection . <RARE_TOKEN> ( 0 ) ; </a> 
<a> return connection ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( ) { </a> 
<a> if ( this . session != null ) { </a> 
<a> if ( ! this . session . isOpened ( ) ) { </a> 
<a> throw new FacebookException ( <RARE_TOKEN> <RARE_TOKEN> to a Request in <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } else if ( ! this . parameters . containsKey ( <RARE_TOKEN> ) ) { </a> 
<a> String accessToken = this . session . <RARE_TOKEN> ( ) ; </a> 
<a> Logger . <RARE_TOKEN> ( accessToken ) ; </a> 
<a> this . parameters . putString ( <RARE_TOKEN> , accessToken ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> this . parameters . putString ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> this . parameters . putString ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> private String <RARE_TOKEN> ( String <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> . Builder <RARE_TOKEN> = new <RARE_TOKEN> . Builder ( ) . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> Set < String > keys = this . parameters . <RARE_TOKEN> ( ) ; </a> 
<a> for ( String key : keys ) { </a> 
<a> Object value = this . parameters . get ( key ) ; </a> 
<a> if ( value == null ) { </a> 
<a> value = "" ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> ( value ) ) { </a> 
<a> value = <RARE_TOKEN> ( value ) ; </a> 
<a> } else { </a> 
<a> if ( <RARE_TOKEN> == HttpMethod . GET ) { </a> 
<a> throw new IllegalArgumentException ( String . format ( <RARE_TOKEN> <RARE_TOKEN> type for GET <RARE_TOKEN> <RARE_TOKEN> , </a> 
<a> value . getClass ( ) . getSimpleName ( ) ) ) ; </a> 
<a> } </a> 
<a> continue ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( key , value . toString ( ) ) ; </a> 
<a> } </a> 
<a> return <RARE_TOKEN> . toString ( ) ; </a> 
<a> } </a> 
<a> final String <RARE_TOKEN> ( ) { </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> throw new FacebookException ( <RARE_TOKEN> <RARE_TOKEN> URL for a batch <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> String <RARE_TOKEN> ; </a> 
<a> if ( this . <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> + this . <RARE_TOKEN> ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> = this . graphPath ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> return <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> final String <RARE_TOKEN> ( ) { </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> return <RARE_TOKEN> . toString ( ) ; </a> 
<a> } </a> 
<a> String <RARE_TOKEN> ; </a> 
<a> if ( this . <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> + this . <RARE_TOKEN> ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> + this . graphPath ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> return <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( JSONArray batch , Bundle <RARE_TOKEN> ) throws JSONException , IOException { </a> 
<a> JSONObject <RARE_TOKEN> = new JSONObject ( ) ; </a> 
<a> if ( this . <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> . put ( <RARE_TOKEN> , this . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . put ( <RARE_TOKEN> , this . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( this . <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> . put ( <RARE_TOKEN> , this . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> String <RARE_TOKEN> = <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> . put ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . put ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> if ( this . session != null ) { </a> 
<a> String accessToken = this . session . <RARE_TOKEN> ( ) ; </a> 
<a> Logger . <RARE_TOKEN> ( accessToken ) ; </a> 
<a> } </a> 
<a> ArrayList < String > <RARE_TOKEN> = new ArrayList < String > ( ) ; </a> 
<a> Set < String > keys = this . parameters . <RARE_TOKEN> ( ) ; </a> 
<a> for ( String key : keys ) { </a> 
<a> Object value = this . parameters . get ( key ) ; </a> 
<a> if ( <RARE_TOKEN> ( value ) ) { </a> 
<a> String name = String . format ( <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> . size ( ) ) ; </a> 
<a> <RARE_TOKEN> . add ( name ) ; </a> 
<a> Utility . <RARE_TOKEN> ( <RARE_TOKEN> , name , value ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> if ( ! <RARE_TOKEN> . isEmpty ( ) ) { </a> 
<a> String <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . put ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( this . graphObject != null ) { </a> 
<a> final ArrayList < String > <RARE_TOKEN> = new ArrayList < String > ( ) ; </a> 
<a> <RARE_TOKEN> ( this . graphObject , <RARE_TOKEN> , new <RARE_TOKEN> ( ) { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( String key , String value ) throws IOException { </a> 
<a> <RARE_TOKEN> . add ( String . format ( <RARE_TOKEN> , key , <RARE_TOKEN> . encode ( value , <RARE_TOKEN> ) ) ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> String <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . put ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> batch . put ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( ) { </a> 
<a> if ( graphPath != null && <RARE_TOKEN> != null ) { </a> 
<a> throw new IllegalArgumentException ( <RARE_TOKEN> one of a <RARE_TOKEN> path or <RARE_TOKEN> method <RARE_TOKEN> be <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> final static void <RARE_TOKEN> ( RequestBatch requests , HttpURLConnection connection ) </a> 
<a> throws IOException , JSONException { </a> 
<a> Logger logger = new Logger ( LoggingBehavior . <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> int <RARE_TOKEN> = requests . size ( ) ; </a> 
<a> HttpMethod <RARE_TOKEN> = ( <RARE_TOKEN> == 1 ) ? requests . get ( 0 ) . <RARE_TOKEN> : HttpMethod . POST ; </a> 
<a> connection . <RARE_TOKEN> ( <RARE_TOKEN> . name ( ) ) ; </a> 
<a> URL url = connection . <RARE_TOKEN> ( ) ; </a> 
<a> logger . append ( <RARE_TOKEN> ) ; </a> 
<a> logger . <RARE_TOKEN> ( <RARE_TOKEN> , requests . getId ( ) ) ; </a> 
<a> logger . <RARE_TOKEN> ( <RARE_TOKEN> , url ) ; </a> 
<a> logger . <RARE_TOKEN> ( <RARE_TOKEN> , connection . <RARE_TOKEN> ( ) ) ; </a> 
<a> logger . <RARE_TOKEN> ( <RARE_TOKEN> , connection . <RARE_TOKEN> ( <RARE_TOKEN> ) ) ; </a> 
<a> logger . <RARE_TOKEN> ( <RARE_TOKEN> , connection . <RARE_TOKEN> ( <RARE_TOKEN> ) ) ; </a> 
<a> connection . <RARE_TOKEN> ( requests . <RARE_TOKEN> ( ) ) ; </a> 
<a> connection . <RARE_TOKEN> ( requests . <RARE_TOKEN> ( ) ) ; </a> 
<a> boolean <RARE_TOKEN> = ( <RARE_TOKEN> == HttpMethod . POST ) ; </a> 
<a> if ( ! <RARE_TOKEN> ) { </a> 
<a> logger . log ( ) ; </a> 
<a> return ; </a> 
<a> } </a> 
<a> connection . <RARE_TOKEN> ( true ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( connection . <RARE_TOKEN> ( ) ) ; </a> 
<a> try { </a> 
<a> <RARE_TOKEN> serializer = new <RARE_TOKEN> ( <RARE_TOKEN> , logger ) ; </a> 
<a> if ( <RARE_TOKEN> == 1 ) { </a> 
<a> Request request = requests . get ( 0 ) ; </a> 
<a> logger . append ( " <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( request . parameters , serializer ) ; </a> 
<a> logger . append ( " <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( request . parameters , serializer ) ; </a> 
<a> if ( request . graphObject != null ) { </a> 
<a> <RARE_TOKEN> ( request . graphObject , url . getPath ( ) , serializer ) ; </a> 
<a> } </a> 
<a> } else { </a> 
<a> String <RARE_TOKEN> = <RARE_TOKEN> ( requests ) ; </a> 
<a> if ( Utility . <RARE_TOKEN> ( <RARE_TOKEN> ) ) { </a> 
<a> throw new FacebookException ( <RARE_TOKEN> <RARE_TOKEN> one request in a batch must <RARE_TOKEN> an open <RARE_TOKEN> or a " </a> 
<a> + <RARE_TOKEN> app ID must be <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> serializer . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> Bundle <RARE_TOKEN> = new Bundle ( ) ; </a> 
<a> <RARE_TOKEN> ( serializer , requests , <RARE_TOKEN> ) ; </a> 
<a> logger . append ( " <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> , serializer ) ; </a> 
<a> } </a> 
<a> } finally { </a> 
<a> <RARE_TOKEN> . close ( ) ; </a> 
<a> } </a> 
<a> logger . log ( ) ; </a> 
<a> } </a> 
<a> private static void <RARE_TOKEN> ( GraphObject graphObject , String path , <RARE_TOKEN> serializer ) </a> 
<a> throws IOException { </a> 
<a> boolean <RARE_TOKEN> = false ; </a> 
<a> if ( path . startsWith ( <RARE_TOKEN> ) || path . startsWith ( <RARE_TOKEN> ) ) { </a> 
<a> int <RARE_TOKEN> = path . indexOf ( <RARE_TOKEN> ) ; </a> 
<a> int <RARE_TOKEN> = path . indexOf ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> > 3 && ( <RARE_TOKEN> == - 1 || <RARE_TOKEN> < <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> Set < Entry < String , Object > > <RARE_TOKEN> = graphObject . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> for ( Entry < String , Object > entry : <RARE_TOKEN> ) { </a> 
<a> boolean <RARE_TOKEN> = <RARE_TOKEN> && entry . <RARE_TOKEN> ( ) . equalsIgnoreCase ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( entry . <RARE_TOKEN> ( ) , entry . getValue ( ) , serializer , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private static void <RARE_TOKEN> ( String key , Object value , <RARE_TOKEN> serializer , </a> 
<a> boolean <RARE_TOKEN> ) throws IOException { </a> 
<a> Class < ? > <RARE_TOKEN> = value . getClass ( ) ; </a> 
<a> if ( GraphObject . class . isAssignableFrom ( <RARE_TOKEN> ) ) { </a> 
<a> value = ( ( GraphObject ) value ) . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> = value . getClass ( ) ; </a> 
<a> } else if ( GraphObjectList . class . isAssignableFrom ( <RARE_TOKEN> ) ) { </a> 
<a> value = ( ( GraphObjectList < ? > ) value ) . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> = value . getClass ( ) ; </a> 
<a> } </a> 
<a> if ( JSONObject . class . isAssignableFrom ( <RARE_TOKEN> ) ) { </a> 
<a> JSONObject jsonObject = ( JSONObject ) value ; </a> 
<a> if ( <RARE_TOKEN> ) { </a> 
<a> @ SuppressWarnings ( "unchecked" ) </a> 
<a> Iterator < String > keys = jsonObject . keys ( ) ; </a> 
<a> while ( keys . <RARE_TOKEN> ( ) ) { </a> 
<a> String <RARE_TOKEN> = keys . next ( ) ; </a> 
<a> String <RARE_TOKEN> = String . format ( <RARE_TOKEN> , key , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> , jsonObject . <RARE_TOKEN> ( <RARE_TOKEN> ) , serializer , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } else { </a> 
<a> if ( jsonObject . has ( <RARE_TOKEN> ) ) { </a> 
<a> <RARE_TOKEN> ( key , jsonObject . <RARE_TOKEN> ( <RARE_TOKEN> ) , serializer , <RARE_TOKEN> ) ; </a> 
<a> } else if ( jsonObject . has ( <RARE_TOKEN> ) ) { </a> 
<a> <RARE_TOKEN> ( key , jsonObject . <RARE_TOKEN> ( <RARE_TOKEN> ) , serializer , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } else if ( JSONArray . class . isAssignableFrom ( <RARE_TOKEN> ) ) { </a> 
<a> JSONArray jsonArray = ( JSONArray ) value ; </a> 
<a> int length = jsonArray . length ( ) ; </a> 
<a> for ( int i = 0 ; i < length ; ++ i ) { </a> 
<a> String <RARE_TOKEN> = String . format ( <RARE_TOKEN> , key , i ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> , jsonArray . <RARE_TOKEN> ( i ) , serializer , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } else if ( String . class . isAssignableFrom ( <RARE_TOKEN> ) || </a> 
<a> <RARE_TOKEN> . class . isAssignableFrom ( <RARE_TOKEN> ) || </a> 
<a> Boolean . class . isAssignableFrom ( <RARE_TOKEN> ) ) { </a> 
<a> serializer . <RARE_TOKEN> ( key , value . toString ( ) ) ; </a> 
<a> } else if ( Date . class . isAssignableFrom ( <RARE_TOKEN> ) ) { </a> 
<a> Date <RARE_TOKEN> = ( Date ) value ; </a> 
<a> final <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> serializer . <RARE_TOKEN> ( key , <RARE_TOKEN> . format ( <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private static void <RARE_TOKEN> ( Bundle bundle , <RARE_TOKEN> serializer ) throws IOException { </a> 
<a> Set < String > keys = bundle . <RARE_TOKEN> ( ) ; </a> 
<a> for ( String key : keys ) { </a> 
<a> Object value = bundle . get ( key ) ; </a> 
<a> if ( <RARE_TOKEN> ( value ) ) { </a> 
<a> serializer . <RARE_TOKEN> ( key , value ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> private static void <RARE_TOKEN> ( Bundle bundle , <RARE_TOKEN> serializer ) throws IOException { </a> 
<a> Set < String > keys = bundle . <RARE_TOKEN> ( ) ; </a> 
<a> for ( String key : keys ) { </a> 
<a> Object value = bundle . get ( key ) ; </a> 
<a> if ( <RARE_TOKEN> ( value ) ) { </a> 
<a> serializer . <RARE_TOKEN> ( key , value ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> private static void <RARE_TOKEN> ( <RARE_TOKEN> serializer , Collection < Request > requests , Bundle <RARE_TOKEN> ) </a> 
<a> throws JSONException , IOException { </a> 
<a> JSONArray batch = new JSONArray ( ) ; </a> 
<a> for ( Request request : requests ) { </a> 
<a> request . <RARE_TOKEN> ( batch , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> String <RARE_TOKEN> = batch . toString ( ) ; </a> 
<a> serializer . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> private static String <RARE_TOKEN> ( ) { </a> 
<a> return String . format ( <RARE_TOKEN> <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> private static volatile String <RARE_TOKEN> ; </a> 
<a> private static String <RARE_TOKEN> ( ) { </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> <RARE_TOKEN> = String . format ( <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> private static String <RARE_TOKEN> ( RequestBatch batch ) { </a> 
<a> if ( ! Utility . <RARE_TOKEN> ( batch . <RARE_TOKEN> ( ) ) ) { </a> 
<a> return batch . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> for ( Request request : batch ) { </a> 
<a> Session session = request . session ; </a> 
<a> if ( session != null ) { </a> 
<a> return session . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> return Request . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> private static < T extends GraphObject > List < T > <RARE_TOKEN> ( Response response , Class < T > clazz ) { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = response . <RARE_TOKEN> ( <RARE_TOKEN> . class ) ; </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> GraphObjectList < GraphObject > data = <RARE_TOKEN> . getData ( ) ; </a> 
<a> if ( data == null ) { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> return data . <RARE_TOKEN> ( clazz ) ; </a> 
<a> } </a> 
<a> private static boolean <RARE_TOKEN> ( Object value ) { </a> 
<a> return value instanceof Bitmap || value instanceof byte [ ] || value instanceof <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> private static boolean <RARE_TOKEN> ( Object value ) { </a> 
<a> return value instanceof String || value instanceof Boolean || value instanceof <RARE_TOKEN> || </a> 
<a> value instanceof Date ; </a> 
<a> } </a> 
<a> private static String <RARE_TOKEN> ( Object value ) { </a> 
<a> if ( value instanceof String ) { </a> 
<a> return ( String ) value ; </a> 
<a> } else if ( value instanceof Boolean || value instanceof <RARE_TOKEN> ) { </a> 
<a> return value . toString ( ) ; </a> 
<a> } else if ( value instanceof Date ) { </a> 
<a> final <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> return <RARE_TOKEN> . format ( value ) ; </a> 
<a> } </a> 
<a> throw new IllegalArgumentException ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> private interface <RARE_TOKEN> { </a> 
<a> void <RARE_TOKEN> ( String key , String value ) throws IOException ; </a> 
<a> } </a> 
<a> private static class <RARE_TOKEN> implements <RARE_TOKEN> { </a> 
<a> private final <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> private final Logger logger ; </a> 
<a> private boolean <RARE_TOKEN> = true ; </a> 
<a> public <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> , Logger logger ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> this . logger = logger ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( String key , Object value ) throws IOException { </a> 
<a> if ( <RARE_TOKEN> ( value ) ) { </a> 
<a> <RARE_TOKEN> ( key , <RARE_TOKEN> ( value ) ) ; </a> 
<a> } else if ( value instanceof Bitmap ) { </a> 
<a> <RARE_TOKEN> ( key , ( Bitmap ) value ) ; </a> 
<a> } else if ( value instanceof byte [ ] ) { </a> 
<a> writeBytes ( key , ( byte [ ] ) value ) ; </a> 
<a> } else if ( value instanceof <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( key , ( <RARE_TOKEN> ) value ) ; </a> 
<a> } else { </a> 
<a> throw new IllegalArgumentException ( <RARE_TOKEN> is not a <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( String key , String value ) throws IOException { </a> 
<a> <RARE_TOKEN> ( key , null , null ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> , value ) ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> if ( logger != null ) { </a> 
<a> logger . <RARE_TOKEN> ( " " + key , value ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( String key , Bitmap <RARE_TOKEN> ) throws IOException { </a> 
<a> <RARE_TOKEN> ( key , key , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( Bitmap . <RARE_TOKEN> . <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( "" ) ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> logger . <RARE_TOKEN> ( " " + key , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public void writeBytes ( String key , byte [ ] bytes ) throws IOException { </a> 
<a> <RARE_TOKEN> ( key , key , <RARE_TOKEN> ) ; </a> 
<a> this . <RARE_TOKEN> . write ( bytes ) ; </a> 
<a> <RARE_TOKEN> ( "" ) ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> logger . <RARE_TOKEN> ( " " + key , String . format ( <RARE_TOKEN> <RARE_TOKEN> , bytes . length ) ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( String key , <RARE_TOKEN> <RARE_TOKEN> ) throws IOException { </a> 
<a> <RARE_TOKEN> ( key , key , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> <RARE_TOKEN> = null ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = null ; </a> 
<a> int <RARE_TOKEN> = 0 ; </a> 
<a> try { </a> 
<a> <RARE_TOKEN> = new <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = new <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> byte [ ] buffer = new byte [ <RARE_TOKEN> ] ; </a> 
<a> int <RARE_TOKEN> ; </a> 
<a> while ( ( <RARE_TOKEN> = <RARE_TOKEN> . read ( buffer ) ) != - 1 ) { </a> 
<a> this . <RARE_TOKEN> . write ( buffer , 0 , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> += <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } finally { </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> . close ( ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> . close ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( "" ) ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> logger . <RARE_TOKEN> ( " " + key , String . format ( <RARE_TOKEN> <RARE_TOKEN> , <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( ) throws IOException { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( String name , String <RARE_TOKEN> , String contentType ) throws IOException { </a> 
<a> write ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> , name ) ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> write ( <RARE_TOKEN> <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( "" ) ; </a> 
<a> if ( contentType != null ) { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> , <RARE_TOKEN> , contentType ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( "" ) ; </a> 
<a> } </a> 
<a> public void write ( String format , Object ... args ) throws IOException { </a> 
<a> if ( <RARE_TOKEN> ) { </a> 
<a> this . <RARE_TOKEN> . write ( <RARE_TOKEN> . getBytes ( ) ) ; </a> 
<a> this . <RARE_TOKEN> . write ( <RARE_TOKEN> . getBytes ( ) ) ; </a> 
<a> this . <RARE_TOKEN> . write ( <RARE_TOKEN> . getBytes ( ) ) ; </a> 
<a> <RARE_TOKEN> = false ; </a> 
<a> } </a> 
<a> this . <RARE_TOKEN> . write ( String . format ( format , args ) . getBytes ( ) ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( String format , Object ... args ) throws IOException { </a> 
<a> write ( format , args ) ; </a> 
<a> write ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public interface Callback { </a> 
<a> void onCompleted ( Response response ) ; </a> 
<a> } </a> 
<a> public interface <RARE_TOKEN> { </a> 
<a> void onCompleted ( GraphUser user , Response response ) ; </a> 
<a> } </a> 
<a> public interface <RARE_TOKEN> { </a> 
<a> void onCompleted ( List < GraphUser > <RARE_TOKEN> , Response response ) ; </a> 
<a> } </a> 
<a> public interface <RARE_TOKEN> { </a> 
<a> void onCompleted ( List < GraphPlace > <RARE_TOKEN> , Response response ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package com . facebook ; </a> 
<a> import android . annotation . <RARE_TOKEN> ; </a> 
<a> import android . os . <RARE_TOKEN> ; </a> 
<a> import android . os . Handler ; </a> 
<a> import android . util . Log ; </a> 
<a> import java . lang . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import java . lang . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import java . net . HttpURLConnection ; </a> 
<a> import java . util . Collection ; </a> 
<a> import java . util . List ; </a> 
<a> import java . util . concurrent . <RARE_TOKEN> ; </a> 
<a> @ <RARE_TOKEN> ( 3 ) </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> < Void , Void , List < Response > > { </a> 
<a> private static final String TAG = <RARE_TOKEN> . class . <RARE_TOKEN> ( ) ; </a> 
<a> private static <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> private final HttpURLConnection connection ; </a> 
<a> private final RequestBatch requests ; </a> 
<a> private Exception exception ; </a> 
<a> static { </a> 
<a> for ( <RARE_TOKEN> method : <RARE_TOKEN> . class . <RARE_TOKEN> ( ) ) { </a> 
<a> if ( <RARE_TOKEN> . equals ( method . getName ( ) ) ) { </a> 
<a> Class < ? > [ ] parameters = method . <RARE_TOKEN> ( ) ; </a> 
<a> if ( ( parameters . length == 2 ) && ( parameters [ 0 ] == <RARE_TOKEN> . class ) && parameters [ 1 ] . <RARE_TOKEN> ( ) ) { </a> 
<a> <RARE_TOKEN> = method ; </a> 
<a> break ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( Request ... requests ) { </a> 
<a> this ( null , new RequestBatch ( requests ) ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( Collection < Request > requests ) { </a> 
<a> this ( null , new RequestBatch ( requests ) ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( RequestBatch requests ) { </a> 
<a> this ( null , requests ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( HttpURLConnection connection , Request ... requests ) { </a> 
<a> this ( connection , new RequestBatch ( requests ) ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( HttpURLConnection connection , Collection < Request > requests ) { </a> 
<a> this ( connection , new RequestBatch ( requests ) ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( HttpURLConnection connection , RequestBatch requests ) { </a> 
<a> this . requests = requests ; </a> 
<a> this . connection = connection ; </a> 
<a> } </a> 
<a> protected final Exception <RARE_TOKEN> ( ) { </a> 
<a> return exception ; </a> 
<a> } </a> 
<a> protected final RequestBatch <RARE_TOKEN> ( ) { </a> 
<a> return requests ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public String toString ( ) { </a> 
<a> return new StringBuilder ( ) . append ( <RARE_TOKEN> " ) . append ( " <RARE_TOKEN> " ) . append ( connection ) </a> 
<a> . append ( ", <RARE_TOKEN> " ) . append ( requests ) . append ( <RARE_TOKEN> ) . toString ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( ) { </a> 
<a> super . <RARE_TOKEN> ( ) ; </a> 
<a> if ( requests . <RARE_TOKEN> ( ) == null ) { </a> 
<a> requests . <RARE_TOKEN> ( new Handler ( ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( List < Response > result ) { </a> 
<a> super . <RARE_TOKEN> ( result ) ; </a> 
<a> if ( exception != null ) { </a> 
<a> Log . d ( TAG , String . format ( <RARE_TOKEN> exception <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> , exception . getMessage ( ) ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected List < Response > <RARE_TOKEN> ( Void ... params ) { </a> 
<a> try { </a> 
<a> if ( connection == null ) { </a> 
<a> return requests . <RARE_TOKEN> ( ) ; </a> 
<a> } else { </a> 
<a> return Request . <RARE_TOKEN> ( connection , requests ) ; </a> 
<a> } </a> 
<a> } catch ( Exception e ) { </a> 
<a> exception = e ; </a> 
<a> return null ; </a> 
<a> } </a> 
<a> } </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> ( ) { </a> 
<a> try { </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( this , <RARE_TOKEN> . <RARE_TOKEN> ( ) , null ) ; </a> 
<a> return this ; </a> 
<a> } </a> 
<a> } catch ( <RARE_TOKEN> e ) { </a> 
<a> } catch ( <RARE_TOKEN> e ) { </a> 
<a> } </a> 
<a> this . execute ( ) ; </a> 
<a> return this ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package com . facebook ; </a> 
<a> import android . os . Handler ; </a> 
<a> import java . util . * ; </a> 
<a> import java . util . concurrent . atomic . AtomicInteger ; </a> 
<a> public class RequestBatch extends <RARE_TOKEN> < Request > { </a> 
<a> private static AtomicInteger <RARE_TOKEN> = new AtomicInteger ( ) ; </a> 
<a> private Handler <RARE_TOKEN> ; </a> 
<a> private List < Request > requests = new ArrayList < Request > ( ) ; </a> 
<a> private int <RARE_TOKEN> = 0 ; </a> 
<a> private final String id = Integer . valueOf ( <RARE_TOKEN> . <RARE_TOKEN> ( ) ) . toString ( ) ; </a> 
<a> private List < Callback > <RARE_TOKEN> = new ArrayList < Callback > ( ) ; </a> 
<a> private String <RARE_TOKEN> ; </a> 
<a> public RequestBatch ( ) { </a> 
<a> this . requests = new ArrayList < Request > ( ) ; </a> 
<a> } </a> 
<a> public RequestBatch ( Collection < Request > requests ) { </a> 
<a> this . requests = new ArrayList < Request > ( requests ) ; </a> 
<a> } </a> 
<a> public RequestBatch ( Request ... requests ) { </a> 
<a> this . requests = Arrays . asList ( requests ) ; </a> 
<a> } </a> 
<a> public RequestBatch ( RequestBatch requests ) { </a> 
<a> this . requests = new ArrayList < Request > ( requests ) ; </a> 
<a> this . <RARE_TOKEN> = requests . <RARE_TOKEN> ; </a> 
<a> this . <RARE_TOKEN> = requests . <RARE_TOKEN> ; </a> 
<a> this . <RARE_TOKEN> = new ArrayList < Callback > ( requests . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public int <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( int <RARE_TOKEN> ) { </a> 
<a> if ( <RARE_TOKEN> < 0 ) { </a> 
<a> throw new IllegalArgumentException ( <RARE_TOKEN> <RARE_TOKEN> must be >= <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( Callback callback ) { </a> 
<a> if ( ! <RARE_TOKEN> . contains ( callback ) ) { </a> 
<a> <RARE_TOKEN> . add ( callback ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( Callback callback ) { </a> 
<a> <RARE_TOKEN> . remove ( callback ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public final boolean add ( Request request ) { </a> 
<a> return requests . add ( request ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public final void add ( int location , Request request ) { </a> 
<a> requests . add ( location , request ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public final void clear ( ) { </a> 
<a> requests . clear ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public final Request get ( int i ) { </a> 
<a> return requests . get ( i ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public final Request remove ( int location ) { </a> 
<a> return requests . remove ( location ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public final Request set ( int location , Request request ) { </a> 
<a> return requests . set ( location , request ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public final int size ( ) { </a> 
<a> return requests . size ( ) ; </a> 
<a> } </a> 
<a> final String getId ( ) { </a> 
<a> return id ; </a> 
<a> } </a> 
<a> final Handler <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> final void <RARE_TOKEN> ( Handler <RARE_TOKEN> ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> final List < Request > <RARE_TOKEN> ( ) { </a> 
<a> return requests ; </a> 
<a> } </a> 
<a> final List < Callback > <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> final String <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> final void <RARE_TOKEN> ( String <RARE_TOKEN> ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public final List < Response > <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> public final <RARE_TOKEN> <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> public interface Callback { </a> 
<a> void <RARE_TOKEN> ( RequestBatch batch ) ; </a> 
<a> } </a> 
<a> List < Response > <RARE_TOKEN> ( ) { </a> 
<a> return Request . <RARE_TOKEN> ( this ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> ( ) { </a> 
<a> return Request . <RARE_TOKEN> ( this ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package com . facebook ; </a> 
<a> import android . content . Context ; </a> 
<a> import com . facebook . internal . * ; </a> 
<a> import com . facebook . model . GraphObject ; </a> 
<a> import com . facebook . model . GraphObjectList ; </a> 
<a> import org . json . JSONArray ; </a> 
<a> import org . json . JSONException ; </a> 
<a> import org . json . JSONObject ; </a> 
<a> import org . json . <RARE_TOKEN> ; </a> 
<a> import java . io . IOException ; </a> 
<a> import java . io . InputStream ; </a> 
<a> import java . net . HttpURLConnection ; </a> 
<a> import java . net . <RARE_TOKEN> ; </a> 
<a> import java . net . URL ; </a> 
<a> import java . util . ArrayList ; </a> 
<a> import java . util . List ; </a> 
<a> public class Response { </a> 
<a> private final HttpURLConnection connection ; </a> 
<a> private final GraphObject graphObject ; </a> 
<a> private final GraphObjectList < GraphObject > <RARE_TOKEN> ; </a> 
<a> private final boolean <RARE_TOKEN> ; </a> 
<a> private final FacebookRequestError error ; </a> 
<a> private final Request request ; </a> 
<a> public static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final int <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static FileLruCache <RARE_TOKEN> ; </a> 
<a> Response ( Request request , HttpURLConnection connection , GraphObject graphObject , boolean <RARE_TOKEN> ) { </a> 
<a> this . request = request ; </a> 
<a> this . connection = connection ; </a> 
<a> this . graphObject = graphObject ; </a> 
<a> this . <RARE_TOKEN> = null ; </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> this . error = null ; </a> 
<a> } </a> 
<a> Response ( Request request , HttpURLConnection connection , GraphObjectList < GraphObject > <RARE_TOKEN> , </a> 
<a> boolean <RARE_TOKEN> ) { </a> 
<a> this . request = request ; </a> 
<a> this . connection = connection ; </a> 
<a> this . graphObject = null ; </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> this . error = null ; </a> 
<a> } </a> 
<a> Response ( Request request , HttpURLConnection connection , FacebookRequestError error ) { </a> 
<a> this . request = request ; </a> 
<a> this . connection = connection ; </a> 
<a> this . graphObject = null ; </a> 
<a> this . <RARE_TOKEN> = null ; </a> 
<a> this . <RARE_TOKEN> = false ; </a> 
<a> this . error = error ; </a> 
<a> } </a> 
<a> public final FacebookRequestError getError ( ) { </a> 
<a> return error ; </a> 
<a> } </a> 
<a> public final GraphObject <RARE_TOKEN> ( ) { </a> 
<a> return graphObject ; </a> 
<a> } </a> 
<a> public final < T extends GraphObject > T <RARE_TOKEN> ( Class < T > graphObjectClass ) { </a> 
<a> if ( graphObject == null ) { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> if ( graphObjectClass == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> <RARE_TOKEN> in a <RARE_TOKEN> interface that extends <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> return graphObject . cast ( graphObjectClass ) ; </a> 
<a> } </a> 
<a> public final GraphObjectList < GraphObject > <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public final < T extends GraphObject > GraphObjectList < T > <RARE_TOKEN> ( Class < T > graphObjectClass ) { </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> return <RARE_TOKEN> . <RARE_TOKEN> ( graphObjectClass ) ; </a> 
<a> } </a> 
<a> public final HttpURLConnection <RARE_TOKEN> ( ) { </a> 
<a> return connection ; </a> 
<a> } </a> 
<a> public Request getRequest ( ) { </a> 
<a> return request ; </a> 
<a> } </a> 
<a> public enum <RARE_TOKEN> { </a> 
<a> <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> </a> 
<a> } </a> 
<a> public Request <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> String <RARE_TOKEN> = null ; </a> 
<a> if ( graphObject != null ) { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = graphObject . cast ( <RARE_TOKEN> . class ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> if ( <RARE_TOKEN> == <RARE_TOKEN> . <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> if ( Utility . <RARE_TOKEN> ( <RARE_TOKEN> ) ) { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> != null && <RARE_TOKEN> . equals ( request . <RARE_TOKEN> ( ) ) ) { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> Request <RARE_TOKEN> ; </a> 
<a> try { </a> 
<a> <RARE_TOKEN> = new Request ( request . getSession ( ) , new URL ( <RARE_TOKEN> ) ) ; </a> 
<a> } catch ( <RARE_TOKEN> e ) { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public String toString ( ) { </a> 
<a> String <RARE_TOKEN> ; </a> 
<a> try { </a> 
<a> <RARE_TOKEN> = String . format ( <RARE_TOKEN> , ( connection != null ) ? connection . <RARE_TOKEN> ( ) : 200 ) ; </a> 
<a> } catch ( IOException e ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> return new StringBuilder ( ) . append ( <RARE_TOKEN> " ) . append ( " <RARE_TOKEN> " ) . append ( <RARE_TOKEN> ) </a> 
<a> . append ( ", <RARE_TOKEN> " ) . append ( graphObject ) . append ( ", <RARE_TOKEN> " ) . append ( error ) </a> 
<a> . append ( ", <RARE_TOKEN> ) . append ( <RARE_TOKEN> ) . append ( <RARE_TOKEN> ) </a> 
<a> . toString ( ) ; </a> 
<a> } </a> 
<a> public final boolean <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> static FileLruCache <RARE_TOKEN> ( ) { </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> Context <RARE_TOKEN> = Session . <RARE_TOKEN> ( ) ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> = new FileLruCache ( <RARE_TOKEN> , <RARE_TOKEN> , new FileLruCache . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ SuppressWarnings ( <RARE_TOKEN> ) </a> 
<a> static List < Response > <RARE_TOKEN> ( HttpURLConnection connection , RequestBatch requests ) { </a> 
<a> InputStream stream = null ; </a> 
<a> FileLruCache cache = null ; </a> 
<a> String <RARE_TOKEN> = null ; </a> 
<a> if ( requests instanceof <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = ( <RARE_TOKEN> ) requests ; </a> 
<a> cache = <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> if ( Utility . <RARE_TOKEN> ( <RARE_TOKEN> ) ) { </a> 
<a> if ( requests . size ( ) == 1 ) { </a> 
<a> <RARE_TOKEN> = requests . get ( 0 ) . <RARE_TOKEN> ( ) ; </a> 
<a> } else { </a> 
<a> Logger . log ( LoggingBehavior . <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> cache for <RARE_TOKEN> request <RARE_TOKEN> <RARE_TOKEN> key <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> if ( ! <RARE_TOKEN> . <RARE_TOKEN> ( ) && cache != null && ! Utility . <RARE_TOKEN> ( <RARE_TOKEN> ) ) { </a> 
<a> try { </a> 
<a> stream = cache . get ( <RARE_TOKEN> ) ; </a> 
<a> if ( stream != null ) { </a> 
<a> return <RARE_TOKEN> ( stream , null , requests , true ) ; </a> 
<a> } </a> 
<a> } catch ( FacebookException exception ) { </a> 
<a> } catch ( JSONException exception ) { </a> 
<a> } catch ( IOException exception ) { </a> 
<a> } finally { </a> 
<a> Utility . <RARE_TOKEN> ( stream ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> try { </a> 
<a> if ( connection . <RARE_TOKEN> ( ) >= <RARE_TOKEN> ) { </a> 
<a> stream = connection . <RARE_TOKEN> ( ) ; </a> 
<a> } else { </a> 
<a> stream = connection . <RARE_TOKEN> ( ) ; </a> 
<a> if ( ( cache != null ) && ( <RARE_TOKEN> != null ) && ( stream != null ) ) { </a> 
<a> InputStream <RARE_TOKEN> = cache . <RARE_TOKEN> ( <RARE_TOKEN> , stream ) ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> stream = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> return <RARE_TOKEN> ( stream , connection , requests , false ) ; </a> 
<a> } catch ( FacebookException <RARE_TOKEN> ) { </a> 
<a> Logger . log ( LoggingBehavior . <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> return <RARE_TOKEN> ( requests , connection , <RARE_TOKEN> ) ; </a> 
<a> } catch ( JSONException exception ) { </a> 
<a> Logger . log ( LoggingBehavior . <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> , exception ) ; </a> 
<a> return <RARE_TOKEN> ( requests , connection , new FacebookException ( exception ) ) ; </a> 
<a> } catch ( IOException exception ) { </a> 
<a> Logger . log ( LoggingBehavior . <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> , exception ) ; </a> 
<a> return <RARE_TOKEN> ( requests , connection , new FacebookException ( exception ) ) ; </a> 
<a> } finally { </a> 
<a> Utility . <RARE_TOKEN> ( stream ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> static List < Response > <RARE_TOKEN> ( InputStream stream , HttpURLConnection connection , </a> 
<a> RequestBatch requests , boolean <RARE_TOKEN> ) throws FacebookException , JSONException , IOException { </a> 
<a> String <RARE_TOKEN> = Utility . <RARE_TOKEN> ( stream ) ; </a> 
<a> Logger . log ( LoggingBehavior . <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> , <RARE_TOKEN> . length ( ) , </a> 
<a> <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> Object <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> List < Response > responses = <RARE_TOKEN> ( connection , requests , <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> Logger . log ( LoggingBehavior . <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> , </a> 
<a> requests . getId ( ) , <RARE_TOKEN> . length ( ) , responses ) ; </a> 
<a> return responses ; </a> 
<a> } </a> 
<a> private static List < Response > <RARE_TOKEN> ( HttpURLConnection connection , List < Request > requests , </a> 
<a> Object object , boolean <RARE_TOKEN> ) throws FacebookException , JSONException { </a> 
<a> assert ( connection != null ) || <RARE_TOKEN> ; </a> 
<a> int <RARE_TOKEN> = requests . size ( ) ; </a> 
<a> List < Response > responses = new ArrayList < Response > ( <RARE_TOKEN> ) ; </a> 
<a> Object <RARE_TOKEN> = object ; </a> 
<a> if ( <RARE_TOKEN> == 1 ) { </a> 
<a> Request request = requests . get ( 0 ) ; </a> 
<a> try { </a> 
<a> JSONObject jsonObject = new JSONObject ( ) ; </a> 
<a> jsonObject . put ( <RARE_TOKEN> , object ) ; </a> 
<a> int <RARE_TOKEN> = ( connection != null ) ? connection . <RARE_TOKEN> ( ) : 200 ; </a> 
<a> jsonObject . put ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> JSONArray jsonArray = new JSONArray ( ) ; </a> 
<a> jsonArray . put ( jsonObject ) ; </a> 
<a> object = jsonArray ; </a> 
<a> } catch ( JSONException e ) { </a> 
<a> responses . add ( new Response ( request , connection , new FacebookRequestError ( connection , e ) ) ) ; </a> 
<a> } catch ( IOException e ) { </a> 
<a> responses . add ( new Response ( request , connection , new FacebookRequestError ( connection , e ) ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> if ( ! ( object instanceof JSONArray ) || ( ( JSONArray ) object ) . length ( ) != <RARE_TOKEN> ) { </a> 
<a> FacebookException exception = new FacebookException ( "Unexpected <RARE_TOKEN> of <RARE_TOKEN> ) ; </a> 
<a> throw exception ; </a> 
<a> } </a> 
<a> JSONArray jsonArray = ( JSONArray ) object ; </a> 
<a> for ( int i = 0 ; i < jsonArray . length ( ) ; ++ i ) { </a> 
<a> Request request = requests . get ( i ) ; </a> 
<a> try { </a> 
<a> Object obj = jsonArray . get ( i ) ; </a> 
<a> responses . add ( <RARE_TOKEN> ( request , connection , obj , <RARE_TOKEN> , <RARE_TOKEN> ) ) ; </a> 
<a> } catch ( JSONException e ) { </a> 
<a> responses . add ( new Response ( request , connection , new FacebookRequestError ( connection , e ) ) ) ; </a> 
<a> } catch ( FacebookException e ) { </a> 
<a> responses . add ( new Response ( request , connection , new FacebookRequestError ( connection , e ) ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> return responses ; </a> 
<a> } </a> 
<a> private static Response <RARE_TOKEN> ( Request request , HttpURLConnection connection , Object object , </a> 
<a> boolean <RARE_TOKEN> , Object <RARE_TOKEN> ) throws JSONException { </a> 
<a> if ( object instanceof JSONObject ) { </a> 
<a> JSONObject jsonObject = ( JSONObject ) object ; </a> 
<a> FacebookRequestError error = </a> 
<a> FacebookRequestError . <RARE_TOKEN> ( jsonObject , <RARE_TOKEN> , connection ) ; </a> 
<a> if ( error != null ) { </a> 
<a> if ( error . <RARE_TOKEN> ( ) == <RARE_TOKEN> ) { </a> 
<a> Session session = request . getSession ( ) ; </a> 
<a> if ( session != null ) { </a> 
<a> session . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> return new Response ( request , connection , error ) ; </a> 
<a> } </a> 
<a> Object <RARE_TOKEN> = Utility . <RARE_TOKEN> ( jsonObject , <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> instanceof JSONObject ) { </a> 
<a> GraphObject graphObject = GraphObject . Factory . create ( ( JSONObject ) <RARE_TOKEN> ) ; </a> 
<a> return new Response ( request , connection , graphObject , <RARE_TOKEN> ) ; </a> 
<a> } else if ( <RARE_TOKEN> instanceof JSONArray ) { </a> 
<a> GraphObjectList < GraphObject > <RARE_TOKEN> = GraphObject . Factory . <RARE_TOKEN> ( </a> 
<a> ( JSONArray ) <RARE_TOKEN> , GraphObject . class ) ; </a> 
<a> return new Response ( request , connection , <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> object = JSONObject . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> if ( object == JSONObject . <RARE_TOKEN> ) { </a> 
<a> return new Response ( request , connection , ( GraphObject ) null , <RARE_TOKEN> ) ; </a> 
<a> } else { </a> 
<a> throw new FacebookException ( <RARE_TOKEN> <RARE_TOKEN> object type in <RARE_TOKEN> <RARE_TOKEN> " </a> 
<a> + object . getClass ( ) . getSimpleName ( ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> static List < Response > <RARE_TOKEN> ( List < Request > requests , HttpURLConnection connection , </a> 
<a> FacebookException error ) { </a> 
<a> int count = requests . size ( ) ; </a> 
<a> List < Response > responses = new ArrayList < Response > ( count ) ; </a> 
<a> for ( int i = 0 ; i < count ; ++ i ) { </a> 
<a> Response response = new Response ( requests . get ( i ) , connection , new FacebookRequestError ( connection , error ) ) ; </a> 
<a> responses . add ( response ) ; </a> 
<a> } </a> 
<a> return responses ; </a> 
<a> } </a> 
<a> interface <RARE_TOKEN> extends GraphObject { </a> 
<a> String <RARE_TOKEN> ( ) ; </a> 
<a> String <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> interface <RARE_TOKEN> extends GraphObject { </a> 
<a> GraphObjectList < GraphObject > getData ( ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package com . facebook ; </a> 
<a> import android . app . Activity ; </a> 
<a> import android . content . * ; </a> 
<a> import android . content . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import android . os . * ; </a> 
<a> import android . support . v4 . app . <RARE_TOKEN> ; </a> 
<a> import android . support . v4 . content . <RARE_TOKEN> ; </a> 
<a> import android . util . Log ; </a> 
<a> import com . facebook . internal . <RARE_TOKEN> ; </a> 
<a> import com . facebook . internal . Utility ; </a> 
<a> import com . facebook . internal . Validate ; </a> 
<a> import java . io . * ; </a> 
<a> import java . lang . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import java . util . * ; </a> 
<a> public class Session implements Serializable { </a> 
<a> private static final long serialVersionUID = <RARE_TOKEN> ; </a> 
<a> public static final String TAG = Session . class . <RARE_TOKEN> ( ) ; </a> 
<a> public static final int <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> public static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> public static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> public static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> public static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> public static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> public static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> public static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final Object <RARE_TOKEN> = new Object ( ) ; </a> 
<a> private static Session <RARE_TOKEN> ; </a> 
<a> private static volatile Context <RARE_TOKEN> ; </a> 
<a> private static final int <RARE_TOKEN> = 24 * <RARE_TOKEN> * <RARE_TOKEN> ; </a> 
<a> private static final int <RARE_TOKEN> = <RARE_TOKEN> * <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> @ SuppressWarnings ( <RARE_TOKEN> ) </a> 
<a> private static final Set < String > <RARE_TOKEN> = new HashSet < String > ( ) { { </a> 
<a> add ( <RARE_TOKEN> ) ; </a> 
<a> add ( <RARE_TOKEN> ) ; </a> 
<a> add ( <RARE_TOKEN> ) ; </a> 
<a> } } ; </a> 
<a> private String applicationId ; </a> 
<a> private SessionState state ; </a> 
<a> private AccessToken <RARE_TOKEN> ; </a> 
<a> private Date <RARE_TOKEN> = new Date ( 0 ) ; </a> 
<a> private AuthorizationRequest pendingRequest ; </a> 
<a> private AuthorizationClient <RARE_TOKEN> ; </a> 
<a> private volatile Bundle <RARE_TOKEN> ; </a> 
<a> private final List < StatusCallback > <RARE_TOKEN> ; </a> 
<a> private Handler handler ; </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> private final Object lock = new Object ( ) ; </a> 
<a> private TokenCachingStrategy <RARE_TOKEN> ; </a> 
<a> private volatile <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> private static class <RARE_TOKEN> implements Serializable { </a> 
<a> private static final long serialVersionUID = <RARE_TOKEN> ; </a> 
<a> private final String applicationId ; </a> 
<a> private final SessionState state ; </a> 
<a> private final AccessToken <RARE_TOKEN> ; </a> 
<a> private final Date <RARE_TOKEN> ; </a> 
<a> private final boolean <RARE_TOKEN> ; </a> 
<a> private final AuthorizationRequest pendingRequest ; </a> 
<a> <RARE_TOKEN> ( String applicationId , SessionState state , </a> 
<a> AccessToken <RARE_TOKEN> , Date <RARE_TOKEN> , </a> 
<a> boolean <RARE_TOKEN> , AuthorizationRequest pendingRequest ) { </a> 
<a> this . applicationId = applicationId ; </a> 
<a> this . state = state ; </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> this . pendingRequest = pendingRequest ; </a> 
<a> } </a> 
<a> private Object <RARE_TOKEN> ( ) { </a> 
<a> return new Session ( applicationId , state , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , pendingRequest ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private Session ( String applicationId , SessionState state , </a> 
<a> AccessToken <RARE_TOKEN> , Date <RARE_TOKEN> , </a> 
<a> boolean <RARE_TOKEN> , AuthorizationRequest pendingRequest ) { </a> 
<a> this . applicationId = applicationId ; </a> 
<a> this . state = state ; </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> this . pendingRequest = pendingRequest ; </a> 
<a> handler = new Handler ( <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> <RARE_TOKEN> = null ; </a> 
<a> <RARE_TOKEN> = null ; </a> 
<a> <RARE_TOKEN> = new ArrayList < StatusCallback > ( ) ; </a> 
<a> } </a> 
<a> public Session ( Context <RARE_TOKEN> ) { </a> 
<a> this ( <RARE_TOKEN> , null , null , true ) ; </a> 
<a> } </a> 
<a> Session ( Context context , String applicationId , TokenCachingStrategy <RARE_TOKEN> ) { </a> 
<a> this ( context , applicationId , <RARE_TOKEN> , true ) ; </a> 
<a> } </a> 
<a> Session ( Context context , String applicationId , TokenCachingStrategy <RARE_TOKEN> , </a> 
<a> boolean <RARE_TOKEN> ) { </a> 
<a> if ( ( context != null ) && ( applicationId == null ) ) { </a> 
<a> applicationId = Utility . <RARE_TOKEN> ( context ) ; </a> 
<a> } </a> 
<a> Validate . <RARE_TOKEN> ( applicationId , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( context ) ; </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> <RARE_TOKEN> = new <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> this . applicationId = applicationId ; </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> this . state = SessionState . <RARE_TOKEN> ; </a> 
<a> this . pendingRequest = null ; </a> 
<a> this . <RARE_TOKEN> = new ArrayList < StatusCallback > ( ) ; </a> 
<a> this . handler = new Handler ( <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> Bundle <RARE_TOKEN> = <RARE_TOKEN> ? <RARE_TOKEN> . <RARE_TOKEN> ( ) : null ; </a> 
<a> if ( TokenCachingStrategy . <RARE_TOKEN> ( <RARE_TOKEN> ) ) { </a> 
<a> Date <RARE_TOKEN> = TokenCachingStrategy </a> 
<a> . <RARE_TOKEN> ( <RARE_TOKEN> , TokenCachingStrategy . <RARE_TOKEN> ) ; </a> 
<a> Date <RARE_TOKEN> = new Date ( ) ; </a> 
<a> if ( ( <RARE_TOKEN> == null ) || <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ) { </a> 
<a> <RARE_TOKEN> . clear ( ) ; </a> 
<a> this . <RARE_TOKEN> = AccessToken . <RARE_TOKEN> ( Collections . < String > <RARE_TOKEN> ( ) ) ; </a> 
<a> } else { </a> 
<a> this . <RARE_TOKEN> = AccessToken . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> this . state = SessionState . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } else { </a> 
<a> this . <RARE_TOKEN> = AccessToken . <RARE_TOKEN> ( Collections . < String > <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public final Bundle <RARE_TOKEN> ( ) { </a> 
<a> synchronized ( this . lock ) { </a> 
<a> return this . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<a> public final boolean isOpened ( ) { </a> 
<a> synchronized ( this . lock ) { </a> 
<a> return this . state . isOpened ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public final boolean <RARE_TOKEN> ( ) { </a> 
<a> synchronized ( this . lock ) { </a> 
<a> return this . state . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public final SessionState <RARE_TOKEN> ( ) { </a> 
<a> synchronized ( this . lock ) { </a> 
<a> return this . state ; </a> 
<a> } </a> 
<a> } </a> 
<a> public final String <RARE_TOKEN> ( ) { </a> 
<a> return this . applicationId ; </a> 
<a> } </a> 
<a> public final String <RARE_TOKEN> ( ) { </a> 
<a> synchronized ( this . lock ) { </a> 
<a> return ( this . <RARE_TOKEN> == null ) ? null : this . <RARE_TOKEN> . getToken ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public final Date <RARE_TOKEN> ( ) { </a> 
<a> synchronized ( this . lock ) { </a> 
<a> return ( this . <RARE_TOKEN> == null ) ? null : this . <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public final List < String > getPermissions ( ) { </a> 
<a> synchronized ( this . lock ) { </a> 
<a> return ( this . <RARE_TOKEN> == null ) ? null : this . <RARE_TOKEN> . getPermissions ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public final void <RARE_TOKEN> ( OpenRequest openRequest ) { </a> 
<a> open ( openRequest , <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public final void <RARE_TOKEN> ( OpenRequest openRequest ) { </a> 
<a> open ( openRequest , <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public final void open ( AccessToken accessToken , StatusCallback callback ) { </a> 
<a> synchronized ( this . lock ) { </a> 
<a> if ( pendingRequest != null ) { </a> 
<a> throw new UnsupportedOperationException ( </a> 
<a> <RARE_TOKEN> an <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> to open a session that has a <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( state != SessionState . <RARE_TOKEN> && state != SessionState . <RARE_TOKEN> ) { </a> 
<a> throw new UnsupportedOperationException ( </a> 
<a> <RARE_TOKEN> an <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> to open an <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( callback != null ) { </a> 
<a> <RARE_TOKEN> ( callback ) ; </a> 
<a> } </a> 
<a> this . <RARE_TOKEN> = accessToken ; </a> 
<a> if ( this . <RARE_TOKEN> != null ) { </a> 
<a> this . <RARE_TOKEN> . <RARE_TOKEN> ( accessToken . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> final SessionState <RARE_TOKEN> = state ; </a> 
<a> state = SessionState . <RARE_TOKEN> ; </a> 
<a> this . <RARE_TOKEN> ( <RARE_TOKEN> , state , null ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> public final void <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public final void <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public final boolean onActivityResult ( Activity <RARE_TOKEN> , int requestCode , int resultCode , Intent data ) { </a> 
<a> Validate . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> synchronized ( lock ) { </a> 
<a> if ( pendingRequest == null || ( requestCode != pendingRequest . <RARE_TOKEN> ( ) ) ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> } </a> 
<a> AccessToken <RARE_TOKEN> = null ; </a> 
<a> Exception exception = null ; </a> 
<a> if ( data != null ) { </a> 
<a> AuthorizationClient . Result result = ( AuthorizationClient . Result ) data . <RARE_TOKEN> ( </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> if ( result != null ) { </a> 
<a> <RARE_TOKEN> ( resultCode , result ) ; </a> 
<a> return true ; </a> 
<a> } else if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> . onActivityResult ( requestCode , resultCode , data ) ; </a> 
<a> return true ; </a> 
<a> } </a> 
<a> } else if ( resultCode == Activity . <RARE_TOKEN> ) { </a> 
<a> exception = new <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> , exception ) ; </a> 
<a> return true ; </a> 
<a> } </a> 
<a> @ SuppressWarnings ( <RARE_TOKEN> ) </a> 
<a> public final void close ( ) { </a> 
<a> synchronized ( this . lock ) { </a> 
<a> final SessionState <RARE_TOKEN> = this . state ; </a> 
<a> switch ( this . state ) { </a> 
<a> case <RARE_TOKEN> : </a> 
<a> case <RARE_TOKEN> : </a> 
<a> this . state = SessionState . <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> , this . state , new FacebookException ( </a> 
<a> <RARE_TOKEN> in <RARE_TOKEN> <RARE_TOKEN> ) ) ; </a> 
<a> break ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> case <RARE_TOKEN> : </a> 
<a> case <RARE_TOKEN> : </a> 
<a> this . state = SessionState . <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> , this . state , null ) ; </a> 
<a> break ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> public final void <RARE_TOKEN> ( ) { </a> 
<a> if ( this . <RARE_TOKEN> != null ) { </a> 
<a> this . <RARE_TOKEN> . clear ( ) ; </a> 
<a> } </a> 
<a> Utility . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> close ( ) ; </a> 
<a> } </a> 
<a> public final void <RARE_TOKEN> ( StatusCallback callback ) { </a> 
<a> synchronized ( <RARE_TOKEN> ) { </a> 
<a> if ( callback != null && ! <RARE_TOKEN> . contains ( callback ) ) { </a> 
<a> <RARE_TOKEN> . add ( callback ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> public final void <RARE_TOKEN> ( StatusCallback callback ) { </a> 
<a> synchronized ( <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> . remove ( callback ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public String toString ( ) { </a> 
<a> return new StringBuilder ( ) . append ( <RARE_TOKEN> ) . append ( " <RARE_TOKEN> ) . append ( this . state ) . append ( ", <RARE_TOKEN> ) </a> 
<a> . append ( ( this . <RARE_TOKEN> == null ) ? <RARE_TOKEN> : this . <RARE_TOKEN> ) . append ( ", <RARE_TOKEN> ) </a> 
<a> . append ( ( this . applicationId == null ) ? <RARE_TOKEN> : this . applicationId ) . append ( <RARE_TOKEN> ) . toString ( ) ; </a> 
<a> } </a> 
<a> void <RARE_TOKEN> ( Bundle bundle ) { </a> 
<a> synchronized ( this . lock ) { </a> 
<a> final SessionState <RARE_TOKEN> = this . state ; </a> 
<a> switch ( this . state ) { </a> 
<a> case <RARE_TOKEN> : </a> 
<a> this . state = SessionState . <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> , this . state , null ) ; </a> 
<a> break ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> break ; </a> 
<a> default : </a> 
<a> Log . d ( TAG , <RARE_TOKEN> <RARE_TOKEN> in state " + this . state ) ; </a> 
<a> return ; </a> 
<a> } </a> 
<a> this . <RARE_TOKEN> = AccessToken . <RARE_TOKEN> ( this . <RARE_TOKEN> , bundle ) ; </a> 
<a> if ( this . <RARE_TOKEN> != null ) { </a> 
<a> this . <RARE_TOKEN> . <RARE_TOKEN> ( this . <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> private Object <RARE_TOKEN> ( ) { </a> 
<a> return new <RARE_TOKEN> ( applicationId , state , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , false , pendingRequest ) ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( <RARE_TOKEN> stream ) throws <RARE_TOKEN> { </a> 
<a> throw new <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public static final void <RARE_TOKEN> ( Session session , Bundle bundle ) { </a> 
<a> if ( bundle != null && session != null && ! bundle . containsKey ( <RARE_TOKEN> ) ) { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( ) ; </a> 
<a> try { </a> 
<a> new <RARE_TOKEN> ( <RARE_TOKEN> ) . <RARE_TOKEN> ( session ) ; </a> 
<a> } catch ( IOException e ) { </a> 
<a> throw new FacebookException ( <RARE_TOKEN> to <RARE_TOKEN> <RARE_TOKEN> , e ) ; </a> 
<a> } </a> 
<a> bundle . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> bundle . <RARE_TOKEN> ( <RARE_TOKEN> , session . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public static final Session <RARE_TOKEN> ( </a> 
<a> Context context , TokenCachingStrategy <RARE_TOKEN> , StatusCallback callback , Bundle bundle ) { </a> 
<a> if ( bundle == null ) { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> byte [ ] data = bundle . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> if ( data != null ) { </a> 
<a> <RARE_TOKEN> is = new <RARE_TOKEN> ( data ) ; </a> 
<a> try { </a> 
<a> Session session = ( Session ) ( new <RARE_TOKEN> ( is ) ) . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> ( context ) ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> session . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } else { </a> 
<a> session . <RARE_TOKEN> = new <RARE_TOKEN> ( context ) ; </a> 
<a> } </a> 
<a> if ( callback != null ) { </a> 
<a> session . <RARE_TOKEN> ( callback ) ; </a> 
<a> } </a> 
<a> session . <RARE_TOKEN> = bundle . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> return session ; </a> 
<a> } catch ( <RARE_TOKEN> e ) { </a> 
<a> Log . w ( TAG , <RARE_TOKEN> to <RARE_TOKEN> <RARE_TOKEN> , e ) ; </a> 
<a> } catch ( IOException e ) { </a> 
<a> Log . w ( TAG , <RARE_TOKEN> to <RARE_TOKEN> <RARE_TOKEN> , e ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> return null ; </a> 
<a> } </a> 
<a> public static final Session getActiveSession ( ) { </a> 
<a> synchronized ( Session . <RARE_TOKEN> ) { </a> 
<a> return Session . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<a> public static final void <RARE_TOKEN> ( Session session ) { </a> 
<a> synchronized ( Session . <RARE_TOKEN> ) { </a> 
<a> if ( session != Session . <RARE_TOKEN> ) { </a> 
<a> Session <RARE_TOKEN> = Session . <RARE_TOKEN> ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> . close ( ) ; </a> 
<a> } </a> 
<a> Session . <RARE_TOKEN> = session ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> ( Session . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( session != null ) { </a> 
<a> <RARE_TOKEN> ( Session . <RARE_TOKEN> ) ; </a> 
<a> if ( session . isOpened ( ) ) { </a> 
<a> <RARE_TOKEN> ( Session . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> public static Session <RARE_TOKEN> ( Context context ) { </a> 
<a> return <RARE_TOKEN> ( context , false , null ) ; </a> 
<a> } </a> 
<a> public static Session <RARE_TOKEN> ( Activity activity , boolean <RARE_TOKEN> , </a> 
<a> StatusCallback callback ) { </a> 
<a> return <RARE_TOKEN> ( activity , <RARE_TOKEN> , new OpenRequest ( activity ) . setCallback ( callback ) ) ; </a> 
<a> } </a> 
<a> public static Session <RARE_TOKEN> ( Context context , <RARE_TOKEN> fragment , </a> 
<a> boolean <RARE_TOKEN> , StatusCallback callback ) { </a> 
<a> return <RARE_TOKEN> ( context , <RARE_TOKEN> , new OpenRequest ( fragment ) . setCallback ( callback ) ) ; </a> 
<a> } </a> 
<a> public static Session <RARE_TOKEN> ( Context context , AccessToken accessToken , </a> 
<a> StatusCallback callback ) { </a> 
<a> Session session = new Session ( context , null , null , false ) ; </a> 
<a> <RARE_TOKEN> ( session ) ; </a> 
<a> session . open ( accessToken , callback ) ; </a> 
<a> return session ; </a> 
<a> } </a> 
<a> private static Session <RARE_TOKEN> ( Context context , boolean <RARE_TOKEN> , OpenRequest openRequest ) { </a> 
<a> Session session = new Builder ( context ) . build ( ) ; </a> 
<a> if ( SessionState . <RARE_TOKEN> . equals ( session . <RARE_TOKEN> ( ) ) || <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( session ) ; </a> 
<a> session . <RARE_TOKEN> ( openRequest ) ; </a> 
<a> return session ; </a> 
<a> } </a> 
<a> return null ; </a> 
<a> } </a> 
<a> static Context <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> static void <RARE_TOKEN> ( Context <RARE_TOKEN> ) { </a> 
<a> if ( ( <RARE_TOKEN> != null ) && ( <RARE_TOKEN> == null ) ) { </a> 
<a> Context <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> = ( <RARE_TOKEN> != null ) ? <RARE_TOKEN> : <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<a> void <RARE_TOKEN> ( AuthorizationRequest request ) { </a> 
<a> boolean <RARE_TOKEN> = false ; </a> 
<a> request . <RARE_TOKEN> ( applicationId ) ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ( request ) ; </a> 
<a> if ( ! <RARE_TOKEN> && request . <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ( request ) ; </a> 
<a> } </a> 
<a> if ( ! <RARE_TOKEN> ) { </a> 
<a> synchronized ( this . lock ) { </a> 
<a> final SessionState <RARE_TOKEN> = this . state ; </a> 
<a> switch ( this . state ) { </a> 
<a> case <RARE_TOKEN> : </a> 
<a> case <RARE_TOKEN> : </a> 
<a> return ; </a> 
<a> default : </a> 
<a> this . state = SessionState . <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> , this . state , new FacebookException ( <RARE_TOKEN> in <RARE_TOKEN> <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> private void open ( OpenRequest openRequest , <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( openRequest , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( openRequest ) ; </a> 
<a> SessionState <RARE_TOKEN> ; </a> 
<a> synchronized ( this . lock ) { </a> 
<a> if ( pendingRequest != null ) { </a> 
<a> <RARE_TOKEN> ( state , state , new UnsupportedOperationException ( </a> 
<a> <RARE_TOKEN> an <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> to open a session that has a <RARE_TOKEN> <RARE_TOKEN> ) ) ; </a> 
<a> return ; </a> 
<a> } </a> 
<a> final SessionState <RARE_TOKEN> = this . state ; </a> 
<a> switch ( this . state ) { </a> 
<a> case <RARE_TOKEN> : </a> 
<a> this . state = <RARE_TOKEN> = SessionState . <RARE_TOKEN> ; </a> 
<a> if ( openRequest == null ) { </a> 
<a> throw new IllegalArgumentException ( <RARE_TOKEN> <RARE_TOKEN> be null <RARE_TOKEN> <RARE_TOKEN> a new <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> pendingRequest = openRequest ; </a> 
<a> break ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> if ( openRequest != null && ! Utility . <RARE_TOKEN> ( openRequest . getPermissions ( ) ) ) { </a> 
<a> if ( ! Utility . <RARE_TOKEN> ( openRequest . getPermissions ( ) , getPermissions ( ) ) ) { </a> 
<a> pendingRequest = openRequest ; </a> 
<a> } </a> 
<a> } </a> 
<a> if ( pendingRequest == null ) { </a> 
<a> this . state = <RARE_TOKEN> = SessionState . <RARE_TOKEN> ; </a> 
<a> } else { </a> 
<a> this . state = <RARE_TOKEN> = SessionState . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> break ; </a> 
<a> default : </a> 
<a> throw new UnsupportedOperationException ( </a> 
<a> <RARE_TOKEN> an <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> to open an <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( openRequest != null ) { </a> 
<a> <RARE_TOKEN> ( openRequest . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> this . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> , null ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> == SessionState . <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( openRequest ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> , <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> synchronized ( this . lock ) { </a> 
<a> if ( pendingRequest != null ) { </a> 
<a> throw new UnsupportedOperationException ( </a> 
<a> <RARE_TOKEN> an <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> to request new permissions for a session that has a <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> switch ( this . state ) { </a> 
<a> case <RARE_TOKEN> : </a> 
<a> case <RARE_TOKEN> : </a> 
<a> pendingRequest = <RARE_TOKEN> ; </a> 
<a> break ; </a> 
<a> default : </a> 
<a> throw new UnsupportedOperationException ( </a> 
<a> <RARE_TOKEN> an <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> to request new permissions for a session that is not <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ( ) ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( AuthorizationRequest request ) { </a> 
<a> if ( request != null && ! request . <RARE_TOKEN> ) { </a> 
<a> Intent intent = new Intent ( ) ; </a> 
<a> intent . <RARE_TOKEN> ( <RARE_TOKEN> ( ) , <RARE_TOKEN> . class ) ; </a> 
<a> if ( ! <RARE_TOKEN> ( intent ) ) { </a> 
<a> throw new FacebookException ( String . format ( </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> SessionLoginBehavior <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> is not <RARE_TOKEN> <RARE_TOKEN> an activity in <RARE_TOKEN> , </a> 
<a> request . <RARE_TOKEN> ( ) , <RARE_TOKEN> . class . getName ( ) ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( AuthorizationRequest request , <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> if ( request == null || Utility . <RARE_TOKEN> ( request . getPermissions ( ) ) ) { </a> 
<a> if ( <RARE_TOKEN> . <RARE_TOKEN> . equals ( <RARE_TOKEN> ) ) { </a> 
<a> throw new FacebookException ( <RARE_TOKEN> request <RARE_TOKEN> or <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> return ; </a> 
<a> } </a> 
<a> for ( String <RARE_TOKEN> : request . getPermissions ( ) ) { </a> 
<a> if ( <RARE_TOKEN> ( <RARE_TOKEN> ) ) { </a> 
<a> if ( <RARE_TOKEN> . <RARE_TOKEN> . equals ( <RARE_TOKEN> ) ) { </a> 
<a> throw new FacebookException ( </a> 
<a> String . format ( </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> a <RARE_TOKEN> or <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> to a request for read <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> } else { </a> 
<a> if ( <RARE_TOKEN> . <RARE_TOKEN> . equals ( <RARE_TOKEN> ) ) { </a> 
<a> Log . w ( TAG , </a> 
<a> String . format ( </a> 
<a> <RARE_TOKEN> not <RARE_TOKEN> a read <RARE_TOKEN> <RARE_TOKEN> to a request for <RARE_TOKEN> or <RARE_TOKEN> <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> static boolean <RARE_TOKEN> ( String <RARE_TOKEN> ) { </a> 
<a> return <RARE_TOKEN> != null && </a> 
<a> ( <RARE_TOKEN> . startsWith ( <RARE_TOKEN> ) || </a> 
<a> <RARE_TOKEN> . startsWith ( <RARE_TOKEN> ) || </a> 
<a> <RARE_TOKEN> . contains ( <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( int resultCode , AuthorizationClient . Result result ) { </a> 
<a> AccessToken <RARE_TOKEN> = null ; </a> 
<a> Exception exception = null ; </a> 
<a> if ( resultCode == Activity . <RARE_TOKEN> ) { </a> 
<a> if ( result . code == AuthorizationClient . Result . <RARE_TOKEN> . <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> = result . token ; </a> 
<a> } else { </a> 
<a> exception = new <RARE_TOKEN> ( result . errorMessage ) ; </a> 
<a> } </a> 
<a> } else if ( resultCode == Activity . <RARE_TOKEN> ) { </a> 
<a> exception = new <RARE_TOKEN> ( result . errorMessage ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> = null ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> , exception ) ; </a> 
<a> } </a> 
<a> private boolean <RARE_TOKEN> ( AuthorizationRequest request ) { </a> 
<a> Intent intent = <RARE_TOKEN> ( request ) ; </a> 
<a> if ( ! <RARE_TOKEN> ( intent ) ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> try { </a> 
<a> request . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( intent , request . <RARE_TOKEN> ( ) ) ; </a> 
<a> } catch ( <RARE_TOKEN> e ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> return true ; </a> 
<a> } </a> 
<a> private boolean <RARE_TOKEN> ( Intent intent ) { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = <RARE_TOKEN> ( ) . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( intent , 0 ) ; </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> return true ; </a> 
<a> } </a> 
<a> private Intent <RARE_TOKEN> ( AuthorizationRequest request ) { </a> 
<a> Intent intent = new Intent ( ) ; </a> 
<a> intent . <RARE_TOKEN> ( <RARE_TOKEN> ( ) , <RARE_TOKEN> . class ) ; </a> 
<a> intent . <RARE_TOKEN> ( request . <RARE_TOKEN> ( ) . toString ( ) ) ; </a> 
<a> AuthorizationClient . AuthorizationRequest <RARE_TOKEN> = request . <RARE_TOKEN> ( ) ; </a> 
<a> Bundle extras = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> intent . <RARE_TOKEN> ( extras ) ; </a> 
<a> return intent ; </a> 
<a> } </a> 
<a> private boolean <RARE_TOKEN> ( final AuthorizationRequest request ) { </a> 
<a> <RARE_TOKEN> = new AuthorizationClient ( ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( new AuthorizationClient . <RARE_TOKEN> ( ) { </a> 
<a> @ Override </a> 
<a> public void onCompleted ( AuthorizationClient . Result result ) { </a> 
<a> <RARE_TOKEN> ( Activity . <RARE_TOKEN> , result ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ( ) ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( request . <RARE_TOKEN> ( ) ) ; </a> 
<a> return true ; </a> 
<a> } </a> 
<a> @ SuppressWarnings ( <RARE_TOKEN> ) </a> 
<a> void <RARE_TOKEN> ( AccessToken <RARE_TOKEN> , Exception exception ) { </a> 
<a> if ( ( <RARE_TOKEN> != null ) && <RARE_TOKEN> . <RARE_TOKEN> ( ) ) { </a> 
<a> <RARE_TOKEN> = null ; </a> 
<a> exception = new FacebookException ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> synchronized ( this . lock ) { </a> 
<a> switch ( this . state ) { </a> 
<a> case <RARE_TOKEN> : </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> , exception ) ; </a> 
<a> break ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> case <RARE_TOKEN> : </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> , exception ) ; </a> 
<a> break ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( AccessToken <RARE_TOKEN> , Exception exception ) { </a> 
<a> final SessionState <RARE_TOKEN> = state ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> state = SessionState . <RARE_TOKEN> ; </a> 
<a> } else if ( exception != null ) { </a> 
<a> state = SessionState . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> pendingRequest = null ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> , state , exception ) ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( final AccessToken <RARE_TOKEN> , Exception exception ) { </a> 
<a> final SessionState <RARE_TOKEN> = state ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> state = SessionState . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> pendingRequest = null ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> , state , exception ) ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( AccessToken <RARE_TOKEN> ) { </a> 
<a> if ( <RARE_TOKEN> != null && <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> void <RARE_TOKEN> ( final SessionState <RARE_TOKEN> , final SessionState <RARE_TOKEN> , final Exception exception ) { </a> 
<a> if ( <RARE_TOKEN> == <RARE_TOKEN> && exception == null ) { </a> 
<a> return ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> . <RARE_TOKEN> ( ) ) { </a> 
<a> this . <RARE_TOKEN> = AccessToken . <RARE_TOKEN> ( Collections . < String > <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> synchronized ( <RARE_TOKEN> ) { </a> 
<a> Runnable <RARE_TOKEN> = new Runnable ( ) { </a> 
<a> public void run ( ) { </a> 
<a> for ( final StatusCallback callback : <RARE_TOKEN> ) { </a> 
<a> Runnable <RARE_TOKEN> = new Runnable ( ) { </a> 
<a> public void run ( ) { </a> 
<a> callback . <RARE_TOKEN> ( Session . this , <RARE_TOKEN> , exception ) ; </a> 
<a> } </a> 
<a> } ; </a> 
<a> <RARE_TOKEN> ( handler , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } ; </a> 
<a> <RARE_TOKEN> ( handler , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( this == Session . <RARE_TOKEN> ) { </a> 
<a> if ( <RARE_TOKEN> . isOpened ( ) != <RARE_TOKEN> . isOpened ( ) ) { </a> 
<a> if ( <RARE_TOKEN> . isOpened ( ) ) { </a> 
<a> <RARE_TOKEN> ( Session . <RARE_TOKEN> ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> ( Session . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> static void <RARE_TOKEN> ( String action ) { </a> 
<a> final Intent intent = new Intent ( action ) ; </a> 
<a> <RARE_TOKEN> . getInstance ( <RARE_TOKEN> ( ) ) . <RARE_TOKEN> ( intent ) ; </a> 
<a> } </a> 
<a> private static void <RARE_TOKEN> ( Handler handler , Runnable <RARE_TOKEN> ) { </a> 
<a> if ( handler != null ) { </a> 
<a> handler . post ( <RARE_TOKEN> ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) . execute ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> void <RARE_TOKEN> ( ) { </a> 
<a> if ( <RARE_TOKEN> ( ) ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = null ; </a> 
<a> synchronized ( this . lock ) { </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> <RARE_TOKEN> = new <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> . bind ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> boolean <RARE_TOKEN> ( ) { </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> boolean result = false ; </a> 
<a> Date <RARE_TOKEN> = new Date ( ) ; </a> 
<a> if ( state . isOpened ( ) && <RARE_TOKEN> . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( ) </a> 
<a> && <RARE_TOKEN> . getTime ( ) - <RARE_TOKEN> . getTime ( ) > <RARE_TOKEN> * 1000 </a> 
<a> && <RARE_TOKEN> . getTime ( ) - <RARE_TOKEN> . <RARE_TOKEN> ( ) . getTime ( ) > <RARE_TOKEN> * 1000 ) { </a> 
<a> result = true ; </a> 
<a> } </a> 
<a> return result ; </a> 
<a> } </a> 
<a> AccessToken <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> void <RARE_TOKEN> ( AccessToken <RARE_TOKEN> ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> Date <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> void <RARE_TOKEN> ( Date <RARE_TOKEN> ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> void <RARE_TOKEN> ( <RARE_TOKEN> request ) { </a> 
<a> this . <RARE_TOKEN> = request ; </a> 
<a> } </a> 
<a> class <RARE_TOKEN> implements <RARE_TOKEN> { </a> 
<a> final <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( </a> 
<a> new <RARE_TOKEN> ( Session . this , this ) ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = null ; </a> 
<a> public void bind ( ) { </a> 
<a> Intent intent = NativeProtocol . <RARE_TOKEN> ( <RARE_TOKEN> ( ) ) ; </a> 
<a> if ( intent != null </a> 
<a> && <RARE_TOKEN> . <RARE_TOKEN> ( intent , new <RARE_TOKEN> ( ) , Context . <RARE_TOKEN> ) ) { </a> 
<a> <RARE_TOKEN> ( new Date ( ) ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> , <RARE_TOKEN> service ) { </a> 
<a> <RARE_TOKEN> = new <RARE_TOKEN> ( service ) ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> . this ) ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( ) { </a> 
<a> if ( <RARE_TOKEN> == this ) { </a> 
<a> <RARE_TOKEN> = null ; </a> 
<a> } </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( ) { </a> 
<a> Bundle <RARE_TOKEN> = new Bundle ( ) ; </a> 
<a> <RARE_TOKEN> . putString ( AccessToken . <RARE_TOKEN> , <RARE_TOKEN> ( ) . getToken ( ) ) ; </a> 
<a> <RARE_TOKEN> request = <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> request . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> request . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> try { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( request ) ; </a> 
<a> } catch ( <RARE_TOKEN> e ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> static class <RARE_TOKEN> extends Handler { </a> 
<a> private <RARE_TOKEN> < Session > <RARE_TOKEN> ; </a> 
<a> private <RARE_TOKEN> < <RARE_TOKEN> > <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> ( Session session , <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> super ( <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> <RARE_TOKEN> = new <RARE_TOKEN> < Session > ( session ) ; </a> 
<a> <RARE_TOKEN> = new <RARE_TOKEN> < <RARE_TOKEN> > ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( <RARE_TOKEN> msg ) { </a> 
<a> String token = msg . getData ( ) . getString ( AccessToken . <RARE_TOKEN> ) ; </a> 
<a> Session session = <RARE_TOKEN> . get ( ) ; </a> 
<a> if ( session != null && token != null ) { </a> 
<a> session . <RARE_TOKEN> ( msg . getData ( ) ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> request = <RARE_TOKEN> . get ( ) ; </a> 
<a> if ( request != null ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( request ) ; </a> 
<a> request . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> public interface StatusCallback { </a> 
<a> public void <RARE_TOKEN> ( Session session , SessionState state , Exception exception ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int hashCode ( ) { </a> 
<a> return 0 ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean equals ( Object <RARE_TOKEN> ) { </a> 
<a> if ( ! ( <RARE_TOKEN> instanceof Session ) ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> Session other = ( Session ) <RARE_TOKEN> ; </a> 
<a> return <RARE_TOKEN> ( other . applicationId , applicationId ) && </a> 
<a> <RARE_TOKEN> ( other . <RARE_TOKEN> , <RARE_TOKEN> ) && </a> 
<a> <RARE_TOKEN> ( other . state , state ) && </a> 
<a> <RARE_TOKEN> ( other . <RARE_TOKEN> ( ) , <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> private static boolean <RARE_TOKEN> ( Object a , Object b ) { </a> 
<a> if ( a == null ) { </a> 
<a> return b == null ; </a> 
<a> } else { </a> 
<a> return a . equals ( b ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public static final class Builder { </a> 
<a> private final Context context ; </a> 
<a> private String applicationId ; </a> 
<a> private TokenCachingStrategy <RARE_TOKEN> ; </a> 
<a> public Builder ( Context context ) { </a> 
<a> this . context = context ; </a> 
<a> } </a> 
<a> public Builder <RARE_TOKEN> ( final String applicationId ) { </a> 
<a> this . applicationId = applicationId ; </a> 
<a> return this ; </a> 
<a> } </a> 
<a> public Builder <RARE_TOKEN> ( final TokenCachingStrategy <RARE_TOKEN> ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> return this ; </a> 
<a> } </a> 
<a> public Session build ( ) { </a> 
<a> return new Session ( context , applicationId , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> interface <RARE_TOKEN> { </a> 
<a> public void <RARE_TOKEN> ( Intent intent , int requestCode ) ; </a> 
<a> public Activity <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = null ; </a> 
<a> synchronized ( this ) { </a> 
<a> if ( <RARE_TOKEN> == null && <RARE_TOKEN> . <RARE_TOKEN> ( ) ) { </a> 
<a> String applicationId = Session . this . applicationId ; </a> 
<a> if ( applicationId != null ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> = new <RARE_TOKEN> ( applicationId , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> . execute ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private class <RARE_TOKEN> extends <RARE_TOKEN> < Void , Void , Void > { </a> 
<a> private final String <RARE_TOKEN> ; </a> 
<a> private final Context <RARE_TOKEN> ; </a> 
<a> public <RARE_TOKEN> ( String applicationId , Context context ) { </a> 
<a> <RARE_TOKEN> = applicationId ; </a> 
<a> <RARE_TOKEN> = context . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected Void <RARE_TOKEN> ( Void ... <RARE_TOKEN> ) { </a> 
<a> try { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } catch ( Exception e ) { </a> 
<a> Utility . <RARE_TOKEN> ( <RARE_TOKEN> , e . getMessage ( ) ) ; </a> 
<a> } </a> 
<a> return null ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( Void result ) { </a> 
<a> synchronized ( Session . this ) { </a> 
<a> <RARE_TOKEN> = null ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> public static class AuthorizationRequest implements Serializable { </a> 
<a> private static final long serialVersionUID = <RARE_TOKEN> ; </a> 
<a> private final <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> private SessionLoginBehavior loginBehavior = SessionLoginBehavior . <RARE_TOKEN> ; </a> 
<a> private int requestCode = <RARE_TOKEN> ; </a> 
<a> private StatusCallback <RARE_TOKEN> ; </a> 
<a> private boolean <RARE_TOKEN> = false ; </a> 
<a> private List < String > permissions = Collections . <RARE_TOKEN> ( ) ; </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> private String applicationId ; </a> 
<a> private String <RARE_TOKEN> ; </a> 
<a> AuthorizationRequest ( final Activity activity ) { </a> 
<a> <RARE_TOKEN> = new <RARE_TOKEN> ( ) { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( Intent intent , int requestCode ) { </a> 
<a> activity . <RARE_TOKEN> ( intent , requestCode ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public Activity <RARE_TOKEN> ( ) { </a> 
<a> return activity ; </a> 
<a> } </a> 
<a> } ; </a> 
<a> } </a> 
<a> AuthorizationRequest ( final <RARE_TOKEN> fragment ) { </a> 
<a> <RARE_TOKEN> = new <RARE_TOKEN> ( ) { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( Intent intent , int requestCode ) { </a> 
<a> fragment . <RARE_TOKEN> ( intent , requestCode ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public Activity <RARE_TOKEN> ( ) { </a> 
<a> return fragment . getActivity ( ) ; </a> 
<a> } </a> 
<a> } ; </a> 
<a> } </a> 
<a> private AuthorizationRequest ( SessionLoginBehavior loginBehavior , int requestCode , </a> 
<a> List < String > permissions , String <RARE_TOKEN> , boolean <RARE_TOKEN> , String applicationId , </a> 
<a> String <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> = new <RARE_TOKEN> ( ) { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( Intent intent , int requestCode ) { </a> 
<a> throw new UnsupportedOperationException ( </a> 
<a> <RARE_TOKEN> create an AuthorizationRequest <RARE_TOKEN> a <RARE_TOKEN> Activity or <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public Activity <RARE_TOKEN> ( ) { </a> 
<a> throw new UnsupportedOperationException ( </a> 
<a> <RARE_TOKEN> create an AuthorizationRequest <RARE_TOKEN> a <RARE_TOKEN> Activity or <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } ; </a> 
<a> this . loginBehavior = loginBehavior ; </a> 
<a> this . requestCode = requestCode ; </a> 
<a> this . permissions = permissions ; </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> . valueOf ( <RARE_TOKEN> ) ; </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> this . applicationId = applicationId ; </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( boolean <RARE_TOKEN> ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> boolean <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> AuthorizationRequest setCallback ( StatusCallback <RARE_TOKEN> ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> return this ; </a> 
<a> } </a> 
<a> StatusCallback <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> AuthorizationRequest <RARE_TOKEN> ( SessionLoginBehavior loginBehavior ) { </a> 
<a> if ( loginBehavior != null ) { </a> 
<a> this . loginBehavior = loginBehavior ; </a> 
<a> } </a> 
<a> return this ; </a> 
<a> } </a> 
<a> SessionLoginBehavior <RARE_TOKEN> ( ) { </a> 
<a> return loginBehavior ; </a> 
<a> } </a> 
<a> AuthorizationRequest <RARE_TOKEN> ( int requestCode ) { </a> 
<a> if ( requestCode >= 0 ) { </a> 
<a> this . requestCode = requestCode ; </a> 
<a> } </a> 
<a> return this ; </a> 
<a> } </a> 
<a> int <RARE_TOKEN> ( ) { </a> 
<a> return requestCode ; </a> 
<a> } </a> 
<a> AuthorizationRequest <RARE_TOKEN> ( List < String > permissions ) { </a> 
<a> if ( permissions != null ) { </a> 
<a> this . permissions = permissions ; </a> 
<a> } </a> 
<a> return this ; </a> 
<a> } </a> 
<a> List < String > getPermissions ( ) { </a> 
<a> return permissions ; </a> 
<a> } </a> 
<a> AuthorizationRequest <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> return this ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> String <RARE_TOKEN> ( ) { </a> 
<a> return applicationId ; </a> 
<a> } </a> 
<a> void <RARE_TOKEN> ( String applicationId ) { </a> 
<a> this . applicationId = applicationId ; </a> 
<a> } </a> 
<a> String <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> void <RARE_TOKEN> ( String <RARE_TOKEN> ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> AuthorizationClient . AuthorizationRequest <RARE_TOKEN> ( ) { </a> 
<a> AuthorizationClient . <RARE_TOKEN> <RARE_TOKEN> = new AuthorizationClient . <RARE_TOKEN> ( ) { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( Intent intent , int requestCode ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( intent , requestCode ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public Activity <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } ; </a> 
<a> return new AuthorizationClient . AuthorizationRequest ( loginBehavior , requestCode , <RARE_TOKEN> , </a> 
<a> permissions , <RARE_TOKEN> , applicationId , <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> Object <RARE_TOKEN> ( ) { </a> 
<a> return new <RARE_TOKEN> ( </a> 
<a> loginBehavior , requestCode , permissions , <RARE_TOKEN> . name ( ) , <RARE_TOKEN> , applicationId , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> void <RARE_TOKEN> ( <RARE_TOKEN> stream ) throws <RARE_TOKEN> { </a> 
<a> throw new <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> private static class <RARE_TOKEN> implements Serializable { </a> 
<a> private static final long serialVersionUID = - <RARE_TOKEN> ; </a> 
<a> private final SessionLoginBehavior loginBehavior ; </a> 
<a> private final int requestCode ; </a> 
<a> private boolean <RARE_TOKEN> ; </a> 
<a> private final List < String > permissions ; </a> 
<a> private final String <RARE_TOKEN> ; </a> 
<a> private final String applicationId ; </a> 
<a> private final String <RARE_TOKEN> ; </a> 
<a> private <RARE_TOKEN> ( SessionLoginBehavior loginBehavior , </a> 
<a> int requestCode , List < String > permissions , String <RARE_TOKEN> , boolean <RARE_TOKEN> , </a> 
<a> String applicationId , String <RARE_TOKEN> ) { </a> 
<a> this . loginBehavior = loginBehavior ; </a> 
<a> this . requestCode = requestCode ; </a> 
<a> this . permissions = permissions ; </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> this . applicationId = applicationId ; </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> private Object <RARE_TOKEN> ( ) { </a> 
<a> return new AuthorizationRequest ( loginBehavior , requestCode , permissions , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> applicationId , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> public static final class OpenRequest extends AuthorizationRequest { </a> 
<a> private static final long serialVersionUID = <RARE_TOKEN> ; </a> 
<a> public OpenRequest ( Activity activity ) { </a> 
<a> super ( activity ) ; </a> 
<a> } </a> 
<a> public OpenRequest ( <RARE_TOKEN> fragment ) { </a> 
<a> super ( fragment ) ; </a> 
<a> } </a> 
<a> public final OpenRequest setCallback ( StatusCallback <RARE_TOKEN> ) { </a> 
<a> super . setCallback ( <RARE_TOKEN> ) ; </a> 
<a> return this ; </a> 
<a> } </a> 
<a> public final OpenRequest <RARE_TOKEN> ( SessionLoginBehavior loginBehavior ) { </a> 
<a> super . <RARE_TOKEN> ( loginBehavior ) ; </a> 
<a> return this ; </a> 
<a> } </a> 
<a> public final OpenRequest <RARE_TOKEN> ( int requestCode ) { </a> 
<a> super . <RARE_TOKEN> ( requestCode ) ; </a> 
<a> return this ; </a> 
<a> } </a> 
<a> public final OpenRequest <RARE_TOKEN> ( List < String > permissions ) { </a> 
<a> super . <RARE_TOKEN> ( permissions ) ; </a> 
<a> return this ; </a> 
<a> } </a> 
<a> public final OpenRequest <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> super . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> return this ; </a> 
<a> } </a> 
<a> } </a> 
<a> public static final class <RARE_TOKEN> extends AuthorizationRequest { </a> 
<a> private static final long serialVersionUID = <RARE_TOKEN> ; </a> 
<a> public <RARE_TOKEN> ( Activity activity , List < String > permissions ) { </a> 
<a> super ( activity ) ; </a> 
<a> <RARE_TOKEN> ( permissions ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( <RARE_TOKEN> fragment , List < String > permissions ) { </a> 
<a> super ( fragment ) ; </a> 
<a> <RARE_TOKEN> ( permissions ) ; </a> 
<a> } </a> 
<a> public final <RARE_TOKEN> setCallback ( StatusCallback <RARE_TOKEN> ) { </a> 
<a> super . setCallback ( <RARE_TOKEN> ) ; </a> 
<a> return this ; </a> 
<a> } </a> 
<a> public final <RARE_TOKEN> <RARE_TOKEN> ( SessionLoginBehavior loginBehavior ) { </a> 
<a> super . <RARE_TOKEN> ( loginBehavior ) ; </a> 
<a> return this ; </a> 
<a> } </a> 
<a> public final <RARE_TOKEN> <RARE_TOKEN> ( int requestCode ) { </a> 
<a> super . <RARE_TOKEN> ( requestCode ) ; </a> 
<a> return this ; </a> 
<a> } </a> 
<a> public final <RARE_TOKEN> <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> super . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> return this ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package com . facebook ; </a> 
<a> public enum SessionLoginBehavior { </a> 
<a> <RARE_TOKEN> ( true , true ) , </a> 
<a> <RARE_TOKEN> ( true , false ) , </a> 
<a> <RARE_TOKEN> ( false , true ) ; </a> 
<a> private final boolean <RARE_TOKEN> ; </a> 
<a> private final boolean <RARE_TOKEN> ; </a> 
<a> private SessionLoginBehavior ( boolean <RARE_TOKEN> , boolean <RARE_TOKEN> ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> boolean <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> boolean <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package com . facebook ; </a> 
<a> public enum SessionState { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ) , </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ) , </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ) , </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ) , </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ) , </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ) , </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> private final <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> SessionState ( <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public boolean isOpened ( ) { </a> 
<a> return this . <RARE_TOKEN> == <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return this . <RARE_TOKEN> == <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> private enum <RARE_TOKEN> { </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package com . facebook ; </a> 
<a> import android . content . <RARE_TOKEN> ; </a> 
<a> import android . content . Context ; </a> 
<a> import android . content . <RARE_TOKEN> ; </a> 
<a> import android . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import android . net . <RARE_TOKEN> ; </a> 
<a> import android . os . <RARE_TOKEN> ; </a> 
<a> import android . os . Bundle ; </a> 
<a> import com . facebook . android . <RARE_TOKEN> ; </a> 
<a> import com . facebook . internal . Utility ; </a> 
<a> import com . facebook . model . GraphObject ; </a> 
<a> import com . facebook . internal . Validate ; </a> 
<a> import org . json . JSONException ; </a> 
<a> import java . lang . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import java . util . Collections ; </a> 
<a> import java . util . HashSet ; </a> 
<a> import java . util . Set ; </a> 
<a> import java . util . concurrent . * ; </a> 
<a> import java . util . concurrent . atomic . AtomicInteger ; </a> 
<a> public final class <RARE_TOKEN> { </a> 
<a> private static final HashSet < LoggingBehavior > <RARE_TOKEN> = new HashSet < LoggingBehavior > ( ) ; </a> 
<a> private static volatile <RARE_TOKEN> executor ; </a> 
<a> private static volatile boolean <RARE_TOKEN> ; </a> 
<a> private static final int <RARE_TOKEN> = 5 ; </a> 
<a> private static final int <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final int <RARE_TOKEN> = 1 ; </a> 
<a> private static final Object <RARE_TOKEN> = new Object ( ) ; </a> 
<a> private static final <RARE_TOKEN> <RARE_TOKEN> = </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final <RARE_TOKEN> < Runnable > <RARE_TOKEN> = new <RARE_TOKEN> < Runnable > ( 10 ) ; </a> 
<a> private static final ThreadFactory <RARE_TOKEN> = new ThreadFactory ( ) { </a> 
<a> private final AtomicInteger <RARE_TOKEN> = new AtomicInteger ( 0 ) ; </a> 
<a> public Thread <RARE_TOKEN> ( Runnable <RARE_TOKEN> ) { </a> 
<a> return new Thread ( <RARE_TOKEN> , <RARE_TOKEN> <RARE_TOKEN> + <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> } ; </a> 
<a> public static final Set < LoggingBehavior > <RARE_TOKEN> ( ) { </a> 
<a> synchronized ( <RARE_TOKEN> ) { </a> 
<a> return Collections . <RARE_TOKEN> ( new HashSet < LoggingBehavior > ( <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public static final void <RARE_TOKEN> ( LoggingBehavior <RARE_TOKEN> ) { </a> 
<a> synchronized ( <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> . add ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public static final void <RARE_TOKEN> ( LoggingBehavior <RARE_TOKEN> ) { </a> 
<a> synchronized ( <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> . remove ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public static final void <RARE_TOKEN> ( ) { </a> 
<a> synchronized ( <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> . clear ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public static final boolean <RARE_TOKEN> ( LoggingBehavior <RARE_TOKEN> ) { </a> 
<a> synchronized ( <RARE_TOKEN> ) { </a> 
<a> return <RARE_TOKEN> . <RARE_TOKEN> && <RARE_TOKEN> . contains ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public static <RARE_TOKEN> <RARE_TOKEN> ( ) { </a> 
<a> synchronized ( <RARE_TOKEN> ) { </a> 
<a> if ( <RARE_TOKEN> . executor == null ) { </a> 
<a> <RARE_TOKEN> executor = <RARE_TOKEN> ( ) ; </a> 
<a> if ( executor == null ) { </a> 
<a> executor = new <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , TimeUnit . SECONDS , <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> . executor = executor ; </a> 
<a> } </a> 
<a> } </a> 
<a> return <RARE_TOKEN> . executor ; </a> 
<a> } </a> 
<a> public static void <RARE_TOKEN> ( <RARE_TOKEN> executor ) { </a> 
<a> Validate . <RARE_TOKEN> ( executor , <RARE_TOKEN> ) ; </a> 
<a> synchronized ( <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> . executor = executor ; </a> 
<a> } </a> 
<a> } </a> 
<a> private static <RARE_TOKEN> <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = null ; </a> 
<a> try { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . class . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } catch ( <RARE_TOKEN> e ) { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> Object <RARE_TOKEN> = null ; </a> 
<a> try { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . get ( null ) ; </a> 
<a> } catch ( <RARE_TOKEN> e ) { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> if ( ! ( <RARE_TOKEN> instanceof <RARE_TOKEN> ) ) { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> return ( <RARE_TOKEN> ) <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public static void <RARE_TOKEN> ( final Context context , final String applicationId ) { </a> 
<a> final Context <RARE_TOKEN> = context . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) . execute ( new Runnable ( ) { </a> 
<a> @ Override </a> 
<a> public void run ( ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> , applicationId ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> } </a> 
<a> public static void <RARE_TOKEN> ( boolean <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public static boolean <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public static boolean <RARE_TOKEN> ( final Context context , final String applicationId ) { </a> 
<a> try { </a> 
<a> if ( applicationId == null ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> String <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( context . <RARE_TOKEN> ( ) ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = context . <RARE_TOKEN> ( <RARE_TOKEN> , Context . <RARE_TOKEN> ) ; </a> 
<a> String <RARE_TOKEN> = applicationId + <RARE_TOKEN> ; </a> 
<a> long <RARE_TOKEN> = <RARE_TOKEN> . getLong ( <RARE_TOKEN> , 0 ) ; </a> 
<a> if ( <RARE_TOKEN> == 0 && <RARE_TOKEN> != null ) { </a> 
<a> Bundle <RARE_TOKEN> = new Bundle ( ) ; </a> 
<a> <RARE_TOKEN> . putString ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> Request <RARE_TOKEN> = Request . <RARE_TOKEN> ( null , applicationId , null ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> GraphObject <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> Object <RARE_TOKEN> = <RARE_TOKEN> . getProperty ( <RARE_TOKEN> ) ; </a> 
<a> if ( ! ( <RARE_TOKEN> instanceof Boolean ) ) { </a> 
<a> throw new JSONException ( String . format ( </a> 
<a> <RARE_TOKEN> contains <RARE_TOKEN> <RARE_TOKEN> of a <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> if ( ( Boolean ) <RARE_TOKEN> ) { </a> 
<a> GraphObject <RARE_TOKEN> = GraphObject . Factory . create ( ) ; </a> 
<a> <RARE_TOKEN> . setProperty ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . setProperty ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> String <RARE_TOKEN> = String . format ( <RARE_TOKEN> , applicationId ) ; </a> 
<a> Request <RARE_TOKEN> = Request . <RARE_TOKEN> ( null , <RARE_TOKEN> , <RARE_TOKEN> , null ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> = System . currentTimeMillis ( ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> return <RARE_TOKEN> != 0 ; </a> 
<a> } catch ( Exception e ) { </a> 
<a> Utility . <RARE_TOKEN> ( <RARE_TOKEN> , e . getMessage ( ) ) ; </a> 
<a> } </a> 
<a> return false ; </a> 
<a> } </a> 
<a> public static String <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> String [ ] <RARE_TOKEN> = { <RARE_TOKEN> } ; </a> 
<a> <RARE_TOKEN> c = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> , null , null , null ) ; </a> 
<a> if ( c == null || ! c . <RARE_TOKEN> ( ) ) { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> String <RARE_TOKEN> = c . getString ( c . <RARE_TOKEN> ( <RARE_TOKEN> ) ) ; </a> 
<a> c . close ( ) ; </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package com . facebook ; </a> 
<a> import android . content . Context ; </a> 
<a> import android . content . <RARE_TOKEN> ; </a> 
<a> import android . os . Bundle ; </a> 
<a> import android . util . Log ; </a> 
<a> import com . facebook . internal . Logger ; </a> 
<a> import com . facebook . internal . Utility ; </a> 
<a> import com . facebook . internal . Validate ; </a> 
<a> import org . json . JSONArray ; </a> 
<a> import org . json . JSONException ; </a> 
<a> import org . json . JSONObject ; </a> 
<a> import java . util . ArrayList ; </a> 
<a> import java . util . List ; </a> 
<a> import java . util . Map ; </a> 
<a> public class <RARE_TOKEN> extends TokenCachingStrategy { </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String TAG = <RARE_TOKEN> . class . getSimpleName ( ) ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private String <RARE_TOKEN> ; </a> 
<a> private <RARE_TOKEN> cache ; </a> 
<a> public <RARE_TOKEN> ( Context context ) { </a> 
<a> this ( context , null ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( Context context , String <RARE_TOKEN> ) { </a> 
<a> Validate . <RARE_TOKEN> ( context , <RARE_TOKEN> ) ; </a> 
<a> this . <RARE_TOKEN> = Utility . <RARE_TOKEN> ( <RARE_TOKEN> ) ? <RARE_TOKEN> : <RARE_TOKEN> ; </a> 
<a> Context <RARE_TOKEN> = context . <RARE_TOKEN> ( ) ; </a> 
<a> context = <RARE_TOKEN> != null ? <RARE_TOKEN> : context ; </a> 
<a> this . cache = context . <RARE_TOKEN> ( </a> 
<a> this . <RARE_TOKEN> , </a> 
<a> Context . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public Bundle <RARE_TOKEN> ( ) { </a> 
<a> Bundle <RARE_TOKEN> = new Bundle ( ) ; </a> 
<a> Map < String , ? > <RARE_TOKEN> = cache . <RARE_TOKEN> ( ) ; </a> 
<a> for ( String key : <RARE_TOKEN> . <RARE_TOKEN> ( ) ) { </a> 
<a> try { </a> 
<a> <RARE_TOKEN> ( key , <RARE_TOKEN> ) ; </a> 
<a> } catch ( JSONException e ) { </a> 
<a> Logger . log ( LoggingBehavior . <RARE_TOKEN> , Log . <RARE_TOKEN> , TAG , </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> value for <RARE_TOKEN> <RARE_TOKEN> + key + <RARE_TOKEN> -- " + e ) ; </a> 
<a> return null ; </a> 
<a> } </a> 
<a> } </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( Bundle bundle ) { </a> 
<a> Validate . <RARE_TOKEN> ( bundle , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> <RARE_TOKEN> = cache . <RARE_TOKEN> ( ) ; </a> 
<a> for ( String key : bundle . <RARE_TOKEN> ( ) ) { </a> 
<a> try { </a> 
<a> <RARE_TOKEN> ( key , bundle , <RARE_TOKEN> ) ; </a> 
<a> } catch ( JSONException e ) { </a> 
<a> Logger . log ( LoggingBehavior . <RARE_TOKEN> , Log . <RARE_TOKEN> , TAG , <RARE_TOKEN> <RARE_TOKEN> value for <RARE_TOKEN> <RARE_TOKEN> + key + <RARE_TOKEN> -- " + e ) ; </a> 
<a> return ; </a> 
<a> } </a> 
<a> } </a> 
<a> boolean <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> if ( ! <RARE_TOKEN> ) { </a> 
<a> Logger . log ( LoggingBehavior . <RARE_TOKEN> , Log . <RARE_TOKEN> , TAG , <RARE_TOKEN> <RARE_TOKEN> not <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public void clear ( ) { </a> 
<a> cache . <RARE_TOKEN> ( ) . clear ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( String key , Bundle bundle , <RARE_TOKEN> . <RARE_TOKEN> <RARE_TOKEN> ) </a> 
<a> throws JSONException { </a> 
<a> Object value = bundle . get ( key ) ; </a> 
<a> if ( value == null ) { </a> 
<a> return ; </a> 
<a> } </a> 
<a> String <RARE_TOKEN> = null ; </a> 
<a> JSONArray jsonArray = null ; </a> 
<a> JSONObject json = new JSONObject ( ) ; </a> 
<a> if ( value instanceof <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> json . put ( <RARE_TOKEN> , ( ( <RARE_TOKEN> ) value ) . <RARE_TOKEN> ( ) ) ; </a> 
<a> } else if ( value instanceof <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> json . put ( <RARE_TOKEN> , ( ( <RARE_TOKEN> ) value ) . <RARE_TOKEN> ( ) ) ; </a> 
<a> } else if ( value instanceof Integer ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> json . put ( <RARE_TOKEN> , ( ( Integer ) value ) . <RARE_TOKEN> ( ) ) ; </a> 
<a> } else if ( value instanceof Long ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> json . put ( <RARE_TOKEN> , ( ( Long ) value ) . <RARE_TOKEN> ( ) ) ; </a> 
<a> } else if ( value instanceof <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> json . put ( <RARE_TOKEN> , ( ( <RARE_TOKEN> ) value ) . <RARE_TOKEN> ( ) ) ; </a> 
<a> } else if ( value instanceof <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> json . put ( <RARE_TOKEN> , ( ( <RARE_TOKEN> ) value ) . <RARE_TOKEN> ( ) ) ; </a> 
<a> } else if ( value instanceof Boolean ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> json . put ( <RARE_TOKEN> , ( ( Boolean ) value ) . <RARE_TOKEN> ( ) ) ; </a> 
<a> } else if ( value instanceof <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> json . put ( <RARE_TOKEN> , value . toString ( ) ) ; </a> 
<a> } else if ( value instanceof String ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> json . put ( <RARE_TOKEN> , ( String ) value ) ; </a> 
<a> } else if ( value instanceof <RARE_TOKEN> < ? > ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> json . put ( <RARE_TOKEN> , value . toString ( ) ) ; </a> 
<a> json . put ( <RARE_TOKEN> , value . getClass ( ) . getName ( ) ) ; </a> 
<a> } else { </a> 
<a> jsonArray = new JSONArray ( ) ; </a> 
<a> if ( value instanceof byte [ ] ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> for ( byte v : ( byte [ ] ) value ) { </a> 
<a> jsonArray . put ( ( int ) v ) ; </a> 
<a> } </a> 
<a> } else if ( value instanceof short [ ] ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> for ( short v : ( short [ ] ) value ) { </a> 
<a> jsonArray . put ( ( int ) v ) ; </a> 
<a> } </a> 
<a> } else if ( value instanceof int [ ] ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> for ( int v : ( int [ ] ) value ) { </a> 
<a> jsonArray . put ( v ) ; </a> 
<a> } </a> 
<a> } else if ( value instanceof long [ ] ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> for ( long v : ( long [ ] ) value ) { </a> 
<a> jsonArray . put ( v ) ; </a> 
<a> } </a> 
<a> } else if ( value instanceof float [ ] ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> for ( float v : ( float [ ] ) value ) { </a> 
<a> jsonArray . put ( ( double ) v ) ; </a> 
<a> } </a> 
<a> } else if ( value instanceof double [ ] ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> for ( double v : ( double [ ] ) value ) { </a> 
<a> jsonArray . put ( v ) ; </a> 
<a> } </a> 
<a> } else if ( value instanceof boolean [ ] ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> for ( boolean v : ( boolean [ ] ) value ) { </a> 
<a> jsonArray . put ( v ) ; </a> 
<a> } </a> 
<a> } else if ( value instanceof char [ ] ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> for ( char v : ( char [ ] ) value ) { </a> 
<a> jsonArray . put ( String . valueOf ( v ) ) ; </a> 
<a> } </a> 
<a> } else if ( value instanceof List < ? > ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> @ SuppressWarnings ( "unchecked" ) </a> 
<a> List < String > <RARE_TOKEN> = ( List < String > ) value ; </a> 
<a> for ( String v : <RARE_TOKEN> ) { </a> 
<a> jsonArray . put ( ( v == null ) ? JSONObject . <RARE_TOKEN> : v ) ; </a> 
<a> } </a> 
<a> } else { </a> 
<a> jsonArray = null ; </a> 
<a> } </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> json . put ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> if ( jsonArray != null ) { </a> 
<a> json . <RARE_TOKEN> ( <RARE_TOKEN> , jsonArray ) ; </a> 
<a> } </a> 
<a> String <RARE_TOKEN> = json . toString ( ) ; </a> 
<a> <RARE_TOKEN> . putString ( key , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( String key , Bundle bundle ) </a> 
<a> throws JSONException { </a> 
<a> String <RARE_TOKEN> = cache . getString ( key , <RARE_TOKEN> ) ; </a> 
<a> JSONObject json = new JSONObject ( <RARE_TOKEN> ) ; </a> 
<a> String <RARE_TOKEN> = json . getString ( <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> . equals ( <RARE_TOKEN> ) ) { </a> 
<a> bundle . <RARE_TOKEN> ( key , json . <RARE_TOKEN> ( <RARE_TOKEN> ) ) ; </a> 
<a> } else if ( <RARE_TOKEN> . equals ( <RARE_TOKEN> ) ) { </a> 
<a> JSONArray jsonArray = json . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> boolean [ ] array = new boolean [ jsonArray . length ( ) ] ; </a> 
<a> for ( int i = 0 ; i < array . length ; i ++ ) { </a> 
<a> array [ i ] = jsonArray . <RARE_TOKEN> ( i ) ; </a> 
<a> } </a> 
<a> bundle . <RARE_TOKEN> ( key , array ) ; </a> 
<a> } else if ( <RARE_TOKEN> . equals ( <RARE_TOKEN> ) ) { </a> 
<a> bundle . <RARE_TOKEN> ( key , ( byte ) json . getInt ( <RARE_TOKEN> ) ) ; </a> 
<a> } else if ( <RARE_TOKEN> . equals ( <RARE_TOKEN> ) ) { </a> 
<a> JSONArray jsonArray = json . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> byte [ ] array = new byte [ jsonArray . length ( ) ] ; </a> 
<a> for ( int i = 0 ; i < array . length ; i ++ ) { </a> 
<a> array [ i ] = ( byte ) jsonArray . getInt ( i ) ; </a> 
<a> } </a> 
<a> bundle . <RARE_TOKEN> ( key , array ) ; </a> 
<a> } else if ( <RARE_TOKEN> . equals ( <RARE_TOKEN> ) ) { </a> 
<a> bundle . <RARE_TOKEN> ( key , ( short ) json . getInt ( <RARE_TOKEN> ) ) ; </a> 
<a> } else if ( <RARE_TOKEN> . equals ( <RARE_TOKEN> ) ) { </a> 
<a> JSONArray jsonArray = json . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> short [ ] array = new short [ jsonArray . length ( ) ] ; </a> 
<a> for ( int i = 0 ; i < array . length ; i ++ ) { </a> 
<a> array [ i ] = ( short ) jsonArray . getInt ( i ) ; </a> 
<a> } </a> 
<a> bundle . <RARE_TOKEN> ( key , array ) ; </a> 
<a> } else if ( <RARE_TOKEN> . equals ( <RARE_TOKEN> ) ) { </a> 
<a> bundle . <RARE_TOKEN> ( key , json . getInt ( <RARE_TOKEN> ) ) ; </a> 
<a> } else if ( <RARE_TOKEN> . equals ( <RARE_TOKEN> ) ) { </a> 
<a> JSONArray jsonArray = json . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> int [ ] array = new int [ jsonArray . length ( ) ] ; </a> 
<a> for ( int i = 0 ; i < array . length ; i ++ ) { </a> 
<a> array [ i ] = jsonArray . getInt ( i ) ; </a> 
<a> } </a> 
<a> bundle . <RARE_TOKEN> ( key , array ) ; </a> 
<a> } else if ( <RARE_TOKEN> . equals ( <RARE_TOKEN> ) ) { </a> 
<a> bundle . <RARE_TOKEN> ( key , json . getLong ( <RARE_TOKEN> ) ) ; </a> 
<a> } else if ( <RARE_TOKEN> . equals ( <RARE_TOKEN> ) ) { </a> 
<a> JSONArray jsonArray = json . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> long [ ] array = new long [ jsonArray . length ( ) ] ; </a> 
<a> for ( int i = 0 ; i < array . length ; i ++ ) { </a> 
<a> array [ i ] = jsonArray . getLong ( i ) ; </a> 
<a> } </a> 
<a> bundle . <RARE_TOKEN> ( key , array ) ; </a> 
<a> } else if ( <RARE_TOKEN> . equals ( <RARE_TOKEN> ) ) { </a> 
<a> bundle . <RARE_TOKEN> ( key , ( float ) json . <RARE_TOKEN> ( <RARE_TOKEN> ) ) ; </a> 
<a> } else if ( <RARE_TOKEN> . equals ( <RARE_TOKEN> ) ) { </a> 
<a> JSONArray jsonArray = json . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> float [ ] array = new float [ jsonArray . length ( ) ] ; </a> 
<a> for ( int i = 0 ; i < array . length ; i ++ ) { </a> 
<a> array [ i ] = ( float ) jsonArray . <RARE_TOKEN> ( i ) ; </a> 
<a> } </a> 
<a> bundle . <RARE_TOKEN> ( key , array ) ; </a> 
<a> } else if ( <RARE_TOKEN> . equals ( <RARE_TOKEN> ) ) { </a> 
<a> bundle . <RARE_TOKEN> ( key , json . <RARE_TOKEN> ( <RARE_TOKEN> ) ) ; </a> 
<a> } else if ( <RARE_TOKEN> . equals ( <RARE_TOKEN> ) ) { </a> 
<a> JSONArray jsonArray = json . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> double [ ] array = new double [ jsonArray . length ( ) ] ; </a> 
<a> for ( int i = 0 ; i < array . length ; i ++ ) { </a> 
<a> array [ i ] = jsonArray . <RARE_TOKEN> ( i ) ; </a> 
<a> } </a> 
<a> bundle . <RARE_TOKEN> ( key , array ) ; </a> 
<a> } else if ( <RARE_TOKEN> . equals ( <RARE_TOKEN> ) ) { </a> 
<a> String <RARE_TOKEN> = json . getString ( <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> != null && <RARE_TOKEN> . length ( ) == 1 ) { </a> 
<a> bundle . <RARE_TOKEN> ( key , <RARE_TOKEN> . charAt ( 0 ) ) ; </a> 
<a> } </a> 
<a> } else if ( <RARE_TOKEN> . equals ( <RARE_TOKEN> ) ) { </a> 
<a> JSONArray jsonArray = json . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> char [ ] array = new char [ jsonArray . length ( ) ] ; </a> 
<a> for ( int i = 0 ; i < array . length ; i ++ ) { </a> 
<a> String <RARE_TOKEN> = jsonArray . getString ( i ) ; </a> 
<a> if ( <RARE_TOKEN> != null && <RARE_TOKEN> . length ( ) == 1 ) { </a> 
<a> array [ i ] = <RARE_TOKEN> . charAt ( 0 ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> bundle . <RARE_TOKEN> ( key , array ) ; </a> 
<a> } else if ( <RARE_TOKEN> . equals ( <RARE_TOKEN> ) ) { </a> 
<a> bundle . putString ( key , json . getString ( <RARE_TOKEN> ) ) ; </a> 
<a> } else if ( <RARE_TOKEN> . equals ( <RARE_TOKEN> ) ) { </a> 
<a> JSONArray jsonArray = json . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> int <RARE_TOKEN> = jsonArray . length ( ) ; </a> 
<a> ArrayList < String > <RARE_TOKEN> = new ArrayList < String > ( <RARE_TOKEN> ) ; </a> 
<a> for ( int i = 0 ; i < <RARE_TOKEN> ; i ++ ) { </a> 
<a> Object <RARE_TOKEN> = jsonArray . get ( i ) ; </a> 
<a> <RARE_TOKEN> . add ( i , <RARE_TOKEN> == JSONObject . <RARE_TOKEN> ? null : ( String ) <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> bundle . <RARE_TOKEN> ( key , <RARE_TOKEN> ) ; </a> 
<a> } else if ( <RARE_TOKEN> . equals ( <RARE_TOKEN> ) ) { </a> 
<a> try { </a> 
<a> String <RARE_TOKEN> = json . getString ( <RARE_TOKEN> ) ; </a> 
<a> @ SuppressWarnings ( { "unchecked" , <RARE_TOKEN> } ) </a> 
<a> Class < ? extends <RARE_TOKEN> > <RARE_TOKEN> = ( Class < ? extends <RARE_TOKEN> > ) Class . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> @ SuppressWarnings ( "unchecked" ) </a> 
<a> <RARE_TOKEN> < ? > <RARE_TOKEN> = <RARE_TOKEN> . valueOf ( <RARE_TOKEN> , json . getString ( <RARE_TOKEN> ) ) ; </a> 
<a> bundle . <RARE_TOKEN> ( key , <RARE_TOKEN> ) ; </a> 
<a> } catch ( <RARE_TOKEN> e ) { </a> 
<a> } catch ( IllegalArgumentException e ) { </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package com . facebook ; </a> 
<a> import android . os . Bundle ; </a> 
<a> import com . facebook . internal . Validate ; </a> 
<a> import java . util . ArrayList ; </a> 
<a> import java . util . Date ; </a> 
<a> import java . util . List ; </a> 
<a> public abstract class TokenCachingStrategy { </a> 
<a> public static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> public static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> public static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> public static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> public static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> public static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final long <RARE_TOKEN> = Long . <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> public abstract Bundle <RARE_TOKEN> ( ) ; </a> 
<a> public abstract void <RARE_TOKEN> ( Bundle bundle ) ; </a> 
<a> public abstract void clear ( ) ; </a> 
<a> public static boolean <RARE_TOKEN> ( Bundle bundle ) { </a> 
<a> if ( bundle == null ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> String token = bundle . getString ( <RARE_TOKEN> ) ; </a> 
<a> if ( ( token == null ) || ( token . length ( ) == 0 ) ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> long <RARE_TOKEN> = bundle . getLong ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> == <RARE_TOKEN> ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> return true ; </a> 
<a> } </a> 
<a> public static String getToken ( Bundle bundle ) { </a> 
<a> Validate . <RARE_TOKEN> ( bundle , <RARE_TOKEN> ) ; </a> 
<a> return bundle . getString ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public static void <RARE_TOKEN> ( Bundle bundle , String value ) { </a> 
<a> Validate . <RARE_TOKEN> ( bundle , <RARE_TOKEN> ) ; </a> 
<a> Validate . <RARE_TOKEN> ( value , <RARE_TOKEN> ) ; </a> 
<a> bundle . putString ( <RARE_TOKEN> , value ) ; </a> 
<a> } </a> 
<a> public static Date <RARE_TOKEN> ( Bundle bundle ) { </a> 
<a> Validate . <RARE_TOKEN> ( bundle , <RARE_TOKEN> ) ; </a> 
<a> return <RARE_TOKEN> ( bundle , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public static void <RARE_TOKEN> ( Bundle bundle , Date value ) { </a> 
<a> Validate . <RARE_TOKEN> ( bundle , <RARE_TOKEN> ) ; </a> 
<a> Validate . <RARE_TOKEN> ( value , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( bundle , <RARE_TOKEN> , value ) ; </a> 
<a> } </a> 
<a> public static long <RARE_TOKEN> ( Bundle bundle ) { </a> 
<a> Validate . <RARE_TOKEN> ( bundle , <RARE_TOKEN> ) ; </a> 
<a> return bundle . getLong ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public static void <RARE_TOKEN> ( Bundle bundle , long value ) { </a> 
<a> Validate . <RARE_TOKEN> ( bundle , <RARE_TOKEN> ) ; </a> 
<a> bundle . <RARE_TOKEN> ( <RARE_TOKEN> , value ) ; </a> 
<a> } </a> 
<a> public static List < String > getPermissions ( Bundle bundle ) { </a> 
<a> Validate . <RARE_TOKEN> ( bundle , <RARE_TOKEN> ) ; </a> 
<a> return bundle . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public static void <RARE_TOKEN> ( Bundle bundle , List < String > value ) { </a> 
<a> Validate . <RARE_TOKEN> ( bundle , <RARE_TOKEN> ) ; </a> 
<a> Validate . <RARE_TOKEN> ( value , <RARE_TOKEN> ) ; </a> 
<a> ArrayList < String > <RARE_TOKEN> ; </a> 
<a> if ( value instanceof ArrayList < ? > ) { </a> 
<a> <RARE_TOKEN> = ( ArrayList < String > ) value ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> = new ArrayList < String > ( value ) ; </a> 
<a> } </a> 
<a> bundle . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public static AccessTokenSource <RARE_TOKEN> ( Bundle bundle ) { </a> 
<a> Validate . <RARE_TOKEN> ( bundle , <RARE_TOKEN> ) ; </a> 
<a> if ( bundle . containsKey ( TokenCachingStrategy . <RARE_TOKEN> ) ) { </a> 
<a> return ( AccessTokenSource ) bundle . <RARE_TOKEN> ( TokenCachingStrategy . <RARE_TOKEN> ) ; </a> 
<a> } else { </a> 
<a> boolean <RARE_TOKEN> = bundle . <RARE_TOKEN> ( TokenCachingStrategy . <RARE_TOKEN> ) ; </a> 
<a> return <RARE_TOKEN> ? AccessTokenSource . <RARE_TOKEN> : AccessTokenSource . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<a> public static void <RARE_TOKEN> ( Bundle bundle , AccessTokenSource value ) { </a> 
<a> Validate . <RARE_TOKEN> ( bundle , <RARE_TOKEN> ) ; </a> 
<a> bundle . <RARE_TOKEN> ( <RARE_TOKEN> , value ) ; </a> 
<a> } </a> 
<a> public static Date <RARE_TOKEN> ( Bundle bundle ) { </a> 
<a> Validate . <RARE_TOKEN> ( bundle , <RARE_TOKEN> ) ; </a> 
<a> return <RARE_TOKEN> ( bundle , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public static void <RARE_TOKEN> ( Bundle bundle , Date value ) { </a> 
<a> Validate . <RARE_TOKEN> ( bundle , <RARE_TOKEN> ) ; </a> 
<a> Validate . <RARE_TOKEN> ( value , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( bundle , <RARE_TOKEN> , value ) ; </a> 
<a> } </a> 
<a> public static long <RARE_TOKEN> ( Bundle bundle ) { </a> 
<a> Validate . <RARE_TOKEN> ( bundle , <RARE_TOKEN> ) ; </a> 
<a> return bundle . getLong ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public static void <RARE_TOKEN> ( Bundle bundle , long value ) { </a> 
<a> Validate . <RARE_TOKEN> ( bundle , <RARE_TOKEN> ) ; </a> 
<a> bundle . <RARE_TOKEN> ( <RARE_TOKEN> , value ) ; </a> 
<a> } </a> 
<a> static Date <RARE_TOKEN> ( Bundle bundle , String key ) { </a> 
<a> if ( bundle == null ) { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> long n = bundle . getLong ( key , <RARE_TOKEN> ) ; </a> 
<a> if ( n == <RARE_TOKEN> ) { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> return new Date ( n ) ; </a> 
<a> } </a> 
<a> static void <RARE_TOKEN> ( Bundle bundle , String key , Date <RARE_TOKEN> ) { </a> 
<a> bundle . <RARE_TOKEN> ( key , <RARE_TOKEN> . getTime ( ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package com . facebook ; </a> 
<a> import android . app . Activity ; </a> 
<a> import android . content . <RARE_TOKEN> ; </a> 
<a> import android . content . Context ; </a> 
<a> import android . content . Intent ; </a> 
<a> import android . content . <RARE_TOKEN> ; </a> 
<a> import android . os . Bundle ; </a> 
<a> import android . support . v4 . content . <RARE_TOKEN> ; </a> 
<a> public class <RARE_TOKEN> { </a> 
<a> private final static String <RARE_TOKEN> = <RARE_TOKEN> <RARE_TOKEN> be <RARE_TOKEN> ; </a> 
<a> private final Activity activity ; </a> 
<a> private final Session . StatusCallback callback ; </a> 
<a> private final <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> private final <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> public <RARE_TOKEN> ( Activity activity , Session . StatusCallback callback ) { </a> 
<a> if ( activity == null ) { </a> 
<a> throw new IllegalArgumentException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> this . activity = activity ; </a> 
<a> this . callback = callback ; </a> 
<a> this . <RARE_TOKEN> = new <RARE_TOKEN> ( ) ; </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> . getInstance ( activity ) ; </a> 
<a> } </a> 
<a> public void onCreate ( Bundle savedInstanceState ) { </a> 
<a> Session session = Session . getActiveSession ( ) ; </a> 
<a> if ( session == null ) { </a> 
<a> if ( savedInstanceState != null ) { </a> 
<a> session = Session . <RARE_TOKEN> ( activity , null , callback , savedInstanceState ) ; </a> 
<a> } </a> 
<a> if ( session == null ) { </a> 
<a> session = new Session ( activity ) ; </a> 
<a> } </a> 
<a> Session . <RARE_TOKEN> ( session ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> filter = new <RARE_TOKEN> ( ) ; </a> 
<a> filter . <RARE_TOKEN> ( Session . <RARE_TOKEN> ) ; </a> 
<a> filter . <RARE_TOKEN> ( Session . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> , filter ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> Session session = Session . getActiveSession ( ) ; </a> 
<a> if ( session != null ) { </a> 
<a> if ( callback != null ) { </a> 
<a> session . <RARE_TOKEN> ( callback ) ; </a> 
<a> } </a> 
<a> if ( SessionState . <RARE_TOKEN> . equals ( session . <RARE_TOKEN> ( ) ) ) { </a> 
<a> session . <RARE_TOKEN> ( null ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> public void onActivityResult ( int requestCode , int resultCode , Intent data ) { </a> 
<a> Session session = Session . getActiveSession ( ) ; </a> 
<a> if ( session != null ) { </a> 
<a> session . onActivityResult ( activity , requestCode , resultCode , data ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public void onSaveInstanceState ( Bundle outState ) { </a> 
<a> Session . <RARE_TOKEN> ( Session . getActiveSession ( ) , outState ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> if ( callback != null ) { </a> 
<a> Session session = Session . getActiveSession ( ) ; </a> 
<a> if ( session != null ) { </a> 
<a> session . <RARE_TOKEN> ( callback ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> private class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( Context context , Intent intent ) { </a> 
<a> if ( Session . <RARE_TOKEN> . equals ( intent . <RARE_TOKEN> ( ) ) ) { </a> 
<a> Session session = Session . getActiveSession ( ) ; </a> 
<a> if ( session != null && callback != null ) { </a> 
<a> session . <RARE_TOKEN> ( callback ) ; </a> 
<a> } </a> 
<a> } else if ( Session . <RARE_TOKEN> . equals ( intent . <RARE_TOKEN> ( ) ) ) { </a> 
<a> Session session = Session . getActiveSession ( ) ; </a> 
<a> if ( session != null && callback != null ) { </a> 
<a> session . <RARE_TOKEN> ( callback ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package com . facebook . android ; </a> 
<a> public class <RARE_TOKEN> extends Throwable { </a> 
<a> private static final long serialVersionUID = <RARE_TOKEN> ; </a> 
<a> private int <RARE_TOKEN> ; </a> 
<a> private String <RARE_TOKEN> ; </a> 
<a> @ Deprecated </a> 
<a> public <RARE_TOKEN> ( String message , int errorCode , String <RARE_TOKEN> ) { </a> 
<a> super ( message ) ; </a> 
<a> <RARE_TOKEN> = errorCode ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Deprecated </a> 
<a> public int <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Deprecated </a> 
<a> public String <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package com . facebook . android ; </a> 
<a> import android . <RARE_TOKEN> ; </a> 
<a> import android . app . Activity ; </a> 
<a> import android . content . * ; </a> 
<a> import android . content . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import android . content . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import android . content . <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import android . content . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import android . content . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import android . net . <RARE_TOKEN> ; </a> 
<a> import android . os . * ; </a> 
<a> import com . facebook . * ; </a> 
<a> import com . facebook . Session . StatusCallback ; </a> 
<a> import java . io . <RARE_TOKEN> ; </a> 
<a> import java . io . IOException ; </a> 
<a> import java . lang . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import java . net . <RARE_TOKEN> ; </a> 
<a> import java . util . Arrays ; </a> 
<a> import java . util . Collections ; </a> 
<a> import java . util . List ; </a> 
<a> public class <RARE_TOKEN> { </a> 
<a> @ Deprecated </a> 
<a> public static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> @ Deprecated </a> 
<a> public static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> @ Deprecated </a> 
<a> public static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> @ Deprecated </a> 
<a> public static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> @ Deprecated </a> 
<a> public static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> @ Deprecated </a> 
<a> public static final <RARE_TOKEN> <RARE_TOKEN> = </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> @ Deprecated </a> 
<a> public static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> @ Deprecated </a> 
<a> public static final int <RARE_TOKEN> = - 1 ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final int <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> @ Deprecated </a> 
<a> protected static String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> @ Deprecated </a> 
<a> protected static String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> @ Deprecated </a> 
<a> protected static String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private final Object lock = new Object ( ) ; </a> 
<a> private String accessToken = null ; </a> 
<a> private long <RARE_TOKEN> = 0 ; </a> 
<a> private long <RARE_TOKEN> = 0 ; </a> 
<a> private String <RARE_TOKEN> ; </a> 
<a> private Activity <RARE_TOKEN> ; </a> 
<a> private String [ ] <RARE_TOKEN> ; </a> 
<a> private Session <RARE_TOKEN> ; </a> 
<a> private volatile Session session ; </a> 
<a> private boolean <RARE_TOKEN> ; </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> private volatile Session <RARE_TOKEN> ; </a> 
<a> final private long <RARE_TOKEN> = <RARE_TOKEN> * <RARE_TOKEN> * <RARE_TOKEN> * <RARE_TOKEN> ; </a> 
<a> @ Deprecated </a> 
<a> public <RARE_TOKEN> ( String <RARE_TOKEN> ) { </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> throw new IllegalArgumentException ( <RARE_TOKEN> must <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ID <RARE_TOKEN> <RARE_TOKEN> " </a> 
<a> + <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> for <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Deprecated </a> 
<a> public void <RARE_TOKEN> ( Activity activity , final <RARE_TOKEN> listener ) { </a> 
<a> <RARE_TOKEN> ( activity , new String [ ] { } , <RARE_TOKEN> , SessionLoginBehavior . <RARE_TOKEN> , </a> 
<a> listener ) ; </a> 
<a> } </a> 
<a> @ Deprecated </a> 
<a> public void <RARE_TOKEN> ( Activity activity , String [ ] permissions , final <RARE_TOKEN> listener ) { </a> 
<a> <RARE_TOKEN> ( activity , permissions , <RARE_TOKEN> , SessionLoginBehavior . <RARE_TOKEN> , listener ) ; </a> 
<a> } </a> 
<a> @ Deprecated </a> 
<a> public void <RARE_TOKEN> ( Activity activity , String [ ] permissions , int <RARE_TOKEN> , final <RARE_TOKEN> listener ) { </a> 
<a> SessionLoginBehavior <RARE_TOKEN> = ( <RARE_TOKEN> >= 0 ) ? SessionLoginBehavior . <RARE_TOKEN> </a> 
<a> : SessionLoginBehavior . <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> ( activity , permissions , <RARE_TOKEN> , <RARE_TOKEN> , listener ) ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( Activity activity , String [ ] permissions , int <RARE_TOKEN> , </a> 
<a> SessionLoginBehavior <RARE_TOKEN> , final <RARE_TOKEN> listener ) { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = new Session . Builder ( activity ) . </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) . </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ( ) ) . </a> 
<a> build ( ) ; </a> 
<a> <RARE_TOKEN> = activity ; </a> 
<a> <RARE_TOKEN> = ( permissions != null ) ? permissions : new String [ 0 ] ; </a> 
<a> StatusCallback callback = new StatusCallback ( ) { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( Session <RARE_TOKEN> , SessionState state , Exception exception ) { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> , state , exception , listener ) ; </a> 
<a> } </a> 
<a> } ; </a> 
<a> Session . OpenRequest openRequest = new Session . OpenRequest ( activity ) . </a> 
<a> setCallback ( callback ) . </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) . </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) . </a> 
<a> <RARE_TOKEN> ( Arrays . asList ( permissions ) ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> , openRequest , <RARE_TOKEN> . length > 0 ) ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( Session session , Session . OpenRequest openRequest , boolean <RARE_TOKEN> ) { </a> 
<a> openRequest . <RARE_TOKEN> ( true ) ; </a> 
<a> if ( <RARE_TOKEN> ) { </a> 
<a> session . <RARE_TOKEN> ( openRequest ) ; </a> 
<a> } else { </a> 
<a> session . <RARE_TOKEN> ( openRequest ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ SuppressWarnings ( <RARE_TOKEN> ) </a> 
<a> private void <RARE_TOKEN> ( Session <RARE_TOKEN> , SessionState state , Exception exception , </a> 
<a> <RARE_TOKEN> listener ) { </a> 
<a> Bundle extras = <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> if ( state == SessionState . <RARE_TOKEN> ) { </a> 
<a> Session <RARE_TOKEN> = null ; </a> 
<a> synchronized ( <RARE_TOKEN> . this . lock ) { </a> 
<a> if ( <RARE_TOKEN> != <RARE_TOKEN> . this . session ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . this . session ; </a> 
<a> <RARE_TOKEN> . this . session = <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> . this . <RARE_TOKEN> = false ; </a> 
<a> } </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> . close ( ) ; </a> 
<a> } </a> 
<a> listener . <RARE_TOKEN> ( extras ) ; </a> 
<a> } else if ( exception != null ) { </a> 
<a> if ( exception instanceof <RARE_TOKEN> ) { </a> 
<a> listener . <RARE_TOKEN> ( ) ; </a> 
<a> } else if ( ( exception instanceof <RARE_TOKEN> ) && ( extras != null ) </a> 
<a> && extras . containsKey ( Session . <RARE_TOKEN> ) </a> 
<a> && extras . containsKey ( Session . <RARE_TOKEN> ) ) { </a> 
<a> <RARE_TOKEN> error = new <RARE_TOKEN> ( exception . getMessage ( ) , </a> 
<a> extras . getInt ( Session . <RARE_TOKEN> ) , </a> 
<a> extras . getString ( Session . <RARE_TOKEN> ) ) ; </a> 
<a> listener . onError ( error ) ; </a> 
<a> } else { </a> 
<a> FacebookError error = new FacebookError ( exception . getMessage ( ) ) ; </a> 
<a> listener . <RARE_TOKEN> ( error ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> private boolean <RARE_TOKEN> ( Context context , Intent intent ) { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = context . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( intent , 0 ) ; </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> return <RARE_TOKEN> ( context , <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> private boolean <RARE_TOKEN> ( Context context , String <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> try { </a> 
<a> <RARE_TOKEN> = context . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> } catch ( <RARE_TOKEN> e ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> for ( <RARE_TOKEN> <RARE_TOKEN> : <RARE_TOKEN> . <RARE_TOKEN> ) { </a> 
<a> if ( <RARE_TOKEN> . <RARE_TOKEN> ( ) . equals ( <RARE_TOKEN> ) ) { </a> 
<a> return true ; </a> 
<a> } </a> 
<a> } </a> 
<a> return false ; </a> 
<a> } </a> 
<a> @ Deprecated </a> 
<a> public void <RARE_TOKEN> ( int requestCode , int resultCode , Intent data ) { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> Session <RARE_TOKEN> = this . <RARE_TOKEN> ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> if ( <RARE_TOKEN> . onActivityResult ( this . <RARE_TOKEN> , requestCode , resultCode , data ) ) { </a> 
<a> this . <RARE_TOKEN> = null ; </a> 
<a> this . <RARE_TOKEN> = null ; </a> 
<a> this . <RARE_TOKEN> = null ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> @ Deprecated </a> 
<a> public boolean <RARE_TOKEN> ( Context context , <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> Intent intent = new Intent ( ) ; </a> 
<a> intent . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> if ( ! <RARE_TOKEN> ( context , intent ) ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> return context . <RARE_TOKEN> ( intent , new <RARE_TOKEN> ( context , <RARE_TOKEN> ) , </a> 
<a> Context . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Deprecated </a> 
<a> public boolean <RARE_TOKEN> ( Context context , <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> ( ) ) { </a> 
<a> return <RARE_TOKEN> ( context , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> return true ; </a> 
<a> } </a> 
<a> @ Deprecated </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> return <RARE_TOKEN> ( ) </a> 
<a> && ( System . currentTimeMillis ( ) - <RARE_TOKEN> >= <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> private class <RARE_TOKEN> implements <RARE_TOKEN> { </a> 
<a> final <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( </a> 
<a> new <RARE_TOKEN> ( <RARE_TOKEN> . this , this ) ) ; </a> 
<a> final <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> final Context <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = null ; </a> 
<a> public <RARE_TOKEN> ( Context <RARE_TOKEN> , <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> , <RARE_TOKEN> service ) { </a> 
<a> <RARE_TOKEN> = new <RARE_TOKEN> ( service ) ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> . onError ( new Error ( <RARE_TOKEN> <RARE_TOKEN> ) ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> . this ) ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( ) { </a> 
<a> Bundle <RARE_TOKEN> = new Bundle ( ) ; </a> 
<a> <RARE_TOKEN> . putString ( <RARE_TOKEN> , accessToken ) ; </a> 
<a> <RARE_TOKEN> request = <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> request . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> request . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> try { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( request ) ; </a> 
<a> } catch ( <RARE_TOKEN> e ) { </a> 
<a> <RARE_TOKEN> . onError ( new Error ( <RARE_TOKEN> connection <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> private static class <RARE_TOKEN> extends Handler { </a> 
<a> <RARE_TOKEN> < <RARE_TOKEN> > <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> < <RARE_TOKEN> > <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> facebook , <RARE_TOKEN> connection ) { </a> 
<a> super ( ) ; </a> 
<a> <RARE_TOKEN> = new <RARE_TOKEN> < <RARE_TOKEN> > ( facebook ) ; </a> 
<a> <RARE_TOKEN> = new <RARE_TOKEN> < <RARE_TOKEN> > ( connection ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> @ SuppressWarnings ( <RARE_TOKEN> ) </a> 
<a> public void <RARE_TOKEN> ( <RARE_TOKEN> msg ) { </a> 
<a> <RARE_TOKEN> facebook = <RARE_TOKEN> . get ( ) ; </a> 
<a> <RARE_TOKEN> connection = <RARE_TOKEN> . get ( ) ; </a> 
<a> if ( facebook == null || connection == null ) { </a> 
<a> return ; </a> 
<a> } </a> 
<a> String token = msg . getData ( ) . getString ( <RARE_TOKEN> ) ; </a> 
<a> long <RARE_TOKEN> = msg . getData ( ) . getLong ( <RARE_TOKEN> ) * <RARE_TOKEN> ; </a> 
<a> if ( token != null ) { </a> 
<a> facebook . <RARE_TOKEN> ( token ) ; </a> 
<a> facebook . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> Session <RARE_TOKEN> = facebook . session ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> , msg . getData ( ) ) ; </a> 
<a> } </a> 
<a> if ( connection . <RARE_TOKEN> != null ) { </a> 
<a> Bundle <RARE_TOKEN> = ( Bundle ) msg . getData ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> connection . <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } else if ( connection . <RARE_TOKEN> != null ) { </a> 
<a> String error = msg . getData ( ) . getString ( <RARE_TOKEN> ) ; </a> 
<a> if ( msg . getData ( ) . containsKey ( <RARE_TOKEN> ) ) { </a> 
<a> int errorCode = msg . getData ( ) . getInt ( <RARE_TOKEN> ) ; </a> 
<a> connection . <RARE_TOKEN> . <RARE_TOKEN> ( new FacebookError ( error , null , errorCode ) ) ; </a> 
<a> } else { </a> 
<a> connection . <RARE_TOKEN> . onError ( new Error ( error != null ? error : <RARE_TOKEN> service <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> if ( connection != null ) { </a> 
<a> connection . <RARE_TOKEN> . <RARE_TOKEN> ( connection ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> @ Deprecated </a> 
<a> public String <RARE_TOKEN> ( Context context ) throws <RARE_TOKEN> , IOException { </a> 
<a> return <RARE_TOKEN> ( context ) ; </a> 
<a> } </a> 
<a> String <RARE_TOKEN> ( Context context ) throws <RARE_TOKEN> , IOException { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> Bundle b = new Bundle ( ) ; </a> 
<a> b . putString ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> String response = request ( b ) ; </a> 
<a> long currentTimeMillis = System . currentTimeMillis ( ) ; </a> 
<a> Session <RARE_TOKEN> = null ; </a> 
<a> synchronized ( this . lock ) { </a> 
<a> <RARE_TOKEN> = session ; </a> 
<a> session = null ; </a> 
<a> accessToken = null ; </a> 
<a> <RARE_TOKEN> = 0 ; </a> 
<a> <RARE_TOKEN> = currentTimeMillis ; </a> 
<a> <RARE_TOKEN> = false ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> return response ; </a> 
<a> } </a> 
<a> @ Deprecated </a> 
<a> public String request ( Bundle parameters ) throws <RARE_TOKEN> , IOException { </a> 
<a> if ( ! parameters . containsKey ( <RARE_TOKEN> ) ) { </a> 
<a> throw new IllegalArgumentException ( <RARE_TOKEN> method must be <RARE_TOKEN> " </a> 
<a> + <RARE_TOKEN> must <RARE_TOKEN> key <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> </a> 
<a> + " <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> return <RARE_TOKEN> ( null , parameters , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Deprecated </a> 
<a> public String request ( String graphPath ) throws <RARE_TOKEN> , IOException { </a> 
<a> return <RARE_TOKEN> ( graphPath , new Bundle ( ) , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Deprecated </a> 
<a> public String request ( String graphPath , Bundle parameters ) throws <RARE_TOKEN> , IOException { </a> 
<a> return <RARE_TOKEN> ( graphPath , parameters , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Deprecated </a> 
<a> public String request ( String graphPath , Bundle params , String <RARE_TOKEN> ) throws <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , IOException { </a> 
<a> return <RARE_TOKEN> ( graphPath , params , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ SuppressWarnings ( <RARE_TOKEN> ) </a> 
<a> String <RARE_TOKEN> ( String graphPath , Bundle params , String <RARE_TOKEN> ) throws <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , IOException { </a> 
<a> params . putString ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> ( ) ) { </a> 
<a> params . putString ( <RARE_TOKEN> , <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> String url = ( graphPath != null ) ? <RARE_TOKEN> + graphPath : <RARE_TOKEN> ; </a> 
<a> return Util . <RARE_TOKEN> ( url , <RARE_TOKEN> , params ) ; </a> 
<a> } </a> 
<a> @ Deprecated </a> 
<a> public void dialog ( Context context , String action , <RARE_TOKEN> listener ) { </a> 
<a> dialog ( context , action , new Bundle ( ) , listener ) ; </a> 
<a> } </a> 
<a> @ Deprecated </a> 
<a> public void dialog ( Context context , String action , Bundle parameters , final <RARE_TOKEN> listener ) { </a> 
<a> parameters . putString ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> parameters . putString ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> if ( action . equals ( <RARE_TOKEN> ) ) { </a> 
<a> parameters . putString ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> parameters . putString ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } else { </a> 
<a> parameters . putString ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> ( ) ) { </a> 
<a> parameters . putString ( <RARE_TOKEN> , <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> if ( context . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> ) != <RARE_TOKEN> . <RARE_TOKEN> ) { </a> 
<a> Util . <RARE_TOKEN> ( context , <RARE_TOKEN> , <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> to <RARE_TOKEN> the <RARE_TOKEN> ) ; </a> 
<a> } else { </a> 
<a> new <RARE_TOKEN> ( context , action , parameters , listener ) . show ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Deprecated </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return ( <RARE_TOKEN> ( ) != null ) </a> 
<a> && ( ( <RARE_TOKEN> ( ) == 0 ) || ( System . currentTimeMillis ( ) < <RARE_TOKEN> ( ) ) ) ; </a> 
<a> } </a> 
<a> @ Deprecated </a> 
<a> public void <RARE_TOKEN> ( Session session ) { </a> 
<a> if ( session == null ) { </a> 
<a> throw new IllegalArgumentException ( <RARE_TOKEN> <RARE_TOKEN> be <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> synchronized ( this . lock ) { </a> 
<a> this . <RARE_TOKEN> = session ; </a> 
<a> } </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( String <RARE_TOKEN> ) { </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> throw new UnsupportedOperationException ( </a> 
<a> String . format ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> has <RARE_TOKEN> <RARE_TOKEN> , <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Deprecated </a> 
<a> public final Session getSession ( ) { </a> 
<a> while ( true ) { </a> 
<a> String <RARE_TOKEN> = null ; </a> 
<a> Session <RARE_TOKEN> = null ; </a> 
<a> synchronized ( this . lock ) { </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> if ( ( session != null ) || ! <RARE_TOKEN> ) { </a> 
<a> return session ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> = accessToken ; </a> 
<a> <RARE_TOKEN> = session ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> List < String > permissions ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> permissions = <RARE_TOKEN> . getPermissions ( ) ; </a> 
<a> } else if ( <RARE_TOKEN> != null ) { </a> 
<a> permissions = Arrays . asList ( <RARE_TOKEN> ) ; </a> 
<a> } else { </a> 
<a> permissions = Collections . < String > <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> Session <RARE_TOKEN> = new Session . Builder ( <RARE_TOKEN> ) . </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) . </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ( ) ) . </a> 
<a> build ( ) ; </a> 
<a> if ( <RARE_TOKEN> . <RARE_TOKEN> ( ) != SessionState . <RARE_TOKEN> ) { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> Session . OpenRequest openRequest = </a> 
<a> new Session . OpenRequest ( <RARE_TOKEN> ) . <RARE_TOKEN> ( permissions ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> , openRequest , ! permissions . isEmpty ( ) ) ; </a> 
<a> Session <RARE_TOKEN> = null ; </a> 
<a> Session <RARE_TOKEN> = null ; </a> 
<a> synchronized ( this . lock ) { </a> 
<a> if ( <RARE_TOKEN> || ( session == null ) ) { </a> 
<a> <RARE_TOKEN> = session ; </a> 
<a> <RARE_TOKEN> = session = <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = false ; </a> 
<a> } </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> . close ( ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> @ Deprecated </a> 
<a> public String <RARE_TOKEN> ( ) { </a> 
<a> Session s = getSession ( ) ; </a> 
<a> if ( s != null ) { </a> 
<a> return s . <RARE_TOKEN> ( ) ; </a> 
<a> } else { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Deprecated </a> 
<a> public long <RARE_TOKEN> ( ) { </a> 
<a> Session s = getSession ( ) ; </a> 
<a> if ( s != null ) { </a> 
<a> return s . <RARE_TOKEN> ( ) . getTime ( ) ; </a> 
<a> } else { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Deprecated </a> 
<a> public long <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Deprecated </a> 
<a> public void <RARE_TOKEN> ( String accessToken , long <RARE_TOKEN> , long <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> synchronized ( this . lock ) { </a> 
<a> this . accessToken = accessToken ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Deprecated </a> 
<a> public void <RARE_TOKEN> ( String token ) { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> synchronized ( this . lock ) { </a> 
<a> accessToken = token ; </a> 
<a> <RARE_TOKEN> = System . currentTimeMillis ( ) ; </a> 
<a> <RARE_TOKEN> = true ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Deprecated </a> 
<a> public void <RARE_TOKEN> ( long <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> synchronized ( this . lock ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = System . currentTimeMillis ( ) ; </a> 
<a> <RARE_TOKEN> = true ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Deprecated </a> 
<a> public void <RARE_TOKEN> ( String <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> long <RARE_TOKEN> = <RARE_TOKEN> . equals ( <RARE_TOKEN> ) ? 0 : System . currentTimeMillis ( ) </a> 
<a> + Long . <RARE_TOKEN> ( <RARE_TOKEN> ) * <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Deprecated </a> 
<a> public String <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Deprecated </a> 
<a> public void <RARE_TOKEN> ( String <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> synchronized ( this . lock ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = true ; </a> 
<a> } </a> 
<a> } </a> 
<a> private TokenCachingStrategy <RARE_TOKEN> ( ) { </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> <RARE_TOKEN> = new <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> private static String [ ] <RARE_TOKEN> ( List < String > list ) { </a> 
<a> String [ ] array = new String [ list . size ( ) ] ; </a> 
<a> if ( list != null ) { </a> 
<a> for ( int i = 0 ; i < array . length ; i ++ ) { </a> 
<a> array [ i ] = list . get ( i ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> return array ; </a> 
<a> } </a> 
<a> private static List < String > <RARE_TOKEN> ( String [ ] array ) { </a> 
<a> if ( array != null ) { </a> 
<a> return Arrays . asList ( array ) ; </a> 
<a> } else { </a> 
<a> return Collections . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private class <RARE_TOKEN> extends TokenCachingStrategy { </a> 
<a> @ Override </a> 
<a> public Bundle <RARE_TOKEN> ( ) { </a> 
<a> Bundle bundle = new Bundle ( ) ; </a> 
<a> if ( accessToken != null ) { </a> 
<a> TokenCachingStrategy . <RARE_TOKEN> ( bundle , accessToken ) ; </a> 
<a> TokenCachingStrategy . <RARE_TOKEN> ( bundle , <RARE_TOKEN> ) ; </a> 
<a> TokenCachingStrategy . <RARE_TOKEN> ( bundle , <RARE_TOKEN> ( <RARE_TOKEN> ) ) ; </a> 
<a> TokenCachingStrategy . <RARE_TOKEN> ( bundle , AccessTokenSource . <RARE_TOKEN> ) ; </a> 
<a> TokenCachingStrategy . <RARE_TOKEN> ( bundle , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> return bundle ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( Bundle bundle ) { </a> 
<a> accessToken = TokenCachingStrategy . getToken ( bundle ) ; </a> 
<a> <RARE_TOKEN> = TokenCachingStrategy . <RARE_TOKEN> ( bundle ) ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ( TokenCachingStrategy . getPermissions ( bundle ) ) ; </a> 
<a> <RARE_TOKEN> = TokenCachingStrategy . <RARE_TOKEN> ( bundle ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void clear ( ) { </a> 
<a> accessToken = null ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Deprecated </a> 
<a> public static String <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> return <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Deprecated </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Deprecated </a> 
<a> public void <RARE_TOKEN> ( boolean value ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( value ) ; </a> 
<a> } </a> 
<a> @ Deprecated </a> 
<a> public boolean <RARE_TOKEN> ( final Context context ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( context , <RARE_TOKEN> ) ; </a> 
<a> return false ; </a> 
<a> } </a> 
<a> public static interface <RARE_TOKEN> { </a> 
<a> public void <RARE_TOKEN> ( Bundle values ) ; </a> 
<a> public void <RARE_TOKEN> ( FacebookError e ) ; </a> 
<a> public void onError ( <RARE_TOKEN> e ) ; </a> 
<a> public void <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> public static interface <RARE_TOKEN> { </a> 
<a> public void <RARE_TOKEN> ( Bundle values ) ; </a> 
<a> public void <RARE_TOKEN> ( FacebookError e ) ; </a> 
<a> public void onError ( Error e ) ; </a> 
<a> } </a> 
<a> @ Deprecated </a> 
<a> public static final String <RARE_TOKEN> = </a> 
<a> <RARE_TOKEN> </a> 
<a> + <RARE_TOKEN> </a> 
<a> + <RARE_TOKEN> </a> 
<a> + <RARE_TOKEN> </a> 
<a> + <RARE_TOKEN> </a> 
<a> + <RARE_TOKEN> </a> 
<a> + <RARE_TOKEN> </a> 
<a> + <RARE_TOKEN> </a> 
<a> + <RARE_TOKEN> </a> 
<a> + <RARE_TOKEN> </a> 
<a> + <RARE_TOKEN> </a> 
<a> + <RARE_TOKEN> </a> 
<a> + <RARE_TOKEN> </a> 
<a> + <RARE_TOKEN> </a> 
<a> + <RARE_TOKEN> </a> 
<a> + <RARE_TOKEN> </a> 
<a> + <RARE_TOKEN> </a> 
<a> + <RARE_TOKEN> </a> 
<a> + <RARE_TOKEN> </a> 
<a> + <RARE_TOKEN> ; </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package com . facebook . android ; </a> 
<a> public class FacebookError extends <RARE_TOKEN> { </a> 
<a> private static final long serialVersionUID = <RARE_TOKEN> ; </a> 
<a> private int <RARE_TOKEN> = 0 ; </a> 
<a> private String <RARE_TOKEN> ; </a> 
<a> @ Deprecated </a> 
<a> public FacebookError ( String message ) { </a> 
<a> super ( message ) ; </a> 
<a> } </a> 
<a> @ Deprecated </a> 
<a> public FacebookError ( String message , String type , int code ) { </a> 
<a> super ( message ) ; </a> 
<a> <RARE_TOKEN> = type ; </a> 
<a> <RARE_TOKEN> = code ; </a> 
<a> } </a> 
<a> @ Deprecated </a> 
<a> public int <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Deprecated </a> 
<a> public String <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package com . facebook . android ; </a> 
<a> import android . content . Context ; </a> 
<a> import android . os . Bundle ; </a> 
<a> import com . facebook . * ; </a> 
<a> import com . facebook . android . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import com . facebook . widget . <RARE_TOKEN> ; </a> 
<a> @ Deprecated </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> public <RARE_TOKEN> ( Context context , String url , <RARE_TOKEN> listener ) { </a> 
<a> this ( context , url , listener , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( Context context , String url , <RARE_TOKEN> listener , int <RARE_TOKEN> ) { </a> 
<a> super ( context , url , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( listener ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( Context context , String action , Bundle parameters , <RARE_TOKEN> listener ) { </a> 
<a> super ( context , action , parameters , <RARE_TOKEN> , null ) ; </a> 
<a> <RARE_TOKEN> ( listener ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( Context context , String action , Bundle parameters , <RARE_TOKEN> listener , </a> 
<a> int <RARE_TOKEN> ) { </a> 
<a> super ( context , action , parameters , <RARE_TOKEN> , null ) ; </a> 
<a> <RARE_TOKEN> ( listener ) ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( <RARE_TOKEN> listener ) { </a> 
<a> this . <RARE_TOKEN> = listener ; </a> 
<a> <RARE_TOKEN> ( new <RARE_TOKEN> ( ) { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( Bundle values , FacebookException error ) { </a> 
<a> <RARE_TOKEN> ( values , error ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( Bundle values , FacebookException error ) { </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> return ; </a> 
<a> } </a> 
<a> if ( values != null ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( values ) ; </a> 
<a> } else { </a> 
<a> if ( error instanceof <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = ( <RARE_TOKEN> ) error ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( <RARE_TOKEN> . getMessage ( ) , </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) , <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> <RARE_TOKEN> . onError ( <RARE_TOKEN> ) ; </a> 
<a> } else if ( error instanceof <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> } else { </a> 
<a> FacebookError <RARE_TOKEN> = new FacebookError ( error . getMessage ( ) ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package com . facebook . android ; </a> 
<a> import android . app . <RARE_TOKEN> . Builder ; </a> 
<a> import android . content . Context ; </a> 
<a> import android . os . Bundle ; </a> 
<a> import com . facebook . internal . Utility ; </a> 
<a> import org . json . JSONException ; </a> 
<a> import org . json . JSONObject ; </a> 
<a> import java . io . * ; </a> 
<a> import java . net . * ; </a> 
<a> public final class Util { </a> 
<a> private final static String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> @ Deprecated </a> 
<a> public static String <RARE_TOKEN> ( Bundle parameters , String <RARE_TOKEN> ) { </a> 
<a> if ( parameters == null ) return "" ; </a> 
<a> StringBuilder sb = new StringBuilder ( ) ; </a> 
<a> for ( String key : parameters . <RARE_TOKEN> ( ) ) { </a> 
<a> Object <RARE_TOKEN> = parameters . get ( key ) ; </a> 
<a> if ( ! ( <RARE_TOKEN> instanceof String ) ) { </a> 
<a> continue ; </a> 
<a> } </a> 
<a> sb . append ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> + key + </a> 
<a> <RARE_TOKEN> + ( String ) <RARE_TOKEN> ) ; </a> 
<a> sb . append ( <RARE_TOKEN> + <RARE_TOKEN> + <RARE_TOKEN> + <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> return sb . toString ( ) ; </a> 
<a> } </a> 
<a> @ Deprecated </a> 
<a> public static String <RARE_TOKEN> ( Bundle parameters ) { </a> 
<a> if ( parameters == null ) { </a> 
<a> return "" ; </a> 
<a> } </a> 
<a> StringBuilder sb = new StringBuilder ( ) ; </a> 
<a> boolean <RARE_TOKEN> = true ; </a> 
<a> for ( String key : parameters . <RARE_TOKEN> ( ) ) { </a> 
<a> Object <RARE_TOKEN> = parameters . get ( key ) ; </a> 
<a> if ( ! ( <RARE_TOKEN> instanceof String ) ) { </a> 
<a> continue ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> ) <RARE_TOKEN> = false ; else sb . append ( <RARE_TOKEN> ) ; </a> 
<a> sb . append ( <RARE_TOKEN> . encode ( key ) + <RARE_TOKEN> + </a> 
<a> <RARE_TOKEN> . encode ( parameters . getString ( key ) ) ) ; </a> 
<a> } </a> 
<a> return sb . toString ( ) ; </a> 
<a> } </a> 
<a> @ Deprecated </a> 
<a> public static Bundle <RARE_TOKEN> ( String s ) { </a> 
<a> Bundle params = new Bundle ( ) ; </a> 
<a> if ( s != null ) { </a> 
<a> String array [ ] = s . split ( <RARE_TOKEN> ) ; </a> 
<a> for ( String <RARE_TOKEN> : array ) { </a> 
<a> String v [ ] = <RARE_TOKEN> . split ( <RARE_TOKEN> ) ; </a> 
<a> try { </a> 
<a> if ( v . length == 2 ) { </a> 
<a> params . putString ( <RARE_TOKEN> . decode ( v [ 0 ] , <RARE_TOKEN> ) , </a> 
<a> <RARE_TOKEN> . decode ( v [ 1 ] , <RARE_TOKEN> ) ) ; </a> 
<a> } else if ( v . length == 1 ) { </a> 
<a> params . putString ( <RARE_TOKEN> . decode ( v [ 0 ] , <RARE_TOKEN> ) , "" ) ; </a> 
<a> } </a> 
<a> } catch ( <RARE_TOKEN> e ) { </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> return params ; </a> 
<a> } </a> 
<a> @ Deprecated </a> 
<a> public static Bundle <RARE_TOKEN> ( String url ) { </a> 
<a> url = url . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> try { </a> 
<a> URL <RARE_TOKEN> = new URL ( url ) ; </a> 
<a> Bundle b = <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> b . <RARE_TOKEN> ( <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ) ; </a> 
<a> return b ; </a> 
<a> } catch ( <RARE_TOKEN> e ) { </a> 
<a> return new Bundle ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Deprecated </a> 
<a> public static String <RARE_TOKEN> ( String url , String method , Bundle params ) </a> 
<a> throws <RARE_TOKEN> , IOException { </a> 
<a> String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> OutputStream os ; </a> 
<a> if ( method . equals ( <RARE_TOKEN> ) ) { </a> 
<a> url = url + <RARE_TOKEN> + <RARE_TOKEN> ( params ) ; </a> 
<a> } </a> 
<a> Utility . <RARE_TOKEN> ( <RARE_TOKEN> , method + " <RARE_TOKEN> " + url ) ; </a> 
<a> HttpURLConnection <RARE_TOKEN> = </a> 
<a> ( HttpURLConnection ) new URL ( url ) . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> , System . <RARE_TOKEN> ( ) . </a> 
<a> getProperty ( <RARE_TOKEN> ) + " <RARE_TOKEN> ) ; </a> 
<a> if ( ! method . equals ( <RARE_TOKEN> ) ) { </a> 
<a> Bundle <RARE_TOKEN> = new Bundle ( ) ; </a> 
<a> for ( String key : params . <RARE_TOKEN> ( ) ) { </a> 
<a> Object <RARE_TOKEN> = params . get ( key ) ; </a> 
<a> if ( <RARE_TOKEN> instanceof byte [ ] ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( key , ( byte [ ] ) <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> if ( ! params . containsKey ( <RARE_TOKEN> ) ) { </a> 
<a> params . putString ( <RARE_TOKEN> , method ) ; </a> 
<a> } </a> 
<a> if ( params . containsKey ( <RARE_TOKEN> ) ) { </a> 
<a> String <RARE_TOKEN> = </a> 
<a> <RARE_TOKEN> . decode ( params . getString ( <RARE_TOKEN> ) ) ; </a> 
<a> params . putString ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( </a> 
<a> <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> + <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( true ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( true ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . connect ( ) ; </a> 
<a> os = new <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> os . write ( ( <RARE_TOKEN> + <RARE_TOKEN> + <RARE_TOKEN> ) . getBytes ( ) ) ; </a> 
<a> os . write ( ( <RARE_TOKEN> ( params , <RARE_TOKEN> ) ) . getBytes ( ) ) ; </a> 
<a> os . write ( ( <RARE_TOKEN> + <RARE_TOKEN> + <RARE_TOKEN> + <RARE_TOKEN> ) . getBytes ( ) ) ; </a> 
<a> if ( ! <RARE_TOKEN> . isEmpty ( ) ) { </a> 
<a> for ( String key : <RARE_TOKEN> . <RARE_TOKEN> ( ) ) { </a> 
<a> os . write ( ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> + key + <RARE_TOKEN> + <RARE_TOKEN> ) . getBytes ( ) ) ; </a> 
<a> os . write ( ( <RARE_TOKEN> <RARE_TOKEN> + <RARE_TOKEN> + <RARE_TOKEN> ) . getBytes ( ) ) ; </a> 
<a> os . write ( <RARE_TOKEN> . <RARE_TOKEN> ( key ) ) ; </a> 
<a> os . write ( ( <RARE_TOKEN> + <RARE_TOKEN> + <RARE_TOKEN> + <RARE_TOKEN> ) . getBytes ( ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> os . flush ( ) ; </a> 
<a> } </a> 
<a> String response = "" ; </a> 
<a> try { </a> 
<a> response = read ( <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> } catch ( <RARE_TOKEN> e ) { </a> 
<a> response = read ( <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> return response ; </a> 
<a> } </a> 
<a> @ Deprecated </a> 
<a> private static String read ( InputStream in ) throws IOException { </a> 
<a> StringBuilder sb = new StringBuilder ( ) ; </a> 
<a> <RARE_TOKEN> r = new <RARE_TOKEN> ( new <RARE_TOKEN> ( in ) , 1000 ) ; </a> 
<a> for ( String <RARE_TOKEN> = r . <RARE_TOKEN> ( ) ; <RARE_TOKEN> != null ; <RARE_TOKEN> = r . <RARE_TOKEN> ( ) ) { </a> 
<a> sb . append ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> in . close ( ) ; </a> 
<a> return sb . toString ( ) ; </a> 
<a> } </a> 
<a> @ Deprecated </a> 
<a> public static JSONObject <RARE_TOKEN> ( String response ) </a> 
<a> throws JSONException , FacebookError { </a> 
<a> if ( response . equals ( <RARE_TOKEN> ) ) { </a> 
<a> throw new FacebookError ( <RARE_TOKEN> failed" ) ; </a> 
<a> } </a> 
<a> if ( response . equals ( <RARE_TOKEN> ) ) { </a> 
<a> response = <RARE_TOKEN> : <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> JSONObject json = new JSONObject ( response ) ; </a> 
<a> if ( json . has ( <RARE_TOKEN> ) ) { </a> 
<a> JSONObject error = json . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> throw new FacebookError ( </a> 
<a> error . getString ( "message" ) , error . getString ( <RARE_TOKEN> ) , 0 ) ; </a> 
<a> } </a> 
<a> if ( json . has ( <RARE_TOKEN> ) && json . has ( <RARE_TOKEN> ) ) { </a> 
<a> throw new FacebookError ( json . getString ( <RARE_TOKEN> ) , "" , </a> 
<a> Integer . parseInt ( json . getString ( <RARE_TOKEN> ) ) ) ; </a> 
<a> } </a> 
<a> if ( json . has ( <RARE_TOKEN> ) ) { </a> 
<a> throw new FacebookError ( <RARE_TOKEN> failed" , "" , </a> 
<a> Integer . parseInt ( json . getString ( <RARE_TOKEN> ) ) ) ; </a> 
<a> } </a> 
<a> if ( json . has ( <RARE_TOKEN> ) ) { </a> 
<a> throw new FacebookError ( json . getString ( <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> if ( json . has ( <RARE_TOKEN> ) ) { </a> 
<a> throw new FacebookError ( json . getString ( <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> return json ; </a> 
<a> } </a> 
<a> @ Deprecated </a> 
<a> public static void <RARE_TOKEN> ( Context context , String <RARE_TOKEN> , String text ) { </a> 
<a> Builder <RARE_TOKEN> = new Builder ( context ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( text ) ; </a> 
<a> <RARE_TOKEN> . create ( ) . show ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package com . facebook . internal ; </a> 
<a> import com . facebook . Request ; </a> 
<a> import com . facebook . RequestBatch ; </a> 
<a> public class <RARE_TOKEN> extends RequestBatch { </a> 
<a> private String <RARE_TOKEN> ; </a> 
<a> private boolean <RARE_TOKEN> ; </a> 
<a> public <RARE_TOKEN> ( ) { </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( Request ... requests ) { </a> 
<a> super ( requests ) ; </a> 
<a> } </a> 
<a> public final String <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public final void <RARE_TOKEN> ( String <RARE_TOKEN> ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public final boolean <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public final void <RARE_TOKEN> ( boolean <RARE_TOKEN> ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package com . facebook . internal ; </a> 
<a> import android . content . Context ; </a> 
<a> import android . util . Log ; </a> 
<a> import com . facebook . LoggingBehavior ; </a> 
<a> import com . facebook . <RARE_TOKEN> ; </a> 
<a> import org . json . JSONException ; </a> 
<a> import org . json . JSONObject ; </a> 
<a> import org . json . <RARE_TOKEN> ; </a> 
<a> import java . io . * ; </a> 
<a> import java . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import java . util . Date ; </a> 
<a> import java . util . <RARE_TOKEN> ; </a> 
<a> import java . util . concurrent . atomic . <RARE_TOKEN> ; </a> 
<a> public final class FileLruCache { </a> 
<a> static final String TAG = FileLruCache . class . getSimpleName ( ) ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( ) ; </a> 
<a> private final String <RARE_TOKEN> ; </a> 
<a> private final <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> private final File <RARE_TOKEN> ; </a> 
<a> private boolean <RARE_TOKEN> ; </a> 
<a> private final Object lock ; </a> 
<a> public FileLruCache ( Context context , String <RARE_TOKEN> , <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> this . <RARE_TOKEN> = new File ( context . <RARE_TOKEN> ( ) , <RARE_TOKEN> ) ; </a> 
<a> this . lock = new Object ( ) ; </a> 
<a> this . <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( this . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( ) throws IOException { </a> 
<a> for ( File file : this . <RARE_TOKEN> . <RARE_TOKEN> ( ) ) { </a> 
<a> file . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> long <RARE_TOKEN> ( ) { </a> 
<a> synchronized ( lock ) { </a> 
<a> while ( <RARE_TOKEN> ) { </a> 
<a> try { </a> 
<a> lock . <RARE_TOKEN> ( ) ; </a> 
<a> } catch ( InterruptedException e ) { </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> File [ ] <RARE_TOKEN> = this . <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> long <RARE_TOKEN> = 0 ; </a> 
<a> for ( File file : <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> += file . length ( ) ; </a> 
<a> } </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public InputStream get ( String key ) throws IOException { </a> 
<a> return get ( key , null ) ; </a> 
<a> } </a> 
<a> public InputStream get ( String key , String <RARE_TOKEN> ) throws IOException { </a> 
<a> File file = new File ( this . <RARE_TOKEN> , Utility . <RARE_TOKEN> ( key ) ) ; </a> 
<a> <RARE_TOKEN> input = null ; </a> 
<a> try { </a> 
<a> input = new <RARE_TOKEN> ( file ) ; </a> 
<a> } catch ( IOException e ) { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( input , Utility . <RARE_TOKEN> ) ; </a> 
<a> boolean success = false ; </a> 
<a> try { </a> 
<a> JSONObject header = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> if ( header == null ) { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> String <RARE_TOKEN> = header . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> if ( ( <RARE_TOKEN> == null ) || ! <RARE_TOKEN> . equals ( key ) ) { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> String <RARE_TOKEN> = header . <RARE_TOKEN> ( <RARE_TOKEN> , null ) ; </a> 
<a> if ( ( <RARE_TOKEN> == null && <RARE_TOKEN> != null ) || </a> 
<a> ( <RARE_TOKEN> != null && ! <RARE_TOKEN> . equals ( <RARE_TOKEN> ) ) ) { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> long <RARE_TOKEN> = new Date ( ) . getTime ( ) ; </a> 
<a> Logger . log ( LoggingBehavior . <RARE_TOKEN> , TAG , <RARE_TOKEN> <RARE_TOKEN> to " + Long . valueOf ( <RARE_TOKEN> ) + " for " </a> 
<a> + file . getName ( ) ) ; </a> 
<a> file . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> success = true ; </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } finally { </a> 
<a> if ( ! success ) { </a> 
<a> <RARE_TOKEN> . close ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> OutputStream <RARE_TOKEN> ( final String key ) throws IOException { </a> 
<a> return <RARE_TOKEN> ( key , null ) ; </a> 
<a> } </a> 
<a> public OutputStream <RARE_TOKEN> ( final String key , String <RARE_TOKEN> ) throws IOException { </a> 
<a> final File buffer = <RARE_TOKEN> . <RARE_TOKEN> ( this . <RARE_TOKEN> ) ; </a> 
<a> buffer . <RARE_TOKEN> ( ) ; </a> 
<a> if ( ! buffer . <RARE_TOKEN> ( ) ) { </a> 
<a> throw new IOException ( <RARE_TOKEN> not create file <RARE_TOKEN> " + buffer . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> file = null ; </a> 
<a> try { </a> 
<a> file = new <RARE_TOKEN> ( buffer ) ; </a> 
<a> } catch ( <RARE_TOKEN> e ) { </a> 
<a> Logger . log ( LoggingBehavior . <RARE_TOKEN> , Log . <RARE_TOKEN> , TAG , <RARE_TOKEN> <RARE_TOKEN> buffer output <RARE_TOKEN> " + e ) ; </a> 
<a> throw new IOException ( e . getMessage ( ) ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( ) { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> ( key , buffer ) ; </a> 
<a> } </a> 
<a> } ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( file , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( <RARE_TOKEN> , Utility . <RARE_TOKEN> ) ; </a> 
<a> boolean success = false ; </a> 
<a> try { </a> 
<a> JSONObject header = new JSONObject ( ) ; </a> 
<a> header . put ( <RARE_TOKEN> , key ) ; </a> 
<a> if ( ! Utility . <RARE_TOKEN> ( <RARE_TOKEN> ) ) { </a> 
<a> header . put ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> , header ) ; </a> 
<a> success = true ; </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } catch ( JSONException e ) { </a> 
<a> Logger . log ( LoggingBehavior . <RARE_TOKEN> , Log . <RARE_TOKEN> , TAG , <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> header for cache <RARE_TOKEN> " + e ) ; </a> 
<a> throw new IOException ( e . getMessage ( ) ) ; </a> 
<a> } finally { </a> 
<a> if ( ! success ) { </a> 
<a> <RARE_TOKEN> . close ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( String key , File buffer ) { </a> 
<a> final File <RARE_TOKEN> = new File ( <RARE_TOKEN> , Utility . <RARE_TOKEN> ( key ) ) ; </a> 
<a> if ( ! buffer . <RARE_TOKEN> ( <RARE_TOKEN> ) ) { </a> 
<a> buffer . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> public InputStream <RARE_TOKEN> ( String key , InputStream input ) throws IOException { </a> 
<a> OutputStream output = <RARE_TOKEN> ( key ) ; </a> 
<a> return new <RARE_TOKEN> ( input , output ) ; </a> 
<a> } </a> 
<a> public String toString ( ) { </a> 
<a> return <RARE_TOKEN> + " <RARE_TOKEN> + this . <RARE_TOKEN> + " <RARE_TOKEN> + this . <RARE_TOKEN> . getName ( ) + <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( ) { </a> 
<a> synchronized ( lock ) { </a> 
<a> if ( ! <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> = true ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) . execute ( new Runnable ( ) { </a> 
<a> @ Override </a> 
<a> public void run ( ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( ) { </a> 
<a> try { </a> 
<a> Logger . log ( LoggingBehavior . <RARE_TOKEN> , TAG , <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> < <RARE_TOKEN> > <RARE_TOKEN> = new <RARE_TOKEN> < <RARE_TOKEN> > ( ) ; </a> 
<a> long size = 0 ; </a> 
<a> long count = 0 ; </a> 
<a> for ( File file : this . <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ) { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( file ) ; </a> 
<a> <RARE_TOKEN> . add ( <RARE_TOKEN> ) ; </a> 
<a> Logger . log ( LoggingBehavior . <RARE_TOKEN> , TAG , " <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> + Long . valueOf ( <RARE_TOKEN> . <RARE_TOKEN> ( ) ) </a> 
<a> + " <RARE_TOKEN> + <RARE_TOKEN> . <RARE_TOKEN> ( ) . getName ( ) ) ; </a> 
<a> size += file . length ( ) ; </a> 
<a> count ++ ; </a> 
<a> } </a> 
<a> while ( ( size > <RARE_TOKEN> . <RARE_TOKEN> ( ) ) || ( count > <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ) { </a> 
<a> File file = <RARE_TOKEN> . remove ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> Logger . log ( LoggingBehavior . <RARE_TOKEN> , TAG , " <RARE_TOKEN> <RARE_TOKEN> " + file . getName ( ) ) ; </a> 
<a> size -= file . length ( ) ; </a> 
<a> count -- ; </a> 
<a> file . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } finally { </a> 
<a> synchronized ( lock ) { </a> 
<a> <RARE_TOKEN> = false ; </a> 
<a> lock . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> private static class <RARE_TOKEN> { </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( ) { </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( File <RARE_TOKEN> , String <RARE_TOKEN> ) { </a> 
<a> return ! <RARE_TOKEN> . startsWith ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } ; </a> 
<a> private static final <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( ) { </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( File <RARE_TOKEN> , String <RARE_TOKEN> ) { </a> 
<a> return <RARE_TOKEN> . startsWith ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } ; </a> 
<a> static void <RARE_TOKEN> ( final File <RARE_TOKEN> ) { </a> 
<a> for ( File file : <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ( ) ) ) { </a> 
<a> file . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> static <RARE_TOKEN> <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> static <RARE_TOKEN> <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> static File <RARE_TOKEN> ( final File <RARE_TOKEN> ) { </a> 
<a> String name = <RARE_TOKEN> + Long . valueOf ( <RARE_TOKEN> . <RARE_TOKEN> ( ) ) . toString ( ) ; </a> 
<a> return new File ( <RARE_TOKEN> , name ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private static final class <RARE_TOKEN> { </a> 
<a> private static final int <RARE_TOKEN> = 0 ; </a> 
<a> static void <RARE_TOKEN> ( OutputStream stream , JSONObject header ) throws IOException { </a> 
<a> String <RARE_TOKEN> = header . toString ( ) ; </a> 
<a> byte [ ] <RARE_TOKEN> = <RARE_TOKEN> . getBytes ( ) ; </a> 
<a> stream . write ( <RARE_TOKEN> ) ; </a> 
<a> stream . write ( ( <RARE_TOKEN> . length > > 16 ) & 0xff ) ; </a> 
<a> stream . write ( ( <RARE_TOKEN> . length > > 8 ) & 0xff ) ; </a> 
<a> stream . write ( ( <RARE_TOKEN> . length > > 0 ) & 0xff ) ; </a> 
<a> stream . write ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> static JSONObject <RARE_TOKEN> ( InputStream stream ) throws IOException { </a> 
<a> int version = stream . read ( ) ; </a> 
<a> if ( version != <RARE_TOKEN> ) { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> int <RARE_TOKEN> = 0 ; </a> 
<a> for ( int i = 0 ; i < 3 ; i ++ ) { </a> 
<a> int b = stream . read ( ) ; </a> 
<a> if ( b == - 1 ) { </a> 
<a> Logger . log ( LoggingBehavior . <RARE_TOKEN> , TAG , </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> while <RARE_TOKEN> header <RARE_TOKEN> ) ; </a> 
<a> return null ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> 8 ; </a> 
<a> <RARE_TOKEN> += b & 0xff ; </a> 
<a> } </a> 
<a> byte [ ] <RARE_TOKEN> = new byte [ <RARE_TOKEN> ] ; </a> 
<a> int count = 0 ; </a> 
<a> while ( count < <RARE_TOKEN> . length ) { </a> 
<a> int <RARE_TOKEN> = stream . read ( <RARE_TOKEN> , count , <RARE_TOKEN> . length - count ) ; </a> 
<a> if ( <RARE_TOKEN> < 1 ) { </a> 
<a> Logger . log ( LoggingBehavior . <RARE_TOKEN> , TAG , </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> " + Integer . valueOf ( count ) + " <RARE_TOKEN> expected " </a> 
<a> + <RARE_TOKEN> . length ) ; </a> 
<a> return null ; </a> 
<a> } </a> 
<a> count += <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> String <RARE_TOKEN> = new String ( <RARE_TOKEN> ) ; </a> 
<a> JSONObject header = null ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> try { </a> 
<a> Object <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> if ( ! ( <RARE_TOKEN> instanceof JSONObject ) ) { </a> 
<a> Logger . log ( LoggingBehavior . <RARE_TOKEN> , TAG , <RARE_TOKEN> expected <RARE_TOKEN> <RARE_TOKEN> " + <RARE_TOKEN> . getClass ( ) . <RARE_TOKEN> ( ) ) ; </a> 
<a> return null ; </a> 
<a> } </a> 
<a> header = ( JSONObject ) <RARE_TOKEN> ; </a> 
<a> } catch ( JSONException e ) { </a> 
<a> throw new IOException ( e . getMessage ( ) ) ; </a> 
<a> } </a> 
<a> return header ; </a> 
<a> } </a> 
<a> } </a> 
<a> private static class <RARE_TOKEN> extends OutputStream { </a> 
<a> final OutputStream <RARE_TOKEN> ; </a> 
<a> final <RARE_TOKEN> callback ; </a> 
<a> <RARE_TOKEN> ( OutputStream <RARE_TOKEN> , <RARE_TOKEN> callback ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> this . callback = callback ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void close ( ) throws IOException { </a> 
<a> try { </a> 
<a> this . <RARE_TOKEN> . close ( ) ; </a> 
<a> } finally { </a> 
<a> this . callback . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void flush ( ) throws IOException { </a> 
<a> this . <RARE_TOKEN> . flush ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void write ( byte [ ] buffer , int offset , int count ) throws IOException { </a> 
<a> this . <RARE_TOKEN> . write ( buffer , offset , count ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void write ( byte [ ] buffer ) throws IOException { </a> 
<a> this . <RARE_TOKEN> . write ( buffer ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void write ( int <RARE_TOKEN> ) throws IOException { </a> 
<a> this . <RARE_TOKEN> . write ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private static final class <RARE_TOKEN> extends InputStream { </a> 
<a> final InputStream input ; </a> 
<a> final OutputStream output ; </a> 
<a> <RARE_TOKEN> ( final InputStream input , final OutputStream output ) { </a> 
<a> this . input = input ; </a> 
<a> this . output = output ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int <RARE_TOKEN> ( ) throws IOException { </a> 
<a> return input . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void close ( ) throws IOException { </a> 
<a> try { </a> 
<a> this . input . close ( ) ; </a> 
<a> } finally { </a> 
<a> this . output . close ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( int <RARE_TOKEN> ) { </a> 
<a> throw new UnsupportedOperationException ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int read ( byte [ ] buffer ) throws IOException { </a> 
<a> int count = input . read ( buffer ) ; </a> 
<a> if ( count > 0 ) { </a> 
<a> output . write ( buffer , 0 , count ) ; </a> 
<a> } </a> 
<a> return count ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int read ( ) throws IOException { </a> 
<a> int b = input . read ( ) ; </a> 
<a> if ( b >= 0 ) { </a> 
<a> output . write ( b ) ; </a> 
<a> } </a> 
<a> return b ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int read ( byte [ ] buffer , int offset , int length ) throws IOException { </a> 
<a> int count = input . read ( buffer , offset , length ) ; </a> 
<a> if ( count > 0 ) { </a> 
<a> output . write ( buffer , offset , count ) ; </a> 
<a> } </a> 
<a> return count ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public synchronized void <RARE_TOKEN> ( ) { </a> 
<a> throw new UnsupportedOperationException ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public long <RARE_TOKEN> ( long <RARE_TOKEN> ) throws IOException { </a> 
<a> byte [ ] buffer = new byte [ <RARE_TOKEN> ] ; </a> 
<a> long <RARE_TOKEN> = 0 ; </a> 
<a> while ( <RARE_TOKEN> < <RARE_TOKEN> ) { </a> 
<a> int count = read ( buffer , 0 , ( int ) Math . min ( <RARE_TOKEN> - <RARE_TOKEN> , buffer . length ) ) ; </a> 
<a> if ( count < 0 ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> += count ; </a> 
<a> } </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<a> public static final class <RARE_TOKEN> { </a> 
<a> private int <RARE_TOKEN> ; </a> 
<a> private int <RARE_TOKEN> ; </a> 
<a> public <RARE_TOKEN> ( ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> * <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> int <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> int <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> void <RARE_TOKEN> ( int n ) { </a> 
<a> if ( n < 0 ) { </a> 
<a> throw new <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> limit must be >= <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> = n ; </a> 
<a> } </a> 
<a> void <RARE_TOKEN> ( int n ) { </a> 
<a> if ( n < 0 ) { </a> 
<a> throw new <RARE_TOKEN> ( <RARE_TOKEN> file count limit must be >= <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> = n ; </a> 
<a> } </a> 
<a> } </a> 
<a> private final static class <RARE_TOKEN> implements <RARE_TOKEN> < <RARE_TOKEN> > { </a> 
<a> private final File file ; </a> 
<a> private final long <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> ( File file ) { </a> 
<a> this . file = file ; </a> 
<a> this . <RARE_TOKEN> = file . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> File <RARE_TOKEN> ( ) { </a> 
<a> return file ; </a> 
<a> } </a> 
<a> long <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> if ( <RARE_TOKEN> ( ) < <RARE_TOKEN> . <RARE_TOKEN> ( ) ) { </a> 
<a> return - 1 ; </a> 
<a> } else if ( <RARE_TOKEN> ( ) > <RARE_TOKEN> . <RARE_TOKEN> ( ) ) { </a> 
<a> return 1 ; </a> 
<a> } else { </a> 
<a> return <RARE_TOKEN> ( ) . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean equals ( Object <RARE_TOKEN> ) { </a> 
<a> return </a> 
<a> ( <RARE_TOKEN> instanceof <RARE_TOKEN> ) && </a> 
<a> ( <RARE_TOKEN> ( ( <RARE_TOKEN> ) <RARE_TOKEN> ) == 0 ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private interface <RARE_TOKEN> { </a> 
<a> void <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package com . facebook . internal ; </a> 
<a> import com . facebook . internal . Utility ; </a> 
<a> import java . util . Collection ; </a> 
<a> public final class <RARE_TOKEN> { </a> 
<a> static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> public static final String <RARE_TOKEN> = <RARE_TOKEN> + <RARE_TOKEN> ; </a> 
<a> public static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> public static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> public static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> public static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> public static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> public static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> public static final String <RARE_TOKEN> = <RARE_TOKEN> + <RARE_TOKEN> ; </a> 
<a> public static final String <RARE_TOKEN> = <RARE_TOKEN> + <RARE_TOKEN> + "/" ; </a> 
<a> public static final String <RARE_TOKEN> = <RARE_TOKEN> + <RARE_TOKEN> + <RARE_TOKEN> ; </a> 
<a> public static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> public static final Collection < String > <RARE_TOKEN> = </a> 
<a> Utility . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> public static final Collection < String > <RARE_TOKEN> = </a> 
<a> Utility . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package com . facebook . internal ; </a> 
<a> public enum <RARE_TOKEN> { </a> 
<a> <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package com . facebook . internal ; </a> 
<a> import android . content . <RARE_TOKEN> ; </a> 
<a> import android . content . Context ; </a> 
<a> import android . content . Intent ; </a> 
<a> import android . content . <RARE_TOKEN> ; </a> 
<a> import android . support . v4 . content . <RARE_TOKEN> ; </a> 
<a> import com . facebook . Session ; </a> 
<a> import com . facebook . SessionState ; </a> 
<a> public class <RARE_TOKEN> { </a> 
<a> private Session session ; </a> 
<a> private final Session . StatusCallback callback ; </a> 
<a> private final <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> private final <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> private boolean <RARE_TOKEN> = false ; </a> 
<a> public <RARE_TOKEN> ( Context context , Session . StatusCallback callback ) { </a> 
<a> this ( context , callback , null ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( Context context , Session . StatusCallback callback , Session session ) { </a> 
<a> this ( context , callback , session , true ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( Context context , Session . StatusCallback callback , Session session , boolean <RARE_TOKEN> ) { </a> 
<a> this . callback = new <RARE_TOKEN> ( callback ) ; </a> 
<a> this . session = session ; </a> 
<a> this . <RARE_TOKEN> = new <RARE_TOKEN> ( ) ; </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> . getInstance ( context ) ; </a> 
<a> if ( <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public Session getSession ( ) { </a> 
<a> return ( session == null ) ? Session . getActiveSession ( ) : session ; </a> 
<a> } </a> 
<a> public Session <RARE_TOKEN> ( ) { </a> 
<a> Session <RARE_TOKEN> = getSession ( ) ; </a> 
<a> if ( <RARE_TOKEN> != null && <RARE_TOKEN> . isOpened ( ) ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> return null ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( Session <RARE_TOKEN> ) { </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> if ( session != null ) { </a> 
<a> session . <RARE_TOKEN> ( callback ) ; </a> 
<a> session = null ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> if ( getSession ( ) != null ) { </a> 
<a> getSession ( ) . <RARE_TOKEN> ( callback ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } else { </a> 
<a> if ( session == null ) { </a> 
<a> Session <RARE_TOKEN> = Session . getActiveSession ( ) ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( callback ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } else { </a> 
<a> session . <RARE_TOKEN> ( callback ) ; </a> 
<a> } </a> 
<a> session = <RARE_TOKEN> ; </a> 
<a> session . <RARE_TOKEN> ( callback ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> if ( <RARE_TOKEN> ) { </a> 
<a> return ; </a> 
<a> } </a> 
<a> if ( this . session == null ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> if ( getSession ( ) != null ) { </a> 
<a> getSession ( ) . <RARE_TOKEN> ( callback ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> = true ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> if ( ! <RARE_TOKEN> ) { </a> 
<a> return ; </a> 
<a> } </a> 
<a> Session session = getSession ( ) ; </a> 
<a> if ( session != null ) { </a> 
<a> session . <RARE_TOKEN> ( callback ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = false ; </a> 
<a> } </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return session == null ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> filter = new <RARE_TOKEN> ( ) ; </a> 
<a> filter . <RARE_TOKEN> ( Session . <RARE_TOKEN> ) ; </a> 
<a> filter . <RARE_TOKEN> ( Session . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> , filter ) ; </a> 
<a> } </a> 
<a> private class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( Context context , Intent intent ) { </a> 
<a> if ( Session . <RARE_TOKEN> . equals ( intent . <RARE_TOKEN> ( ) ) ) { </a> 
<a> Session session = Session . getActiveSession ( ) ; </a> 
<a> if ( session != null ) { </a> 
<a> session . <RARE_TOKEN> ( <RARE_TOKEN> . this . callback ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> private class <RARE_TOKEN> implements Session . StatusCallback { </a> 
<a> private final Session . StatusCallback <RARE_TOKEN> ; </a> 
<a> public <RARE_TOKEN> ( Session . StatusCallback <RARE_TOKEN> ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( Session session , SessionState state , Exception exception ) { </a> 
<a> if ( <RARE_TOKEN> != null && <RARE_TOKEN> ( ) ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( session , state , exception ) ; </a> 
<a> } </a> 
<a> if ( session == <RARE_TOKEN> . this . session && state . <RARE_TOKEN> ( ) ) { </a> 
<a> <RARE_TOKEN> ( null ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package com . facebook . internal ; </a> 
<a> import java . util . Collection ; </a> 
<a> public final class Validate { </a> 
<a> public static void <RARE_TOKEN> ( Object <RARE_TOKEN> , String name ) { </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> " + name + " <RARE_TOKEN> be <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public static < T > void <RARE_TOKEN> ( Collection < T > container , String name ) { </a> 
<a> if ( container . isEmpty ( ) ) { </a> 
<a> throw new IllegalArgumentException ( <RARE_TOKEN> <RARE_TOKEN> + name + <RARE_TOKEN> <RARE_TOKEN> be <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public static < T > void <RARE_TOKEN> ( Collection < T > container , String name ) { </a> 
<a> Validate . <RARE_TOKEN> ( container , name ) ; </a> 
<a> for ( T <RARE_TOKEN> : container ) { </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> <RARE_TOKEN> + name + <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> null <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> public static < T > void <RARE_TOKEN> ( Collection < T > container , String name ) { </a> 
<a> Validate . <RARE_TOKEN> ( container , name ) ; </a> 
<a> Validate . <RARE_TOKEN> ( container , name ) ; </a> 
<a> } </a> 
<a> public static void <RARE_TOKEN> ( String <RARE_TOKEN> , String name ) { </a> 
<a> if ( Utility . <RARE_TOKEN> ( <RARE_TOKEN> ) ) { </a> 
<a> throw new IllegalArgumentException ( <RARE_TOKEN> " + name + " <RARE_TOKEN> be null or <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public static void <RARE_TOKEN> ( Object <RARE_TOKEN> , String name , Object ... values ) { </a> 
<a> for ( Object value : values ) { </a> 
<a> if ( value != null ) { </a> 
<a> if ( value . equals ( <RARE_TOKEN> ) ) { </a> 
<a> return ; </a> 
<a> } </a> 
<a> } else { </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> return ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> throw new IllegalArgumentException ( <RARE_TOKEN> " + name + " <RARE_TOKEN> not one of the <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package com . facebook . model ; </a> 
<a> public interface <RARE_TOKEN> extends GraphObject { </a> 
<a> public String <RARE_TOKEN> ( ) ; </a> 
<a> public void <RARE_TOKEN> ( String <RARE_TOKEN> ) ; </a> 
<a> public String <RARE_TOKEN> ( ) ; </a> 
<a> public void <RARE_TOKEN> ( String <RARE_TOKEN> ) ; </a> 
<a> public String <RARE_TOKEN> ( ) ; </a> 
<a> public void <RARE_TOKEN> ( String state ) ; </a> 
<a> public String <RARE_TOKEN> ( ) ; </a> 
<a> public void <RARE_TOKEN> ( String <RARE_TOKEN> ) ; </a> 
<a> public String <RARE_TOKEN> ( ) ; </a> 
<a> public void <RARE_TOKEN> ( String <RARE_TOKEN> ) ; </a> 
<a> public double <RARE_TOKEN> ( ) ; </a> 
<a> public void <RARE_TOKEN> ( double <RARE_TOKEN> ) ; </a> 
<a> public double <RARE_TOKEN> ( ) ; </a> 
<a> public void <RARE_TOKEN> ( double <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package com . facebook . model ; </a> 
<a> public interface <RARE_TOKEN> extends GraphObject { </a> 
<a> public GraphObjectList < GraphObject > getData ( ) ; </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package com . facebook . model ; </a> 
<a> import com . facebook . <RARE_TOKEN> ; </a> 
<a> import com . facebook . internal . Utility ; </a> 
<a> import com . facebook . internal . Validate ; </a> 
<a> import org . json . JSONArray ; </a> 
<a> import org . json . JSONException ; </a> 
<a> import org . json . JSONObject ; </a> 
<a> import java . lang . <RARE_TOKEN> . * ; </a> 
<a> import java . text . <RARE_TOKEN> ; </a> 
<a> import java . text . <RARE_TOKEN> ; </a> 
<a> import java . util . * ; </a> 
<a> public interface GraphObject { </a> 
<a> public < T extends GraphObject > T cast ( Class < T > graphObjectClass ) ; </a> 
<a> public Map < String , Object > <RARE_TOKEN> ( ) ; </a> 
<a> public JSONObject <RARE_TOKEN> ( ) ; </a> 
<a> public Object getProperty ( String <RARE_TOKEN> ) ; </a> 
<a> public void setProperty ( String <RARE_TOKEN> , Object <RARE_TOKEN> ) ; </a> 
<a> public void <RARE_TOKEN> ( String <RARE_TOKEN> ) ; </a> 
<a> final class Factory { </a> 
<a> private static final HashSet < Class < ? > > <RARE_TOKEN> = new HashSet < Class < ? > > ( ) ; </a> 
<a> private static final <RARE_TOKEN> [ ] <RARE_TOKEN> = new <RARE_TOKEN> [ ] { </a> 
<a> new <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> ) , </a> 
<a> new <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> ) , new <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> ) , } ; </a> 
<a> private Factory ( ) { </a> 
<a> } </a> 
<a> public static GraphObject create ( JSONObject json ) { </a> 
<a> return create ( json , GraphObject . class ) ; </a> 
<a> } </a> 
<a> public static < T extends GraphObject > T create ( JSONObject json , Class < T > graphObjectClass ) { </a> 
<a> return <RARE_TOKEN> ( graphObjectClass , json ) ; </a> 
<a> } </a> 
<a> public static GraphObject create ( ) { </a> 
<a> return create ( GraphObject . class ) ; </a> 
<a> } </a> 
<a> public static < T extends GraphObject > T create ( Class < T > graphObjectClass ) { </a> 
<a> return <RARE_TOKEN> ( graphObjectClass , new JSONObject ( ) ) ; </a> 
<a> } </a> 
<a> public static boolean <RARE_TOKEN> ( GraphObject a , GraphObject b ) { </a> 
<a> if ( a == null || b == null || ! a . <RARE_TOKEN> ( ) . containsKey ( <RARE_TOKEN> ) || ! b . <RARE_TOKEN> ( ) . containsKey ( <RARE_TOKEN> ) ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> if ( a . equals ( b ) ) { </a> 
<a> return true ; </a> 
<a> } </a> 
<a> Object <RARE_TOKEN> = a . getProperty ( <RARE_TOKEN> ) ; </a> 
<a> Object <RARE_TOKEN> = b . getProperty ( <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> == null || <RARE_TOKEN> == null || ! ( <RARE_TOKEN> instanceof String ) || ! ( <RARE_TOKEN> instanceof String ) ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> return <RARE_TOKEN> . equals ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public static < T > GraphObjectList < T > <RARE_TOKEN> ( JSONArray array , Class < T > graphObjectClass ) { </a> 
<a> return new <RARE_TOKEN> < T > ( array , graphObjectClass ) ; </a> 
<a> } </a> 
<a> public static < T > GraphObjectList < T > <RARE_TOKEN> ( Class < T > graphObjectClass ) { </a> 
<a> return <RARE_TOKEN> ( new JSONArray ( ) , graphObjectClass ) ; </a> 
<a> } </a> 
<a> private static < T extends GraphObject > T <RARE_TOKEN> ( Class < T > graphObjectClass , JSONObject state ) { </a> 
<a> <RARE_TOKEN> ( graphObjectClass ) ; </a> 
<a> Class < ? > [ ] <RARE_TOKEN> = new Class [ ] { graphObjectClass } ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( state , graphObjectClass ) ; </a> 
<a> @ SuppressWarnings ( "unchecked" ) </a> 
<a> T graphObject = ( T ) <RARE_TOKEN> . <RARE_TOKEN> ( GraphObject . class . <RARE_TOKEN> ( ) , <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> return graphObject ; </a> 
<a> } </a> 
<a> private static Map < String , Object > <RARE_TOKEN> ( JSONObject state ) { </a> 
<a> Class < ? > [ ] <RARE_TOKEN> = new Class [ ] { Map . class } ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( state , Map . class ) ; </a> 
<a> @ SuppressWarnings ( "unchecked" ) </a> 
<a> Map < String , Object > graphObject = ( Map < String , Object > ) <RARE_TOKEN> </a> 
<a> . <RARE_TOKEN> ( GraphObject . class . <RARE_TOKEN> ( ) , <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> return graphObject ; </a> 
<a> } </a> 
<a> private static synchronized < T extends GraphObject > boolean <RARE_TOKEN> ( Class < T > graphObjectClass ) { </a> 
<a> return <RARE_TOKEN> . contains ( graphObjectClass ) ; </a> 
<a> } </a> 
<a> private static synchronized < T extends GraphObject > void <RARE_TOKEN> ( Class < T > graphObjectClass ) { </a> 
<a> <RARE_TOKEN> . add ( graphObjectClass ) ; </a> 
<a> } </a> 
<a> private static < T extends GraphObject > void <RARE_TOKEN> ( Class < T > graphObjectClass ) { </a> 
<a> if ( <RARE_TOKEN> ( graphObjectClass ) ) { </a> 
<a> return ; </a> 
<a> } </a> 
<a> if ( ! graphObjectClass . <RARE_TOKEN> ( ) ) { </a> 
<a> throw new <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> wrap <RARE_TOKEN> not <RARE_TOKEN> " </a> 
<a> + graphObjectClass . getName ( ) ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> [ ] <RARE_TOKEN> = graphObjectClass . <RARE_TOKEN> ( ) ; </a> 
<a> for ( <RARE_TOKEN> method : <RARE_TOKEN> ) { </a> 
<a> String <RARE_TOKEN> = method . getName ( ) ; </a> 
<a> int <RARE_TOKEN> = method . <RARE_TOKEN> ( ) . length ; </a> 
<a> Class < ? > <RARE_TOKEN> = method . <RARE_TOKEN> ( ) ; </a> 
<a> boolean <RARE_TOKEN> = method . <RARE_TOKEN> ( <RARE_TOKEN> . class ) ; </a> 
<a> if ( method . <RARE_TOKEN> ( ) . isAssignableFrom ( GraphObject . class ) ) { </a> 
<a> continue ; </a> 
<a> } else if ( <RARE_TOKEN> == 1 && <RARE_TOKEN> == Void . TYPE ) { </a> 
<a> if ( <RARE_TOKEN> ) { </a> 
<a> if ( ! Utility . <RARE_TOKEN> ( method . <RARE_TOKEN> ( <RARE_TOKEN> . class ) . value ( ) ) ) { </a> 
<a> continue ; </a> 
<a> } </a> 
<a> } else if ( <RARE_TOKEN> . startsWith ( <RARE_TOKEN> ) && <RARE_TOKEN> . length ( ) > 3 ) { </a> 
<a> continue ; </a> 
<a> } </a> 
<a> } else if ( <RARE_TOKEN> == 0 && <RARE_TOKEN> != Void . TYPE ) { </a> 
<a> if ( <RARE_TOKEN> ) { </a> 
<a> if ( ! Utility . <RARE_TOKEN> ( method . <RARE_TOKEN> ( <RARE_TOKEN> . class ) . value ( ) ) ) { </a> 
<a> continue ; </a> 
<a> } </a> 
<a> } else if ( <RARE_TOKEN> . startsWith ( <RARE_TOKEN> ) && <RARE_TOKEN> . length ( ) > 3 ) { </a> 
<a> continue ; </a> 
<a> } </a> 
<a> } </a> 
<a> throw new <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> " + method . toString ( ) ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( graphObjectClass ) ; </a> 
<a> } </a> 
<a> static < U > U <RARE_TOKEN> ( Object value , Class < U > <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> if ( value == null ) { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> Class < ? > <RARE_TOKEN> = value . getClass ( ) ; </a> 
<a> if ( <RARE_TOKEN> . isAssignableFrom ( <RARE_TOKEN> ) ) { </a> 
<a> @ SuppressWarnings ( "unchecked" ) </a> 
<a> U result = ( U ) value ; </a> 
<a> return result ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> . <RARE_TOKEN> ( ) ) { </a> 
<a> @ SuppressWarnings ( "unchecked" ) </a> 
<a> U result = ( U ) value ; </a> 
<a> return result ; </a> 
<a> } </a> 
<a> if ( GraphObject . class . isAssignableFrom ( <RARE_TOKEN> ) ) { </a> 
<a> @ SuppressWarnings ( "unchecked" ) </a> 
<a> Class < ? extends GraphObject > graphObjectClass = ( Class < ? extends GraphObject > ) <RARE_TOKEN> ; </a> 
<a> if ( JSONObject . class . isAssignableFrom ( <RARE_TOKEN> ) ) { </a> 
<a> @ SuppressWarnings ( "unchecked" ) </a> 
<a> U result = ( U ) <RARE_TOKEN> ( graphObjectClass , ( JSONObject ) value ) ; </a> 
<a> return result ; </a> 
<a> } else if ( GraphObject . class . isAssignableFrom ( <RARE_TOKEN> ) ) { </a> 
<a> @ SuppressWarnings ( "unchecked" ) </a> 
<a> U result = ( U ) ( ( GraphObject ) value ) . cast ( graphObjectClass ) ; </a> 
<a> return result ; </a> 
<a> } else { </a> 
<a> throw new <RARE_TOKEN> ( <RARE_TOKEN> create GraphObject from " + <RARE_TOKEN> . getName ( ) ) ; </a> 
<a> } </a> 
<a> } else if ( <RARE_TOKEN> . class . equals ( <RARE_TOKEN> ) || Collection . class . equals ( <RARE_TOKEN> ) </a> 
<a> || List . class . equals ( <RARE_TOKEN> ) || GraphObjectList . class . equals ( <RARE_TOKEN> ) ) { </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> throw new <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> type <RARE_TOKEN> " + <RARE_TOKEN> . toString ( ) ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> [ ] <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> if ( <RARE_TOKEN> == null || <RARE_TOKEN> . length != 1 </a> 
<a> || ! ( <RARE_TOKEN> [ 0 ] instanceof Class < ? > ) ) { </a> 
<a> throw new <RARE_TOKEN> ( </a> 
<a> <RARE_TOKEN> collection <RARE_TOKEN> to be of a type <RARE_TOKEN> <RARE_TOKEN> one <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> Class < ? > <RARE_TOKEN> = ( Class < ? > ) <RARE_TOKEN> [ 0 ] ; </a> 
<a> if ( JSONArray . class . isAssignableFrom ( <RARE_TOKEN> ) ) { </a> 
<a> JSONArray jsonArray = ( JSONArray ) value ; </a> 
<a> @ SuppressWarnings ( "unchecked" ) </a> 
<a> U result = ( U ) <RARE_TOKEN> ( jsonArray , <RARE_TOKEN> ) ; </a> 
<a> return result ; </a> 
<a> } else { </a> 
<a> throw new <RARE_TOKEN> ( <RARE_TOKEN> create Collection from " + <RARE_TOKEN> . getName ( ) ) ; </a> 
<a> } </a> 
<a> } else if ( String . class . equals ( <RARE_TOKEN> ) ) { </a> 
<a> if ( <RARE_TOKEN> . class . isAssignableFrom ( <RARE_TOKEN> ) || </a> 
<a> <RARE_TOKEN> . class . isAssignableFrom ( <RARE_TOKEN> ) ) { </a> 
<a> @ SuppressWarnings ( "unchecked" ) </a> 
<a> U result = ( U ) String . format ( <RARE_TOKEN> , value ) ; </a> 
<a> return result ; </a> 
<a> } else if ( <RARE_TOKEN> . class . isAssignableFrom ( <RARE_TOKEN> ) ) { </a> 
<a> @ SuppressWarnings ( "unchecked" ) </a> 
<a> U result = ( U ) String . format ( <RARE_TOKEN> , value ) ; </a> 
<a> return result ; </a> 
<a> } </a> 
<a> } else if ( Date . class . equals ( <RARE_TOKEN> ) ) { </a> 
<a> if ( String . class . isAssignableFrom ( <RARE_TOKEN> ) ) { </a> 
<a> for ( <RARE_TOKEN> format : <RARE_TOKEN> ) { </a> 
<a> try { </a> 
<a> Date <RARE_TOKEN> = format . <RARE_TOKEN> ( ( String ) value ) ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> @ SuppressWarnings ( "unchecked" ) </a> 
<a> U result = ( U ) <RARE_TOKEN> ; </a> 
<a> return result ; </a> 
<a> } </a> 
<a> } catch ( <RARE_TOKEN> e ) { </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> throw new <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> + <RARE_TOKEN> . getName ( ) + " to " </a> 
<a> + <RARE_TOKEN> . getName ( ) ) ; </a> 
<a> } </a> 
<a> static String <RARE_TOKEN> ( String string ) { </a> 
<a> string = string . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> return string . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> private static Object <RARE_TOKEN> ( Object obj ) { </a> 
<a> Class < ? > <RARE_TOKEN> = obj . getClass ( ) ; </a> 
<a> if ( GraphObject . class . isAssignableFrom ( <RARE_TOKEN> ) ) { </a> 
<a> GraphObject graphObject = ( GraphObject ) obj ; </a> 
<a> return graphObject . <RARE_TOKEN> ( ) ; </a> 
<a> } else if ( GraphObjectList . class . isAssignableFrom ( <RARE_TOKEN> ) ) { </a> 
<a> GraphObjectList < ? > <RARE_TOKEN> = ( GraphObjectList < ? > ) obj ; </a> 
<a> return <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> return obj ; </a> 
<a> } </a> 
<a> private abstract static class <RARE_TOKEN> < <RARE_TOKEN> > implements <RARE_TOKEN> { </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> protected final <RARE_TOKEN> state ; </a> 
<a> protected <RARE_TOKEN> ( <RARE_TOKEN> state ) { </a> 
<a> this . state = state ; </a> 
<a> } </a> 
<a> protected final Object <RARE_TOKEN> ( <RARE_TOKEN> method ) { </a> 
<a> throw new <RARE_TOKEN> ( getClass ( ) . getName ( ) + " <RARE_TOKEN> an <RARE_TOKEN> method <RARE_TOKEN> " </a> 
<a> + method . toString ( ) ) ; </a> 
<a> } </a> 
<a> protected final Object <RARE_TOKEN> ( Object <RARE_TOKEN> , <RARE_TOKEN> method , Object [ ] args ) throws Throwable { </a> 
<a> String <RARE_TOKEN> = method . getName ( ) ; </a> 
<a> if ( <RARE_TOKEN> . equals ( <RARE_TOKEN> ) ) { </a> 
<a> Object other = args [ 0 ] ; </a> 
<a> if ( other == null ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> handler = <RARE_TOKEN> . <RARE_TOKEN> ( other ) ; </a> 
<a> if ( ! ( handler instanceof <RARE_TOKEN> ) ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = ( <RARE_TOKEN> ) handler ; </a> 
<a> return this . state . equals ( <RARE_TOKEN> . state ) ; </a> 
<a> } else if ( <RARE_TOKEN> . equals ( <RARE_TOKEN> ) ) { </a> 
<a> return toString ( ) ; </a> 
<a> } </a> 
<a> return method . <RARE_TOKEN> ( this . state , args ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private final static class <RARE_TOKEN> extends <RARE_TOKEN> < JSONObject > { </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private final Class < ? > graphObjectClass ; </a> 
<a> public <RARE_TOKEN> ( JSONObject state , Class < ? > graphObjectClass ) { </a> 
<a> super ( state ) ; </a> 
<a> this . graphObjectClass = graphObjectClass ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public String toString ( ) { </a> 
<a> return String . format ( <RARE_TOKEN> <RARE_TOKEN> , graphObjectClass . getSimpleName ( ) , state ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public final Object <RARE_TOKEN> ( Object <RARE_TOKEN> , <RARE_TOKEN> method , Object [ ] args ) throws Throwable { </a> 
<a> Class < ? > <RARE_TOKEN> = method . <RARE_TOKEN> ( ) ; </a> 
<a> if ( <RARE_TOKEN> == Object . class ) { </a> 
<a> return <RARE_TOKEN> ( <RARE_TOKEN> , method , args ) ; </a> 
<a> } else if ( <RARE_TOKEN> == Map . class ) { </a> 
<a> return <RARE_TOKEN> ( method , args ) ; </a> 
<a> } else if ( <RARE_TOKEN> == GraphObject . class ) { </a> 
<a> return <RARE_TOKEN> ( <RARE_TOKEN> , method , args ) ; </a> 
<a> } else if ( GraphObject . class . isAssignableFrom ( <RARE_TOKEN> ) ) { </a> 
<a> return <RARE_TOKEN> ( method , args ) ; </a> 
<a> } </a> 
<a> return <RARE_TOKEN> ( method ) ; </a> 
<a> } </a> 
<a> private final Object <RARE_TOKEN> ( <RARE_TOKEN> method , Object [ ] args ) { </a> 
<a> String <RARE_TOKEN> = method . getName ( ) ; </a> 
<a> if ( <RARE_TOKEN> . equals ( <RARE_TOKEN> ) ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( this . state ) ; </a> 
<a> return null ; </a> 
<a> } else if ( <RARE_TOKEN> . equals ( <RARE_TOKEN> ) ) { </a> 
<a> return this . state . has ( ( String ) args [ 0 ] ) ; </a> 
<a> } else if ( <RARE_TOKEN> . equals ( <RARE_TOKEN> ) ) { </a> 
<a> return <RARE_TOKEN> . <RARE_TOKEN> ( this . state , args [ 0 ] ) ; </a> 
<a> } else if ( <RARE_TOKEN> . equals ( <RARE_TOKEN> ) ) { </a> 
<a> return <RARE_TOKEN> . <RARE_TOKEN> ( this . state ) ; </a> 
<a> } else if ( <RARE_TOKEN> . equals ( <RARE_TOKEN> ) ) { </a> 
<a> return this . state . <RARE_TOKEN> ( ( String ) args [ 0 ] ) ; </a> 
<a> } else if ( <RARE_TOKEN> . equals ( <RARE_TOKEN> ) ) { </a> 
<a> return this . state . length ( ) == 0 ; </a> 
<a> } else if ( <RARE_TOKEN> . equals ( <RARE_TOKEN> ) ) { </a> 
<a> return <RARE_TOKEN> . <RARE_TOKEN> ( this . state ) ; </a> 
<a> } else if ( <RARE_TOKEN> . equals ( <RARE_TOKEN> ) ) { </a> 
<a> return <RARE_TOKEN> ( args ) ; </a> 
<a> } else if ( <RARE_TOKEN> . equals ( <RARE_TOKEN> ) ) { </a> 
<a> Map < String , Object > map = null ; </a> 
<a> if ( args [ 0 ] instanceof Map < ? , ? > ) { </a> 
<a> @ SuppressWarnings ( "unchecked" ) </a> 
<a> Map < String , Object > <RARE_TOKEN> = ( Map < String , Object > ) args [ 0 ] ; </a> 
<a> map = <RARE_TOKEN> ; </a> 
<a> } else if ( args [ 0 ] instanceof GraphObject ) { </a> 
<a> map = ( ( GraphObject ) args [ 0 ] ) . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( this . state , map ) ; </a> 
<a> return null ; </a> 
<a> } else if ( <RARE_TOKEN> . equals ( <RARE_TOKEN> ) ) { </a> 
<a> this . state . remove ( ( String ) args [ 0 ] ) ; </a> 
<a> return null ; </a> 
<a> } else if ( <RARE_TOKEN> . equals ( <RARE_TOKEN> ) ) { </a> 
<a> return this . state . length ( ) ; </a> 
<a> } else if ( <RARE_TOKEN> . equals ( <RARE_TOKEN> ) ) { </a> 
<a> return <RARE_TOKEN> . <RARE_TOKEN> ( this . state ) ; </a> 
<a> } </a> 
<a> return <RARE_TOKEN> ( method ) ; </a> 
<a> } </a> 
<a> private final Object <RARE_TOKEN> ( Object <RARE_TOKEN> , <RARE_TOKEN> method , Object [ ] args ) { </a> 
<a> String <RARE_TOKEN> = method . getName ( ) ; </a> 
<a> if ( <RARE_TOKEN> . equals ( <RARE_TOKEN> ) ) { </a> 
<a> @ SuppressWarnings ( "unchecked" ) </a> 
<a> Class < ? extends GraphObject > graphObjectClass = ( Class < ? extends GraphObject > ) args [ 0 ] ; </a> 
<a> if ( graphObjectClass != null && </a> 
<a> graphObjectClass . isAssignableFrom ( this . graphObjectClass ) ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> return Factory . <RARE_TOKEN> ( graphObjectClass , this . state ) ; </a> 
<a> } else if ( <RARE_TOKEN> . equals ( <RARE_TOKEN> ) ) { </a> 
<a> <RARE_TOKEN> handler = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = ( <RARE_TOKEN> ) handler ; </a> 
<a> return <RARE_TOKEN> . state ; </a> 
<a> } else if ( <RARE_TOKEN> . equals ( <RARE_TOKEN> ) ) { </a> 
<a> return Factory . <RARE_TOKEN> ( this . state ) ; </a> 
<a> } else if ( <RARE_TOKEN> . equals ( <RARE_TOKEN> ) ) { </a> 
<a> return state . <RARE_TOKEN> ( ( String ) args [ 0 ] ) ; </a> 
<a> } else if ( <RARE_TOKEN> . equals ( <RARE_TOKEN> ) ) { </a> 
<a> return <RARE_TOKEN> ( args ) ; </a> 
<a> } else if ( <RARE_TOKEN> . equals ( <RARE_TOKEN> ) ) { </a> 
<a> this . state . remove ( ( String ) args [ 0 ] ) ; </a> 
<a> return null ; </a> 
<a> } </a> 
<a> return <RARE_TOKEN> ( method ) ; </a> 
<a> } </a> 
<a> private final Object <RARE_TOKEN> ( <RARE_TOKEN> method , Object [ ] args ) throws JSONException { </a> 
<a> String <RARE_TOKEN> = method . getName ( ) ; </a> 
<a> int <RARE_TOKEN> = method . <RARE_TOKEN> ( ) . length ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = method . <RARE_TOKEN> ( <RARE_TOKEN> . class ) ; </a> 
<a> String key = <RARE_TOKEN> != null ? <RARE_TOKEN> . value ( ) : </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> . substring ( 3 ) ) ; </a> 
<a> if ( <RARE_TOKEN> == 0 ) { </a> 
<a> Object value = this . state . <RARE_TOKEN> ( key ) ; </a> 
<a> Class < ? > <RARE_TOKEN> = method . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = method . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = null ; </a> 
<a> if ( <RARE_TOKEN> instanceof <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> = ( <RARE_TOKEN> ) <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> value = <RARE_TOKEN> ( value , <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> return value ; </a> 
<a> } else if ( <RARE_TOKEN> == 1 ) { </a> 
<a> Object value = args [ 0 ] ; </a> 
<a> if ( GraphObject . class . isAssignableFrom ( value . getClass ( ) ) ) { </a> 
<a> value = ( ( GraphObject ) value ) . <RARE_TOKEN> ( ) ; </a> 
<a> } else if ( GraphObjectList . class . isAssignableFrom ( value . getClass ( ) ) ) { </a> 
<a> value = ( ( GraphObjectList < ? > ) value ) . <RARE_TOKEN> ( ) ; </a> 
<a> } else if ( <RARE_TOKEN> . class . isAssignableFrom ( value . getClass ( ) ) ) { </a> 
<a> JSONArray jsonArray = new JSONArray ( ) ; </a> 
<a> <RARE_TOKEN> < ? > <RARE_TOKEN> = ( <RARE_TOKEN> < ? > ) value ; </a> 
<a> for ( Object o : <RARE_TOKEN> ) { </a> 
<a> if ( GraphObject . class . isAssignableFrom ( o . getClass ( ) ) ) { </a> 
<a> jsonArray . put ( ( ( GraphObject ) o ) . <RARE_TOKEN> ( ) ) ; </a> 
<a> } else { </a> 
<a> jsonArray . put ( o ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> value = jsonArray ; </a> 
<a> } </a> 
<a> this . state . <RARE_TOKEN> ( key , value ) ; </a> 
<a> return null ; </a> 
<a> } </a> 
<a> return <RARE_TOKEN> ( method ) ; </a> 
<a> } </a> 
<a> private Object <RARE_TOKEN> ( Object [ ] args ) { </a> 
<a> String name = ( String ) args [ 0 ] ; </a> 
<a> Object <RARE_TOKEN> = args [ 1 ] ; </a> 
<a> Object value = <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> try { </a> 
<a> state . <RARE_TOKEN> ( name , value ) ; </a> 
<a> } catch ( JSONException e ) { </a> 
<a> throw new IllegalArgumentException ( e ) ; </a> 
<a> } </a> 
<a> return null ; </a> 
<a> } </a> 
<a> } </a> 
<a> private final static class <RARE_TOKEN> < T > extends <RARE_TOKEN> < T > implements GraphObjectList < T > { </a> 
<a> private final JSONArray state ; </a> 
<a> private final Class < ? > <RARE_TOKEN> ; </a> 
<a> public <RARE_TOKEN> ( JSONArray state , Class < ? > <RARE_TOKEN> ) { </a> 
<a> Validate . <RARE_TOKEN> ( state , <RARE_TOKEN> ) ; </a> 
<a> Validate . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> this . state = state ; </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public String toString ( ) { </a> 
<a> return String . format ( <RARE_TOKEN> <RARE_TOKEN> , <RARE_TOKEN> . getSimpleName ( ) , state ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void add ( int location , T object ) { </a> 
<a> if ( location < 0 ) { </a> 
<a> throw new IndexOutOfBoundsException ( ) ; </a> 
<a> } else if ( location < size ( ) ) { </a> 
<a> throw new UnsupportedOperationException ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> the end of the list is <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> put ( location , object ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public T set ( int location , T object ) { </a> 
<a> checkIndex ( location ) ; </a> 
<a> T result = get ( location ) ; </a> 
<a> put ( location , object ) ; </a> 
<a> return result ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int hashCode ( ) { </a> 
<a> return state . hashCode ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean equals ( Object obj ) { </a> 
<a> if ( this == obj ) </a> 
<a> return true ; </a> 
<a> if ( getClass ( ) != obj . getClass ( ) ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> @ SuppressWarnings ( "unchecked" ) </a> 
<a> <RARE_TOKEN> < T > other = ( <RARE_TOKEN> < T > ) obj ; </a> 
<a> return state . equals ( other . state ) ; </a> 
<a> } </a> 
<a> @ SuppressWarnings ( "unchecked" ) </a> 
<a> @ Override </a> 
<a> public T get ( int location ) { </a> 
<a> checkIndex ( location ) ; </a> 
<a> Object value = state . <RARE_TOKEN> ( location ) ; </a> 
<a> T result = ( T ) <RARE_TOKEN> ( value , <RARE_TOKEN> , null ) ; </a> 
<a> return result ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int size ( ) { </a> 
<a> return state . length ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public final < U extends GraphObject > GraphObjectList < U > <RARE_TOKEN> ( Class < U > graphObjectClass ) { </a> 
<a> if ( GraphObject . class . isAssignableFrom ( <RARE_TOKEN> ) ) { </a> 
<a> if ( graphObjectClass . isAssignableFrom ( <RARE_TOKEN> ) ) { </a> 
<a> @ SuppressWarnings ( "unchecked" ) </a> 
<a> GraphObjectList < U > result = ( GraphObjectList < U > ) this ; </a> 
<a> return result ; </a> 
<a> } </a> 
<a> return <RARE_TOKEN> ( state , graphObjectClass ) ; </a> 
<a> } else { </a> 
<a> throw new <RARE_TOKEN> ( <RARE_TOKEN> cast <RARE_TOKEN> of <RARE_TOKEN> type " </a> 
<a> + <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public final JSONArray <RARE_TOKEN> ( ) { </a> 
<a> return state ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void clear ( ) { </a> 
<a> throw new UnsupportedOperationException ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean remove ( Object o ) { </a> 
<a> throw new UnsupportedOperationException ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( Collection < ? > c ) { </a> 
<a> throw new UnsupportedOperationException ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( Collection < ? > c ) { </a> 
<a> throw new UnsupportedOperationException ( ) ; </a> 
<a> } </a> 
<a> private void checkIndex ( int index ) { </a> 
<a> if ( index < 0 || index >= state . length ( ) ) { </a> 
<a> throw new IndexOutOfBoundsException ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private void put ( int index , T obj ) { </a> 
<a> Object <RARE_TOKEN> = <RARE_TOKEN> ( obj ) ; </a> 
<a> try { </a> 
<a> state . put ( index , <RARE_TOKEN> ) ; </a> 
<a> } catch ( JSONException e ) { </a> 
<a> throw new IllegalArgumentException ( e ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package com . facebook . model ; </a> 
<a> import org . json . JSONArray ; </a> 
<a> import java . util . List ; </a> 
<a> public interface GraphObjectList < T > extends List < T > { </a> 
<a> public < U extends GraphObject > GraphObjectList < U > <RARE_TOKEN> ( Class < U > graphObjectClass ) ; </a> 
<a> public JSONArray <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package com . facebook . model ; </a> 
<a> public interface GraphPlace extends GraphObject { </a> 
<a> public String getId ( ) ; </a> 
<a> public void <RARE_TOKEN> ( String id ) ; </a> 
<a> public String getName ( ) ; </a> 
<a> public void <RARE_TOKEN> ( String name ) ; </a> 
<a> public String <RARE_TOKEN> ( ) ; </a> 
<a> public void <RARE_TOKEN> ( String <RARE_TOKEN> ) ; </a> 
<a> public <RARE_TOKEN> <RARE_TOKEN> ( ) ; </a> 
<a> public void <RARE_TOKEN> ( <RARE_TOKEN> location ) ; </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package com . facebook . model ; </a> 
<a> public interface GraphUser extends GraphObject { </a> 
<a> public String getId ( ) ; </a> 
<a> public void <RARE_TOKEN> ( String id ) ; </a> 
<a> public String getName ( ) ; </a> 
<a> public void <RARE_TOKEN> ( String name ) ; </a> 
<a> public String <RARE_TOKEN> ( ) ; </a> 
<a> public void <RARE_TOKEN> ( String <RARE_TOKEN> ) ; </a> 
<a> public String <RARE_TOKEN> ( ) ; </a> 
<a> public void <RARE_TOKEN> ( String <RARE_TOKEN> ) ; </a> 
<a> public String <RARE_TOKEN> ( ) ; </a> 
<a> public void <RARE_TOKEN> ( String <RARE_TOKEN> ) ; </a> 
<a> public String <RARE_TOKEN> ( ) ; </a> 
<a> public void <RARE_TOKEN> ( String <RARE_TOKEN> ) ; </a> 
<a> public String <RARE_TOKEN> ( ) ; </a> 
<a> public void <RARE_TOKEN> ( String <RARE_TOKEN> ) ; </a> 
<a> public String <RARE_TOKEN> ( ) ; </a> 
<a> public void <RARE_TOKEN> ( String <RARE_TOKEN> ) ; </a> 
<a> public <RARE_TOKEN> <RARE_TOKEN> ( ) ; </a> 
<a> public void <RARE_TOKEN> ( <RARE_TOKEN> location ) ; </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package com . facebook . model ; </a> 
<a> import android . annotation . <RARE_TOKEN> ; </a> 
<a> import org . json . JSONException ; </a> 
<a> import org . json . JSONObject ; </a> 
<a> import java . util . * ; </a> 
<a> class <RARE_TOKEN> { </a> 
<a> static void <RARE_TOKEN> ( JSONObject jsonObject ) { </a> 
<a> @ SuppressWarnings ( "unchecked" ) </a> 
<a> Iterator < String > keys = ( Iterator < String > ) jsonObject . keys ( ) ; </a> 
<a> while ( keys . <RARE_TOKEN> ( ) ) { </a> 
<a> keys . next ( ) ; </a> 
<a> keys . remove ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> static boolean <RARE_TOKEN> ( JSONObject jsonObject , Object value ) { </a> 
<a> @ SuppressWarnings ( "unchecked" ) </a> 
<a> Iterator < String > keys = ( Iterator < String > ) jsonObject . keys ( ) ; </a> 
<a> while ( keys . <RARE_TOKEN> ( ) ) { </a> 
<a> Object <RARE_TOKEN> = jsonObject . <RARE_TOKEN> ( keys . next ( ) ) ; </a> 
<a> if ( <RARE_TOKEN> != null && <RARE_TOKEN> . equals ( value ) ) { </a> 
<a> return true ; </a> 
<a> } </a> 
<a> } </a> 
<a> return false ; </a> 
<a> } </a> 
<a> private final static class <RARE_TOKEN> implements Map . Entry < String , Object > { </a> 
<a> private final String key ; </a> 
<a> private final Object value ; </a> 
<a> <RARE_TOKEN> ( String key , Object value ) { </a> 
<a> this . key = key ; </a> 
<a> this . value = value ; </a> 
<a> } </a> 
<a> @ <RARE_TOKEN> ( <RARE_TOKEN> ) </a> 
<a> @ Override </a> 
<a> public String <RARE_TOKEN> ( ) { </a> 
<a> return this . key ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public Object getValue ( ) { </a> 
<a> return this . value ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public Object <RARE_TOKEN> ( Object object ) { </a> 
<a> throw new UnsupportedOperationException ( <RARE_TOKEN> is <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> static Set < Map . Entry < String , Object > > <RARE_TOKEN> ( JSONObject jsonObject ) { </a> 
<a> HashSet < Map . Entry < String , Object > > result = new HashSet < Map . Entry < String , Object > > ( ) ; </a> 
<a> @ SuppressWarnings ( "unchecked" ) </a> 
<a> Iterator < String > keys = ( Iterator < String > ) jsonObject . keys ( ) ; </a> 
<a> while ( keys . <RARE_TOKEN> ( ) ) { </a> 
<a> String key = keys . next ( ) ; </a> 
<a> Object value = jsonObject . <RARE_TOKEN> ( key ) ; </a> 
<a> result . add ( new <RARE_TOKEN> ( key , value ) ) ; </a> 
<a> } </a> 
<a> return result ; </a> 
<a> } </a> 
<a> static Set < String > <RARE_TOKEN> ( JSONObject jsonObject ) { </a> 
<a> HashSet < String > result = new HashSet < String > ( ) ; </a> 
<a> @ SuppressWarnings ( "unchecked" ) </a> 
<a> Iterator < String > keys = ( Iterator < String > ) jsonObject . keys ( ) ; </a> 
<a> while ( keys . <RARE_TOKEN> ( ) ) { </a> 
<a> result . add ( keys . next ( ) ) ; </a> 
<a> } </a> 
<a> return result ; </a> 
<a> } </a> 
<a> static void <RARE_TOKEN> ( JSONObject jsonObject , Map < String , Object > map ) { </a> 
<a> Set < Map . Entry < String , Object > > <RARE_TOKEN> = map . <RARE_TOKEN> ( ) ; </a> 
<a> for ( Map . Entry < String , Object > entry : <RARE_TOKEN> ) { </a> 
<a> try { </a> 
<a> jsonObject . <RARE_TOKEN> ( entry . <RARE_TOKEN> ( ) , entry . getValue ( ) ) ; </a> 
<a> } catch ( JSONException e ) { </a> 
<a> throw new IllegalArgumentException ( e ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> static Collection < Object > <RARE_TOKEN> ( JSONObject jsonObject ) { </a> 
<a> ArrayList < Object > result = new ArrayList < Object > ( ) ; </a> 
<a> @ SuppressWarnings ( "unchecked" ) </a> 
<a> Iterator < String > keys = ( Iterator < String > ) jsonObject . keys ( ) ; </a> 
<a> while ( keys . <RARE_TOKEN> ( ) ) { </a> 
<a> result . add ( jsonObject . <RARE_TOKEN> ( keys . next ( ) ) ) ; </a> 
<a> } </a> 
<a> return result ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package com . facebook . model ; </a> 
<a> import org . json . JSONObject ; </a> 
<a> import java . util . Date ; </a> 
<a> import java . util . List ; </a> 
<a> public interface <RARE_TOKEN> extends GraphObject { </a> 
<a> public String getId ( ) ; </a> 
<a> public void <RARE_TOKEN> ( String id ) ; </a> 
<a> public Date <RARE_TOKEN> ( ) ; </a> 
<a> public void <RARE_TOKEN> ( Date <RARE_TOKEN> ) ; </a> 
<a> public Date <RARE_TOKEN> ( ) ; </a> 
<a> public void <RARE_TOKEN> ( Date <RARE_TOKEN> ) ; </a> 
<a> public Date <RARE_TOKEN> ( ) ; </a> 
<a> public void <RARE_TOKEN> ( Date <RARE_TOKEN> ) ; </a> 
<a> public Date <RARE_TOKEN> ( ) ; </a> 
<a> public void <RARE_TOKEN> ( Date <RARE_TOKEN> ) ; </a> 
<a> public Date <RARE_TOKEN> ( ) ; </a> 
<a> public void <RARE_TOKEN> ( Date <RARE_TOKEN> ) ; </a> 
<a> public String <RARE_TOKEN> ( ) ; </a> 
<a> public void <RARE_TOKEN> ( String <RARE_TOKEN> ) ; </a> 
<a> public String getMessage ( ) ; </a> 
<a> public void <RARE_TOKEN> ( String message ) ; </a> 
<a> public GraphPlace <RARE_TOKEN> ( ) ; </a> 
<a> public void <RARE_TOKEN> ( GraphPlace <RARE_TOKEN> ) ; </a> 
<a> public List < GraphObject > <RARE_TOKEN> ( ) ; </a> 
<a> public void <RARE_TOKEN> ( List < ? extends GraphObject > <RARE_TOKEN> ) ; </a> 
<a> public List < JSONObject > <RARE_TOKEN> ( ) ; </a> 
<a> public void <RARE_TOKEN> ( List < JSONObject > <RARE_TOKEN> ) ; </a> 
<a> public GraphUser <RARE_TOKEN> ( ) ; </a> 
<a> public void <RARE_TOKEN> ( GraphUser from ) ; </a> 
<a> public JSONObject <RARE_TOKEN> ( ) ; </a> 
<a> public void <RARE_TOKEN> ( JSONObject <RARE_TOKEN> ) ; </a> 
<a> public GraphObject <RARE_TOKEN> ( ) ; </a> 
<a> public void <RARE_TOKEN> ( GraphObject <RARE_TOKEN> ) ; </a> 
<a> public JSONObject <RARE_TOKEN> ( ) ; </a> 
<a> public void <RARE_TOKEN> ( JSONObject <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package com . facebook . model ; </a> 
<a> import java . lang . annotation . <RARE_TOKEN> ; </a> 
<a> import java . lang . annotation . <RARE_TOKEN> ; </a> 
<a> @ <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ) </a> 
<a> public @ interface <RARE_TOKEN> { </a> 
<a> String value ( ) ; </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package com . facebook . widget ; </a> 
<a> import android . content . Intent ; </a> 
<a> import android . os . Bundle ; </a> 
<a> import android . support . v4 . app . <RARE_TOKEN> ; </a> 
<a> import com . facebook . Session ; </a> 
<a> import com . facebook . SessionLoginBehavior ; </a> 
<a> import com . facebook . SessionState ; </a> 
<a> import com . facebook . internal . <RARE_TOKEN> ; </a> 
<a> import com . facebook . internal . <RARE_TOKEN> ; </a> 
<a> import java . util . Date ; </a> 
<a> import java . util . List ; </a> 
<a> class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> private <RARE_TOKEN> sessionTracker ; </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( Bundle savedInstanceState ) { </a> 
<a> super . <RARE_TOKEN> ( savedInstanceState ) ; </a> 
<a> sessionTracker = new <RARE_TOKEN> ( getActivity ( ) , new <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void onActivityResult ( int requestCode , int resultCode , Intent data ) { </a> 
<a> super . onActivityResult ( requestCode , resultCode , data ) ; </a> 
<a> sessionTracker . getSession ( ) . onActivityResult ( this . getActivity ( ) , requestCode , resultCode , data ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> super . <RARE_TOKEN> ( ) ; </a> 
<a> sessionTracker . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( Session <RARE_TOKEN> ) { </a> 
<a> if ( sessionTracker != null ) { </a> 
<a> sessionTracker . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> protected void <RARE_TOKEN> ( SessionState state , Exception exception ) { </a> 
<a> } </a> 
<a> protected final Session getSession ( ) { </a> 
<a> if ( sessionTracker != null ) { </a> 
<a> return sessionTracker . getSession ( ) ; </a> 
<a> } </a> 
<a> return null ; </a> 
<a> } </a> 
<a> protected final boolean <RARE_TOKEN> ( ) { </a> 
<a> if ( sessionTracker != null ) { </a> 
<a> return sessionTracker . <RARE_TOKEN> ( ) != null ; </a> 
<a> } </a> 
<a> return false ; </a> 
<a> } </a> 
<a> protected final SessionState <RARE_TOKEN> ( ) { </a> 
<a> if ( sessionTracker != null ) { </a> 
<a> Session currentSession = sessionTracker . getSession ( ) ; </a> 
<a> return ( currentSession != null ) ? currentSession . <RARE_TOKEN> ( ) : null ; </a> 
<a> } </a> 
<a> return null ; </a> 
<a> } </a> 
<a> protected final String <RARE_TOKEN> ( ) { </a> 
<a> if ( sessionTracker != null ) { </a> 
<a> Session currentSession = sessionTracker . <RARE_TOKEN> ( ) ; </a> 
<a> return ( currentSession != null ) ? currentSession . <RARE_TOKEN> ( ) : null ; </a> 
<a> } </a> 
<a> return null ; </a> 
<a> } </a> 
<a> protected final Date <RARE_TOKEN> ( ) { </a> 
<a> if ( sessionTracker != null ) { </a> 
<a> Session currentSession = sessionTracker . <RARE_TOKEN> ( ) ; </a> 
<a> return ( currentSession != null ) ? currentSession . <RARE_TOKEN> ( ) : null ; </a> 
<a> } </a> 
<a> return null ; </a> 
<a> } </a> 
<a> protected final void <RARE_TOKEN> ( ) { </a> 
<a> if ( sessionTracker != null ) { </a> 
<a> Session currentSession = sessionTracker . <RARE_TOKEN> ( ) ; </a> 
<a> if ( currentSession != null ) { </a> 
<a> currentSession . close ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> protected final void <RARE_TOKEN> ( ) { </a> 
<a> if ( sessionTracker != null ) { </a> 
<a> Session currentSession = sessionTracker . <RARE_TOKEN> ( ) ; </a> 
<a> if ( currentSession != null ) { </a> 
<a> currentSession . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> protected final List < String > <RARE_TOKEN> ( ) { </a> 
<a> if ( sessionTracker != null ) { </a> 
<a> Session currentSession = sessionTracker . getSession ( ) ; </a> 
<a> return ( currentSession != null ) ? currentSession . getPermissions ( ) : null ; </a> 
<a> } </a> 
<a> return null ; </a> 
<a> } </a> 
<a> protected final void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> ( null , null ) ; </a> 
<a> } </a> 
<a> protected final void <RARE_TOKEN> ( String applicationId , List < String > permissions ) { </a> 
<a> <RARE_TOKEN> ( applicationId , permissions , SessionLoginBehavior . <RARE_TOKEN> , </a> 
<a> Session . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> protected final void <RARE_TOKEN> ( String applicationId , List < String > permissions , </a> 
<a> SessionLoginBehavior <RARE_TOKEN> , int <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( applicationId , permissions , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> protected final void <RARE_TOKEN> ( String applicationId , List < String > permissions ) { </a> 
<a> <RARE_TOKEN> ( applicationId , permissions , SessionLoginBehavior . <RARE_TOKEN> , </a> 
<a> Session . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> protected final void <RARE_TOKEN> ( String applicationId , List < String > permissions , </a> 
<a> SessionLoginBehavior <RARE_TOKEN> , int <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( applicationId , permissions , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( String applicationId , List < String > permissions , </a> 
<a> SessionLoginBehavior <RARE_TOKEN> , int <RARE_TOKEN> , <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> if ( sessionTracker != null ) { </a> 
<a> Session currentSession = sessionTracker . getSession ( ) ; </a> 
<a> if ( currentSession == null || currentSession . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( ) ) { </a> 
<a> Session session = new Session . Builder ( getActivity ( ) ) . <RARE_TOKEN> ( applicationId ) . build ( ) ; </a> 
<a> Session . <RARE_TOKEN> ( session ) ; </a> 
<a> currentSession = session ; </a> 
<a> } </a> 
<a> if ( ! currentSession . isOpened ( ) ) { </a> 
<a> Session . OpenRequest openRequest = new Session . OpenRequest ( this ) . </a> 
<a> <RARE_TOKEN> ( permissions ) . </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) . </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> . <RARE_TOKEN> . equals ( <RARE_TOKEN> ) ) { </a> 
<a> currentSession . <RARE_TOKEN> ( openRequest ) ; </a> 
<a> } else { </a> 
<a> currentSession . <RARE_TOKEN> ( openRequest ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> private class <RARE_TOKEN> implements Session . StatusCallback { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( Session session , </a> 
<a> SessionState state , </a> 
<a> Exception exception ) { </a> 
<a> <RARE_TOKEN> . this . <RARE_TOKEN> ( state , exception ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package com . facebook . widget ; </a> 
<a> import android . annotation . <RARE_TOKEN> ; </a> 
<a> import android . app . Activity ; </a> 
<a> import android . content . res . <RARE_TOKEN> ; </a> 
<a> import android . os . Bundle ; </a> 
<a> import android . text . <RARE_TOKEN> ; </a> 
<a> import android . util . <RARE_TOKEN> ; </a> 
<a> import com . facebook . * ; </a> 
<a> import com . facebook . android . R ; </a> 
<a> import com . facebook . model . GraphUser ; </a> 
<a> import java . util . Arrays ; </a> 
<a> import java . util . HashSet ; </a> 
<a> import java . util . List ; </a> 
<a> import java . util . Set ; </a> 
<a> public class <RARE_TOKEN> extends PickerFragment < GraphUser > { </a> 
<a> public static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> public static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String ID = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = "name" ; </a> 
<a> private String <RARE_TOKEN> ; </a> 
<a> private boolean <RARE_TOKEN> = true ; </a> 
<a> public <RARE_TOKEN> ( ) { </a> 
<a> this ( null ) ; </a> 
<a> } </a> 
<a> @ <RARE_TOKEN> ( <RARE_TOKEN> ) </a> 
<a> public <RARE_TOKEN> ( Bundle args ) { </a> 
<a> super ( GraphUser . class , R . layout . <RARE_TOKEN> , args ) ; </a> 
<a> <RARE_TOKEN> ( args ) ; </a> 
<a> } </a> 
<a> public String <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( String <RARE_TOKEN> ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( boolean <RARE_TOKEN> ) { </a> 
<a> if ( this . <RARE_TOKEN> != <RARE_TOKEN> ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public List < GraphUser > <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( Activity activity , <RARE_TOKEN> <RARE_TOKEN> , Bundle savedInstanceState ) { </a> 
<a> super . <RARE_TOKEN> ( activity , <RARE_TOKEN> , savedInstanceState ) ; </a> 
<a> <RARE_TOKEN> a = activity . <RARE_TOKEN> ( <RARE_TOKEN> , R . <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( a . <RARE_TOKEN> ( R . <RARE_TOKEN> . <RARE_TOKEN> , <RARE_TOKEN> ) ) ; </a> 
<a> a . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( Bundle <RARE_TOKEN> ) { </a> 
<a> super . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> void <RARE_TOKEN> ( Bundle outState ) { </a> 
<a> super . <RARE_TOKEN> ( outState ) ; </a> 
<a> outState . putString ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> outState . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> <RARE_TOKEN> < GraphUser > <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> < GraphUser > adapter = new <RARE_TOKEN> < GraphUser > ( </a> 
<a> this . getActivity ( ) ) { </a> 
<a> @ Override </a> 
<a> protected int <RARE_TOKEN> ( GraphUser graphObject ) { </a> 
<a> return R . layout . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected int <RARE_TOKEN> ( ) { </a> 
<a> return R . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } ; </a> 
<a> adapter . <RARE_TOKEN> ( true ) ; </a> 
<a> adapter . <RARE_TOKEN> ( <RARE_TOKEN> ( ) ) ; </a> 
<a> adapter . <RARE_TOKEN> ( Arrays . asList ( new String [ ] { <RARE_TOKEN> } ) ) ; </a> 
<a> adapter . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> return adapter ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> ( ) { </a> 
<a> return new <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ? new <RARE_TOKEN> ( ) : new <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> Request <RARE_TOKEN> ( Session session ) { </a> 
<a> if ( adapter == null ) { </a> 
<a> throw new FacebookException ( <RARE_TOKEN> <RARE_TOKEN> requests <RARE_TOKEN> <RARE_TOKEN> has <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> String <RARE_TOKEN> = ( <RARE_TOKEN> != null ) ? <RARE_TOKEN> : <RARE_TOKEN> ; </a> 
<a> return <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> , session ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> String <RARE_TOKEN> ( ) { </a> 
<a> return getString ( R . string . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> private Request <RARE_TOKEN> ( String <RARE_TOKEN> , Set < String > <RARE_TOKEN> , Session session ) { </a> 
<a> Request request = Request . <RARE_TOKEN> ( session , <RARE_TOKEN> + <RARE_TOKEN> , null ) ; </a> 
<a> Set < String > fields = new HashSet < String > ( <RARE_TOKEN> ) ; </a> 
<a> String [ ] <RARE_TOKEN> = new String [ ] { </a> 
<a> ID , </a> 
<a> <RARE_TOKEN> </a> 
<a> } ; </a> 
<a> fields . <RARE_TOKEN> ( Arrays . asList ( <RARE_TOKEN> ) ) ; </a> 
<a> String <RARE_TOKEN> = adapter . <RARE_TOKEN> ( ) ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> fields . add ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> Bundle parameters = request . <RARE_TOKEN> ( ) ; </a> 
<a> parameters . putString ( <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> , fields ) ) ; </a> 
<a> request . <RARE_TOKEN> ( parameters ) ; </a> 
<a> return request ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( Bundle <RARE_TOKEN> ) { </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> if ( <RARE_TOKEN> . containsKey ( <RARE_TOKEN> ) ) { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> . getString ( <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( <RARE_TOKEN> < GraphUser > loader , </a> 
<a> <RARE_TOKEN> < GraphUser > data ) { </a> 
<a> super . <RARE_TOKEN> ( loader , data ) ; </a> 
<a> if ( data == null || loader . <RARE_TOKEN> ( ) ) { </a> 
<a> return ; </a> 
<a> } </a> 
<a> if ( data . <RARE_TOKEN> ( ) ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> if ( data . <RARE_TOKEN> ( ) ) { </a> 
<a> loader . <RARE_TOKEN> ( data . <RARE_TOKEN> ( ) == 0 ? <RARE_TOKEN> : 0 ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> loader . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package com . facebook . widget ; </a> 
<a> import android . content . Context ; </a> 
<a> import android . <RARE_TOKEN> . Bitmap ; </a> 
<a> import android . view . <RARE_TOKEN> ; </a> 
<a> import android . view . View ; </a> 
<a> import android . view . ViewGroup ; </a> 
<a> import android . view . <RARE_TOKEN> ; </a> 
<a> import android . widget . * ; </a> 
<a> import com . facebook . * ; </a> 
<a> import com . facebook . android . R ; </a> 
<a> import com . facebook . model . GraphObject ; </a> 
<a> import org . json . JSONObject ; </a> 
<a> import java . net . <RARE_TOKEN> ; </a> 
<a> import java . net . URL ; </a> 
<a> import java . text . <RARE_TOKEN> ; </a> 
<a> import java . util . * ; </a> 
<a> class <RARE_TOKEN> < T extends GraphObject > extends <RARE_TOKEN> implements <RARE_TOKEN> { </a> 
<a> private static final int <RARE_TOKEN> = 1 ; </a> 
<a> private static final int <RARE_TOKEN> = 0 ; </a> 
<a> private static final int <RARE_TOKEN> = 1 ; </a> 
<a> private static final int <RARE_TOKEN> = 2 ; </a> 
<a> private static final int <RARE_TOKEN> = 20 ; </a> 
<a> private static final String ID = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = "name" ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private final Map < String , <RARE_TOKEN> > <RARE_TOKEN> = new HashMap < String , <RARE_TOKEN> > ( ) ; </a> 
<a> private final <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> private List < String > <RARE_TOKEN> = new ArrayList < String > ( ) ; </a> 
<a> private Map < String , ArrayList < T > > <RARE_TOKEN> = new HashMap < String , ArrayList < T > > ( ) ; </a> 
<a> private Map < String , T > <RARE_TOKEN> = new HashMap < String , T > ( ) ; </a> 
<a> private boolean <RARE_TOKEN> ; </a> 
<a> private List < String > <RARE_TOKEN> ; </a> 
<a> private String <RARE_TOKEN> ; </a> 
<a> private boolean <RARE_TOKEN> ; </a> 
<a> private boolean <RARE_TOKEN> ; </a> 
<a> private Filter < T > filter ; </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> private <RARE_TOKEN> < T > cursor ; </a> 
<a> private Context context ; </a> 
<a> private Map < String , <RARE_TOKEN> > <RARE_TOKEN> = new HashMap < String , <RARE_TOKEN> > ( ) ; </a> 
<a> private ArrayList < String > <RARE_TOKEN> = new ArrayList < String > ( ) ; </a> 
<a> public interface <RARE_TOKEN> { </a> 
<a> public void <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> public static class <RARE_TOKEN> < T extends GraphObject > { </a> 
<a> public String <RARE_TOKEN> ; </a> 
<a> public T graphObject ; </a> 
<a> public enum <RARE_TOKEN> { </a> 
<a> <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( String <RARE_TOKEN> , T graphObject ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> this . graphObject = graphObject ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> getType ( ) { </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> return <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> } else if ( graphObject == null ) { </a> 
<a> return <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> } else { </a> 
<a> return <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> interface Filter < T > { </a> 
<a> boolean <RARE_TOKEN> ( T graphObject ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( Context context ) { </a> 
<a> this . context = context ; </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> . from ( context ) ; </a> 
<a> } </a> 
<a> public List < String > <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( List < String > <RARE_TOKEN> ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public String <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( String <RARE_TOKEN> ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( boolean <RARE_TOKEN> ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( boolean <RARE_TOKEN> ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> < T > <RARE_TOKEN> ( ) { </a> 
<a> return cursor ; </a> 
<a> } </a> 
<a> public boolean <RARE_TOKEN> ( <RARE_TOKEN> < T > cursor ) { </a> 
<a> if ( this . cursor == cursor ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> if ( this . cursor != null ) { </a> 
<a> this . cursor . close ( ) ; </a> 
<a> } </a> 
<a> this . cursor = cursor ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> return true ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( int <RARE_TOKEN> , int <RARE_TOKEN> , int <RARE_TOKEN> ) { </a> 
<a> if ( <RARE_TOKEN> < <RARE_TOKEN> ) { </a> 
<a> return ; </a> 
<a> } </a> 
<a> for ( int i = <RARE_TOKEN> ; i >= 0 ; i -- ) { </a> 
<a> <RARE_TOKEN> < T > <RARE_TOKEN> = <RARE_TOKEN> ( i ) ; </a> 
<a> if ( <RARE_TOKEN> . graphObject != null ) { </a> 
<a> String id = <RARE_TOKEN> ( <RARE_TOKEN> . graphObject ) ; </a> 
<a> <RARE_TOKEN> request = <RARE_TOKEN> . get ( id ) ; </a> 
<a> if ( request != null ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( request ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> int start = Math . <RARE_TOKEN> ( 0 , <RARE_TOKEN> - <RARE_TOKEN> ) ; </a> 
<a> int end = Math . min ( <RARE_TOKEN> + <RARE_TOKEN> , <RARE_TOKEN> ( ) - 1 ) ; </a> 
<a> ArrayList < T > <RARE_TOKEN> = new ArrayList < T > ( ) ; </a> 
<a> for ( int i = start ; i < <RARE_TOKEN> ; ++ i ) { </a> 
<a> <RARE_TOKEN> < T > <RARE_TOKEN> = <RARE_TOKEN> ( i ) ; </a> 
<a> if ( <RARE_TOKEN> . graphObject != null ) { </a> 
<a> <RARE_TOKEN> . add ( <RARE_TOKEN> . graphObject ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> for ( int i = <RARE_TOKEN> + 1 ; i <= end ; ++ i ) { </a> 
<a> <RARE_TOKEN> < T > <RARE_TOKEN> = <RARE_TOKEN> ( i ) ; </a> 
<a> if ( <RARE_TOKEN> . graphObject != null ) { </a> 
<a> <RARE_TOKEN> . add ( <RARE_TOKEN> . graphObject ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> for ( T graphObject : <RARE_TOKEN> ) { </a> 
<a> URL url = <RARE_TOKEN> ( graphObject ) ; </a> 
<a> final String id = <RARE_TOKEN> ( graphObject ) ; </a> 
<a> boolean <RARE_TOKEN> = <RARE_TOKEN> . remove ( id ) ; </a> 
<a> <RARE_TOKEN> . add ( id ) ; </a> 
<a> if ( ! <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( id , url , null ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> protected String <RARE_TOKEN> ( T graphObject ) { </a> 
<a> String result = null ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> result = ( String ) graphObject . getProperty ( <RARE_TOKEN> ) ; </a> 
<a> if ( result != null && result . length ( ) > 0 ) { </a> 
<a> result = result . substring ( 0 , 1 ) . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> return ( result != null ) ? result : "" ; </a> 
<a> } </a> 
<a> protected <RARE_TOKEN> <RARE_TOKEN> ( T graphObject ) { </a> 
<a> return ( String ) graphObject . getProperty ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> protected <RARE_TOKEN> <RARE_TOKEN> ( T graphObject ) { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> protected URL <RARE_TOKEN> ( T graphObject ) { </a> 
<a> String url = null ; </a> 
<a> Object o = graphObject . getProperty ( <RARE_TOKEN> ) ; </a> 
<a> if ( o instanceof String ) { </a> 
<a> url = ( String ) o ; </a> 
<a> } else if ( o instanceof JSONObject ) { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = GraphObject . Factory . create ( ( JSONObject ) o ) . cast ( <RARE_TOKEN> . class ) ; </a> 
<a> <RARE_TOKEN> data = <RARE_TOKEN> . getData ( ) ; </a> 
<a> if ( data != null ) { </a> 
<a> url = data . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> if ( url != null ) { </a> 
<a> try { </a> 
<a> return new URL ( url ) ; </a> 
<a> } catch ( <RARE_TOKEN> e ) { </a> 
<a> } </a> 
<a> } </a> 
<a> return null ; </a> 
<a> } </a> 
<a> protected View <RARE_TOKEN> ( String <RARE_TOKEN> , View <RARE_TOKEN> , ViewGroup parent ) { </a> 
<a> TextView result = ( TextView ) <RARE_TOKEN> ; </a> 
<a> if ( result == null ) { </a> 
<a> result = ( TextView ) <RARE_TOKEN> . <RARE_TOKEN> ( R . layout . <RARE_TOKEN> , null ) ; </a> 
<a> } </a> 
<a> result . setText ( <RARE_TOKEN> ) ; </a> 
<a> return result ; </a> 
<a> } </a> 
<a> protected View <RARE_TOKEN> ( T graphObject , View <RARE_TOKEN> , ViewGroup parent ) { </a> 
<a> View result = <RARE_TOKEN> ; </a> 
<a> if ( result == null ) { </a> 
<a> result = <RARE_TOKEN> ( graphObject , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( result , graphObject ) ; </a> 
<a> return result ; </a> 
<a> } </a> 
<a> private View <RARE_TOKEN> ( View <RARE_TOKEN> , ViewGroup parent ) { </a> 
<a> View result = <RARE_TOKEN> ; </a> 
<a> if ( result == null ) { </a> 
<a> result = <RARE_TOKEN> . <RARE_TOKEN> ( R . layout . <RARE_TOKEN> , null ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = ( <RARE_TOKEN> ) result . findViewById ( R . id . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . setVisibility ( View . <RARE_TOKEN> ) ; </a> 
<a> return result ; </a> 
<a> } </a> 
<a> protected int <RARE_TOKEN> ( T graphObject ) { </a> 
<a> return R . layout . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> protected int <RARE_TOKEN> ( ) { </a> 
<a> return R . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> protected View <RARE_TOKEN> ( T graphObject , View <RARE_TOKEN> ) { </a> 
<a> View result = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ( graphObject ) , null ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = ( <RARE_TOKEN> ) result . findViewById ( R . id . <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> if ( ! <RARE_TOKEN> ( ) ) { </a> 
<a> <RARE_TOKEN> . setVisibility ( View . <RARE_TOKEN> ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = ( <RARE_TOKEN> ) <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> , false ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = ( <RARE_TOKEN> ) result . findViewById ( R . id . <RARE_TOKEN> ) ; </a> 
<a> if ( ! <RARE_TOKEN> ( ) ) { </a> 
<a> <RARE_TOKEN> . setVisibility ( View . <RARE_TOKEN> ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = ( <RARE_TOKEN> ) <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> . setVisibility ( View . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> return result ; </a> 
<a> } </a> 
<a> protected void <RARE_TOKEN> ( View view , T graphObject ) { </a> 
<a> String id = <RARE_TOKEN> ( graphObject ) ; </a> 
<a> view . <RARE_TOKEN> ( id ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = <RARE_TOKEN> ( graphObject ) ; </a> 
<a> TextView <RARE_TOKEN> = ( TextView ) view . findViewById ( R . id . <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> . setText ( <RARE_TOKEN> , TextView . <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = <RARE_TOKEN> ( graphObject ) ; </a> 
<a> TextView <RARE_TOKEN> = ( TextView ) view . findViewById ( R . id . <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> . setText ( <RARE_TOKEN> , TextView . <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . setVisibility ( View . <RARE_TOKEN> ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> . setVisibility ( View . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> ( ) ) { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = ( <RARE_TOKEN> ) view . findViewById ( R . id . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ( id ) ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> ( ) ) { </a> 
<a> URL <RARE_TOKEN> = <RARE_TOKEN> ( graphObject ) ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = ( <RARE_TOKEN> ) view . findViewById ( R . id . <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> . containsKey ( id ) ) { </a> 
<a> <RARE_TOKEN> response = <RARE_TOKEN> . get ( id ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( response . <RARE_TOKEN> ( ) ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( response . getRequest ( ) . <RARE_TOKEN> ( ) ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> ( id , <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> String <RARE_TOKEN> ( T graphObject ) { </a> 
<a> if ( graphObject . <RARE_TOKEN> ( ) . containsKey ( ID ) ) { </a> 
<a> Object obj = graphObject . getProperty ( ID ) ; </a> 
<a> if ( obj instanceof String ) { </a> 
<a> return ( String ) obj ; </a> 
<a> } </a> 
<a> } </a> 
<a> throw new FacebookException ( <RARE_TOKEN> an object <RARE_TOKEN> an <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> boolean <RARE_TOKEN> ( T graphObject ) { </a> 
<a> return filter == null || filter . <RARE_TOKEN> ( graphObject ) ; </a> 
<a> } </a> 
<a> Filter < T > <RARE_TOKEN> ( ) { </a> 
<a> return filter ; </a> 
<a> } </a> 
<a> void <RARE_TOKEN> ( Filter < T > filter ) { </a> 
<a> this . filter = filter ; </a> 
<a> } </a> 
<a> boolean <RARE_TOKEN> ( String <RARE_TOKEN> ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> void <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> , boolean <RARE_TOKEN> ) { </a> 
<a> } </a> 
<a> String <RARE_TOKEN> ( ) { </a> 
<a> View view = <RARE_TOKEN> ( null , null ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = ( <RARE_TOKEN> ) view . findViewById ( R . id . <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> ViewGroup . LayoutParams <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> return String . format ( <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> private boolean <RARE_TOKEN> ( ) { </a> 
<a> return ( cursor != null ) && cursor . <RARE_TOKEN> ( ) && ( <RARE_TOKEN> != null ) && ! isEmpty ( ) ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> = new ArrayList < String > ( ) ; </a> 
<a> <RARE_TOKEN> = new HashMap < String , ArrayList < T > > ( ) ; </a> 
<a> <RARE_TOKEN> = new HashMap < String , T > ( ) ; </a> 
<a> <RARE_TOKEN> = false ; </a> 
<a> if ( cursor == null || cursor . <RARE_TOKEN> ( ) == 0 ) { </a> 
<a> return ; </a> 
<a> } </a> 
<a> int <RARE_TOKEN> = 0 ; </a> 
<a> cursor . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> { </a> 
<a> T graphObject = cursor . <RARE_TOKEN> ( ) ; </a> 
<a> if ( ! <RARE_TOKEN> ( graphObject ) ) { </a> 
<a> continue ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> ++ ; </a> 
<a> String <RARE_TOKEN> = <RARE_TOKEN> ( graphObject ) ; </a> 
<a> if ( ! <RARE_TOKEN> . containsKey ( <RARE_TOKEN> ) ) { </a> 
<a> <RARE_TOKEN> . add ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . put ( <RARE_TOKEN> , new ArrayList < T > ( ) ) ; </a> 
<a> } </a> 
<a> List < T > <RARE_TOKEN> = <RARE_TOKEN> . get ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . add ( graphObject ) ; </a> 
<a> <RARE_TOKEN> . put ( <RARE_TOKEN> ( graphObject ) , graphObject ) ; </a> 
<a> } while ( cursor . <RARE_TOKEN> ( ) ) ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> final <RARE_TOKEN> <RARE_TOKEN> = <RARE_TOKEN> . getInstance ( ) ; </a> 
<a> for ( List < T > <RARE_TOKEN> : <RARE_TOKEN> . values ( ) ) { </a> 
<a> Collections . <RARE_TOKEN> ( <RARE_TOKEN> , new <RARE_TOKEN> < GraphObject > ( ) { </a> 
<a> @ Override </a> 
<a> public int <RARE_TOKEN> ( GraphObject a , GraphObject b ) { </a> 
<a> return <RARE_TOKEN> ( a , b , <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> Collections . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> . getInstance ( ) ) ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . size ( ) > 1 && <RARE_TOKEN> > <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> < T > <RARE_TOKEN> ( int position ) { </a> 
<a> if ( <RARE_TOKEN> . size ( ) == 0 ) { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> String <RARE_TOKEN> = null ; </a> 
<a> T graphObject = null ; </a> 
<a> if ( ! <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . get ( 0 ) ; </a> 
<a> List < T > <RARE_TOKEN> = <RARE_TOKEN> . get ( <RARE_TOKEN> ) ; </a> 
<a> if ( position >= 0 && position < <RARE_TOKEN> . size ( ) ) { </a> 
<a> graphObject = <RARE_TOKEN> . get ( <RARE_TOKEN> ) . get ( position ) ; </a> 
<a> } else { </a> 
<a> assert <RARE_TOKEN> != null && cursor . <RARE_TOKEN> ( ) ; </a> 
<a> return new <RARE_TOKEN> < T > ( null , null ) ; </a> 
<a> } </a> 
<a> } else { </a> 
<a> for ( String key : <RARE_TOKEN> ) { </a> 
<a> if ( position -- == 0 ) { </a> 
<a> <RARE_TOKEN> = key ; </a> 
<a> break ; </a> 
<a> } </a> 
<a> List < T > <RARE_TOKEN> = <RARE_TOKEN> . get ( key ) ; </a> 
<a> if ( position < <RARE_TOKEN> . size ( ) ) { </a> 
<a> <RARE_TOKEN> = key ; </a> 
<a> graphObject = <RARE_TOKEN> . get ( position ) ; </a> 
<a> break ; </a> 
<a> } </a> 
<a> position -= <RARE_TOKEN> . size ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> return new <RARE_TOKEN> < T > ( <RARE_TOKEN> , graphObject ) ; </a> 
<a> } else { </a> 
<a> throw new IndexOutOfBoundsException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> int <RARE_TOKEN> ( String <RARE_TOKEN> , T graphObject ) { </a> 
<a> int position = 0 ; </a> 
<a> boolean <RARE_TOKEN> = false ; </a> 
<a> for ( String key : <RARE_TOKEN> ) { </a> 
<a> if ( <RARE_TOKEN> ) { </a> 
<a> position ++ ; </a> 
<a> } </a> 
<a> if ( key . equals ( <RARE_TOKEN> ) ) { </a> 
<a> <RARE_TOKEN> = true ; </a> 
<a> break ; </a> 
<a> } else { </a> 
<a> position += <RARE_TOKEN> . get ( key ) . size ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> if ( ! <RARE_TOKEN> ) { </a> 
<a> return - 1 ; </a> 
<a> } else if ( graphObject == null ) { </a> 
<a> return position - ( <RARE_TOKEN> ? 1 : 0 ) ; </a> 
<a> } </a> 
<a> for ( T t : <RARE_TOKEN> . get ( <RARE_TOKEN> ) ) { </a> 
<a> if ( GraphObject . Factory . <RARE_TOKEN> ( t , graphObject ) ) { </a> 
<a> return position ; </a> 
<a> } </a> 
<a> position ++ ; </a> 
<a> } </a> 
<a> return - 1 ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean isEmpty ( ) { </a> 
<a> return <RARE_TOKEN> . size ( ) == 0 ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int <RARE_TOKEN> ( ) { </a> 
<a> if ( <RARE_TOKEN> . size ( ) == 0 ) { </a> 
<a> return 0 ; </a> 
<a> } </a> 
<a> int count = ( <RARE_TOKEN> ) ? <RARE_TOKEN> . size ( ) : 0 ; </a> 
<a> for ( List < T > <RARE_TOKEN> : <RARE_TOKEN> . values ( ) ) { </a> 
<a> count += <RARE_TOKEN> . size ( ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> ( ) ) { </a> 
<a> ++ count ; </a> 
<a> } </a> 
<a> return count ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return true ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( int position ) { </a> 
<a> <RARE_TOKEN> < T > <RARE_TOKEN> = <RARE_TOKEN> ( position ) ; </a> 
<a> return <RARE_TOKEN> . getType ( ) == <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public Object <RARE_TOKEN> ( int position ) { </a> 
<a> <RARE_TOKEN> < T > <RARE_TOKEN> = <RARE_TOKEN> ( position ) ; </a> 
<a> return ( <RARE_TOKEN> . getType ( ) == <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> ) ? <RARE_TOKEN> . graphObject : null ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public long <RARE_TOKEN> ( int position ) { </a> 
<a> <RARE_TOKEN> < T > <RARE_TOKEN> = <RARE_TOKEN> ( position ) ; </a> 
<a> if ( <RARE_TOKEN> != null && <RARE_TOKEN> . graphObject != null ) { </a> 
<a> String id = <RARE_TOKEN> ( <RARE_TOKEN> . graphObject ) ; </a> 
<a> if ( id != null ) { </a> 
<a> return Long . <RARE_TOKEN> ( id ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> return 0 ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int <RARE_TOKEN> ( ) { </a> 
<a> return 3 ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int <RARE_TOKEN> ( int position ) { </a> 
<a> <RARE_TOKEN> < T > <RARE_TOKEN> = <RARE_TOKEN> ( position ) ; </a> 
<a> switch ( <RARE_TOKEN> . getType ( ) ) { </a> 
<a> case <RARE_TOKEN> : </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> default : </a> 
<a> throw new FacebookException ( "Unexpected type of <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public View <RARE_TOKEN> ( int position , View <RARE_TOKEN> , ViewGroup parent ) { </a> 
<a> <RARE_TOKEN> < T > <RARE_TOKEN> = <RARE_TOKEN> ( position ) ; </a> 
<a> switch ( <RARE_TOKEN> . getType ( ) ) { </a> 
<a> case <RARE_TOKEN> : </a> 
<a> return <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> , <RARE_TOKEN> , parent ) ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> return <RARE_TOKEN> ( <RARE_TOKEN> . graphObject , <RARE_TOKEN> , parent ) ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> assert cursor . <RARE_TOKEN> ( ) && ( <RARE_TOKEN> != null ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> return <RARE_TOKEN> ( <RARE_TOKEN> , parent ) ; </a> 
<a> default : </a> 
<a> throw new FacebookException ( "Unexpected type of <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public Object [ ] <RARE_TOKEN> ( ) { </a> 
<a> if ( <RARE_TOKEN> ) { </a> 
<a> return <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> } else { </a> 
<a> return new Object [ 0 ] ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int <RARE_TOKEN> ( int <RARE_TOKEN> ) { </a> 
<a> if ( <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> = Math . <RARE_TOKEN> ( 0 , Math . min ( <RARE_TOKEN> , <RARE_TOKEN> . size ( ) - 1 ) ) ; </a> 
<a> if ( <RARE_TOKEN> < <RARE_TOKEN> . size ( ) ) { </a> 
<a> return <RARE_TOKEN> ( <RARE_TOKEN> . get ( <RARE_TOKEN> ) , null ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> return 0 ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int <RARE_TOKEN> ( int position ) { </a> 
<a> <RARE_TOKEN> < T > <RARE_TOKEN> = <RARE_TOKEN> ( position ) ; </a> 
<a> if ( <RARE_TOKEN> != null && </a> 
<a> <RARE_TOKEN> . getType ( ) != <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> ) { </a> 
<a> return Math . <RARE_TOKEN> ( 0 , Math . min ( <RARE_TOKEN> . indexOf ( <RARE_TOKEN> . <RARE_TOKEN> ) , <RARE_TOKEN> . size ( ) - 1 ) ) ; </a> 
<a> } </a> 
<a> return 0 ; </a> 
<a> } </a> 
<a> public List < T > <RARE_TOKEN> ( Collection < String > <RARE_TOKEN> ) { </a> 
<a> Set < String > <RARE_TOKEN> = new HashSet < String > ( ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> ArrayList < T > result = new ArrayList < T > ( <RARE_TOKEN> . size ( ) ) ; </a> 
<a> for ( String id : <RARE_TOKEN> ) { </a> 
<a> T graphObject = <RARE_TOKEN> . get ( id ) ; </a> 
<a> if ( graphObject != null ) { </a> 
<a> result . add ( graphObject ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> return result ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( final String <RARE_TOKEN> , URL <RARE_TOKEN> , final <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> return ; </a> 
<a> } </a> 
<a> boolean <RARE_TOKEN> = <RARE_TOKEN> == null ; </a> 
<a> if ( <RARE_TOKEN> || ! <RARE_TOKEN> . equals ( <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ) { </a> 
<a> if ( ! <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> . Builder builder = new <RARE_TOKEN> . Builder ( context . <RARE_TOKEN> ( ) , <RARE_TOKEN> ) </a> 
<a> . <RARE_TOKEN> ( this ) </a> 
<a> . setCallback ( </a> 
<a> new <RARE_TOKEN> . Callback ( ) { </a> 
<a> @ Override </a> 
<a> public void onCompleted ( <RARE_TOKEN> response ) { </a> 
<a> <RARE_TOKEN> ( response , <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = builder . build ( ) ; </a> 
<a> <RARE_TOKEN> . put ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( <RARE_TOKEN> response , String <RARE_TOKEN> , <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> . remove ( <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> if ( response . <RARE_TOKEN> ( ) != null ) { </a> 
<a> if ( <RARE_TOKEN> . size ( ) >= <RARE_TOKEN> ) { </a> 
<a> String <RARE_TOKEN> = <RARE_TOKEN> . remove ( 0 ) ; </a> 
<a> <RARE_TOKEN> . remove ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> . put ( <RARE_TOKEN> , response ) ; </a> 
<a> } </a> 
<a> } else if ( <RARE_TOKEN> != null && <RARE_TOKEN> . equals ( <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ) { </a> 
<a> Exception error = response . getError ( ) ; </a> 
<a> Bitmap <RARE_TOKEN> = response . <RARE_TOKEN> ( ) ; </a> 
<a> if ( error == null && <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( response . getRequest ( ) . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> private static int <RARE_TOKEN> ( GraphObject a , GraphObject b , Collection < String > <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> for ( String <RARE_TOKEN> : <RARE_TOKEN> ) { </a> 
<a> String <RARE_TOKEN> = ( String ) a . getProperty ( <RARE_TOKEN> ) ; </a> 
<a> String sb = ( String ) b . getProperty ( <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> != null && sb != null ) { </a> 
<a> int result = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> , sb ) ; </a> 
<a> if ( result != 0 ) { </a> 
<a> return result ; </a> 
<a> } </a> 
<a> } else if ( ! ( <RARE_TOKEN> == null && sb == null ) ) { </a> 
<a> return ( <RARE_TOKEN> == null ) ? - 1 : 1 ; </a> 
<a> } </a> 
<a> } </a> 
<a> return 0 ; </a> 
<a> } </a> 
<a> private interface <RARE_TOKEN> extends GraphObject { </a> 
<a> <RARE_TOKEN> getData ( ) ; </a> 
<a> } </a> 
<a> private interface <RARE_TOKEN> extends GraphObject { </a> 
<a> String <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package com . facebook . widget ; </a> 
<a> import com . facebook . model . GraphObject ; </a> 
<a> interface <RARE_TOKEN> < T extends GraphObject > { </a> 
<a> boolean <RARE_TOKEN> ( ) ; </a> 
<a> boolean <RARE_TOKEN> ( ) ; </a> 
<a> int <RARE_TOKEN> ( ) ; </a> 
<a> int <RARE_TOKEN> ( ) ; </a> 
<a> boolean <RARE_TOKEN> ( int offset ) ; </a> 
<a> boolean <RARE_TOKEN> ( int position ) ; </a> 
<a> boolean <RARE_TOKEN> ( ) ; </a> 
<a> boolean <RARE_TOKEN> ( ) ; </a> 
<a> boolean <RARE_TOKEN> ( ) ; </a> 
<a> boolean <RARE_TOKEN> ( ) ; </a> 
<a> boolean <RARE_TOKEN> ( ) ; </a> 
<a> boolean isLast ( ) ; </a> 
<a> boolean <RARE_TOKEN> ( ) ; </a> 
<a> boolean <RARE_TOKEN> ( ) ; </a> 
<a> T <RARE_TOKEN> ( ) ; </a> 
<a> void close ( ) ; </a> 
<a> boolean <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package com . facebook . widget ; </a> 
<a> import android . content . Context ; </a> 
<a> import android . os . Handler ; </a> 
<a> import android . support . v4 . content . <RARE_TOKEN> ; </a> 
<a> import com . facebook . * ; </a> 
<a> import com . facebook . model . GraphObject ; </a> 
<a> import com . facebook . model . GraphObjectList ; </a> 
<a> import com . facebook . internal . <RARE_TOKEN> ; </a> 
<a> class <RARE_TOKEN> < T extends GraphObject > extends <RARE_TOKEN> < <RARE_TOKEN> < T > > { </a> 
<a> private final Class < T > graphObjectClass ; </a> 
<a> private boolean <RARE_TOKEN> ; </a> 
<a> private Request <RARE_TOKEN> ; </a> 
<a> private Request <RARE_TOKEN> ; </a> 
<a> private Request <RARE_TOKEN> ; </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> private <RARE_TOKEN> < T > cursor ; </a> 
<a> private boolean <RARE_TOKEN> = false ; </a> 
<a> private boolean <RARE_TOKEN> = false ; </a> 
<a> public interface <RARE_TOKEN> { </a> 
<a> public void onError ( FacebookException error , <RARE_TOKEN> < ? > loader ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( Context context , Class < T > graphObjectClass ) { </a> 
<a> super ( context ) ; </a> 
<a> this . graphObjectClass = graphObjectClass ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( <RARE_TOKEN> listener ) { </a> 
<a> this . <RARE_TOKEN> = listener ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> < T > <RARE_TOKEN> ( ) { </a> 
<a> return cursor ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> = null ; </a> 
<a> <RARE_TOKEN> = null ; </a> 
<a> <RARE_TOKEN> = null ; </a> 
<a> <RARE_TOKEN> ( null ) ; </a> 
<a> } </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( Request request , boolean <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> = request ; </a> 
<a> <RARE_TOKEN> ( request , <RARE_TOKEN> , 0 ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( long <RARE_TOKEN> ) { </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> throw new FacebookException ( </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> not be <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> has <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> , false , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> = true ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> . setCallback ( new Request . Callback ( ) { </a> 
<a> @ Override </a> 
<a> public void onCompleted ( Response response ) { </a> 
<a> <RARE_TOKEN> ( response ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> <RARE_TOKEN> = true ; </a> 
<a> <RARE_TOKEN> batch = <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> Request . <RARE_TOKEN> ( batch ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( <RARE_TOKEN> < T > cursor ) { </a> 
<a> <RARE_TOKEN> < T > <RARE_TOKEN> = this . cursor ; </a> 
<a> this . cursor = cursor ; </a> 
<a> if ( <RARE_TOKEN> ( ) ) { </a> 
<a> super . <RARE_TOKEN> ( cursor ) ; </a> 
<a> if ( <RARE_TOKEN> != null && <RARE_TOKEN> != cursor && ! <RARE_TOKEN> . <RARE_TOKEN> ( ) ) { </a> 
<a> <RARE_TOKEN> . close ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( ) { </a> 
<a> super . <RARE_TOKEN> ( ) ; </a> 
<a> if ( cursor != null ) { </a> 
<a> <RARE_TOKEN> ( cursor ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( Request request , boolean <RARE_TOKEN> , long <RARE_TOKEN> ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = false ; </a> 
<a> <RARE_TOKEN> = null ; </a> 
<a> <RARE_TOKEN> = request ; </a> 
<a> <RARE_TOKEN> . setCallback ( new Request . Callback ( ) { </a> 
<a> @ Override </a> 
<a> public void onCompleted ( Response response ) { </a> 
<a> <RARE_TOKEN> ( response ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> <RARE_TOKEN> = true ; </a> 
<a> final RequestBatch batch = <RARE_TOKEN> ( request , <RARE_TOKEN> ) ; </a> 
<a> Runnable r = new Runnable ( ) { </a> 
<a> @ Override </a> 
<a> public void run ( ) { </a> 
<a> Request . <RARE_TOKEN> ( batch ) ; </a> 
<a> } </a> 
<a> } ; </a> 
<a> if ( <RARE_TOKEN> == 0 ) { </a> 
<a> r . run ( ) ; </a> 
<a> } else { </a> 
<a> Handler handler = new Handler ( ) ; </a> 
<a> handler . <RARE_TOKEN> ( r , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> ( Request request , boolean <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> batch = new <RARE_TOKEN> ( request ) ; </a> 
<a> batch . <RARE_TOKEN> ( ! <RARE_TOKEN> ) ; </a> 
<a> return batch ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( Response response ) { </a> 
<a> Request request = response . getRequest ( ) ; </a> 
<a> if ( request != <RARE_TOKEN> ) { </a> 
<a> return ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> = false ; </a> 
<a> <RARE_TOKEN> = null ; </a> 
<a> FacebookRequestError <RARE_TOKEN> = response . getError ( ) ; </a> 
<a> FacebookException exception = ( <RARE_TOKEN> == null ) ? null : <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> if ( response . <RARE_TOKEN> ( ) == null && exception == null ) { </a> 
<a> exception = new FacebookException ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> a result <RARE_TOKEN> an <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( exception != null ) { </a> 
<a> <RARE_TOKEN> = null ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> . onError ( exception , this ) ; </a> 
<a> } </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> ( response ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( Response response ) { </a> 
<a> <RARE_TOKEN> < T > <RARE_TOKEN> = ( cursor == null || ! <RARE_TOKEN> ) ? new <RARE_TOKEN> < T > ( ) : </a> 
<a> new <RARE_TOKEN> < T > ( cursor ) ; </a> 
<a> <RARE_TOKEN> result = response . <RARE_TOKEN> ( <RARE_TOKEN> . class ) ; </a> 
<a> boolean <RARE_TOKEN> = response . <RARE_TOKEN> ( ) ; </a> 
<a> GraphObjectList < T > data = result . getData ( ) . <RARE_TOKEN> ( graphObjectClass ) ; </a> 
<a> boolean <RARE_TOKEN> = data . size ( ) > 0 ; </a> 
<a> if ( <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> = response . <RARE_TOKEN> ( Response . <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( data , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( true ) ; </a> 
<a> } </a> 
<a> if ( ! <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( false ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = null ; </a> 
<a> } </a> 
<a> if ( ! <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> = false ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> interface <RARE_TOKEN> extends GraphObject { </a> 
<a> GraphObjectList < GraphObject > getData ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package com . facebook . widget ; </a> 
<a> import android . <RARE_TOKEN> . Bitmap ; </a> 
<a> class <RARE_TOKEN> { </a> 
<a> private <RARE_TOKEN> request ; </a> 
<a> private Exception error ; </a> 
<a> private boolean <RARE_TOKEN> ; </a> 
<a> private Bitmap <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> request , Exception error , boolean <RARE_TOKEN> , Bitmap <RARE_TOKEN> ) { </a> 
<a> this . request = request ; </a> 
<a> this . error = error ; </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> getRequest ( ) { </a> 
<a> return request ; </a> 
<a> } </a> 
<a> Exception getError ( ) { </a> 
<a> return error ; </a> 
<a> } </a> 
<a> Bitmap <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> boolean <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package com . facebook . widget ; </a> 
<a> import android . content . Context ; </a> 
<a> import android . util . Log ; </a> 
<a> import com . facebook . internal . Logger ; </a> 
<a> import com . facebook . LoggingBehavior ; </a> 
<a> import com . facebook . internal . Utility ; </a> 
<a> import com . facebook . internal . FileLruCache ; </a> 
<a> import java . io . <RARE_TOKEN> ; </a> 
<a> import java . io . IOException ; </a> 
<a> import java . io . InputStream ; </a> 
<a> import java . net . HttpURLConnection ; </a> 
<a> import java . net . URL ; </a> 
<a> class <RARE_TOKEN> { </a> 
<a> static final String TAG = <RARE_TOKEN> . class . getSimpleName ( ) ; </a> 
<a> private volatile static FileLruCache <RARE_TOKEN> ; </a> 
<a> synchronized static FileLruCache <RARE_TOKEN> ( Context context ) throws IOException { </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> <RARE_TOKEN> = new FileLruCache ( context . <RARE_TOKEN> ( ) , TAG , new FileLruCache . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> static InputStream <RARE_TOKEN> ( URL url , Context context ) { </a> 
<a> InputStream <RARE_TOKEN> = null ; </a> 
<a> if ( url != null ) { </a> 
<a> if ( <RARE_TOKEN> ( url ) ) { </a> 
<a> try { </a> 
<a> FileLruCache cache = <RARE_TOKEN> ( context ) ; </a> 
<a> <RARE_TOKEN> = cache . get ( url . toString ( ) ) ; </a> 
<a> } catch ( IOException e ) { </a> 
<a> Logger . log ( LoggingBehavior . <RARE_TOKEN> , Log . <RARE_TOKEN> , TAG , e . toString ( ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> static InputStream <RARE_TOKEN> ( Context context , HttpURLConnection connection ) throws IOException { </a> 
<a> InputStream stream = null ; </a> 
<a> if ( connection . <RARE_TOKEN> ( ) == HttpURLConnection . <RARE_TOKEN> ) { </a> 
<a> URL url = connection . <RARE_TOKEN> ( ) ; </a> 
<a> stream = connection . <RARE_TOKEN> ( ) ; </a> 
<a> if ( <RARE_TOKEN> ( url ) ) { </a> 
<a> try { </a> 
<a> FileLruCache cache = <RARE_TOKEN> ( context ) ; </a> 
<a> stream = cache . <RARE_TOKEN> ( </a> 
<a> url . toString ( ) , </a> 
<a> new <RARE_TOKEN> ( stream , connection ) ) ; </a> 
<a> } catch ( IOException e ) { </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> return stream ; </a> 
<a> } </a> 
<a> private static boolean <RARE_TOKEN> ( URL url ) { </a> 
<a> if ( url != null ) { </a> 
<a> String <RARE_TOKEN> = url . <RARE_TOKEN> ( ) ; </a> 
<a> if ( <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ) { </a> 
<a> return true ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> . startsWith ( <RARE_TOKEN> ) && <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ) { </a> 
<a> return true ; </a> 
<a> } </a> 
<a> } </a> 
<a> return false ; </a> 
<a> } </a> 
<a> private static class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> HttpURLConnection connection ; </a> 
<a> <RARE_TOKEN> ( InputStream stream , HttpURLConnection connection ) { </a> 
<a> super ( stream , Utility . <RARE_TOKEN> ) ; </a> 
<a> this . connection = connection ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void close ( ) throws IOException { </a> 
<a> super . close ( ) ; </a> 
<a> Utility . <RARE_TOKEN> ( connection ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package com . facebook . widget ; </a> 
<a> import android . app . Activity ; </a> 
<a> import android . app . <RARE_TOKEN> ; </a> 
<a> import android . content . Context ; </a> 
<a> import android . content . DialogInterface ; </a> 
<a> import android . content . Intent ; </a> 
<a> import android . content . res . <RARE_TOKEN> ; </a> 
<a> import android . support . v4 . app . <RARE_TOKEN> ; </a> 
<a> import android . util . <RARE_TOKEN> ; </a> 
<a> import android . util . Log ; </a> 
<a> import android . util . <RARE_TOKEN> ; </a> 
<a> import android . view . <RARE_TOKEN> ; </a> 
<a> import android . view . View ; </a> 
<a> import android . widget . Button ; </a> 
<a> import com . facebook . * ; </a> 
<a> import com . facebook . android . R ; </a> 
<a> import com . facebook . model . GraphUser ; </a> 
<a> import com . facebook . internal . <RARE_TOKEN> ; </a> 
<a> import com . facebook . internal . <RARE_TOKEN> ; </a> 
<a> import com . facebook . internal . Utility ; </a> 
<a> import java . util . Collections ; </a> 
<a> import java . util . List ; </a> 
<a> public class LoginButton extends Button { </a> 
<a> private static final String TAG = LoginButton . class . getName ( ) ; </a> 
<a> private String applicationId = null ; </a> 
<a> private <RARE_TOKEN> sessionTracker ; </a> 
<a> private GraphUser user = null ; </a> 
<a> private Session <RARE_TOKEN> = null ; </a> 
<a> private boolean <RARE_TOKEN> ; </a> 
<a> private boolean <RARE_TOKEN> ; </a> 
<a> private String <RARE_TOKEN> ; </a> 
<a> private String <RARE_TOKEN> ; </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( ) ; </a> 
<a> static class <RARE_TOKEN> { </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> private List < String > permissions = Collections . < String > <RARE_TOKEN> ( ) ; </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> = null ; </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> private SessionLoginBehavior loginBehavior = SessionLoginBehavior . <RARE_TOKEN> ; </a> 
<a> private Session . StatusCallback <RARE_TOKEN> ; </a> 
<a> public void <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( List < String > permissions , Session session ) { </a> 
<a> if ( <RARE_TOKEN> . <RARE_TOKEN> . equals ( <RARE_TOKEN> ) ) { </a> 
<a> throw new UnsupportedOperationException ( </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> has <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> ( permissions , <RARE_TOKEN> . <RARE_TOKEN> , session ) ) { </a> 
<a> this . permissions = permissions ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( List < String > permissions , Session session ) { </a> 
<a> if ( <RARE_TOKEN> . <RARE_TOKEN> . equals ( <RARE_TOKEN> ) ) { </a> 
<a> throw new UnsupportedOperationException ( </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> has <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> ( permissions , <RARE_TOKEN> . <RARE_TOKEN> , session ) ) { </a> 
<a> this . permissions = permissions ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<a> private boolean <RARE_TOKEN> ( List < String > permissions , </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> , Session currentSession ) { </a> 
<a> if ( <RARE_TOKEN> . <RARE_TOKEN> . equals ( <RARE_TOKEN> ) ) { </a> 
<a> if ( Utility . <RARE_TOKEN> ( permissions ) ) { </a> 
<a> throw new IllegalArgumentException ( <RARE_TOKEN> for <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> be null or <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> if ( currentSession != null && currentSession . isOpened ( ) ) { </a> 
<a> if ( ! Utility . <RARE_TOKEN> ( permissions , currentSession . getPermissions ( ) ) ) { </a> 
<a> Log . e ( TAG , <RARE_TOKEN> set <RARE_TOKEN> permissions <RARE_TOKEN> session is <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> return false ; </a> 
<a> } </a> 
<a> } </a> 
<a> return true ; </a> 
<a> } </a> 
<a> List < String > getPermissions ( ) { </a> 
<a> return permissions ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> permissions = null ; </a> 
<a> <RARE_TOKEN> = null ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( SessionLoginBehavior loginBehavior ) { </a> 
<a> this . loginBehavior = loginBehavior ; </a> 
<a> } </a> 
<a> public SessionLoginBehavior <RARE_TOKEN> ( ) { </a> 
<a> return loginBehavior ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( Session . StatusCallback callback ) { </a> 
<a> this . <RARE_TOKEN> = callback ; </a> 
<a> } </a> 
<a> public Session . StatusCallback <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<a> public interface <RARE_TOKEN> { </a> 
<a> void <RARE_TOKEN> ( GraphUser user ) ; </a> 
<a> } </a> 
<a> public interface <RARE_TOKEN> { </a> 
<a> void onError ( FacebookException error ) ; </a> 
<a> } </a> 
<a> public LoginButton ( Context context ) { </a> 
<a> super ( context ) ; </a> 
<a> <RARE_TOKEN> ( context ) ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> public LoginButton ( Context context , <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> super ( context , <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> . <RARE_TOKEN> ( ) == 0 ) { </a> 
<a> this . <RARE_TOKEN> ( getResources ( ) . <RARE_TOKEN> ( R . <RARE_TOKEN> . <RARE_TOKEN> ) ) ; </a> 
<a> this . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> , </a> 
<a> getResources ( ) . <RARE_TOKEN> ( R . <RARE_TOKEN> . <RARE_TOKEN> ) ) ; </a> 
<a> this . <RARE_TOKEN> ( getResources ( ) . <RARE_TOKEN> ( R . <RARE_TOKEN> . <RARE_TOKEN> ) , </a> 
<a> getResources ( ) . <RARE_TOKEN> ( R . <RARE_TOKEN> . <RARE_TOKEN> ) , </a> 
<a> getResources ( ) . <RARE_TOKEN> ( R . <RARE_TOKEN> . <RARE_TOKEN> ) , </a> 
<a> getResources ( ) . <RARE_TOKEN> ( R . <RARE_TOKEN> . <RARE_TOKEN> ) ) ; </a> 
<a> this . <RARE_TOKEN> ( getResources ( ) . <RARE_TOKEN> ( R . <RARE_TOKEN> . <RARE_TOKEN> ) ) ; </a> 
<a> this . <RARE_TOKEN> ( getResources ( ) . <RARE_TOKEN> ( R . <RARE_TOKEN> . <RARE_TOKEN> ) ) ; </a> 
<a> this . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> ( ) ) { </a> 
<a> this . <RARE_TOKEN> ( getResources ( ) . <RARE_TOKEN> ( R . <RARE_TOKEN> . <RARE_TOKEN> ) ) ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> } else { </a> 
<a> this . <RARE_TOKEN> ( R . <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( context ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> public LoginButton ( Context context , <RARE_TOKEN> <RARE_TOKEN> , int <RARE_TOKEN> ) { </a> 
<a> super ( context , <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( context ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( List < String > permissions ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( permissions , sessionTracker . getSession ( ) ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( List < String > permissions ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( permissions , sessionTracker . getSession ( ) ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( SessionLoginBehavior loginBehavior ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( loginBehavior ) ; </a> 
<a> } </a> 
<a> public SessionLoginBehavior <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( String applicationId ) { </a> 
<a> this . applicationId = applicationId ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( Session . StatusCallback callback ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( callback ) ; </a> 
<a> } </a> 
<a> public Session . StatusCallback <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> public boolean onActivityResult ( int requestCode , int resultCode , Intent data ) { </a> 
<a> Session session = sessionTracker . getSession ( ) ; </a> 
<a> if ( session != null ) { </a> 
<a> return session . onActivityResult ( ( Activity ) getContext ( ) , requestCode , </a> 
<a> resultCode , data ) ; </a> 
<a> } else { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( Session <RARE_TOKEN> ) { </a> 
<a> sessionTracker . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> super . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( ) { </a> 
<a> setOnClickListener ( new <RARE_TOKEN> ( ) ) ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> if ( ! <RARE_TOKEN> ( ) ) { </a> 
<a> sessionTracker = new <RARE_TOKEN> ( getContext ( ) , new <RARE_TOKEN> ( ) , null , false ) ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( <RARE_TOKEN> fragment ) { </a> 
<a> <RARE_TOKEN> = fragment ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( ) { </a> 
<a> super . <RARE_TOKEN> ( ) ; </a> 
<a> if ( sessionTracker != null && ! sessionTracker . <RARE_TOKEN> ( ) ) { </a> 
<a> sessionTracker . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( ) { </a> 
<a> super . <RARE_TOKEN> ( ) ; </a> 
<a> if ( sessionTracker != null ) { </a> 
<a> sessionTracker . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> List < String > getPermissions ( ) { </a> 
<a> return <RARE_TOKEN> . getPermissions ( ) ; </a> 
<a> } </a> 
<a> void <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> a = getContext ( ) . <RARE_TOKEN> ( <RARE_TOKEN> , R . <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = a . <RARE_TOKEN> ( R . <RARE_TOKEN> . <RARE_TOKEN> , true ) ; </a> 
<a> <RARE_TOKEN> = a . <RARE_TOKEN> ( R . <RARE_TOKEN> . <RARE_TOKEN> , true ) ; </a> 
<a> <RARE_TOKEN> = a . getString ( R . <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = a . getString ( R . <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> a . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( ) { </a> 
<a> if ( sessionTracker != null && sessionTracker . <RARE_TOKEN> ( ) != null ) { </a> 
<a> setText ( ( <RARE_TOKEN> != null ) ? <RARE_TOKEN> : </a> 
<a> getResources ( ) . getString ( R . string . <RARE_TOKEN> ) ) ; </a> 
<a> } else { </a> 
<a> setText ( ( <RARE_TOKEN> != null ) ? <RARE_TOKEN> : </a> 
<a> getResources ( ) . getString ( R . string . <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private boolean <RARE_TOKEN> ( Context context ) { </a> 
<a> if ( context == null ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> Session session = Session . getActiveSession ( ) ; </a> 
<a> if ( session != null ) { </a> 
<a> return session . isOpened ( ) ; </a> 
<a> } </a> 
<a> String applicationId = Utility . <RARE_TOKEN> ( context ) ; </a> 
<a> if ( applicationId == null ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> return Session . <RARE_TOKEN> ( context ) != null ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( ) { </a> 
<a> if ( <RARE_TOKEN> ) { </a> 
<a> final Session currentSession = sessionTracker . <RARE_TOKEN> ( ) ; </a> 
<a> if ( currentSession != null ) { </a> 
<a> if ( currentSession != <RARE_TOKEN> ) { </a> 
<a> Request request = Request . <RARE_TOKEN> ( currentSession , new Request . <RARE_TOKEN> ( ) { </a> 
<a> @ Override </a> 
<a> public void onCompleted ( GraphUser <RARE_TOKEN> , Response response ) { </a> 
<a> if ( currentSession == sessionTracker . <RARE_TOKEN> ( ) ) { </a> 
<a> user = <RARE_TOKEN> ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( user ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> if ( response . getError ( ) != null ) { </a> 
<a> <RARE_TOKEN> ( response . getError ( ) . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> Request . <RARE_TOKEN> ( request ) ; </a> 
<a> <RARE_TOKEN> = currentSession ; </a> 
<a> } </a> 
<a> } else { </a> 
<a> user = null ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( user ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> private class <RARE_TOKEN> implements OnClickListener { </a> 
<a> @ Override </a> 
<a> public void onClick ( View v ) { </a> 
<a> Context context = getContext ( ) ; </a> 
<a> final Session <RARE_TOKEN> = sessionTracker . <RARE_TOKEN> ( ) ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> if ( <RARE_TOKEN> ) { </a> 
<a> String <RARE_TOKEN> = getResources ( ) . getString ( R . string . <RARE_TOKEN> ) ; </a> 
<a> String cancel = getResources ( ) . getString ( R . string . <RARE_TOKEN> ) ; </a> 
<a> String message ; </a> 
<a> if ( user != null && user . getName ( ) != null ) { </a> 
<a> message = String . format ( getResources ( ) . getString ( R . string . <RARE_TOKEN> ) , user . getName ( ) ) ; </a> 
<a> } else { </a> 
<a> message = getResources ( ) . getString ( R . string . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> . Builder builder = new <RARE_TOKEN> . Builder ( context ) ; </a> 
<a> builder . <RARE_TOKEN> ( message ) </a> 
<a> . <RARE_TOKEN> ( true ) </a> 
<a> . <RARE_TOKEN> ( <RARE_TOKEN> , new DialogInterface . OnClickListener ( ) { </a> 
<a> public void onClick ( DialogInterface dialog , int <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } ) </a> 
<a> . <RARE_TOKEN> ( cancel , null ) ; </a> 
<a> builder . create ( ) . show ( ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } else { </a> 
<a> Session currentSession = sessionTracker . getSession ( ) ; </a> 
<a> if ( currentSession == null || currentSession . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( ) ) { </a> 
<a> sessionTracker . <RARE_TOKEN> ( null ) ; </a> 
<a> Session session = new Session . Builder ( context ) . <RARE_TOKEN> ( applicationId ) . build ( ) ; </a> 
<a> Session . <RARE_TOKEN> ( session ) ; </a> 
<a> currentSession = session ; </a> 
<a> } </a> 
<a> if ( ! currentSession . isOpened ( ) ) { </a> 
<a> Session . OpenRequest openRequest = null ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> openRequest = new Session . OpenRequest ( <RARE_TOKEN> ) ; </a> 
<a> } else if ( context instanceof Activity ) { </a> 
<a> openRequest = new Session . OpenRequest ( ( Activity ) context ) ; </a> 
<a> } </a> 
<a> if ( openRequest != null ) { </a> 
<a> openRequest . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> openRequest . <RARE_TOKEN> ( <RARE_TOKEN> . permissions ) ; </a> 
<a> openRequest . <RARE_TOKEN> ( <RARE_TOKEN> . loginBehavior ) ; </a> 
<a> if ( <RARE_TOKEN> . <RARE_TOKEN> . equals ( <RARE_TOKEN> . <RARE_TOKEN> ) ) { </a> 
<a> currentSession . <RARE_TOKEN> ( openRequest ) ; </a> 
<a> } else { </a> 
<a> currentSession . <RARE_TOKEN> ( openRequest ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> private class <RARE_TOKEN> implements Session . StatusCallback { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( Session session , SessionState state , </a> 
<a> Exception exception ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> if ( exception != null ) { </a> 
<a> <RARE_TOKEN> ( exception ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> . <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> ( session , state , exception ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } ; </a> 
<a> void <RARE_TOKEN> ( Exception exception ) { </a> 
<a> if ( <RARE_TOKEN> . <RARE_TOKEN> != null ) { </a> 
<a> if ( exception instanceof FacebookException ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> . onError ( ( FacebookException ) exception ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> . onError ( new FacebookException ( exception ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package com . facebook . widget ; </a> 
<a> import android . app . Activity ; </a> 
<a> import android . content . Context ; </a> 
<a> import android . content . res . <RARE_TOKEN> ; </a> 
<a> import android . <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import android . os . Bundle ; </a> 
<a> import android . support . v4 . app . <RARE_TOKEN> ; </a> 
<a> import android . support . v4 . app . <RARE_TOKEN> ; </a> 
<a> import android . support . v4 . content . <RARE_TOKEN> ; </a> 
<a> import android . text . <RARE_TOKEN> ; </a> 
<a> import android . util . <RARE_TOKEN> ; </a> 
<a> import android . view . <RARE_TOKEN> ; </a> 
<a> import android . view . View ; </a> 
<a> import android . view . ViewGroup ; </a> 
<a> import android . view . <RARE_TOKEN> ; </a> 
<a> import android . view . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import android . widget . * ; </a> 
<a> import com . facebook . * ; </a> 
<a> import com . facebook . android . R ; </a> 
<a> import com . facebook . model . GraphObject ; </a> 
<a> import com . facebook . internal . <RARE_TOKEN> ; </a> 
<a> import java . util . * ; </a> 
<a> public abstract class PickerFragment < T extends GraphObject > extends <RARE_TOKEN> { </a> 
<a> public static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> public static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> public static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> public static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> public static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final int <RARE_TOKEN> = 5 ; </a> 
<a> private final int layout ; </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> private <RARE_TOKEN> < T > filter ; </a> 
<a> private boolean <RARE_TOKEN> = true ; </a> 
<a> private boolean <RARE_TOKEN> = true ; </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> HashSet < String > <RARE_TOKEN> = new HashSet < String > ( ) ; </a> 
<a> <RARE_TOKEN> < T > adapter ; </a> 
<a> private final Class < T > graphObjectClass ; </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> private <RARE_TOKEN> sessionTracker ; </a> 
<a> private String <RARE_TOKEN> ; </a> 
<a> private String <RARE_TOKEN> ; </a> 
<a> private TextView <RARE_TOKEN> ; </a> 
<a> private Button <RARE_TOKEN> ; </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> PickerFragment ( Class < T > graphObjectClass , int layout , Bundle args ) { </a> 
<a> this . graphObjectClass = graphObjectClass ; </a> 
<a> this . layout = layout ; </a> 
<a> <RARE_TOKEN> ( args ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void onCreate ( Bundle savedInstanceState ) { </a> 
<a> super . onCreate ( savedInstanceState ) ; </a> 
<a> adapter = <RARE_TOKEN> ( ) ; </a> 
<a> adapter . <RARE_TOKEN> ( new <RARE_TOKEN> . Filter < T > ( ) { </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( T graphObject ) { </a> 
<a> return <RARE_TOKEN> ( graphObject ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( Activity activity , <RARE_TOKEN> <RARE_TOKEN> , Bundle savedInstanceState ) { </a> 
<a> super . <RARE_TOKEN> ( activity , <RARE_TOKEN> , savedInstanceState ) ; </a> 
<a> <RARE_TOKEN> a = activity . <RARE_TOKEN> ( <RARE_TOKEN> , R . <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( a . <RARE_TOKEN> ( R . <RARE_TOKEN> . <RARE_TOKEN> , <RARE_TOKEN> ) ) ; </a> 
<a> String <RARE_TOKEN> = a . getString ( R . <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> String [ ] <RARE_TOKEN> = <RARE_TOKEN> . split ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( Arrays . asList ( <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> = a . <RARE_TOKEN> ( R . <RARE_TOKEN> . <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = a . getString ( R . <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = a . getString ( R . <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = a . <RARE_TOKEN> ( R . <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = a . <RARE_TOKEN> ( R . <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> a . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public View <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> , ViewGroup container , Bundle savedInstanceState ) { </a> 
<a> ViewGroup view = ( ViewGroup ) <RARE_TOKEN> . <RARE_TOKEN> ( layout , container , false ) ; </a> 
<a> <RARE_TOKEN> = ( <RARE_TOKEN> ) view . findViewById ( R . id . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( new <RARE_TOKEN> . <RARE_TOKEN> ( ) { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( <RARE_TOKEN> < ? > parent , View v , int position , long id ) { </a> 
<a> <RARE_TOKEN> ( ( <RARE_TOKEN> ) parent , v , position ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( new View . <RARE_TOKEN> ( ) { </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( View v ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( adapter ) ; </a> 
<a> <RARE_TOKEN> = ( <RARE_TOKEN> ) view . findViewById ( R . id . <RARE_TOKEN> ) ; </a> 
<a> return view ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( final Bundle savedInstanceState ) { </a> 
<a> super . <RARE_TOKEN> ( savedInstanceState ) ; </a> 
<a> sessionTracker = new <RARE_TOKEN> ( getActivity ( ) , new Session . StatusCallback ( ) { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( Session session , SessionState state , Exception exception ) { </a> 
<a> if ( ! session . isOpened ( ) ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> <RARE_TOKEN> ( savedInstanceState ) ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( adapter ) ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( savedInstanceState , <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( ( ViewGroup ) <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> != null && savedInstanceState != null ) { </a> 
<a> boolean <RARE_TOKEN> = savedInstanceState . <RARE_TOKEN> ( <RARE_TOKEN> , false ) ; </a> 
<a> if ( <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> super . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( null ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( null ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> sessionTracker . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void onSaveInstanceState ( Bundle outState ) { </a> 
<a> super . onSaveInstanceState ( outState ) ; </a> 
<a> <RARE_TOKEN> ( outState ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( outState , <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> outState . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> ( ) == View . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( Bundle args ) { </a> 
<a> super . <RARE_TOKEN> ( args ) ; </a> 
<a> <RARE_TOKEN> ( args ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> < T > <RARE_TOKEN> ( ) { </a> 
<a> return filter ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( <RARE_TOKEN> < T > filter ) { </a> 
<a> this . filter = filter ; </a> 
<a> } </a> 
<a> public Session getSession ( ) { </a> 
<a> return sessionTracker . getSession ( ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( Session session ) { </a> 
<a> sessionTracker . <RARE_TOKEN> ( session ) ; </a> 
<a> } </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( boolean <RARE_TOKEN> ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public Set < String > <RARE_TOKEN> ( ) { </a> 
<a> return new HashSet < String > ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( Collection < String > fields ) { </a> 
<a> <RARE_TOKEN> = new HashSet < String > ( ) ; </a> 
<a> if ( fields != null ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( fields ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( boolean <RARE_TOKEN> ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( String <RARE_TOKEN> ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public String <RARE_TOKEN> ( ) { </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( String <RARE_TOKEN> ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public String <RARE_TOKEN> ( ) { </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( boolean <RARE_TOKEN> ) { </a> 
<a> if ( ! <RARE_TOKEN> && <RARE_TOKEN> . <RARE_TOKEN> ( ) ) { </a> 
<a> return ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( Bundle <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> boolean <RARE_TOKEN> ( T graphObject ) { </a> 
<a> if ( filter != null ) { </a> 
<a> return filter . <RARE_TOKEN> ( graphObject ) ; </a> 
<a> } </a> 
<a> return true ; </a> 
<a> } </a> 
<a> List < T > <RARE_TOKEN> ( ) { </a> 
<a> return adapter . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> void <RARE_TOKEN> ( Bundle outState ) { </a> 
<a> outState . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> if ( ! <RARE_TOKEN> . isEmpty ( ) ) { </a> 
<a> outState . putString ( <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> outState . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> outState . putString ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> outState . putString ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> abstract Request <RARE_TOKEN> ( Session session ) ; </a> 
<a> abstract <RARE_TOKEN> < T > <RARE_TOKEN> ( ) ; </a> 
<a> abstract <RARE_TOKEN> <RARE_TOKEN> ( ) ; </a> 
<a> abstract <RARE_TOKEN> <RARE_TOKEN> ( ) ; </a> 
<a> void <RARE_TOKEN> ( ) { </a> 
<a> } </a> 
<a> String <RARE_TOKEN> ( ) { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> String <RARE_TOKEN> ( ) { </a> 
<a> return getString ( R . string . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> void <RARE_TOKEN> ( ) { </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> . setVisibility ( View . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> void <RARE_TOKEN> ( ) { </a> 
<a> float <RARE_TOKEN> = ( ! adapter . isEmpty ( ) ) ? <RARE_TOKEN> : <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> void <RARE_TOKEN> ( ) { </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> . setVisibility ( View . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> void <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> if ( <RARE_TOKEN> != this . <RARE_TOKEN> ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> if ( adapter != null ) { </a> 
<a> adapter . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> private static void <RARE_TOKEN> ( View view , float <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( 0 ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( true ) ; </a> 
<a> view . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( Bundle <RARE_TOKEN> ) { </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> String <RARE_TOKEN> = <RARE_TOKEN> . getString ( <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> String [ ] <RARE_TOKEN> = <RARE_TOKEN> . split ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( Arrays . asList ( <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> String <RARE_TOKEN> = <RARE_TOKEN> . getString ( <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> . setText ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> String <RARE_TOKEN> = <RARE_TOKEN> . getString ( <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> . setText ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( ViewGroup view ) { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = ( <RARE_TOKEN> ) view . findViewById ( R . id . <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> View <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> final <RARE_TOKEN> . LayoutParams <RARE_TOKEN> = new <RARE_TOKEN> . LayoutParams ( </a> 
<a> <RARE_TOKEN> . LayoutParams . <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> . LayoutParams . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> , R . id . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> = ( Button ) view . findViewById ( R . id . <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> . setOnClickListener ( new View . OnClickListener ( ) { </a> 
<a> @ Override </a> 
<a> public void onClick ( View v ) { </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( PickerFragment . this ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> if ( <RARE_TOKEN> ( ) != null ) { </a> 
<a> <RARE_TOKEN> . setText ( <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> <RARE_TOKEN> = ( TextView ) view . findViewById ( R . id . <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> if ( <RARE_TOKEN> ( ) != null ) { </a> 
<a> <RARE_TOKEN> . setText ( <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> , View v , int position ) { </a> 
<a> @ SuppressWarnings ( "unchecked" ) </a> 
<a> T graphObject = ( T ) <RARE_TOKEN> . <RARE_TOKEN> ( position ) ; </a> 
<a> String id = adapter . <RARE_TOKEN> ( graphObject ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( id ) ; </a> 
<a> adapter . <RARE_TOKEN> ( ) ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( PickerFragment . this ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> Request request = <RARE_TOKEN> ( getSession ( ) ) ; </a> 
<a> if ( request != null ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( request ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( ) { </a> 
<a> if ( adapter != null ) { </a> 
<a> boolean <RARE_TOKEN> = ! <RARE_TOKEN> . isEmpty ( ) ; </a> 
<a> boolean <RARE_TOKEN> = ! adapter . isEmpty ( ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> . clear ( ) ; </a> 
<a> adapter . <RARE_TOKEN> ( ) ; </a> 
<a> if ( <RARE_TOKEN> && <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( PickerFragment . this ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> && <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( PickerFragment . this ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> void <RARE_TOKEN> ( <RARE_TOKEN> < T > data ) { </a> 
<a> if ( adapter != null ) { </a> 
<a> View view = <RARE_TOKEN> . <RARE_TOKEN> ( 1 ) ; </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> if ( <RARE_TOKEN> > 0 ) { </a> 
<a> <RARE_TOKEN> ++ ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> < T > <RARE_TOKEN> = adapter . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> final int <RARE_TOKEN> = ( view != null && </a> 
<a> <RARE_TOKEN> . getType ( ) != <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> ) ? </a> 
<a> view . <RARE_TOKEN> ( ) : 0 ; </a> 
<a> boolean <RARE_TOKEN> = adapter . <RARE_TOKEN> ( data ) ; </a> 
<a> if ( view != null && <RARE_TOKEN> != null ) { </a> 
<a> final int <RARE_TOKEN> = adapter . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> , <RARE_TOKEN> . graphObject ) ; </a> 
<a> if ( <RARE_TOKEN> != - 1 ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> && <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( PickerFragment . this ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( ) { </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> if ( <RARE_TOKEN> >= 0 ) { </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> adapter . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private <RARE_TOKEN> . <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> . <RARE_TOKEN> ( ) { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( <RARE_TOKEN> view , int <RARE_TOKEN> ) { </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( <RARE_TOKEN> view , int <RARE_TOKEN> , int <RARE_TOKEN> , int <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } ; </a> 
<a> public interface <RARE_TOKEN> { </a> 
<a> void onError ( PickerFragment < ? > fragment , FacebookException error ) ; </a> 
<a> } </a> 
<a> public interface <RARE_TOKEN> { </a> 
<a> void <RARE_TOKEN> ( PickerFragment < ? > fragment ) ; </a> 
<a> } </a> 
<a> public interface <RARE_TOKEN> { </a> 
<a> void <RARE_TOKEN> ( PickerFragment < ? > fragment ) ; </a> 
<a> } </a> 
<a> public interface <RARE_TOKEN> { </a> 
<a> void <RARE_TOKEN> ( PickerFragment < ? > fragment ) ; </a> 
<a> } </a> 
<a> public interface <RARE_TOKEN> < T > { </a> 
<a> boolean <RARE_TOKEN> ( T graphObject ) ; </a> 
<a> } </a> 
<a> abstract class <RARE_TOKEN> { </a> 
<a> protected final static int <RARE_TOKEN> = 2 * 1000 ; </a> 
<a> protected <RARE_TOKEN> < T > loader ; </a> 
<a> protected <RARE_TOKEN> < T > adapter ; </a> 
<a> public void <RARE_TOKEN> ( <RARE_TOKEN> < T > adapter ) { </a> 
<a> loader = ( <RARE_TOKEN> < T > ) <RARE_TOKEN> ( ) . <RARE_TOKEN> ( 0 , null , </a> 
<a> new <RARE_TOKEN> . <RARE_TOKEN> < <RARE_TOKEN> < T > > ( ) { </a> 
<a> @ Override </a> 
<a> public <RARE_TOKEN> < <RARE_TOKEN> < T > > <RARE_TOKEN> ( int id , Bundle args ) { </a> 
<a> return <RARE_TOKEN> . this . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( <RARE_TOKEN> < <RARE_TOKEN> < T > > loader , </a> 
<a> <RARE_TOKEN> < T > data ) { </a> 
<a> if ( loader != <RARE_TOKEN> . this . loader ) { </a> 
<a> throw new FacebookException ( <RARE_TOKEN> callback for <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> . this . <RARE_TOKEN> ( ( <RARE_TOKEN> < T > ) loader , data ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( <RARE_TOKEN> < <RARE_TOKEN> < T > > loader ) { </a> 
<a> if ( loader != <RARE_TOKEN> . this . loader ) { </a> 
<a> throw new FacebookException ( <RARE_TOKEN> callback for <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> . this . <RARE_TOKEN> ( ( <RARE_TOKEN> < T > ) loader ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> loader . <RARE_TOKEN> ( new <RARE_TOKEN> . <RARE_TOKEN> ( ) { </a> 
<a> @ Override </a> 
<a> public void onError ( FacebookException error , <RARE_TOKEN> < ? > loader ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> . onError ( PickerFragment . this , error ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> this . adapter = adapter ; </a> 
<a> this . adapter . <RARE_TOKEN> ( loader . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> adapter . <RARE_TOKEN> ( null ) ; </a> 
<a> loader . <RARE_TOKEN> ( null ) ; </a> 
<a> loader = null ; </a> 
<a> adapter = null ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> if ( loader != null ) { </a> 
<a> loader . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( Request request ) { </a> 
<a> if ( loader != null ) { </a> 
<a> loader . <RARE_TOKEN> ( request , true ) ; </a> 
<a> <RARE_TOKEN> ( loader , request ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return ! adapter . isEmpty ( ) || loader . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> protected <RARE_TOKEN> < T > <RARE_TOKEN> ( ) { </a> 
<a> return new <RARE_TOKEN> < T > ( getActivity ( ) , graphObjectClass ) ; </a> 
<a> } </a> 
<a> protected void <RARE_TOKEN> ( <RARE_TOKEN> < T > loader , Request request ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> protected void <RARE_TOKEN> ( <RARE_TOKEN> < T > loader ) { </a> 
<a> adapter . <RARE_TOKEN> ( null ) ; </a> 
<a> } </a> 
<a> protected void <RARE_TOKEN> ( <RARE_TOKEN> < T > loader , <RARE_TOKEN> < T > data ) { </a> 
<a> <RARE_TOKEN> ( data ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> abstract class <RARE_TOKEN> { </a> 
<a> abstract boolean <RARE_TOKEN> ( String id ) ; </a> 
<a> abstract void <RARE_TOKEN> ( String id ) ; </a> 
<a> abstract Collection < String > <RARE_TOKEN> ( ) ; </a> 
<a> abstract void clear ( ) ; </a> 
<a> abstract boolean isEmpty ( ) ; </a> 
<a> abstract boolean <RARE_TOKEN> ( ) ; </a> 
<a> abstract void <RARE_TOKEN> ( Bundle <RARE_TOKEN> , String key ) ; </a> 
<a> abstract void <RARE_TOKEN> ( Bundle <RARE_TOKEN> , String key ) ; </a> 
<a> } </a> 
<a> class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> private String <RARE_TOKEN> ; </a> 
<a> public Collection < String > <RARE_TOKEN> ( ) { </a> 
<a> return Arrays . asList ( new String [ ] { <RARE_TOKEN> } ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> boolean <RARE_TOKEN> ( String id ) { </a> 
<a> return <RARE_TOKEN> != null && id != null && <RARE_TOKEN> . equals ( id ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> void <RARE_TOKEN> ( String id ) { </a> 
<a> if ( <RARE_TOKEN> != null && <RARE_TOKEN> . equals ( id ) ) { </a> 
<a> <RARE_TOKEN> = null ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> = id ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> void <RARE_TOKEN> ( Bundle <RARE_TOKEN> , String key ) { </a> 
<a> if ( ! <RARE_TOKEN> . isEmpty ( <RARE_TOKEN> ) ) { </a> 
<a> <RARE_TOKEN> . putString ( key , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> void <RARE_TOKEN> ( Bundle <RARE_TOKEN> , String key ) { </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . getString ( key ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void clear ( ) { </a> 
<a> <RARE_TOKEN> = null ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> boolean isEmpty ( ) { </a> 
<a> return <RARE_TOKEN> == null ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> boolean <RARE_TOKEN> ( ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> } </a> 
<a> class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> private Set < String > <RARE_TOKEN> = new HashSet < String > ( ) ; </a> 
<a> public Collection < String > <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> boolean <RARE_TOKEN> ( String id ) { </a> 
<a> return id != null && <RARE_TOKEN> . contains ( id ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> void <RARE_TOKEN> ( String id ) { </a> 
<a> if ( id != null ) { </a> 
<a> if ( <RARE_TOKEN> . contains ( id ) ) { </a> 
<a> <RARE_TOKEN> . remove ( id ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> . add ( id ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> void <RARE_TOKEN> ( Bundle <RARE_TOKEN> , String key ) { </a> 
<a> if ( ! <RARE_TOKEN> . isEmpty ( ) ) { </a> 
<a> String <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . putString ( key , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> void <RARE_TOKEN> ( Bundle <RARE_TOKEN> , String key ) { </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> String <RARE_TOKEN> = <RARE_TOKEN> . getString ( key ) ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> String [ ] <RARE_TOKEN> = <RARE_TOKEN> . split ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . clear ( ) ; </a> 
<a> Collections . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void clear ( ) { </a> 
<a> <RARE_TOKEN> . clear ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> boolean isEmpty ( ) { </a> 
<a> return <RARE_TOKEN> . isEmpty ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> boolean <RARE_TOKEN> ( ) { </a> 
<a> return true ; </a> 
<a> } </a> 
<a> } </a> 
<a> abstract class <RARE_TOKEN> < U extends GraphObject > extends <RARE_TOKEN> < T > { </a> 
<a> public <RARE_TOKEN> ( Context context ) { </a> 
<a> super ( context ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> boolean <RARE_TOKEN> ( String <RARE_TOKEN> ) { </a> 
<a> return <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> void <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> , boolean <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> int <RARE_TOKEN> = ( <RARE_TOKEN> || <RARE_TOKEN> </a> 
<a> . <RARE_TOKEN> ( ) ) ? View . <RARE_TOKEN> : View . <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> . setVisibility ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package com . facebook . widget ; </a> 
<a> import android . app . Activity ; </a> 
<a> import android . content . Context ; </a> 
<a> import android . content . res . <RARE_TOKEN> ; </a> 
<a> import android . location . Location ; </a> 
<a> import android . os . Bundle ; </a> 
<a> import android . os . Handler ; </a> 
<a> import android . os . <RARE_TOKEN> ; </a> 
<a> import android . text . <RARE_TOKEN> ; </a> 
<a> import android . text . <RARE_TOKEN> ; </a> 
<a> import android . text . <RARE_TOKEN> ; </a> 
<a> import android . util . <RARE_TOKEN> ; </a> 
<a> import android . view . ViewGroup ; </a> 
<a> import android . view . <RARE_TOKEN> ; </a> 
<a> import android . view . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import android . widget . <RARE_TOKEN> ; </a> 
<a> import android . widget . <RARE_TOKEN> ; </a> 
<a> import android . widget . <RARE_TOKEN> ; </a> 
<a> import com . facebook . * ; </a> 
<a> import com . facebook . android . R ; </a> 
<a> import com . facebook . model . GraphPlace ; </a> 
<a> import com . facebook . internal . Logger ; </a> 
<a> import com . facebook . internal . Utility ; </a> 
<a> import java . util . * ; </a> 
<a> public class <RARE_TOKEN> extends PickerFragment < GraphPlace > { </a> 
<a> public static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> public static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> public static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> public static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> public static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> public static final int <RARE_TOKEN> = 1000 ; </a> 
<a> public static final int <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final int <RARE_TOKEN> = 2 * 1000 ; </a> 
<a> private static final String ID = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = "name" ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String TAG = <RARE_TOKEN> ; </a> 
<a> private Location location ; </a> 
<a> private int <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private int <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private String <RARE_TOKEN> ; </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> private boolean <RARE_TOKEN> ; </a> 
<a> private boolean <RARE_TOKEN> = true ; </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> public <RARE_TOKEN> ( ) { </a> 
<a> this ( null ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( Bundle args ) { </a> 
<a> super ( GraphPlace . class , R . layout . <RARE_TOKEN> , args ) ; </a> 
<a> <RARE_TOKEN> ( args ) ; </a> 
<a> } </a> 
<a> public Location <RARE_TOKEN> ( ) { </a> 
<a> return location ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( Location location ) { </a> 
<a> this . location = location ; </a> 
<a> } </a> 
<a> public int <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( int <RARE_TOKEN> ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public int <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( int <RARE_TOKEN> ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public String <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( String <RARE_TOKEN> ) { </a> 
<a> if ( <RARE_TOKEN> . isEmpty ( <RARE_TOKEN> ) ) { </a> 
<a> <RARE_TOKEN> = null ; </a> 
<a> } </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> if ( this . <RARE_TOKEN> != null ) { </a> 
<a> this . <RARE_TOKEN> . setText ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( String <RARE_TOKEN> , boolean <RARE_TOKEN> ) { </a> 
<a> if ( ! <RARE_TOKEN> && Utility . <RARE_TOKEN> ( this . <RARE_TOKEN> , <RARE_TOKEN> ) ) { </a> 
<a> return ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> . isEmpty ( <RARE_TOKEN> ) ) { </a> 
<a> <RARE_TOKEN> = null ; </a> 
<a> } </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = true ; </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public GraphPlace <RARE_TOKEN> ( ) { </a> 
<a> Collection < GraphPlace > <RARE_TOKEN> = <RARE_TOKEN> ( ) ; </a> 
<a> return ( <RARE_TOKEN> != null && <RARE_TOKEN> . size ( ) > 0 ) ? <RARE_TOKEN> . <RARE_TOKEN> ( ) . next ( ) : null ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( Bundle <RARE_TOKEN> ) { </a> 
<a> super . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( Activity activity , <RARE_TOKEN> <RARE_TOKEN> , Bundle savedInstanceState ) { </a> 
<a> super . <RARE_TOKEN> ( activity , <RARE_TOKEN> , savedInstanceState ) ; </a> 
<a> <RARE_TOKEN> a = activity . <RARE_TOKEN> ( <RARE_TOKEN> , R . <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( a . getInt ( R . <RARE_TOKEN> . <RARE_TOKEN> , <RARE_TOKEN> ) ) ; </a> 
<a> <RARE_TOKEN> ( a . getInt ( R . <RARE_TOKEN> . <RARE_TOKEN> , <RARE_TOKEN> ) ) ; </a> 
<a> if ( a . <RARE_TOKEN> ( R . <RARE_TOKEN> . <RARE_TOKEN> ) ) { </a> 
<a> <RARE_TOKEN> ( a . getString ( R . <RARE_TOKEN> . <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> = a . <RARE_TOKEN> ( R . <RARE_TOKEN> . <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> a . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( final Bundle savedInstanceState ) { </a> 
<a> super . <RARE_TOKEN> ( savedInstanceState ) ; </a> 
<a> ViewGroup view = ( ViewGroup ) <RARE_TOKEN> ( ) ; </a> 
<a> if ( <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = ( <RARE_TOKEN> ) view . findViewById ( R . id . <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> = ( <RARE_TOKEN> ) <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> . LayoutParams <RARE_TOKEN> = new <RARE_TOKEN> . LayoutParams ( </a> 
<a> <RARE_TOKEN> . LayoutParams . <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> . LayoutParams . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> , R . id . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = ( <RARE_TOKEN> ) view . findViewById ( R . id . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> if ( view . findViewById ( R . id . <RARE_TOKEN> ) != null ) { </a> 
<a> <RARE_TOKEN> = new <RARE_TOKEN> . LayoutParams ( </a> 
<a> <RARE_TOKEN> . LayoutParams . <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> . LayoutParams . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> , R . id . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( new <RARE_TOKEN> ( ) ) ; </a> 
<a> if ( ! <RARE_TOKEN> . isEmpty ( <RARE_TOKEN> ) ) { </a> 
<a> <RARE_TOKEN> . setText ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( Activity activity ) { </a> 
<a> super . <RARE_TOKEN> ( activity ) ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = ( <RARE_TOKEN> ) getActivity ( ) . <RARE_TOKEN> ( Context . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> super . <RARE_TOKEN> ( ) ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = ( <RARE_TOKEN> ) getActivity ( ) . <RARE_TOKEN> ( Context . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ( ) , 0 ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> void <RARE_TOKEN> ( Bundle outState ) { </a> 
<a> super . <RARE_TOKEN> ( outState ) ; </a> 
<a> outState . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> outState . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> outState . putString ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> outState . <RARE_TOKEN> ( <RARE_TOKEN> , location ) ; </a> 
<a> outState . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> = false ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> Request <RARE_TOKEN> ( Session session ) { </a> 
<a> return <RARE_TOKEN> ( location , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , session ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> String <RARE_TOKEN> ( ) { </a> 
<a> return getString ( R . string . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> <RARE_TOKEN> < GraphPlace > <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> < GraphPlace > adapter = new <RARE_TOKEN> < GraphPlace > ( </a> 
<a> this . getActivity ( ) ) { </a> 
<a> @ Override </a> 
<a> protected <RARE_TOKEN> <RARE_TOKEN> ( GraphPlace graphObject ) { </a> 
<a> String <RARE_TOKEN> = graphObject . <RARE_TOKEN> ( ) ; </a> 
<a> Integer <RARE_TOKEN> = ( Integer ) graphObject . getProperty ( <RARE_TOKEN> ) ; </a> 
<a> String result = null ; </a> 
<a> if ( <RARE_TOKEN> != null && <RARE_TOKEN> != null ) { </a> 
<a> result = getString ( R . string . <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } else if ( <RARE_TOKEN> == null && <RARE_TOKEN> != null ) { </a> 
<a> result = getString ( R . string . <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } else if ( <RARE_TOKEN> != null && <RARE_TOKEN> == null ) { </a> 
<a> result = getString ( R . string . <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> return result ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected int <RARE_TOKEN> ( GraphPlace graphObject ) { </a> 
<a> return R . layout . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected int <RARE_TOKEN> ( ) { </a> 
<a> return R . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } ; </a> 
<a> adapter . <RARE_TOKEN> ( false ) ; </a> 
<a> adapter . <RARE_TOKEN> ( <RARE_TOKEN> ( ) ) ; </a> 
<a> return adapter ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> ( ) { </a> 
<a> return new <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> ( ) { </a> 
<a> return new <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> private Request <RARE_TOKEN> ( Location location , int <RARE_TOKEN> , int <RARE_TOKEN> , String <RARE_TOKEN> , </a> 
<a> Set < String > <RARE_TOKEN> , </a> 
<a> Session session ) { </a> 
<a> Request request = Request . <RARE_TOKEN> ( session , location , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> null ) ; </a> 
<a> Set < String > fields = new HashSet < String > ( <RARE_TOKEN> ) ; </a> 
<a> String [ ] <RARE_TOKEN> = new String [ ] { </a> 
<a> ID , </a> 
<a> <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> </a> 
<a> } ; </a> 
<a> fields . <RARE_TOKEN> ( Arrays . asList ( <RARE_TOKEN> ) ) ; </a> 
<a> String <RARE_TOKEN> = adapter . <RARE_TOKEN> ( ) ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> fields . add ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> Bundle parameters = request . <RARE_TOKEN> ( ) ; </a> 
<a> parameters . putString ( <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> , fields ) ) ; </a> 
<a> request . <RARE_TOKEN> ( parameters ) ; </a> 
<a> return request ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( Bundle <RARE_TOKEN> ) { </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> . getInt ( <RARE_TOKEN> , <RARE_TOKEN> ) ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> . getInt ( <RARE_TOKEN> , <RARE_TOKEN> ) ) ; </a> 
<a> if ( <RARE_TOKEN> . containsKey ( <RARE_TOKEN> ) ) { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> . getString ( <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> . containsKey ( <RARE_TOKEN> ) ) { </a> 
<a> Location location = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( location ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> . schedule ( new <RARE_TOKEN> ( ) { </a> 
<a> @ Override </a> 
<a> public void run ( ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } , 0 , <RARE_TOKEN> ) ; </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( ) { </a> 
<a> if ( <RARE_TOKEN> ) { </a> 
<a> Handler handler = new Handler ( <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> handler . post ( new Runnable ( ) { </a> 
<a> @ Override </a> 
<a> public void run ( ) { </a> 
<a> FacebookException error = null ; </a> 
<a> try { </a> 
<a> <RARE_TOKEN> ( true ) ; </a> 
<a> } catch ( FacebookException <RARE_TOKEN> ) { </a> 
<a> error = <RARE_TOKEN> ; </a> 
<a> } catch ( Exception e ) { </a> 
<a> error = new FacebookException ( e ) ; </a> 
<a> } finally { </a> 
<a> if ( error != null ) { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = <RARE_TOKEN> ( ) ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> . onError ( <RARE_TOKEN> . this , error ) ; </a> 
<a> } else { </a> 
<a> Logger . log ( LoggingBehavior . <RARE_TOKEN> , TAG , <RARE_TOKEN> <RARE_TOKEN> data : <RARE_TOKEN> , error ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> . cancel ( ) ; </a> 
<a> <RARE_TOKEN> = null ; </a> 
<a> } </a> 
<a> } </a> 
<a> private class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( <RARE_TOKEN> < GraphPlace > adapter ) { </a> 
<a> super . <RARE_TOKEN> ( adapter ) ; </a> 
<a> this . adapter . <RARE_TOKEN> ( new <RARE_TOKEN> . <RARE_TOKEN> ( ) { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> if ( ! loader . <RARE_TOKEN> ( ) ) { </a> 
<a> loader . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( <RARE_TOKEN> < GraphPlace > loader , </a> 
<a> <RARE_TOKEN> < GraphPlace > data ) { </a> 
<a> super . <RARE_TOKEN> ( loader , data ) ; </a> 
<a> if ( data == null || loader . <RARE_TOKEN> ( ) ) { </a> 
<a> return ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> if ( data . <RARE_TOKEN> ( ) ) { </a> 
<a> loader . <RARE_TOKEN> ( data . <RARE_TOKEN> ( ) ? <RARE_TOKEN> : 0 ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> private class <RARE_TOKEN> implements <RARE_TOKEN> { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( <RARE_TOKEN> s , int start , int count , int <RARE_TOKEN> ) { </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( <RARE_TOKEN> s , int start , int <RARE_TOKEN> , int count ) { </a> 
<a> <RARE_TOKEN> ( s . toString ( ) , false ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( <RARE_TOKEN> s ) { </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package com . facebook . widget ; </a> 
<a> import android . content . Context ; </a> 
<a> import android . content . res . <RARE_TOKEN> ; </a> 
<a> import android . <RARE_TOKEN> . Bitmap ; </a> 
<a> import android . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import android . os . Bundle ; </a> 
<a> import android . os . <RARE_TOKEN> ; </a> 
<a> import android . util . <RARE_TOKEN> ; </a> 
<a> import android . util . Log ; </a> 
<a> import android . view . ViewGroup ; </a> 
<a> import android . widget . <RARE_TOKEN> ; </a> 
<a> import android . widget . <RARE_TOKEN> ; </a> 
<a> import com . facebook . FacebookException ; </a> 
<a> import com . facebook . LoggingBehavior ; </a> 
<a> import com . facebook . android . R ; </a> 
<a> import com . facebook . internal . Logger ; </a> 
<a> import com . facebook . internal . Utility ; </a> 
<a> import java . net . <RARE_TOKEN> ; </a> 
<a> public class ProfilePictureView extends <RARE_TOKEN> { </a> 
<a> public interface <RARE_TOKEN> { </a> 
<a> void onError ( FacebookException error ) ; </a> 
<a> } </a> 
<a> public static final String TAG = ProfilePictureView . class . getSimpleName ( ) ; </a> 
<a> public static final int <RARE_TOKEN> = - 1 ; </a> 
<a> public static final int <RARE_TOKEN> = - 2 ; </a> 
<a> public static final int <RARE_TOKEN> = - 3 ; </a> 
<a> public static final int <RARE_TOKEN> = - 4 ; </a> 
<a> private static final int <RARE_TOKEN> = 1 ; </a> 
<a> private static final boolean <RARE_TOKEN> = true ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private String <RARE_TOKEN> ; </a> 
<a> private int <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> private int <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> private boolean <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private Bitmap <RARE_TOKEN> ; </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> private int <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> public ProfilePictureView ( Context context ) { </a> 
<a> super ( context ) ; </a> 
<a> <RARE_TOKEN> ( context ) ; </a> 
<a> } </a> 
<a> public ProfilePictureView ( Context context , <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> super ( context , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( context ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public ProfilePictureView ( Context context , <RARE_TOKEN> <RARE_TOKEN> , int <RARE_TOKEN> ) { </a> 
<a> super ( context , <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( context ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public final int <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public final void <RARE_TOKEN> ( int <RARE_TOKEN> ) { </a> 
<a> switch ( <RARE_TOKEN> ) { </a> 
<a> case <RARE_TOKEN> : </a> 
<a> case <RARE_TOKEN> : </a> 
<a> case <RARE_TOKEN> : </a> 
<a> case <RARE_TOKEN> : </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> break ; </a> 
<a> default : </a> 
<a> throw new IllegalArgumentException ( <RARE_TOKEN> <RARE_TOKEN> a <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> public final boolean <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public final void <RARE_TOKEN> ( boolean <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> ( false ) ; </a> 
<a> } </a> 
<a> public final String <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public final void <RARE_TOKEN> ( String <RARE_TOKEN> ) { </a> 
<a> boolean <RARE_TOKEN> = false ; </a> 
<a> if ( Utility . <RARE_TOKEN> ( this . <RARE_TOKEN> ) || ! this . <RARE_TOKEN> . equalsIgnoreCase ( <RARE_TOKEN> ) ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> = true ; </a> 
<a> } </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public final <RARE_TOKEN> <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public final void <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( int <RARE_TOKEN> , int <RARE_TOKEN> ) { </a> 
<a> ViewGroup . LayoutParams params = <RARE_TOKEN> ( ) ; </a> 
<a> boolean <RARE_TOKEN> = false ; </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) != <RARE_TOKEN> . <RARE_TOKEN> && </a> 
<a> params . <RARE_TOKEN> == ViewGroup . LayoutParams . <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ( true ) ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = true ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) != <RARE_TOKEN> . <RARE_TOKEN> && </a> 
<a> params . <RARE_TOKEN> == ViewGroup . LayoutParams . <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ( true ) ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = true ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } else { </a> 
<a> super . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( boolean <RARE_TOKEN> , int <RARE_TOKEN> , int <RARE_TOKEN> , int <RARE_TOKEN> , int <RARE_TOKEN> ) { </a> 
<a> super . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( false ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected <RARE_TOKEN> onSaveInstanceState ( ) { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = super . onSaveInstanceState ( ) ; </a> 
<a> Bundle <RARE_TOKEN> = new Bundle ( ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . putString ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> != null ) ; </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( <RARE_TOKEN> state ) { </a> 
<a> if ( state . getClass ( ) != Bundle . class ) { </a> 
<a> super . <RARE_TOKEN> ( state ) ; </a> 
<a> } else { </a> 
<a> Bundle <RARE_TOKEN> = ( Bundle ) state ; </a> 
<a> super . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ) ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . getString ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . getInt ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . getInt ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . getInt ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( ( Bitmap ) <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ) ; </a> 
<a> if ( <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ) { </a> 
<a> <RARE_TOKEN> ( true ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( ) { </a> 
<a> super . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> = null ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( Context context ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> = new <RARE_TOKEN> ( context ) ; </a> 
<a> LayoutParams <RARE_TOKEN> = new LayoutParams ( </a> 
<a> LayoutParams . <RARE_TOKEN> , </a> 
<a> LayoutParams . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> a = getContext ( ) . <RARE_TOKEN> ( <RARE_TOKEN> , R . <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( a . getInt ( R . <RARE_TOKEN> . <RARE_TOKEN> , <RARE_TOKEN> ) ) ; </a> 
<a> <RARE_TOKEN> = a . <RARE_TOKEN> ( R . <RARE_TOKEN> . <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> a . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( boolean <RARE_TOKEN> ) { </a> 
<a> boolean <RARE_TOKEN> = <RARE_TOKEN> ( ) ; </a> 
<a> if ( <RARE_TOKEN> == null || <RARE_TOKEN> . length ( ) == 0 || </a> 
<a> ( ( <RARE_TOKEN> == <RARE_TOKEN> . <RARE_TOKEN> ) && </a> 
<a> ( <RARE_TOKEN> == <RARE_TOKEN> . <RARE_TOKEN> ) ) ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } else if ( <RARE_TOKEN> || <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( true ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( ) { </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> ( ) ? </a> 
<a> R . <RARE_TOKEN> . <RARE_TOKEN> : </a> 
<a> R . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ( getResources ( ) , <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( Bitmap <RARE_TOKEN> ) { </a> 
<a> if ( <RARE_TOKEN> != null && <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( boolean <RARE_TOKEN> ) { </a> 
<a> try { </a> 
<a> <RARE_TOKEN> . Builder <RARE_TOKEN> = new <RARE_TOKEN> . Builder ( </a> 
<a> getContext ( ) , </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> ) ) ; </a> 
<a> <RARE_TOKEN> request = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) </a> 
<a> . <RARE_TOKEN> ( this ) </a> 
<a> . setCallback ( </a> 
<a> new <RARE_TOKEN> . Callback ( ) { </a> 
<a> @ Override </a> 
<a> public void onCompleted ( <RARE_TOKEN> response ) { </a> 
<a> <RARE_TOKEN> ( response ) ; </a> 
<a> } </a> 
<a> } ) </a> 
<a> . build ( ) ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> = request ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( request ) ; </a> 
<a> } catch ( <RARE_TOKEN> e ) { </a> 
<a> Logger . log ( LoggingBehavior . <RARE_TOKEN> , Log . <RARE_TOKEN> , TAG , e . toString ( ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( <RARE_TOKEN> response ) { </a> 
<a> if ( response . getRequest ( ) == <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> = null ; </a> 
<a> Bitmap <RARE_TOKEN> = response . <RARE_TOKEN> ( ) ; </a> 
<a> Exception error = response . getError ( ) ; </a> 
<a> if ( error != null ) { </a> 
<a> <RARE_TOKEN> listener = <RARE_TOKEN> ; </a> 
<a> if ( listener != null ) { </a> 
<a> listener . onError ( new FacebookException ( </a> 
<a> <RARE_TOKEN> in <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> for <RARE_TOKEN> " + <RARE_TOKEN> ( ) , error ) ) ; </a> 
<a> } else { </a> 
<a> Logger . log ( LoggingBehavior . <RARE_TOKEN> , Log . <RARE_TOKEN> , TAG , error . toString ( ) ) ; </a> 
<a> } </a> 
<a> } else if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> if ( response . <RARE_TOKEN> ( ) ) { </a> 
<a> <RARE_TOKEN> ( false ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> private boolean <RARE_TOKEN> ( ) { </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> ( ) ; </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> ( ) ; </a> 
<a> if ( <RARE_TOKEN> < <RARE_TOKEN> || <RARE_TOKEN> < <RARE_TOKEN> ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> ( false ) ; </a> 
<a> if ( <RARE_TOKEN> != <RARE_TOKEN> . <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> <= <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ( ) ? <RARE_TOKEN> : <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ( ) ? <RARE_TOKEN> : <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> boolean <RARE_TOKEN> = ( <RARE_TOKEN> != <RARE_TOKEN> ) || ( <RARE_TOKEN> != <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> private int <RARE_TOKEN> ( boolean <RARE_TOKEN> ) { </a> 
<a> int <RARE_TOKEN> ; </a> 
<a> switch ( <RARE_TOKEN> ) { </a> 
<a> case <RARE_TOKEN> : </a> 
<a> <RARE_TOKEN> = R . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> break ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> <RARE_TOKEN> = R . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> break ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> <RARE_TOKEN> = R . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> break ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> if ( ! <RARE_TOKEN> ) { </a> 
<a> return <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> = R . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> break ; </a> 
<a> } </a> 
<a> default : </a> 
<a> return <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> return getResources ( ) . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package com . facebook . widget ; </a> 
<a> import android . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import com . facebook . model . GraphObject ; </a> 
<a> import java . util . ArrayList ; </a> 
<a> import java . util . Collection ; </a> 
<a> class <RARE_TOKEN> < T extends GraphObject > implements <RARE_TOKEN> < T > { </a> 
<a> private int pos = - 1 ; </a> 
<a> private boolean closed = false ; </a> 
<a> private ArrayList < T > <RARE_TOKEN> = new ArrayList < T > ( ) ; </a> 
<a> private boolean <RARE_TOKEN> = false ; </a> 
<a> private boolean <RARE_TOKEN> = false ; </a> 
<a> <RARE_TOKEN> ( ) { </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> < T > other ) { </a> 
<a> pos = other . pos ; </a> 
<a> closed = other . closed ; </a> 
<a> <RARE_TOKEN> = new ArrayList < T > ( ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( other . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = other . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( Collection < T > <RARE_TOKEN> , boolean <RARE_TOKEN> ) { </a> 
<a> this . <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> this . <RARE_TOKEN> |= <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( boolean <RARE_TOKEN> ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( boolean <RARE_TOKEN> ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> . size ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int <RARE_TOKEN> ( ) { </a> 
<a> return pos ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( int offset ) { </a> 
<a> return <RARE_TOKEN> ( pos + offset ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( int position ) { </a> 
<a> final int count = <RARE_TOKEN> ( ) ; </a> 
<a> if ( position >= count ) { </a> 
<a> pos = count ; </a> 
<a> return false ; </a> 
<a> } </a> 
<a> if ( position < 0 ) { </a> 
<a> pos = - 1 ; </a> 
<a> return false ; </a> 
<a> } </a> 
<a> pos = position ; </a> 
<a> return true ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ( 0 ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ( <RARE_TOKEN> ( ) - 1 ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ( pos + 1 ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ( pos - 1 ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return ( pos == 0 ) && ( <RARE_TOKEN> ( ) != 0 ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean isLast ( ) { </a> 
<a> final int count = <RARE_TOKEN> ( ) ; </a> 
<a> return ( pos == ( count - 1 ) ) && ( count != 0 ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return ( <RARE_TOKEN> ( ) == 0 ) || ( pos == - 1 ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> final int count = <RARE_TOKEN> ( ) ; </a> 
<a> return ( count == 0 ) || ( pos == count ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public T <RARE_TOKEN> ( ) { </a> 
<a> if ( pos < 0 ) { </a> 
<a> throw new <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( pos >= <RARE_TOKEN> . size ( ) ) { </a> 
<a> throw new <RARE_TOKEN> ( <RARE_TOKEN> last <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> return <RARE_TOKEN> . get ( pos ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void close ( ) { </a> 
<a> closed = true ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return closed ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package com . facebook . widget ; </a> 
<a> import android . content . Context ; </a> 
<a> import com . facebook . internal . FileLruCache ; </a> 
<a> import com . facebook . internal . Utility ; </a> 
<a> import java . io . IOException ; </a> 
<a> import java . io . InputStream ; </a> 
<a> import java . io . <RARE_TOKEN> ; </a> 
<a> import java . io . OutputStream ; </a> 
<a> import java . net . <RARE_TOKEN> ; </a> 
<a> import java . net . URL ; </a> 
<a> class <RARE_TOKEN> { </a> 
<a> static final String TAG = <RARE_TOKEN> . class . getSimpleName ( ) ; </a> 
<a> private static final String <RARE_TOKEN> = TAG + <RARE_TOKEN> ; </a> 
<a> private volatile static FileLruCache <RARE_TOKEN> ; </a> 
<a> synchronized static FileLruCache <RARE_TOKEN> ( Context context ) throws IOException { </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> <RARE_TOKEN> = new FileLruCache ( context . <RARE_TOKEN> ( ) , TAG , new FileLruCache . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> static URL <RARE_TOKEN> ( Context context , URL url ) { </a> 
<a> if ( url == null ) { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> String <RARE_TOKEN> = url . toString ( ) ; </a> 
<a> URL <RARE_TOKEN> = null ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = null ; </a> 
<a> try { </a> 
<a> InputStream stream ; </a> 
<a> FileLruCache cache = <RARE_TOKEN> ( context ) ; </a> 
<a> boolean <RARE_TOKEN> = false ; </a> 
<a> while ( ( stream = cache . get ( <RARE_TOKEN> , <RARE_TOKEN> ) ) != null ) { </a> 
<a> <RARE_TOKEN> = true ; </a> 
<a> <RARE_TOKEN> = new <RARE_TOKEN> ( stream ) ; </a> 
<a> char [ ] buffer = new char [ <RARE_TOKEN> ] ; </a> 
<a> int <RARE_TOKEN> ; </a> 
<a> StringBuilder <RARE_TOKEN> = new StringBuilder ( ) ; </a> 
<a> while ( ( <RARE_TOKEN> = <RARE_TOKEN> . read ( buffer , 0 , buffer . length ) ) > 0 ) { </a> 
<a> <RARE_TOKEN> . append ( buffer , 0 , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> Utility . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . toString ( ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> = new URL ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } catch ( <RARE_TOKEN> e ) { </a> 
<a> } catch ( IOException <RARE_TOKEN> ) { </a> 
<a> } finally { </a> 
<a> Utility . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> static void <RARE_TOKEN> ( Context context , URL <RARE_TOKEN> , URL <RARE_TOKEN> ) { </a> 
<a> if ( <RARE_TOKEN> == null || <RARE_TOKEN> == null ) { </a> 
<a> return ; </a> 
<a> } </a> 
<a> OutputStream <RARE_TOKEN> = null ; </a> 
<a> try { </a> 
<a> FileLruCache cache = <RARE_TOKEN> ( context ) ; </a> 
<a> <RARE_TOKEN> = cache . <RARE_TOKEN> ( <RARE_TOKEN> . toString ( ) , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . write ( <RARE_TOKEN> . toString ( ) . getBytes ( ) ) ; </a> 
<a> } catch ( IOException e ) { </a> 
<a> } finally { </a> 
<a> Utility . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package com . facebook . widget ; </a> 
<a> import android . <RARE_TOKEN> . Bitmap ; </a> 
<a> import android . <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import android . <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import android . os . Bundle ; </a> 
<a> import android . text . <RARE_TOKEN> ; </a> 
<a> import android . view . <RARE_TOKEN> ; </a> 
<a> import android . view . View ; </a> 
<a> import android . view . ViewGroup ; </a> 
<a> import android . widget . TextView ; </a> 
<a> import com . facebook . * ; </a> 
<a> import com . facebook . android . R ; </a> 
<a> import com . facebook . model . GraphUser ; </a> 
<a> import java . net . <RARE_TOKEN> ; </a> 
<a> import java . net . URL ; </a> 
<a> import java . util . List ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> private static final String <RARE_TOKEN> = "name" ; </a> 
<a> private static final String ID = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> , new String [ ] { ID , <RARE_TOKEN> , <RARE_TOKEN> } ) ; </a> 
<a> private LoginButton <RARE_TOKEN> ; </a> 
<a> private LoginButton . <RARE_TOKEN> <RARE_TOKEN> = new LoginButton . <RARE_TOKEN> ( ) ; </a> 
<a> private TextView <RARE_TOKEN> ; </a> 
<a> private GraphUser user ; </a> 
<a> private Session <RARE_TOKEN> ; </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> private String <RARE_TOKEN> ; </a> 
<a> private Session . StatusCallback <RARE_TOKEN> ; </a> 
<a> @ Override </a> 
<a> public View <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> , ViewGroup container , Bundle savedInstanceState ) { </a> 
<a> View view = <RARE_TOKEN> . <RARE_TOKEN> ( R . layout . <RARE_TOKEN> , container , false ) ; </a> 
<a> <RARE_TOKEN> = ( LoginButton ) view . findViewById ( R . id . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( this ) ; </a> 
<a> Session session = getSession ( ) ; </a> 
<a> if ( session != null && ! session . equals ( Session . getActiveSession ( ) ) ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( session ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> = ( TextView ) view . findViewById ( R . id . <RARE_TOKEN> ) ; </a> 
<a> if ( view . <RARE_TOKEN> ( ) == null ) { </a> 
<a> view . <RARE_TOKEN> ( getResources ( ) . <RARE_TOKEN> ( R . <RARE_TOKEN> . <RARE_TOKEN> ) ) ; </a> 
<a> } else { </a> 
<a> view . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( true ) ; </a> 
<a> } </a> 
<a> return view ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void onCreate ( Bundle savedInstanceState ) { </a> 
<a> super . onCreate ( savedInstanceState ) ; </a> 
<a> <RARE_TOKEN> ( true ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> super . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( Session <RARE_TOKEN> ) { </a> 
<a> super . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( List < String > permissions ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( permissions , getSession ( ) ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( List < String > permissions ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( permissions , getSession ( ) ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( SessionLoginBehavior loginBehavior ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( loginBehavior ) ; </a> 
<a> } </a> 
<a> public SessionLoginBehavior <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( LoginButton . <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public LoginButton . <RARE_TOKEN> <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( Session . StatusCallback callback ) { </a> 
<a> this . <RARE_TOKEN> = callback ; </a> 
<a> } </a> 
<a> public Session . StatusCallback <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( SessionState state , Exception exception ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( getSession ( ) , state , exception ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> List < String > getPermissions ( ) { </a> 
<a> return <RARE_TOKEN> . getPermissions ( ) ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( ) { </a> 
<a> final Session currentSession = getSession ( ) ; </a> 
<a> if ( currentSession != null && currentSession . isOpened ( ) ) { </a> 
<a> if ( currentSession != <RARE_TOKEN> ) { </a> 
<a> Request request = Request . <RARE_TOKEN> ( currentSession , new Request . <RARE_TOKEN> ( ) { </a> 
<a> @ Override </a> 
<a> public void onCompleted ( GraphUser <RARE_TOKEN> , Response response ) { </a> 
<a> if ( currentSession == getSession ( ) ) { </a> 
<a> user = <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> if ( response . getError ( ) != null ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( response . getError ( ) . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> Bundle parameters = new Bundle ( ) ; </a> 
<a> parameters . putString ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> request . <RARE_TOKEN> ( parameters ) ; </a> 
<a> Request . <RARE_TOKEN> ( request ) ; </a> 
<a> <RARE_TOKEN> = currentSession ; </a> 
<a> } </a> 
<a> } else { </a> 
<a> user = null ; </a> 
<a> } </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( ) { </a> 
<a> if ( ! <RARE_TOKEN> ( ) ) { </a> 
<a> return ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> ( ) ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( getResources ( ) . <RARE_TOKEN> ( R . <RARE_TOKEN> . <RARE_TOKEN> ) ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> , - <RARE_TOKEN> , </a> 
<a> getResources ( ) . <RARE_TOKEN> ( R . <RARE_TOKEN> . <RARE_TOKEN> ) ) ; </a> 
<a> if ( user != null ) { </a> 
<a> <RARE_TOKEN> request = <RARE_TOKEN> ( ) ; </a> 
<a> if ( request != null ) { </a> 
<a> URL <RARE_TOKEN> = request . <RARE_TOKEN> ( ) ; </a> 
<a> if ( ! <RARE_TOKEN> . equals ( <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ) { </a> 
<a> if ( user . getId ( ) . equals ( <RARE_TOKEN> ) ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( null , <RARE_TOKEN> , null , null ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( request ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> <RARE_TOKEN> . setText ( user . getName ( ) ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> . setText ( getResources ( ) . getString ( </a> 
<a> R . string . <RARE_TOKEN> ) ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = getResources ( ) . <RARE_TOKEN> ( R . <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( 0 , 0 , </a> 
<a> getResources ( ) . <RARE_TOKEN> ( R . <RARE_TOKEN> . <RARE_TOKEN> ) , </a> 
<a> getResources ( ) . <RARE_TOKEN> ( R . <RARE_TOKEN> . <RARE_TOKEN> ) ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( null , <RARE_TOKEN> , null , null ) ; </a> 
<a> } </a> 
<a> } else { </a> 
<a> int <RARE_TOKEN> = getResources ( ) . <RARE_TOKEN> ( R . <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . setText ( getResources ( ) . getString ( </a> 
<a> R . string . <RARE_TOKEN> ) ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( null , null , null , null ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( null ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> request = null ; </a> 
<a> try { </a> 
<a> <RARE_TOKEN> . Builder <RARE_TOKEN> = new <RARE_TOKEN> . Builder ( </a> 
<a> getActivity ( ) , </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( </a> 
<a> user . getId ( ) , </a> 
<a> getResources ( ) . <RARE_TOKEN> ( R . <RARE_TOKEN> . <RARE_TOKEN> ) , </a> 
<a> getResources ( ) . <RARE_TOKEN> ( R . <RARE_TOKEN> . <RARE_TOKEN> ) ) ) ; </a> 
<a> request = <RARE_TOKEN> . <RARE_TOKEN> ( this ) </a> 
<a> . setCallback ( </a> 
<a> new <RARE_TOKEN> . Callback ( ) { </a> 
<a> @ Override </a> 
<a> public void onCompleted ( <RARE_TOKEN> response ) { </a> 
<a> <RARE_TOKEN> ( user . getId ( ) , response ) ; </a> 
<a> } </a> 
<a> } ) </a> 
<a> . build ( ) ; </a> 
<a> } catch ( <RARE_TOKEN> e ) { </a> 
<a> } </a> 
<a> return request ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( String id , <RARE_TOKEN> response ) { </a> 
<a> if ( response != null ) { </a> 
<a> Bitmap <RARE_TOKEN> = response . <RARE_TOKEN> ( ) ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( <RARE_TOKEN> . this . getResources ( ) , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( 0 , 0 , </a> 
<a> getResources ( ) . <RARE_TOKEN> ( R . <RARE_TOKEN> . <RARE_TOKEN> ) , </a> 
<a> getResources ( ) . <RARE_TOKEN> ( R . <RARE_TOKEN> . <RARE_TOKEN> ) ) ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = id ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( null , <RARE_TOKEN> , null , null ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( response . getRequest ( ) . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package com . facebook . widget ; </a> 
<a> import android . annotation . <RARE_TOKEN> ; </a> 
<a> import android . app . <RARE_TOKEN> ; </a> 
<a> import android . app . <RARE_TOKEN> ; </a> 
<a> import android . content . Context ; </a> 
<a> import android . content . DialogInterface ; </a> 
<a> import android . content . Intent ; </a> 
<a> import android . <RARE_TOKEN> . Bitmap ; </a> 
<a> import android . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import android . <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import android . net . <RARE_TOKEN> ; </a> 
<a> import android . net . http . <RARE_TOKEN> ; </a> 
<a> import android . os . Bundle ; </a> 
<a> import android . view . View ; </a> 
<a> import android . view . ViewGroup ; </a> 
<a> import android . view . <RARE_TOKEN> ; </a> 
<a> import android . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import android . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import android . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import android . widget . <RARE_TOKEN> ; </a> 
<a> import android . widget . <RARE_TOKEN> ; </a> 
<a> import android . widget . <RARE_TOKEN> ; </a> 
<a> import com . facebook . * ; </a> 
<a> import com . facebook . android . * ; </a> 
<a> import com . facebook . internal . Logger ; </a> 
<a> import com . facebook . internal . <RARE_TOKEN> ; </a> 
<a> import com . facebook . internal . Utility ; </a> 
<a> import com . facebook . internal . Validate ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> private static final String <RARE_TOKEN> = Logger . <RARE_TOKEN> + <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> public static final int <RARE_TOKEN> = android . R . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> private String url ; </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> private boolean <RARE_TOKEN> = false ; </a> 
<a> private boolean <RARE_TOKEN> = false ; </a> 
<a> public interface <RARE_TOKEN> { </a> 
<a> void <RARE_TOKEN> ( Bundle values , FacebookException error ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( Context context , String url ) { </a> 
<a> this ( context , url , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( Context context , String url , int <RARE_TOKEN> ) { </a> 
<a> super ( context , <RARE_TOKEN> ) ; </a> 
<a> this . url = url ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( Context context , String action , Bundle parameters , int <RARE_TOKEN> , <RARE_TOKEN> listener ) { </a> 
<a> super ( context , <RARE_TOKEN> ) ; </a> 
<a> if ( parameters == null ) { </a> 
<a> parameters = new Bundle ( ) ; </a> 
<a> } </a> 
<a> parameters . putString ( <RARE_TOKEN> . <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> parameters . putString ( <RARE_TOKEN> . <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> uri = Utility . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> + action , parameters ) ; </a> 
<a> this . url = uri . toString ( ) ; </a> 
<a> <RARE_TOKEN> = listener ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( <RARE_TOKEN> listener ) { </a> 
<a> <RARE_TOKEN> = listener ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void dismiss ( ) { </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> if ( ! <RARE_TOKEN> ) { </a> 
<a> if ( <RARE_TOKEN> . <RARE_TOKEN> ( ) ) { </a> 
<a> <RARE_TOKEN> . dismiss ( ) ; </a> 
<a> } </a> 
<a> super . dismiss ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> = true ; </a> 
<a> super . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> = false ; </a> 
<a> super . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void onCreate ( Bundle savedInstanceState ) { </a> 
<a> super . onCreate ( savedInstanceState ) ; </a> 
<a> <RARE_TOKEN> ( new <RARE_TOKEN> ( ) { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( DialogInterface <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> <RARE_TOKEN> = new <RARE_TOKEN> ( getContext ( ) ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( getContext ( ) . getString ( R . string . <RARE_TOKEN> ) ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( new <RARE_TOKEN> ( ) { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( DialogInterface <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> . this . dismiss ( ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = new <RARE_TOKEN> ( getContext ( ) ) ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> / 2 ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> , new ViewGroup . LayoutParams ( </a> 
<a> ViewGroup . LayoutParams . <RARE_TOKEN> , ViewGroup . LayoutParams . <RARE_TOKEN> ) ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> , </a> 
<a> new ViewGroup . LayoutParams ( ViewGroup . LayoutParams . <RARE_TOKEN> , ViewGroup . LayoutParams . <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( Bundle values ) { </a> 
<a> if ( <RARE_TOKEN> != null && ! <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> = true ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( values , null ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( Throwable error ) { </a> 
<a> if ( <RARE_TOKEN> != null && ! <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> = true ; </a> 
<a> FacebookException <RARE_TOKEN> = null ; </a> 
<a> if ( error instanceof FacebookException ) { </a> 
<a> <RARE_TOKEN> = ( FacebookException ) error ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> = new FacebookException ( error ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( null , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> ( new <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> = new <RARE_TOKEN> ( getContext ( ) ) ; </a> 
<a> <RARE_TOKEN> . setOnClickListener ( new View . OnClickListener ( ) { </a> 
<a> @ Override </a> 
<a> public void onClick ( View v ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> . this . dismiss ( ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = getContext ( ) . getResources ( ) . <RARE_TOKEN> ( R . <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . setVisibility ( View . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ <RARE_TOKEN> ( <RARE_TOKEN> ) </a> 
<a> private void <RARE_TOKEN> ( int <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( getContext ( ) ) ; </a> 
<a> <RARE_TOKEN> = new <RARE_TOKEN> ( getContext ( ) ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( false ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( false ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( new <RARE_TOKEN> ( ) ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( true ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( url ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( new <RARE_TOKEN> . LayoutParams ( ViewGroup . LayoutParams . <RARE_TOKEN> , </a> 
<a> ViewGroup . LayoutParams . <RARE_TOKEN> ) ) ; </a> 
<a> <RARE_TOKEN> . setVisibility ( View . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( false ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> private class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> @ Override </a> 
<a> @ SuppressWarnings ( <RARE_TOKEN> ) </a> 
<a> public boolean <RARE_TOKEN> ( <RARE_TOKEN> view , String url ) { </a> 
<a> Utility . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> <RARE_TOKEN> " + url ) ; </a> 
<a> if ( url . startsWith ( <RARE_TOKEN> . <RARE_TOKEN> ) ) { </a> 
<a> Bundle values = Util . <RARE_TOKEN> ( url ) ; </a> 
<a> String error = values . getString ( <RARE_TOKEN> ) ; </a> 
<a> if ( error == null ) { </a> 
<a> error = values . getString ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> String errorMessage = values . getString ( <RARE_TOKEN> ) ; </a> 
<a> if ( errorMessage == null ) { </a> 
<a> errorMessage = values . getString ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> String <RARE_TOKEN> = values . getString ( <RARE_TOKEN> ) ; </a> 
<a> int errorCode = FacebookRequestError . <RARE_TOKEN> ; </a> 
<a> if ( ! Utility . <RARE_TOKEN> ( <RARE_TOKEN> ) ) { </a> 
<a> try { </a> 
<a> errorCode = Integer . parseInt ( <RARE_TOKEN> ) ; </a> 
<a> } catch ( <RARE_TOKEN> ex ) { </a> 
<a> errorCode = FacebookRequestError . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<a> if ( Utility . <RARE_TOKEN> ( error ) && Utility </a> 
<a> . <RARE_TOKEN> ( errorMessage ) && errorCode == FacebookRequestError . <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( values ) ; </a> 
<a> } else if ( error != null && ( error . equals ( <RARE_TOKEN> ) || </a> 
<a> error . equals ( <RARE_TOKEN> ) ) ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } else { </a> 
<a> FacebookRequestError <RARE_TOKEN> = new FacebookRequestError ( errorCode , error , errorMessage ) ; </a> 
<a> <RARE_TOKEN> ( new <RARE_TOKEN> ( <RARE_TOKEN> , errorMessage ) ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> . this . dismiss ( ) ; </a> 
<a> return true ; </a> 
<a> } else if ( url . startsWith ( <RARE_TOKEN> . <RARE_TOKEN> ) ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> . this . dismiss ( ) ; </a> 
<a> return true ; </a> 
<a> } else if ( url . contains ( <RARE_TOKEN> ) ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> getContext ( ) . <RARE_TOKEN> ( </a> 
<a> new Intent ( Intent . <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> ( url ) ) ) ; </a> 
<a> return true ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( <RARE_TOKEN> view , int errorCode , </a> 
<a> String <RARE_TOKEN> , String <RARE_TOKEN> ) { </a> 
<a> super . <RARE_TOKEN> ( view , errorCode , <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( new <RARE_TOKEN> ( <RARE_TOKEN> , errorCode , <RARE_TOKEN> ) ) ; </a> 
<a> <RARE_TOKEN> . this . dismiss ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( <RARE_TOKEN> view , <RARE_TOKEN> handler , <RARE_TOKEN> error ) { </a> 
<a> super . <RARE_TOKEN> ( view , handler , error ) ; </a> 
<a> <RARE_TOKEN> ( new <RARE_TOKEN> ( null , <RARE_TOKEN> , null ) ) ; </a> 
<a> handler . cancel ( ) ; </a> 
<a> <RARE_TOKEN> . this . dismiss ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( <RARE_TOKEN> view , String url , Bitmap <RARE_TOKEN> ) { </a> 
<a> Utility . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> " + url ) ; </a> 
<a> super . <RARE_TOKEN> ( view , url , <RARE_TOKEN> ) ; </a> 
<a> if ( ! <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> . show ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( <RARE_TOKEN> view , String url ) { </a> 
<a> super . <RARE_TOKEN> ( view , url ) ; </a> 
<a> if ( ! <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> . dismiss ( ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . setVisibility ( View . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . setVisibility ( View . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private static class <RARE_TOKEN> < <RARE_TOKEN> extends <RARE_TOKEN> < ? > > { </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> public static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private Context context ; </a> 
<a> private Session session ; </a> 
<a> private String applicationId ; </a> 
<a> private String action ; </a> 
<a> private int <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private <RARE_TOKEN> listener ; </a> 
<a> private Bundle parameters ; </a> 
<a> protected <RARE_TOKEN> ( Context context , Session session , String action , Bundle parameters ) { </a> 
<a> Validate . <RARE_TOKEN> ( session , <RARE_TOKEN> ) ; </a> 
<a> if ( ! session . isOpened ( ) ) { </a> 
<a> throw new FacebookException ( <RARE_TOKEN> to <RARE_TOKEN> a Session that <RARE_TOKEN> not <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> this . session = session ; </a> 
<a> <RARE_TOKEN> ( context , action , parameters ) ; </a> 
<a> } </a> 
<a> protected <RARE_TOKEN> ( Context context , String applicationId , String action , Bundle parameters ) { </a> 
<a> Validate . <RARE_TOKEN> ( applicationId , <RARE_TOKEN> ) ; </a> 
<a> this . applicationId = applicationId ; </a> 
<a> <RARE_TOKEN> ( context , action , parameters ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> <RARE_TOKEN> ( int <RARE_TOKEN> ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> @ SuppressWarnings ( "unchecked" ) </a> 
<a> <RARE_TOKEN> result = ( <RARE_TOKEN> ) this ; </a> 
<a> return result ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> <RARE_TOKEN> ( <RARE_TOKEN> listener ) { </a> 
<a> this . listener = listener ; </a> 
<a> @ SuppressWarnings ( "unchecked" ) </a> 
<a> <RARE_TOKEN> result = ( <RARE_TOKEN> ) this ; </a> 
<a> return result ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> build ( ) { </a> 
<a> if ( session != null && session . isOpened ( ) ) { </a> 
<a> parameters . putString ( <RARE_TOKEN> , session . <RARE_TOKEN> ( ) ) ; </a> 
<a> parameters . putString ( <RARE_TOKEN> , session . <RARE_TOKEN> ( ) ) ; </a> 
<a> } else { </a> 
<a> parameters . putString ( <RARE_TOKEN> , applicationId ) ; </a> 
<a> } </a> 
<a> if ( ! parameters . containsKey ( <RARE_TOKEN> . <RARE_TOKEN> ) ) { </a> 
<a> parameters . putString ( <RARE_TOKEN> . <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> return new <RARE_TOKEN> ( context , action , parameters , <RARE_TOKEN> , listener ) ; </a> 
<a> } </a> 
<a> protected String <RARE_TOKEN> ( ) { </a> 
<a> return applicationId ; </a> 
<a> } </a> 
<a> protected Context getContext ( ) { </a> 
<a> return context ; </a> 
<a> } </a> 
<a> protected int <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> protected Bundle <RARE_TOKEN> ( ) { </a> 
<a> return parameters ; </a> 
<a> } </a> 
<a> protected <RARE_TOKEN> . <RARE_TOKEN> <RARE_TOKEN> ( ) { </a> 
<a> return listener ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( Context context , String action , Bundle parameters ) { </a> 
<a> this . context = context ; </a> 
<a> this . action = action ; </a> 
<a> if ( parameters != null ) { </a> 
<a> this . parameters = parameters ; </a> 
<a> } else { </a> 
<a> this . parameters = new Bundle ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> public static class Builder extends <RARE_TOKEN> < Builder > { </a> 
<a> public Builder ( Context context , Session session , String action , Bundle parameters ) { </a> 
<a> super ( context , session , action , parameters ) ; </a> 
<a> } </a> 
<a> public Builder ( Context context , String applicationId , String action , Bundle parameters ) { </a> 
<a> super ( context , applicationId , action , parameters ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public static class <RARE_TOKEN> extends <RARE_TOKEN> < <RARE_TOKEN> > { </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = "name" ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> public <RARE_TOKEN> ( Context context , Session session ) { </a> 
<a> super ( context , session , <RARE_TOKEN> , null ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( Context context , Session session , Bundle parameters ) { </a> 
<a> super ( context , session , <RARE_TOKEN> , parameters ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> <RARE_TOKEN> ( String id ) { </a> 
<a> <RARE_TOKEN> ( ) . putString ( <RARE_TOKEN> , id ) ; </a> 
<a> return this ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> <RARE_TOKEN> ( String id ) { </a> 
<a> <RARE_TOKEN> ( ) . putString ( <RARE_TOKEN> , id ) ; </a> 
<a> return this ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> <RARE_TOKEN> ( String <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( ) . putString ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> return this ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> <RARE_TOKEN> ( String <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( ) . putString ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> return this ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> <RARE_TOKEN> ( String source ) { </a> 
<a> <RARE_TOKEN> ( ) . putString ( <RARE_TOKEN> , source ) ; </a> 
<a> return this ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> <RARE_TOKEN> ( String name ) { </a> 
<a> <RARE_TOKEN> ( ) . putString ( <RARE_TOKEN> , name ) ; </a> 
<a> return this ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> <RARE_TOKEN> ( String <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( ) . putString ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> return this ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> <RARE_TOKEN> ( String <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( ) . putString ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> return this ; </a> 
<a> } </a> 
<a> } </a> 
<a> public static class <RARE_TOKEN> extends <RARE_TOKEN> < <RARE_TOKEN> > { </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = "message" ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> public <RARE_TOKEN> ( Context context , Session session ) { </a> 
<a> super ( context , session , <RARE_TOKEN> , null ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( Context context , Session session , Bundle parameters ) { </a> 
<a> super ( context , session , <RARE_TOKEN> , parameters ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> <RARE_TOKEN> ( String message ) { </a> 
<a> <RARE_TOKEN> ( ) . putString ( <RARE_TOKEN> , message ) ; </a> 
<a> return this ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> <RARE_TOKEN> ( String id ) { </a> 
<a> <RARE_TOKEN> ( ) . putString ( <RARE_TOKEN> , id ) ; </a> 
<a> return this ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> <RARE_TOKEN> ( String data ) { </a> 
<a> <RARE_TOKEN> ( ) . putString ( <RARE_TOKEN> , data ) ; </a> 
<a> return this ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> <RARE_TOKEN> ( String <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( ) . putString ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> return this ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package com . facebook . widget ; </a> 
<a> import com . facebook . <RARE_TOKEN> ; </a> 
<a> import java . util . concurrent . <RARE_TOKEN> ; </a> 
<a> class WorkQueue { </a> 
<a> public static final int <RARE_TOKEN> = 8 ; </a> 
<a> private final Object <RARE_TOKEN> = new Object ( ) ; </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> private final int <RARE_TOKEN> ; </a> 
<a> private final <RARE_TOKEN> executor ; </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> = null ; </a> 
<a> private int <RARE_TOKEN> = 0 ; </a> 
<a> WorkQueue ( ) { </a> 
<a> this ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> WorkQueue ( int <RARE_TOKEN> ) { </a> 
<a> this ( <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> WorkQueue ( int <RARE_TOKEN> , <RARE_TOKEN> executor ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> this . executor = executor ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> ( Runnable callback ) { </a> 
<a> return <RARE_TOKEN> ( callback , true ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> ( Runnable callback , boolean <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( callback ) ; </a> 
<a> synchronized ( <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> void <RARE_TOKEN> ( ) { </a> 
<a> synchronized ( <RARE_TOKEN> ) { </a> 
<a> int count = 0 ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> { </a> 
<a> <RARE_TOKEN> . verify ( true ) ; </a> 
<a> count ++ ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> } while ( <RARE_TOKEN> != <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> assert <RARE_TOKEN> == count ; </a> 
<a> } </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> ( null ) ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = null ; </a> 
<a> synchronized ( <RARE_TOKEN> ) { </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> -- ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> < <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> , false ) ; </a> 
<a> <RARE_TOKEN> ++ ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( true ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> execute ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private void execute ( final <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> executor . execute ( new Runnable ( ) { </a> 
<a> @ Override </a> 
<a> public void run ( ) { </a> 
<a> try { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) . run ( ) ; </a> 
<a> } finally { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> } </a> 
<a> private class <RARE_TOKEN> implements <RARE_TOKEN> { </a> 
<a> private final Runnable callback ; </a> 
<a> private <RARE_TOKEN> next ; </a> 
<a> private <RARE_TOKEN> prev ; </a> 
<a> private boolean <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> ( Runnable callback ) { </a> 
<a> this . callback = callback ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean cancel ( ) { </a> 
<a> synchronized ( <RARE_TOKEN> ) { </a> 
<a> if ( ! <RARE_TOKEN> ( ) ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> return true ; </a> 
<a> } </a> 
<a> } </a> 
<a> return false ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> synchronized ( <RARE_TOKEN> ) { </a> 
<a> if ( ! <RARE_TOKEN> ( ) ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ( <RARE_TOKEN> , true ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> Runnable <RARE_TOKEN> ( ) { </a> 
<a> return callback ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> ( ) { </a> 
<a> return next ; </a> 
<a> } </a> 
<a> void <RARE_TOKEN> ( boolean <RARE_TOKEN> ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> ( <RARE_TOKEN> list , boolean <RARE_TOKEN> ) { </a> 
<a> assert next == null ; </a> 
<a> assert prev == null ; </a> 
<a> if ( list == null ) { </a> 
<a> list = next = prev = this ; </a> 
<a> } else { </a> 
<a> next = list ; </a> 
<a> prev = list . prev ; </a> 
<a> next . prev = prev . next = this ; </a> 
<a> } </a> 
<a> return <RARE_TOKEN> ? this : list ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> ( <RARE_TOKEN> list ) { </a> 
<a> assert next != null ; </a> 
<a> assert prev != null ; </a> 
<a> if ( list == this ) { </a> 
<a> if ( next == this ) { </a> 
<a> list = null ; </a> 
<a> } else { </a> 
<a> list = next ; </a> 
<a> } </a> 
<a> } </a> 
<a> next . prev = prev ; </a> 
<a> prev . next = next ; </a> 
<a> next = prev = null ; </a> 
<a> return list ; </a> 
<a> } </a> 
<a> void verify ( boolean <RARE_TOKEN> ) { </a> 
<a> assert prev . next == this ; </a> 
<a> assert next . prev == this ; </a> 
<a> assert <RARE_TOKEN> ( ) == <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<a> interface <RARE_TOKEN> { </a> 
<a> boolean cancel ( ) ; </a> 
<a> boolean <RARE_TOKEN> ( ) ; </a> 
<a> void <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package com . facebook ; </a> 
<a> import android . content . Intent ; </a> 
<a> import android . os . Bundle ; </a> 
<a> import android . test . <RARE_TOKEN> ; </a> 
<a> import android . test . suitebuilder . annotation . LargeTest ; </a> 
<a> import android . test . suitebuilder . annotation . MediumTest ; </a> 
<a> import android . test . suitebuilder . annotation . SmallTest ; </a> 
<a> import com . facebook . internal . Utility ; </a> 
<a> import java . io . IOException ; </a> 
<a> import java . util . ArrayList ; </a> 
<a> import java . util . Arrays ; </a> 
<a> import java . util . Date ; </a> 
<a> import java . util . List ; </a> 
<a> public final class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> List < String > permissions = Utility . <RARE_TOKEN> ( ) ; </a> 
<a> AccessToken token = AccessToken . <RARE_TOKEN> ( permissions ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( permissions , token ) ; </a> 
<a> assertEquals ( "" , token . getToken ( ) ) ; </a> 
<a> assertTrue ( token . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertTrue ( token . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( new Date ( ) ) ) ; </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> List < String > permissions = Utility . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> AccessToken token = AccessToken . <RARE_TOKEN> ( permissions ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( permissions , token ) ; </a> 
<a> assertEquals ( "" , token . getToken ( ) ) ; </a> 
<a> assertTrue ( token . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertTrue ( token . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( new Date ( ) ) ) ; </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> List < String > permissions = Utility . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> String token = <RARE_TOKEN> ; </a> 
<a> Bundle bundle = new Bundle ( ) ; </a> 
<a> bundle . putString ( <RARE_TOKEN> , token ) ; </a> 
<a> bundle . putString ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> AccessToken accessToken = AccessToken . <RARE_TOKEN> ( permissions , bundle , AccessTokenSource . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( permissions , accessToken ) ; </a> 
<a> assertEquals ( token , accessToken . getToken ( ) ) ; </a> 
<a> assertEquals ( AccessTokenSource . <RARE_TOKEN> , accessToken . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertTrue ( ! accessToken . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> List < String > permissions = Utility . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> String token = <RARE_TOKEN> ; </a> 
<a> Intent intent = new Intent ( ) ; </a> 
<a> intent . <RARE_TOKEN> ( <RARE_TOKEN> , token ) ; </a> 
<a> intent . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> intent . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> AccessToken accessToken = AccessToken </a> 
<a> . <RARE_TOKEN> ( permissions , intent . <RARE_TOKEN> ( ) , AccessTokenSource . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( permissions , accessToken ) ; </a> 
<a> assertEquals ( token , accessToken . getToken ( ) ) ; </a> 
<a> assertEquals ( AccessTokenSource . <RARE_TOKEN> , accessToken . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertTrue ( ! accessToken . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> List < String > permissions = Utility . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> String token = <RARE_TOKEN> ; </a> 
<a> Intent intent = new Intent ( ) ; </a> 
<a> intent . <RARE_TOKEN> ( <RARE_TOKEN> , token ) ; </a> 
<a> intent . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> intent . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> AccessToken accessToken = AccessToken </a> 
<a> . <RARE_TOKEN> ( permissions , intent . <RARE_TOKEN> ( ) , AccessTokenSource . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( permissions , accessToken ) ; </a> 
<a> assertEquals ( token , accessToken . getToken ( ) ) ; </a> 
<a> assertEquals ( AccessTokenSource . <RARE_TOKEN> , accessToken . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertTrue ( ! accessToken . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> ArrayList < String > permissions = Utility . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> String token = <RARE_TOKEN> ; </a> 
<a> long <RARE_TOKEN> = new Date ( ) . getTime ( ) / 1000 ; </a> 
<a> Intent intent = new Intent ( ) ; </a> 
<a> intent . <RARE_TOKEN> ( NativeProtocol . <RARE_TOKEN> , token ) ; </a> 
<a> intent . <RARE_TOKEN> ( NativeProtocol . <RARE_TOKEN> , <RARE_TOKEN> + <RARE_TOKEN> ) ; </a> 
<a> intent . <RARE_TOKEN> ( NativeProtocol . <RARE_TOKEN> , permissions ) ; </a> 
<a> AccessToken accessToken = AccessToken . <RARE_TOKEN> ( </a> 
<a> intent . <RARE_TOKEN> ( ) , AccessTokenSource . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( permissions , accessToken ) ; </a> 
<a> assertEquals ( token , accessToken . getToken ( ) ) ; </a> 
<a> assertEquals ( AccessTokenSource . <RARE_TOKEN> , accessToken . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertTrue ( ! accessToken . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> ArrayList < String > permissions = Utility . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> String token = <RARE_TOKEN> ; </a> 
<a> Date <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> Date <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( - <RARE_TOKEN> ) ; </a> 
<a> Bundle bundle = new Bundle ( ) ; </a> 
<a> TokenCachingStrategy . <RARE_TOKEN> ( bundle , token ) ; </a> 
<a> TokenCachingStrategy . <RARE_TOKEN> ( bundle , <RARE_TOKEN> ) ; </a> 
<a> TokenCachingStrategy . <RARE_TOKEN> ( bundle , AccessTokenSource . <RARE_TOKEN> ) ; </a> 
<a> TokenCachingStrategy . <RARE_TOKEN> ( bundle , <RARE_TOKEN> ) ; </a> 
<a> TokenCachingStrategy . <RARE_TOKEN> ( bundle , permissions ) ; </a> 
<a> AccessToken accessToken = AccessToken . <RARE_TOKEN> ( bundle ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( permissions , accessToken ) ; </a> 
<a> assertEquals ( token , accessToken . getToken ( ) ) ; </a> 
<a> assertEquals ( AccessTokenSource . <RARE_TOKEN> , accessToken . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertTrue ( ! accessToken . <RARE_TOKEN> ( ) ) ; </a> 
<a> Bundle cache = accessToken . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( bundle , cache ) ; </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> Bundle bundle = new Bundle ( ) ; </a> 
<a> for ( String token : new String [ ] { "" , <RARE_TOKEN> <RARE_TOKEN> random token <RARE_TOKEN> } ) { </a> 
<a> TokenCachingStrategy . <RARE_TOKEN> ( bundle , token ) ; </a> 
<a> assertEquals ( token , TokenCachingStrategy . getToken ( bundle ) ) ; </a> 
<a> } </a> 
<a> for ( Date <RARE_TOKEN> : new Date [ ] { new Date ( <RARE_TOKEN> ) , new Date ( ) } ) { </a> 
<a> TokenCachingStrategy . <RARE_TOKEN> ( bundle , <RARE_TOKEN> ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , TokenCachingStrategy . <RARE_TOKEN> ( bundle ) ) ; </a> 
<a> TokenCachingStrategy . <RARE_TOKEN> ( bundle , <RARE_TOKEN> ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , TokenCachingStrategy . <RARE_TOKEN> ( bundle ) ) ; </a> 
<a> } </a> 
<a> for ( long <RARE_TOKEN> : new long [ ] { 0 , - 1 , System . currentTimeMillis ( ) } ) { </a> 
<a> TokenCachingStrategy . <RARE_TOKEN> ( bundle , <RARE_TOKEN> ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , TokenCachingStrategy . <RARE_TOKEN> ( bundle ) ) ; </a> 
<a> TokenCachingStrategy . <RARE_TOKEN> ( bundle , <RARE_TOKEN> ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , TokenCachingStrategy . <RARE_TOKEN> ( bundle ) ) ; </a> 
<a> } </a> 
<a> for ( AccessTokenSource source : AccessTokenSource . values ( ) ) { </a> 
<a> TokenCachingStrategy . <RARE_TOKEN> ( bundle , source ) ; </a> 
<a> assertEquals ( source , TokenCachingStrategy . <RARE_TOKEN> ( bundle ) ) ; </a> 
<a> } </a> 
<a> List < String > <RARE_TOKEN> = Arrays . asList ( "" , <RARE_TOKEN> <RARE_TOKEN> random token <RARE_TOKEN> ) ; </a> 
<a> List < String > <RARE_TOKEN> = Arrays . asList ( ) ; </a> 
<a> ArrayList < String > <RARE_TOKEN> = new ArrayList < String > ( <RARE_TOKEN> ) ; </a> 
<a> ArrayList < String > <RARE_TOKEN> = new ArrayList < String > ( ) ; </a> 
<a> @ SuppressWarnings ( "unchecked" ) </a> 
<a> List < List < String > > <RARE_TOKEN> = Arrays </a> 
<a> . asList ( <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> for ( List < String > list : <RARE_TOKEN> ) { </a> 
<a> TokenCachingStrategy . <RARE_TOKEN> ( bundle , list ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( list , TokenCachingStrategy . getPermissions ( bundle ) ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> . add ( null ) ; </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) throws IOException { </a> 
<a> AccessToken accessToken = AccessToken . <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> , </a> 
<a> Arrays . asList ( <RARE_TOKEN> , <RARE_TOKEN> ) , AccessTokenSource . <RARE_TOKEN> ) ; </a> 
<a> AccessToken res = <RARE_TOKEN> . <RARE_TOKEN> ( accessToken ) ; </a> 
<a> assertEquals ( accessToken . getPermissions ( ) , res . getPermissions ( ) ) ; </a> 
<a> assertEquals ( accessToken . getToken ( ) , res . getToken ( ) ) ; </a> 
<a> assertEquals ( accessToken . <RARE_TOKEN> ( ) , res . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> List < String > permissions = Arrays . asList ( <RARE_TOKEN> to <RARE_TOKEN> , <RARE_TOKEN> not <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> AccessToken accessToken = new AccessToken ( <RARE_TOKEN> <RARE_TOKEN> , new Date ( ) , permissions , </a> 
<a> AccessTokenSource . <RARE_TOKEN> , new Date ( ) ) ; </a> 
<a> permissions = accessToken . getPermissions ( ) ; </a> 
<a> try { </a> 
<a> permissions . add ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> fail ( ) ; </a> 
<a> } catch ( UnsupportedOperationException ex ) { </a> 
<a> } </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> final String token = <RARE_TOKEN> token of <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> AccessToken accessToken = AccessToken . <RARE_TOKEN> ( token , null , null , null , null ) ; </a> 
<a> assertEquals ( token , accessToken . getToken ( ) ) ; </a> 
<a> assertEquals ( new Date ( Long . MAX_VALUE ) , accessToken . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertEquals ( AccessTokenSource . <RARE_TOKEN> , accessToken . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertEquals ( 0 , accessToken . getPermissions ( ) . size ( ) ) ; </a> 
<a> long <RARE_TOKEN> = accessToken . <RARE_TOKEN> ( ) . getTime ( ) - new Date ( ) . getTime ( ) ; </a> 
<a> assertTrue ( <RARE_TOKEN> < 1000 ) ; </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> final String token = <RARE_TOKEN> token of <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> final List < String > permissions = Arrays . asList ( <RARE_TOKEN> , <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> final Date <RARE_TOKEN> = new Date ( <RARE_TOKEN> , 5 , 3 ) ; </a> 
<a> final Date <RARE_TOKEN> = new Date ( <RARE_TOKEN> , 8 , 15 ) ; </a> 
<a> final AccessTokenSource source = AccessTokenSource . <RARE_TOKEN> ; </a> 
<a> AccessToken accessToken = AccessToken </a> 
<a> . <RARE_TOKEN> ( token , <RARE_TOKEN> , <RARE_TOKEN> , source , permissions ) ; </a> 
<a> assertEquals ( token , accessToken . getToken ( ) ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , accessToken . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , accessToken . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertEquals ( source , accessToken . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertEquals ( permissions , accessToken . getPermissions ( ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package com . facebook ; </a> 
<a> import android . <RARE_TOKEN> . Bitmap ; </a> 
<a> import android . test . suitebuilder . annotation . LargeTest ; </a> 
<a> import android . test . suitebuilder . annotation . MediumTest ; </a> 
<a> import android . test . suitebuilder . annotation . SmallTest ; </a> 
<a> import com . facebook . model . GraphObject ; </a> 
<a> import com . facebook . model . GraphPlace ; </a> 
<a> import com . facebook . model . GraphUser ; </a> 
<a> import java . net . HttpURLConnection ; </a> 
<a> import java . util . Arrays ; </a> 
<a> import java . util . List ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> Request request = Request . <RARE_TOKEN> ( null , <RARE_TOKEN> , null , null ) ; </a> 
<a> try { </a> 
<a> TestRequestAsyncTask task = <RARE_TOKEN> ( request ) ; </a> 
<a> assertNotNull ( task ) ; </a> 
<a> } catch ( Throwable throwable ) { </a> 
<a> assertNull ( throwable ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) throws Exception { </a> 
<a> try { </a> 
<a> TestRequestAsyncTask task = new TestRequestAsyncTask ( ( Request [ ] ) null ) ; </a> 
<a> task . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> ( 1 ) ; </a> 
<a> fail ( <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } catch ( NullPointerException exception ) { </a> 
<a> } </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) throws Exception { </a> 
<a> try { </a> 
<a> TestRequestAsyncTask task = new TestRequestAsyncTask ( new Request [ ] { } ) ; </a> 
<a> task . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> ( 1 ) ; </a> 
<a> fail ( <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } catch ( IllegalArgumentException exception ) { </a> 
<a> } </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) throws Exception { </a> 
<a> try { </a> 
<a> TestRequestAsyncTask task = new TestRequestAsyncTask ( new Request [ ] { null } ) ; </a> 
<a> task . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> ( 1 ) ; </a> 
<a> fail ( <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } catch ( NullPointerException exception ) { </a> 
<a> } </a> 
<a> } </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> Request request = new Request ( null , <RARE_TOKEN> , null , null , new <RARE_TOKEN> ( ) { </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( Response response ) { </a> 
<a> assertNotNull ( response ) ; </a> 
<a> GraphPlace <RARE_TOKEN> = response . <RARE_TOKEN> ( GraphPlace . class ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> TestRequestAsyncTask task = new TestRequestAsyncTask ( request ) ; </a> 
<a> task . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> ( 2 ) ; </a> 
<a> } </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> Request request = new Request ( null , <RARE_TOKEN> , null , null , new <RARE_TOKEN> ( ) { </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( Response response ) { </a> 
<a> assertNotNull ( response ) ; </a> 
<a> GraphPlace <RARE_TOKEN> = response . <RARE_TOKEN> ( GraphPlace . class ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> HttpURLConnection connection = Request . <RARE_TOKEN> ( request ) ; </a> 
<a> TestRequestAsyncTask task = new TestRequestAsyncTask ( connection , Arrays . asList ( new Request [ ] { request } ) ) ; </a> 
<a> task . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> ( 2 ) ; </a> 
<a> } </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> Request request = new Request ( null , <RARE_TOKEN> , null , null , new <RARE_TOKEN> ( ) ) ; </a> 
<a> TestRequestAsyncTask task = new TestRequestAsyncTask ( request ) ; </a> 
<a> task . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> ( 2 ) ; </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) throws Throwable { </a> 
<a> Request <RARE_TOKEN> = new Request ( null , <RARE_TOKEN> , null , null , new <RARE_TOKEN> ( ) ) ; </a> 
<a> Request <RARE_TOKEN> = new Request ( null , <RARE_TOKEN> , null , null , new <RARE_TOKEN> ( ) ) ; </a> 
<a> TestRequestAsyncTask task = new TestRequestAsyncTask ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> task . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> ( 3 ) ; </a> 
<a> } </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> TestSession session = openTestSessionWithSharedUser ( ) ; </a> 
<a> final int <RARE_TOKEN> = 8 ; </a> 
<a> Request [ ] requests = new Request [ <RARE_TOKEN> ] ; </a> 
<a> for ( int i = 0 ; i < <RARE_TOKEN> ; ++ i ) { </a> 
<a> boolean <RARE_TOKEN> = ( i <RARE_TOKEN> 2 ) == 1 ; </a> 
<a> if ( <RARE_TOKEN> ) { </a> 
<a> requests [ i ] = new Request ( session , <RARE_TOKEN> , null , null , new <RARE_TOKEN> ( ) ) ; </a> 
<a> } else { </a> 
<a> requests [ i ] = new Request ( session , <RARE_TOKEN> , null , null , new <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> TestRequestAsyncTask task = new TestRequestAsyncTask ( requests ) ; </a> 
<a> task . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> + 1 ) ; </a> 
<a> } </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> final TestSession session = openTestSessionWithSharedUser ( ) ; </a> 
<a> class <RARE_TOKEN> extends <RARE_TOKEN> implements Request . <RARE_TOKEN> { </a> 
<a> @ Override </a> 
<a> public void onCompleted ( GraphUser <RARE_TOKEN> , Response response ) { </a> 
<a> assertNotNull ( <RARE_TOKEN> ) ; </a> 
<a> assertEquals ( session . <RARE_TOKEN> ( ) , <RARE_TOKEN> . getId ( ) ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( session , response ) ; </a> 
<a> onCompleted ( response ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( new Runnable ( ) { </a> 
<a> @ Override </a> 
<a> public void run ( ) { </a> 
<a> Request . <RARE_TOKEN> ( session , new <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> } , false ) ; </a> 
<a> <RARE_TOKEN> ( 1 ) ; </a> 
<a> } </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> final TestSession session = openTestSessionWithSharedUser ( ) ; </a> 
<a> class <RARE_TOKEN> extends <RARE_TOKEN> implements Request . <RARE_TOKEN> { </a> 
<a> @ Override </a> 
<a> public void onCompleted ( List < GraphUser > <RARE_TOKEN> , Response response ) { </a> 
<a> assertNotNull ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( session , response ) ; </a> 
<a> onCompleted ( response ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( new Runnable ( ) { </a> 
<a> @ Override </a> 
<a> public void run ( ) { </a> 
<a> Request . <RARE_TOKEN> ( session , new <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> } , false ) ; </a> 
<a> <RARE_TOKEN> ( 1 ) ; </a> 
<a> } </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> TestSession session = <RARE_TOKEN> ( null , <RARE_TOKEN> ) ; </a> 
<a> final int <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> final int <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> Bitmap <RARE_TOKEN> = <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> Bitmap <RARE_TOKEN> = <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> Request <RARE_TOKEN> = Request . <RARE_TOKEN> ( session , <RARE_TOKEN> , null ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> Request <RARE_TOKEN> = Request . <RARE_TOKEN> ( session , <RARE_TOKEN> , null ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> Request <RARE_TOKEN> = new Request ( session , <RARE_TOKEN> , null , null , </a> 
<a> new <RARE_TOKEN> ( ) { </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( Response response ) { </a> 
<a> assertNotNull ( response ) ; </a> 
<a> GraphObject <RARE_TOKEN> = response . <RARE_TOKEN> ( ) ; </a> 
<a> assertNotNull ( <RARE_TOKEN> ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , <RARE_TOKEN> . getProperty ( <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> Request <RARE_TOKEN> = new Request ( session , <RARE_TOKEN> , null , null , </a> 
<a> new <RARE_TOKEN> ( ) { </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( Response response ) { </a> 
<a> assertNotNull ( response ) ; </a> 
<a> GraphObject <RARE_TOKEN> = response . <RARE_TOKEN> ( ) ; </a> 
<a> assertNotNull ( <RARE_TOKEN> ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , <RARE_TOKEN> . getProperty ( <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> TestRequestAsyncTask task = new TestRequestAsyncTask ( <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> task . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> ( 3 ) ; </a> 
<a> } </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> TestSession session = openTestSessionWithSharedUser ( ) ; </a> 
<a> Request request = new Request ( session , <RARE_TOKEN> , null , null , new <RARE_TOKEN> ( ) ) ; </a> 
<a> RequestBatch <RARE_TOKEN> = new RequestBatch ( request ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( 1 ) ; </a> 
<a> TestRequestAsyncTask task = new TestRequestAsyncTask ( <RARE_TOKEN> ) ; </a> 
<a> task . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> ( 2 ) ; </a> 
<a> } </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> TestSession session = openTestSessionWithSharedUser ( ) ; </a> 
<a> Request request = new Request ( session , <RARE_TOKEN> , null , null , new <RARE_TOKEN> ( ) ) ; </a> 
<a> RequestBatch <RARE_TOKEN> = new RequestBatch ( request ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> TestRequestAsyncTask task = new TestRequestAsyncTask ( <RARE_TOKEN> ) ; </a> 
<a> task . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> ( 2 ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package com . facebook ; </a> 
<a> import android . app . Activity ; </a> 
<a> import android . content . Intent ; </a> 
<a> import android . content . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import android . os . Bundle ; </a> 
<a> import android . test . suitebuilder . annotation . LargeTest ; </a> 
<a> import android . test . suitebuilder . annotation . MediumTest ; </a> 
<a> import android . test . suitebuilder . annotation . SmallTest ; </a> 
<a> import com . facebook . model . <RARE_TOKEN> ; </a> 
<a> import com . facebook . model . GraphObject ; </a> 
<a> import com . facebook . model . GraphObjectList ; </a> 
<a> import com . facebook . model . GraphUser ; </a> 
<a> import java . io . * ; </a> 
<a> import java . util . * ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> private static final long <RARE_TOKEN> = <RARE_TOKEN> * 24 * <RARE_TOKEN> ; </a> 
<a> private static final ArrayList < String > <RARE_TOKEN> = new ArrayList < String > ( </a> 
<a> Arrays . asList ( <RARE_TOKEN> <RARE_TOKEN> , <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ) ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> is <RARE_TOKEN> ; </a> 
<a> class <RARE_TOKEN> extends AuthorizationClient { </a> 
<a> Result result ; </a> 
<a> boolean <RARE_TOKEN> = false ; </a> 
<a> <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> ( getActivity ( ) ) ; </a> 
<a> } </a> 
<a> AuthorizationClient . AuthorizationRequest getRequest ( ) { </a> 
<a> return pendingRequest ; </a> 
<a> } </a> 
<a> void <RARE_TOKEN> ( AuthorizationClient . AuthorizationRequest request ) { </a> 
<a> pendingRequest = request ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> void <RARE_TOKEN> ( Result result ) { </a> 
<a> this . result = result ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> = true ; </a> 
<a> } </a> 
<a> } </a> 
<a> AuthorizationClient . AuthorizationRequest <RARE_TOKEN> ( ) { </a> 
<a> Session . AuthorizationRequest request = new Session . AuthorizationRequest ( getActivity ( ) ) ; </a> 
<a> request . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> return request . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> Bundle bundle = new Bundle ( ) ; </a> 
<a> bundle . putString ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> bundle . putString ( <RARE_TOKEN> , String . format ( <RARE_TOKEN> , <RARE_TOKEN> ) ) ; </a> 
<a> bundle . putString ( <RARE_TOKEN> , <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> client = new <RARE_TOKEN> ( ) ; </a> 
<a> AuthorizationClient . <RARE_TOKEN> handler = client . new <RARE_TOKEN> ( ) ; </a> 
<a> AuthorizationClient . AuthorizationRequest request = <RARE_TOKEN> ( ) ; </a> 
<a> client . <RARE_TOKEN> ( request ) ; </a> 
<a> handler . <RARE_TOKEN> ( request , bundle , null ) ; </a> 
<a> assertNotNull ( client . result ) ; </a> 
<a> assertEquals ( AuthorizationClient . Result . <RARE_TOKEN> . <RARE_TOKEN> , client . result . code ) ; </a> 
<a> AccessToken token = client . result . token ; </a> 
<a> assertNotNull ( token ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , token . getToken ( ) ) ; </a> 
<a> <RARE_TOKEN> ( new Date ( ) , token . <RARE_TOKEN> ( ) , <RARE_TOKEN> * 1000 , 1000 ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , token . getPermissions ( ) ) ; </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> client = new <RARE_TOKEN> ( ) ; </a> 
<a> AuthorizationClient . <RARE_TOKEN> handler = client . new <RARE_TOKEN> ( ) ; </a> 
<a> AuthorizationClient . AuthorizationRequest request = <RARE_TOKEN> ( ) ; </a> 
<a> client . <RARE_TOKEN> ( request ) ; </a> 
<a> handler . <RARE_TOKEN> ( request , null , new <RARE_TOKEN> ( ) ) ; </a> 
<a> assertNotNull ( client . result ) ; </a> 
<a> assertEquals ( AuthorizationClient . Result . <RARE_TOKEN> . <RARE_TOKEN> , client . result . code ) ; </a> 
<a> assertNull ( client . result . token ) ; </a> 
<a> assertNotNull ( client . result . errorMessage ) ; </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> client = new <RARE_TOKEN> ( ) ; </a> 
<a> AuthorizationClient . <RARE_TOKEN> handler = client . new <RARE_TOKEN> ( ) ; </a> 
<a> AuthorizationClient . AuthorizationRequest request = <RARE_TOKEN> ( ) ; </a> 
<a> client . <RARE_TOKEN> ( request ) ; </a> 
<a> handler . <RARE_TOKEN> ( request , null , new FacebookException ( <RARE_TOKEN> ) ) ; </a> 
<a> assertNotNull ( client . result ) ; </a> 
<a> assertEquals ( AuthorizationClient . Result . <RARE_TOKEN> . <RARE_TOKEN> , client . result . code ) ; </a> 
<a> assertNull ( client . result . token ) ; </a> 
<a> assertNotNull ( client . result . errorMessage ) ; </a> 
<a> assertEquals ( client . result . errorMessage , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> client = new <RARE_TOKEN> ( ) { </a> 
<a> @ Override </a> 
<a> int <RARE_TOKEN> ( String <RARE_TOKEN> ) { </a> 
<a> return <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } ; </a> 
<a> AuthorizationClient . <RARE_TOKEN> handler = client . new <RARE_TOKEN> ( ) ; </a> 
<a> AuthorizationClient . AuthorizationRequest request = <RARE_TOKEN> ( ) ; </a> 
<a> client . <RARE_TOKEN> ( request ) ; </a> 
<a> handler . <RARE_TOKEN> ( request , null , new FacebookException ( <RARE_TOKEN> ) ) ; </a> 
<a> assertNotNull ( client . result ) ; </a> 
<a> assertEquals ( AuthorizationClient . Result . <RARE_TOKEN> . <RARE_TOKEN> , client . result . code ) ; </a> 
<a> assertNull ( client . result . token ) ; </a> 
<a> assertNotNull ( client . result . errorMessage ) ; </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> Bundle bundle = new Bundle ( ) ; </a> 
<a> bundle . <RARE_TOKEN> ( NativeProtocol . <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> bundle . <RARE_TOKEN> ( NativeProtocol . <RARE_TOKEN> , new Date ( ) . getTime ( ) / 1000 + <RARE_TOKEN> ) ; </a> 
<a> bundle . putString ( NativeProtocol . <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> client = new <RARE_TOKEN> ( ) ; </a> 
<a> AuthorizationClient . <RARE_TOKEN> handler = client . new <RARE_TOKEN> ( ) ; </a> 
<a> AuthorizationClient . AuthorizationRequest request = <RARE_TOKEN> ( ) ; </a> 
<a> client . <RARE_TOKEN> ( request ) ; </a> 
<a> handler . <RARE_TOKEN> ( request , bundle ) ; </a> 
<a> assertNotNull ( client . result ) ; </a> 
<a> assertEquals ( AuthorizationClient . Result . <RARE_TOKEN> . <RARE_TOKEN> , client . result . code ) ; </a> 
<a> AccessToken token = client . result . token ; </a> 
<a> assertNotNull ( token ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , token . getToken ( ) ) ; </a> 
<a> <RARE_TOKEN> ( new Date ( ) , token . <RARE_TOKEN> ( ) , <RARE_TOKEN> * 1000 , 1000 ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , token . getPermissions ( ) ) ; </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> Bundle bundle = new Bundle ( ) ; </a> 
<a> bundle . <RARE_TOKEN> ( NativeProtocol . <RARE_TOKEN> , new ArrayList < String > ( Arrays . asList ( <RARE_TOKEN> <RARE_TOKEN> ) ) ) ; </a> 
<a> bundle . <RARE_TOKEN> ( NativeProtocol . <RARE_TOKEN> , new Date ( ) . getTime ( ) / 1000 + <RARE_TOKEN> ) ; </a> 
<a> bundle . putString ( NativeProtocol . <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> client = new <RARE_TOKEN> ( ) ; </a> 
<a> AuthorizationClient . <RARE_TOKEN> handler = client . new <RARE_TOKEN> ( ) ; </a> 
<a> AuthorizationClient . AuthorizationRequest request = <RARE_TOKEN> ( ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> . size ( ) , request . getPermissions ( ) . size ( ) ) ; </a> 
<a> client . <RARE_TOKEN> ( request ) ; </a> 
<a> handler . <RARE_TOKEN> ( request , bundle ) ; </a> 
<a> assertNull ( client . result ) ; </a> 
<a> assertTrue ( client . <RARE_TOKEN> ) ; </a> 
<a> assertEquals ( 1 , request . getPermissions ( ) . size ( ) ) ; </a> 
<a> assertTrue ( request . getPermissions ( ) . contains ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> client = new <RARE_TOKEN> ( ) ; </a> 
<a> AuthorizationClient . <RARE_TOKEN> handler = client . new <RARE_TOKEN> ( ) ; </a> 
<a> AuthorizationClient . AuthorizationRequest request = <RARE_TOKEN> ( ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> . size ( ) , request . getPermissions ( ) . size ( ) ) ; </a> 
<a> client . <RARE_TOKEN> ( request ) ; </a> 
<a> handler . <RARE_TOKEN> ( request , null ) ; </a> 
<a> assertNull ( client . result ) ; </a> 
<a> assertTrue ( client . <RARE_TOKEN> ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> . size ( ) , request . getPermissions ( ) . size ( ) ) ; </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> Bundle bundle = new Bundle ( ) ; </a> 
<a> bundle . <RARE_TOKEN> ( NativeProtocol . <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> bundle . <RARE_TOKEN> ( NativeProtocol . <RARE_TOKEN> , new Date ( ) . getTime ( ) / 1000 + <RARE_TOKEN> ) ; </a> 
<a> bundle . putString ( NativeProtocol . <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> Intent intent = new Intent ( ) ; </a> 
<a> intent . <RARE_TOKEN> ( bundle ) ; </a> 
<a> <RARE_TOKEN> client = new <RARE_TOKEN> ( ) ; </a> 
<a> AuthorizationClient . <RARE_TOKEN> handler = client . new <RARE_TOKEN> ( ) ; </a> 
<a> AuthorizationClient . AuthorizationRequest request = <RARE_TOKEN> ( ) ; </a> 
<a> client . <RARE_TOKEN> ( request ) ; </a> 
<a> handler . onActivityResult ( 0 , Activity . <RARE_TOKEN> , intent ) ; </a> 
<a> assertNotNull ( client . result ) ; </a> 
<a> assertEquals ( AuthorizationClient . Result . <RARE_TOKEN> . <RARE_TOKEN> , client . result . code ) ; </a> 
<a> AccessToken token = client . result . token ; </a> 
<a> assertNotNull ( token ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , token . getToken ( ) ) ; </a> 
<a> <RARE_TOKEN> ( new Date ( ) , token . <RARE_TOKEN> ( ) , <RARE_TOKEN> * 1000 , 1000 ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , token . getPermissions ( ) ) ; </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> Bundle bundle = new Bundle ( ) ; </a> 
<a> bundle . putString ( NativeProtocol . <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> Intent intent = new Intent ( ) ; </a> 
<a> intent . <RARE_TOKEN> ( bundle ) ; </a> 
<a> <RARE_TOKEN> client = new <RARE_TOKEN> ( ) ; </a> 
<a> AuthorizationClient . <RARE_TOKEN> handler = client . new <RARE_TOKEN> ( ) ; </a> 
<a> AuthorizationClient . AuthorizationRequest request = <RARE_TOKEN> ( ) ; </a> 
<a> client . <RARE_TOKEN> ( request ) ; </a> 
<a> handler . onActivityResult ( 0 , Activity . <RARE_TOKEN> , intent ) ; </a> 
<a> assertNotNull ( client . result ) ; </a> 
<a> assertEquals ( AuthorizationClient . Result . <RARE_TOKEN> . <RARE_TOKEN> , client . result . code ) ; </a> 
<a> AccessToken token = client . result . token ; </a> 
<a> assertNull ( token ) ; </a> 
<a> assertNotNull ( client . result . errorMessage ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , client . result . errorMessage ) ; </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> Bundle bundle = new Bundle ( ) ; </a> 
<a> bundle . putString ( NativeProtocol . <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> Intent intent = new Intent ( ) ; </a> 
<a> intent . <RARE_TOKEN> ( bundle ) ; </a> 
<a> <RARE_TOKEN> client = new <RARE_TOKEN> ( ) ; </a> 
<a> AuthorizationClient . <RARE_TOKEN> handler = client . new <RARE_TOKEN> ( ) ; </a> 
<a> AuthorizationClient . AuthorizationRequest request = <RARE_TOKEN> ( ) ; </a> 
<a> client . <RARE_TOKEN> ( request ) ; </a> 
<a> handler . onActivityResult ( 0 , Activity . <RARE_TOKEN> , intent ) ; </a> 
<a> assertNotNull ( client . result ) ; </a> 
<a> assertEquals ( AuthorizationClient . Result . <RARE_TOKEN> . <RARE_TOKEN> , client . result . code ) ; </a> 
<a> AccessToken token = client . result . token ; </a> 
<a> assertNull ( token ) ; </a> 
<a> assertNotNull ( client . result . errorMessage ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , client . result . errorMessage ) ; </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> Bundle bundle = new Bundle ( ) ; </a> 
<a> bundle . <RARE_TOKEN> ( NativeProtocol . <RARE_TOKEN> , NativeProtocol . <RARE_TOKEN> ) ; </a> 
<a> bundle . putString ( NativeProtocol . <RARE_TOKEN> , NativeProtocol . <RARE_TOKEN> ) ; </a> 
<a> Intent intent = new Intent ( ) ; </a> 
<a> intent . <RARE_TOKEN> ( bundle ) ; </a> 
<a> <RARE_TOKEN> client = new <RARE_TOKEN> ( ) ; </a> 
<a> AuthorizationClient . <RARE_TOKEN> handler = client . new <RARE_TOKEN> ( ) ; </a> 
<a> AuthorizationClient . AuthorizationRequest request = <RARE_TOKEN> ( ) ; </a> 
<a> client . <RARE_TOKEN> ( request ) ; </a> 
<a> handler . onActivityResult ( 0 , Activity . <RARE_TOKEN> , intent ) ; </a> 
<a> assertNull ( client . result ) ; </a> 
<a> assertTrue ( client . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> Bundle bundle = new Bundle ( ) ; </a> 
<a> bundle . <RARE_TOKEN> ( AccessToken . <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> bundle . putString ( AccessToken . <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> Intent intent = new Intent ( ) ; </a> 
<a> intent . <RARE_TOKEN> ( bundle ) ; </a> 
<a> <RARE_TOKEN> client = new <RARE_TOKEN> ( ) ; </a> 
<a> AuthorizationClient . <RARE_TOKEN> handler = client . new <RARE_TOKEN> ( ) ; </a> 
<a> AuthorizationClient . AuthorizationRequest request = <RARE_TOKEN> ( ) ; </a> 
<a> client . <RARE_TOKEN> ( request ) ; </a> 
<a> handler . onActivityResult ( 0 , Activity . <RARE_TOKEN> , intent ) ; </a> 
<a> assertNotNull ( client . result ) ; </a> 
<a> assertEquals ( AuthorizationClient . Result . <RARE_TOKEN> . <RARE_TOKEN> , client . result . code ) ; </a> 
<a> AccessToken token = client . result . token ; </a> 
<a> assertNotNull ( token ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , token . getToken ( ) ) ; </a> 
<a> <RARE_TOKEN> ( new Date ( ) , token . <RARE_TOKEN> ( ) , <RARE_TOKEN> * 1000 , 1000 ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , token . getPermissions ( ) ) ; </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> Bundle bundle = new Bundle ( ) ; </a> 
<a> bundle . putString ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> Intent intent = new Intent ( ) ; </a> 
<a> intent . <RARE_TOKEN> ( bundle ) ; </a> 
<a> <RARE_TOKEN> client = new <RARE_TOKEN> ( ) ; </a> 
<a> AuthorizationClient . <RARE_TOKEN> handler = client . new <RARE_TOKEN> ( ) ; </a> 
<a> AuthorizationClient . AuthorizationRequest request = <RARE_TOKEN> ( ) ; </a> 
<a> client . <RARE_TOKEN> ( request ) ; </a> 
<a> handler . onActivityResult ( 0 , Activity . <RARE_TOKEN> , intent ) ; </a> 
<a> assertNotNull ( client . result ) ; </a> 
<a> assertEquals ( AuthorizationClient . Result . <RARE_TOKEN> . <RARE_TOKEN> , client . result . code ) ; </a> 
<a> assertNull ( client . result . token ) ; </a> 
<a> assertNotNull ( client . result . errorMessage ) ; </a> 
<a> assertTrue ( client . result . errorMessage . contains ( <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> Bundle bundle = new Bundle ( ) ; </a> 
<a> bundle . putString ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> Intent intent = new Intent ( ) ; </a> 
<a> intent . <RARE_TOKEN> ( bundle ) ; </a> 
<a> <RARE_TOKEN> client = new <RARE_TOKEN> ( ) ; </a> 
<a> AuthorizationClient . <RARE_TOKEN> handler = client . new <RARE_TOKEN> ( ) ; </a> 
<a> AuthorizationClient . AuthorizationRequest request = <RARE_TOKEN> ( ) ; </a> 
<a> client . <RARE_TOKEN> ( request ) ; </a> 
<a> handler . onActivityResult ( 0 , Activity . <RARE_TOKEN> , intent ) ; </a> 
<a> assertNotNull ( client . result ) ; </a> 
<a> assertEquals ( AuthorizationClient . Result . <RARE_TOKEN> . <RARE_TOKEN> , client . result . code ) ; </a> 
<a> assertNull ( client . result . token ) ; </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> Bundle bundle = new Bundle ( ) ; </a> 
<a> bundle . putString ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> Intent intent = new Intent ( ) ; </a> 
<a> intent . <RARE_TOKEN> ( bundle ) ; </a> 
<a> <RARE_TOKEN> client = new <RARE_TOKEN> ( ) ; </a> 
<a> AuthorizationClient . <RARE_TOKEN> handler = client . new <RARE_TOKEN> ( ) ; </a> 
<a> AuthorizationClient . AuthorizationRequest request = <RARE_TOKEN> ( ) ; </a> 
<a> client . <RARE_TOKEN> ( request ) ; </a> 
<a> handler . onActivityResult ( 0 , Activity . <RARE_TOKEN> , intent ) ; </a> 
<a> assertNull ( client . result ) ; </a> 
<a> assertTrue ( client . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> private final HashMap < String , String > <RARE_TOKEN> = new HashMap < String , String > ( ) ; </a> 
<a> private List < String > <RARE_TOKEN> = Arrays . asList ( ) ; </a> 
<a> private TestBlocker blocker ; </a> 
<a> public <RARE_TOKEN> ( TestBlocker blocker ) { </a> 
<a> this . blocker = blocker ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( String accessToken , String <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> . put ( accessToken , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( AccessToken accessToken , String <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> . put ( accessToken . getToken ( ) , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( List < String > <RARE_TOKEN> ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> void <RARE_TOKEN> ( Result result ) { </a> 
<a> super . <RARE_TOKEN> ( result ) ; </a> 
<a> blocker . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> Request <RARE_TOKEN> ( final String accessToken ) { </a> 
<a> return new <RARE_TOKEN> ( ) { </a> 
<a> @ Override </a> 
<a> public Response <RARE_TOKEN> ( ) { </a> 
<a> String <RARE_TOKEN> = <RARE_TOKEN> . get ( accessToken ) ; </a> 
<a> GraphUser user = GraphObject . Factory . create ( GraphUser . class ) ; </a> 
<a> user . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> return new Response ( this , null , user , false ) ; </a> 
<a> } </a> 
<a> } ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> Request <RARE_TOKEN> ( String accessToken ) { </a> 
<a> final List < String > permissions = <RARE_TOKEN> ; </a> 
<a> return new <RARE_TOKEN> ( ) { </a> 
<a> @ Override </a> 
<a> public Response <RARE_TOKEN> ( ) { </a> 
<a> GraphObject <RARE_TOKEN> = GraphObject . Factory . create ( ) ; </a> 
<a> if ( permissions != null ) { </a> 
<a> for ( String <RARE_TOKEN> : permissions ) { </a> 
<a> <RARE_TOKEN> . setProperty ( <RARE_TOKEN> , 1 ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> GraphObjectList < GraphObject > data = GraphObject . Factory . <RARE_TOKEN> ( GraphObject . class ) ; </a> 
<a> data . add ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> result = GraphObject . Factory . create ( <RARE_TOKEN> . class ) ; </a> 
<a> result . setProperty ( <RARE_TOKEN> , data ) ; </a> 
<a> return new Response ( this , null , result , false ) ; </a> 
<a> } </a> 
<a> } ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> RequestBatch <RARE_TOKEN> ( final Result <RARE_TOKEN> ) { </a> 
<a> RequestBatch batch = super . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> batch . <RARE_TOKEN> ( blocker . <RARE_TOKEN> ( ) ) ; </a> 
<a> return new <RARE_TOKEN> ( batch ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> static final String <RARE_TOKEN> = <RARE_TOKEN> <RARE_TOKEN> token for user <RARE_TOKEN> ; </a> 
<a> static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> static final String <RARE_TOKEN> = <RARE_TOKEN> <RARE_TOKEN> token for user <RARE_TOKEN> ; </a> 
<a> AuthorizationClient . AuthorizationRequest <RARE_TOKEN> ( String accessToken ) { </a> 
<a> Session . <RARE_TOKEN> request = new Session . <RARE_TOKEN> ( getActivity ( ) , <RARE_TOKEN> ) ; </a> 
<a> request . <RARE_TOKEN> ( accessToken ) ; </a> 
<a> return request . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) throws Exception { </a> 
<a> TestBlocker blocker = <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> client = new <RARE_TOKEN> ( blocker ) ; </a> 
<a> client . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> client . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> client . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> AuthorizationClient . AuthorizationRequest request = <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> client . <RARE_TOKEN> ( request ) ; </a> 
<a> AccessToken token = AccessToken . <RARE_TOKEN> ( <RARE_TOKEN> , null , null , null , <RARE_TOKEN> ) ; </a> 
<a> AuthorizationClient . Result result = AuthorizationClient . Result . <RARE_TOKEN> ( token ) ; </a> 
<a> client . <RARE_TOKEN> ( result ) ; </a> 
<a> blocker . <RARE_TOKEN> ( 1 ) ; </a> 
<a> assertNotNull ( client . result ) ; </a> 
<a> assertEquals ( AuthorizationClient . Result . <RARE_TOKEN> . <RARE_TOKEN> , client . result . code ) ; </a> 
<a> AccessToken <RARE_TOKEN> = client . result . token ; </a> 
<a> assertNotNull ( <RARE_TOKEN> ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , <RARE_TOKEN> . getToken ( ) ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , <RARE_TOKEN> . getPermissions ( ) ) ; </a> 
<a> } </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) throws Exception { </a> 
<a> TestBlocker blocker = <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> client = new <RARE_TOKEN> ( blocker ) ; </a> 
<a> client . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> client . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> client . <RARE_TOKEN> ( Arrays . asList ( <RARE_TOKEN> <RARE_TOKEN> ) ) ; </a> 
<a> AuthorizationClient . AuthorizationRequest request = <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> client . <RARE_TOKEN> ( request ) ; </a> 
<a> AccessToken token = AccessToken . <RARE_TOKEN> ( <RARE_TOKEN> , null , null , null , <RARE_TOKEN> ) ; </a> 
<a> AuthorizationClient . Result result = AuthorizationClient . Result . <RARE_TOKEN> ( token ) ; </a> 
<a> client . <RARE_TOKEN> ( result ) ; </a> 
<a> blocker . <RARE_TOKEN> ( 1 ) ; </a> 
<a> assertNotNull ( client . result ) ; </a> 
<a> assertEquals ( AuthorizationClient . Result . <RARE_TOKEN> . <RARE_TOKEN> , client . result . code ) ; </a> 
<a> AccessToken <RARE_TOKEN> = client . result . token ; </a> 
<a> assertNotNull ( <RARE_TOKEN> ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , <RARE_TOKEN> . getToken ( ) ) ; </a> 
<a> assertEquals ( Arrays . asList ( <RARE_TOKEN> <RARE_TOKEN> ) , <RARE_TOKEN> . getPermissions ( ) ) ; </a> 
<a> } </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) throws Exception { </a> 
<a> TestBlocker blocker = <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> client = new <RARE_TOKEN> ( blocker ) ; </a> 
<a> client . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> client . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> client . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> AuthorizationClient . AuthorizationRequest request = <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> client . <RARE_TOKEN> ( request ) ; </a> 
<a> AccessToken token = AccessToken . <RARE_TOKEN> ( <RARE_TOKEN> , null , null , null , <RARE_TOKEN> ) ; </a> 
<a> AuthorizationClient . Result result = AuthorizationClient . Result . <RARE_TOKEN> ( token ) ; </a> 
<a> client . <RARE_TOKEN> ( result ) ; </a> 
<a> blocker . <RARE_TOKEN> ( 1 ) ; </a> 
<a> assertNotNull ( client . result ) ; </a> 
<a> assertEquals ( AuthorizationClient . Result . <RARE_TOKEN> . <RARE_TOKEN> , client . result . code ) ; </a> 
<a> assertNull ( client . result . token ) ; </a> 
<a> assertNotNull ( client . result . errorMessage ) ; </a> 
<a> } </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) throws Exception { </a> 
<a> TestBlocker blocker = <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> client = new <RARE_TOKEN> ( blocker ) ; </a> 
<a> AuthorizationClient . AuthorizationRequest request = <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> request . <RARE_TOKEN> ( true ) ; </a> 
<a> client . <RARE_TOKEN> ( request ) ; </a> 
<a> AccessToken token = AccessToken . <RARE_TOKEN> ( <RARE_TOKEN> , null , null , null , <RARE_TOKEN> ) ; </a> 
<a> AuthorizationClient . Result result = AuthorizationClient . Result . <RARE_TOKEN> ( token ) ; </a> 
<a> client . <RARE_TOKEN> ( result ) ; </a> 
<a> AccessToken <RARE_TOKEN> = client . result . token ; </a> 
<a> assertNotNull ( <RARE_TOKEN> ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , <RARE_TOKEN> . getToken ( ) ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , <RARE_TOKEN> . getPermissions ( ) ) ; </a> 
<a> } </a> 
<a> static class <RARE_TOKEN> extends AuthorizationClient { </a> 
<a> @ Override </a> 
<a> boolean <RARE_TOKEN> ( ) { </a> 
<a> return true ; </a> 
<a> } </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( ) throws IOException , <RARE_TOKEN> { </a> 
<a> AuthorizationClient client = new <RARE_TOKEN> ( ) ; </a> 
<a> client . <RARE_TOKEN> ( getActivity ( ) ) ; </a> 
<a> client . <RARE_TOKEN> ( new AuthorizationClient . <RARE_TOKEN> ( ) { </a> 
<a> @ Override </a> 
<a> public void onCompleted ( AuthorizationClient . Result result ) { </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> client . <RARE_TOKEN> ( new AuthorizationClient . <RARE_TOKEN> ( ) { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> client . <RARE_TOKEN> ( <RARE_TOKEN> ( ) ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( client ) ; </a> 
<a> <RARE_TOKEN> . close ( ) ; </a> 
<a> byte [ ] <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> Object obj = <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> assertNotNull ( obj ) ; </a> 
<a> assertTrue ( obj instanceof AuthorizationClient ) ; </a> 
<a> AuthorizationClient <RARE_TOKEN> = ( AuthorizationClient ) obj ; </a> 
<a> assertNull ( <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> assertNull ( <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> assertNull ( <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> assertNull ( <RARE_TOKEN> . context ) ; </a> 
<a> assertNotNull ( <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> assertTrue ( <RARE_TOKEN> . <RARE_TOKEN> instanceof AuthorizationClient . <RARE_TOKEN> ) ; </a> 
<a> assertNotNull ( <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> assertTrue ( <RARE_TOKEN> . <RARE_TOKEN> . size ( ) > 0 ) ; </a> 
<a> assertNotNull ( <RARE_TOKEN> . pendingRequest ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , <RARE_TOKEN> . pendingRequest . getPermissions ( ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package com . facebook ; </a> 
<a> import android . <RARE_TOKEN> . Bitmap ; </a> 
<a> import android . test . suitebuilder . annotation . LargeTest ; </a> 
<a> import android . test . suitebuilder . annotation . MediumTest ; </a> 
<a> import android . test . suitebuilder . annotation . SmallTest ; </a> 
<a> import com . facebook . model . GraphObject ; </a> 
<a> import com . facebook . model . GraphPlace ; </a> 
<a> import com . facebook . model . GraphUser ; </a> 
<a> import com . facebook . internal . <RARE_TOKEN> ; </a> 
<a> import java . io . IOException ; </a> 
<a> import java . util . ArrayList ; </a> 
<a> import java . util . List ; </a> 
<a> import java . util . concurrent . atomic . AtomicInteger ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> protected void <RARE_TOKEN> ( ) throws Exception { </a> 
<a> super . <RARE_TOKEN> ( ) ; </a> 
<a> Request . <RARE_TOKEN> ( null ) ; </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> batch = new <RARE_TOKEN> ( ) ; </a> 
<a> Request <RARE_TOKEN> = Request . <RARE_TOKEN> ( null , null ) ; </a> 
<a> assertEquals ( 0 , batch . size ( ) ) ; </a> 
<a> batch . add ( <RARE_TOKEN> ) ; </a> 
<a> assertEquals ( 1 , batch . size ( ) ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , batch . get ( 0 ) ) ; </a> 
<a> String key = <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> assertNull ( batch . <RARE_TOKEN> ( ) ) ; </a> 
<a> batch . <RARE_TOKEN> ( key ) ; </a> 
<a> assertEquals ( key , batch . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertTrue ( ! batch . <RARE_TOKEN> ( ) ) ; </a> 
<a> batch . <RARE_TOKEN> ( true ) ; </a> 
<a> assertTrue ( batch . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> Request <RARE_TOKEN> = Request . <RARE_TOKEN> ( null , null ) ; </a> 
<a> RequestBatch batch = new RequestBatch ( new Request [ ] { <RARE_TOKEN> , <RARE_TOKEN> } ) ; </a> 
<a> assertEquals ( 2 , batch . size ( ) ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , batch . get ( 0 ) ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , batch . get ( 1 ) ) ; </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> Request <RARE_TOKEN> = new Request ( null , <RARE_TOKEN> , null , null , new <RARE_TOKEN> ( ) ) ; </a> 
<a> Request <RARE_TOKEN> = new Request ( null , <RARE_TOKEN> , null , null , new <RARE_TOKEN> ( ) ) ; </a> 
<a> Request . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) throws IOException { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> Request <RARE_TOKEN> = new Request ( null , <RARE_TOKEN> ) ; </a> 
<a> Request <RARE_TOKEN> = new Request ( null , <RARE_TOKEN> ) ; </a> 
<a> List < Response > responses = Request . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> assertEquals ( 2 , responses . size ( ) ) ; </a> 
<a> assertTrue ( responses . get ( 0 ) . getError ( ) == null ) ; </a> 
<a> assertTrue ( responses . get ( 1 ) . getError ( ) == null ) ; </a> 
<a> GraphPlace <RARE_TOKEN> = responses . get ( 0 ) . <RARE_TOKEN> ( GraphPlace . class ) ; </a> 
<a> GraphPlace <RARE_TOKEN> = responses . get ( 1 ) . <RARE_TOKEN> ( GraphPlace . class ) ; </a> 
<a> assertTrue ( <RARE_TOKEN> != null ) ; </a> 
<a> assertTrue ( <RARE_TOKEN> != null ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> Request <RARE_TOKEN> = new Request ( null , <RARE_TOKEN> ) ; </a> 
<a> Request <RARE_TOKEN> = new Request ( null , <RARE_TOKEN> ) ; </a> 
<a> List < Response > responses = Request . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> assertEquals ( 2 , responses . size ( ) ) ; </a> 
<a> assertTrue ( responses . get ( 0 ) . getError ( ) != null ) ; </a> 
<a> assertTrue ( responses . get ( 1 ) . getError ( ) != null ) ; </a> 
<a> FacebookRequestError error = responses . get ( 0 ) . getError ( ) ; </a> 
<a> assertTrue ( error . <RARE_TOKEN> ( ) instanceof <RARE_TOKEN> ) ; </a> 
<a> assertTrue ( error . <RARE_TOKEN> ( ) != null ) ; </a> 
<a> assertTrue ( error . <RARE_TOKEN> ( ) != FacebookRequestError . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> TestSession session = openTestSessionWithSharedUser ( ) ; </a> 
<a> GraphObject <RARE_TOKEN> = <RARE_TOKEN> ( ) ; </a> 
<a> GraphObject <RARE_TOKEN> = <RARE_TOKEN> ( ) ; </a> 
<a> Request <RARE_TOKEN> = Request . <RARE_TOKEN> ( session , <RARE_TOKEN> , <RARE_TOKEN> , null ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> Request <RARE_TOKEN> = Request . <RARE_TOKEN> ( session , <RARE_TOKEN> , <RARE_TOKEN> , null ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> Request <RARE_TOKEN> = new Request ( session , <RARE_TOKEN> ) ; </a> 
<a> Request <RARE_TOKEN> = new Request ( session , <RARE_TOKEN> ) ; </a> 
<a> List < Response > responses = Request . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> assertNotNull ( responses ) ; </a> 
<a> assertEquals ( 4 , responses . size ( ) ) ; </a> 
<a> <RARE_TOKEN> ( responses ) ; </a> 
<a> GraphObject <RARE_TOKEN> = responses . get ( 2 ) . <RARE_TOKEN> ( ) ; </a> 
<a> GraphObject <RARE_TOKEN> = responses . get ( 3 ) . <RARE_TOKEN> ( ) ; </a> 
<a> assertNotNull ( <RARE_TOKEN> ) ; </a> 
<a> assertNotNull ( <RARE_TOKEN> ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> . getProperty ( "message" ) , <RARE_TOKEN> . getProperty ( "message" ) ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> . getProperty ( "message" ) , <RARE_TOKEN> . getProperty ( "message" ) ) ; </a> 
<a> } </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> TestSession <RARE_TOKEN> = openTestSessionWithSharedUser ( ) ; </a> 
<a> TestSession <RARE_TOKEN> = openTestSessionWithSharedUser ( <RARE_TOKEN> ) ; </a> 
<a> Request <RARE_TOKEN> = Request . <RARE_TOKEN> ( <RARE_TOKEN> , null ) ; </a> 
<a> Request <RARE_TOKEN> = Request . <RARE_TOKEN> ( <RARE_TOKEN> , null ) ; </a> 
<a> List < Response > responses = Request . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> assertNotNull ( responses ) ; </a> 
<a> assertEquals ( 2 , responses . size ( ) ) ; </a> 
<a> GraphUser <RARE_TOKEN> = responses . get ( 0 ) . <RARE_TOKEN> ( GraphUser . class ) ; </a> 
<a> GraphUser <RARE_TOKEN> = responses . get ( 1 ) . <RARE_TOKEN> ( GraphUser . class ) ; </a> 
<a> assertNotNull ( <RARE_TOKEN> ) ; </a> 
<a> assertNotNull ( <RARE_TOKEN> ) ; </a> 
<a> assertFalse ( <RARE_TOKEN> . getId ( ) . equals ( <RARE_TOKEN> . getId ( ) ) ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> . <RARE_TOKEN> ( ) , <RARE_TOKEN> . getId ( ) ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> . <RARE_TOKEN> ( ) , <RARE_TOKEN> . getId ( ) ) ; </a> 
<a> } </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> TestSession session = openTestSessionWithSharedUser ( ) ; </a> 
<a> Request <RARE_TOKEN> = new Request ( session , <RARE_TOKEN> ) ; </a> 
<a> Request <RARE_TOKEN> = new Request ( null , <RARE_TOKEN> ) ; </a> 
<a> List < Response > responses = Request . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> assertNotNull ( responses ) ; </a> 
<a> assertEquals ( 2 , responses . size ( ) ) ; </a> 
<a> GraphUser <RARE_TOKEN> = responses . get ( 0 ) . <RARE_TOKEN> ( GraphUser . class ) ; </a> 
<a> GraphUser <RARE_TOKEN> = responses . get ( 1 ) . <RARE_TOKEN> ( GraphUser . class ) ; </a> 
<a> assertNotNull ( <RARE_TOKEN> ) ; </a> 
<a> assertNotNull ( <RARE_TOKEN> ) ; </a> 
<a> assertFalse ( <RARE_TOKEN> . getId ( ) . equals ( <RARE_TOKEN> . getId ( ) ) ) ; </a> 
<a> assertEquals ( session . <RARE_TOKEN> ( ) , <RARE_TOKEN> . getId ( ) ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , <RARE_TOKEN> . getId ( ) ) ; </a> 
<a> } </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> TestSession session = openTestSessionWithSharedUser ( ) ; </a> 
<a> Request <RARE_TOKEN> = new Request ( null , <RARE_TOKEN> ) ; </a> 
<a> Request <RARE_TOKEN> = new Request ( session , <RARE_TOKEN> ) ; </a> 
<a> List < Response > responses = Request . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> assertNotNull ( responses ) ; </a> 
<a> assertEquals ( 2 , responses . size ( ) ) ; </a> 
<a> GraphUser <RARE_TOKEN> = responses . get ( 0 ) . <RARE_TOKEN> ( GraphUser . class ) ; </a> 
<a> GraphUser <RARE_TOKEN> = responses . get ( 1 ) . <RARE_TOKEN> ( GraphUser . class ) ; </a> 
<a> assertNotNull ( <RARE_TOKEN> ) ; </a> 
<a> assertNotNull ( <RARE_TOKEN> ) ; </a> 
<a> assertFalse ( <RARE_TOKEN> . getId ( ) . equals ( <RARE_TOKEN> . getId ( ) ) ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , <RARE_TOKEN> . getId ( ) ) ; </a> 
<a> assertEquals ( session . <RARE_TOKEN> ( ) , <RARE_TOKEN> . getId ( ) ) ; </a> 
<a> } </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> TestSession session = <RARE_TOKEN> ( null ) ; </a> 
<a> String <RARE_TOKEN> = session . <RARE_TOKEN> ( ) ; </a> 
<a> Request . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> Request <RARE_TOKEN> = new Request ( null , <RARE_TOKEN> ) ; </a> 
<a> Request <RARE_TOKEN> = new Request ( null , <RARE_TOKEN> ) ; </a> 
<a> List < Response > responses = Request . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> assertNotNull ( responses ) ; </a> 
<a> assertEquals ( 2 , responses . size ( ) ) ; </a> 
<a> GraphUser <RARE_TOKEN> = responses . get ( 0 ) . <RARE_TOKEN> ( GraphUser . class ) ; </a> 
<a> GraphUser <RARE_TOKEN> = responses . get ( 1 ) . <RARE_TOKEN> ( GraphUser . class ) ; </a> 
<a> assertNotNull ( <RARE_TOKEN> ) ; </a> 
<a> assertNotNull ( <RARE_TOKEN> ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , <RARE_TOKEN> . getId ( ) ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , <RARE_TOKEN> . getId ( ) ) ; </a> 
<a> } </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> TestSession session = openTestSessionWithSharedUser ( ) ; </a> 
<a> final int <RARE_TOKEN> = 8 ; </a> 
<a> Request [ ] requests = new Request [ <RARE_TOKEN> ] ; </a> 
<a> for ( int i = 0 ; i < <RARE_TOKEN> ; ++ i ) { </a> 
<a> boolean <RARE_TOKEN> = ( i <RARE_TOKEN> 2 ) == 1 ; </a> 
<a> requests [ i ] = new Request ( session , <RARE_TOKEN> ? <RARE_TOKEN> : <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> List < Response > responses = Request . <RARE_TOKEN> ( requests ) ; </a> 
<a> assertNotNull ( responses ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , responses . size ( ) ) ; </a> 
<a> for ( int i = 0 ; i < <RARE_TOKEN> ; ++ i ) { </a> 
<a> boolean <RARE_TOKEN> = ( i <RARE_TOKEN> 2 ) == 1 ; </a> 
<a> Response response = responses . get ( i ) ; </a> 
<a> assertNotNull ( response ) ; </a> 
<a> if ( <RARE_TOKEN> ) { </a> 
<a> assertNull ( response . getError ( ) ) ; </a> 
<a> assertNotNull ( response . <RARE_TOKEN> ( ) ) ; </a> 
<a> } else { </a> 
<a> assertNotNull ( response . getError ( ) ) ; </a> 
<a> assertNull ( response . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> TestSession session = openTestSessionWithSharedUser ( ) ; </a> 
<a> session . close ( ) ; </a> 
<a> Request <RARE_TOKEN> = new Request ( session , <RARE_TOKEN> , null , null , new <RARE_TOKEN> ( ) ) ; </a> 
<a> Request <RARE_TOKEN> = new Request ( session , <RARE_TOKEN> , null , null , new <RARE_TOKEN> ( ) ) ; </a> 
<a> TestRequestAsyncTask task = new TestRequestAsyncTask ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> task . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> ( 2 ) ; </a> 
<a> } </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> TestSession session = <RARE_TOKEN> ( null , <RARE_TOKEN> ) ; </a> 
<a> final int <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> final int <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> Bitmap <RARE_TOKEN> = <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> Bitmap <RARE_TOKEN> = <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> Request <RARE_TOKEN> = Request . <RARE_TOKEN> ( session , <RARE_TOKEN> , null ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> Request <RARE_TOKEN> = Request . <RARE_TOKEN> ( session , <RARE_TOKEN> , null ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> Request <RARE_TOKEN> = new Request ( session , <RARE_TOKEN> ) ; </a> 
<a> Request <RARE_TOKEN> = new Request ( session , <RARE_TOKEN> ) ; </a> 
<a> List < Response > responses = Request . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> assertNotNull ( responses ) ; </a> 
<a> assertEquals ( 4 , responses . size ( ) ) ; </a> 
<a> <RARE_TOKEN> ( responses ) ; </a> 
<a> GraphObject <RARE_TOKEN> = responses . get ( 2 ) . <RARE_TOKEN> ( ) ; </a> 
<a> GraphObject <RARE_TOKEN> = responses . get ( 3 ) . <RARE_TOKEN> ( ) ; </a> 
<a> assertNotNull ( <RARE_TOKEN> ) ; </a> 
<a> assertNotNull ( <RARE_TOKEN> ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , <RARE_TOKEN> . getProperty ( <RARE_TOKEN> ) ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , <RARE_TOKEN> . getProperty ( <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> ArrayList < Request > requests = new ArrayList < Request > ( ) ; </a> 
<a> final ArrayList < Boolean > <RARE_TOKEN> = new ArrayList < Boolean > ( ) ; </a> 
<a> final int <RARE_TOKEN> = 4 ; </a> 
<a> for ( int i = 0 ; i < <RARE_TOKEN> ; ++ i ) { </a> 
<a> Request request = new Request ( null , <RARE_TOKEN> ) ; </a> 
<a> request . setCallback ( new Request . Callback ( ) { </a> 
<a> @ Override </a> 
<a> public void onCompleted ( Response response ) { </a> 
<a> <RARE_TOKEN> . add ( true ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> requests . add ( request ) ; </a> 
<a> } </a> 
<a> List < Response > responses = Request . <RARE_TOKEN> ( requests ) ; </a> 
<a> assertNotNull ( responses ) ; </a> 
<a> assertTrue ( <RARE_TOKEN> . size ( ) == <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) throws IOException { </a> 
<a> Response . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> TestSession session = openTestSessionWithSharedUser ( ) ; </a> 
<a> Request request = Request . <RARE_TOKEN> ( session , null ) ; </a> 
<a> <RARE_TOKEN> batch = new <RARE_TOKEN> ( request ) ; </a> 
<a> batch . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> List < Response > responses = Request . <RARE_TOKEN> ( batch ) ; </a> 
<a> assertNotNull ( responses ) ; </a> 
<a> assertEquals ( 1 , responses . size ( ) ) ; </a> 
<a> Response response = responses . get ( 0 ) ; </a> 
<a> assertNotNull ( response ) ; </a> 
<a> assertNull ( response . getError ( ) ) ; </a> 
<a> assertTrue ( ! response . <RARE_TOKEN> ( ) ) ; </a> 
<a> responses = Request . <RARE_TOKEN> ( batch ) ; </a> 
<a> assertNotNull ( responses ) ; </a> 
<a> assertEquals ( 1 , responses . size ( ) ) ; </a> 
<a> response = responses . get ( 0 ) ; </a> 
<a> assertNotNull ( response ) ; </a> 
<a> assertNull ( response . getError ( ) ) ; </a> 
<a> assertTrue ( response . <RARE_TOKEN> ( ) ) ; </a> 
<a> batch . <RARE_TOKEN> ( true ) ; </a> 
<a> responses = Request . <RARE_TOKEN> ( batch ) ; </a> 
<a> assertNotNull ( responses ) ; </a> 
<a> assertEquals ( 1 , responses . size ( ) ) ; </a> 
<a> response = responses . get ( 0 ) ; </a> 
<a> assertNotNull ( response ) ; </a> 
<a> assertNull ( response . getError ( ) ) ; </a> 
<a> assertTrue ( ! response . <RARE_TOKEN> ( ) ) ; </a> 
<a> Response . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) throws IOException { </a> 
<a> Response . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> TestSession session = openTestSessionWithSharedUser ( ) ; </a> 
<a> Request <RARE_TOKEN> = Request . <RARE_TOKEN> ( session , null ) ; </a> 
<a> Request <RARE_TOKEN> = Request . <RARE_TOKEN> ( session , null ) ; </a> 
<a> <RARE_TOKEN> batch = new <RARE_TOKEN> ( new Request [ ] { <RARE_TOKEN> , <RARE_TOKEN> } ) ; </a> 
<a> batch . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> List < Response > responses = Request . <RARE_TOKEN> ( batch ) ; </a> 
<a> assertNotNull ( responses ) ; </a> 
<a> assertEquals ( 2 , responses . size ( ) ) ; </a> 
<a> for ( Response response : responses ) { </a> 
<a> assertNotNull ( response ) ; </a> 
<a> assertNull ( response . getError ( ) ) ; </a> 
<a> assertTrue ( ! response . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> responses = Request . <RARE_TOKEN> ( batch ) ; </a> 
<a> assertNotNull ( responses ) ; </a> 
<a> assertEquals ( 2 , responses . size ( ) ) ; </a> 
<a> for ( Response response : responses ) { </a> 
<a> assertNotNull ( response ) ; </a> 
<a> assertNull ( response . getError ( ) ) ; </a> 
<a> assertTrue ( response . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> batch . <RARE_TOKEN> ( true ) ; </a> 
<a> responses = Request . <RARE_TOKEN> ( batch ) ; </a> 
<a> assertNotNull ( responses ) ; </a> 
<a> assertEquals ( 2 , responses . size ( ) ) ; </a> 
<a> for ( Response response : responses ) { </a> 
<a> assertNotNull ( response ) ; </a> 
<a> assertNull ( response . getError ( ) ) ; </a> 
<a> assertTrue ( ! response . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> Response . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> TestSession session = openTestSessionWithSharedUser ( ) ; </a> 
<a> Request <RARE_TOKEN> = Request . <RARE_TOKEN> ( session , null ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> Request <RARE_TOKEN> = Request . <RARE_TOKEN> ( session , null ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> List < Response > responses = Request . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> Response <RARE_TOKEN> = responses . get ( 0 ) ; </a> 
<a> Response <RARE_TOKEN> = responses . get ( 1 ) ; </a> 
<a> assertNull ( <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertNotNull ( <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> TestSession session = openTestSessionWithSharedUser ( ) ; </a> 
<a> Request <RARE_TOKEN> = Request . <RARE_TOKEN> ( session , null ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( false ) ; </a> 
<a> Request <RARE_TOKEN> = Request . <RARE_TOKEN> ( session , null ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> List < Response > responses = Request . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> Response <RARE_TOKEN> = responses . get ( 0 ) ; </a> 
<a> Response <RARE_TOKEN> = responses . get ( 1 ) ; </a> 
<a> assertNotNull ( <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertNotNull ( <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> RequestBatch batch = new RequestBatch ( ) ; </a> 
<a> RequestBatch . Callback <RARE_TOKEN> = new RequestBatch . Callback ( ) { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( RequestBatch batch ) { </a> 
<a> } </a> 
<a> } ; </a> 
<a> RequestBatch . Callback <RARE_TOKEN> = new RequestBatch . Callback ( ) { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( RequestBatch batch ) { </a> 
<a> } </a> 
<a> } ; </a> 
<a> batch . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> batch . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> assertEquals ( 2 , batch . <RARE_TOKEN> ( ) . size ( ) ) ; </a> 
<a> batch . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> batch . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> assertEquals ( 0 , batch . <RARE_TOKEN> ( ) . size ( ) ) ; </a> 
<a> } </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> final AtomicInteger count = new AtomicInteger ( ) ; </a> 
<a> Request <RARE_TOKEN> = Request . <RARE_TOKEN> ( null , <RARE_TOKEN> , new Request . Callback ( ) { </a> 
<a> @ Override </a> 
<a> public void onCompleted ( Response response ) { </a> 
<a> count . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> Request <RARE_TOKEN> = Request . <RARE_TOKEN> ( null , <RARE_TOKEN> , new Request . Callback ( ) { </a> 
<a> @ Override </a> 
<a> public void onCompleted ( Response response ) { </a> 
<a> count . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> RequestBatch batch = new RequestBatch ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> batch . <RARE_TOKEN> ( new RequestBatch . Callback ( ) { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( RequestBatch batch ) { </a> 
<a> count . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> batch . <RARE_TOKEN> ( ) ; </a> 
<a> assertEquals ( 3 , count . get ( ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package com . facebook ; </a> 
<a> import android . app . Activity ; </a> 
<a> import android . content . res . <RARE_TOKEN> ; </a> 
<a> import android . <RARE_TOKEN> . Bitmap ; </a> 
<a> import android . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import android . os . Bundle ; </a> 
<a> import android . os . <RARE_TOKEN> ; </a> 
<a> import android . os . Handler ; </a> 
<a> import android . test . <RARE_TOKEN> ; </a> 
<a> import android . util . Log ; </a> 
<a> import com . facebook . model . GraphObject ; </a> 
<a> import com . facebook . internal . Utility ; </a> 
<a> import junit . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import org . json . JSONException ; </a> 
<a> import org . json . JSONObject ; </a> 
<a> import org . json . <RARE_TOKEN> ; </a> 
<a> import java . io . * ; </a> 
<a> import java . net . HttpURLConnection ; </a> 
<a> import java . util . ArrayList ; </a> 
<a> import java . util . Arrays ; </a> 
<a> import java . util . Date ; </a> 
<a> import java . util . List ; </a> 
<a> import java . util . concurrent . atomic . AtomicBoolean ; </a> 
<a> public class <RARE_TOKEN> < T extends Activity > extends <RARE_TOKEN> < T > { </a> 
<a> private static final String TAG = <RARE_TOKEN> . class . getSimpleName ( ) ; </a> 
<a> private static String applicationId ; </a> 
<a> private static String <RARE_TOKEN> ; </a> 
<a> public final static String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> public final static String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private TestBlocker <RARE_TOKEN> ; </a> 
<a> protected synchronized TestBlocker <RARE_TOKEN> ( ) { </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> <RARE_TOKEN> = TestBlocker . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( Class < T > <RARE_TOKEN> ) { </a> 
<a> super ( "" , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> protected TestSession <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ( null ) ; </a> 
<a> } </a> 
<a> protected TestSession <RARE_TOKEN> ( String <RARE_TOKEN> ) { </a> 
<a> return <RARE_TOKEN> ( <RARE_TOKEN> , new ArrayList < String > ( ) ) ; </a> 
<a> } </a> 
<a> protected TestSession <RARE_TOKEN> ( String <RARE_TOKEN> , </a> 
<a> List < String > permissions ) { </a> 
<a> return TestSession . <RARE_TOKEN> ( getActivity ( ) , permissions , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> protected TestSession <RARE_TOKEN> ( TestBlocker <RARE_TOKEN> ) { </a> 
<a> return TestSession . <RARE_TOKEN> ( getActivity ( ) , null ) ; </a> 
<a> } </a> 
<a> protected TestSession openTestSessionWithSharedUser ( final TestBlocker blocker ) { </a> 
<a> return openTestSessionWithSharedUser ( blocker , null ) ; </a> 
<a> } </a> 
<a> protected TestSession openTestSessionWithSharedUser ( final TestBlocker blocker , String <RARE_TOKEN> ) { </a> 
<a> TestSession session = <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> ( getActivity ( ) , session , blocker ) ; </a> 
<a> return session ; </a> 
<a> } </a> 
<a> protected TestSession openTestSessionWithSharedUser ( ) { </a> 
<a> return openTestSessionWithSharedUser ( ( String ) null ) ; </a> 
<a> } </a> 
<a> protected TestSession openTestSessionWithSharedUser ( String <RARE_TOKEN> ) { </a> 
<a> return <RARE_TOKEN> ( <RARE_TOKEN> , ( String [ ] ) null ) ; </a> 
<a> } </a> 
<a> protected TestSession <RARE_TOKEN> ( String <RARE_TOKEN> , </a> 
<a> String ... permissions ) { </a> 
<a> List < String > <RARE_TOKEN> = ( permissions != null ) ? Arrays . asList ( permissions ) : null ; </a> 
<a> return <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> protected TestSession <RARE_TOKEN> ( String <RARE_TOKEN> , </a> 
<a> List < String > permissions ) { </a> 
<a> final TestBlocker blocker = <RARE_TOKEN> ( ) ; </a> 
<a> TestSession session = <RARE_TOKEN> ( <RARE_TOKEN> , permissions ) ; </a> 
<a> <RARE_TOKEN> ( getActivity ( ) , session , blocker ) ; </a> 
<a> return session ; </a> 
<a> } </a> 
<a> protected void <RARE_TOKEN> ( TestBlocker <RARE_TOKEN> , int <RARE_TOKEN> ) { </a> 
<a> try { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } catch ( <RARE_TOKEN> e ) { </a> 
<a> throw e ; </a> 
<a> } catch ( Exception e ) { </a> 
<a> fail ( <RARE_TOKEN> <RARE_TOKEN> " + e . getMessage ( ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> protected void <RARE_TOKEN> ( int <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ( ) , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> protected void <RARE_TOKEN> ( int <RARE_TOKEN> ) throws Exception { </a> 
<a> <RARE_TOKEN> ( ) . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> protected void <RARE_TOKEN> ( final int <RARE_TOKEN> , final Runnable <RARE_TOKEN> ) throws Throwable { </a> 
<a> final TestBlocker blocker = <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> ( new Runnable ( ) { </a> 
<a> @ Override </a> 
<a> public void run ( ) { </a> 
<a> <RARE_TOKEN> . run ( ) ; </a> 
<a> blocker . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> blocker . <RARE_TOKEN> ( 1 + <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> protected synchronized void <RARE_TOKEN> ( ) { </a> 
<a> synchronized ( <RARE_TOKEN> . class ) { </a> 
<a> if ( applicationId != null && <RARE_TOKEN> != null ) { </a> 
<a> return ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = <RARE_TOKEN> ( ) . getContext ( ) . getResources ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> InputStream stream = null ; </a> 
<a> final String errorMessage = <RARE_TOKEN> not read applicationId <RARE_TOKEN> <RARE_TOKEN> from <RARE_TOKEN> <RARE_TOKEN> " </a> 
<a> + <RARE_TOKEN> <RARE_TOKEN> run <RARE_TOKEN> <RARE_TOKEN> " ; </a> 
<a> try { </a> 
<a> stream = <RARE_TOKEN> . open ( <RARE_TOKEN> ) ; </a> 
<a> String string = Utility . <RARE_TOKEN> ( stream ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( string ) ; </a> 
<a> Object obj = <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> if ( ! ( obj instanceof JSONObject ) ) { </a> 
<a> fail ( errorMessage + <RARE_TOKEN> not <RARE_TOKEN> a <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> JSONObject jsonObject = ( JSONObject ) obj ; </a> 
<a> applicationId = jsonObject . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = jsonObject . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> if ( Utility . <RARE_TOKEN> ( applicationId ) || Utility . <RARE_TOKEN> ( <RARE_TOKEN> ) ) { </a> 
<a> fail ( errorMessage + <RARE_TOKEN> or <RARE_TOKEN> config values <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> TestSession . <RARE_TOKEN> ( applicationId ) ; </a> 
<a> TestSession . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } catch ( IOException e ) { </a> 
<a> fail ( errorMessage + e . toString ( ) ) ; </a> 
<a> } catch ( JSONException e ) { </a> 
<a> fail ( errorMessage + e . toString ( ) ) ; </a> 
<a> } finally { </a> 
<a> if ( stream != null ) { </a> 
<a> try { </a> 
<a> stream . close ( ) ; </a> 
<a> } catch ( IOException e ) { </a> 
<a> fail ( errorMessage + e . toString ( ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> protected void <RARE_TOKEN> ( Activity activity , TestSession session ) { </a> 
<a> final TestBlocker blocker = <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> ( activity , session , blocker ) ; </a> 
<a> } </a> 
<a> protected void <RARE_TOKEN> ( Activity activity , TestSession session , final TestBlocker blocker ) { </a> 
<a> Session . OpenRequest openRequest = new Session . OpenRequest ( activity ) . </a> 
<a> setCallback ( new Session . StatusCallback ( ) { </a> 
<a> boolean <RARE_TOKEN> = false ; </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( Session session , SessionState state , Exception exception ) { </a> 
<a> if ( exception != null ) { </a> 
<a> Log . w ( TAG , </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> an error <RARE_TOKEN> <RARE_TOKEN> " + exception . toString ( ) ) ; </a> 
<a> } </a> 
<a> assertTrue ( exception == null ) ; </a> 
<a> if ( ! <RARE_TOKEN> ) { </a> 
<a> blocker . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> = true ; </a> 
<a> } </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> session . <RARE_TOKEN> ( openRequest ) ; </a> 
<a> <RARE_TOKEN> ( blocker , 1 ) ; </a> 
<a> } </a> 
<a> protected void <RARE_TOKEN> ( ) throws Exception { </a> 
<a> super . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( LoggingBehavior . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( LoggingBehavior . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> protected void <RARE_TOKEN> ( ) throws Exception { </a> 
<a> super . <RARE_TOKEN> ( ) ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> protected Bundle <RARE_TOKEN> ( String token ) { </a> 
<a> Bundle extras = new Bundle ( ) ; </a> 
<a> String <RARE_TOKEN> = String </a> 
<a> . format ( <RARE_TOKEN> , </a> 
<a> TestSession . <RARE_TOKEN> ( ) , token ) ; </a> 
<a> extras . putString ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> extras . putString ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> extras . <RARE_TOKEN> ( <RARE_TOKEN> , Long . <RARE_TOKEN> ( TestSession . <RARE_TOKEN> ( ) ) ) ; </a> 
<a> extras . putString ( <RARE_TOKEN> , token ) ; </a> 
<a> return extras ; </a> 
<a> } </a> 
<a> interface <RARE_TOKEN> extends GraphObject { </a> 
<a> String getId ( ) ; </a> 
<a> } </a> 
<a> protected GraphObject <RARE_TOKEN> ( Session session , String id ) { </a> 
<a> Request request = new Request ( session , id ) ; </a> 
<a> Response response = request . <RARE_TOKEN> ( ) ; </a> 
<a> assertNotNull ( response ) ; </a> 
<a> assertNull ( response . getError ( ) ) ; </a> 
<a> GraphObject result = response . <RARE_TOKEN> ( ) ; </a> 
<a> assertNotNull ( result ) ; </a> 
<a> return result ; </a> 
<a> } </a> 
<a> protected GraphObject <RARE_TOKEN> ( Session session , String path , GraphObject graphObject ) { </a> 
<a> Request request = Request . <RARE_TOKEN> ( session , path , graphObject , null ) ; </a> 
<a> Response response = request . <RARE_TOKEN> ( ) ; </a> 
<a> assertNotNull ( response ) ; </a> 
<a> assertNull ( response . getError ( ) ) ; </a> 
<a> <RARE_TOKEN> result = response . <RARE_TOKEN> ( <RARE_TOKEN> . class ) ; </a> 
<a> assertNotNull ( result ) ; </a> 
<a> assertNotNull ( result . getId ( ) ) ; </a> 
<a> return <RARE_TOKEN> ( session , result . getId ( ) ) ; </a> 
<a> } </a> 
<a> protected void <RARE_TOKEN> ( ) { </a> 
<a> String <RARE_TOKEN> = TestSession . <RARE_TOKEN> ( ) ; </a> 
<a> Request . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> protected < U extends GraphObject > U <RARE_TOKEN> ( Session session , String graphPath , GraphObject graphObject , </a> 
<a> String fields , Class < U > <RARE_TOKEN> ) { </a> 
<a> Request create = Request . <RARE_TOKEN> ( session , graphPath , graphObject , new <RARE_TOKEN> ( ) ) ; </a> 
<a> create . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> Request get = Request . <RARE_TOKEN> ( session , <RARE_TOKEN> , new <RARE_TOKEN> ( ) ) ; </a> 
<a> if ( fields != null ) { </a> 
<a> Bundle parameters = new Bundle ( ) ; </a> 
<a> parameters . putString ( <RARE_TOKEN> , fields ) ; </a> 
<a> get . <RARE_TOKEN> ( parameters ) ; </a> 
<a> } </a> 
<a> return <RARE_TOKEN> ( create , get , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> protected < U extends GraphObject > U <RARE_TOKEN> ( Session session , String graphPath , GraphObject graphObject , </a> 
<a> String fields , Class < U > <RARE_TOKEN> ) { </a> 
<a> Request <RARE_TOKEN> = Request . <RARE_TOKEN> ( session , graphPath , graphObject , new <RARE_TOKEN> ( ) ) ; </a> 
<a> Request get = Request . <RARE_TOKEN> ( session , graphPath , new <RARE_TOKEN> ( ) ) ; </a> 
<a> if ( fields != null ) { </a> 
<a> Bundle parameters = new Bundle ( ) ; </a> 
<a> parameters . putString ( <RARE_TOKEN> , fields ) ; </a> 
<a> get . <RARE_TOKEN> ( parameters ) ; </a> 
<a> } </a> 
<a> return <RARE_TOKEN> ( <RARE_TOKEN> , get , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> protected < U extends GraphObject > U <RARE_TOKEN> ( Request post , Request get , Class < U > <RARE_TOKEN> ) { </a> 
<a> List < Response > responses = Request . <RARE_TOKEN> ( post , get ) ; </a> 
<a> assertEquals ( 2 , responses . size ( ) ) ; </a> 
<a> U <RARE_TOKEN> = responses . get ( 1 ) . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> assertNotNull ( <RARE_TOKEN> ) ; </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> protected GraphObject <RARE_TOKEN> ( ) { </a> 
<a> GraphObject <RARE_TOKEN> = GraphObject . Factory . create ( ) ; </a> 
<a> String message = String . format ( </a> 
<a> <RARE_TOKEN> out <RARE_TOKEN> <RARE_TOKEN> new status <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> for <RARE_TOKEN> <RARE_TOKEN> , new Date ( ) ) ; </a> 
<a> <RARE_TOKEN> . setProperty ( "message" , message ) ; </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> protected Bitmap <RARE_TOKEN> ( int size ) { </a> 
<a> Bitmap <RARE_TOKEN> = Bitmap . <RARE_TOKEN> ( size , size , Bitmap . <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> protected void <RARE_TOKEN> ( TestSession session , String <RARE_TOKEN> ) { </a> 
<a> String graphPath = <RARE_TOKEN> + <RARE_TOKEN> ; </a> 
<a> Request request = Request . <RARE_TOKEN> ( session , graphPath , null , null ) ; </a> 
<a> Response response = request . <RARE_TOKEN> ( ) ; </a> 
<a> FacebookRequestError error = response . getError ( ) ; </a> 
<a> assertTrue ( error == null || error . <RARE_TOKEN> ( ) == <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> protected void <RARE_TOKEN> ( TestSession <RARE_TOKEN> , TestSession <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> protected void <RARE_TOKEN> ( Date expected , Date <RARE_TOKEN> , long <RARE_TOKEN> ) { </a> 
<a> long <RARE_TOKEN> = Math . <RARE_TOKEN> ( expected . getTime ( ) - <RARE_TOKEN> . getTime ( ) ) ; </a> 
<a> assertTrue ( <RARE_TOKEN> < <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> protected void <RARE_TOKEN> ( Date expected , Date <RARE_TOKEN> , long <RARE_TOKEN> , long <RARE_TOKEN> ) { </a> 
<a> long <RARE_TOKEN> = Math . <RARE_TOKEN> ( expected . getTime ( ) - <RARE_TOKEN> . getTime ( ) ) - <RARE_TOKEN> ; </a> 
<a> assertTrue ( <RARE_TOKEN> < <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> protected void <RARE_TOKEN> ( List < Response > responses ) { </a> 
<a> for ( int i = 0 ; i < responses . size ( ) ; ++ i ) { </a> 
<a> Response response = responses . get ( i ) ; </a> 
<a> assertNotNull ( response ) ; </a> 
<a> assertNull ( response . getError ( ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> protected File <RARE_TOKEN> ( String <RARE_TOKEN> ) throws IOException { </a> 
<a> InputStream <RARE_TOKEN> = null ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = null ; </a> 
<a> try { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = <RARE_TOKEN> ( ) . getContext ( ) . getResources ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . open ( <RARE_TOKEN> ) ; </a> 
<a> File <RARE_TOKEN> = getActivity ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> File <RARE_TOKEN> = File . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = new <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> final int <RARE_TOKEN> = <RARE_TOKEN> * 2 ; </a> 
<a> byte [ ] buffer = new byte [ <RARE_TOKEN> ] ; </a> 
<a> int n = 0 ; </a> 
<a> while ( ( n = <RARE_TOKEN> . read ( buffer ) ) != - 1 ) { </a> 
<a> <RARE_TOKEN> . write ( buffer , 0 , n ) ; </a> 
<a> } </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } finally { </a> 
<a> Utility . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> Utility . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> protected void <RARE_TOKEN> ( final Runnable <RARE_TOKEN> , boolean <RARE_TOKEN> ) { </a> 
<a> Runnable <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> final <RARE_TOKEN> <RARE_TOKEN> = <RARE_TOKEN> ? new <RARE_TOKEN> ( ! <RARE_TOKEN> ) : null ; </a> 
<a> if ( <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> = new Runnable ( ) { </a> 
<a> @ Override </a> 
<a> public void run ( ) { </a> 
<a> <RARE_TOKEN> . run ( ) ; </a> 
<a> <RARE_TOKEN> . open ( ) ; </a> 
<a> } </a> 
<a> } ; </a> 
<a> } </a> 
<a> TestBlocker blocker = <RARE_TOKEN> ( ) ; </a> 
<a> Handler handler = blocker . <RARE_TOKEN> ( ) ; </a> 
<a> handler . post ( <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> ) { </a> 
<a> boolean success = <RARE_TOKEN> . block ( <RARE_TOKEN> ) ; </a> 
<a> assertTrue ( success ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> protected void <RARE_TOKEN> ( ) { </a> 
<a> TestBlocker blocker = <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> = null ; </a> 
<a> blocker . <RARE_TOKEN> ( ) ; </a> 
<a> boolean <RARE_TOKEN> = false ; </a> 
<a> while ( ! <RARE_TOKEN> ) { </a> 
<a> try { </a> 
<a> blocker . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> = true ; </a> 
<a> } catch ( InterruptedException e ) { </a> 
<a> } </a> 
<a> } </a> 
<a> try { </a> 
<a> blocker . <RARE_TOKEN> ( ) ; </a> 
<a> } catch ( Exception e ) { </a> 
<a> fail ( e . toString ( ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> protected TestRequestAsyncTask <RARE_TOKEN> ( final Request ... requests ) throws Throwable { </a> 
<a> final ArrayList < TestRequestAsyncTask > result = new ArrayList < TestRequestAsyncTask > ( ) ; </a> 
<a> <RARE_TOKEN> ( new Runnable ( ) { </a> 
<a> @ Override </a> 
<a> public void run ( ) { </a> 
<a> result . add ( new TestRequestAsyncTask ( requests ) ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> return result . isEmpty ( ) ? null : result . get ( 0 ) ; </a> 
<a> } </a> 
<a> protected class TestRequestAsyncTask extends <RARE_TOKEN> { </a> 
<a> private final TestBlocker blocker = <RARE_TOKEN> . this . <RARE_TOKEN> ( ) ; </a> 
<a> public TestRequestAsyncTask ( Request ... requests ) { </a> 
<a> super ( requests ) ; </a> 
<a> } </a> 
<a> public TestRequestAsyncTask ( List < Request > requests ) { </a> 
<a> super ( requests ) ; </a> 
<a> } </a> 
<a> public TestRequestAsyncTask ( RequestBatch requests ) { </a> 
<a> super ( requests ) ; </a> 
<a> } </a> 
<a> public TestRequestAsyncTask ( HttpURLConnection connection , Request ... requests ) { </a> 
<a> super ( connection , requests ) ; </a> 
<a> } </a> 
<a> public TestRequestAsyncTask ( HttpURLConnection connection , List < Request > requests ) { </a> 
<a> super ( connection , requests ) ; </a> 
<a> } </a> 
<a> public TestRequestAsyncTask ( HttpURLConnection connection , RequestBatch requests ) { </a> 
<a> super ( connection , requests ) ; </a> 
<a> } </a> 
<a> public final TestBlocker <RARE_TOKEN> ( ) { </a> 
<a> return blocker ; </a> 
<a> } </a> 
<a> public final Exception <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> protected void <RARE_TOKEN> ( List < Response > result ) { </a> 
<a> try { </a> 
<a> super . <RARE_TOKEN> ( result ) ; </a> 
<a> if ( <RARE_TOKEN> ( ) != null ) { </a> 
<a> blocker . <RARE_TOKEN> ( <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> } finally { </a> 
<a> Log . d ( <RARE_TOKEN> , <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> blocker . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> Runnable <RARE_TOKEN> = new Runnable ( ) { </a> 
<a> public void run ( ) { </a> 
<a> execute ( ) ; </a> 
<a> } </a> 
<a> } ; </a> 
<a> Handler handler = new Handler ( blocker . <RARE_TOKEN> ( ) ) ; </a> 
<a> handler . post ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( ) { </a> 
<a> try { </a> 
<a> <RARE_TOKEN> ( 0 , new Runnable ( ) { </a> 
<a> @ Override </a> 
<a> public void run ( ) { </a> 
<a> try { </a> 
<a> Class . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } catch ( <RARE_TOKEN> e ) { </a> 
<a> } </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> } catch ( Throwable throwable ) { </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> protected class <RARE_TOKEN> implements Request . Callback { </a> 
<a> private final TestBlocker blocker ; </a> 
<a> private final boolean <RARE_TOKEN> ; </a> 
<a> public <RARE_TOKEN> ( TestBlocker blocker , boolean <RARE_TOKEN> ) { </a> 
<a> this . blocker = blocker ; </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( boolean <RARE_TOKEN> ) { </a> 
<a> this ( <RARE_TOKEN> . this . <RARE_TOKEN> ( ) , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void onCompleted ( Response response ) { </a> 
<a> try { </a> 
<a> if ( Thread . currentThread ( ) != blocker ) { </a> 
<a> throw new FacebookException ( <RARE_TOKEN> <RARE_TOKEN> " + Thread . currentThread ( ) . getId ( ) </a> 
<a> + <RARE_TOKEN> expected to be <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> " + blocker . getId ( ) ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> && response . getError ( ) != null ) { </a> 
<a> throw response . getError ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> } else if ( ! <RARE_TOKEN> && response . getError ( ) == null ) { </a> 
<a> throw new FacebookException ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( response ) ; </a> 
<a> } catch ( Exception e ) { </a> 
<a> blocker . <RARE_TOKEN> ( e ) ; </a> 
<a> } finally { </a> 
<a> blocker . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> protected void <RARE_TOKEN> ( Response response ) { </a> 
<a> } </a> 
<a> } </a> 
<a> protected class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> public <RARE_TOKEN> ( ) { </a> 
<a> super ( true ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> protected class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> public <RARE_TOKEN> ( ) { </a> 
<a> super ( false ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public static abstract class <RARE_TOKEN> extends Request { </a> 
<a> public abstract Response <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> public static class <RARE_TOKEN> extends RequestBatch { </a> 
<a> public <RARE_TOKEN> ( <RARE_TOKEN> ... requests ) { </a> 
<a> super ( requests ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( RequestBatch requests ) { </a> 
<a> super ( requests ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> List < Response > <RARE_TOKEN> ( ) { </a> 
<a> List < Request > requests = <RARE_TOKEN> ( ) ; </a> 
<a> List < Response > responses = new ArrayList < Response > ( ) ; </a> 
<a> for ( Request request : requests ) { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = ( <RARE_TOKEN> ) request ; </a> 
<a> responses . add ( <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> Request . <RARE_TOKEN> ( this , responses ) ; </a> 
<a> return responses ; </a> 
<a> } </a> 
<a> } </a> 
<a> private AtomicBoolean <RARE_TOKEN> = new AtomicBoolean ( ) ; </a> 
<a> protected void <RARE_TOKEN> ( ) { </a> 
<a> if ( <RARE_TOKEN> . get ( ) == false ) { </a> 
<a> try { </a> 
<a> <RARE_TOKEN> ( new Runnable ( ) { </a> 
<a> @ Override </a> 
<a> public void run ( ) { </a> 
<a> if ( <RARE_TOKEN> . <RARE_TOKEN> ( false , true ) ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> } catch ( Throwable throwable ) { </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> protected void <RARE_TOKEN> ( ) { </a> 
<a> try { </a> 
<a> <RARE_TOKEN> loader = Thread . currentThread ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> Class < ? > <RARE_TOKEN> = Class . <RARE_TOKEN> ( <RARE_TOKEN> , true , loader ) ; </a> 
<a> Class < ? > <RARE_TOKEN> = Class . <RARE_TOKEN> ( <RARE_TOKEN> , true , loader ) ; </a> 
<a> Class < ? > <RARE_TOKEN> = Class . <RARE_TOKEN> ( <RARE_TOKEN> , true , </a> 
<a> loader ) ; </a> 
<a> Object <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( ) . newInstance ( ) ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> Object <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } catch ( Exception ex ) { </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package com . facebook ; </a> 
<a> import com . facebook . <RARE_TOKEN> . <RARE_TOKEN> . R ; </a> 
<a> import org . json . JSONArray ; </a> 
<a> import org . json . JSONException ; </a> 
<a> import org . json . JSONObject ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> public static final String <RARE_TOKEN> = </a> 
<a> <RARE_TOKEN> + </a> 
<a> " <RARE_TOKEN> <RARE_TOKEN> + </a> 
<a> " <RARE_TOKEN> <RARE_TOKEN> path <RARE_TOKEN> <RARE_TOKEN> + </a> 
<a> " <RARE_TOKEN> <RARE_TOKEN> + </a> 
<a> " <RARE_TOKEN> <RARE_TOKEN> + </a> 
<a> " <RARE_TOKEN> + </a> 
<a> <RARE_TOKEN> ; </a> 
<a> public static final String <RARE_TOKEN> = </a> 
<a> <RARE_TOKEN> + </a> 
<a> " <RARE_TOKEN> + </a> 
<a> " <RARE_TOKEN> <RARE_TOKEN> + </a> 
<a> " <RARE_TOKEN> + </a> 
<a> " <RARE_TOKEN> <RARE_TOKEN> + </a> 
<a> " <RARE_TOKEN> <RARE_TOKEN> + </a> 
<a> " <RARE_TOKEN> + </a> 
<a> " <RARE_TOKEN> + </a> 
<a> " <RARE_TOKEN> <RARE_TOKEN> + </a> 
<a> " <RARE_TOKEN> <RARE_TOKEN> + </a> 
<a> " <RARE_TOKEN> + </a> 
<a> " <RARE_TOKEN> + </a> 
<a> " <RARE_TOKEN> <RARE_TOKEN> + </a> 
<a> " <RARE_TOKEN> <RARE_TOKEN> + </a> 
<a> " <RARE_TOKEN> + </a> 
<a> " <RARE_TOKEN> + </a> 
<a> " <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> + </a> 
<a> " <RARE_TOKEN> <RARE_TOKEN> + </a> 
<a> " <RARE_TOKEN> + </a> 
<a> " <RARE_TOKEN> + </a> 
<a> " <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> + </a> 
<a> " <RARE_TOKEN> <RARE_TOKEN> + </a> 
<a> " <RARE_TOKEN> + </a> 
<a> " <RARE_TOKEN> + </a> 
<a> " <RARE_TOKEN> <RARE_TOKEN> + </a> 
<a> " <RARE_TOKEN> <RARE_TOKEN> + </a> 
<a> " <RARE_TOKEN> + </a> 
<a> " <RARE_TOKEN> + </a> 
<a> " <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> token must be <RARE_TOKEN> to <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> the current <RARE_TOKEN> + </a> 
<a> " <RARE_TOKEN> <RARE_TOKEN> + </a> 
<a> " <RARE_TOKEN> + </a> 
<a> " <RARE_TOKEN> + </a> 
<a> " <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> token must be <RARE_TOKEN> to <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> the current <RARE_TOKEN> + </a> 
<a> " <RARE_TOKEN> <RARE_TOKEN> + </a> 
<a> " <RARE_TOKEN> + </a> 
<a> " <RARE_TOKEN> + </a> 
<a> " <RARE_TOKEN> <RARE_TOKEN> + </a> 
<a> " <RARE_TOKEN> + </a> 
<a> " <RARE_TOKEN> <RARE_TOKEN> + </a> 
<a> " <RARE_TOKEN> <RARE_TOKEN> + </a> 
<a> " <RARE_TOKEN> + </a> 
<a> " <RARE_TOKEN> + </a> 
<a> " <RARE_TOKEN> <RARE_TOKEN> + </a> 
<a> " <RARE_TOKEN> <RARE_TOKEN> + </a> 
<a> " <RARE_TOKEN> + </a> 
<a> " <RARE_TOKEN> + </a> 
<a> " <RARE_TOKEN> <RARE_TOKEN> + </a> 
<a> " <RARE_TOKEN> <RARE_TOKEN> + </a> 
<a> " <RARE_TOKEN> + </a> 
<a> " <RARE_TOKEN> + </a> 
<a> " <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> + </a> 
<a> " <RARE_TOKEN> <RARE_TOKEN> + </a> 
<a> " <RARE_TOKEN> + </a> 
<a> " <RARE_TOKEN> + </a> 
<a> " <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> + </a> 
<a> " <RARE_TOKEN> <RARE_TOKEN> + </a> 
<a> " <RARE_TOKEN> + </a> 
<a> " <RARE_TOKEN> + </a> 
<a> " <RARE_TOKEN> <RARE_TOKEN> + </a> 
<a> " <RARE_TOKEN> <RARE_TOKEN> + </a> 
<a> " <RARE_TOKEN> + </a> 
<a> " <RARE_TOKEN> + </a> 
<a> " <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> token must be <RARE_TOKEN> to <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> the current <RARE_TOKEN> + </a> 
<a> " <RARE_TOKEN> <RARE_TOKEN> + </a> 
<a> " <RARE_TOKEN> + </a> 
<a> " <RARE_TOKEN> + </a> 
<a> " <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> token must be <RARE_TOKEN> to <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> the current <RARE_TOKEN> + </a> 
<a> " <RARE_TOKEN> <RARE_TOKEN> + </a> 
<a> " <RARE_TOKEN> + </a> 
<a> <RARE_TOKEN> ; </a> 
<a> public static final String <RARE_TOKEN> = </a> 
<a> <RARE_TOKEN> + </a> 
<a> " <RARE_TOKEN> <RARE_TOKEN> + </a> 
<a> " <RARE_TOKEN> <RARE_TOKEN> request limit <RARE_TOKEN> + </a> 
<a> " <RARE_TOKEN> <RARE_TOKEN> + </a> 
<a> " <RARE_TOKEN> + </a> 
<a> <RARE_TOKEN> ; </a> 
<a> public static final String <RARE_TOKEN> = </a> 
<a> <RARE_TOKEN> + </a> 
<a> " <RARE_TOKEN> <RARE_TOKEN> + </a> 
<a> " <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> + </a> 
<a> " <RARE_TOKEN> <RARE_TOKEN> + </a> 
<a> " <RARE_TOKEN> + </a> 
<a> <RARE_TOKEN> ; </a> 
<a> public static final String <RARE_TOKEN> = </a> 
<a> <RARE_TOKEN> + </a> 
<a> " <RARE_TOKEN> <RARE_TOKEN> + </a> 
<a> " <RARE_TOKEN> <RARE_TOKEN> + </a> 
<a> " <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> + </a> 
<a> " <RARE_TOKEN> <RARE_TOKEN> + </a> 
<a> " <RARE_TOKEN> + </a> 
<a> <RARE_TOKEN> ; </a> 
<a> public static final String <RARE_TOKEN> = </a> 
<a> <RARE_TOKEN> + </a> 
<a> " <RARE_TOKEN> <RARE_TOKEN> + </a> 
<a> " <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> to <RARE_TOKEN> + </a> 
<a> " <RARE_TOKEN> <RARE_TOKEN> + </a> 
<a> " <RARE_TOKEN> <RARE_TOKEN> + </a> 
<a> " <RARE_TOKEN> <RARE_TOKEN> + </a> 
<a> " <RARE_TOKEN> + </a> 
<a> <RARE_TOKEN> ; </a> 
<a> public static final String <RARE_TOKEN> = </a> 
<a> <RARE_TOKEN> + </a> 
<a> " <RARE_TOKEN> <RARE_TOKEN> + </a> 
<a> " <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> to <RARE_TOKEN> + </a> 
<a> " <RARE_TOKEN> <RARE_TOKEN> + </a> 
<a> " <RARE_TOKEN> <RARE_TOKEN> + </a> 
<a> " <RARE_TOKEN> + </a> 
<a> <RARE_TOKEN> ; </a> 
<a> public static final String <RARE_TOKEN> = </a> 
<a> <RARE_TOKEN> + </a> 
<a> " <RARE_TOKEN> <RARE_TOKEN> + </a> 
<a> " <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> to <RARE_TOKEN> + </a> 
<a> " <RARE_TOKEN> <RARE_TOKEN> + </a> 
<a> " <RARE_TOKEN> <RARE_TOKEN> + </a> 
<a> " <RARE_TOKEN> <RARE_TOKEN> + </a> 
<a> " <RARE_TOKEN> + </a> 
<a> <RARE_TOKEN> ; </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> final String <RARE_TOKEN> = <RARE_TOKEN> error <RARE_TOKEN> ; </a> 
<a> FacebookRequestError error = new FacebookRequestError ( null , new FacebookException ( <RARE_TOKEN> ) ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , error . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertEquals ( FacebookRequestError . <RARE_TOKEN> . <RARE_TOKEN> , error . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertEquals ( FacebookRequestError . <RARE_TOKEN> , error . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertEquals ( FacebookRequestError . <RARE_TOKEN> , error . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertEquals ( 0 , error . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( ) throws JSONException { </a> 
<a> JSONObject <RARE_TOKEN> = new JSONObject ( ) ; </a> 
<a> <RARE_TOKEN> . put ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> FacebookRequestError error = </a> 
<a> FacebookRequestError . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> , null ) ; </a> 
<a> assertNotNull ( error ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , error . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertEquals ( FacebookRequestError . <RARE_TOKEN> . <RARE_TOKEN> , error . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertEquals ( 0 , error . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( ) throws JSONException { </a> 
<a> JSONObject <RARE_TOKEN> = new JSONObject ( <RARE_TOKEN> ) ; </a> 
<a> JSONObject <RARE_TOKEN> = new JSONObject ( ) ; </a> 
<a> <RARE_TOKEN> . put ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . put ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> FacebookRequestError error = </a> 
<a> FacebookRequestError . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> , null ) ; </a> 
<a> assertNotNull ( error ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , error . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> path <RARE_TOKEN> <RARE_TOKEN> , error . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , error . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , error . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertTrue ( error . <RARE_TOKEN> ( ) instanceof JSONObject ) ; </a> 
<a> assertEquals ( FacebookRequestError . <RARE_TOKEN> . <RARE_TOKEN> , error . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertEquals ( 0 , error . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( ) throws JSONException { </a> 
<a> JSONArray <RARE_TOKEN> = new JSONArray ( <RARE_TOKEN> ) ; </a> 
<a> assertEquals ( 2 , <RARE_TOKEN> . length ( ) ) ; </a> 
<a> JSONObject <RARE_TOKEN> = ( JSONObject ) <RARE_TOKEN> . get ( 0 ) ; </a> 
<a> FacebookRequestError error = </a> 
<a> FacebookRequestError . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> , null ) ; </a> 
<a> assertNotNull ( error ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , error . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> token must be <RARE_TOKEN> to <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> the current <RARE_TOKEN> , </a> 
<a> error . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , error . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , error . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertTrue ( error . <RARE_TOKEN> ( ) instanceof JSONArray ) ; </a> 
<a> assertEquals ( FacebookRequestError . <RARE_TOKEN> . <RARE_TOKEN> , error . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertEquals ( 0 , error . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( ) throws JSONException { </a> 
<a> JSONObject <RARE_TOKEN> = new JSONObject ( <RARE_TOKEN> ) ; </a> 
<a> JSONObject <RARE_TOKEN> = new JSONObject ( ) ; </a> 
<a> <RARE_TOKEN> . put ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . put ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> FacebookRequestError error = </a> 
<a> FacebookRequestError . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> , null ) ; </a> 
<a> assertNotNull ( error ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , error . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> request limit <RARE_TOKEN> , error . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertNull ( error . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertEquals ( 4 , error . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertTrue ( error . <RARE_TOKEN> ( ) instanceof JSONObject ) ; </a> 
<a> assertEquals ( FacebookRequestError . <RARE_TOKEN> . <RARE_TOKEN> , error . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertEquals ( 0 , error . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( ) throws JSONException { </a> 
<a> JSONObject <RARE_TOKEN> = new JSONObject ( <RARE_TOKEN> ) ; </a> 
<a> JSONObject <RARE_TOKEN> = new JSONObject ( ) ; </a> 
<a> <RARE_TOKEN> . put ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . put ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> FacebookRequestError error = </a> 
<a> FacebookRequestError . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> , null ) ; </a> 
<a> assertNotNull ( error ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , error . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> , error . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertNull ( error . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertEquals ( 2 , error . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertTrue ( error . <RARE_TOKEN> ( ) instanceof JSONObject ) ; </a> 
<a> assertEquals ( FacebookRequestError . <RARE_TOKEN> . <RARE_TOKEN> , error . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertEquals ( 0 , error . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( ) throws JSONException { </a> 
<a> JSONObject <RARE_TOKEN> = new JSONObject ( <RARE_TOKEN> ) ; </a> 
<a> JSONObject <RARE_TOKEN> = new JSONObject ( ) ; </a> 
<a> <RARE_TOKEN> . put ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . put ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> FacebookRequestError error = </a> 
<a> FacebookRequestError . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> , null ) ; </a> 
<a> assertNotNull ( error ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , error . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> , error . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , error . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertEquals ( 200 , error . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertEquals ( FacebookRequestError . <RARE_TOKEN> , error . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertTrue ( error . <RARE_TOKEN> ( ) instanceof JSONObject ) ; </a> 
<a> assertEquals ( FacebookRequestError . <RARE_TOKEN> . <RARE_TOKEN> , error . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertEquals ( R . string . <RARE_TOKEN> , error . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( ) throws JSONException { </a> 
<a> JSONObject <RARE_TOKEN> = new JSONObject ( <RARE_TOKEN> ) ; </a> 
<a> JSONObject <RARE_TOKEN> = new JSONObject ( ) ; </a> 
<a> <RARE_TOKEN> . put ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . put ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> FacebookRequestError error = </a> 
<a> FacebookRequestError . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> , null ) ; </a> 
<a> assertNotNull ( error ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , error . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> <RARE_TOKEN> to <RARE_TOKEN> , error . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , error . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , error . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , error . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertTrue ( error . <RARE_TOKEN> ( ) instanceof JSONObject ) ; </a> 
<a> assertEquals ( FacebookRequestError . <RARE_TOKEN> . <RARE_TOKEN> , error . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertEquals ( R . string . <RARE_TOKEN> , error . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( ) throws JSONException { </a> 
<a> JSONObject <RARE_TOKEN> = new JSONObject ( <RARE_TOKEN> ) ; </a> 
<a> JSONObject <RARE_TOKEN> = new JSONObject ( ) ; </a> 
<a> <RARE_TOKEN> . put ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . put ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> FacebookRequestError error = </a> 
<a> FacebookRequestError . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> , null ) ; </a> 
<a> assertNotNull ( error ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , error . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> <RARE_TOKEN> to <RARE_TOKEN> , error . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , error . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , error . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertEquals ( FacebookRequestError . <RARE_TOKEN> , error . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertTrue ( error . <RARE_TOKEN> ( ) instanceof JSONObject ) ; </a> 
<a> assertEquals ( FacebookRequestError . <RARE_TOKEN> . <RARE_TOKEN> , error . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertEquals ( R . string . <RARE_TOKEN> , error . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( ) throws JSONException { </a> 
<a> JSONObject <RARE_TOKEN> = new JSONObject ( <RARE_TOKEN> ) ; </a> 
<a> JSONObject <RARE_TOKEN> = new JSONObject ( ) ; </a> 
<a> <RARE_TOKEN> . put ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . put ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> FacebookRequestError error = </a> 
<a> FacebookRequestError . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> , null ) ; </a> 
<a> assertNotNull ( error ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , error . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> <RARE_TOKEN> to <RARE_TOKEN> , error . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , error . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , error . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , error . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertTrue ( error . <RARE_TOKEN> ( ) instanceof JSONObject ) ; </a> 
<a> assertEquals ( FacebookRequestError . <RARE_TOKEN> . <RARE_TOKEN> , error . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertEquals ( R . string . <RARE_TOKEN> , error . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package com . facebook ; </a> 
<a> import android . test . suitebuilder . annotation . LargeTest ; </a> 
<a> import com . facebook . model . GraphObject ; </a> 
<a> import java . util . Date ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> TestSession session = openTestSessionWithSharedUser ( ) ; </a> 
<a> GraphObject status = <RARE_TOKEN> ( ) ; </a> 
<a> GraphObject <RARE_TOKEN> = <RARE_TOKEN> ( session , <RARE_TOKEN> , status , null , GraphObject . class ) ; </a> 
<a> String <RARE_TOKEN> = ( String ) <RARE_TOKEN> . getProperty ( <RARE_TOKEN> ) ; </a> 
<a> GraphObject <RARE_TOKEN> = GraphObject . Factory . create ( ) ; </a> 
<a> final String <RARE_TOKEN> = <RARE_TOKEN> <RARE_TOKEN> is a <RARE_TOKEN> status <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> . setProperty ( "message" , <RARE_TOKEN> ) ; </a> 
<a> GraphObject <RARE_TOKEN> = <RARE_TOKEN> ( session , <RARE_TOKEN> + <RARE_TOKEN> , <RARE_TOKEN> , null , </a> 
<a> GraphObject . class ) ; </a> 
<a> assertNotNull ( <RARE_TOKEN> ) ; </a> 
<a> String <RARE_TOKEN> = ( String ) <RARE_TOKEN> . getProperty ( <RARE_TOKEN> ) ; </a> 
<a> String <RARE_TOKEN> = ( String ) <RARE_TOKEN> . getProperty ( "message" ) ; </a> 
<a> assertNotNull ( <RARE_TOKEN> ) ; </a> 
<a> assertNotNull ( <RARE_TOKEN> ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> GraphObject <RARE_TOKEN> = <RARE_TOKEN> ( session , <RARE_TOKEN> + <RARE_TOKEN> , <RARE_TOKEN> , null , </a> 
<a> GraphObject . class ) ; </a> 
<a> assertNotNull ( <RARE_TOKEN> ) ; </a> 
<a> String <RARE_TOKEN> = ( String ) <RARE_TOKEN> . getProperty ( <RARE_TOKEN> ) ; </a> 
<a> String <RARE_TOKEN> = ( String ) <RARE_TOKEN> . getProperty ( "message" ) ; </a> 
<a> assertNotNull ( <RARE_TOKEN> ) ; </a> 
<a> assertFalse ( <RARE_TOKEN> . equals ( <RARE_TOKEN> ) ) ; </a> 
<a> assertNotNull ( <RARE_TOKEN> ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> TestSession session = <RARE_TOKEN> ( null , <RARE_TOKEN> ) ; </a> 
<a> GraphObject event = GraphObject . Factory . create ( ) ; </a> 
<a> Date <RARE_TOKEN> = new Date ( <RARE_TOKEN> , 2 , 17 , 12 , <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> event . setProperty ( "name" , <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> " + <RARE_TOKEN> . toString ( ) ) ; </a> 
<a> final String <RARE_TOKEN> = <RARE_TOKEN> is a <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> event . setProperty ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> Date <RARE_TOKEN> = new Date ( <RARE_TOKEN> . getTime ( ) + <RARE_TOKEN> * 1000 ) ; </a> 
<a> event . setProperty ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> event . setProperty ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> event . setProperty ( <RARE_TOKEN> , <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> GraphObject <RARE_TOKEN> = <RARE_TOKEN> ( session , <RARE_TOKEN> , event , null , GraphObject . class ) ; </a> 
<a> assertNotNull ( <RARE_TOKEN> ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , <RARE_TOKEN> . getProperty ( <RARE_TOKEN> ) ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> GraphObject <RARE_TOKEN> = <RARE_TOKEN> ( session , <RARE_TOKEN> , <RARE_TOKEN> , null , GraphObject . class ) ; </a> 
<a> assertNotNull ( <RARE_TOKEN> ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , <RARE_TOKEN> . getProperty ( <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package com . facebook ; </a> 
<a> import android . <RARE_TOKEN> . Bitmap ; </a> 
<a> import android . location . Location ; </a> 
<a> import android . net . <RARE_TOKEN> ; </a> 
<a> import android . os . Bundle ; </a> 
<a> import android . test . suitebuilder . annotation . LargeTest ; </a> 
<a> import android . test . suitebuilder . annotation . MediumTest ; </a> 
<a> import android . test . suitebuilder . annotation . SmallTest ; </a> 
<a> import com . facebook . model . * ; </a> 
<a> import java . io . File ; </a> 
<a> import java . io . <RARE_TOKEN> ; </a> 
<a> import java . io . IOException ; </a> 
<a> import java . net . HttpURLConnection ; </a> 
<a> import java . net . <RARE_TOKEN> ; </a> 
<a> import java . util . ArrayList ; </a> 
<a> import java . util . Arrays ; </a> 
<a> import java . util . List ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> Request request = new Request ( ) ; </a> 
<a> assertTrue ( request != null ) ; </a> 
<a> assertEquals ( HttpMethod . GET , request . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> GraphObject graphObject = GraphObject . Factory . create ( ) ; </a> 
<a> Request request = Request . <RARE_TOKEN> ( null , <RARE_TOKEN> , graphObject , null ) ; </a> 
<a> assertTrue ( request != null ) ; </a> 
<a> assertEquals ( HttpMethod . POST , request . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , request . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertEquals ( graphObject , request . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> Request request = Request . <RARE_TOKEN> ( null , null ) ; </a> 
<a> assertTrue ( request != null ) ; </a> 
<a> assertEquals ( HttpMethod . GET , request . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , request . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> Request request = Request . <RARE_TOKEN> ( null , null ) ; </a> 
<a> assertTrue ( request != null ) ; </a> 
<a> assertEquals ( HttpMethod . GET , request . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , request . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> Bitmap <RARE_TOKEN> = Bitmap . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> , Bitmap . <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> Request request = Request . <RARE_TOKEN> ( null , <RARE_TOKEN> , null ) ; </a> 
<a> assertTrue ( request != null ) ; </a> 
<a> Bundle parameters = request . <RARE_TOKEN> ( ) ; </a> 
<a> assertTrue ( parameters != null ) ; </a> 
<a> assertTrue ( parameters . containsKey ( <RARE_TOKEN> ) ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , parameters . <RARE_TOKEN> ( <RARE_TOKEN> ) ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , request . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> Location location = new Location ( "" ) ; </a> 
<a> location . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> location . <RARE_TOKEN> ( - <RARE_TOKEN> ) ; </a> 
<a> Request request = Request . <RARE_TOKEN> ( null , location , 1000 , <RARE_TOKEN> , null , null ) ; </a> 
<a> assertTrue ( request != null ) ; </a> 
<a> assertEquals ( HttpMethod . GET , request . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , request . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> Request request = Request . <RARE_TOKEN> ( null , null , 1000 , <RARE_TOKEN> , <RARE_TOKEN> , null ) ; </a> 
<a> assertTrue ( request != null ) ; </a> 
<a> assertEquals ( HttpMethod . GET , request . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , request . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> try { </a> 
<a> Request request = Request . <RARE_TOKEN> ( null , null , 1000 , <RARE_TOKEN> , null , null ) ; </a> 
<a> fail ( <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } catch ( FacebookException exception ) { </a> 
<a> } </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> Request request = new Request ( ) ; </a> 
<a> assertEquals ( HttpMethod . GET , request . <RARE_TOKEN> ( ) ) ; </a> 
<a> request . <RARE_TOKEN> ( null ) ; </a> 
<a> assertEquals ( HttpMethod . GET , request . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> try { </a> 
<a> Request . <RARE_TOKEN> ( ( Request [ ] ) null ) ; </a> 
<a> fail ( <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } catch ( NullPointerException exception ) { </a> 
<a> } </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> try { </a> 
<a> Request . <RARE_TOKEN> ( new Request [ ] { } ) ; </a> 
<a> fail ( <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } catch ( IllegalArgumentException exception ) { </a> 
<a> } </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> try { </a> 
<a> Request . <RARE_TOKEN> ( new Request [ ] { null } ) ; </a> 
<a> fail ( <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } catch ( NullPointerException exception ) { </a> 
<a> } </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> try { </a> 
<a> Request . <RARE_TOKEN> ( ( Request [ ] ) null ) ; </a> 
<a> fail ( <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } catch ( NullPointerException exception ) { </a> 
<a> } </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> try { </a> 
<a> Request . <RARE_TOKEN> ( new Request [ ] { } ) ; </a> 
<a> fail ( <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } catch ( IllegalArgumentException exception ) { </a> 
<a> } </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> try { </a> 
<a> Request . <RARE_TOKEN> ( new Request [ ] { null } ) ; </a> 
<a> fail ( <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } catch ( NullPointerException exception ) { </a> 
<a> } </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) throws Exception { </a> 
<a> Request <RARE_TOKEN> = new Request ( null , <RARE_TOKEN> ) ; </a> 
<a> HttpURLConnection connection = Request . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> assertTrue ( connection != null ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , connection . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , connection . <RARE_TOKEN> ( ) . getPath ( ) ) ; </a> 
<a> assertTrue ( connection . <RARE_TOKEN> ( <RARE_TOKEN> ) . startsWith ( <RARE_TOKEN> ) ) ; </a> 
<a> <RARE_TOKEN> uri = <RARE_TOKEN> . <RARE_TOKEN> ( connection . <RARE_TOKEN> ( ) . toString ( ) ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , uri . <RARE_TOKEN> ( <RARE_TOKEN> ) ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , uri . <RARE_TOKEN> ( <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> Request request = new Request ( null , <RARE_TOKEN> ) ; </a> 
<a> Response response = request . <RARE_TOKEN> ( ) ; </a> 
<a> assertTrue ( response != null ) ; </a> 
<a> assertTrue ( response . getError ( ) == null ) ; </a> 
<a> assertTrue ( response . <RARE_TOKEN> ( ) != null ) ; </a> 
<a> GraphPlace <RARE_TOKEN> = response . <RARE_TOKEN> ( GraphPlace . class ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) throws IOException { </a> 
<a> Request request = new Request ( null , <RARE_TOKEN> ) ; </a> 
<a> HttpURLConnection connection = Request . <RARE_TOKEN> ( request ) ; </a> 
<a> List < Response > responses = Request . <RARE_TOKEN> ( connection , Arrays . asList ( new Request [ ] { request } ) ) ; </a> 
<a> assertNotNull ( responses ) ; </a> 
<a> assertEquals ( 1 , responses . size ( ) ) ; </a> 
<a> Response response = responses . get ( 0 ) ; </a> 
<a> assertTrue ( response != null ) ; </a> 
<a> assertTrue ( response . getError ( ) == null ) ; </a> 
<a> assertTrue ( response . <RARE_TOKEN> ( ) != null ) ; </a> 
<a> GraphPlace <RARE_TOKEN> = response . <RARE_TOKEN> ( GraphPlace . class ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( ) ) ; </a> 
<a> int code = connection . <RARE_TOKEN> ( ) ; </a> 
<a> assertEquals ( 200 , code ) ; </a> 
<a> assertTrue ( connection . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( ) . contains ( <RARE_TOKEN> ) ) ; </a> 
<a> connection . disconnect ( ) ; </a> 
<a> } </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> Request request = new Request ( null , <RARE_TOKEN> ) ; </a> 
<a> Response response = request . <RARE_TOKEN> ( ) ; </a> 
<a> assertTrue ( response != null ) ; </a> 
<a> FacebookRequestError error = response . getError ( ) ; </a> 
<a> assertNotNull ( error ) ; </a> 
<a> FacebookException exception = error . <RARE_TOKEN> ( ) ; </a> 
<a> assertNotNull ( exception ) ; </a> 
<a> assertTrue ( exception instanceof <RARE_TOKEN> ) ; </a> 
<a> assertNotNull ( error . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertTrue ( error . <RARE_TOKEN> ( ) != FacebookRequestError . <RARE_TOKEN> ) ; </a> 
<a> assertNotNull ( error . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> TestSession session = openTestSessionWithSharedUser ( ) ; </a> 
<a> Request request = Request . <RARE_TOKEN> ( session , <RARE_TOKEN> , null , null ) ; </a> 
<a> assertNotNull ( request ) ; </a> 
<a> Response response = request . <RARE_TOKEN> ( ) ; </a> 
<a> assertTrue ( response != null ) ; </a> 
<a> FacebookRequestError error = response . getError ( ) ; </a> 
<a> assertNotNull ( error ) ; </a> 
<a> assertTrue ( error . <RARE_TOKEN> ( ) instanceof <RARE_TOKEN> ) ; </a> 
<a> assertTrue ( error . <RARE_TOKEN> ( ) != FacebookRequestError . <RARE_TOKEN> ) ; </a> 
<a> assertNotNull ( error . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> TestSession session = <RARE_TOKEN> ( null ) ; </a> 
<a> Request request = new Request ( session , <RARE_TOKEN> ) ; </a> 
<a> Response response = request . <RARE_TOKEN> ( ) ; </a> 
<a> assertNotNull ( response . getError ( ) ) ; </a> 
<a> } </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> TestSession session = openTestSessionWithSharedUser ( ) ; </a> 
<a> Request request = Request . <RARE_TOKEN> ( session , null ) ; </a> 
<a> Response response = request . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> ( session , response ) ; </a> 
<a> } </a> 
<a> static void <RARE_TOKEN> ( TestSession session , Response response ) { </a> 
<a> assertNull ( response . getError ( ) ) ; </a> 
<a> GraphUser <RARE_TOKEN> = response . <RARE_TOKEN> ( GraphUser . class ) ; </a> 
<a> assertNotNull ( <RARE_TOKEN> ) ; </a> 
<a> assertEquals ( session . <RARE_TOKEN> ( ) , <RARE_TOKEN> . getId ( ) ) ; </a> 
<a> } </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> TestSession session = openTestSessionWithSharedUser ( ) ; </a> 
<a> Request request = Request . <RARE_TOKEN> ( session , null ) ; </a> 
<a> Response response = request . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> ( session , response ) ; </a> 
<a> } </a> 
<a> static void <RARE_TOKEN> ( TestSession session , Response response ) { </a> 
<a> assertNotNull ( response ) ; </a> 
<a> assertNull ( response . getError ( ) ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = response . <RARE_TOKEN> ( <RARE_TOKEN> . class ) ; </a> 
<a> assertNotNull ( <RARE_TOKEN> ) ; </a> 
<a> List < GraphObject > <RARE_TOKEN> = <RARE_TOKEN> . getData ( ) ; </a> 
<a> assertNotNull ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> TestSession session = openTestSessionWithSharedUser ( ) ; </a> 
<a> Location location = new Location ( "" ) ; </a> 
<a> location . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> location . <RARE_TOKEN> ( - <RARE_TOKEN> ) ; </a> 
<a> Request request = Request . <RARE_TOKEN> ( session , location , 5 , 5 , null , null ) ; </a> 
<a> Response response = request . <RARE_TOKEN> ( ) ; </a> 
<a> assertNotNull ( response ) ; </a> 
<a> assertNull ( response . getError ( ) ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = response . <RARE_TOKEN> ( <RARE_TOKEN> . class ) ; </a> 
<a> assertNotNull ( <RARE_TOKEN> ) ; </a> 
<a> List < GraphObject > <RARE_TOKEN> = <RARE_TOKEN> . getData ( ) ; </a> 
<a> assertNotNull ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> TestSession session = openTestSessionWithSharedUser ( ) ; </a> 
<a> Request request = Request . <RARE_TOKEN> ( session , null , 1000 , 5 , <RARE_TOKEN> , null ) ; </a> 
<a> Response response = request . <RARE_TOKEN> ( ) ; </a> 
<a> assertNotNull ( response ) ; </a> 
<a> assertNull ( response . getError ( ) ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = response . <RARE_TOKEN> ( <RARE_TOKEN> . class ) ; </a> 
<a> assertNotNull ( <RARE_TOKEN> ) ; </a> 
<a> List < GraphObject > <RARE_TOKEN> = <RARE_TOKEN> . getData ( ) ; </a> 
<a> assertNotNull ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> TestSession session = openTestSessionWithSharedUser ( ) ; </a> 
<a> Location location = new Location ( "" ) ; </a> 
<a> location . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> location . <RARE_TOKEN> ( - <RARE_TOKEN> ) ; </a> 
<a> Request request = Request . <RARE_TOKEN> ( session , location , 1000 , 5 , <RARE_TOKEN> , null ) ; </a> 
<a> Response response = request . <RARE_TOKEN> ( ) ; </a> 
<a> assertNotNull ( response ) ; </a> 
<a> assertNull ( response . getError ( ) ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = response . <RARE_TOKEN> ( <RARE_TOKEN> . class ) ; </a> 
<a> assertNotNull ( <RARE_TOKEN> ) ; </a> 
<a> List < GraphObject > <RARE_TOKEN> = <RARE_TOKEN> . getData ( ) ; </a> 
<a> assertNotNull ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> TestSession session = openTestSessionWithSharedUser ( ) ; </a> 
<a> Bitmap <RARE_TOKEN> = <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> Request request = Request . <RARE_TOKEN> ( session , <RARE_TOKEN> , null ) ; </a> 
<a> Response response = request . <RARE_TOKEN> ( ) ; </a> 
<a> assertNotNull ( response ) ; </a> 
<a> assertNull ( response . getError ( ) ) ; </a> 
<a> GraphObject result = response . <RARE_TOKEN> ( ) ; </a> 
<a> assertNotNull ( result ) ; </a> 
<a> } </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) throws IOException { </a> 
<a> File <RARE_TOKEN> = null ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = null ; </a> 
<a> try { </a> 
<a> TestSession session = openTestSessionWithSharedUser ( ) ; </a> 
<a> Bitmap <RARE_TOKEN> = <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> File <RARE_TOKEN> = getActivity ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> = File . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = new <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( Bitmap . <RARE_TOKEN> . <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . close ( ) ; </a> 
<a> <RARE_TOKEN> = null ; </a> 
<a> Request request = Request . <RARE_TOKEN> ( session , <RARE_TOKEN> , null ) ; </a> 
<a> Response response = request . <RARE_TOKEN> ( ) ; </a> 
<a> assertNotNull ( response ) ; </a> 
<a> assertNull ( response . getError ( ) ) ; </a> 
<a> GraphObject result = response . <RARE_TOKEN> ( ) ; </a> 
<a> assertNotNull ( result ) ; </a> 
<a> } finally { </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> . close ( ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) throws IOException , <RARE_TOKEN> { </a> 
<a> File <RARE_TOKEN> = null ; </a> 
<a> try { </a> 
<a> TestSession session = openTestSessionWithSharedUser ( ) ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> Request request = Request . <RARE_TOKEN> ( session , <RARE_TOKEN> , null ) ; </a> 
<a> Response response = request . <RARE_TOKEN> ( ) ; </a> 
<a> assertNotNull ( response ) ; </a> 
<a> assertNull ( response . getError ( ) ) ; </a> 
<a> GraphObject result = response . <RARE_TOKEN> ( ) ; </a> 
<a> assertNotNull ( result ) ; </a> 
<a> } catch ( Exception ex ) { </a> 
<a> return ; </a> 
<a> } finally { </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> TestSession session = openTestSessionWithSharedUser ( ) ; </a> 
<a> GraphObject <RARE_TOKEN> = <RARE_TOKEN> ( ) ; </a> 
<a> GraphObject <RARE_TOKEN> = <RARE_TOKEN> ( session , <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> . getProperty ( "message" ) , <RARE_TOKEN> . getProperty ( "message" ) ) ; </a> 
<a> } </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> TestSession session = openTestSessionWithSharedUser ( ) ; </a> 
<a> String <RARE_TOKEN> = session . <RARE_TOKEN> ( ) ; </a> 
<a> Bundle parameters = new Bundle ( ) ; </a> 
<a> parameters . putString ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> parameters . putString ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> Request request = Request . <RARE_TOKEN> ( session , <RARE_TOKEN> , parameters , null ) ; </a> 
<a> Response response = request . <RARE_TOKEN> ( ) ; </a> 
<a> assertNotNull ( response ) ; </a> 
<a> GraphObjectList < GraphObject > <RARE_TOKEN> = response . <RARE_TOKEN> ( ) ; </a> 
<a> assertNotNull ( <RARE_TOKEN> ) ; </a> 
<a> assertEquals ( 1 , <RARE_TOKEN> . size ( ) ) ; </a> 
<a> GraphObject user = <RARE_TOKEN> . get ( 0 ) ; </a> 
<a> assertNotNull ( user ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , user . getProperty ( <RARE_TOKEN> ) . toString ( ) ) ; </a> 
<a> } </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> Request request = new Request ( null , <RARE_TOKEN> ) ; </a> 
<a> final ArrayList < Boolean > <RARE_TOKEN> = new ArrayList < Boolean > ( ) ; </a> 
<a> request . setCallback ( new Request . Callback ( ) { </a> 
<a> @ Override </a> 
<a> public void onCompleted ( Response response ) { </a> 
<a> <RARE_TOKEN> . add ( true ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> Response response = request . <RARE_TOKEN> ( ) ; </a> 
<a> assertNotNull ( response ) ; </a> 
<a> assertTrue ( <RARE_TOKEN> . size ( ) == 1 ) ; </a> 
<a> } </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> Request request = new Request ( null , <RARE_TOKEN> ) ; </a> 
<a> RequestBatch batch = new RequestBatch ( request ) ; </a> 
<a> batch . <RARE_TOKEN> ( 1 ) ; </a> 
<a> List < Response > responses = Request . <RARE_TOKEN> ( batch ) ; </a> 
<a> assertNotNull ( responses ) ; </a> 
<a> assertTrue ( responses . size ( ) == 1 ) ; </a> 
<a> Response response = responses . get ( 0 ) ; </a> 
<a> assertNotNull ( response ) ; </a> 
<a> assertNotNull ( response . getError ( ) ) ; </a> 
<a> } </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> try { </a> 
<a> RequestBatch batch = new RequestBatch ( ) ; </a> 
<a> batch . <RARE_TOKEN> ( - 1 ) ; </a> 
<a> fail ( ) ; </a> 
<a> } catch ( IllegalArgumentException ex ) { </a> 
<a> } </a> 
<a> } </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> Request request = new Request ( ) ; </a> 
<a> request . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> request . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> request . setCallback ( new <RARE_TOKEN> ( ) ) ; </a> 
<a> TestRequestAsyncTask task = new TestRequestAsyncTask ( request ) ; </a> 
<a> task . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> ( 1 ) ; </a> 
<a> } </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> TestSession session = openTestSessionWithSharedUser ( ) ; </a> 
<a> session . close ( ) ; </a> 
<a> Request request = new Request ( session , <RARE_TOKEN> , null , null , new <RARE_TOKEN> ( ) ) ; </a> 
<a> TestRequestAsyncTask task = new TestRequestAsyncTask ( request ) ; </a> 
<a> task . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> ( 1 ) ; </a> 
<a> } </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> TestSession session = openTestSessionWithSharedUser ( ) ; </a> 
<a> Bundle parameters = new Bundle ( ) ; </a> 
<a> parameters . <RARE_TOKEN> ( "foo" , new short [ 1 ] ) ; </a> 
<a> Request request = new Request ( session , <RARE_TOKEN> , parameters , HttpMethod . GET , new <RARE_TOKEN> ( ) ) ; </a> 
<a> Response response = request . <RARE_TOKEN> ( ) ; </a> 
<a> FacebookRequestError error = response . getError ( ) ; </a> 
<a> assertNotNull ( error ) ; </a> 
<a> FacebookException exception = error . <RARE_TOKEN> ( ) ; </a> 
<a> assertNotNull ( exception ) ; </a> 
<a> assertTrue ( exception . getMessage ( ) . contains ( <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> private final Location <RARE_TOKEN> = new Location ( "" ) { </a> 
<a> { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( - <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } ; </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> TestSession session = openTestSessionWithSharedUser ( ) ; </a> 
<a> final List < GraphPlace > <RARE_TOKEN> = new ArrayList < GraphPlace > ( ) ; </a> 
<a> Request request = Request </a> 
<a> . <RARE_TOKEN> ( session , <RARE_TOKEN> , 1000 , 5 , null , new Request . <RARE_TOKEN> ( ) { </a> 
<a> @ Override </a> 
<a> public void onCompleted ( List < GraphPlace > <RARE_TOKEN> , Response response ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> Response response = request . <RARE_TOKEN> ( ) ; </a> 
<a> assertNull ( response . getError ( ) ) ; </a> 
<a> assertNotNull ( response . <RARE_TOKEN> ( ) ) ; </a> 
<a> <RARE_TOKEN> ( 0 , <RARE_TOKEN> . size ( ) ) ; </a> 
<a> <RARE_TOKEN> . clear ( ) ; </a> 
<a> Request <RARE_TOKEN> = response . <RARE_TOKEN> ( Response . <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> assertNotNull ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . setCallback ( request . <RARE_TOKEN> ( ) ) ; </a> 
<a> response = <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> assertNull ( response . getError ( ) ) ; </a> 
<a> assertNotNull ( response . <RARE_TOKEN> ( ) ) ; </a> 
<a> <RARE_TOKEN> ( 0 , <RARE_TOKEN> . size ( ) ) ; </a> 
<a> <RARE_TOKEN> . clear ( ) ; </a> 
<a> Request <RARE_TOKEN> = response . <RARE_TOKEN> ( Response . <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> assertNotNull ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . setCallback ( request . <RARE_TOKEN> ( ) ) ; </a> 
<a> response = <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> assertNull ( response . getError ( ) ) ; </a> 
<a> assertNotNull ( response . <RARE_TOKEN> ( ) ) ; </a> 
<a> <RARE_TOKEN> ( 0 , <RARE_TOKEN> . size ( ) ) ; </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> TestSession session = <RARE_TOKEN> ( ) ; </a> 
<a> assertFalse ( session . isOpened ( ) ) ; </a> 
<a> Request request = new Request ( session , <RARE_TOKEN> ) ; </a> 
<a> Response response = request . <RARE_TOKEN> ( ) ; </a> 
<a> assertNotNull ( response . getError ( ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package com . facebook ; </a> 
<a> import android . content . Intent ; </a> 
<a> import android . content . <RARE_TOKEN> ; </a> 
<a> import android . support . v4 . content . <RARE_TOKEN> ; </a> 
<a> import android . test . suitebuilder . annotation . LargeTest ; </a> 
<a> import android . test . suitebuilder . annotation . MediumTest ; </a> 
<a> import android . test . suitebuilder . annotation . SmallTest ; </a> 
<a> import com . facebook . internal . Utility ; </a> 
<a> import java . io . IOException ; </a> 
<a> import java . util . ArrayList ; </a> 
<a> import java . util . Arrays ; </a> 
<a> import java . util . Date ; </a> 
<a> import java . util . List ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( ) throws Exception { </a> 
<a> super . <RARE_TOKEN> ( ) ; </a> 
<a> new <RARE_TOKEN> ( getActivity ( ) ) . clear ( ) ; </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> try { </a> 
<a> new Session ( null ) ; </a> 
<a> assertFalse ( true ) ; </a> 
<a> } catch ( NullPointerException e ) { </a> 
<a> } </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> final <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( ) ; </a> 
<a> final <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( ) ; </a> 
<a> final <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( ) ; </a> 
<a> final <RARE_TOKEN> <RARE_TOKEN> = <RARE_TOKEN> . getInstance ( getActivity ( ) ) ; </a> 
<a> try { </a> 
<a> Runnable <RARE_TOKEN> = new Runnable ( ) { </a> 
<a> @ Override </a> 
<a> public void run ( ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ( ) ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> ( Session . <RARE_TOKEN> ) ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> ( Session . <RARE_TOKEN> ) ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> ( Session . <RARE_TOKEN> ) ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> ( Session . <RARE_TOKEN> ) ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> ( Session . <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> } ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> , true ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> Session . <RARE_TOKEN> ( Session . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> Session . <RARE_TOKEN> ( Session . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> Session . <RARE_TOKEN> ( Session . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> Session . <RARE_TOKEN> ( Session . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> Session . <RARE_TOKEN> ( Session . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> Session . <RARE_TOKEN> ( Session . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> Session . <RARE_TOKEN> ( Session . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> Session . <RARE_TOKEN> ( Session . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> Runnable <RARE_TOKEN> = new Runnable ( ) { </a> 
<a> @ Override </a> 
<a> public void run ( ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> ( Session . <RARE_TOKEN> ) ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> ( Session . <RARE_TOKEN> ) ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> ( Session . <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> } ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> , true ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( 3 ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> Session . <RARE_TOKEN> ( Session . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> Session . <RARE_TOKEN> ( Session . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> Session . <RARE_TOKEN> ( Session . <RARE_TOKEN> ) ; </a> 
<a> Session . <RARE_TOKEN> ( Session . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } finally { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> Session . <RARE_TOKEN> ( null ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> Session . <RARE_TOKEN> ( null ) ; </a> 
<a> final <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( ) ; </a> 
<a> final <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( ) ; </a> 
<a> final <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( ) ; </a> 
<a> final <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( ) ; </a> 
<a> final <RARE_TOKEN> <RARE_TOKEN> = <RARE_TOKEN> . getInstance ( getActivity ( ) ) ; </a> 
<a> try { </a> 
<a> Runnable <RARE_TOKEN> = new Runnable ( ) { </a> 
<a> @ Override </a> 
<a> public void run ( ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> ( Session . <RARE_TOKEN> ) ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> ( Session . <RARE_TOKEN> ) ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> ( Session . <RARE_TOKEN> ) ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> ( Session . <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> } ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> , true ) ; </a> 
<a> assertEquals ( null , Session . getActiveSession ( ) ) ; </a> 
<a> Session . <RARE_TOKEN> ( null ) ; </a> 
<a> assertEquals ( null , Session . getActiveSession ( ) ) ; </a> 
<a> Session <RARE_TOKEN> = new Session . Builder ( getActivity ( ) ) . </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) . </a> 
<a> <RARE_TOKEN> ( new MockTokenCachingStrategy ( ) ) . </a> 
<a> build ( ) ; </a> 
<a> assertEquals ( SessionState . <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> Session . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , Session . getActiveSession ( ) ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( null ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> Session . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , Session . getActiveSession ( ) ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> Session <RARE_TOKEN> = new Session . Builder ( getActivity ( ) ) . </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) . </a> 
<a> <RARE_TOKEN> ( new MockTokenCachingStrategy ( ) ) . </a> 
<a> build ( ) ; </a> 
<a> assertEquals ( SessionState . <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( null ) ; </a> 
<a> assertEquals ( SessionState . <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> Session . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> assertEquals ( SessionState . <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , Session . getActiveSession ( ) ) ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } finally { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> Session . <RARE_TOKEN> ( null ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> ArrayList < String > permissions = new ArrayList < String > ( ) ; </a> 
<a> MockTokenCachingStrategy cache = new MockTokenCachingStrategy ( null , 0 ) ; </a> 
<a> SessionStatusCallbackRecorder statusRecorder = new SessionStatusCallbackRecorder ( ) ; </a> 
<a> <RARE_TOKEN> session = <RARE_TOKEN> ( cache ) ; </a> 
<a> AccessToken <RARE_TOKEN> = AccessToken </a> 
<a> . <RARE_TOKEN> ( <RARE_TOKEN> token of <RARE_TOKEN> , permissions , AccessTokenSource . <RARE_TOKEN> ) ; </a> 
<a> assertEquals ( SessionState . <RARE_TOKEN> , session . <RARE_TOKEN> ( ) ) ; </a> 
<a> session . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> session . <RARE_TOKEN> ( new Session . OpenRequest ( getActivity ( ) ) . setCallback ( statusRecorder ) ) ; </a> 
<a> statusRecorder . waitForCall ( session , SessionState . <RARE_TOKEN> , null ) ; </a> 
<a> statusRecorder . waitForCall ( session , SessionState . <RARE_TOKEN> , null ) ; </a> 
<a> <RARE_TOKEN> ( session , <RARE_TOKEN> ) ; </a> 
<a> session . close ( ) ; </a> 
<a> statusRecorder . waitForCall ( session , SessionState . <RARE_TOKEN> , null ) ; </a> 
<a> assertTrue ( cache . <RARE_TOKEN> ( ) != null ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> . getToken ( ) , TokenCachingStrategy . getToken ( cache . <RARE_TOKEN> ( ) ) ) ; </a> 
<a> session . <RARE_TOKEN> ( ) ; </a> 
<a> assertTrue ( cache . <RARE_TOKEN> ( ) == null ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> statusRecorder . close ( ) ; </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> ArrayList < String > permissions = new ArrayList < String > ( ) ; </a> 
<a> MockTokenCachingStrategy cache = new MockTokenCachingStrategy ( null , 0 ) ; </a> 
<a> SessionStatusCallbackRecorder statusRecorder = new SessionStatusCallbackRecorder ( ) ; </a> 
<a> <RARE_TOKEN> session = <RARE_TOKEN> ( cache ) ; </a> 
<a> AccessToken <RARE_TOKEN> = AccessToken </a> 
<a> . <RARE_TOKEN> ( <RARE_TOKEN> token of <RARE_TOKEN> , permissions , AccessTokenSource . <RARE_TOKEN> ) ; </a> 
<a> assertEquals ( SessionState . <RARE_TOKEN> , session . <RARE_TOKEN> ( ) ) ; </a> 
<a> session . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> session . <RARE_TOKEN> ( new Session . OpenRequest ( getActivity ( ) ) . setCallback ( statusRecorder ) . </a> 
<a> <RARE_TOKEN> ( Arrays . asList ( new String [ ] { </a> 
<a> <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> </a> 
<a> } ) ) ) ; </a> 
<a> statusRecorder . waitForCall ( session , SessionState . <RARE_TOKEN> , null ) ; </a> 
<a> statusRecorder . waitForCall ( session , SessionState . <RARE_TOKEN> , null ) ; </a> 
<a> <RARE_TOKEN> ( session , <RARE_TOKEN> ) ; </a> 
<a> session . close ( ) ; </a> 
<a> statusRecorder . waitForCall ( session , SessionState . <RARE_TOKEN> , null ) ; </a> 
<a> assertTrue ( cache . <RARE_TOKEN> ( ) != null ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> . getToken ( ) , TokenCachingStrategy . getToken ( cache . <RARE_TOKEN> ( ) ) ) ; </a> 
<a> session . <RARE_TOKEN> ( ) ; </a> 
<a> assertTrue ( cache . <RARE_TOKEN> ( ) == null ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> statusRecorder . close ( ) ; </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> ArrayList < String > permissions = new ArrayList < String > ( ) ; </a> 
<a> MockTokenCachingStrategy cache = new MockTokenCachingStrategy ( null , 0 ) ; </a> 
<a> SessionStatusCallbackRecorder statusRecorder = new SessionStatusCallbackRecorder ( ) ; </a> 
<a> <RARE_TOKEN> session = <RARE_TOKEN> ( cache ) ; </a> 
<a> AccessToken <RARE_TOKEN> = AccessToken </a> 
<a> . <RARE_TOKEN> ( <RARE_TOKEN> token of <RARE_TOKEN> , permissions , AccessTokenSource . <RARE_TOKEN> ) ; </a> 
<a> assertEquals ( SessionState . <RARE_TOKEN> , session . <RARE_TOKEN> ( ) ) ; </a> 
<a> session . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> session . <RARE_TOKEN> ( new Session . OpenRequest ( getActivity ( ) ) . setCallback ( statusRecorder ) . </a> 
<a> <RARE_TOKEN> ( Arrays . asList ( new String [ ] { </a> 
<a> <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> </a> 
<a> } ) ) ) ; </a> 
<a> statusRecorder . waitForCall ( session , SessionState . <RARE_TOKEN> , null ) ; </a> 
<a> statusRecorder . waitForCall ( session , SessionState . <RARE_TOKEN> , null ) ; </a> 
<a> <RARE_TOKEN> ( session , <RARE_TOKEN> ) ; </a> 
<a> session . close ( ) ; </a> 
<a> statusRecorder . waitForCall ( session , SessionState . <RARE_TOKEN> , null ) ; </a> 
<a> assertTrue ( cache . <RARE_TOKEN> ( ) != null ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> . getToken ( ) , TokenCachingStrategy . getToken ( cache . <RARE_TOKEN> ( ) ) ) ; </a> 
<a> session . <RARE_TOKEN> ( ) ; </a> 
<a> assertTrue ( cache . <RARE_TOKEN> ( ) == null ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> statusRecorder . close ( ) ; </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> SessionStatusCallbackRecorder statusRecorder = new SessionStatusCallbackRecorder ( ) ; </a> 
<a> String token = <RARE_TOKEN> token <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> MockTokenCachingStrategy cache = new MockTokenCachingStrategy ( token , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> session = <RARE_TOKEN> ( <RARE_TOKEN> , cache ) ; </a> 
<a> assertEquals ( SessionState . <RARE_TOKEN> , session . <RARE_TOKEN> ( ) ) ; </a> 
<a> session . <RARE_TOKEN> ( new Session . OpenRequest ( getActivity ( ) ) . setCallback ( statusRecorder ) ) ; </a> 
<a> statusRecorder . waitForCall ( session , SessionState . <RARE_TOKEN> , null ) ; </a> 
<a> assertTrue ( cache . <RARE_TOKEN> ( ) == null ) ; </a> 
<a> session . close ( ) ; </a> 
<a> statusRecorder . waitForCall ( session , SessionState . <RARE_TOKEN> , null ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> statusRecorder . close ( ) ; </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> new <RARE_TOKEN> ( getActivity ( ) ) . clear ( ) ; </a> 
<a> assertNull ( Session . <RARE_TOKEN> ( getActivity ( ) ) ) ; </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> SessionStatusCallbackRecorder statusRecorder = new SessionStatusCallbackRecorder ( ) ; </a> 
<a> MockTokenCachingStrategy cache = new MockTokenCachingStrategy ( null , 0 ) ; </a> 
<a> <RARE_TOKEN> session = <RARE_TOKEN> ( cache ) ; </a> 
<a> Exception <RARE_TOKEN> = new Exception ( ) ; </a> 
<a> session . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> session . <RARE_TOKEN> ( new Session . OpenRequest ( getActivity ( ) ) . setCallback ( statusRecorder ) ) ; </a> 
<a> statusRecorder . waitForCall ( session , SessionState . <RARE_TOKEN> , null ) ; </a> 
<a> statusRecorder . waitForCall ( session , SessionState . <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> assertTrue ( cache . <RARE_TOKEN> ( ) == null ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> statusRecorder . close ( ) ; </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> SessionStatusCallbackRecorder statusRecorder = new SessionStatusCallbackRecorder ( ) ; </a> 
<a> MockTokenCachingStrategy cache = new MockTokenCachingStrategy ( null , 0 ) ; </a> 
<a> <RARE_TOKEN> session = <RARE_TOKEN> ( cache ) ; </a> 
<a> try { </a> 
<a> session . <RARE_TOKEN> ( new Session . OpenRequest ( getActivity ( ) ) . setCallback ( statusRecorder ) . </a> 
<a> <RARE_TOKEN> ( Arrays . asList ( new String [ ] { <RARE_TOKEN> } ) ) ) ; </a> 
<a> fail ( <RARE_TOKEN> not <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> an <RARE_TOKEN> ) ; </a> 
<a> } catch ( FacebookException e ) { </a> 
<a> assertTrue ( e . getMessage ( ) . contains ( <RARE_TOKEN> <RARE_TOKEN> a <RARE_TOKEN> or <RARE_TOKEN> <RARE_TOKEN> ) ) ; </a> 
<a> } finally { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> statusRecorder . close ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> ArrayList < String > permissions = new ArrayList < String > ( ) ; </a> 
<a> SessionStatusCallbackRecorder statusRecorder = new SessionStatusCallbackRecorder ( ) ; </a> 
<a> MockTokenCachingStrategy cache = new MockTokenCachingStrategy ( null , 0 ) ; </a> 
<a> <RARE_TOKEN> session = <RARE_TOKEN> ( cache ) ; </a> 
<a> final AccessToken <RARE_TOKEN> = AccessToken </a> 
<a> . <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> , permissions , AccessTokenSource . <RARE_TOKEN> ) ; </a> 
<a> permissions . add ( <RARE_TOKEN> ) ; </a> 
<a> session . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> session . <RARE_TOKEN> ( new Session . OpenRequest ( getActivity ( ) ) . setCallback ( statusRecorder ) ) ; </a> 
<a> statusRecorder . waitForCall ( session , SessionState . <RARE_TOKEN> , null ) ; </a> 
<a> statusRecorder . waitForCall ( session , SessionState . <RARE_TOKEN> , null ) ; </a> 
<a> <RARE_TOKEN> ( session , <RARE_TOKEN> ) ; </a> 
<a> assertTrue ( cache . <RARE_TOKEN> ( ) != null ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> . getToken ( ) , TokenCachingStrategy . getToken ( cache . <RARE_TOKEN> ( ) ) ) ; </a> 
<a> final AccessToken <RARE_TOKEN> = AccessToken . <RARE_TOKEN> ( </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> , permissions , AccessTokenSource . <RARE_TOKEN> ) ; </a> 
<a> permissions . add ( <RARE_TOKEN> ) ; </a> 
<a> session . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> session . <RARE_TOKEN> ( new Session . <RARE_TOKEN> ( getActivity ( ) , permissions ) ) ; </a> 
<a> statusRecorder . waitForCall ( session , SessionState . <RARE_TOKEN> , null ) ; </a> 
<a> <RARE_TOKEN> ( session , <RARE_TOKEN> ) ; </a> 
<a> assertTrue ( cache . <RARE_TOKEN> ( ) != null ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> . getToken ( ) , TokenCachingStrategy . getToken ( cache . <RARE_TOKEN> ( ) ) ) ; </a> 
<a> final Exception <RARE_TOKEN> = new Exception ( <RARE_TOKEN> run <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> permissions . add ( <RARE_TOKEN> ) ; </a> 
<a> session . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> session . <RARE_TOKEN> ( new Session . <RARE_TOKEN> ( getActivity ( ) , permissions ) ) ; </a> 
<a> statusRecorder . waitForCall ( session , SessionState . <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> assertTrue ( cache . <RARE_TOKEN> ( ) != null ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> . getToken ( ) , TokenCachingStrategy . getToken ( cache . <RARE_TOKEN> ( ) ) ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> statusRecorder . close ( ) ; </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> ArrayList < String > permissions = new ArrayList < String > ( ) ; </a> 
<a> SessionStatusCallbackRecorder statusRecorder = new SessionStatusCallbackRecorder ( ) ; </a> 
<a> MockTokenCachingStrategy cache = new MockTokenCachingStrategy ( null , 0 ) ; </a> 
<a> <RARE_TOKEN> session = <RARE_TOKEN> ( cache ) ; </a> 
<a> final AccessToken <RARE_TOKEN> = AccessToken </a> 
<a> . <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> , permissions , AccessTokenSource . <RARE_TOKEN> ) ; </a> 
<a> permissions . add ( <RARE_TOKEN> ) ; </a> 
<a> session . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> session . <RARE_TOKEN> ( new Session . OpenRequest ( getActivity ( ) ) . setCallback ( statusRecorder ) ) ; </a> 
<a> statusRecorder . waitForCall ( session , SessionState . <RARE_TOKEN> , null ) ; </a> 
<a> statusRecorder . waitForCall ( session , SessionState . <RARE_TOKEN> , null ) ; </a> 
<a> <RARE_TOKEN> ( session , <RARE_TOKEN> ) ; </a> 
<a> assertTrue ( cache . <RARE_TOKEN> ( ) != null ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> . getToken ( ) , TokenCachingStrategy . getToken ( cache . <RARE_TOKEN> ( ) ) ) ; </a> 
<a> final AccessToken <RARE_TOKEN> = AccessToken . <RARE_TOKEN> ( </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> , permissions , AccessTokenSource . <RARE_TOKEN> ) ; </a> 
<a> permissions . add ( <RARE_TOKEN> ) ; </a> 
<a> session . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> session . <RARE_TOKEN> ( new Session . <RARE_TOKEN> ( getActivity ( ) , permissions ) ) ; </a> 
<a> statusRecorder . waitForCall ( session , SessionState . <RARE_TOKEN> , null ) ; </a> 
<a> <RARE_TOKEN> ( session , <RARE_TOKEN> ) ; </a> 
<a> assertTrue ( cache . <RARE_TOKEN> ( ) != null ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> . getToken ( ) , TokenCachingStrategy . getToken ( cache . <RARE_TOKEN> ( ) ) ) ; </a> 
<a> permissions . add ( <RARE_TOKEN> ) ; </a> 
<a> try { </a> 
<a> session . <RARE_TOKEN> ( new Session . <RARE_TOKEN> ( getActivity ( ) , permissions ) ) ; </a> 
<a> fail ( <RARE_TOKEN> not <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> an <RARE_TOKEN> ) ; </a> 
<a> } catch ( FacebookException e ) { </a> 
<a> assertTrue ( e . getMessage ( ) . contains ( <RARE_TOKEN> <RARE_TOKEN> a <RARE_TOKEN> or <RARE_TOKEN> <RARE_TOKEN> ) ) ; </a> 
<a> } finally { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> statusRecorder . close ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> String token = <RARE_TOKEN> is a <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> Date <RARE_TOKEN> = new Date ( new Date ( ) . getTime ( ) + <RARE_TOKEN> * 1000 ) ; </a> 
<a> Date <RARE_TOKEN> = new Date ( ) ; </a> 
<a> List < String > permissions = Arrays . asList ( new String [ ] { <RARE_TOKEN> , <RARE_TOKEN> } ) ; </a> 
<a> MockTokenCachingStrategy cache = new MockTokenCachingStrategy ( null , 0 ) ; </a> 
<a> SessionStatusCallbackRecorder statusRecorder = new SessionStatusCallbackRecorder ( ) ; </a> 
<a> <RARE_TOKEN> session = <RARE_TOKEN> ( cache ) ; </a> 
<a> assertEquals ( SessionState . <RARE_TOKEN> , session . <RARE_TOKEN> ( ) ) ; </a> 
<a> AccessToken accessToken = AccessToken . <RARE_TOKEN> ( token , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> AccessTokenSource . <RARE_TOKEN> , permissions ) ; </a> 
<a> session . open ( accessToken , statusRecorder ) ; </a> 
<a> statusRecorder . waitForCall ( session , SessionState . <RARE_TOKEN> , null ) ; </a> 
<a> AccessToken <RARE_TOKEN> = new AccessToken ( token , <RARE_TOKEN> , permissions , </a> 
<a> AccessTokenSource . <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( session , <RARE_TOKEN> ) ; </a> 
<a> session . close ( ) ; </a> 
<a> statusRecorder . waitForCall ( session , SessionState . <RARE_TOKEN> , null ) ; </a> 
<a> assertTrue ( cache . <RARE_TOKEN> ( ) != null ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> . getToken ( ) , TokenCachingStrategy . getToken ( cache . <RARE_TOKEN> ( ) ) ) ; </a> 
<a> session . <RARE_TOKEN> ( ) ; </a> 
<a> assertTrue ( cache . <RARE_TOKEN> ( ) == null ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> statusRecorder . close ( ) ; </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> String token = <RARE_TOKEN> is a <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> MockTokenCachingStrategy cache = new MockTokenCachingStrategy ( null , 0 ) ; </a> 
<a> SessionStatusCallbackRecorder statusRecorder = new SessionStatusCallbackRecorder ( ) ; </a> 
<a> <RARE_TOKEN> session = <RARE_TOKEN> ( cache ) ; </a> 
<a> assertEquals ( SessionState . <RARE_TOKEN> , session . <RARE_TOKEN> ( ) ) ; </a> 
<a> AccessToken accessToken = AccessToken . <RARE_TOKEN> ( token , null , null , null , null ) ; </a> 
<a> session . open ( accessToken , statusRecorder ) ; </a> 
<a> statusRecorder . waitForCall ( session , SessionState . <RARE_TOKEN> , null ) ; </a> 
<a> assertEquals ( token , session . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertEquals ( new Date ( Long . MAX_VALUE ) , session . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertEquals ( 0 , session . getPermissions ( ) . size ( ) ) ; </a> 
<a> session . close ( ) ; </a> 
<a> statusRecorder . waitForCall ( session , SessionState . <RARE_TOKEN> , null ) ; </a> 
<a> assertTrue ( cache . <RARE_TOKEN> ( ) != null ) ; </a> 
<a> session . <RARE_TOKEN> ( ) ; </a> 
<a> assertTrue ( cache . <RARE_TOKEN> ( ) == null ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> statusRecorder . close ( ) ; </a> 
<a> } </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> TestSession session = openTestSessionWithSharedUser ( ) ; </a> 
<a> session . <RARE_TOKEN> ( true ) ; </a> 
<a> Request request = Request . <RARE_TOKEN> ( session , null ) ; </a> 
<a> request . <RARE_TOKEN> ( ) ; </a> 
<a> assertTrue ( session . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> TestSession session = openTestSessionWithSharedUser ( ) ; </a> 
<a> session . <RARE_TOKEN> ( true ) ; </a> 
<a> session . <RARE_TOKEN> ( ) ; </a> 
<a> Request request = Request . <RARE_TOKEN> ( session , null ) ; </a> 
<a> request . <RARE_TOKEN> ( ) ; </a> 
<a> assertFalse ( session . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) throws IOException , <RARE_TOKEN> { </a> 
<a> Session <RARE_TOKEN> = new Session . Builder ( getActivity ( ) ) . <RARE_TOKEN> ( <RARE_TOKEN> ) . build ( ) ; </a> 
<a> Session <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> assertNotNull ( <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> Session . AuthorizationRequest <RARE_TOKEN> = </a> 
<a> new Session . OpenRequest ( getActivity ( ) ) . </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) . </a> 
<a> <RARE_TOKEN> ( SessionLoginBehavior . <RARE_TOKEN> ) ; </a> 
<a> Session . AuthorizationRequest <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> . <RARE_TOKEN> ( ) , <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> . <RARE_TOKEN> ( ) , <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> String token = <RARE_TOKEN> token <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> Intent intent = new Intent ( Intent . <RARE_TOKEN> ) ; </a> 
<a> intent . <RARE_TOKEN> ( <RARE_TOKEN> ( token ) ) ; </a> 
<a> SessionStatusCallbackRecorder statusRecorder = new SessionStatusCallbackRecorder ( ) ; </a> 
<a> MockTokenCachingStrategy cache = new MockTokenCachingStrategy ( null , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> session = <RARE_TOKEN> ( cache ) ; </a> 
<a> assertEquals ( SessionState . <RARE_TOKEN> , session . <RARE_TOKEN> ( ) ) ; </a> 
<a> AccessToken accessToken = AccessToken . <RARE_TOKEN> ( intent ) ; </a> 
<a> assertNotNull ( accessToken ) ; </a> 
<a> session . open ( accessToken , statusRecorder ) ; </a> 
<a> statusRecorder . waitForCall ( session , SessionState . <RARE_TOKEN> , null ) ; </a> 
<a> assertEquals ( token , session . <RARE_TOKEN> ( ) ) ; </a> 
<a> long <RARE_TOKEN> = session . <RARE_TOKEN> ( ) . getTime ( ) - new Date ( ) . getTime ( ) ; </a> 
<a> assertTrue ( Math . <RARE_TOKEN> ( <RARE_TOKEN> - <RARE_TOKEN> * 1000 ) < <RARE_TOKEN> ) ; </a> 
<a> assertEquals ( 0 , session . getPermissions ( ) . size ( ) ) ; </a> 
<a> assertEquals ( Utility . <RARE_TOKEN> ( getActivity ( ) ) , session . <RARE_TOKEN> ( ) ) ; </a> 
<a> session . close ( ) ; </a> 
<a> statusRecorder . waitForCall ( session , SessionState . <RARE_TOKEN> , null ) ; </a> 
<a> assertFalse ( cache . <RARE_TOKEN> ( ) == null ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> statusRecorder . close ( ) ; </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> Session <RARE_TOKEN> = Session . getActiveSession ( ) ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( getActivity ( ) ) ; </a> 
<a> assertEquals ( 0 , <RARE_TOKEN> . <RARE_TOKEN> ( ) . size ( ) ) ; </a> 
<a> String token = <RARE_TOKEN> token <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> Intent intent = new Intent ( Intent . <RARE_TOKEN> ) ; </a> 
<a> intent . <RARE_TOKEN> ( <RARE_TOKEN> ( token ) ) ; </a> 
<a> SessionStatusCallbackRecorder statusRecorder = new SessionStatusCallbackRecorder ( ) ; </a> 
<a> AccessToken accessToken = AccessToken . <RARE_TOKEN> ( intent ) ; </a> 
<a> assertNotNull ( accessToken ) ; </a> 
<a> Session session = Session . <RARE_TOKEN> ( getActivity ( ) , accessToken , statusRecorder ) ; </a> 
<a> assertEquals ( session , Session . getActiveSession ( ) ) ; </a> 
<a> statusRecorder . waitForCall ( session , SessionState . <RARE_TOKEN> , null ) ; </a> 
<a> <RARE_TOKEN> ( 0 , <RARE_TOKEN> . <RARE_TOKEN> ( ) . size ( ) ) ; </a> 
<a> assertEquals ( token , session . <RARE_TOKEN> ( ) ) ; </a> 
<a> long <RARE_TOKEN> = session . <RARE_TOKEN> ( ) . getTime ( ) - new Date ( ) . getTime ( ) ; </a> 
<a> assertTrue ( Math . <RARE_TOKEN> ( <RARE_TOKEN> - <RARE_TOKEN> * 1000 ) < <RARE_TOKEN> ) ; </a> 
<a> assertEquals ( 0 , session . getPermissions ( ) . size ( ) ) ; </a> 
<a> assertEquals ( Utility . <RARE_TOKEN> ( getActivity ( ) ) , session . <RARE_TOKEN> ( ) ) ; </a> 
<a> session . close ( ) ; </a> 
<a> statusRecorder . waitForCall ( session , SessionState . <RARE_TOKEN> , null ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> statusRecorder . close ( ) ; </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> ArrayList < String > permissions = new ArrayList < String > ( ) ; </a> 
<a> MockTokenCachingStrategy cache = new MockTokenCachingStrategy ( null , 0 ) ; </a> 
<a> SessionStatusCallbackRecorder statusRecorder = new SessionStatusCallbackRecorder ( ) ; </a> 
<a> <RARE_TOKEN> session = <RARE_TOKEN> ( cache ) ; </a> 
<a> AccessToken <RARE_TOKEN> = AccessToken </a> 
<a> . <RARE_TOKEN> ( <RARE_TOKEN> token of <RARE_TOKEN> , permissions , AccessTokenSource . <RARE_TOKEN> ) ; </a> 
<a> assertEquals ( SessionState . <RARE_TOKEN> , session . <RARE_TOKEN> ( ) ) ; </a> 
<a> session . <RARE_TOKEN> ( ) ; </a> 
<a> session . <RARE_TOKEN> ( new Session . OpenRequest ( getActivity ( ) ) . setCallback ( statusRecorder ) ) ; </a> 
<a> session . <RARE_TOKEN> ( new Session . OpenRequest ( getActivity ( ) ) . setCallback ( statusRecorder ) ) ; </a> 
<a> statusRecorder . waitForCall ( session , SessionState . <RARE_TOKEN> , null ) ; </a> 
<a> statusRecorder . waitForCall ( session , SessionState . <RARE_TOKEN> , new UnsupportedOperationException ( ) ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> statusRecorder . close ( ) ; </a> 
<a> } </a> 
<a> static <RARE_TOKEN> <RARE_TOKEN> ( String ... <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> filter = new <RARE_TOKEN> ( ) ; </a> 
<a> for ( String action : <RARE_TOKEN> ) { </a> 
<a> filter . <RARE_TOKEN> ( action ) ; </a> 
<a> } </a> 
<a> return filter ; </a> 
<a> } </a> 
<a> static <RARE_TOKEN> <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ( Session . <RARE_TOKEN> , Session . <RARE_TOKEN> , </a> 
<a> Session . <RARE_TOKEN> , Session . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( Session session , AccessToken token ) { </a> 
<a> assertEquals ( token . getToken ( ) , session . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertEquals ( token . <RARE_TOKEN> ( ) , session . <RARE_TOKEN> ( ) ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( token . getPermissions ( ) , session . getPermissions ( ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package com . facebook ; </a> 
<a> import android . os . <RARE_TOKEN> ; </a> 
<a> import android . test . <RARE_TOKEN> ; </a> 
<a> import android . test . suitebuilder . annotation . LargeTest ; </a> 
<a> import android . test . suitebuilder . annotation . MediumTest ; </a> 
<a> import android . test . suitebuilder . annotation . SmallTest ; </a> 
<a> import java . util . concurrent . <RARE_TOKEN> ; </a> 
<a> public final class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> @ SmallTest @ MediumTest @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> final <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) . execute ( new Runnable ( ) { </a> 
<a> @ Override </a> 
<a> public void run ( ) { </a> 
<a> <RARE_TOKEN> . open ( ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> boolean success = <RARE_TOKEN> . block ( <RARE_TOKEN> ) ; </a> 
<a> assertTrue ( success ) ; </a> 
<a> } </a> 
<a> @ SmallTest @ MediumTest @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> final <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( ) ; </a> 
<a> final Runnable <RARE_TOKEN> = new Runnable ( ) { </a> 
<a> @ Override </a> 
<a> public void run ( ) { } </a> 
<a> } ; </a> 
<a> final <RARE_TOKEN> executor = new <RARE_TOKEN> ( ) { </a> 
<a> @ Override </a> 
<a> public void execute ( Runnable command ) { </a> 
<a> assertEquals ( <RARE_TOKEN> , command ) ; </a> 
<a> command . run ( ) ; </a> 
<a> <RARE_TOKEN> . open ( ) ; </a> 
<a> } </a> 
<a> } ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> try { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( executor ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) . execute ( <RARE_TOKEN> ) ; </a> 
<a> boolean success = <RARE_TOKEN> . block ( <RARE_TOKEN> ) ; </a> 
<a> assertTrue ( success ) ; </a> 
<a> } finally { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package com . facebook ; </a> 
<a> import android . os . Bundle ; </a> 
<a> import android . test . <RARE_TOKEN> ; </a> 
<a> import android . test . suitebuilder . annotation . LargeTest ; </a> 
<a> import android . test . suitebuilder . annotation . MediumTest ; </a> 
<a> import android . test . suitebuilder . annotation . SmallTest ; </a> 
<a> import com . facebook . internal . Utility ; </a> 
<a> import junit . <RARE_TOKEN> . Assert ; </a> 
<a> import java . lang . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import java . util . * ; </a> 
<a> public final class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static Random random = new Random ( ( new Date ( ) ) . getTime ( ) ) ; </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> Bundle originalBundle = new Bundle ( ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> , originalBundle ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> , originalBundle ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> , originalBundle ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> , originalBundle ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> , originalBundle ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> , originalBundle ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> , originalBundle ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> , originalBundle ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> , originalBundle ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> , originalBundle ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> , originalBundle ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> , originalBundle ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> , originalBundle ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> , originalBundle ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> , originalBundle ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> , originalBundle ) ; </a> 
<a> putString ( <RARE_TOKEN> , originalBundle ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> , originalBundle ) ; </a> 
<a> originalBundle . <RARE_TOKEN> ( <RARE_TOKEN> , AccessTokenSource . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> cache = new <RARE_TOKEN> ( getContext ( ) ) ; </a> 
<a> cache . <RARE_TOKEN> ( originalBundle ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( getContext ( ) ) ; </a> 
<a> Bundle <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> Assert . assertEquals ( originalBundle . <RARE_TOKEN> ( <RARE_TOKEN> ) , <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ) ; </a> 
<a> <RARE_TOKEN> ( originalBundle . <RARE_TOKEN> ( <RARE_TOKEN> ) , <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ) ; </a> 
<a> Assert . assertEquals ( originalBundle . getByte ( <RARE_TOKEN> ) , <RARE_TOKEN> . getByte ( <RARE_TOKEN> ) ) ; </a> 
<a> <RARE_TOKEN> ( originalBundle . <RARE_TOKEN> ( <RARE_TOKEN> ) , <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ) ; </a> 
<a> Assert . assertEquals ( originalBundle . <RARE_TOKEN> ( <RARE_TOKEN> ) , <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ) ; </a> 
<a> <RARE_TOKEN> ( originalBundle . <RARE_TOKEN> ( <RARE_TOKEN> ) , <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ) ; </a> 
<a> Assert . assertEquals ( originalBundle . getInt ( <RARE_TOKEN> ) , <RARE_TOKEN> . getInt ( <RARE_TOKEN> ) ) ; </a> 
<a> <RARE_TOKEN> ( originalBundle . <RARE_TOKEN> ( <RARE_TOKEN> ) , <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ) ; </a> 
<a> Assert . assertEquals ( originalBundle . getLong ( <RARE_TOKEN> ) , <RARE_TOKEN> . getLong ( <RARE_TOKEN> ) ) ; </a> 
<a> <RARE_TOKEN> ( originalBundle . <RARE_TOKEN> ( <RARE_TOKEN> ) , <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ) ; </a> 
<a> Assert . assertEquals ( originalBundle . <RARE_TOKEN> ( <RARE_TOKEN> ) , <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ) ; </a> 
<a> <RARE_TOKEN> ( originalBundle . <RARE_TOKEN> ( <RARE_TOKEN> ) , <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ) ; </a> 
<a> Assert . assertEquals ( originalBundle . <RARE_TOKEN> ( <RARE_TOKEN> ) , <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ) ; </a> 
<a> <RARE_TOKEN> ( originalBundle . <RARE_TOKEN> ( <RARE_TOKEN> ) , <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ) ; </a> 
<a> Assert . assertEquals ( originalBundle . <RARE_TOKEN> ( <RARE_TOKEN> ) , <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ) ; </a> 
<a> <RARE_TOKEN> ( originalBundle . <RARE_TOKEN> ( <RARE_TOKEN> ) , <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ) ; </a> 
<a> Assert . assertEquals ( originalBundle . getString ( <RARE_TOKEN> ) , <RARE_TOKEN> . getString ( <RARE_TOKEN> ) ) ; </a> 
<a> <RARE_TOKEN> ( originalBundle . <RARE_TOKEN> ( <RARE_TOKEN> ) , <RARE_TOKEN> . <RARE_TOKEN> ( </a> 
<a> <RARE_TOKEN> ) ) ; </a> 
<a> Assert . assertEquals ( originalBundle . <RARE_TOKEN> ( <RARE_TOKEN> ) , </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> Bundle <RARE_TOKEN> = new Bundle ( ) , <RARE_TOKEN> = new Bundle ( ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> , 10 ) ; </a> 
<a> <RARE_TOKEN> . putString ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . putString ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( getContext ( ) ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( getContext ( ) , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = new <RARE_TOKEN> ( getContext ( ) , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = new <RARE_TOKEN> ( getContext ( ) ) ; </a> 
<a> Bundle <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( ) , <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> Assert . assertEquals ( <RARE_TOKEN> . getInt ( <RARE_TOKEN> ) , <RARE_TOKEN> . getInt ( <RARE_TOKEN> ) ) ; </a> 
<a> Assert . assertEquals ( <RARE_TOKEN> . getString ( <RARE_TOKEN> ) , <RARE_TOKEN> . getString ( <RARE_TOKEN> ) ) ; </a> 
<a> Assert . assertEquals ( <RARE_TOKEN> . getInt ( <RARE_TOKEN> ) , <RARE_TOKEN> . getInt ( <RARE_TOKEN> ) ) ; </a> 
<a> Assert . assertEquals ( <RARE_TOKEN> . getString ( <RARE_TOKEN> ) , <RARE_TOKEN> . getString ( <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> ArrayList < String > permissions = Utility . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> String token = <RARE_TOKEN> ; </a> 
<a> Date <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> Date <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( - <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> cache = new <RARE_TOKEN> ( getContext ( ) ) ; </a> 
<a> cache . clear ( ) ; </a> 
<a> Bundle bundle = new Bundle ( ) ; </a> 
<a> TokenCachingStrategy . <RARE_TOKEN> ( bundle , token ) ; </a> 
<a> TokenCachingStrategy . <RARE_TOKEN> ( bundle , <RARE_TOKEN> ) ; </a> 
<a> TokenCachingStrategy . <RARE_TOKEN> ( bundle , AccessTokenSource . <RARE_TOKEN> ) ; </a> 
<a> TokenCachingStrategy . <RARE_TOKEN> ( bundle , <RARE_TOKEN> ) ; </a> 
<a> TokenCachingStrategy . <RARE_TOKEN> ( bundle , permissions ) ; </a> 
<a> cache . <RARE_TOKEN> ( bundle ) ; </a> 
<a> bundle = cache . <RARE_TOKEN> ( ) ; </a> 
<a> AccessToken accessToken = AccessToken . <RARE_TOKEN> ( bundle ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( permissions , accessToken ) ; </a> 
<a> assertEquals ( token , accessToken . getToken ( ) ) ; </a> 
<a> assertEquals ( AccessTokenSource . <RARE_TOKEN> , accessToken . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertTrue ( ! accessToken . <RARE_TOKEN> ( ) ) ; </a> 
<a> Bundle <RARE_TOKEN> = accessToken . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( bundle , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> private static void <RARE_TOKEN> ( Object <RARE_TOKEN> , Object <RARE_TOKEN> ) { </a> 
<a> Assert . assertNotNull ( <RARE_TOKEN> ) ; </a> 
<a> Assert . assertNotNull ( <RARE_TOKEN> ) ; </a> 
<a> Assert . assertEquals ( <RARE_TOKEN> . getClass ( ) , <RARE_TOKEN> . getClass ( ) ) ; </a> 
<a> Assert . assertTrue ( <RARE_TOKEN> an <RARE_TOKEN> , <RARE_TOKEN> . getClass ( ) . <RARE_TOKEN> ( ) ) ; </a> 
<a> int length = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> Assert . assertEquals ( length , <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ) ; </a> 
<a> for ( int i = 0 ; i < length ; i ++ ) { </a> 
<a> Object <RARE_TOKEN> = <RARE_TOKEN> . get ( <RARE_TOKEN> , i ) ; </a> 
<a> Object <RARE_TOKEN> = <RARE_TOKEN> . get ( <RARE_TOKEN> , i ) ; </a> 
<a> Assert . assertEquals ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private static void <RARE_TOKEN> ( List < ? > <RARE_TOKEN> , List < ? > <RARE_TOKEN> ) { </a> 
<a> Assert . assertNotNull ( <RARE_TOKEN> ) ; </a> 
<a> Assert . assertNotNull ( <RARE_TOKEN> ) ; </a> 
<a> Iterator < ? > <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( ) , <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> while ( <RARE_TOKEN> . <RARE_TOKEN> ( ) && <RARE_TOKEN> . <RARE_TOKEN> ( ) ) { </a> 
<a> Assert . assertEquals ( <RARE_TOKEN> . next ( ) , <RARE_TOKEN> . next ( ) ) ; </a> 
<a> } </a> 
<a> Assert . assertTrue ( <RARE_TOKEN> not of the <RARE_TOKEN> <RARE_TOKEN> , ! <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> Assert . assertTrue ( <RARE_TOKEN> not of the <RARE_TOKEN> <RARE_TOKEN> , ! <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> private static void <RARE_TOKEN> ( String key , Bundle bundle ) { </a> 
<a> bundle . <RARE_TOKEN> ( key , random . nextInt ( ) ) ; </a> 
<a> } </a> 
<a> private static void <RARE_TOKEN> ( String key , Bundle bundle ) { </a> 
<a> int length = random . nextInt ( <RARE_TOKEN> ) ; </a> 
<a> int [ ] array = new int [ length ] ; </a> 
<a> for ( int i = 0 ; i < length ; i ++ ) { </a> 
<a> array [ i ] = random . nextInt ( ) ; </a> 
<a> } </a> 
<a> bundle . <RARE_TOKEN> ( key , array ) ; </a> 
<a> } </a> 
<a> private static void <RARE_TOKEN> ( String key , Bundle bundle ) { </a> 
<a> bundle . <RARE_TOKEN> ( key , ( short ) random . nextInt ( ) ) ; </a> 
<a> } </a> 
<a> private static void <RARE_TOKEN> ( String key , Bundle bundle ) { </a> 
<a> int length = random . nextInt ( <RARE_TOKEN> ) ; </a> 
<a> short [ ] array = new short [ length ] ; </a> 
<a> for ( int i = 0 ; i < length ; i ++ ) { </a> 
<a> array [ i ] = ( short ) random . nextInt ( ) ; </a> 
<a> } </a> 
<a> bundle . <RARE_TOKEN> ( key , array ) ; </a> 
<a> } </a> 
<a> private static void <RARE_TOKEN> ( String key , Bundle bundle ) { </a> 
<a> bundle . <RARE_TOKEN> ( key , ( byte ) random . nextInt ( ) ) ; </a> 
<a> } </a> 
<a> private static void <RARE_TOKEN> ( String key , Bundle bundle ) { </a> 
<a> int length = random . nextInt ( <RARE_TOKEN> ) ; </a> 
<a> byte [ ] array = new byte [ length ] ; </a> 
<a> random . <RARE_TOKEN> ( array ) ; </a> 
<a> bundle . <RARE_TOKEN> ( key , array ) ; </a> 
<a> } </a> 
<a> private static void <RARE_TOKEN> ( String key , Bundle bundle ) { </a> 
<a> bundle . <RARE_TOKEN> ( key , random . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> private static void <RARE_TOKEN> ( String key , Bundle bundle ) { </a> 
<a> int length = random . nextInt ( <RARE_TOKEN> ) ; </a> 
<a> boolean [ ] array = new boolean [ length ] ; </a> 
<a> for ( int i = 0 ; i < length ; i ++ ) { </a> 
<a> array [ i ] = random . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> bundle . <RARE_TOKEN> ( key , array ) ; </a> 
<a> } </a> 
<a> private static void <RARE_TOKEN> ( String key , Bundle bundle ) { </a> 
<a> bundle . <RARE_TOKEN> ( key , random . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> private static void <RARE_TOKEN> ( String key , Bundle bundle ) { </a> 
<a> int length = random . nextInt ( <RARE_TOKEN> ) ; </a> 
<a> long [ ] array = new long [ length ] ; </a> 
<a> for ( int i = 0 ; i < length ; i ++ ) { </a> 
<a> array [ i ] = random . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> bundle . <RARE_TOKEN> ( key , array ) ; </a> 
<a> } </a> 
<a> private static void <RARE_TOKEN> ( String key , Bundle bundle ) { </a> 
<a> bundle . <RARE_TOKEN> ( key , random . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> private static void <RARE_TOKEN> ( String key , Bundle bundle ) { </a> 
<a> int length = random . nextInt ( <RARE_TOKEN> ) ; </a> 
<a> float [ ] array = new float [ length ] ; </a> 
<a> for ( int i = 0 ; i < length ; i ++ ) { </a> 
<a> array [ i ] = random . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> bundle . <RARE_TOKEN> ( key , array ) ; </a> 
<a> } </a> 
<a> private static void <RARE_TOKEN> ( String key , Bundle bundle ) { </a> 
<a> bundle . <RARE_TOKEN> ( key , random . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> private static void <RARE_TOKEN> ( String key , Bundle bundle ) { </a> 
<a> int length = random . nextInt ( <RARE_TOKEN> ) ; </a> 
<a> double [ ] array = new double [ length ] ; </a> 
<a> for ( int i = 0 ; i < length ; i ++ ) { </a> 
<a> array [ i ] = random . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> bundle . <RARE_TOKEN> ( key , array ) ; </a> 
<a> } </a> 
<a> private static void <RARE_TOKEN> ( String key , Bundle bundle ) { </a> 
<a> bundle . <RARE_TOKEN> ( key , <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> private static void <RARE_TOKEN> ( String key , Bundle bundle ) { </a> 
<a> bundle . <RARE_TOKEN> ( key , <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> private static void putString ( String key , Bundle bundle ) { </a> 
<a> bundle . putString ( key , new String ( <RARE_TOKEN> ( ) ) ) ; </a> 
<a> } </a> 
<a> private static void <RARE_TOKEN> ( String key , Bundle bundle ) { </a> 
<a> int length = random . nextInt ( <RARE_TOKEN> ) ; </a> 
<a> ArrayList < String > <RARE_TOKEN> = new ArrayList < String > ( length ) ; </a> 
<a> while ( 0 < length -- ) { </a> 
<a> if ( length == 0 ) { </a> 
<a> <RARE_TOKEN> . add ( null ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> . add ( new String ( <RARE_TOKEN> ( ) ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> bundle . <RARE_TOKEN> ( key , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> private static char [ ] <RARE_TOKEN> ( ) { </a> 
<a> int length = random . nextInt ( <RARE_TOKEN> ) ; </a> 
<a> char [ ] array = new char [ length ] ; </a> 
<a> for ( int i = 0 ; i < length ; i ++ ) { </a> 
<a> array [ i ] = <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> return array ; </a> 
<a> } </a> 
<a> private static char <RARE_TOKEN> ( ) { </a> 
<a> return ( char ) random . nextInt ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( ) { </a> 
<a> long <RARE_TOKEN> = 0 ; </a> 
<a> try { </a> 
<a> while ( getContext ( ) . <RARE_TOKEN> ( ) == null && <RARE_TOKEN> <= <RARE_TOKEN> ) { </a> 
<a> Thread . sleep ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> += <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<a> catch ( InterruptedException e ) { </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package com . facebook ; </a> 
<a> import android . os . Handler ; </a> 
<a> import android . os . <RARE_TOKEN> ; </a> 
<a> public class TestBlocker extends <RARE_TOKEN> { </a> 
<a> private Exception exception ; </a> 
<a> public int <RARE_TOKEN> ; </a> 
<a> private volatile Handler handler ; </a> 
<a> private TestBlocker ( ) { </a> 
<a> super ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public synchronized static TestBlocker <RARE_TOKEN> ( ) { </a> 
<a> TestBlocker blocker = new TestBlocker ( ) ; </a> 
<a> blocker . start ( ) ; </a> 
<a> synchronized ( blocker ) { </a> 
<a> while ( blocker . handler == null ) { </a> 
<a> try { </a> 
<a> blocker . <RARE_TOKEN> ( ) ; </a> 
<a> } catch ( InterruptedException e ) { </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> return blocker ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void run ( ) { </a> 
<a> try { </a> 
<a> super . run ( ) ; </a> 
<a> } catch ( Exception e ) { </a> 
<a> <RARE_TOKEN> ( e ) ; </a> 
<a> } </a> 
<a> synchronized ( this ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public Handler <RARE_TOKEN> ( ) { </a> 
<a> return handler ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( ) throws Exception { </a> 
<a> Exception e = <RARE_TOKEN> ( ) ; </a> 
<a> if ( e != null ) { </a> 
<a> throw e ; </a> 
<a> } </a> 
<a> } </a> 
<a> public synchronized void <RARE_TOKEN> ( ) { </a> 
<a> ++ <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( int <RARE_TOKEN> ) throws Exception { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> ( null ) ; </a> 
<a> synchronized ( this ) { </a> 
<a> while ( <RARE_TOKEN> ( ) == null && <RARE_TOKEN> < <RARE_TOKEN> ) { </a> 
<a> try { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } catch ( InterruptedException e ) { </a> 
<a> } </a> 
<a> } </a> 
<a> <RARE_TOKEN> = 0 ; </a> 
<a> } </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( int <RARE_TOKEN> ) throws Exception { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> public synchronized Exception <RARE_TOKEN> ( ) { </a> 
<a> return exception ; </a> 
<a> } </a> 
<a> public synchronized void <RARE_TOKEN> ( Exception e ) { </a> 
<a> exception = e ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( ) { </a> 
<a> synchronized ( this ) { </a> 
<a> handler = new Handler ( <RARE_TOKEN> ( ) ) ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package com . facebook ; </a> 
<a> import android . os . Bundle ; </a> 
<a> import android . test . suitebuilder . annotation . LargeTest ; </a> 
<a> import android . test . suitebuilder . annotation . MediumTest ; </a> 
<a> import android . test . suitebuilder . annotation . SmallTest ; </a> 
<a> import org . json . JSONArray ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> TestSession session = TestSession . <RARE_TOKEN> ( getActivity ( ) , null ) ; </a> 
<a> assertTrue ( session != null ) ; </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> TestSession session = TestSession . <RARE_TOKEN> ( getActivity ( ) , null ) ; </a> 
<a> assertTrue ( session != null ) ; </a> 
<a> } </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) throws Throwable { </a> 
<a> final TestBlocker blocker = <RARE_TOKEN> ( ) ; </a> 
<a> TestSession session = <RARE_TOKEN> ( ) ; </a> 
<a> Session . OpenRequest openRequest = new Session . OpenRequest ( getActivity ( ) ) . </a> 
<a> setCallback ( </a> 
<a> new Session . StatusCallback ( ) { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( Session session , SessionState state , Exception exception ) { </a> 
<a> assertTrue ( exception == null ) ; </a> 
<a> blocker . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> session . <RARE_TOKEN> ( openRequest ) ; </a> 
<a> <RARE_TOKEN> ( blocker , 1 ) ; </a> 
<a> assertTrue ( session . <RARE_TOKEN> ( ) . isOpened ( ) ) ; </a> 
<a> } </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) throws Throwable { </a> 
<a> TestSession session = <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> ( getActivity ( ) , session ) ; </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> ( ) ; </a> 
<a> session = <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> ( getActivity ( ) , session ) ; </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> ( ) ; </a> 
<a> assertSame ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) throws Throwable { </a> 
<a> final TestBlocker blocker = <RARE_TOKEN> ( ) ; </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> ( ) ; </a> 
<a> TestSession session = <RARE_TOKEN> ( blocker ) ; </a> 
<a> <RARE_TOKEN> ( getActivity ( ) , session ) ; </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> ( ) ; </a> 
<a> assertSame ( <RARE_TOKEN> + 1 , <RARE_TOKEN> ) ; </a> 
<a> session . close ( ) ; </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> ( ) ; </a> 
<a> assertSame ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> try { </a> 
<a> TestSession . <RARE_TOKEN> ( "hello" ) ; </a> 
<a> TestSession . <RARE_TOKEN> ( "world" ) ; </a> 
<a> fail ( <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } catch ( FacebookException e ) { </a> 
<a> } </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> try { </a> 
<a> TestSession . <RARE_TOKEN> ( "hello" ) ; </a> 
<a> TestSession . <RARE_TOKEN> ( "world" ) ; </a> 
<a> fail ( <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } catch ( FacebookException e ) { </a> 
<a> } </a> 
<a> } </a> 
<a> private int <RARE_TOKEN> ( ) { </a> 
<a> TestSession session = <RARE_TOKEN> ( null ) ; </a> 
<a> String <RARE_TOKEN> = TestSession . <RARE_TOKEN> ( ) ; </a> 
<a> assertNotNull ( <RARE_TOKEN> ) ; </a> 
<a> String applicationId = session . <RARE_TOKEN> ( ) ; </a> 
<a> assertNotNull ( applicationId ) ; </a> 
<a> String <RARE_TOKEN> = String . format ( <RARE_TOKEN> id <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> = <RARE_TOKEN> , applicationId ) ; </a> 
<a> Bundle parameters = new Bundle ( ) ; </a> 
<a> parameters . putString ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> parameters . putString ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> Request request = new Request ( null , <RARE_TOKEN> , parameters , null ) ; </a> 
<a> Response response = request . <RARE_TOKEN> ( ) ; </a> 
<a> JSONArray data = ( JSONArray ) response . <RARE_TOKEN> ( ) . getProperty ( <RARE_TOKEN> ) ; </a> 
<a> return data . length ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package com . facebook ; </a> 
<a> import android . os . Bundle ; </a> 
<a> import junit . <RARE_TOKEN> . Assert ; </a> 
<a> import java . io . * ; </a> 
<a> import java . util . Date ; </a> 
<a> import java . util . List ; </a> 
<a> public class <RARE_TOKEN> { </a> 
<a> public static < T extends Serializable > T <RARE_TOKEN> ( T t ) { </a> 
<a> try { </a> 
<a> <RARE_TOKEN> os = new <RARE_TOKEN> ( ) ; </a> 
<a> new <RARE_TOKEN> ( os ) . <RARE_TOKEN> ( t ) ; </a> 
<a> <RARE_TOKEN> is = new <RARE_TOKEN> ( os . <RARE_TOKEN> ( ) ) ; </a> 
<a> @ SuppressWarnings ( "unchecked" ) </a> 
<a> T <RARE_TOKEN> = ( T ) ( new <RARE_TOKEN> ( is ) ) . <RARE_TOKEN> ( ) ; </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } catch ( IOException e ) { </a> 
<a> throw new <RARE_TOKEN> ( e ) ; </a> 
<a> } catch ( <RARE_TOKEN> e ) { </a> 
<a> throw new <RARE_TOKEN> ( e ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> static Date <RARE_TOKEN> ( long offset ) { </a> 
<a> return new Date ( new Date ( ) . getTime ( ) + ( offset * <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> static void <RARE_TOKEN> ( List < String > expected , AccessToken <RARE_TOKEN> ) { </a> 
<a> if ( expected == null ) { </a> 
<a> Assert . assertEquals ( null , <RARE_TOKEN> . getPermissions ( ) ) ; </a> 
<a> } else { </a> 
<a> for ( String p : expected ) { </a> 
<a> Assert . assertTrue ( <RARE_TOKEN> . getPermissions ( ) . contains ( p ) ) ; </a> 
<a> } </a> 
<a> for ( String p : <RARE_TOKEN> . getPermissions ( ) ) { </a> 
<a> Assert . assertTrue ( expected . contains ( p ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> static void <RARE_TOKEN> ( List < String > expected , List < String > <RARE_TOKEN> ) { </a> 
<a> if ( expected == null ) { </a> 
<a> Assert . assertEquals ( null , <RARE_TOKEN> ) ; </a> 
<a> } else { </a> 
<a> for ( String p : expected ) { </a> 
<a> Assert . assertTrue ( <RARE_TOKEN> . contains ( p ) ) ; </a> 
<a> } </a> 
<a> for ( String p : <RARE_TOKEN> ) { </a> 
<a> Assert . assertTrue ( expected . contains ( p ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> static void <RARE_TOKEN> ( List < String > expected , List < String > <RARE_TOKEN> ) { </a> 
<a> if ( expected != null ) { </a> 
<a> for ( String p : expected ) { </a> 
<a> Assert . assertTrue ( <RARE_TOKEN> . contains ( p ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> static void <RARE_TOKEN> ( Bundle a , Bundle b ) { </a> 
<a> for ( String key : a . <RARE_TOKEN> ( ) ) { </a> 
<a> if ( ! b . containsKey ( key ) ) { </a> 
<a> Assert . fail ( <RARE_TOKEN> <RARE_TOKEN> not <RARE_TOKEN> key " + key ) ; </a> 
<a> } </a> 
<a> Assert . assertEquals ( a . get ( key ) , b . get ( key ) ) ; </a> 
<a> } </a> 
<a> for ( String key : b . <RARE_TOKEN> ( ) ) { </a> 
<a> if ( ! a . containsKey ( key ) ) { </a> 
<a> Assert . fail ( <RARE_TOKEN> <RARE_TOKEN> not <RARE_TOKEN> key " + key ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package com . facebook . internal ; </a> 
<a> import android . test . <RARE_TOKEN> ; </a> 
<a> import android . test . suitebuilder . annotation . LargeTest ; </a> 
<a> import android . test . suitebuilder . annotation . MediumTest ; </a> 
<a> import android . test . suitebuilder . annotation . SmallTest ; </a> 
<a> import java . io . <RARE_TOKEN> ; </a> 
<a> import java . io . IOException ; </a> 
<a> import java . io . InputStream ; </a> 
<a> import java . io . OutputStream ; </a> 
<a> import java . util . Random ; </a> 
<a> public final class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> private static final Random random = new Random ( ) ; </a> 
<a> @ SmallTest @ MediumTest @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) throws IOException { </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> byte [ ] data = <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> String key = "a" ; </a> 
<a> FileLruCache cache = new FileLruCache ( getContext ( ) , <RARE_TOKEN> , <RARE_TOKEN> ( 2 * <RARE_TOKEN> ) ) ; </a> 
<a> put ( cache , key , data ) ; </a> 
<a> <RARE_TOKEN> ( cache , key , data ) ; </a> 
<a> cache . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ SmallTest @ MediumTest @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) throws IOException { </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> byte [ ] data = <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> String key = "a" ; </a> 
<a> InputStream stream = new <RARE_TOKEN> ( data ) ; </a> 
<a> FileLruCache cache = new FileLruCache ( getContext ( ) , <RARE_TOKEN> , <RARE_TOKEN> ( 2 * <RARE_TOKEN> ) ) ; </a> 
<a> cache . <RARE_TOKEN> ( ) ; </a> 
<a> InputStream <RARE_TOKEN> = cache . <RARE_TOKEN> ( key , stream ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( cache , key , data ) ; </a> 
<a> } </a> 
<a> @ SmallTest @ MediumTest @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) throws IOException { </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> byte [ ] data = <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> String key = "a" ; </a> 
<a> FileLruCache cache = new FileLruCache ( getContext ( ) , <RARE_TOKEN> , <RARE_TOKEN> ( 2 * <RARE_TOKEN> ) ) ; </a> 
<a> cache . <RARE_TOKEN> ( ) ; </a> 
<a> put ( cache , key , data ) ; </a> 
<a> <RARE_TOKEN> ( cache , key , data ) ; </a> 
<a> cache . <RARE_TOKEN> ( ) ; </a> 
<a> assertEquals ( false , <RARE_TOKEN> ( cache , key ) ) ; </a> 
<a> assertEquals ( 0 , cache . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> @ SmallTest @ MediumTest @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) throws IOException { </a> 
<a> int count = 17 ; </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> int <RARE_TOKEN> = count * <RARE_TOKEN> ; </a> 
<a> byte [ ] data = <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> FileLruCache cache = new FileLruCache ( getContext ( ) , <RARE_TOKEN> , <RARE_TOKEN> ( 2 * <RARE_TOKEN> ) ) ; </a> 
<a> cache . <RARE_TOKEN> ( ) ; </a> 
<a> for ( int i = 0 ; i < count ; i ++ ) { </a> 
<a> put ( cache , i , data ) ; </a> 
<a> int <RARE_TOKEN> = ( i + 1 ) * <RARE_TOKEN> ; </a> 
<a> assertTrue ( cache . <RARE_TOKEN> ( ) > <RARE_TOKEN> ) ; </a> 
<a> assertTrue ( cache . <RARE_TOKEN> ( ) < 2 * <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> for ( int i = 0 ; i < count ; i ++ ) { </a> 
<a> String key = Integer . valueOf ( i ) . toString ( ) ; </a> 
<a> <RARE_TOKEN> ( cache , key , data ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ MediumTest @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) throws IOException { </a> 
<a> int count = <RARE_TOKEN> ; </a> 
<a> int <RARE_TOKEN> = 32 ; </a> 
<a> int <RARE_TOKEN> = count * <RARE_TOKEN> / 2 ; </a> 
<a> byte [ ] data = <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> FileLruCache cache = new FileLruCache ( getContext ( ) , <RARE_TOKEN> , <RARE_TOKEN> ( <RARE_TOKEN> ) ) ; </a> 
<a> cache . <RARE_TOKEN> ( ) ; </a> 
<a> for ( int i = 0 ; i < count ; i ++ ) { </a> 
<a> put ( cache , i , data ) ; </a> 
<a> int <RARE_TOKEN> = ( i + 1 ) * <RARE_TOKEN> ; </a> 
<a> assertTrue ( cache . <RARE_TOKEN> ( ) > Math . min ( <RARE_TOKEN> , <RARE_TOKEN> / 2 ) ) ; </a> 
<a> assertTrue ( cache . <RARE_TOKEN> ( ) < Math . min ( 2 * <RARE_TOKEN> , <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> boolean <RARE_TOKEN> = false ; </a> 
<a> boolean <RARE_TOKEN> = false ; </a> 
<a> for ( int i = 0 ; i < count ; i ++ ) { </a> 
<a> String key = Integer . valueOf ( i ) . toString ( ) ; </a> 
<a> if ( <RARE_TOKEN> ( cache , key ) ) { </a> 
<a> <RARE_TOKEN> = true ; </a> 
<a> <RARE_TOKEN> ( cache , key , data ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> = true ; </a> 
<a> } </a> 
<a> } </a> 
<a> assertEquals ( true , <RARE_TOKEN> ) ; </a> 
<a> assertEquals ( true , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ MediumTest @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) throws IOException { </a> 
<a> int count = <RARE_TOKEN> ; </a> 
<a> int <RARE_TOKEN> = 32 ; </a> 
<a> int <RARE_TOKEN> = count / 2 ; </a> 
<a> byte [ ] data = <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> FileLruCache cache = new FileLruCache ( getContext ( ) , <RARE_TOKEN> , <RARE_TOKEN> ( <RARE_TOKEN> ) ) ; </a> 
<a> cache . <RARE_TOKEN> ( ) ; </a> 
<a> for ( int i = 0 ; i < count ; i ++ ) { </a> 
<a> put ( cache , i , data ) ; </a> 
<a> } </a> 
<a> boolean <RARE_TOKEN> = false ; </a> 
<a> boolean <RARE_TOKEN> = false ; </a> 
<a> for ( int i = 0 ; i < count ; i ++ ) { </a> 
<a> if ( <RARE_TOKEN> ( cache , i ) ) { </a> 
<a> <RARE_TOKEN> = true ; </a> 
<a> <RARE_TOKEN> ( cache , i , data ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> = true ; </a> 
<a> } </a> 
<a> } </a> 
<a> assertEquals ( true , <RARE_TOKEN> ) ; </a> 
<a> assertEquals ( true , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) throws IOException , InterruptedException { </a> 
<a> int <RARE_TOKEN> = 10 ; </a> 
<a> int <RARE_TOKEN> = 5 ; </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> byte [ ] data = <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> FileLruCache cache = new FileLruCache ( getContext ( ) , <RARE_TOKEN> , <RARE_TOKEN> ( <RARE_TOKEN> + 1 ) ) ; </a> 
<a> cache . <RARE_TOKEN> ( ) ; </a> 
<a> for ( int i = 0 ; i < <RARE_TOKEN> ; i ++ ) { </a> 
<a> put ( cache , i , data ) ; </a> 
<a> } </a> 
<a> Thread . sleep ( 1000 ) ; </a> 
<a> for ( int i = 0 ; i < <RARE_TOKEN> ; i ++ ) { </a> 
<a> put ( cache , <RARE_TOKEN> + i , data ) ; </a> 
<a> Thread . sleep ( 1000 ) ; </a> 
<a> for ( int <RARE_TOKEN> = 0 ; <RARE_TOKEN> < <RARE_TOKEN> ; <RARE_TOKEN> ++ ) { </a> 
<a> <RARE_TOKEN> ( cache , <RARE_TOKEN> , data ) ; </a> 
<a> } </a> 
<a> Thread . sleep ( 1000 ) ; </a> 
<a> } </a> 
<a> for ( int i = 0 ; i < ( <RARE_TOKEN> - 1 ) ; i ++ ) { </a> 
<a> String key = Integer . valueOf ( <RARE_TOKEN> + i ) . toString ( ) ; </a> 
<a> assertEquals ( false , <RARE_TOKEN> ( cache , key ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) throws IOException , InterruptedException { </a> 
<a> final int count = 5 ; </a> 
<a> final int <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> final int <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> final int <RARE_TOKEN> = 10 ; </a> 
<a> final byte [ ] data = <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> final FileLruCache cache = new FileLruCache ( </a> 
<a> getContext ( ) , <RARE_TOKEN> , <RARE_TOKEN> ( count + 1 ) ) ; </a> 
<a> cache . <RARE_TOKEN> ( ) ; </a> 
<a> Runnable run = new Runnable ( ) { </a> 
<a> @ Override </a> 
<a> public void run ( ) { </a> 
<a> for ( int <RARE_TOKEN> = 0 ; <RARE_TOKEN> < <RARE_TOKEN> ; <RARE_TOKEN> ++ ) { </a> 
<a> for ( int i = 0 ; i < count ; i ++ ) { </a> 
<a> put ( cache , i , data ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } ; </a> 
<a> Thread [ ] <RARE_TOKEN> = new Thread [ <RARE_TOKEN> ] ; </a> 
<a> for ( int i = 0 ; i < <RARE_TOKEN> . length ; i ++ ) { </a> 
<a> <RARE_TOKEN> [ i ] = new Thread ( run ) ; </a> 
<a> } </a> 
<a> for ( Thread <RARE_TOKEN> : <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> . start ( ) ; </a> 
<a> } </a> 
<a> for ( Thread <RARE_TOKEN> : <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( 10 * 1000 , 0 ) ; </a> 
<a> } </a> 
<a> for ( int i = 0 ; i < count ; i ++ ) { </a> 
<a> <RARE_TOKEN> ( cache , i , data ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> byte [ ] <RARE_TOKEN> ( int n ) { </a> 
<a> byte [ ] bytes = new byte [ n ] ; </a> 
<a> random . <RARE_TOKEN> ( bytes ) ; </a> 
<a> return bytes ; </a> 
<a> } </a> 
<a> FileLruCache . <RARE_TOKEN> <RARE_TOKEN> ( int n ) { </a> 
<a> FileLruCache . <RARE_TOKEN> <RARE_TOKEN> = new FileLruCache . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( n ) ; </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> FileLruCache . <RARE_TOKEN> <RARE_TOKEN> ( int n ) { </a> 
<a> FileLruCache . <RARE_TOKEN> <RARE_TOKEN> = new FileLruCache . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( n ) ; </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> void put ( FileLruCache cache , int i , byte [ ] data ) { </a> 
<a> put ( cache , Integer . valueOf ( i ) . toString ( ) , data ) ; </a> 
<a> } </a> 
<a> void put ( FileLruCache cache , String key , byte [ ] data ) { </a> 
<a> try { </a> 
<a> OutputStream stream = cache . <RARE_TOKEN> ( key ) ; </a> 
<a> assertNotNull ( stream ) ; </a> 
<a> stream . write ( data ) ; </a> 
<a> stream . close ( ) ; </a> 
<a> } catch ( IOException e ) { </a> 
<a> assertNull ( e ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> void <RARE_TOKEN> ( FileLruCache cache , int i , byte [ ] expected ) { </a> 
<a> <RARE_TOKEN> ( cache , Integer . valueOf ( i ) . toString ( ) , expected ) ; </a> 
<a> } </a> 
<a> void <RARE_TOKEN> ( FileLruCache cache , String key , byte [ ] expected ) { </a> 
<a> try { </a> 
<a> InputStream stream = cache . get ( key ) ; </a> 
<a> assertNotNull ( stream ) ; </a> 
<a> <RARE_TOKEN> ( expected , stream ) ; </a> 
<a> stream . close ( ) ; </a> 
<a> } catch ( IOException e ) { </a> 
<a> assertNull ( e ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> boolean <RARE_TOKEN> ( FileLruCache cache , int i ) { </a> 
<a> return <RARE_TOKEN> ( cache , Integer . valueOf ( i ) . toString ( ) ) ; </a> 
<a> } </a> 
<a> boolean <RARE_TOKEN> ( FileLruCache cache , String key ) { </a> 
<a> InputStream stream = null ; </a> 
<a> try { </a> 
<a> stream = cache . get ( key ) ; </a> 
<a> } catch ( IOException e ) { </a> 
<a> assertNull ( e ) ; </a> 
<a> } </a> 
<a> return stream != null ; </a> 
<a> } </a> 
<a> void <RARE_TOKEN> ( byte [ ] expected , InputStream <RARE_TOKEN> ) { </a> 
<a> try { </a> 
<a> for ( int i = 0 ; i < expected . length ; i ++ ) { </a> 
<a> int b = <RARE_TOKEN> . read ( ) ; </a> 
<a> assertEquals ( ( ( int ) expected [ i ] ) & 0xff , b ) ; </a> 
<a> } </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> . read ( ) ; </a> 
<a> assertEquals ( - 1 , <RARE_TOKEN> ) ; </a> 
<a> } catch ( IOException e ) { </a> 
<a> assertNull ( e ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> void <RARE_TOKEN> ( InputStream stream ) { </a> 
<a> try { </a> 
<a> byte [ ] buffer = new byte [ <RARE_TOKEN> ] ; </a> 
<a> while ( stream . read ( buffer ) > - 1 ) { </a> 
<a> } </a> 
<a> stream . close ( ) ; </a> 
<a> } catch ( IOException e ) { </a> 
<a> assertNull ( e ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package com . facebook . internal ; </a> 
<a> import android . test . suitebuilder . annotation . LargeTest ; </a> 
<a> import android . test . suitebuilder . annotation . MediumTest ; </a> 
<a> import android . test . suitebuilder . annotation . SmallTest ; </a> 
<a> import com . facebook . * ; </a> 
<a> import com . facebook . internal . <RARE_TOKEN> ; </a> 
<a> import java . util . Collections ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> token of <RARE_TOKEN> ; </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) throws Exception { </a> 
<a> Session . <RARE_TOKEN> ( null ) ; </a> 
<a> final SessionStatusCallbackRecorder statusRecorder = </a> 
<a> new SessionStatusCallbackRecorder ( ) ; </a> 
<a> final MockTokenCachingStrategy cache = new MockTokenCachingStrategy ( null , 0 ) ; </a> 
<a> final <RARE_TOKEN> session = </a> 
<a> <RARE_TOKEN> ( cache ) ; </a> 
<a> session . <RARE_TOKEN> ( <RARE_TOKEN> , Collections . < String > <RARE_TOKEN> ( ) , AccessTokenSource . <RARE_TOKEN> ) ; </a> 
<a> final <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( getActivity ( ) , statusRecorder ) ; </a> 
<a> Session . <RARE_TOKEN> ( session ) ; </a> 
<a> session . <RARE_TOKEN> ( new Session . OpenRequest ( getActivity ( ) ) ) ; </a> 
<a> statusRecorder . waitForCall ( session , SessionState . <RARE_TOKEN> , null ) ; </a> 
<a> statusRecorder . waitForCall ( session , SessionState . <RARE_TOKEN> , null ) ; </a> 
<a> assertNotNull ( <RARE_TOKEN> <RARE_TOKEN> be <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( ) ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) . close ( ) ; </a> 
<a> statusRecorder . waitForCall ( session , SessionState . <RARE_TOKEN> , null ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> statusRecorder . close ( ) ; </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) throws Exception { </a> 
<a> final SessionStatusCallbackRecorder statusRecorder = </a> 
<a> new SessionStatusCallbackRecorder ( ) ; </a> 
<a> final MockTokenCachingStrategy cache = new MockTokenCachingStrategy ( null , 0 ) ; </a> 
<a> final <RARE_TOKEN> session = </a> 
<a> <RARE_TOKEN> ( cache ) ; </a> 
<a> session . <RARE_TOKEN> ( <RARE_TOKEN> , Collections . < String > <RARE_TOKEN> ( ) , AccessTokenSource . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( getActivity ( ) , statusRecorder , session ) ; </a> 
<a> session . <RARE_TOKEN> ( new Session . OpenRequest ( getActivity ( ) ) ) ; </a> 
<a> statusRecorder . waitForCall ( session , SessionState . <RARE_TOKEN> , null ) ; </a> 
<a> statusRecorder . waitForCall ( session , SessionState . <RARE_TOKEN> , null ) ; </a> 
<a> assertNotNull ( <RARE_TOKEN> <RARE_TOKEN> be <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( ) ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) . close ( ) ; </a> 
<a> statusRecorder . waitForCall ( session , SessionState . <RARE_TOKEN> , null ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> statusRecorder . close ( ) ; </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) throws Exception { </a> 
<a> Session . <RARE_TOKEN> ( null ) ; </a> 
<a> final SessionStatusCallbackRecorder statusRecorder = new SessionStatusCallbackRecorder ( ) ; </a> 
<a> final MockTokenCachingStrategy cache = new MockTokenCachingStrategy ( null , 0 ) ; </a> 
<a> final <RARE_TOKEN> session = <RARE_TOKEN> ( cache ) ; </a> 
<a> session . <RARE_TOKEN> ( <RARE_TOKEN> , Collections . < String > <RARE_TOKEN> ( ) , AccessTokenSource . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( getActivity ( ) , statusRecorder ) ; </a> 
<a> Session . <RARE_TOKEN> ( session ) ; </a> 
<a> session . <RARE_TOKEN> ( new Session . OpenRequest ( getActivity ( ) ) ) ; </a> 
<a> statusRecorder . waitForCall ( session , SessionState . <RARE_TOKEN> , null ) ; </a> 
<a> statusRecorder . waitForCall ( session , SessionState . <RARE_TOKEN> , null ) ; </a> 
<a> assertNotNull ( <RARE_TOKEN> <RARE_TOKEN> be <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( ) ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) . close ( ) ; </a> 
<a> statusRecorder . waitForCall ( session , SessionState . <RARE_TOKEN> , null ) ; </a> 
<a> final <RARE_TOKEN> <RARE_TOKEN> = <RARE_TOKEN> ( cache ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> , Collections . < String > <RARE_TOKEN> ( ) , AccessTokenSource . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> assertNull ( <RARE_TOKEN> <RARE_TOKEN> not be <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( new Session . OpenRequest ( getActivity ( ) ) ) ; </a> 
<a> statusRecorder . waitForCall ( <RARE_TOKEN> , SessionState . <RARE_TOKEN> , null ) ; </a> 
<a> statusRecorder . waitForCall ( <RARE_TOKEN> , SessionState . <RARE_TOKEN> , null ) ; </a> 
<a> assertNotNull ( <RARE_TOKEN> <RARE_TOKEN> be <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( ) ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) . close ( ) ; </a> 
<a> statusRecorder . waitForCall ( <RARE_TOKEN> , SessionState . <RARE_TOKEN> , null ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> statusRecorder . close ( ) ; </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) throws Exception { </a> 
<a> Session . <RARE_TOKEN> ( null ) ; </a> 
<a> final SessionStatusCallbackRecorder statusRecorder = new SessionStatusCallbackRecorder ( ) ; </a> 
<a> final MockTokenCachingStrategy cache = new MockTokenCachingStrategy ( null , 0 ) ; </a> 
<a> final <RARE_TOKEN> session = <RARE_TOKEN> ( cache ) ; </a> 
<a> session . <RARE_TOKEN> ( <RARE_TOKEN> , Collections . < String > <RARE_TOKEN> ( ) , AccessTokenSource . <RARE_TOKEN> ) ; </a> 
<a> final <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( getActivity ( ) , statusRecorder , session ) ; </a> 
<a> session . <RARE_TOKEN> ( new Session . OpenRequest ( getActivity ( ) ) ) ; </a> 
<a> statusRecorder . waitForCall ( session , SessionState . <RARE_TOKEN> , null ) ; </a> 
<a> statusRecorder . waitForCall ( session , SessionState . <RARE_TOKEN> , null ) ; </a> 
<a> assertNotNull ( <RARE_TOKEN> <RARE_TOKEN> be <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( ) ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) . close ( ) ; </a> 
<a> statusRecorder . waitForCall ( session , SessionState . <RARE_TOKEN> , null ) ; </a> 
<a> final <RARE_TOKEN> <RARE_TOKEN> = <RARE_TOKEN> ( cache ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> , Collections . < String > <RARE_TOKEN> ( ) , AccessTokenSource . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( new Runnable ( ) { </a> 
<a> public void run ( ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( null ) ; </a> 
<a> Session . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } , true ) ; </a> 
<a> assertNull ( <RARE_TOKEN> <RARE_TOKEN> not be <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( new Session . OpenRequest ( getActivity ( ) ) ) ; </a> 
<a> statusRecorder . waitForCall ( <RARE_TOKEN> , SessionState . <RARE_TOKEN> , null ) ; </a> 
<a> statusRecorder . waitForCall ( <RARE_TOKEN> , SessionState . <RARE_TOKEN> , null ) ; </a> 
<a> assertNotNull ( <RARE_TOKEN> <RARE_TOKEN> be <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( ) ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) . close ( ) ; </a> 
<a> statusRecorder . waitForCall ( <RARE_TOKEN> , SessionState . <RARE_TOKEN> , null ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> statusRecorder . close ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package com . facebook . internal ; </a> 
<a> import android . test . <RARE_TOKEN> ; </a> 
<a> import android . test . suitebuilder . annotation . SmallTest ; </a> 
<a> import com . facebook . internal . Validate ; </a> 
<a> import java . util . Arrays ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> @ SmallTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> Validate . <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> , "name" ) ; </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> try { </a> 
<a> Validate . <RARE_TOKEN> ( null , "name" ) ; </a> 
<a> fail ( <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } catch ( Exception e ) { </a> 
<a> } </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> Validate . <RARE_TOKEN> ( Arrays . asList ( new String [ ] { <RARE_TOKEN> } ) , "name" ) ; </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> try { </a> 
<a> Validate . <RARE_TOKEN> ( Arrays . asList ( new String [ ] { } ) , "name" ) ; </a> 
<a> fail ( <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } catch ( Exception e ) { </a> 
<a> } </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> Validate . <RARE_TOKEN> ( <RARE_TOKEN> , "name" ) ; </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> try { </a> 
<a> Validate . <RARE_TOKEN> ( "" , "name" ) ; </a> 
<a> fail ( <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } catch ( Exception e ) { </a> 
<a> } </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> try { </a> 
<a> Validate . <RARE_TOKEN> ( null , "name" ) ; </a> 
<a> fail ( <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } catch ( Exception e ) { </a> 
<a> } </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> Validate . <RARE_TOKEN> ( <RARE_TOKEN> , "name" , <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> try { </a> 
<a> Validate . <RARE_TOKEN> ( <RARE_TOKEN> , "name" , <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> fail ( <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } catch ( Exception e ) { </a> 
<a> } </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> Validate . <RARE_TOKEN> ( null , "name" , <RARE_TOKEN> , <RARE_TOKEN> , null ) ; </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> try { </a> 
<a> Validate . <RARE_TOKEN> ( null , "name" , <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> fail ( <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } catch ( Exception e ) { </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package com . facebook . model ; </a> 
<a> import android . test . <RARE_TOKEN> ; </a> 
<a> import android . test . suitebuilder . annotation . LargeTest ; </a> 
<a> import android . test . suitebuilder . annotation . MediumTest ; </a> 
<a> import android . test . suitebuilder . annotation . SmallTest ; </a> 
<a> import com . facebook . <RARE_TOKEN> ; </a> 
<a> import junit . <RARE_TOKEN> . Assert ; </a> 
<a> import org . json . JSONArray ; </a> 
<a> import org . json . JSONException ; </a> 
<a> import org . json . JSONObject ; </a> 
<a> import java . util . * ; </a> 
<a> import java . util . Map . Entry ; </a> 
<a> public final class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> GraphObject graphObject = GraphObject . Factory . create ( ) ; </a> 
<a> assertTrue ( graphObject != null ) ; </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> GraphObject graphObject = GraphObject . Factory . create ( ) ; </a> 
<a> graphObject . setProperty ( "hello" , "world" ) ; </a> 
<a> assertEquals ( "world" , ( String ) graphObject . <RARE_TOKEN> ( ) . get ( "hello" ) ) ; </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> GraphPlace <RARE_TOKEN> = GraphObject . Factory . create ( GraphPlace . class ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( "hello" ) ; </a> 
<a> assertEquals ( "hello" , <RARE_TOKEN> . getName ( ) ) ; </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> GraphUser <RARE_TOKEN> = GraphObject . Factory . create ( GraphUser . class ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , <RARE_TOKEN> . getProperty ( <RARE_TOKEN> ) ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> ( ) . get ( <RARE_TOKEN> ) ) ; </a> 
<a> <RARE_TOKEN> . setProperty ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , <RARE_TOKEN> . getProperty ( <RARE_TOKEN> ) ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> ( ) . get ( <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> GraphObject graphObject = GraphObject . Factory . create ( ) ; </a> 
<a> graphObject . setProperty ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> GraphUser <RARE_TOKEN> = graphObject . cast ( GraphUser . class ) ; </a> 
<a> assertTrue ( <RARE_TOKEN> != null ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , graphObject . getProperty ( <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> interface <RARE_TOKEN> extends GraphObject { </a> 
<a> } </a> 
<a> interface <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = GraphObject . Factory . create ( <RARE_TOKEN> . class ) ; </a> 
<a> <RARE_TOKEN> cast = <RARE_TOKEN> . cast ( <RARE_TOKEN> . class ) ; </a> 
<a> assertTrue ( <RARE_TOKEN> == cast ) ; </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = GraphObject . Factory . create ( <RARE_TOKEN> . class ) ; </a> 
<a> <RARE_TOKEN> cast = <RARE_TOKEN> . cast ( <RARE_TOKEN> . class ) ; </a> 
<a> assertTrue ( <RARE_TOKEN> == cast ) ; </a> 
<a> cast = cast . cast ( <RARE_TOKEN> . class ) ; </a> 
<a> assertTrue ( <RARE_TOKEN> == cast ) ; </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = GraphObject . Factory . create ( <RARE_TOKEN> . class ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> GraphPlace <RARE_TOKEN> = GraphObject . Factory . create ( GraphPlace . class ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) throws JSONException { </a> 
<a> JSONObject <RARE_TOKEN> = new JSONObject ( ) ; </a> 
<a> <RARE_TOKEN> . put ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . put ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> JSONObject <RARE_TOKEN> = new JSONObject ( ) ; </a> 
<a> <RARE_TOKEN> . put ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . put ( "name" , <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> GraphPlace <RARE_TOKEN> = GraphObject . Factory . create ( <RARE_TOKEN> , GraphPlace . class ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) throws JSONException { </a> 
<a> GraphObject graphObject = GraphObject . Factory . create ( ) ; </a> 
<a> graphObject . setProperty ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> graphObject . setProperty ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> JSONObject <RARE_TOKEN> = new JSONObject ( ) ; </a> 
<a> <RARE_TOKEN> . put ( <RARE_TOKEN> , graphObject ) ; </a> 
<a> <RARE_TOKEN> . put ( "name" , <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> GraphPlace <RARE_TOKEN> = GraphObject . Factory . create ( <RARE_TOKEN> , GraphPlace . class ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> private abstract class <RARE_TOKEN> implements GraphObject { </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) throws JSONException { </a> 
<a> JSONObject jsonObject = new JSONObject ( ) ; </a> 
<a> jsonObject . put ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> jsonObject . put ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = GraphObject . Factory . create ( jsonObject , <RARE_TOKEN> . class ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertNotNull ( <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertTrue ( <RARE_TOKEN> . <RARE_TOKEN> ( ) . startsWith ( <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> private interface <RARE_TOKEN> extends GraphObject { </a> 
<a> String <RARE_TOKEN> ( ) ; </a> 
<a> String <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> try { </a> 
<a> GraphObject . Factory . create ( <RARE_TOKEN> . class ) ; </a> 
<a> fail ( <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } catch ( <RARE_TOKEN> exception ) { </a> 
<a> } </a> 
<a> } </a> 
<a> private interface <RARE_TOKEN> extends GraphObject { </a> 
<a> Object <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> try { </a> 
<a> GraphObject . Factory . create ( <RARE_TOKEN> . class ) ; </a> 
<a> fail ( <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } catch ( <RARE_TOKEN> exception ) { </a> 
<a> } </a> 
<a> } </a> 
<a> private interface <RARE_TOKEN> extends GraphObject { </a> 
<a> void <RARE_TOKEN> ( Object obj ) ; </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> try { </a> 
<a> GraphObject . Factory . create ( <RARE_TOKEN> . class ) ; </a> 
<a> fail ( <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } catch ( <RARE_TOKEN> exception ) { </a> 
<a> } </a> 
<a> } </a> 
<a> private interface <RARE_TOKEN> extends GraphObject { </a> 
<a> void get ( ) ; </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> try { </a> 
<a> GraphObject . Factory . create ( <RARE_TOKEN> . class ) ; </a> 
<a> fail ( <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } catch ( <RARE_TOKEN> exception ) { </a> 
<a> } </a> 
<a> } </a> 
<a> private interface <RARE_TOKEN> extends GraphObject { </a> 
<a> Object <RARE_TOKEN> ( Object obj ) ; </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> try { </a> 
<a> GraphObject . Factory . create ( <RARE_TOKEN> . class ) ; </a> 
<a> fail ( <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } catch ( <RARE_TOKEN> exception ) { </a> 
<a> } </a> 
<a> } </a> 
<a> private interface <RARE_TOKEN> extends GraphObject { </a> 
<a> void <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> try { </a> 
<a> GraphObject . Factory . create ( <RARE_TOKEN> . class ) ; </a> 
<a> fail ( <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } catch ( <RARE_TOKEN> exception ) { </a> 
<a> } </a> 
<a> } </a> 
<a> private interface <RARE_TOKEN> extends GraphObject { </a> 
<a> void set ( ) ; </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> try { </a> 
<a> GraphObject . Factory . create ( <RARE_TOKEN> . class ) ; </a> 
<a> fail ( <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } catch ( <RARE_TOKEN> exception ) { </a> 
<a> } </a> 
<a> } </a> 
<a> private interface <RARE_TOKEN> extends GraphObject { </a> 
<a> void <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> try { </a> 
<a> GraphObject . Factory . create ( <RARE_TOKEN> . class ) ; </a> 
<a> fail ( <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } catch ( <RARE_TOKEN> exception ) { </a> 
<a> } </a> 
<a> } </a> 
<a> private interface <RARE_TOKEN> extends GraphObject { </a> 
<a> Object <RARE_TOKEN> ( Object obj ) ; </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> try { </a> 
<a> GraphObject . Factory . create ( <RARE_TOKEN> . class ) ; </a> 
<a> fail ( <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } catch ( <RARE_TOKEN> exception ) { </a> 
<a> } </a> 
<a> } </a> 
<a> private interface <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> void <RARE_TOKEN> ( Object obj ) ; </a> 
<a> Object <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> try { </a> 
<a> GraphObject . Factory . create ( <RARE_TOKEN> . class ) ; </a> 
<a> fail ( <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } catch ( <RARE_TOKEN> exception ) { </a> 
<a> } </a> 
<a> } </a> 
<a> private interface <RARE_TOKEN> extends GraphObject { </a> 
<a> void <RARE_TOKEN> ( String s ) ; </a> 
<a> String <RARE_TOKEN> ( ) ; </a> 
<a> @ <RARE_TOKEN> ( <RARE_TOKEN> ) </a> 
<a> void <RARE_TOKEN> ( String s ) ; </a> 
<a> @ <RARE_TOKEN> ( <RARE_TOKEN> ) </a> 
<a> String <RARE_TOKEN> ( ) ; </a> 
<a> @ <RARE_TOKEN> ( <RARE_TOKEN> ) </a> 
<a> void <RARE_TOKEN> ( String s ) ; </a> 
<a> @ <RARE_TOKEN> ( <RARE_TOKEN> ) </a> 
<a> String <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> graphObject = </a> 
<a> GraphObject . Factory . create ( <RARE_TOKEN> . class ) ; </a> 
<a> String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> graphObject . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> Assert . assertEquals ( <RARE_TOKEN> , graphObject . <RARE_TOKEN> ( ) ) ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> + <RARE_TOKEN> ; </a> 
<a> graphObject . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> Assert . assertEquals ( <RARE_TOKEN> , graphObject . <RARE_TOKEN> ( ) ) ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> + <RARE_TOKEN> ; </a> 
<a> graphObject . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> Assert . assertEquals ( <RARE_TOKEN> , graphObject . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> private interface <RARE_TOKEN> extends GraphObject { </a> 
<a> @ <RARE_TOKEN> ( "" ) </a> 
<a> void <RARE_TOKEN> ( Object value ) ; </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> try { </a> 
<a> GraphObject . Factory . create ( <RARE_TOKEN> . class ) ; </a> 
<a> fail ( <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } catch ( <RARE_TOKEN> exception ) { </a> 
<a> } </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> GraphObject graphObject = GraphObject . Factory . create ( ) ; </a> 
<a> graphObject . setProperty ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> assertTrue ( graphObject . equals ( graphObject ) ) ; </a> 
<a> GraphPlace <RARE_TOKEN> = graphObject . cast ( GraphPlace . class ) ; </a> 
<a> assertTrue ( graphObject . equals ( <RARE_TOKEN> ) ) ; </a> 
<a> assertTrue ( <RARE_TOKEN> . equals ( graphObject ) ) ; </a> 
<a> GraphObject <RARE_TOKEN> = GraphObject . Factory . create ( ) ; </a> 
<a> <RARE_TOKEN> . setProperty ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> assertFalse ( graphObject . equals ( <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) throws JSONException { </a> 
<a> JSONObject jsonObject = new JSONObject ( ) ; </a> 
<a> jsonObject . put ( "hello" , "world" ) ; </a> 
<a> jsonObject . put ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> GraphObject graphObject = GraphObject . Factory . create ( jsonObject ) ; </a> 
<a> assertEquals ( "world" , graphObject . getProperty ( "hello" ) ) ; </a> 
<a> assertTrue ( graphObject . getProperty ( <RARE_TOKEN> ) == null ) ; </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) throws JSONException { </a> 
<a> JSONObject jsonObject = new JSONObject ( ) ; </a> 
<a> GraphObject graphObject = GraphObject . Factory . create ( jsonObject ) ; </a> 
<a> graphObject . setProperty ( "hello" , "world" ) ; </a> 
<a> graphObject . setProperty ( <RARE_TOKEN> <RARE_TOKEN> , <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> assertEquals ( "world" , jsonObject . getString ( "hello" ) ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> <RARE_TOKEN> , jsonObject . getString ( <RARE_TOKEN> <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) throws JSONException { </a> 
<a> JSONObject jsonObject = new JSONObject ( ) ; </a> 
<a> jsonObject . put ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> GraphObject graphObject = GraphObject . Factory . create ( jsonObject ) ; </a> 
<a> graphObject . setProperty ( "hello" , "world" ) ; </a> 
<a> graphObject . setProperty ( <RARE_TOKEN> <RARE_TOKEN> , <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> assertEquals ( "world" , jsonObject . getString ( "hello" ) ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> <RARE_TOKEN> , jsonObject . getString ( <RARE_TOKEN> <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) throws JSONException { </a> 
<a> JSONObject jsonObject = new JSONObject ( ) ; </a> 
<a> jsonObject . put ( "hello" , "world" ) ; </a> 
<a> GraphObject graphObject = GraphObject . Factory . create ( jsonObject ) ; </a> 
<a> assertEquals ( 1 , jsonObject . length ( ) ) ; </a> 
<a> graphObject . <RARE_TOKEN> ( ) . clear ( ) ; </a> 
<a> assertEquals ( 0 , jsonObject . length ( ) ) ; </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) throws JSONException { </a> 
<a> JSONObject jsonObject = new JSONObject ( ) ; </a> 
<a> jsonObject . put ( "hello" , "world" ) ; </a> 
<a> GraphObject graphObject = GraphObject . Factory . create ( jsonObject ) ; </a> 
<a> assertTrue ( graphObject . <RARE_TOKEN> ( ) . containsKey ( "hello" ) ) ; </a> 
<a> assertFalse ( graphObject . <RARE_TOKEN> ( ) . containsKey ( <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) throws JSONException { </a> 
<a> JSONObject jsonObject = new JSONObject ( ) ; </a> 
<a> jsonObject . put ( "hello" , "world" ) ; </a> 
<a> GraphObject graphObject = GraphObject . Factory . create ( jsonObject ) ; </a> 
<a> assertTrue ( graphObject . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( "world" ) ) ; </a> 
<a> assertFalse ( graphObject . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) throws JSONException { </a> 
<a> JSONObject jsonObject = new JSONObject ( ) ; </a> 
<a> jsonObject . put ( "hello" , "world" ) ; </a> 
<a> jsonObject . put ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> GraphObject graphObject = GraphObject . Factory . create ( jsonObject ) ; </a> 
<a> Set < Entry < String , Object > > <RARE_TOKEN> = graphObject . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> assertEquals ( 2 , <RARE_TOKEN> . size ( ) ) ; </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) throws JSONException { </a> 
<a> JSONObject jsonObject = new JSONObject ( ) ; </a> 
<a> jsonObject . put ( "hello" , "world" ) ; </a> 
<a> jsonObject . put ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> GraphObject graphObject = GraphObject . Factory . create ( jsonObject ) ; </a> 
<a> assertEquals ( "world" , graphObject . <RARE_TOKEN> ( ) . get ( "hello" ) ) ; </a> 
<a> assertTrue ( graphObject . getProperty ( <RARE_TOKEN> ) == null ) ; </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) throws JSONException { </a> 
<a> GraphUser <RARE_TOKEN> = GraphObject . Factory . create ( GraphUser . class ) ; </a> 
<a> assertNull ( <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) throws JSONException { </a> 
<a> JSONObject jsonObject = new JSONObject ( ) ; </a> 
<a> GraphObject graphObject = GraphObject . Factory . create ( jsonObject ) ; </a> 
<a> assertTrue ( graphObject . <RARE_TOKEN> ( ) . isEmpty ( ) ) ; </a> 
<a> jsonObject . put ( "hello" , "world" ) ; </a> 
<a> jsonObject . put ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> assertFalse ( graphObject . <RARE_TOKEN> ( ) . isEmpty ( ) ) ; </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) throws JSONException { </a> 
<a> JSONObject jsonObject = new JSONObject ( ) ; </a> 
<a> jsonObject . put ( "hello" , "world" ) ; </a> 
<a> jsonObject . put ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> GraphObject graphObject = GraphObject . Factory . create ( jsonObject ) ; </a> 
<a> Set < String > <RARE_TOKEN> = graphObject . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> assertEquals ( 2 , <RARE_TOKEN> . size ( ) ) ; </a> 
<a> assertTrue ( <RARE_TOKEN> . contains ( "hello" ) ) ; </a> 
<a> assertTrue ( <RARE_TOKEN> . contains ( <RARE_TOKEN> ) ) ; </a> 
<a> assertFalse ( <RARE_TOKEN> . contains ( "world" ) ) ; </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) throws JSONException { </a> 
<a> JSONObject jsonObject = new JSONObject ( ) ; </a> 
<a> GraphObject graphObject = GraphObject . Factory . create ( jsonObject ) ; </a> 
<a> graphObject . setProperty ( "hello" , "world" ) ; </a> 
<a> graphObject . setProperty ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , jsonObject . get ( <RARE_TOKEN> ) ) ; </a> 
<a> assertEquals ( 2 , jsonObject . length ( ) ) ; </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) throws JSONException { </a> 
<a> JSONObject jsonObject = new JSONObject ( ) ; </a> 
<a> GraphObject graphObject = GraphObject . Factory . create ( jsonObject ) ; </a> 
<a> graphObject . setProperty ( "hello" , "world" ) ; </a> 
<a> graphObject . setProperty ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> GraphObject <RARE_TOKEN> = GraphObject . Factory . create ( ) ; </a> 
<a> <RARE_TOKEN> . setProperty ( <RARE_TOKEN> , graphObject ) ; </a> 
<a> JSONObject <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> Object obj = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> assertNotNull ( obj ) ; </a> 
<a> assertEquals ( jsonObject , obj ) ; </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) throws JSONException { </a> 
<a> JSONArray jsonArray = new JSONArray ( ) ; </a> 
<a> GraphObjectList < String > <RARE_TOKEN> = GraphObject . Factory </a> 
<a> . <RARE_TOKEN> ( jsonArray , String . class ) ; </a> 
<a> <RARE_TOKEN> . add ( "hello" ) ; </a> 
<a> <RARE_TOKEN> . add ( "world" ) ; </a> 
<a> GraphObject <RARE_TOKEN> = GraphObject . Factory . create ( ) ; </a> 
<a> <RARE_TOKEN> . setProperty ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> JSONObject <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> Object obj = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> assertNotNull ( obj ) ; </a> 
<a> assertEquals ( jsonArray , obj ) ; </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) throws JSONException { </a> 
<a> HashMap < String , Object > map = new HashMap < String , Object > ( ) ; </a> 
<a> map . put ( "hello" , "world" ) ; </a> 
<a> map . put ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> JSONObject jsonObject = new JSONObject ( ) ; </a> 
<a> GraphObject graphObject = GraphObject . Factory . create ( jsonObject ) ; </a> 
<a> graphObject . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( map ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , jsonObject . get ( <RARE_TOKEN> ) ) ; </a> 
<a> assertEquals ( 2 , jsonObject . length ( ) ) ; </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) throws JSONException { </a> 
<a> JSONObject jsonObject = new JSONObject ( ) ; </a> 
<a> jsonObject . put ( "hello" , "world" ) ; </a> 
<a> jsonObject . put ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> GraphObject graphObject = GraphObject . Factory . create ( jsonObject ) ; </a> 
<a> graphObject . <RARE_TOKEN> ( "hello" ) ; </a> 
<a> assertEquals ( 1 , jsonObject . length ( ) ) ; </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) throws JSONException { </a> 
<a> JSONObject jsonObject = new JSONObject ( ) ; </a> 
<a> jsonObject . put ( "hello" , "world" ) ; </a> 
<a> jsonObject . put ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> GraphObject graphObject = GraphObject . Factory . create ( jsonObject ) ; </a> 
<a> assertEquals ( 2 , graphObject . <RARE_TOKEN> ( ) . size ( ) ) ; </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) throws JSONException { </a> 
<a> JSONObject jsonObject = new JSONObject ( ) ; </a> 
<a> jsonObject . put ( "hello" , "world" ) ; </a> 
<a> jsonObject . put ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> GraphObject graphObject = GraphObject . Factory . create ( jsonObject ) ; </a> 
<a> Collection < Object > values = graphObject . <RARE_TOKEN> ( ) . values ( ) ; </a> 
<a> assertEquals ( 2 , values . size ( ) ) ; </a> 
<a> assertTrue ( values . contains ( "world" ) ) ; </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) throws JSONException { </a> 
<a> JSONObject jsonObject = new JSONObject ( ) ; </a> 
<a> jsonObject . put ( "hello" , "world" ) ; </a> 
<a> jsonObject . put ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> GraphObject graphObject = GraphObject . Factory . create ( jsonObject ) ; </a> 
<a> assertEquals ( jsonObject , graphObject . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) throws JSONException { </a> 
<a> GraphPlace <RARE_TOKEN> = GraphObject . Factory . create ( GraphPlace . class ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = GraphObject . Factory . create ( <RARE_TOKEN> . class ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> . <RARE_TOKEN> ( ) , <RARE_TOKEN> . <RARE_TOKEN> ( ) . get ( <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> private interface <RARE_TOKEN> extends GraphObject { </a> 
<a> Date <RARE_TOKEN> ( ) ; </a> 
<a> Date <RARE_TOKEN> ( ) ; </a> 
<a> Date <RARE_TOKEN> ( ) ; </a> 
<a> Date <RARE_TOKEN> ( ) ; </a> 
<a> void <RARE_TOKEN> ( Date <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = GraphObject . Factory . create ( <RARE_TOKEN> . class ) ; </a> 
<a> <RARE_TOKEN> . setProperty ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . setProperty ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . setProperty ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> . set ( <RARE_TOKEN> . <RARE_TOKEN> , 0 ) ; </a> 
<a> <RARE_TOKEN> . set ( <RARE_TOKEN> , 6 , 4 , 0 , 0 , 0 ) ; </a> 
<a> Date <RARE_TOKEN> = <RARE_TOKEN> . getTime ( ) ; </a> 
<a> Date <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . set ( <RARE_TOKEN> , 6 , 4 , 19 , <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> Date <RARE_TOKEN> = <RARE_TOKEN> . getTime ( ) ; </a> 
<a> Date <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = new <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ) ; </a> 
<a> <RARE_TOKEN> . set ( <RARE_TOKEN> . <RARE_TOKEN> , 0 ) ; </a> 
<a> <RARE_TOKEN> . set ( <RARE_TOKEN> , 6 , 4 , 23 , 20 , <RARE_TOKEN> ) ; </a> 
<a> Date <RARE_TOKEN> = <RARE_TOKEN> . getTime ( ) ; </a> 
<a> Date <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . set ( <RARE_TOKEN> , 9 , 28 , 9 , <RARE_TOKEN> , 0 ) ; </a> 
<a> Date <RARE_TOKEN> = <RARE_TOKEN> . getTime ( ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> Date <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) throws JSONException { </a> 
<a> JSONArray array = new JSONArray ( ) ; </a> 
<a> Collection < Integer > collection = GraphObject . Factory . <RARE_TOKEN> ( array , Integer . class ) ; </a> 
<a> collection . add ( 5 ) ; </a> 
<a> assertTrue ( array . length ( ) == 1 ) ; </a> 
<a> assertTrue ( array . <RARE_TOKEN> ( 0 ) == 5 ) ; </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) throws JSONException { </a> 
<a> JSONArray array = new JSONArray ( ) ; </a> 
<a> Collection < Integer > <RARE_TOKEN> = Arrays . asList ( 5 , - 1 ) ; </a> 
<a> Collection < Integer > collection = GraphObject . Factory . <RARE_TOKEN> ( array , Integer . class ) ; </a> 
<a> collection . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> assertTrue ( array . length ( ) == 2 ) ; </a> 
<a> assertTrue ( array . <RARE_TOKEN> ( 0 ) == 5 ) ; </a> 
<a> assertTrue ( array . <RARE_TOKEN> ( 1 ) == - 1 ) ; </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) throws JSONException { </a> 
<a> JSONArray array = new JSONArray ( ) ; </a> 
<a> array . put ( 5 ) ; </a> 
<a> Collection < Integer > collection = GraphObject . Factory . <RARE_TOKEN> ( array , Integer . class ) ; </a> 
<a> assertTrue ( collection . contains ( 5 ) ) ; </a> 
<a> assertFalse ( collection . contains ( 6 ) ) ; </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) throws JSONException { </a> 
<a> JSONArray array = new JSONArray ( ) ; </a> 
<a> array . put ( 5 ) ; </a> 
<a> array . put ( - 1 ) ; </a> 
<a> Collection < Integer > collection = GraphObject . Factory . <RARE_TOKEN> ( array , Integer . class ) ; </a> 
<a> assertTrue ( collection . <RARE_TOKEN> ( Arrays . asList ( 5 ) ) ) ; </a> 
<a> assertTrue ( collection . <RARE_TOKEN> ( Arrays . asList ( 5 , - 1 ) ) ) ; </a> 
<a> assertFalse ( collection . <RARE_TOKEN> ( Arrays . asList ( 5 , - 1 , 2 ) ) ) ; </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) throws JSONException { </a> 
<a> JSONArray array = new JSONArray ( ) ; </a> 
<a> Collection < Integer > collection = GraphObject . Factory . <RARE_TOKEN> ( array , Integer . class ) ; </a> 
<a> assertTrue ( collection . isEmpty ( ) ) ; </a> 
<a> array . put ( 5 ) ; </a> 
<a> assertFalse ( collection . isEmpty ( ) ) ; </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) throws JSONException { </a> 
<a> JSONArray array = new JSONArray ( ) ; </a> 
<a> array . put ( 5 ) ; </a> 
<a> array . put ( - 1 ) ; </a> 
<a> Collection < Integer > collection = GraphObject . Factory . <RARE_TOKEN> ( array , Integer . class ) ; </a> 
<a> Iterator < Integer > <RARE_TOKEN> = collection . <RARE_TOKEN> ( ) ; </a> 
<a> assertTrue ( <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertTrue ( <RARE_TOKEN> . next ( ) == 5 ) ; </a> 
<a> assertTrue ( <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertTrue ( <RARE_TOKEN> . next ( ) == - 1 ) ; </a> 
<a> assertFalse ( <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> for ( Integer i : collection ) { </a> 
<a> <RARE_TOKEN> ( 0 , i ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) throws JSONException { </a> 
<a> Collection < <RARE_TOKEN> > collection = GraphObject . Factory . <RARE_TOKEN> ( <RARE_TOKEN> . class ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = GraphObject . Factory . create ( <RARE_TOKEN> . class ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> collection . add ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = GraphObject . Factory . create ( <RARE_TOKEN> . class ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> collection . add ( <RARE_TOKEN> ) ; </a> 
<a> Iterator < <RARE_TOKEN> > <RARE_TOKEN> = collection . <RARE_TOKEN> ( ) ; </a> 
<a> assertTrue ( <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , <RARE_TOKEN> . next ( ) ) ; </a> 
<a> assertTrue ( <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , <RARE_TOKEN> . next ( ) ) ; </a> 
<a> assertFalse ( <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> for ( <RARE_TOKEN> location : collection ) { </a> 
<a> assertTrue ( location != null ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) throws JSONException { </a> 
<a> JSONArray array = new JSONArray ( ) ; </a> 
<a> Collection < Integer > collection = GraphObject . Factory . <RARE_TOKEN> ( array , Integer . class ) ; </a> 
<a> assertEquals ( 0 , collection . size ( ) ) ; </a> 
<a> array . put ( 5 ) ; </a> 
<a> assertEquals ( 1 , collection . size ( ) ) ; </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) throws JSONException { </a> 
<a> try { </a> 
<a> Collection < Integer > collection = GraphObject . Factory . <RARE_TOKEN> ( Integer . class ) ; </a> 
<a> collection . clear ( ) ; </a> 
<a> fail ( <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } catch ( UnsupportedOperationException exception ) { </a> 
<a> } </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) throws JSONException { </a> 
<a> try { </a> 
<a> Collection < Integer > collection = GraphObject . Factory . <RARE_TOKEN> ( Integer . class ) ; </a> 
<a> collection . remove ( 5 ) ; </a> 
<a> fail ( <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } catch ( UnsupportedOperationException exception ) { </a> 
<a> } </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) throws JSONException { </a> 
<a> try { </a> 
<a> Collection < Integer > collection = GraphObject . Factory . <RARE_TOKEN> ( Integer . class ) ; </a> 
<a> collection . <RARE_TOKEN> ( Arrays . asList ( ) ) ; </a> 
<a> fail ( <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } catch ( UnsupportedOperationException exception ) { </a> 
<a> } </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) throws JSONException { </a> 
<a> try { </a> 
<a> Collection < Integer > collection = GraphObject . Factory . <RARE_TOKEN> ( Integer . class ) ; </a> 
<a> collection . <RARE_TOKEN> ( Arrays . asList ( ) ) ; </a> 
<a> fail ( <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } catch ( UnsupportedOperationException exception ) { </a> 
<a> } </a> 
<a> } </a> 
<a> private interface Locations extends GraphObject { </a> 
<a> Collection < <RARE_TOKEN> > <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) throws JSONException { </a> 
<a> JSONObject <RARE_TOKEN> = new JSONObject ( ) ; </a> 
<a> <RARE_TOKEN> . put ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> JSONArray jsonArray = new JSONArray ( ) ; </a> 
<a> jsonArray . put ( <RARE_TOKEN> ) ; </a> 
<a> JSONObject <RARE_TOKEN> = new JSONObject ( ) ; </a> 
<a> <RARE_TOKEN> . put ( <RARE_TOKEN> , jsonArray ) ; </a> 
<a> Locations <RARE_TOKEN> = GraphObject . Factory . create ( <RARE_TOKEN> , Locations . class ) ; </a> 
<a> Collection < <RARE_TOKEN> > <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> assertTrue ( <RARE_TOKEN> != null ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( ) . next ( ) ; </a> 
<a> assertTrue ( <RARE_TOKEN> != null ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) throws JSONException { </a> 
<a> GraphUser user = GraphObject . Factory . create ( GraphUser . class ) ; </a> 
<a> user . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> user . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> List < GraphUser > <RARE_TOKEN> = new ArrayList < GraphUser > ( ) ; </a> 
<a> <RARE_TOKEN> . add ( user ) ; </a> 
<a> <RARE_TOKEN> action = GraphObject . Factory . create ( <RARE_TOKEN> . class ) ; </a> 
<a> action . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> String json = action . <RARE_TOKEN> ( ) . toString ( ) ; </a> 
<a> assertTrue ( <RARE_TOKEN> string <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> , json . contains ( <RARE_TOKEN> ) ) ; </a> 
<a> Object <RARE_TOKEN> = action . <RARE_TOKEN> ( ) . get ( <RARE_TOKEN> ) ; </a> 
<a> assertNotNull ( <RARE_TOKEN> <RARE_TOKEN> not be <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> assertTrue ( <RARE_TOKEN> <RARE_TOKEN> be <RARE_TOKEN> , <RARE_TOKEN> instanceof JSONArray ) ; </a> 
<a> List < GraphObject > <RARE_TOKEN> = action . <RARE_TOKEN> ( ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> <RARE_TOKEN> be <RARE_TOKEN> , 1 , <RARE_TOKEN> . size ( ) ) ; </a> 
<a> GraphUser <RARE_TOKEN> = <RARE_TOKEN> . get ( 0 ) . cast ( GraphUser . class ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> name <RARE_TOKEN> be <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> name <RARE_TOKEN> be <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) throws JSONException { </a> 
<a> JSONObject <RARE_TOKEN> = new JSONObject ( ) ; </a> 
<a> <RARE_TOKEN> . put ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> JSONArray jsonArray = new JSONArray ( ) ; </a> 
<a> jsonArray . put ( <RARE_TOKEN> ) ; </a> 
<a> Collection < <RARE_TOKEN> > <RARE_TOKEN> = GraphObject . Factory </a> 
<a> . <RARE_TOKEN> ( jsonArray , </a> 
<a> <RARE_TOKEN> . class ) ; </a> 
<a> assertTrue ( <RARE_TOKEN> != null ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( ) . next ( ) ; </a> 
<a> assertTrue ( <RARE_TOKEN> != null ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) throws JSONException { </a> 
<a> try { </a> 
<a> GraphObjectList < Integer > collection = GraphObject . Factory . <RARE_TOKEN> ( Integer . class ) ; </a> 
<a> collection . <RARE_TOKEN> ( <RARE_TOKEN> . class ) ; </a> 
<a> fail ( <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } catch ( <RARE_TOKEN> exception ) { </a> 
<a> } </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) throws JSONException { </a> 
<a> JSONObject <RARE_TOKEN> = new JSONObject ( ) ; </a> 
<a> <RARE_TOKEN> . put ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> JSONArray jsonArray = new JSONArray ( ) ; </a> 
<a> jsonArray . put ( <RARE_TOKEN> ) ; </a> 
<a> GraphObjectList < GraphObject > collection = GraphObject . Factory </a> 
<a> . <RARE_TOKEN> ( jsonArray , GraphObject . class ) ; </a> 
<a> GraphObjectList < <RARE_TOKEN> > <RARE_TOKEN> = collection . <RARE_TOKEN> ( <RARE_TOKEN> . class ) ; </a> 
<a> assertTrue ( <RARE_TOKEN> != null ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( ) . next ( ) ; </a> 
<a> assertTrue ( <RARE_TOKEN> != null ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> GraphObjectList < <RARE_TOKEN> > <RARE_TOKEN> = GraphObject . Factory . <RARE_TOKEN> ( <RARE_TOKEN> . class ) ; </a> 
<a> GraphObjectList < <RARE_TOKEN> > cast = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> . class ) ; </a> 
<a> assertTrue ( <RARE_TOKEN> == cast ) ; </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> GraphObjectList < <RARE_TOKEN> > <RARE_TOKEN> = GraphObject . Factory . <RARE_TOKEN> ( <RARE_TOKEN> . class ) ; </a> 
<a> GraphObjectList < <RARE_TOKEN> > cast = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> . class ) ; </a> 
<a> assertTrue ( ( GraphObjectList < ? > ) <RARE_TOKEN> == ( GraphObjectList < ? > ) cast ) ; </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) throws JSONException { </a> 
<a> JSONArray jsonArray = new JSONArray ( ) ; </a> 
<a> GraphObjectList < GraphObject > collection = GraphObject . Factory </a> 
<a> . <RARE_TOKEN> ( jsonArray , GraphObject . class ) ; </a> 
<a> assertEquals ( jsonArray , collection . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) throws JSONException { </a> 
<a> JSONArray jsonArray = new JSONArray ( ) ; </a> 
<a> jsonArray . put ( <RARE_TOKEN> ) ; </a> 
<a> jsonArray . put ( <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> GraphObjectList < String > collection = GraphObject . Factory </a> 
<a> . <RARE_TOKEN> ( jsonArray , String . class ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> <RARE_TOKEN> , collection . get ( 1 ) ) ; </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) throws JSONException { </a> 
<a> JSONArray jsonArray = new JSONArray ( ) ; </a> 
<a> GraphObjectList < String > collection = GraphObject . Factory </a> 
<a> . <RARE_TOKEN> ( jsonArray , String . class ) ; </a> 
<a> collection . add ( <RARE_TOKEN> ) ; </a> 
<a> collection . add ( <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> collection . set ( 1 , <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> <RARE_TOKEN> , collection . get ( 1 ) ) ; </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) throws JSONException { </a> 
<a> JSONObject jsonObject = new JSONObject ( ) ; </a> 
<a> GraphObject graphObject = GraphObject . Factory . create ( jsonObject ) ; </a> 
<a> graphObject . setProperty ( "hello" , "world" ) ; </a> 
<a> graphObject . setProperty ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> GraphObjectList < GraphObject > <RARE_TOKEN> = GraphObject . Factory </a> 
<a> . <RARE_TOKEN> ( GraphObject . class ) ; </a> 
<a> <RARE_TOKEN> . add ( graphObject ) ; </a> 
<a> JSONArray jsonArray = <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> Object obj = jsonArray . <RARE_TOKEN> ( 0 ) ; </a> 
<a> assertNotNull ( obj ) ; </a> 
<a> assertEquals ( jsonObject , obj ) ; </a> 
<a> <RARE_TOKEN> . set ( 0 , graphObject ) ; </a> 
<a> obj = jsonArray . <RARE_TOKEN> ( 0 ) ; </a> 
<a> assertNotNull ( obj ) ; </a> 
<a> assertEquals ( jsonObject , obj ) ; </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> assertEquals ( <RARE_TOKEN> , GraphObject . Factory </a> 
<a> . <RARE_TOKEN> ( <RARE_TOKEN> ) ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , GraphObject . Factory </a> 
<a> . <RARE_TOKEN> ( <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package com . facebook . model ; </a> 
<a> import android . test . <RARE_TOKEN> ; </a> 
<a> import android . test . suitebuilder . annotation . LargeTest ; </a> 
<a> import android . test . suitebuilder . annotation . MediumTest ; </a> 
<a> import android . test . suitebuilder . annotation . SmallTest ; </a> 
<a> import org . json . JSONException ; </a> 
<a> import org . json . JSONObject ; </a> 
<a> import java . util . Collection ; </a> 
<a> import java . util . HashMap ; </a> 
<a> import java . util . Map . Entry ; </a> 
<a> import java . util . Set ; </a> 
<a> public final class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> @ SmallTest @ MediumTest @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) throws JSONException { </a> 
<a> JSONObject jsonObject = new JSONObject ( ) ; </a> 
<a> jsonObject . put ( "hello" , "world" ) ; </a> 
<a> jsonObject . put ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( jsonObject ) ; </a> 
<a> assertEquals ( 0 , jsonObject . length ( ) ) ; </a> 
<a> } </a> 
<a> @ SmallTest @ MediumTest @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) throws JSONException { </a> 
<a> JSONObject jsonObject = new JSONObject ( ) ; </a> 
<a> jsonObject . put ( "hello" , "world" ) ; </a> 
<a> jsonObject . put ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> assertTrue ( <RARE_TOKEN> . <RARE_TOKEN> ( jsonObject , <RARE_TOKEN> ) ) ; </a> 
<a> assertFalse ( <RARE_TOKEN> . <RARE_TOKEN> ( jsonObject , <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> @ SmallTest @ MediumTest @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) throws JSONException { </a> 
<a> JSONObject jsonObject = new JSONObject ( ) ; </a> 
<a> jsonObject . put ( "hello" , "world" ) ; </a> 
<a> jsonObject . put ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> Set < Entry < String , Object > > <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( jsonObject ) ; </a> 
<a> assertEquals ( 2 , <RARE_TOKEN> . size ( ) ) ; </a> 
<a> } </a> 
<a> @ SmallTest @ MediumTest @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) throws JSONException { </a> 
<a> JSONObject jsonObject = new JSONObject ( ) ; </a> 
<a> jsonObject . put ( "hello" , "world" ) ; </a> 
<a> jsonObject . put ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> Set < String > <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( jsonObject ) ; </a> 
<a> assertEquals ( 2 , <RARE_TOKEN> . size ( ) ) ; </a> 
<a> assertTrue ( <RARE_TOKEN> . contains ( "hello" ) ) ; </a> 
<a> assertFalse ( <RARE_TOKEN> . contains ( "world" ) ) ; </a> 
<a> } </a> 
<a> @ SmallTest @ MediumTest @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) throws JSONException { </a> 
<a> HashMap < String , Object > map = new HashMap < String , Object > ( ) ; </a> 
<a> map . put ( "hello" , "world" ) ; </a> 
<a> map . put ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> JSONObject jsonObject = new JSONObject ( ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( jsonObject , map ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , jsonObject . get ( <RARE_TOKEN> ) ) ; </a> 
<a> assertEquals ( 2 , jsonObject . length ( ) ) ; </a> 
<a> } </a> 
<a> @ SmallTest @ MediumTest @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) throws JSONException { </a> 
<a> JSONObject jsonObject = new JSONObject ( ) ; </a> 
<a> jsonObject . put ( "hello" , "world" ) ; </a> 
<a> jsonObject . put ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> Collection < Object > values = <RARE_TOKEN> . <RARE_TOKEN> ( jsonObject ) ; </a> 
<a> assertEquals ( 2 , values . size ( ) ) ; </a> 
<a> assertTrue ( values . contains ( "world" ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package com . facebook . widget ; </a> 
<a> import android . os . Bundle ; </a> 
<a> import android . support . v4 . app . <RARE_TOKEN> ; </a> 
<a> import android . support . v4 . app . <RARE_TOKEN> ; </a> 
<a> import android . widget . <RARE_TOKEN> ; </a> 
<a> import com . facebook . <RARE_TOKEN> ; </a> 
<a> public class <RARE_TOKEN> < T extends <RARE_TOKEN> . <RARE_TOKEN> < ? > > extends <RARE_TOKEN> < T > { </a> 
<a> public <RARE_TOKEN> ( Class < T > <RARE_TOKEN> ) { </a> 
<a> super ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> protected T <RARE_TOKEN> ( ) { </a> 
<a> return ( T ) getActivity ( ) ; </a> 
<a> } </a> 
<a> public static class <RARE_TOKEN> < T extends <RARE_TOKEN> > extends <RARE_TOKEN> { </a> 
<a> public static final int <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private Class < T > <RARE_TOKEN> ; </a> 
<a> private int <RARE_TOKEN> ; </a> 
<a> protected <RARE_TOKEN> ( Class < T > <RARE_TOKEN> ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void onCreate ( Bundle savedInstanceState ) { </a> 
<a> super . onCreate ( savedInstanceState ) ; </a> 
<a> if ( <RARE_TOKEN> ( ) ) { </a> 
<a> <RARE_TOKEN> ( null ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> protected boolean <RARE_TOKEN> ( ) { </a> 
<a> return true ; </a> 
<a> } </a> 
<a> void <RARE_TOKEN> ( T fragment ) { </a> 
<a> if ( fragment == null ) { </a> 
<a> fragment = <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> layout = new <RARE_TOKEN> ( this ) ; </a> 
<a> layout . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> layout . <RARE_TOKEN> ( new <RARE_TOKEN> . LayoutParams ( <RARE_TOKEN> . LayoutParams . <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> . LayoutParams . <RARE_TOKEN> ) ) ; </a> 
<a> layout . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( ) . <RARE_TOKEN> ( ) </a> 
<a> . add ( <RARE_TOKEN> , fragment ) </a> 
<a> . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> ( layout ) ; </a> 
<a> } </a> 
<a> void <RARE_TOKEN> ( int i , int <RARE_TOKEN> ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> ( i ) ; </a> 
<a> } </a> 
<a> T <RARE_TOKEN> ( ) { </a> 
<a> try { </a> 
<a> return <RARE_TOKEN> . newInstance ( ) ; </a> 
<a> } catch ( <RARE_TOKEN> e ) { </a> 
<a> fail ( <RARE_TOKEN> not create <RARE_TOKEN> ) ; </a> 
<a> } catch ( <RARE_TOKEN> e ) { </a> 
<a> fail ( <RARE_TOKEN> not create <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> return null ; </a> 
<a> } </a> 
<a> T <RARE_TOKEN> ( ) { </a> 
<a> @ SuppressWarnings ( "unchecked" ) </a> 
<a> T fragment = ( T ) <RARE_TOKEN> ( ) . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> return fragment ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package com . facebook . widget ; </a> 
<a> import android . os . Bundle ; </a> 
<a> import android . test . <RARE_TOKEN> ; </a> 
<a> import android . test . suitebuilder . annotation . LargeTest ; </a> 
<a> import android . test . suitebuilder . annotation . MediumTest ; </a> 
<a> import android . view . View ; </a> 
<a> import android . widget . <RARE_TOKEN> ; </a> 
<a> import android . widget . <RARE_TOKEN> ; </a> 
<a> import com . facebook . TestBlocker ; </a> 
<a> import com . facebook . TestSession ; </a> 
<a> import com . facebook . <RARE_TOKEN> . <RARE_TOKEN> . R ; </a> 
<a> import java . util . Arrays ; </a> 
<a> import java . util . Collection ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> < <RARE_TOKEN> . <RARE_TOKEN> > { </a> 
<a> public <RARE_TOKEN> ( ) { </a> 
<a> super ( <RARE_TOKEN> . class ) ; </a> 
<a> } </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) throws Throwable { </a> 
<a> <RARE_TOKEN> activity = getActivity ( ) ; </a> 
<a> assertNotNull ( activity ) ; </a> 
<a> <RARE_TOKEN> ( 0 , new Runnable ( ) { </a> 
<a> @ Override </a> 
<a> public void run ( ) { </a> 
<a> Bundle bundle = new Bundle ( ) ; </a> 
<a> bundle . putString ( <RARE_TOKEN> . <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> bundle . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> , false ) ; </a> 
<a> bundle . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> , false ) ; </a> 
<a> bundle . putString ( <RARE_TOKEN> . <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> fragment = new <RARE_TOKEN> ( bundle ) ; </a> 
<a> getActivity ( ) . <RARE_TOKEN> ( fragment ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> final <RARE_TOKEN> fragment = activity . <RARE_TOKEN> ( ) ; </a> 
<a> assertNotNull ( fragment ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , fragment . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertEquals ( false , fragment . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertEquals ( false , fragment . <RARE_TOKEN> ( ) ) ; </a> 
<a> Collection < String > <RARE_TOKEN> = fragment . <RARE_TOKEN> ( ) ; </a> 
<a> assertTrue ( <RARE_TOKEN> . contains ( <RARE_TOKEN> ) ) ; </a> 
<a> assertTrue ( <RARE_TOKEN> . contains ( <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) throws Throwable { </a> 
<a> <RARE_TOKEN> activity = getActivity ( ) ; </a> 
<a> assertNotNull ( activity ) ; </a> 
<a> <RARE_TOKEN> ( 0 , new Runnable ( ) { </a> 
<a> @ Override </a> 
<a> public void run ( ) { </a> 
<a> getActivity ( ) . <RARE_TOKEN> ( R . layout . <RARE_TOKEN> , R . id . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> final <RARE_TOKEN> fragment = activity . <RARE_TOKEN> ( ) ; </a> 
<a> assertNotNull ( fragment ) ; </a> 
<a> assertEquals ( false , fragment . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertEquals ( false , fragment . <RARE_TOKEN> ( ) ) ; </a> 
<a> Collection < String > <RARE_TOKEN> = fragment . <RARE_TOKEN> ( ) ; </a> 
<a> assertTrue ( <RARE_TOKEN> . contains ( <RARE_TOKEN> ) ) ; </a> 
<a> assertTrue ( <RARE_TOKEN> . contains ( <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) throws Throwable { </a> 
<a> <RARE_TOKEN> activity = getActivity ( ) ; </a> 
<a> assertNotNull ( activity ) ; </a> 
<a> <RARE_TOKEN> ( 0 , new Runnable ( ) { </a> 
<a> @ Override </a> 
<a> public void run ( ) { </a> 
<a> getActivity ( ) . <RARE_TOKEN> ( null ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> final <RARE_TOKEN> fragment = activity . <RARE_TOKEN> ( ) ; </a> 
<a> assertNotNull ( fragment ) ; </a> 
<a> final TestSession <RARE_TOKEN> = openTestSessionWithSharedUser ( ) ; </a> 
<a> TestSession <RARE_TOKEN> = openTestSessionWithSharedUser ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> final TestBlocker blocker = <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> ( 2 , new Runnable ( ) { </a> 
<a> @ Override </a> 
<a> public void run ( ) { </a> 
<a> fragment . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> fragment . <RARE_TOKEN> ( new PickerFragment . <RARE_TOKEN> ( ) { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( PickerFragment < ? > fragment ) { </a> 
<a> blocker . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> fragment . <RARE_TOKEN> ( Arrays . asList ( <RARE_TOKEN> ) ) ; </a> 
<a> fragment . <RARE_TOKEN> ( true ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = ( <RARE_TOKEN> ) fragment . <RARE_TOKEN> ( ) . findViewById ( R . id . <RARE_TOKEN> ) ; </a> 
<a> assertNotNull ( <RARE_TOKEN> ) ; </a> 
<a> View <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( 0 ) ; </a> 
<a> assertNotNull ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = ( <RARE_TOKEN> ) <RARE_TOKEN> . findViewById ( R . id . <RARE_TOKEN> ) ; </a> 
<a> assertNotNull ( <RARE_TOKEN> ) ; </a> 
<a> assertFalse ( <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertEquals ( 0 , fragment . <RARE_TOKEN> ( ) . size ( ) ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( this , <RARE_TOKEN> ) ; </a> 
<a> assertEquals ( 1 , fragment . <RARE_TOKEN> ( ) . size ( ) ) ; </a> 
<a> assertNotNull ( fragment . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( ) . next ( ) . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertTrue ( <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( this , <RARE_TOKEN> ) ; </a> 
<a> assertEquals ( 0 , fragment . <RARE_TOKEN> ( ) . size ( ) ) ; </a> 
<a> assertFalse ( <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> public static class <RARE_TOKEN> extends <RARE_TOKEN> . <RARE_TOKEN> < <RARE_TOKEN> > { </a> 
<a> public <RARE_TOKEN> ( ) { </a> 
<a> super ( <RARE_TOKEN> . class ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected boolean <RARE_TOKEN> ( ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package com . facebook . widget ; </a> 
<a> import android . content . Context ; </a> 
<a> import android . <RARE_TOKEN> . Bitmap ; </a> 
<a> import android . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import android . test . <RARE_TOKEN> ; </a> 
<a> import android . test . suitebuilder . annotation . LargeTest ; </a> 
<a> import android . test . suitebuilder . annotation . MediumTest ; </a> 
<a> import com . facebook . internal . Utility ; </a> 
<a> import com . facebook . widget . <RARE_TOKEN> ; </a> 
<a> import java . io . IOException ; </a> 
<a> import java . io . InputStream ; </a> 
<a> import java . net . HttpURLConnection ; </a> 
<a> import java . net . URL ; </a> 
<a> import java . nio . ByteBuffer ; </a> 
<a> import java . util . Arrays ; </a> 
<a> public final class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> @ MediumTest @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) throws IOException { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ( ) ) . <RARE_TOKEN> ( ) ; </a> 
<a> String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> Bitmap <RARE_TOKEN> = <RARE_TOKEN> ( <RARE_TOKEN> , false ) ; </a> 
<a> Bitmap <RARE_TOKEN> = <RARE_TOKEN> ( <RARE_TOKEN> , true ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ MediumTest @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) throws IOException { </a> 
<a> String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> Bitmap <RARE_TOKEN> = <RARE_TOKEN> ( <RARE_TOKEN> , false ) ; </a> 
<a> Bitmap <RARE_TOKEN> = <RARE_TOKEN> ( <RARE_TOKEN> , false ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> private Bitmap <RARE_TOKEN> ( String uri , boolean <RARE_TOKEN> ) { </a> 
<a> Bitmap <RARE_TOKEN> = null ; </a> 
<a> InputStream <RARE_TOKEN> = null ; </a> 
<a> try </a> 
<a> { </a> 
<a> URL url = new URL ( uri ) ; </a> 
<a> boolean <RARE_TOKEN> = ( <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ( ) ) . get ( url . toString ( ) ) != null ) ; </a> 
<a> assertTrue ( <RARE_TOKEN> == <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( url , <RARE_TOKEN> ( ) ) ; </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> HttpURLConnection connection = ( HttpURLConnection ) url . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ( ) , connection ) ; </a> 
<a> } </a> 
<a> assertTrue ( <RARE_TOKEN> != null ) ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> assertTrue ( <RARE_TOKEN> != null ) ; </a> 
<a> } catch ( Exception e ) { </a> 
<a> assertNull ( e ) ; </a> 
<a> } finally { </a> 
<a> Utility . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> private static void <RARE_TOKEN> ( Bitmap <RARE_TOKEN> , Bitmap <RARE_TOKEN> ) { </a> 
<a> assertTrue ( <RARE_TOKEN> . <RARE_TOKEN> ( ) == <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertTrue ( <RARE_TOKEN> . <RARE_TOKEN> ( ) == <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> ByteBuffer <RARE_TOKEN> = ByteBuffer . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ( ) * <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> ByteBuffer <RARE_TOKEN> = ByteBuffer . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ( ) * <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> assertTrue ( Arrays . equals ( <RARE_TOKEN> . array ( ) , <RARE_TOKEN> . array ( ) ) ) ; </a> 
<a> } </a> 
<a> private Context <RARE_TOKEN> ( ) { </a> 
<a> for ( ; ; ) { </a> 
<a> if ( ( getContext ( ) != null ) && ( getContext ( ) . <RARE_TOKEN> ( ) != null ) ) { </a> 
<a> return getContext ( ) ; </a> 
<a> } </a> 
<a> try { </a> 
<a> Thread . sleep ( 25 ) ; </a> 
<a> } catch ( InterruptedException e ) { </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package com . facebook . widget ; </a> 
<a> import android . test . suitebuilder . annotation . LargeTest ; </a> 
<a> import android . test . suitebuilder . annotation . MediumTest ; </a> 
<a> import android . test . suitebuilder . annotation . SmallTest ; </a> 
<a> import com . facebook . * ; </a> 
<a> import com . facebook . widget . LoginButton ; </a> 
<a> import junit . <RARE_TOKEN> . Assert ; </a> 
<a> import java . util . ArrayList ; </a> 
<a> import java . util . Arrays ; </a> 
<a> import java . util . List ; </a> 
<a> import java . util . concurrent . atomic . AtomicBoolean ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> static final int <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) throws Throwable { </a> 
<a> MockTokenCachingStrategy cache = new MockTokenCachingStrategy ( null , 0 ) ; </a> 
<a> final <RARE_TOKEN> session = new <RARE_TOKEN> ( getActivity ( ) , <RARE_TOKEN> , cache ) ; </a> 
<a> <RARE_TOKEN> . SessionStatusCallbackRecorder statusRecorder = new <RARE_TOKEN> . SessionStatusCallbackRecorder ( ) ; </a> 
<a> session . <RARE_TOKEN> ( <RARE_TOKEN> token of <RARE_TOKEN> , new ArrayList < String > ( ) , AccessTokenSource . <RARE_TOKEN> ) ; </a> 
<a> session . <RARE_TOKEN> ( statusRecorder ) ; </a> 
<a> Assert . assertEquals ( SessionState . <RARE_TOKEN> , session . <RARE_TOKEN> ( ) ) ; </a> 
<a> final SessionStatusCallbackRecorder <RARE_TOKEN> = new SessionStatusCallbackRecorder ( ) ; </a> 
<a> final LoginButton button = new LoginButton ( getActivity ( ) ) ; </a> 
<a> <RARE_TOKEN> ( 0 , new Runnable ( ) { </a> 
<a> @ Override </a> 
<a> public void run ( ) { </a> 
<a> getActivity ( ) . <RARE_TOKEN> ( button ) ; </a> 
<a> button . <RARE_TOKEN> ( session ) ; </a> 
<a> button . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> button . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> statusRecorder . waitForCall ( session , SessionState . <RARE_TOKEN> , null ) ; </a> 
<a> <RARE_TOKEN> . waitForCall ( session , SessionState . <RARE_TOKEN> , null ) ; </a> 
<a> statusRecorder . waitForCall ( session , SessionState . <RARE_TOKEN> , null ) ; </a> 
<a> <RARE_TOKEN> . waitForCall ( session , SessionState . <RARE_TOKEN> , null ) ; </a> 
<a> session . <RARE_TOKEN> ( ) ; </a> 
<a> assertTrue ( cache . <RARE_TOKEN> ( ) == null ) ; </a> 
<a> statusRecorder . waitForCall ( session , SessionState . <RARE_TOKEN> , null ) ; </a> 
<a> <RARE_TOKEN> . waitForCall ( session , SessionState . <RARE_TOKEN> , null ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> statusRecorder . close ( ) ; </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> MockTokenCachingStrategy cache = new MockTokenCachingStrategy ( null , 0 ) ; </a> 
<a> <RARE_TOKEN> session = new <RARE_TOKEN> ( getActivity ( ) , <RARE_TOKEN> , cache ) ; </a> 
<a> final Exception <RARE_TOKEN> = new Exception ( <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> final AtomicBoolean <RARE_TOKEN> = new AtomicBoolean ( false ) ; </a> 
<a> assertEquals ( SessionState . <RARE_TOKEN> , session . <RARE_TOKEN> ( ) ) ; </a> 
<a> final LoginButton button = new LoginButton ( getActivity ( ) ) ; </a> 
<a> LoginButton . <RARE_TOKEN> listener = new LoginButton . <RARE_TOKEN> ( ) { </a> 
<a> @ Override </a> 
<a> public void onError ( FacebookException exception ) { </a> 
<a> synchronized ( this ) { </a> 
<a> assertEquals ( exception . <RARE_TOKEN> ( ) . getMessage ( ) , <RARE_TOKEN> . getMessage ( ) ) ; </a> 
<a> <RARE_TOKEN> . set ( true ) ; </a> 
<a> this . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } ; </a> 
<a> button . <RARE_TOKEN> ( listener ) ; </a> 
<a> button . <RARE_TOKEN> ( session ) ; </a> 
<a> session . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> button . <RARE_TOKEN> ( ) ; </a> 
<a> button . <RARE_TOKEN> ( ) ; </a> 
<a> try { </a> 
<a> synchronized ( listener ) { </a> 
<a> listener . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } catch ( InterruptedException e ) { </a> 
<a> fail ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( ! <RARE_TOKEN> . get ( ) ) { </a> 
<a> fail ( <RARE_TOKEN> not get <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> MockTokenCachingStrategy cache = new MockTokenCachingStrategy ( null , 0 ) ; </a> 
<a> <RARE_TOKEN> session = new <RARE_TOKEN> ( getActivity ( ) , <RARE_TOKEN> , cache ) ; </a> 
<a> <RARE_TOKEN> . SessionStatusCallbackRecorder statusRecorder = new <RARE_TOKEN> . SessionStatusCallbackRecorder ( ) ; </a> 
<a> assertEquals ( SessionState . <RARE_TOKEN> , session . <RARE_TOKEN> ( ) ) ; </a> 
<a> final LoginButton button = new LoginButton ( getActivity ( ) ) ; </a> 
<a> button . <RARE_TOKEN> ( session ) ; </a> 
<a> button . <RARE_TOKEN> ( Arrays . asList ( new String [ ] { <RARE_TOKEN> , <RARE_TOKEN> } ) ) ; </a> 
<a> session . <RARE_TOKEN> ( <RARE_TOKEN> token of <RARE_TOKEN> , new ArrayList < String > ( ) , AccessTokenSource . <RARE_TOKEN> ) ; </a> 
<a> session . <RARE_TOKEN> ( statusRecorder ) ; </a> 
<a> button . <RARE_TOKEN> ( ) ; </a> 
<a> statusRecorder . waitForCall ( session , SessionState . <RARE_TOKEN> , null ) ; </a> 
<a> statusRecorder . waitForCall ( session , SessionState . <RARE_TOKEN> , null ) ; </a> 
<a> session . <RARE_TOKEN> ( ) ; </a> 
<a> assertTrue ( cache . <RARE_TOKEN> ( ) == null ) ; </a> 
<a> statusRecorder . waitForCall ( session , SessionState . <RARE_TOKEN> , null ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> statusRecorder . close ( ) ; </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> MockTokenCachingStrategy cache = new MockTokenCachingStrategy ( null , 0 ) ; </a> 
<a> <RARE_TOKEN> session = new <RARE_TOKEN> ( getActivity ( ) , <RARE_TOKEN> , cache ) ; </a> 
<a> <RARE_TOKEN> . SessionStatusCallbackRecorder statusRecorder = </a> 
<a> new <RARE_TOKEN> . SessionStatusCallbackRecorder ( ) ; </a> 
<a> assertEquals ( SessionState . <RARE_TOKEN> , session . <RARE_TOKEN> ( ) ) ; </a> 
<a> final LoginButton button = new LoginButton ( getActivity ( ) ) ; </a> 
<a> button . <RARE_TOKEN> ( session ) ; </a> 
<a> button . <RARE_TOKEN> ( Arrays . asList ( new String [ ] { <RARE_TOKEN> , <RARE_TOKEN> } ) ) ; </a> 
<a> session . <RARE_TOKEN> ( <RARE_TOKEN> token of <RARE_TOKEN> , new ArrayList < String > ( ) , AccessTokenSource . <RARE_TOKEN> ) ; </a> 
<a> session . <RARE_TOKEN> ( statusRecorder ) ; </a> 
<a> button . <RARE_TOKEN> ( ) ; </a> 
<a> statusRecorder . waitForCall ( session , SessionState . <RARE_TOKEN> , null ) ; </a> 
<a> statusRecorder . waitForCall ( session , SessionState . <RARE_TOKEN> , null ) ; </a> 
<a> session . <RARE_TOKEN> ( ) ; </a> 
<a> assertTrue ( cache . <RARE_TOKEN> ( ) == null ) ; </a> 
<a> statusRecorder . waitForCall ( session , SessionState . <RARE_TOKEN> , null ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> statusRecorder . close ( ) ; </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> final LoginButton button = new LoginButton ( getActivity ( ) ) ; </a> 
<a> button . <RARE_TOKEN> ( Arrays . asList ( new String [ ] { <RARE_TOKEN> , <RARE_TOKEN> } ) ) ; </a> 
<a> try { </a> 
<a> button . <RARE_TOKEN> ( Arrays . asList ( new String [ ] { <RARE_TOKEN> , <RARE_TOKEN> } ) ) ; </a> 
<a> fail ( <RARE_TOKEN> not be <RARE_TOKEN> to <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } catch ( Exception e ) { </a> 
<a> assertTrue ( e instanceof UnsupportedOperationException ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> final LoginButton button = new LoginButton ( getActivity ( ) ) ; </a> 
<a> button . <RARE_TOKEN> ( Arrays . asList ( new String [ ] { <RARE_TOKEN> , <RARE_TOKEN> } ) ) ; </a> 
<a> try { </a> 
<a> button . <RARE_TOKEN> ( Arrays . asList ( new String [ ] { <RARE_TOKEN> , <RARE_TOKEN> } ) ) ; </a> 
<a> fail ( <RARE_TOKEN> not be <RARE_TOKEN> to <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } catch ( Exception e ) { </a> 
<a> assertTrue ( e instanceof UnsupportedOperationException ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> final LoginButton button = new LoginButton ( getActivity ( ) ) ; </a> 
<a> button . <RARE_TOKEN> ( Arrays . asList ( new String [ ] { <RARE_TOKEN> , <RARE_TOKEN> } ) ) ; </a> 
<a> button . <RARE_TOKEN> ( ) ; </a> 
<a> button . <RARE_TOKEN> ( Arrays . asList ( new String [ ] { <RARE_TOKEN> , <RARE_TOKEN> } ) ) ; </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> MockTokenCachingStrategy cache = new MockTokenCachingStrategy ( null , 0 ) ; </a> 
<a> <RARE_TOKEN> session = new <RARE_TOKEN> ( getActivity ( ) , <RARE_TOKEN> , cache ) ; </a> 
<a> <RARE_TOKEN> . SessionStatusCallbackRecorder statusRecorder = </a> 
<a> new <RARE_TOKEN> . SessionStatusCallbackRecorder ( ) ; </a> 
<a> assertEquals ( SessionState . <RARE_TOKEN> , session . <RARE_TOKEN> ( ) ) ; </a> 
<a> final LoginButton button = new LoginButton ( getActivity ( ) ) ; </a> 
<a> button . <RARE_TOKEN> ( session ) ; </a> 
<a> session . <RARE_TOKEN> ( <RARE_TOKEN> token of <RARE_TOKEN> , </a> 
<a> Arrays . asList ( new String [ ] { <RARE_TOKEN> , <RARE_TOKEN> } ) , AccessTokenSource . <RARE_TOKEN> ) ; </a> 
<a> session . <RARE_TOKEN> ( statusRecorder ) ; </a> 
<a> button . <RARE_TOKEN> ( ) ; </a> 
<a> statusRecorder . waitForCall ( session , SessionState . <RARE_TOKEN> , null ) ; </a> 
<a> statusRecorder . waitForCall ( session , SessionState . <RARE_TOKEN> , null ) ; </a> 
<a> button . <RARE_TOKEN> ( Arrays . asList ( new String [ ] { <RARE_TOKEN> , <RARE_TOKEN> } ) ) ; </a> 
<a> button . <RARE_TOKEN> ( Arrays . asList ( new String [ ] { <RARE_TOKEN> , <RARE_TOKEN> } ) ) ; </a> 
<a> List < String > permissions = button . getPermissions ( ) ; </a> 
<a> assertTrue ( permissions . contains ( <RARE_TOKEN> ) ) ; </a> 
<a> assertTrue ( permissions . contains ( <RARE_TOKEN> ) ) ; </a> 
<a> assertFalse ( permissions . contains ( <RARE_TOKEN> ) ) ; </a> 
<a> session . <RARE_TOKEN> ( ) ; </a> 
<a> assertTrue ( cache . <RARE_TOKEN> ( ) == null ) ; </a> 
<a> statusRecorder . waitForCall ( session , SessionState . <RARE_TOKEN> , null ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> statusRecorder . close ( ) ; </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> . MockTokenCachingStrategy cache = new <RARE_TOKEN> . MockTokenCachingStrategy ( null , 0 ) ; </a> 
<a> <RARE_TOKEN> session = new <RARE_TOKEN> ( getActivity ( ) , <RARE_TOKEN> , cache ) ; </a> 
<a> <RARE_TOKEN> . SessionStatusCallbackRecorder statusRecorder = </a> 
<a> new <RARE_TOKEN> . SessionStatusCallbackRecorder ( ) ; </a> 
<a> assertEquals ( SessionState . <RARE_TOKEN> , session . <RARE_TOKEN> ( ) ) ; </a> 
<a> final LoginButton button = new LoginButton ( getActivity ( ) ) ; </a> 
<a> button . <RARE_TOKEN> ( session ) ; </a> 
<a> button . <RARE_TOKEN> ( Arrays . asList ( new String [ ] { <RARE_TOKEN> , <RARE_TOKEN> } ) ) ; </a> 
<a> button . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> session . <RARE_TOKEN> ( <RARE_TOKEN> token of <RARE_TOKEN> , new ArrayList < String > ( ) , AccessTokenSource . <RARE_TOKEN> ) ; </a> 
<a> session . <RARE_TOKEN> ( statusRecorder ) ; </a> 
<a> button . <RARE_TOKEN> ( ) ; </a> 
<a> statusRecorder . waitForCall ( session , SessionState . <RARE_TOKEN> , null ) ; </a> 
<a> statusRecorder . waitForCall ( session , SessionState . <RARE_TOKEN> , null ) ; </a> 
<a> assertNotNull ( session . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> . <RARE_TOKEN> , session . <RARE_TOKEN> ( ) ) ; </a> 
<a> session . <RARE_TOKEN> ( ) ; </a> 
<a> assertTrue ( cache . <RARE_TOKEN> ( ) == null ) ; </a> 
<a> statusRecorder . waitForCall ( session , SessionState . <RARE_TOKEN> , null ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> statusRecorder . close ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package com . facebook . widget ; </a> 
<a> import android . location . Location ; </a> 
<a> import android . os . Bundle ; </a> 
<a> import android . test . <RARE_TOKEN> ; </a> 
<a> import android . test . suitebuilder . annotation . LargeTest ; </a> 
<a> import android . test . suitebuilder . annotation . MediumTest ; </a> 
<a> import android . view . View ; </a> 
<a> import android . widget . <RARE_TOKEN> ; </a> 
<a> import com . facebook . * ; </a> 
<a> import com . facebook . <RARE_TOKEN> . <RARE_TOKEN> . R ; </a> 
<a> import java . util . Collection ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> < <RARE_TOKEN> . <RARE_TOKEN> > { </a> 
<a> public <RARE_TOKEN> ( ) { </a> 
<a> super ( <RARE_TOKEN> . class ) ; </a> 
<a> } </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) throws Throwable { </a> 
<a> <RARE_TOKEN> activity = getActivity ( ) ; </a> 
<a> assertNotNull ( activity ) ; </a> 
<a> final Location location = new Location ( "" ) ; </a> 
<a> location . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> location . <RARE_TOKEN> ( - <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( 0 , new Runnable ( ) { </a> 
<a> @ Override </a> 
<a> public void run ( ) { </a> 
<a> Bundle bundle = new Bundle ( ) ; </a> 
<a> bundle . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> , false ) ; </a> 
<a> bundle . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> bundle . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> , 5 ) ; </a> 
<a> bundle . putString ( <RARE_TOKEN> . <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> bundle . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> , location ) ; </a> 
<a> bundle . putString ( <RARE_TOKEN> . <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> fragment = new <RARE_TOKEN> ( bundle ) ; </a> 
<a> getActivity ( ) . <RARE_TOKEN> ( fragment ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> final <RARE_TOKEN> fragment = activity . <RARE_TOKEN> ( ) ; </a> 
<a> assertNotNull ( fragment ) ; </a> 
<a> assertEquals ( false , fragment . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , fragment . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertEquals ( 5 , fragment . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , fragment . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertEquals ( location , fragment . <RARE_TOKEN> ( ) ) ; </a> 
<a> Collection < String > <RARE_TOKEN> = fragment . <RARE_TOKEN> ( ) ; </a> 
<a> assertTrue ( <RARE_TOKEN> . contains ( <RARE_TOKEN> ) ) ; </a> 
<a> assertTrue ( <RARE_TOKEN> . contains ( <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) throws Throwable { </a> 
<a> <RARE_TOKEN> activity = getActivity ( ) ; </a> 
<a> assertNotNull ( activity ) ; </a> 
<a> <RARE_TOKEN> ( 0 , new Runnable ( ) { </a> 
<a> @ Override </a> 
<a> public void run ( ) { </a> 
<a> getActivity ( ) . <RARE_TOKEN> ( R . layout . <RARE_TOKEN> , R . id . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> final <RARE_TOKEN> fragment = activity . <RARE_TOKEN> ( ) ; </a> 
<a> assertNotNull ( fragment ) ; </a> 
<a> assertEquals ( false , fragment . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , fragment . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertEquals ( 5 , fragment . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , fragment . <RARE_TOKEN> ( ) ) ; </a> 
<a> Collection < String > <RARE_TOKEN> = fragment . <RARE_TOKEN> ( ) ; </a> 
<a> assertTrue ( <RARE_TOKEN> . contains ( <RARE_TOKEN> ) ) ; </a> 
<a> assertTrue ( <RARE_TOKEN> . contains ( <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) throws Throwable { </a> 
<a> <RARE_TOKEN> activity = getActivity ( ) ; </a> 
<a> assertNotNull ( activity ) ; </a> 
<a> <RARE_TOKEN> ( 0 , new Runnable ( ) { </a> 
<a> @ Override </a> 
<a> public void run ( ) { </a> 
<a> getActivity ( ) . <RARE_TOKEN> ( null ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> <RARE_TOKEN> ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> final <RARE_TOKEN> fragment = activity . <RARE_TOKEN> ( ) ; </a> 
<a> assertNotNull ( fragment ) ; </a> 
<a> final TestSession session = openTestSessionWithSharedUser ( ) ; </a> 
<a> final TestBlocker blocker = <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> ( 1 , new Runnable ( ) { </a> 
<a> @ Override </a> 
<a> public void run ( ) { </a> 
<a> fragment . <RARE_TOKEN> ( session ) ; </a> 
<a> Location location = new Location ( "" ) ; </a> 
<a> location . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> location . <RARE_TOKEN> ( - <RARE_TOKEN> ) ; </a> 
<a> fragment . <RARE_TOKEN> ( location ) ; </a> 
<a> fragment . <RARE_TOKEN> ( new PickerFragment . <RARE_TOKEN> ( ) { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( PickerFragment < ? > fragment ) { </a> 
<a> blocker . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> fragment . <RARE_TOKEN> ( new PickerFragment . <RARE_TOKEN> ( ) { </a> 
<a> @ Override </a> 
<a> public void onError ( PickerFragment < ? > fragment , FacebookException error ) { </a> 
<a> fail ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> " + error . toString ( ) ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> fragment . <RARE_TOKEN> ( true ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = ( <RARE_TOKEN> ) fragment . <RARE_TOKEN> ( ) . findViewById ( R . id . <RARE_TOKEN> ) ; </a> 
<a> assertNotNull ( <RARE_TOKEN> ) ; </a> 
<a> View <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( 0 ) ; </a> 
<a> assertNotNull ( <RARE_TOKEN> ) ; </a> 
<a> assertNull ( fragment . <RARE_TOKEN> ( ) ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( this , <RARE_TOKEN> ) ; </a> 
<a> assertNotNull ( fragment . <RARE_TOKEN> ( ) ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( this , <RARE_TOKEN> ) ; </a> 
<a> assertNull ( fragment . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) throws Throwable { </a> 
<a> <RARE_TOKEN> activity = getActivity ( ) ; </a> 
<a> assertNotNull ( activity ) ; </a> 
<a> <RARE_TOKEN> ( 0 , new Runnable ( ) { </a> 
<a> @ Override </a> 
<a> public void run ( ) { </a> 
<a> getActivity ( ) . <RARE_TOKEN> ( null ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> <RARE_TOKEN> ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> final <RARE_TOKEN> fragment = activity . <RARE_TOKEN> ( ) ; </a> 
<a> assertNotNull ( fragment ) ; </a> 
<a> final TestSession session = openTestSessionWithSharedUser ( ) ; </a> 
<a> final TestBlocker <RARE_TOKEN> = TestBlocker . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> ( 0 , new Runnable ( ) { </a> 
<a> @ Override </a> 
<a> public void run ( ) { </a> 
<a> fragment . <RARE_TOKEN> ( session ) ; </a> 
<a> Location location = new Location ( "" ) ; </a> 
<a> location . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> location . <RARE_TOKEN> ( - <RARE_TOKEN> ) ; </a> 
<a> fragment . <RARE_TOKEN> ( location ) ; </a> 
<a> fragment . <RARE_TOKEN> ( new PickerFragment . <RARE_TOKEN> ( ) { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( PickerFragment < ? > fragment ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> fragment . <RARE_TOKEN> ( new PickerFragment . <RARE_TOKEN> ( ) { </a> 
<a> @ Override </a> 
<a> public void onError ( PickerFragment < ? > fragment , FacebookException error ) { </a> 
<a> fail ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> " + error . getMessage ( ) ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> fragment . <RARE_TOKEN> ( true ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( 1 ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = ( <RARE_TOKEN> ) fragment . <RARE_TOKEN> ( ) . findViewById ( R . id . <RARE_TOKEN> ) ; </a> 
<a> assertNotNull ( <RARE_TOKEN> ) ; </a> 
<a> Thread . sleep ( <RARE_TOKEN> ) ; </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> assertTrue ( <RARE_TOKEN> > - 1 ) ; </a> 
<a> View <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( 0 ) ; </a> 
<a> assertNotNull ( <RARE_TOKEN> ) ; </a> 
<a> assertNull ( fragment . <RARE_TOKEN> ( ) ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( this , <RARE_TOKEN> ) ; </a> 
<a> assertNotNull ( fragment . <RARE_TOKEN> ( ) ) ; </a> 
<a> final TestBlocker <RARE_TOKEN> = TestBlocker . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> ( 0 , new Runnable ( ) { </a> 
<a> @ Override </a> 
<a> public void run ( ) { </a> 
<a> session . <RARE_TOKEN> ( new Session . StatusCallback ( ) { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( Session session , SessionState state , Exception exception ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> session . close ( ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( 1 ) ; </a> 
<a> <RARE_TOKEN> ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> Thread . sleep ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> assertTrue ( <RARE_TOKEN> == - 1 ) ; </a> 
<a> assertNull ( fragment . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> public static class <RARE_TOKEN> extends <RARE_TOKEN> . <RARE_TOKEN> < <RARE_TOKEN> > { </a> 
<a> public <RARE_TOKEN> ( ) { </a> 
<a> super ( <RARE_TOKEN> . class ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected boolean <RARE_TOKEN> ( ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package com . facebook . widget ; </a> 
<a> import android . os . Bundle ; </a> 
<a> import android . test . suitebuilder . annotation . LargeTest ; </a> 
<a> import android . test . suitebuilder . annotation . MediumTest ; </a> 
<a> import com . facebook . <RARE_TOKEN> ; </a> 
<a> import com . facebook . SessionLoginBehavior ; </a> 
<a> import java . util . Arrays ; </a> 
<a> import java . util . List ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> < <RARE_TOKEN> . <RARE_TOKEN> > { </a> 
<a> public <RARE_TOKEN> ( ) { </a> 
<a> super ( <RARE_TOKEN> . class ) ; </a> 
<a> } </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) throws Throwable { </a> 
<a> <RARE_TOKEN> activity = getActivity ( ) ; </a> 
<a> assertNotNull ( activity ) ; </a> 
<a> final <RARE_TOKEN> fragment = activity . <RARE_TOKEN> ( ) ; </a> 
<a> assertNotNull ( fragment ) ; </a> 
<a> assertEquals ( SessionLoginBehavior . <RARE_TOKEN> , fragment . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> . <RARE_TOKEN> , fragment . <RARE_TOKEN> ( ) ) ; </a> 
<a> List < String > permissions = fragment . getPermissions ( ) ; </a> 
<a> assertEquals ( 2 , permissions . size ( ) ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , permissions . get ( 0 ) ) ; </a> 
<a> } </a> 
<a> public static class <RARE_TOKEN> extends <RARE_TOKEN> . <RARE_TOKEN> < <RARE_TOKEN> > { </a> 
<a> public <RARE_TOKEN> ( ) { </a> 
<a> super ( <RARE_TOKEN> . class ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void onCreate ( Bundle savedInstanceState ) { </a> 
<a> super . onCreate ( savedInstanceState ) ; </a> 
<a> <RARE_TOKEN> ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> fragment = <RARE_TOKEN> ( ) ; </a> 
<a> fragment . <RARE_TOKEN> ( SessionLoginBehavior . <RARE_TOKEN> ) ; </a> 
<a> fragment . <RARE_TOKEN> ( Arrays . asList ( <RARE_TOKEN> , <RARE_TOKEN> ) ) ; </a> 
<a> fragment . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package com . facebook . widget ; </a> 
<a> import android . test . suitebuilder . annotation . LargeTest ; </a> 
<a> import android . test . suitebuilder . annotation . MediumTest ; </a> 
<a> import android . test . suitebuilder . annotation . SmallTest ; </a> 
<a> import com . facebook . <RARE_TOKEN> ; </a> 
<a> import com . facebook . widget . WorkQueue ; </a> 
<a> import java . util . ArrayList ; </a> 
<a> import java . util . concurrent . <RARE_TOKEN> ; </a> 
<a> import java . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> WorkQueue manager = new WorkQueue ( ) ; </a> 
<a> manager . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> run = new <RARE_TOKEN> ( ) ; </a> 
<a> assertEquals ( 0 , run . <RARE_TOKEN> ( ) ) ; </a> 
<a> <RARE_TOKEN> executor = new <RARE_TOKEN> ( ) ; </a> 
<a> assertEquals ( 0 , executor . <RARE_TOKEN> ( ) ) ; </a> 
<a> WorkQueue manager = new WorkQueue ( 1 , executor ) ; </a> 
<a> <RARE_TOKEN> ( manager , run ) ; </a> 
<a> assertEquals ( 1 , executor . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertEquals ( 0 , run . <RARE_TOKEN> ( ) ) ; </a> 
<a> <RARE_TOKEN> ( manager , executor ) ; </a> 
<a> assertEquals ( 0 , executor . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertEquals ( 1 , run . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> final int <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> run = new <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> executor = new <RARE_TOKEN> ( ) ; </a> 
<a> WorkQueue manager = new WorkQueue ( 1 , executor ) ; </a> 
<a> for ( int i = 0 ; i < <RARE_TOKEN> ; i ++ ) { </a> 
<a> <RARE_TOKEN> ( manager , run ) ; </a> 
<a> assertEquals ( 1 , executor . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> for ( int i = 0 ; i < <RARE_TOKEN> ; i ++ ) { </a> 
<a> assertEquals ( 1 , executor . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertEquals ( i , run . <RARE_TOKEN> ( ) ) ; </a> 
<a> <RARE_TOKEN> ( manager , executor ) ; </a> 
<a> } </a> 
<a> assertEquals ( 0 , executor . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , run . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> final int <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> run = new <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> executor = new <RARE_TOKEN> ( ) ; </a> 
<a> WorkQueue manager = new WorkQueue ( <RARE_TOKEN> , executor ) ; </a> 
<a> for ( int i = 0 ; i < <RARE_TOKEN> ; i ++ ) { </a> 
<a> assertEquals ( i , executor . <RARE_TOKEN> ( ) ) ; </a> 
<a> <RARE_TOKEN> ( manager , run ) ; </a> 
<a> } </a> 
<a> for ( int i = 0 ; i < <RARE_TOKEN> ; i ++ ) { </a> 
<a> assertEquals ( <RARE_TOKEN> - i , executor . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertEquals ( i , run . <RARE_TOKEN> ( ) ) ; </a> 
<a> <RARE_TOKEN> ( manager , executor ) ; </a> 
<a> } </a> 
<a> assertEquals ( 0 , executor . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , run . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> run = new <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> executor = new <RARE_TOKEN> ( ) ; </a> 
<a> WorkQueue manager = new WorkQueue ( 1 , executor ) ; </a> 
<a> <RARE_TOKEN> ( manager , run ) ; </a> 
<a> WorkQueue . <RARE_TOKEN> <RARE_TOKEN> = <RARE_TOKEN> ( manager , run ) ; </a> 
<a> <RARE_TOKEN> ( manager , <RARE_TOKEN> ) ; </a> 
<a> assertEquals ( 1 , executor . <RARE_TOKEN> ( ) ) ; </a> 
<a> <RARE_TOKEN> ( manager , executor ) ; </a> 
<a> assertEquals ( 0 , executor . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> @ SmallTest </a> 
<a> @ MediumTest </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> final int <RARE_TOKEN> = 8 ; </a> 
<a> final int <RARE_TOKEN> = 17 ; </a> 
<a> ArrayList < WorkQueue . <RARE_TOKEN> > <RARE_TOKEN> = new ArrayList < WorkQueue . <RARE_TOKEN> > ( ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> executor = new <RARE_TOKEN> ( ) ; </a> 
<a> WorkQueue manager = new WorkQueue ( <RARE_TOKEN> , executor ) ; </a> 
<a> for ( int i = 0 ; i < <RARE_TOKEN> ; i ++ ) { </a> 
<a> <RARE_TOKEN> ( manager , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> int <RARE_TOKEN> = 0 ; </a> 
<a> for ( int h = 0 ; h < <RARE_TOKEN> ; h ++ ) { </a> 
<a> <RARE_TOKEN> . add ( <RARE_TOKEN> ( manager , <RARE_TOKEN> ) ) ; </a> 
<a> for ( int l = 0 ; l < h ; l ++ ) { </a> 
<a> <RARE_TOKEN> ( manager , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ++ ; </a> 
<a> } </a> 
<a> } </a> 
<a> assertEquals ( <RARE_TOKEN> , executor . <RARE_TOKEN> ( ) ) ; </a> 
<a> for ( WorkQueue . <RARE_TOKEN> <RARE_TOKEN> : <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( manager , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> for ( int i = 0 ; i < <RARE_TOKEN> ; i ++ ) { </a> 
<a> assertEquals ( i , <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> <RARE_TOKEN> ( manager , executor ) ; </a> 
<a> } </a> 
<a> for ( int i = 0 ; i < <RARE_TOKEN> ; i ++ ) { </a> 
<a> assertEquals ( i , <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> <RARE_TOKEN> ( manager , executor ) ; </a> 
<a> } </a> 
<a> for ( int i = 0 ; i < <RARE_TOKEN> ; i ++ ) { </a> 
<a> assertEquals ( i , <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> <RARE_TOKEN> ( manager , executor ) ; </a> 
<a> } </a> 
<a> assertEquals ( <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> @ LargeTest </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> WorkQueue manager = new WorkQueue ( ) ; </a> 
<a> ArrayList < <RARE_TOKEN> > <RARE_TOKEN> = new ArrayList < <RARE_TOKEN> > ( ) ; </a> 
<a> final int <RARE_TOKEN> = 20 ; </a> 
<a> for ( int i = 0 ; i < <RARE_TOKEN> ; i ++ ) { </a> 
<a> <RARE_TOKEN> . add ( new <RARE_TOKEN> ( manager , 20 ) ) ; </a> 
<a> } </a> 
<a> for ( int i = 0 ; i < <RARE_TOKEN> ; i ++ ) { </a> 
<a> manager . <RARE_TOKEN> ( <RARE_TOKEN> . get ( i ) ) ; </a> 
<a> } </a> 
<a> for ( int i = 0 ; i < <RARE_TOKEN> ; i ++ ) { </a> 
<a> <RARE_TOKEN> . get ( i ) . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private WorkQueue . <RARE_TOKEN> <RARE_TOKEN> ( WorkQueue manager , Runnable <RARE_TOKEN> ) { </a> 
<a> manager . <RARE_TOKEN> ( ) ; </a> 
<a> WorkQueue . <RARE_TOKEN> <RARE_TOKEN> = manager . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> manager . <RARE_TOKEN> ( ) ; </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( WorkQueue manager , <RARE_TOKEN> executor ) { </a> 
<a> manager . <RARE_TOKEN> ( ) ; </a> 
<a> executor . <RARE_TOKEN> ( ) ; </a> 
<a> manager . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( WorkQueue manager , WorkQueue . <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> manager . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> . cancel ( ) ; </a> 
<a> manager . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( WorkQueue manager , WorkQueue . <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> manager . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> manager . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> static class <RARE_TOKEN> implements Runnable { </a> 
<a> static ArrayList < WorkQueue . <RARE_TOKEN> > <RARE_TOKEN> = new ArrayList < WorkQueue . <RARE_TOKEN> > ( ) ; </a> 
<a> final WorkQueue manager ; </a> 
<a> final <RARE_TOKEN> random = new <RARE_TOKEN> ( ) ; </a> 
<a> final int <RARE_TOKEN> ; </a> 
<a> int <RARE_TOKEN> = 0 ; </a> 
<a> boolean <RARE_TOKEN> = false ; </a> 
<a> <RARE_TOKEN> ( WorkQueue manager , int <RARE_TOKEN> ) { </a> 
<a> this . manager = manager ; </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void run ( ) { </a> 
<a> if ( <RARE_TOKEN> ++ < <RARE_TOKEN> ) { </a> 
<a> final int <RARE_TOKEN> = 80 ; </a> 
<a> final int <RARE_TOKEN> = 10 ; </a> 
<a> final int <RARE_TOKEN> = 6 ; </a> 
<a> final int <RARE_TOKEN> = 2 ; </a> 
<a> int <RARE_TOKEN> = 0 ; </a> 
<a> final int n = random . nextInt ( <RARE_TOKEN> + <RARE_TOKEN> + <RARE_TOKEN> + <RARE_TOKEN> ) ; </a> 
<a> WorkQueue . <RARE_TOKEN> <RARE_TOKEN> = manager . <RARE_TOKEN> ( this ) ; </a> 
<a> if ( n < ( <RARE_TOKEN> += <RARE_TOKEN> ) ) { </a> 
<a> try { </a> 
<a> Thread . sleep ( n / 4 ) ; </a> 
<a> } catch ( InterruptedException e ) { </a> 
<a> } </a> 
<a> } else if ( n < ( <RARE_TOKEN> += <RARE_TOKEN> ) ) { </a> 
<a> synchronized ( <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> . add ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } else if ( n < ( <RARE_TOKEN> += <RARE_TOKEN> ) ) { </a> 
<a> ArrayList < WorkQueue . <RARE_TOKEN> > <RARE_TOKEN> = new ArrayList < WorkQueue . <RARE_TOKEN> > ( ) ; </a> 
<a> synchronized ( <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . clear ( ) ; </a> 
<a> } </a> 
<a> for ( WorkQueue . <RARE_TOKEN> <RARE_TOKEN> : <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } else { </a> 
<a> manager . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } else { </a> 
<a> manager . <RARE_TOKEN> ( ) ; </a> 
<a> synchronized ( this ) { </a> 
<a> <RARE_TOKEN> = true ; </a> 
<a> this . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> void <RARE_TOKEN> ( ) { </a> 
<a> synchronized ( this ) { </a> 
<a> while ( ! <RARE_TOKEN> ) { </a> 
<a> try { </a> 
<a> this . <RARE_TOKEN> ( ) ; </a> 
<a> } catch ( InterruptedException e ) { </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> class <RARE_TOKEN> implements <RARE_TOKEN> { </a> 
<a> private final ArrayList < Runnable > <RARE_TOKEN> = new ArrayList < Runnable > ( ) ; </a> 
<a> int <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> . size ( ) ; </a> 
<a> } </a> 
<a> void <RARE_TOKEN> ( ) { </a> 
<a> assertTrue ( <RARE_TOKEN> . size ( ) > 0 ) ; </a> 
<a> <RARE_TOKEN> . get ( 0 ) . run ( ) ; </a> 
<a> <RARE_TOKEN> . remove ( 0 ) ; </a> 
<a> } </a> 
<a> void <RARE_TOKEN> ( ) { </a> 
<a> assertTrue ( <RARE_TOKEN> . size ( ) > 0 ) ; </a> 
<a> int index = <RARE_TOKEN> . size ( ) - 1 ; </a> 
<a> <RARE_TOKEN> . get ( index ) . run ( ) ; </a> 
<a> <RARE_TOKEN> . remove ( index ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void execute ( Runnable <RARE_TOKEN> ) { </a> 
<a> synchronized ( this ) { </a> 
<a> <RARE_TOKEN> . add ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> class <RARE_TOKEN> implements Runnable { </a> 
<a> volatile int <RARE_TOKEN> = 0 ; </a> 
<a> int <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void run ( ) { </a> 
<a> synchronized ( this ) { </a> 
<a> <RARE_TOKEN> ++ ; </a> 
<a> } </a> 
<a> try { </a> 
<a> Thread . sleep ( 1 ) ; </a> 
<a> } catch ( InterruptedException e ) { </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package com . facebook . samples . <RARE_TOKEN> ; </a> 
<a> import android . app . <RARE_TOKEN> ; </a> 
<a> import android . content . Intent ; </a> 
<a> import android . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import android . net . <RARE_TOKEN> ; </a> 
<a> import android . os . Bundle ; </a> 
<a> import android . os . <RARE_TOKEN> ; </a> 
<a> import android . os . <RARE_TOKEN> ; </a> 
<a> import android . support . v4 . app . <RARE_TOKEN> ; </a> 
<a> import android . support . v4 . app . <RARE_TOKEN> ; </a> 
<a> import android . support . v4 . app . <RARE_TOKEN> ; </a> 
<a> import android . view . View ; </a> 
<a> import android . view . ViewGroup ; </a> 
<a> import android . widget . * ; </a> 
<a> import com . facebook . * ; </a> 
<a> import com . facebook . model . * ; </a> 
<a> import com . facebook . widget . <RARE_TOKEN> ; </a> 
<a> import com . facebook . widget . <RARE_TOKEN> ; </a> 
<a> import com . facebook . widget . PickerFragment ; </a> 
<a> import java . text . <RARE_TOKEN> ; </a> 
<a> import java . util . * ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> private static final String TAG = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = TAG + <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = TAG + <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = TAG + <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = TAG + <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = TAG + <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = TAG + <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = TAG + <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = TAG + <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> + <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> + <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final List < String > <RARE_TOKEN> = Arrays . asList ( <RARE_TOKEN> ) ; </a> 
<a> private static volatile <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> private static volatile <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> private static volatile int <RARE_TOKEN> = - 1 ; </a> 
<a> private static volatile int <RARE_TOKEN> = - 1 ; </a> 
<a> private Button <RARE_TOKEN> ; </a> 
<a> private Button <RARE_TOKEN> ; </a> 
<a> private Button <RARE_TOKEN> ; </a> 
<a> private Button <RARE_TOKEN> ; </a> 
<a> private String <RARE_TOKEN> ; </a> 
<a> private ViewGroup <RARE_TOKEN> ; </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> private Button <RARE_TOKEN> ; </a> 
<a> private Button <RARE_TOKEN> ; </a> 
<a> private TextView <RARE_TOKEN> ; </a> 
<a> private TextView <RARE_TOKEN> ; </a> 
<a> private Bundle <RARE_TOKEN> ; </a> 
<a> private ViewGroup <RARE_TOKEN> ; </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> private <RARE_TOKEN> pendingRequest ; </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> private ArrayList < <RARE_TOKEN> > <RARE_TOKEN> ; </a> 
<a> private ViewGroup <RARE_TOKEN> ; </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> private ViewGroup <RARE_TOKEN> ; </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> private Session . StatusCallback callback = new Session . StatusCallback ( ) { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( Session session , SessionState state , Exception exception ) { </a> 
<a> if ( exception != null ) { </a> 
<a> <RARE_TOKEN> = null ; </a> 
<a> } else if ( state == SessionState . <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( false ) ; </a> 
<a> } else if ( state == SessionState . <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } ; </a> 
<a> @ Override </a> 
<a> public void onCreate ( Bundle savedInstanceState ) { </a> 
<a> super . onCreate ( savedInstanceState ) ; </a> 
<a> <RARE_TOKEN> = new <RARE_TOKEN> ( this , callback ) ; </a> 
<a> <RARE_TOKEN> . onCreate ( savedInstanceState ) ; </a> 
<a> <RARE_TOKEN> ( R . layout . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = ( Button ) findViewById ( R . id . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = ( Button ) findViewById ( R . id . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = ( Button ) findViewById ( R . id . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = ( Button ) findViewById ( R . id . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = ( ViewGroup ) findViewById ( R . id . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = ( <RARE_TOKEN> ) findViewById ( R . id . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = ( <RARE_TOKEN> ) findViewById ( R . id . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = ( Button ) findViewById ( R . id . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = ( Button ) findViewById ( R . id . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = ( TextView ) findViewById ( R . id . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = ( TextView ) findViewById ( R . id . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = ( ViewGroup ) findViewById ( R . id . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = ( <RARE_TOKEN> ) findViewById ( R . id . <RARE_TOKEN> ) ; </a> 
<a> String [ ] <RARE_TOKEN> = { <RARE_TOKEN> , <RARE_TOKEN> } ; </a> 
<a> int [ ] <RARE_TOKEN> = { R . id . <RARE_TOKEN> , R . id . <RARE_TOKEN> } ; </a> 
<a> <RARE_TOKEN> = new <RARE_TOKEN> ( this , R . layout . <RARE_TOKEN> , <RARE_TOKEN> ( ) , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = ( <RARE_TOKEN> ) findViewById ( R . id . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = ( ViewGroup ) findViewById ( R . id . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = ( ViewGroup ) findViewById ( R . id . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = ( <RARE_TOKEN> ) findViewById ( R . id . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = ( <RARE_TOKEN> ) findViewById ( R . id . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> = ( <RARE_TOKEN> ) <RARE_TOKEN> . <RARE_TOKEN> ( R . id . <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> Bundle args = new Bundle ( ) ; </a> 
<a> args . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> , false ) ; </a> 
<a> <RARE_TOKEN> = new <RARE_TOKEN> ( args ) ; </a> 
<a> <RARE_TOKEN> . add ( R . id . <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> = ( <RARE_TOKEN> ) <RARE_TOKEN> . <RARE_TOKEN> ( R . id . <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> <RARE_TOKEN> = new <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> . add ( R . id . <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> < <RARE_TOKEN> > <RARE_TOKEN> = <RARE_TOKEN> </a> 
<a> . <RARE_TOKEN> ( this , R . array . <RARE_TOKEN> , android . R . layout . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( android . R . layout . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( 0 ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( 0 ) ; </a> 
<a> for ( Button button : Arrays . asList ( <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> ) ) { </a> 
<a> <RARE_TOKEN> ( button ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( new PickerFragment . <RARE_TOKEN> ( ) { </a> 
<a> @ Override </a> 
<a> public void onError ( PickerFragment < ? > fragment , FacebookException error ) { </a> 
<a> <RARE_TOKEN> . this . onError ( error ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( false ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( new PickerFragment . <RARE_TOKEN> ( ) { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( PickerFragment < ? > fragment ) { </a> 
<a> <RARE_TOKEN> . this . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( Arrays . asList ( <RARE_TOKEN> ) ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( new PickerFragment . <RARE_TOKEN> < GraphUser > ( ) { </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( GraphUser graphObject ) { </a> 
<a> Boolean <RARE_TOKEN> = graphObject . cast ( <RARE_TOKEN> . class ) . <RARE_TOKEN> ( ) ; </a> 
<a> return ( <RARE_TOKEN> != null ) && <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( new <RARE_TOKEN> . <RARE_TOKEN> ( ) { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( <RARE_TOKEN> < ? > <RARE_TOKEN> , View view , int i , long l ) { </a> 
<a> <RARE_TOKEN> . this . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( <RARE_TOKEN> < ? > <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> . this . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> Button <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> if ( savedInstanceState != null ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( savedInstanceState . getInt ( <RARE_TOKEN> ) ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( savedInstanceState . getInt ( <RARE_TOKEN> ) ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( savedInstanceState . getInt ( <RARE_TOKEN> ) ) ; </a> 
<a> <RARE_TOKEN> . setText ( savedInstanceState . getString ( <RARE_TOKEN> ) ) ; </a> 
<a> <RARE_TOKEN> . setText ( savedInstanceState . getString ( <RARE_TOKEN> ) ) ; </a> 
<a> <RARE_TOKEN> = savedInstanceState . getString ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = savedInstanceState . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = savedInstanceState . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> if ( ( <RARE_TOKEN> != null ) && ( <RARE_TOKEN> . size ( ) > 0 ) ) { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( getString ( R . string . <RARE_TOKEN> ) . equals ( <RARE_TOKEN> ) ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } else if ( getString ( R . string . <RARE_TOKEN> ) . equals ( <RARE_TOKEN> ) ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } else if ( getString ( R . string . <RARE_TOKEN> ) . equals ( <RARE_TOKEN> ) ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<a> if ( ! <RARE_TOKEN> ( ) ) { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> super . <RARE_TOKEN> ( ) ; </a> 
<a> Session session = Session . getActiveSession ( ) ; </a> 
<a> if ( session != null && session . isOpened ( ) ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( false ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> super . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void onSaveInstanceState ( Bundle outState ) { </a> 
<a> super . onSaveInstanceState ( outState ) ; </a> 
<a> <RARE_TOKEN> . onSaveInstanceState ( outState ) ; </a> 
<a> outState . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> outState . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> outState . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> outState . putString ( <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> ( ) . toString ( ) ) ; </a> 
<a> outState . putString ( <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> ( ) . toString ( ) ) ; </a> 
<a> outState . putString ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> outState . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> outState . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> super . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> super . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( null ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( null ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void onActivityResult ( int requestCode , int resultCode , Intent data ) { </a> 
<a> super . onActivityResult ( requestCode , resultCode , data ) ; </a> 
<a> <RARE_TOKEN> . onActivityResult ( requestCode , resultCode , data ) ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( Button button ) { </a> 
<a> button . setOnClickListener ( new View . OnClickListener ( ) { </a> 
<a> @ Override </a> 
<a> public void onClick ( View view ) { </a> 
<a> <RARE_TOKEN> ( ( Button ) view ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( Button source ) { </a> 
<a> <RARE_TOKEN> = source . <RARE_TOKEN> ( ) . toString ( ) ; </a> 
<a> <RARE_TOKEN> . setVisibility ( <RARE_TOKEN> ( source , <RARE_TOKEN> ) ) ; </a> 
<a> <RARE_TOKEN> . setVisibility ( <RARE_TOKEN> ( source , <RARE_TOKEN> ) ) ; </a> 
<a> <RARE_TOKEN> . setVisibility ( <RARE_TOKEN> ( source , <RARE_TOKEN> ) ) ; </a> 
<a> <RARE_TOKEN> . setVisibility ( <RARE_TOKEN> ( source , <RARE_TOKEN> ) ) ; </a> 
<a> if ( source == <RARE_TOKEN> ) { </a> 
<a> Session session = Session . getActiveSession ( ) ; </a> 
<a> if ( ( session == null ) || ! session . isOpened ( ) ) { </a> 
<a> new <RARE_TOKEN> . Builder ( this ) </a> 
<a> . <RARE_TOKEN> ( R . string . <RARE_TOKEN> ) </a> 
<a> . <RARE_TOKEN> ( R . string . <RARE_TOKEN> ) </a> 
<a> . <RARE_TOKEN> ( R . string . <RARE_TOKEN> , null ) </a> 
<a> . show ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> private int <RARE_TOKEN> ( Button source , Button <RARE_TOKEN> ) { </a> 
<a> if ( source == <RARE_TOKEN> ) { </a> 
<a> return View . <RARE_TOKEN> ; </a> 
<a> } else { </a> 
<a> return View . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( Button button ) { </a> 
<a> button . setOnClickListener ( new View . OnClickListener ( ) { </a> 
<a> @ Override </a> 
<a> public void onClick ( View view ) { </a> 
<a> <RARE_TOKEN> ( view ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( View view ) { </a> 
<a> if ( view == <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } else if ( view == <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } else { </a> 
<a> assert false ; </a> 
<a> } </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( ) { </a> 
<a> boolean <RARE_TOKEN> = <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> boolean <RARE_TOKEN> = <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> boolean result = <RARE_TOKEN> && <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> . setText ( <RARE_TOKEN> ( getString ( R . string . <RARE_TOKEN> ) , <RARE_TOKEN> , <RARE_TOKEN> , result ) ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , result ) ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( ) { </a> 
<a> boolean <RARE_TOKEN> = <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> boolean <RARE_TOKEN> = <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> boolean result = <RARE_TOKEN> || <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> . setText ( <RARE_TOKEN> ( getString ( R . string . <RARE_TOKEN> ) , <RARE_TOKEN> , <RARE_TOKEN> , result ) ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , result ) ; </a> 
<a> } </a> 
<a> private String <RARE_TOKEN> ( String <RARE_TOKEN> , boolean <RARE_TOKEN> , boolean <RARE_TOKEN> , boolean result ) { </a> 
<a> String <RARE_TOKEN> = getString ( R . string . <RARE_TOKEN> ) ; </a> 
<a> String <RARE_TOKEN> = getString ( R . string . <RARE_TOKEN> ) ; </a> 
<a> String <RARE_TOKEN> = <RARE_TOKEN> ? <RARE_TOKEN> : <RARE_TOKEN> ; </a> 
<a> String <RARE_TOKEN> = <RARE_TOKEN> ? <RARE_TOKEN> : <RARE_TOKEN> ; </a> 
<a> String <RARE_TOKEN> = result ? <RARE_TOKEN> : <RARE_TOKEN> ; </a> 
<a> return String . format ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> = <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( final String <RARE_TOKEN> , final boolean <RARE_TOKEN> , final boolean <RARE_TOKEN> , </a> 
<a> final boolean result ) { </a> 
<a> Bundle post = new Bundle ( ) ; </a> 
<a> post . putString ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> post . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> post . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> post . <RARE_TOKEN> ( <RARE_TOKEN> , result ) ; </a> 
<a> <RARE_TOKEN> = post ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( ) { </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> return ; </a> 
<a> } </a> 
<a> Session session = Session . getActiveSession ( ) ; </a> 
<a> if ( ( session == null ) || ! session . isOpened ( ) ) { </a> 
<a> <RARE_TOKEN> . setText ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> post <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = null ; </a> 
<a> return ; </a> 
<a> } </a> 
<a> List < String > permissions = session . getPermissions ( ) ; </a> 
<a> if ( ! permissions . <RARE_TOKEN> ( <RARE_TOKEN> ) ) { </a> 
<a> Session . <RARE_TOKEN> <RARE_TOKEN> = new Session . <RARE_TOKEN> ( this , <RARE_TOKEN> ) ; </a> 
<a> session . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> return ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> . setText ( <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> String <RARE_TOKEN> = <RARE_TOKEN> . getString ( <RARE_TOKEN> ) ; </a> 
<a> boolean <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> boolean <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> boolean result = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> action = GraphObject . Factory . create ( <RARE_TOKEN> . class ) ; </a> 
<a> action . <RARE_TOKEN> ( result ) ; </a> 
<a> action . <RARE_TOKEN> ( <RARE_TOKEN> ( <RARE_TOKEN> ) ) ; </a> 
<a> action . <RARE_TOKEN> ( <RARE_TOKEN> ( <RARE_TOKEN> ) ) ; </a> 
<a> Request . Callback callback = new Request . Callback ( ) { </a> 
<a> @ Override </a> 
<a> public void onCompleted ( Response response ) { </a> 
<a> <RARE_TOKEN> ( response ) ; </a> 
<a> } </a> 
<a> } ; </a> 
<a> Request request = new Request ( session , <RARE_TOKEN> , null , HttpMethod . POST , </a> 
<a> callback ) ; </a> 
<a> request . <RARE_TOKEN> ( action ) ; </a> 
<a> <RARE_TOKEN> task = new <RARE_TOKEN> ( request ) ; </a> 
<a> task . execute ( ) ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( Response response ) { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = response . <RARE_TOKEN> ( <RARE_TOKEN> . class ) ; </a> 
<a> if ( <RARE_TOKEN> != null && <RARE_TOKEN> . getId ( ) != null ) { </a> 
<a> <RARE_TOKEN> . setText ( <RARE_TOKEN> id = " + <RARE_TOKEN> . getId ( ) ) ; </a> 
<a> } else if ( response . getError ( ) != null ) { </a> 
<a> <RARE_TOKEN> . setText ( response . getError ( ) . <RARE_TOKEN> ( ) ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> . setText ( "" ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> ( boolean value ) { </a> 
<a> if ( value ) { </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> <RARE_TOKEN> object = GraphObject . Factory </a> 
<a> . create ( <RARE_TOKEN> . class ) ; </a> 
<a> object . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = object ; </a> 
<a> } </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } else { </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> <RARE_TOKEN> object = GraphObject . Factory </a> 
<a> . create ( <RARE_TOKEN> . class ) ; </a> 
<a> object . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = object ; </a> 
<a> } </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( ) { </a> 
<a> GraphUser user = <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> if ( user != null ) { </a> 
<a> <RARE_TOKEN> ( user . getId ( ) ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( String <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> . setVisibility ( View . <RARE_TOKEN> ) ; </a> 
<a> String <RARE_TOKEN> = String . format ( <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> String <RARE_TOKEN> = String . format ( <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> Request <RARE_TOKEN> = new Request ( Session . getActiveSession ( ) , <RARE_TOKEN> , null , HttpMethod . GET ) ; </a> 
<a> Request <RARE_TOKEN> = new Request ( Session . getActiveSession ( ) , <RARE_TOKEN> , null , HttpMethod . GET ) ; </a> 
<a> RequestBatch batch = new RequestBatch ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> if ( pendingRequest != null ) { </a> 
<a> pendingRequest . cancel ( true ) ; </a> 
<a> } </a> 
<a> pendingRequest = new <RARE_TOKEN> ( batch ) { </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( List < Response > result ) { </a> 
<a> if ( pendingRequest == this ) { </a> 
<a> pendingRequest = null ; </a> 
<a> <RARE_TOKEN> . this . <RARE_TOKEN> ( result ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } ; </a> 
<a> pendingRequest . execute ( ) ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( List < Response > result ) { </a> 
<a> <RARE_TOKEN> . setVisibility ( View . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ( result ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> private ArrayList < <RARE_TOKEN> > <RARE_TOKEN> ( List < Response > result ) { </a> 
<a> ArrayList < <RARE_TOKEN> > <RARE_TOKEN> = new ArrayList < <RARE_TOKEN> > ( ) ; </a> 
<a> for ( Response response : result ) { </a> 
<a> if ( response . getError ( ) != null ) { </a> 
<a> continue ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> list = response . <RARE_TOKEN> ( <RARE_TOKEN> . class ) ; </a> 
<a> List < <RARE_TOKEN> > <RARE_TOKEN> = list . getData ( ) . <RARE_TOKEN> ( <RARE_TOKEN> . class ) ; </a> 
<a> for ( <RARE_TOKEN> action : <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> . add ( <RARE_TOKEN> ( action ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> Collections . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( <RARE_TOKEN> < <RARE_TOKEN> > <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> cursor = <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> int id = 0 ; </a> 
<a> for ( <RARE_TOKEN> <RARE_TOKEN> : <RARE_TOKEN> ) { </a> 
<a> Object [ ] <RARE_TOKEN> = new Object [ 3 ] ; </a> 
<a> <RARE_TOKEN> [ 0 ] = id ++ ; </a> 
<a> <RARE_TOKEN> [ 1 ] = <RARE_TOKEN> . format ( <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> [ 2 ] = <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> cursor . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( cursor ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> ( ) { </a> 
<a> String [ ] <RARE_TOKEN> = { <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> } ; </a> 
<a> return new <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> ( <RARE_TOKEN> action ) { </a> 
<a> String <RARE_TOKEN> = <RARE_TOKEN> ( action ) ; </a> 
<a> Date <RARE_TOKEN> = action . <RARE_TOKEN> ( ) ; </a> 
<a> return new <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> private String <RARE_TOKEN> ( <RARE_TOKEN> action ) { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = action . getData ( ) ; </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> return "" ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> Boolean <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> String <RARE_TOKEN> = action . getType ( ) ; </a> 
<a> if ( <RARE_TOKEN> . equals ( <RARE_TOKEN> ) ) { </a> 
<a> <RARE_TOKEN> = getString ( R . string . <RARE_TOKEN> ) ; </a> 
<a> } else if ( <RARE_TOKEN> . equals ( <RARE_TOKEN> ) ) { </a> 
<a> <RARE_TOKEN> = getString ( R . string . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( ( <RARE_TOKEN> == null ) || ( <RARE_TOKEN> == null ) || ( <RARE_TOKEN> == null ) || ( <RARE_TOKEN> == null ) ) { </a> 
<a> return "" ; </a> 
<a> } </a> 
<a> return String . format ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> = <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> ( ) , <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> ( ) , <RARE_TOKEN> . toString ( ) ) ; </a> 
<a> } </a> 
<a> private Boolean <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> String <RARE_TOKEN> = <RARE_TOKEN> . toString ( ) ; </a> 
<a> if ( <RARE_TOKEN> . startsWith ( <RARE_TOKEN> ) ) { </a> 
<a> return Boolean . <RARE_TOKEN> ; </a> 
<a> } else if ( <RARE_TOKEN> . startsWith ( <RARE_TOKEN> ) ) { </a> 
<a> return Boolean . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<a> return null ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( ) { </a> 
<a> Boolean <RARE_TOKEN> = <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> if ( Boolean . <RARE_TOKEN> . equals ( <RARE_TOKEN> ) ) { </a> 
<a> <RARE_TOKEN> . setVisibility ( View . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( R . <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> } else if ( Boolean . <RARE_TOKEN> . equals ( <RARE_TOKEN> ) ) { </a> 
<a> <RARE_TOKEN> . setVisibility ( View . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( R . <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( View . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private boolean <RARE_TOKEN> ( ) { </a> 
<a> Session <RARE_TOKEN> = Session . getActiveSession ( ) ; </a> 
<a> if ( <RARE_TOKEN> == null || ! <RARE_TOKEN> . isOpened ( ) ) { </a> 
<a> AccessToken accessToken = AccessToken . <RARE_TOKEN> ( <RARE_TOKEN> ( ) ) ; </a> 
<a> if ( accessToken != null ) { </a> 
<a> Session <RARE_TOKEN> = new Session . Builder ( this ) . <RARE_TOKEN> ( new <RARE_TOKEN> ( ) ) </a> 
<a> . build ( ) ; </a> 
<a> <RARE_TOKEN> . open ( accessToken , null ) ; </a> 
<a> Session . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> Boolean <RARE_TOKEN> = <RARE_TOKEN> ( <RARE_TOKEN> ( ) . getData ( ) ) ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ( <RARE_TOKEN> ) ) ; </a> 
<a> return true ; </a> 
<a> } </a> 
<a> return false ; </a> 
<a> } </a> 
<a> private int <RARE_TOKEN> ( Boolean value ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> if ( Boolean . <RARE_TOKEN> . equals ( value ) ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } else if ( Boolean . <RARE_TOKEN> . equals ( value ) ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } else { </a> 
<a> return - 1 ; </a> 
<a> } </a> 
<a> } </a> 
<a> private Boolean <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> int position = <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> if ( position == <RARE_TOKEN> ) { </a> 
<a> return Boolean . <RARE_TOKEN> ; </a> 
<a> } else if ( position == <RARE_TOKEN> ) { </a> 
<a> return Boolean . <RARE_TOKEN> ; </a> 
<a> } else { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( ) { </a> 
<a> if ( ( <RARE_TOKEN> < 0 ) || ( <RARE_TOKEN> < 0 ) ) { </a> 
<a> String [ ] <RARE_TOKEN> = getResources ( ) . <RARE_TOKEN> ( R . array . <RARE_TOKEN> ) ; </a> 
<a> List < String > <RARE_TOKEN> = Arrays . asList ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . indexOf ( getString ( R . string . <RARE_TOKEN> ) ) ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . indexOf ( getString ( R . string . <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private void onError ( Exception error ) { </a> 
<a> <RARE_TOKEN> ( error . getMessage ( ) ) ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( String message ) { </a> 
<a> new <RARE_TOKEN> . Builder ( this ) </a> 
<a> . <RARE_TOKEN> ( R . string . <RARE_TOKEN> ) </a> 
<a> . <RARE_TOKEN> ( message ) </a> 
<a> . <RARE_TOKEN> ( R . string . <RARE_TOKEN> , null ) </a> 
<a> . show ( ) ; </a> 
<a> } </a> 
<a> private < T > T <RARE_TOKEN> ( List < T > <RARE_TOKEN> ) { </a> 
<a> for ( T t : <RARE_TOKEN> ) { </a> 
<a> return t ; </a> 
<a> } </a> 
<a> return null ; </a> 
<a> } </a> 
<a> private interface <RARE_TOKEN> extends GraphUser { </a> 
<a> Boolean <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> private static class <RARE_TOKEN> implements <RARE_TOKEN> < <RARE_TOKEN> > , <RARE_TOKEN> { </a> 
<a> final String <RARE_TOKEN> ; </a> 
<a> final Date <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> ( String <RARE_TOKEN> , Date <RARE_TOKEN> ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int <RARE_TOKEN> ( <RARE_TOKEN> other ) { </a> 
<a> if ( other == null ) { </a> 
<a> return 1 ; </a> 
<a> } else { </a> 
<a> return <RARE_TOKEN> . <RARE_TOKEN> ( other . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int <RARE_TOKEN> ( ) { </a> 
<a> return 0 ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> , int <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> . getTime ( ) ) ; </a> 
<a> } </a> 
<a> @ SuppressWarnings ( <RARE_TOKEN> ) </a> 
<a> public final <RARE_TOKEN> < <RARE_TOKEN> > <RARE_TOKEN> = new <RARE_TOKEN> < <RARE_TOKEN> > ( ) { </a> 
<a> @ Override </a> 
<a> public <RARE_TOKEN> <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> String <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> Date <RARE_TOKEN> = new Date ( <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> return new <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public <RARE_TOKEN> [ ] <RARE_TOKEN> ( int size ) { </a> 
<a> return new <RARE_TOKEN> [ size ] ; </a> 
<a> } </a> 
<a> } ; </a> 
<a> } </a> 
<a> private interface <RARE_TOKEN> extends GraphObject { </a> 
<a> void <RARE_TOKEN> ( String url ) ; </a> 
<a> String <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> private interface <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> Boolean <RARE_TOKEN> ( ) ; </a> 
<a> void <RARE_TOKEN> ( Boolean result ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> ( ) ; </a> 
<a> void <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> ( ) ; </a> 
<a> void <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> private interface <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> <RARE_TOKEN> getData ( ) ; </a> 
<a> String getType ( ) ; </a> 
<a> } </a> 
<a> private interface <RARE_TOKEN> extends GraphObject { </a> 
<a> String getId ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package com . facebook . samples . <RARE_TOKEN> ; </a> 
<a> import android . content . Intent ; </a> 
<a> import android . os . Bundle ; </a> 
<a> import android . support . v4 . app . <RARE_TOKEN> ; </a> 
<a> import android . text . <RARE_TOKEN> ; </a> 
<a> import android . view . View ; </a> 
<a> import android . widget . Button ; </a> 
<a> import android . widget . TextView ; </a> 
<a> import com . facebook . model . GraphUser ; </a> 
<a> import com . facebook . Session ; </a> 
<a> import java . util . ArrayList ; </a> 
<a> import java . util . Collection ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> private static final int <RARE_TOKEN> = 1 ; </a> 
<a> private Button <RARE_TOKEN> ; </a> 
<a> private TextView <RARE_TOKEN> ; </a> 
<a> @ Override </a> 
<a> public void onCreate ( Bundle savedInstanceState ) { </a> 
<a> super . onCreate ( savedInstanceState ) ; </a> 
<a> <RARE_TOKEN> ( R . layout . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = ( TextView ) findViewById ( R . id . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = ( Button ) findViewById ( R . id . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . setOnClickListener ( new View . OnClickListener ( ) { </a> 
<a> public void onClick ( View view ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> if ( Session . getActiveSession ( ) == null || </a> 
<a> Session . getActiveSession ( ) . <RARE_TOKEN> ( ) ) { </a> 
<a> Session . <RARE_TOKEN> ( this , true , null ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( ) { </a> 
<a> super . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public void onActivityResult ( int requestCode , int resultCode , Intent data ) { </a> 
<a> switch ( requestCode ) { </a> 
<a> case <RARE_TOKEN> : </a> 
<a> <RARE_TOKEN> ( resultCode ) ; </a> 
<a> break ; </a> 
<a> default : </a> 
<a> Session . getActiveSession ( ) . onActivityResult ( this , requestCode , resultCode , data ) ; </a> 
<a> break ; </a> 
<a> } </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( int resultCode ) { </a> 
<a> String <RARE_TOKEN> = "" ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = ( <RARE_TOKEN> ) <RARE_TOKEN> ( ) ; </a> 
<a> Collection < GraphUser > <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> if ( <RARE_TOKEN> != null && <RARE_TOKEN> . size ( ) > 0 ) { </a> 
<a> ArrayList < String > names = new ArrayList < String > ( ) ; </a> 
<a> for ( GraphUser user : <RARE_TOKEN> ) { </a> 
<a> names . add ( user . getName ( ) ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( ", " , names ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> . setText ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = ( <RARE_TOKEN> ) <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( null ) ; </a> 
<a> Intent intent = new Intent ( this , <RARE_TOKEN> . class ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( intent , null , true , true ) ; </a> 
<a> <RARE_TOKEN> ( intent , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package com . facebook . samples . <RARE_TOKEN> ; </a> 
<a> import android . app . <RARE_TOKEN> ; </a> 
<a> import android . content . Intent ; </a> 
<a> import android . os . Bundle ; </a> 
<a> import android . support . v4 . app . <RARE_TOKEN> ; </a> 
<a> import android . support . v4 . app . <RARE_TOKEN> ; </a> 
<a> import com . facebook . FacebookException ; </a> 
<a> import com . facebook . widget . <RARE_TOKEN> ; </a> 
<a> import com . facebook . widget . PickerFragment ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> public static void <RARE_TOKEN> ( Intent intent , String <RARE_TOKEN> , boolean <RARE_TOKEN> , boolean <RARE_TOKEN> ) { </a> 
<a> intent . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> intent . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> intent . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void onCreate ( Bundle savedInstanceState ) { </a> 
<a> super . onCreate ( savedInstanceState ) ; </a> 
<a> <RARE_TOKEN> ( R . layout . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = <RARE_TOKEN> ( ) ; </a> 
<a> if ( savedInstanceState == null ) { </a> 
<a> final Bundle args = <RARE_TOKEN> ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> = new <RARE_TOKEN> ( args ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) </a> 
<a> . add ( R . id . <RARE_TOKEN> , <RARE_TOKEN> ) </a> 
<a> . <RARE_TOKEN> ( ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> = ( <RARE_TOKEN> ) <RARE_TOKEN> . <RARE_TOKEN> ( R . id . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( new PickerFragment . <RARE_TOKEN> ( ) { </a> 
<a> @ Override </a> 
<a> public void onError ( PickerFragment < ? > fragment , FacebookException error ) { </a> 
<a> <RARE_TOKEN> . this . onError ( error ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( new PickerFragment . <RARE_TOKEN> ( ) { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( PickerFragment < ? > fragment ) { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = ( <RARE_TOKEN> ) <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> , null ) ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> } </a> 
<a> private void onError ( Exception error ) { </a> 
<a> new <RARE_TOKEN> . Builder ( this ) </a> 
<a> . <RARE_TOKEN> ( R . string . <RARE_TOKEN> ) </a> 
<a> . <RARE_TOKEN> ( error . getMessage ( ) ) </a> 
<a> . <RARE_TOKEN> ( R . string . <RARE_TOKEN> , null ) </a> 
<a> . show ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( ) { </a> 
<a> super . <RARE_TOKEN> ( ) ; </a> 
<a> try { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( false ) ; </a> 
<a> } catch ( Exception ex ) { </a> 
<a> onError ( ex ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package com . facebook . samples . <RARE_TOKEN> ; </a> 
<a> import android . app . Activity ; </a> 
<a> import android . app . <RARE_TOKEN> ; </a> 
<a> import android . content . Intent ; </a> 
<a> import android . os . Bundle ; </a> 
<a> import android . view . View ; </a> 
<a> import android . view . View . OnClickListener ; </a> 
<a> import android . widget . Button ; </a> 
<a> import android . widget . <RARE_TOKEN> ; </a> 
<a> import android . widget . TextView ; </a> 
<a> import com . facebook . * ; </a> 
<a> import com . facebook . Session . StatusCallback ; </a> 
<a> import com . facebook . model . GraphObject ; </a> 
<a> import java . util . ArrayList ; </a> 
<a> import java . util . List ; </a> 
<a> public class <RARE_TOKEN> extends Activity { </a> 
<a> static final String applicationId = <RARE_TOKEN> ; </a> 
<a> static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> Button <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> TextView <RARE_TOKEN> ; </a> 
<a> Session session ; </a> 
<a> boolean pendingRequest ; </a> 
<a> @ Override </a> 
<a> public void onCreate ( Bundle savedInstanceState ) { </a> 
<a> super . onCreate ( savedInstanceState ) ; </a> 
<a> <RARE_TOKEN> ( R . layout . <RARE_TOKEN> ) ; </a> 
<a> this . <RARE_TOKEN> = ( Button ) findViewById ( R . id . <RARE_TOKEN> ) ; </a> 
<a> this . <RARE_TOKEN> . setOnClickListener ( new OnClickListener ( ) { </a> 
<a> public void onClick ( View view ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> this . <RARE_TOKEN> = ( <RARE_TOKEN> ) findViewById ( R . id . <RARE_TOKEN> ) ; </a> 
<a> this . <RARE_TOKEN> = ( TextView ) findViewById ( R . id . <RARE_TOKEN> ) ; </a> 
<a> this . session = <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( LoggingBehavior . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public void onActivityResult ( int requestCode , int resultCode , Intent data ) { </a> 
<a> if ( this . session . onActivityResult ( this , requestCode , resultCode , data ) && </a> 
<a> pendingRequest && </a> 
<a> this . session . <RARE_TOKEN> ( ) . isOpened ( ) ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( Bundle savedInstanceState ) { </a> 
<a> super . <RARE_TOKEN> ( savedInstanceState ) ; </a> 
<a> pendingRequest = savedInstanceState . <RARE_TOKEN> ( <RARE_TOKEN> , pendingRequest ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void onSaveInstanceState ( Bundle outState ) { </a> 
<a> super . onSaveInstanceState ( outState ) ; </a> 
<a> outState . <RARE_TOKEN> ( <RARE_TOKEN> , pendingRequest ) ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( ) { </a> 
<a> if ( this . session . isOpened ( ) ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } else { </a> 
<a> StatusCallback callback = new StatusCallback ( ) { </a> 
<a> public void <RARE_TOKEN> ( Session session , SessionState state , Exception exception ) { </a> 
<a> if ( exception != null ) { </a> 
<a> new <RARE_TOKEN> . Builder ( <RARE_TOKEN> . this ) </a> 
<a> . <RARE_TOKEN> ( R . string . <RARE_TOKEN> ) </a> 
<a> . <RARE_TOKEN> ( exception . getMessage ( ) ) </a> 
<a> . <RARE_TOKEN> ( R . string . <RARE_TOKEN> , null ) </a> 
<a> . show ( ) ; </a> 
<a> <RARE_TOKEN> . this . session = <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } ; </a> 
<a> pendingRequest = true ; </a> 
<a> this . session . <RARE_TOKEN> ( new Session . OpenRequest ( this ) . setCallback ( callback ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> . setText ( "" ) ; </a> 
<a> String <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( ) . toString ( ) ; </a> 
<a> String [ ] <RARE_TOKEN> = <RARE_TOKEN> . split ( <RARE_TOKEN> ) ; </a> 
<a> List < Request > requests = new ArrayList < Request > ( ) ; </a> 
<a> for ( final String <RARE_TOKEN> : <RARE_TOKEN> ) { </a> 
<a> requests . add ( new Request ( session , <RARE_TOKEN> , null , null , new Request . Callback ( ) { </a> 
<a> public void onCompleted ( Response response ) { </a> 
<a> GraphObject graphObject = response . <RARE_TOKEN> ( ) ; </a> 
<a> FacebookRequestError error = response . getError ( ) ; </a> 
<a> String s = <RARE_TOKEN> . <RARE_TOKEN> ( ) . toString ( ) ; </a> 
<a> if ( graphObject != null ) { </a> 
<a> if ( graphObject . getProperty ( <RARE_TOKEN> ) != null ) { </a> 
<a> s = s + String . format ( <RARE_TOKEN> <RARE_TOKEN> , graphObject . getProperty ( <RARE_TOKEN> ) , graphObject . getProperty ( </a> 
<a> "name" ) ) ; </a> 
<a> } else { </a> 
<a> s = s + String . format ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } else if ( error != null ) { </a> 
<a> s = s + String . format ( <RARE_TOKEN> <RARE_TOKEN> , error . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> . setText ( s ) ; </a> 
<a> } </a> 
<a> } ) ) ; </a> 
<a> } </a> 
<a> pendingRequest = false ; </a> 
<a> Request . <RARE_TOKEN> ( requests ) ; </a> 
<a> } </a> 
<a> private Session <RARE_TOKEN> ( ) { </a> 
<a> Session <RARE_TOKEN> = Session . getActiveSession ( ) ; </a> 
<a> if ( <RARE_TOKEN> == null || <RARE_TOKEN> . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( ) ) { </a> 
<a> <RARE_TOKEN> = new Session . Builder ( this ) . <RARE_TOKEN> ( applicationId ) . build ( ) ; </a> 
<a> Session . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package com . facebook . android ; </a> 
<a> import com . facebook . android . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> public abstract class <RARE_TOKEN> implements <RARE_TOKEN> { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( FacebookError e ) { </a> 
<a> e . printStackTrace ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void onError ( <RARE_TOKEN> e ) { </a> 
<a> e . printStackTrace ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package com . facebook . android ; </a> 
<a> import android . app . Activity ; </a> 
<a> import android . app . <RARE_TOKEN> ; </a> 
<a> import android . app . <RARE_TOKEN> ; </a> 
<a> import android . content . Context ; </a> 
<a> import android . os . Bundle ; </a> 
<a> import android . os . Handler ; </a> 
<a> import android . view . View ; </a> 
<a> import android . view . ViewGroup . LayoutParams ; </a> 
<a> import android . view . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import android . widget . Button ; </a> 
<a> import android . widget . <RARE_TOKEN> ; </a> 
<a> import android . widget . TextView ; </a> 
<a> import org . json . JSONArray ; </a> 
<a> import org . json . JSONException ; </a> 
<a> import org . json . JSONObject ; </a> 
<a> @ SuppressWarnings ( <RARE_TOKEN> ) </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> private TextView <RARE_TOKEN> ; </a> 
<a> private Button <RARE_TOKEN> ; </a> 
<a> private Activity activity ; </a> 
<a> private Handler <RARE_TOKEN> ; </a> 
<a> private <RARE_TOKEN> dialog ; </a> 
<a> public <RARE_TOKEN> ( Activity activity ) { </a> 
<a> super ( activity ) ; </a> 
<a> this . activity = activity ; </a> 
<a> <RARE_TOKEN> ( R . string . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void onCreate ( Bundle savedInstanceState ) { </a> 
<a> super . onCreate ( savedInstanceState ) ; </a> 
<a> <RARE_TOKEN> = new Handler ( ) ; </a> 
<a> <RARE_TOKEN> ( R . layout . <RARE_TOKEN> ) ; </a> 
<a> LayoutParams params = <RARE_TOKEN> ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> params . <RARE_TOKEN> = LayoutParams . <RARE_TOKEN> ; </a> 
<a> params . <RARE_TOKEN> = LayoutParams . <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> ( ) . <RARE_TOKEN> ( ( android . view . <RARE_TOKEN> . LayoutParams ) params ) ; </a> 
<a> <RARE_TOKEN> = ( <RARE_TOKEN> ) findViewById ( R . id . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = ( TextView ) findViewById ( R . id . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = ( Button ) findViewById ( R . id . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . setOnClickListener ( new View . OnClickListener ( ) { </a> 
<a> @ Override </a> 
<a> public void onClick ( View v ) { </a> 
<a> ( ( <RARE_TOKEN> ) activity . <RARE_TOKEN> ( Context . <RARE_TOKEN> ) ) </a> 
<a> . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ( ) , 0 ) ; </a> 
<a> dialog = <RARE_TOKEN> . show ( <RARE_TOKEN> . this . activity , "" , </a> 
<a> <RARE_TOKEN> . this . activity . getString ( R . string . <RARE_TOKEN> ) , true , true ) ; </a> 
<a> String <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( ) . toString ( ) ; </a> 
<a> Bundle params = new Bundle ( ) ; </a> 
<a> params . putString ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> params . putString ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> Utility . <RARE_TOKEN> . request ( null , params , new <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> } </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( final String response , final Object state ) { </a> 
<a> dialog . dismiss ( ) ; </a> 
<a> try { </a> 
<a> JSONArray json = new JSONArray ( response ) ; </a> 
<a> setText ( json . toString ( 2 ) ) ; </a> 
<a> } catch ( JSONException e ) { </a> 
<a> try { </a> 
<a> JSONObject json = new JSONObject ( response ) ; </a> 
<a> setText ( json . toString ( 2 ) ) ; </a> 
<a> } catch ( JSONException <RARE_TOKEN> ) { </a> 
<a> setText ( activity . getString ( R . string . exception ) + <RARE_TOKEN> . getMessage ( ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( FacebookError error ) { </a> 
<a> dialog . dismiss ( ) ; </a> 
<a> setText ( activity . getString ( R . string . <RARE_TOKEN> ) + error . getMessage ( ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public void setText ( final String <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> . post ( new Runnable ( ) { </a> 
<a> @ Override </a> 
<a> public void run ( ) { </a> 
<a> <RARE_TOKEN> . setText ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . setVisibility ( View . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package com . facebook . android ; </a> 
<a> import android . <RARE_TOKEN> . Bitmap ; </a> 
<a> import android . os . <RARE_TOKEN> ; </a> 
<a> import android . widget . <RARE_TOKEN> ; </a> 
<a> import java . util . <RARE_TOKEN> ; </a> 
<a> import java . util . <RARE_TOKEN> ; </a> 
<a> public class <RARE_TOKEN> { </a> 
<a> <RARE_TOKEN> < String , Bitmap > <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> < String , String > <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> listener ; </a> 
<a> int <RARE_TOKEN> = 0 ; </a> 
<a> <RARE_TOKEN> < <RARE_TOKEN> > queue ; </a> 
<a> final static int <RARE_TOKEN> = 15 ; </a> 
<a> public <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> = new <RARE_TOKEN> < String , Bitmap > ( ) ; </a> 
<a> <RARE_TOKEN> = new <RARE_TOKEN> < String , String > ( ) ; </a> 
<a> queue = new <RARE_TOKEN> < <RARE_TOKEN> > ( ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( <RARE_TOKEN> listener ) { </a> 
<a> this . listener = listener ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> . clear ( ) ; </a> 
<a> <RARE_TOKEN> = 0 ; </a> 
<a> queue . clear ( ) ; </a> 
<a> } </a> 
<a> public Bitmap <RARE_TOKEN> ( String <RARE_TOKEN> , String url ) { </a> 
<a> Bitmap <RARE_TOKEN> = <RARE_TOKEN> . get ( <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> if ( ! <RARE_TOKEN> . containsKey ( <RARE_TOKEN> ) ) { </a> 
<a> <RARE_TOKEN> . put ( <RARE_TOKEN> , "" ) ; </a> 
<a> if ( <RARE_TOKEN> >= <RARE_TOKEN> ) { </a> 
<a> queue . <RARE_TOKEN> ( new <RARE_TOKEN> ( <RARE_TOKEN> , url ) ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> ++ ; </a> 
<a> new <RARE_TOKEN> ( ) . execute ( <RARE_TOKEN> , url ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> return null ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> if ( ! queue . isEmpty ( ) ) { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = queue . <RARE_TOKEN> ( ) ; </a> 
<a> new <RARE_TOKEN> ( ) . execute ( <RARE_TOKEN> . <RARE_TOKEN> , <RARE_TOKEN> . url ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private class <RARE_TOKEN> extends <RARE_TOKEN> < Object , Void , Bitmap > { </a> 
<a> String <RARE_TOKEN> ; </a> 
<a> @ Override </a> 
<a> protected Bitmap <RARE_TOKEN> ( Object ... params ) { </a> 
<a> this . <RARE_TOKEN> = ( String ) params [ 0 ] ; </a> 
<a> String url = ( String ) params [ 1 ] ; </a> 
<a> return Utility . <RARE_TOKEN> ( url ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( Bitmap result ) { </a> 
<a> <RARE_TOKEN> -- ; </a> 
<a> if ( result != null ) { </a> 
<a> <RARE_TOKEN> . put ( <RARE_TOKEN> , result ) ; </a> 
<a> listener . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> class <RARE_TOKEN> { </a> 
<a> String <RARE_TOKEN> ; </a> 
<a> String url ; </a> 
<a> public <RARE_TOKEN> ( String <RARE_TOKEN> , String url ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> this . url = url ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package com . facebook . android ; </a> 
<a> import android . app . Activity ; </a> 
<a> import android . app . <RARE_TOKEN> ; </a> 
<a> import android . content . DialogInterface ; </a> 
<a> import android . os . Bundle ; </a> 
<a> import android . os . Handler ; </a> 
<a> import android . view . <RARE_TOKEN> ; </a> 
<a> import android . view . View ; </a> 
<a> import android . view . ViewGroup ; </a> 
<a> import android . widget . * ; </a> 
<a> import android . widget . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import org . json . JSONArray ; </a> 
<a> import org . json . JSONException ; </a> 
<a> import org . json . JSONObject ; </a> 
<a> public class <RARE_TOKEN> extends Activity implements <RARE_TOKEN> { </a> 
<a> private Handler <RARE_TOKEN> ; </a> 
<a> protected <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> protected static JSONArray jsonArray ; </a> 
<a> protected String <RARE_TOKEN> ; </a> 
<a> @ Override </a> 
<a> public void onCreate ( Bundle savedInstanceState ) { </a> 
<a> super . onCreate ( savedInstanceState ) ; </a> 
<a> <RARE_TOKEN> = new Handler ( ) ; </a> 
<a> <RARE_TOKEN> ( R . layout . <RARE_TOKEN> ) ; </a> 
<a> Bundle extras = <RARE_TOKEN> ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> String <RARE_TOKEN> = extras . getString ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = extras . getString ( <RARE_TOKEN> ) ; </a> 
<a> try { </a> 
<a> if ( <RARE_TOKEN> . equals ( <RARE_TOKEN> ) ) { </a> 
<a> jsonArray = new JSONObject ( <RARE_TOKEN> ) . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } else { </a> 
<a> jsonArray = new JSONArray ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } catch ( JSONException e ) { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> " + e . getMessage ( ) ) ; </a> 
<a> return ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> = ( <RARE_TOKEN> ) findViewById ( R . id . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( this ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( new <RARE_TOKEN> ( this ) ) ; </a> 
<a> <RARE_TOKEN> ( getString ( R . string . <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> @ SuppressWarnings ( <RARE_TOKEN> ) </a> 
<a> public void <RARE_TOKEN> ( <RARE_TOKEN> < ? > <RARE_TOKEN> , View v , int position , long <RARE_TOKEN> ) { </a> 
<a> try { </a> 
<a> final long <RARE_TOKEN> ; </a> 
<a> if ( <RARE_TOKEN> . equals ( <RARE_TOKEN> ) ) { </a> 
<a> <RARE_TOKEN> = jsonArray . <RARE_TOKEN> ( position ) . getLong ( <RARE_TOKEN> ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> = jsonArray . <RARE_TOKEN> ( position ) . getLong ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> String name = jsonArray . <RARE_TOKEN> ( position ) . getString ( "name" ) ; </a> 
<a> new <RARE_TOKEN> . Builder ( this ) . <RARE_TOKEN> ( R . string . <RARE_TOKEN> ) </a> 
<a> . <RARE_TOKEN> ( String . format ( getString ( R . string . <RARE_TOKEN> ) , name ) ) </a> 
<a> . <RARE_TOKEN> ( R . string . <RARE_TOKEN> , new DialogInterface . OnClickListener ( ) { </a> 
<a> @ Override </a> 
<a> public void onClick ( DialogInterface dialog , int <RARE_TOKEN> ) { </a> 
<a> Bundle params = new Bundle ( ) ; </a> 
<a> params . putString ( <RARE_TOKEN> , String . valueOf ( <RARE_TOKEN> ) ) ; </a> 
<a> params . putString ( <RARE_TOKEN> , getString ( R . string . <RARE_TOKEN> ) ) ; </a> 
<a> params . putString ( <RARE_TOKEN> , getString ( R . string . <RARE_TOKEN> ) ) ; </a> 
<a> params . putString ( <RARE_TOKEN> , Utility . <RARE_TOKEN> ) ; </a> 
<a> params . putString ( "name" , getString ( R . string . <RARE_TOKEN> ) ) ; </a> 
<a> Utility . <RARE_TOKEN> . dialog ( <RARE_TOKEN> . this , <RARE_TOKEN> , params , </a> 
<a> new <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> } ) . <RARE_TOKEN> ( R . string . <RARE_TOKEN> , null ) . show ( ) ; </a> 
<a> } catch ( JSONException e ) { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> " + e . getMessage ( ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( Bundle values ) { </a> 
<a> final String <RARE_TOKEN> = values . getString ( <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> the <RARE_TOKEN> ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> message <RARE_TOKEN> <RARE_TOKEN> the <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( final String msg ) { </a> 
<a> <RARE_TOKEN> . post ( new Runnable ( ) { </a> 
<a> @ Override </a> 
<a> public void run ( ) { </a> 
<a> Toast <RARE_TOKEN> = Toast . <RARE_TOKEN> ( <RARE_TOKEN> . this , msg , Toast . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . show ( ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> } </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> public <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> if ( Utility . model == null ) { </a> 
<a> Utility . model = new <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> Utility . model . <RARE_TOKEN> ( this ) ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . from ( <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int <RARE_TOKEN> ( ) { </a> 
<a> return jsonArray . length ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public Object <RARE_TOKEN> ( int position ) { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public long <RARE_TOKEN> ( int position ) { </a> 
<a> return 0 ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public View <RARE_TOKEN> ( int position , View <RARE_TOKEN> , ViewGroup parent ) { </a> 
<a> JSONObject jsonObject = null ; </a> 
<a> try { </a> 
<a> jsonObject = jsonArray . <RARE_TOKEN> ( position ) ; </a> 
<a> } catch ( JSONException <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> . printStackTrace ( ) ; </a> 
<a> } </a> 
<a> View <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( R . layout . <RARE_TOKEN> , null ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> = ( <RARE_TOKEN> ) <RARE_TOKEN> . findViewById ( R . id . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . name = ( TextView ) <RARE_TOKEN> . findViewById ( R . id . name ) ; </a> 
<a> <RARE_TOKEN> . info = ( TextView ) <RARE_TOKEN> . findViewById ( R . id . info ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = ( <RARE_TOKEN> ) <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> try { </a> 
<a> if ( <RARE_TOKEN> . equals ( <RARE_TOKEN> ) ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> ( Utility . model . <RARE_TOKEN> ( </a> 
<a> jsonObject . getString ( <RARE_TOKEN> ) , jsonObject . getString ( <RARE_TOKEN> ) ) ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> ( Utility . model . <RARE_TOKEN> ( </a> 
<a> jsonObject . getString ( <RARE_TOKEN> ) , jsonObject . getString ( <RARE_TOKEN> ) ) ) ; </a> 
<a> } </a> 
<a> } catch ( JSONException e ) { </a> 
<a> <RARE_TOKEN> . name . setText ( "" ) ; </a> 
<a> } </a> 
<a> try { </a> 
<a> <RARE_TOKEN> . name . setText ( jsonObject . getString ( "name" ) ) ; </a> 
<a> } catch ( JSONException e ) { </a> 
<a> <RARE_TOKEN> . name . setText ( "" ) ; </a> 
<a> } </a> 
<a> try { </a> 
<a> if ( <RARE_TOKEN> . equals ( <RARE_TOKEN> ) ) { </a> 
<a> <RARE_TOKEN> . info . setText ( jsonObject . <RARE_TOKEN> ( <RARE_TOKEN> ) . getString ( "name" ) ) ; </a> 
<a> } else { </a> 
<a> JSONObject location = jsonObject . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . info . setText ( location . getString ( <RARE_TOKEN> ) + ", " </a> 
<a> + location . getString ( <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> } catch ( JSONException e ) { </a> 
<a> <RARE_TOKEN> . info . setText ( "" ) ; </a> 
<a> } </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<a> class <RARE_TOKEN> { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> TextView name ; </a> 
<a> TextView info ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package com . facebook . android ; </a> 
<a> import android . app . Activity ; </a> 
<a> import android . app . <RARE_TOKEN> ; </a> 
<a> import android . content . Context ; </a> 
<a> import android . content . Intent ; </a> 
<a> import android . net . <RARE_TOKEN> ; </a> 
<a> import android . os . Bundle ; </a> 
<a> import android . os . Handler ; </a> 
<a> import android . text . <RARE_TOKEN> ; </a> 
<a> import android . text . util . <RARE_TOKEN> ; </a> 
<a> import android . text . util . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import android . view . View ; </a> 
<a> import android . view . View . OnClickListener ; </a> 
<a> import android . view . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import android . widget . * ; </a> 
<a> import org . json . JSONException ; </a> 
<a> import org . json . JSONObject ; </a> 
<a> import java . util . Iterator ; </a> 
<a> import java . util . <RARE_TOKEN> ; </a> 
<a> import java . util . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import java . util . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> @ SuppressWarnings ( <RARE_TOKEN> ) </a> 
<a> public class <RARE_TOKEN> extends Activity { </a> 
<a> private Button <RARE_TOKEN> , <RARE_TOKEN> ; </a> 
<a> private Button <RARE_TOKEN> ; </a> 
<a> private Button <RARE_TOKEN> , <RARE_TOKEN> ; </a> 
<a> private Button <RARE_TOKEN> , <RARE_TOKEN> ; </a> 
<a> private TextView <RARE_TOKEN> ; </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> private Bundle params ; </a> 
<a> private String url , <RARE_TOKEN> ; </a> 
<a> private <RARE_TOKEN> dialog ; </a> 
<a> private String <RARE_TOKEN> ; </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> private Handler <RARE_TOKEN> ; </a> 
<a> private final static String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private JSONObject <RARE_TOKEN> ; </a> 
<a> @ Override </a> 
<a> public void onCreate ( Bundle savedInstanceState ) { </a> 
<a> super . onCreate ( savedInstanceState ) ; </a> 
<a> <RARE_TOKEN> = new Handler ( ) ; </a> 
<a> <RARE_TOKEN> ( R . layout . <RARE_TOKEN> ) ; </a> 
<a> url = <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = ( <RARE_TOKEN> ) findViewById ( R . id . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = ( TextView ) findViewById ( R . id . output ) ; </a> 
<a> <RARE_TOKEN> = ( Button ) findViewById ( R . id . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = ( Button ) findViewById ( R . id . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = ( Button ) findViewById ( R . id . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = ( Button ) findViewById ( R . id . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = ( Button ) findViewById ( R . id . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = ( <RARE_TOKEN> ) findViewById ( R . id . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = ( Button ) findViewById ( R . id . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = ( Button ) findViewById ( R . id . <RARE_TOKEN> ) ; </a> 
<a> if ( Utility . <RARE_TOKEN> . <RARE_TOKEN> ( ) ) { </a> 
<a> <RARE_TOKEN> . setVisibility ( View . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> params = new Bundle ( ) ; </a> 
<a> <RARE_TOKEN> . setOnClickListener ( new OnClickListener ( ) { </a> 
<a> @ Override </a> 
<a> public void onClick ( View v ) { </a> 
<a> ( ( <RARE_TOKEN> ) <RARE_TOKEN> ( Context . <RARE_TOKEN> ) ) </a> 
<a> . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ( ) , 0 ) ; </a> 
<a> url = <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( ) . toString ( ) ; </a> 
<a> if ( ! <RARE_TOKEN> . isEmpty ( <RARE_TOKEN> ) ) { </a> 
<a> dialog = <RARE_TOKEN> . show ( <RARE_TOKEN> . this , "" , </a> 
<a> getString ( R . string . <RARE_TOKEN> ) , true , true ) ; </a> 
<a> params . putString ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> Utility . <RARE_TOKEN> . request ( <RARE_TOKEN> , params , new <RARE_TOKEN> ( ) ) ; </a> 
<a> url += "/" + <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> <RARE_TOKEN> . setOnClickListener ( new OnClickListener ( ) { </a> 
<a> @ Override </a> 
<a> public void onClick ( View v ) { </a> 
<a> setText ( url ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> <RARE_TOKEN> . setOnClickListener ( new OnClickListener ( ) { </a> 
<a> @ Override </a> 
<a> public void onClick ( View v ) { </a> 
<a> if ( Utility . <RARE_TOKEN> . <RARE_TOKEN> ( ) ) { </a> 
<a> dialog = <RARE_TOKEN> . show ( <RARE_TOKEN> . this , "" , </a> 
<a> getString ( R . string . <RARE_TOKEN> ) , true , true ) ; </a> 
<a> Bundle params = new Bundle ( ) ; </a> 
<a> params . putString ( <RARE_TOKEN> , Utility . <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> Utility . <RARE_TOKEN> . request ( <RARE_TOKEN> , params , </a> 
<a> new <RARE_TOKEN> ( ) ) ; </a> 
<a> } else { </a> 
<a> new <RARE_TOKEN> ( <RARE_TOKEN> . this ) . show ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> <RARE_TOKEN> . setOnClickListener ( new OnClickListener ( ) { </a> 
<a> @ Override </a> 
<a> public void onClick ( View v ) { </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> for this <RARE_TOKEN> ) ; </a> 
<a> } else { </a> 
<a> new <RARE_TOKEN> ( <RARE_TOKEN> . this , <RARE_TOKEN> ) . show ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> <RARE_TOKEN> . setOnClickListener ( new OnClickListener ( ) { </a> 
<a> @ Override </a> 
<a> public void onClick ( View v ) { </a> 
<a> url = <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = "" ; </a> 
<a> <RARE_TOKEN> . setText ( "" ) ; </a> 
<a> params . clear ( ) ; </a> 
<a> <RARE_TOKEN> = null ; </a> 
<a> setText ( "" ) ; </a> 
<a> <RARE_TOKEN> . setVisibility ( View . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> <RARE_TOKEN> . setOnClickListener ( new OnClickListener ( ) { </a> 
<a> @ Override </a> 
<a> public void onClick ( View v ) { </a> 
<a> <RARE_TOKEN> . setText ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> <RARE_TOKEN> . setOnClickListener ( new OnClickListener ( ) { </a> 
<a> @ Override </a> 
<a> public void onClick ( View v ) { </a> 
<a> <RARE_TOKEN> . setText ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = "" ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> super . <RARE_TOKEN> ( ) ; </a> 
<a> if ( Utility . <RARE_TOKEN> . <RARE_TOKEN> ( ) ) { </a> 
<a> <RARE_TOKEN> . setVisibility ( View . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( Utility . <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> . setText ( Utility . <RARE_TOKEN> ) ; </a> 
<a> Utility . <RARE_TOKEN> = null ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> protected void <RARE_TOKEN> ( Intent <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = <RARE_TOKEN> . getData ( ) ; </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> return ; </a> 
<a> } </a> 
<a> String <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> . setText ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( String connection ) { </a> 
<a> <RARE_TOKEN> . setText ( <RARE_TOKEN> + "/" + connection ) ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( <RARE_TOKEN> < String > <RARE_TOKEN> ) { </a> 
<a> String fields = "" ; </a> 
<a> int count = 0 ; </a> 
<a> for ( String field : <RARE_TOKEN> ) { </a> 
<a> fields += field ; </a> 
<a> if ( ++ count < <RARE_TOKEN> . size ( ) ) { </a> 
<a> fields += <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<a> params . putString ( <RARE_TOKEN> , fields ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( final String response , final Object state ) { </a> 
<a> dialog . dismiss ( ) ; </a> 
<a> Utility . <RARE_TOKEN> . clear ( ) ; </a> 
<a> try { </a> 
<a> JSONObject jsonObject = new JSONObject ( response ) . <RARE_TOKEN> ( <RARE_TOKEN> ) </a> 
<a> . <RARE_TOKEN> ( 0 ) ; </a> 
<a> Iterator < ? > <RARE_TOKEN> = jsonObject . keys ( ) ; </a> 
<a> String <RARE_TOKEN> ; </a> 
<a> while ( <RARE_TOKEN> . <RARE_TOKEN> ( ) ) { </a> 
<a> <RARE_TOKEN> = ( String ) <RARE_TOKEN> . next ( ) ; </a> 
<a> Utility . <RARE_TOKEN> . put ( <RARE_TOKEN> , </a> 
<a> String . valueOf ( jsonObject . getInt ( <RARE_TOKEN> ) ) ) ; </a> 
<a> } </a> 
<a> } catch ( JSONException e ) { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> not be <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> be <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> . post ( new Runnable ( ) { </a> 
<a> @ Override </a> 
<a> public void run ( ) { </a> 
<a> new <RARE_TOKEN> ( <RARE_TOKEN> . this ) . show ( ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( FacebookError error ) { </a> 
<a> dialog . dismiss ( ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> not be <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> be <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . post ( new Runnable ( ) { </a> 
<a> @ Override </a> 
<a> public void run ( ) { </a> 
<a> new <RARE_TOKEN> ( <RARE_TOKEN> . this ) . show ( ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void onActivityResult ( int requestCode , int resultCode , Intent data ) { </a> 
<a> Utility . <RARE_TOKEN> . <RARE_TOKEN> ( requestCode , resultCode , data ) ; </a> 
<a> } </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( final String response , final Object state ) { </a> 
<a> dialog . dismiss ( ) ; </a> 
<a> if ( ! params . isEmpty ( ) ) { </a> 
<a> url += <RARE_TOKEN> + Util . <RARE_TOKEN> ( params ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> = null ; </a> 
<a> params . clear ( ) ; </a> 
<a> try { </a> 
<a> JSONObject json = Util . <RARE_TOKEN> ( response ) ; </a> 
<a> if ( json . has ( <RARE_TOKEN> ) ) { </a> 
<a> <RARE_TOKEN> = json . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> json . remove ( <RARE_TOKEN> ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> = null ; </a> 
<a> } </a> 
<a> setText ( json . toString ( 2 ) ) ; </a> 
<a> } catch ( JSONException e ) { </a> 
<a> setText ( e . getMessage ( ) ) ; </a> 
<a> e . printStackTrace ( ) ; </a> 
<a> } catch ( FacebookError e ) { </a> 
<a> setText ( e . getMessage ( ) ) ; </a> 
<a> e . printStackTrace ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( FacebookError error ) { </a> 
<a> dialog . dismiss ( ) ; </a> 
<a> setText ( error . getMessage ( ) ) ; </a> 
<a> params . clear ( ) ; </a> 
<a> <RARE_TOKEN> = null ; </a> 
<a> } </a> 
<a> } </a> 
<a> public void setText ( final String <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> . post ( new Runnable ( ) { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( ) { </a> 
<a> @ Override </a> 
<a> public final String <RARE_TOKEN> ( final <RARE_TOKEN> <RARE_TOKEN> , String url ) { </a> 
<a> return <RARE_TOKEN> . group ( 1 ) ; </a> 
<a> } </a> 
<a> } ; </a> 
<a> @ Override </a> 
<a> public void run ( ) { </a> 
<a> <RARE_TOKEN> . setVisibility ( </a> 
<a> <RARE_TOKEN> . isEmpty ( <RARE_TOKEN> ) ? View . <RARE_TOKEN> : View . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . setVisibility ( <RARE_TOKEN> . isEmpty ( <RARE_TOKEN> ) ? View . <RARE_TOKEN> </a> 
<a> : View . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . setVisibility ( <RARE_TOKEN> . isEmpty ( <RARE_TOKEN> ) ? View . <RARE_TOKEN> : View . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . setVisibility ( </a> 
<a> <RARE_TOKEN> . isEmpty ( <RARE_TOKEN> ) ? View . <RARE_TOKEN> : View . <RARE_TOKEN> ) ; </a> 
<a> String <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> , "/" ) ; </a> 
<a> <RARE_TOKEN> . setText ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( 0 , 0 ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , null , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( final String msg ) { </a> 
<a> <RARE_TOKEN> . post ( new Runnable ( ) { </a> 
<a> @ Override </a> 
<a> public void run ( ) { </a> 
<a> Toast . <RARE_TOKEN> ( <RARE_TOKEN> . this , msg , Toast . <RARE_TOKEN> ) . show ( ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package com . facebook . android ; </a> 
<a> import android . app . Activity ; </a> 
<a> import android . app . <RARE_TOKEN> ; </a> 
<a> import android . app . <RARE_TOKEN> ; </a> 
<a> import android . content . DialogInterface ; </a> 
<a> import android . content . Intent ; </a> 
<a> import android . net . <RARE_TOKEN> ; </a> 
<a> import android . os . Bundle ; </a> 
<a> import android . os . Handler ; </a> 
<a> import android . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import android . view . <RARE_TOKEN> ; </a> 
<a> import android . view . View ; </a> 
<a> import android . view . ViewGroup ; </a> 
<a> import android . widget . * ; </a> 
<a> import android . widget . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import com . facebook . android . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import com . facebook . android . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import org . json . JSONException ; </a> 
<a> import org . json . JSONObject ; </a> 
<a> import java . io . IOException ; </a> 
<a> @ SuppressWarnings ( <RARE_TOKEN> ) </a> 
<a> public class <RARE_TOKEN> extends Activity implements <RARE_TOKEN> { </a> 
<a> public static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private LoginButton <RARE_TOKEN> ; </a> 
<a> private TextView <RARE_TOKEN> ; </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> private Handler <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> dialog ; </a> 
<a> final static int <RARE_TOKEN> = 0 ; </a> 
<a> final static int <RARE_TOKEN> = 1 ; </a> 
<a> private String <RARE_TOKEN> ; </a> 
<a> private <RARE_TOKEN> list ; </a> 
<a> String [ ] <RARE_TOKEN> = { <RARE_TOKEN> <RARE_TOKEN> , <RARE_TOKEN> <RARE_TOKEN> , <RARE_TOKEN> <RARE_TOKEN> , <RARE_TOKEN> <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> , <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> , <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> , <RARE_TOKEN> <RARE_TOKEN> } ; </a> 
<a> String [ ] permissions = { <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> } ; </a> 
<a> @ Override </a> 
<a> public void onCreate ( Bundle savedInstanceState ) { </a> 
<a> super . onCreate ( savedInstanceState ) ; </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> Util . <RARE_TOKEN> ( this , <RARE_TOKEN> , <RARE_TOKEN> <RARE_TOKEN> ID must be " </a> 
<a> + <RARE_TOKEN> <RARE_TOKEN> running this <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> return ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( R . layout . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = new Handler ( ) ; </a> 
<a> <RARE_TOKEN> = ( TextView ) <RARE_TOKEN> . this . findViewById ( R . id . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = ( <RARE_TOKEN> ) <RARE_TOKEN> . this . findViewById ( R . id . <RARE_TOKEN> ) ; </a> 
<a> Utility . <RARE_TOKEN> = new <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> Utility . <RARE_TOKEN> = new <RARE_TOKEN> ( Utility . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = ( LoginButton ) findViewById ( R . id . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( Utility . <RARE_TOKEN> , this ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( new <RARE_TOKEN> ( ) ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( new <RARE_TOKEN> ( ) ) ; </a> 
<a> <RARE_TOKEN> . init ( this , <RARE_TOKEN> , Utility . <RARE_TOKEN> , permissions ) ; </a> 
<a> if ( Utility . <RARE_TOKEN> . <RARE_TOKEN> ( ) ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> list = ( <RARE_TOKEN> ) findViewById ( R . id . <RARE_TOKEN> ) ; </a> 
<a> list . <RARE_TOKEN> ( this ) ; </a> 
<a> list . <RARE_TOKEN> ( new <RARE_TOKEN> < String > ( this , R . layout . <RARE_TOKEN> , <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> super . <RARE_TOKEN> ( ) ; </a> 
<a> if ( Utility . <RARE_TOKEN> != null ) { </a> 
<a> if ( ! Utility . <RARE_TOKEN> . <RARE_TOKEN> ( ) ) { </a> 
<a> <RARE_TOKEN> . setText ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> " ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( null ) ; </a> 
<a> } else { </a> 
<a> Utility . <RARE_TOKEN> . <RARE_TOKEN> ( this , null ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void onActivityResult ( int requestCode , int resultCode , Intent data ) { </a> 
<a> switch ( requestCode ) { </a> 
<a> case <RARE_TOKEN> : { </a> 
<a> Utility . <RARE_TOKEN> . <RARE_TOKEN> ( requestCode , resultCode , data ) ; </a> 
<a> break ; </a> 
<a> } </a> 
<a> case <RARE_TOKEN> : { </a> 
<a> if ( resultCode == Activity . <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = data . getData ( ) ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> Bundle params = new Bundle ( ) ; </a> 
<a> try { </a> 
<a> params . <RARE_TOKEN> ( <RARE_TOKEN> , </a> 
<a> Utility . <RARE_TOKEN> ( <RARE_TOKEN> ( ) , <RARE_TOKEN> ) ) ; </a> 
<a> } catch ( IOException e ) { </a> 
<a> e . printStackTrace ( ) ; </a> 
<a> } </a> 
<a> params . putString ( <RARE_TOKEN> , <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> Utility . <RARE_TOKEN> . request ( <RARE_TOKEN> , params , <RARE_TOKEN> , </a> 
<a> new <RARE_TOKEN> ( ) , null ) ; </a> 
<a> } else { </a> 
<a> Toast . <RARE_TOKEN> ( <RARE_TOKEN> ( ) , </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> from the <RARE_TOKEN> , Toast . <RARE_TOKEN> ) </a> 
<a> . show ( ) ; </a> 
<a> } </a> 
<a> } else { </a> 
<a> Toast . <RARE_TOKEN> ( <RARE_TOKEN> ( ) , <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> for <RARE_TOKEN> , </a> 
<a> Toast . <RARE_TOKEN> ) . show ( ) ; </a> 
<a> } </a> 
<a> break ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( <RARE_TOKEN> < ? > <RARE_TOKEN> , View v , int position , long <RARE_TOKEN> ) { </a> 
<a> switch ( position ) { </a> 
<a> case 0 : { </a> 
<a> Bundle params = new Bundle ( ) ; </a> 
<a> params . putString ( <RARE_TOKEN> , getString ( R . string . <RARE_TOKEN> ) ) ; </a> 
<a> params . putString ( <RARE_TOKEN> , getString ( R . string . <RARE_TOKEN> ) ) ; </a> 
<a> params . putString ( <RARE_TOKEN> , Utility . <RARE_TOKEN> ) ; </a> 
<a> params . putString ( "name" , getString ( R . string . <RARE_TOKEN> ) ) ; </a> 
<a> Utility . <RARE_TOKEN> . dialog ( <RARE_TOKEN> . this , <RARE_TOKEN> , params , new <RARE_TOKEN> ( ) ) ; </a> 
<a> String <RARE_TOKEN> = Utility . <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> System . out . println ( <RARE_TOKEN> ) ; </a> 
<a> break ; </a> 
<a> } </a> 
<a> case 1 : { </a> 
<a> Bundle params = new Bundle ( ) ; </a> 
<a> params . putString ( "message" , getString ( R . string . <RARE_TOKEN> ) ) ; </a> 
<a> Utility . <RARE_TOKEN> . dialog ( <RARE_TOKEN> . this , <RARE_TOKEN> , params , </a> 
<a> new <RARE_TOKEN> ( ) ) ; </a> 
<a> break ; </a> 
<a> } </a> 
<a> case 2 : { </a> 
<a> if ( ! Utility . <RARE_TOKEN> . <RARE_TOKEN> ( ) ) { </a> 
<a> Util . <RARE_TOKEN> ( this , <RARE_TOKEN> , <RARE_TOKEN> must <RARE_TOKEN> log <RARE_TOKEN> ) ; </a> 
<a> } else { </a> 
<a> dialog = <RARE_TOKEN> . show ( <RARE_TOKEN> . this , "" , </a> 
<a> getString ( R . string . <RARE_TOKEN> ) , true , true ) ; </a> 
<a> new <RARE_TOKEN> . Builder ( this ) </a> 
<a> . <RARE_TOKEN> ( R . string . <RARE_TOKEN> ) </a> 
<a> . <RARE_TOKEN> ( R . string . <RARE_TOKEN> ) </a> 
<a> . <RARE_TOKEN> ( R . string . <RARE_TOKEN> , </a> 
<a> new DialogInterface . OnClickListener ( ) { </a> 
<a> @ Override </a> 
<a> public void onClick ( DialogInterface dialog , int <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> Bundle params = new Bundle ( ) ; </a> 
<a> params . putString ( <RARE_TOKEN> , <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> Utility . <RARE_TOKEN> . request ( <RARE_TOKEN> , params , </a> 
<a> new <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> } ) </a> 
<a> . <RARE_TOKEN> ( R . string . <RARE_TOKEN> , </a> 
<a> new DialogInterface . OnClickListener ( ) { </a> 
<a> @ Override </a> 
<a> public void onClick ( DialogInterface dialog , int <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> String <RARE_TOKEN> = <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> from user <RARE_TOKEN> <RARE_TOKEN> in <RARE_TOKEN> <RARE_TOKEN> from <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> order <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> Bundle params = new Bundle ( ) ; </a> 
<a> params . putString ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> params . putString ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> Utility . <RARE_TOKEN> . request ( null , params , </a> 
<a> new <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> } ) . <RARE_TOKEN> ( new DialogInterface . <RARE_TOKEN> ( ) { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( DialogInterface d ) { </a> 
<a> dialog . dismiss ( ) ; </a> 
<a> } </a> 
<a> } ) . show ( ) ; </a> 
<a> } </a> 
<a> break ; </a> 
<a> } </a> 
<a> case 3 : { </a> 
<a> if ( ! Utility . <RARE_TOKEN> . <RARE_TOKEN> ( ) ) { </a> 
<a> Util . <RARE_TOKEN> ( this , <RARE_TOKEN> , <RARE_TOKEN> must <RARE_TOKEN> log <RARE_TOKEN> ) ; </a> 
<a> } else { </a> 
<a> dialog = <RARE_TOKEN> . show ( <RARE_TOKEN> . this , "" , </a> 
<a> getString ( R . string . <RARE_TOKEN> ) , true , true ) ; </a> 
<a> new <RARE_TOKEN> . Builder ( this ) </a> 
<a> . <RARE_TOKEN> ( R . string . <RARE_TOKEN> ) </a> 
<a> . <RARE_TOKEN> ( R . string . <RARE_TOKEN> ) </a> 
<a> . <RARE_TOKEN> ( R . string . <RARE_TOKEN> , </a> 
<a> new DialogInterface . OnClickListener ( ) { </a> 
<a> @ Override </a> 
<a> public void onClick ( DialogInterface dialog , int <RARE_TOKEN> ) { </a> 
<a> Intent intent = new Intent ( Intent . <RARE_TOKEN> , </a> 
<a> ( <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> ) ) ; </a> 
<a> <RARE_TOKEN> ( intent , </a> 
<a> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } ) </a> 
<a> . <RARE_TOKEN> ( R . string . <RARE_TOKEN> , </a> 
<a> new DialogInterface . OnClickListener ( ) { </a> 
<a> @ Override </a> 
<a> public void onClick ( DialogInterface dialog , int <RARE_TOKEN> ) { </a> 
<a> Bundle params = new Bundle ( ) ; </a> 
<a> params . putString ( <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> ) ; </a> 
<a> params . putString ( <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> Utility . <RARE_TOKEN> . request ( <RARE_TOKEN> , params , </a> 
<a> <RARE_TOKEN> , new <RARE_TOKEN> ( ) , null ) ; </a> 
<a> } </a> 
<a> } ) . <RARE_TOKEN> ( new DialogInterface . <RARE_TOKEN> ( ) { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( DialogInterface d ) { </a> 
<a> dialog . dismiss ( ) ; </a> 
<a> } </a> 
<a> } ) . show ( ) ; </a> 
<a> } </a> 
<a> break ; </a> 
<a> } </a> 
<a> case 4 : { </a> 
<a> final Intent <RARE_TOKEN> = new Intent ( <RARE_TOKEN> ( ) , <RARE_TOKEN> . class ) ; </a> 
<a> new <RARE_TOKEN> . Builder ( this ) </a> 
<a> . <RARE_TOKEN> ( R . string . <RARE_TOKEN> ) </a> 
<a> . <RARE_TOKEN> ( R . string . <RARE_TOKEN> ) </a> 
<a> . <RARE_TOKEN> ( R . string . <RARE_TOKEN> , </a> 
<a> new DialogInterface . OnClickListener ( ) { </a> 
<a> @ Override </a> 
<a> public void onClick ( DialogInterface dialog , int <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } ) </a> 
<a> . <RARE_TOKEN> ( R . string . <RARE_TOKEN> , </a> 
<a> new DialogInterface . OnClickListener ( ) { </a> 
<a> @ Override </a> 
<a> public void onClick ( DialogInterface dialog , int <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } ) . show ( ) ; </a> 
<a> break ; </a> 
<a> } </a> 
<a> case 5 : { </a> 
<a> if ( ! Utility . <RARE_TOKEN> . <RARE_TOKEN> ( ) ) { </a> 
<a> Util . <RARE_TOKEN> ( this , <RARE_TOKEN> , <RARE_TOKEN> must <RARE_TOKEN> log <RARE_TOKEN> ) ; </a> 
<a> } else { </a> 
<a> new <RARE_TOKEN> ( <RARE_TOKEN> . this ) . show ( ) ; </a> 
<a> } </a> 
<a> break ; </a> 
<a> } </a> 
<a> case 6 : { </a> 
<a> Intent <RARE_TOKEN> = new Intent ( <RARE_TOKEN> ( ) , <RARE_TOKEN> . class ) ; </a> 
<a> if ( Utility . <RARE_TOKEN> . <RARE_TOKEN> ( ) ) { </a> 
<a> Utility . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> break ; </a> 
<a> } </a> 
<a> case 7 : { </a> 
<a> if ( ! Utility . <RARE_TOKEN> . <RARE_TOKEN> ( ) ) { </a> 
<a> Util . <RARE_TOKEN> ( this , <RARE_TOKEN> , <RARE_TOKEN> must <RARE_TOKEN> log <RARE_TOKEN> ) ; </a> 
<a> } else { </a> 
<a> new <RARE_TOKEN> ( <RARE_TOKEN> . this ) . show ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( Bundle values ) { </a> 
<a> final String <RARE_TOKEN> = values . getString ( <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> new <RARE_TOKEN> ( <RARE_TOKEN> . this , <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> , values ) </a> 
<a> . show ( ) ; </a> 
<a> } else { </a> 
<a> Toast <RARE_TOKEN> = Toast . <RARE_TOKEN> ( <RARE_TOKEN> ( ) , <RARE_TOKEN> <RARE_TOKEN> post <RARE_TOKEN> , </a> 
<a> Toast . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . show ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( FacebookError error ) { </a> 
<a> Toast . <RARE_TOKEN> ( <RARE_TOKEN> ( ) , <RARE_TOKEN> <RARE_TOKEN> " + error . getMessage ( ) , </a> 
<a> Toast . <RARE_TOKEN> ) . show ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> Toast <RARE_TOKEN> = Toast . <RARE_TOKEN> ( <RARE_TOKEN> ( ) , <RARE_TOKEN> status <RARE_TOKEN> , </a> 
<a> Toast . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . show ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( Bundle values ) { </a> 
<a> Toast <RARE_TOKEN> = Toast . <RARE_TOKEN> ( <RARE_TOKEN> ( ) , <RARE_TOKEN> request <RARE_TOKEN> , </a> 
<a> Toast . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . show ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( FacebookError error ) { </a> 
<a> Toast . <RARE_TOKEN> ( <RARE_TOKEN> ( ) , <RARE_TOKEN> <RARE_TOKEN> " + error . getMessage ( ) , </a> 
<a> Toast . <RARE_TOKEN> ) . show ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> Toast <RARE_TOKEN> = Toast . <RARE_TOKEN> ( <RARE_TOKEN> ( ) , <RARE_TOKEN> request <RARE_TOKEN> , </a> 
<a> Toast . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . show ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( final String response , final Object state ) { </a> 
<a> dialog . dismiss ( ) ; </a> 
<a> Intent <RARE_TOKEN> = new Intent ( <RARE_TOKEN> ( ) , <RARE_TOKEN> . class ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> , response ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( FacebookError error ) { </a> 
<a> dialog . dismiss ( ) ; </a> 
<a> Toast . <RARE_TOKEN> ( <RARE_TOKEN> ( ) , <RARE_TOKEN> <RARE_TOKEN> " + error . getMessage ( ) , </a> 
<a> Toast . <RARE_TOKEN> ) . show ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( final String response , final Object state ) { </a> 
<a> dialog . dismiss ( ) ; </a> 
<a> <RARE_TOKEN> . post ( new Runnable ( ) { </a> 
<a> @ Override </a> 
<a> public void run ( ) { </a> 
<a> new <RARE_TOKEN> ( <RARE_TOKEN> . this , <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> , response ) </a> 
<a> . show ( ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( FacebookError error ) { </a> 
<a> dialog . dismiss ( ) ; </a> 
<a> Toast . <RARE_TOKEN> ( <RARE_TOKEN> ( ) , <RARE_TOKEN> <RARE_TOKEN> " + error . getMessage ( ) , </a> 
<a> Toast . <RARE_TOKEN> ) . show ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( final String response , final Object state ) { </a> 
<a> <RARE_TOKEN> . post ( new Runnable ( ) { </a> 
<a> @ Override </a> 
<a> public void run ( ) { </a> 
<a> Toast . <RARE_TOKEN> ( <RARE_TOKEN> ( ) , <RARE_TOKEN> " + response , </a> 
<a> Toast . <RARE_TOKEN> ) . show ( ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( FacebookError error ) { </a> 
<a> Toast . <RARE_TOKEN> ( <RARE_TOKEN> ( ) , <RARE_TOKEN> <RARE_TOKEN> " + error . getMessage ( ) , </a> 
<a> Toast . <RARE_TOKEN> ) . show ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( final String response , final Object state ) { </a> 
<a> JSONObject jsonObject ; </a> 
<a> try { </a> 
<a> jsonObject = new JSONObject ( response ) ; </a> 
<a> final String <RARE_TOKEN> = jsonObject . <RARE_TOKEN> ( <RARE_TOKEN> ) </a> 
<a> . <RARE_TOKEN> ( <RARE_TOKEN> ) . getString ( <RARE_TOKEN> ) ; </a> 
<a> final String name = jsonObject . getString ( "name" ) ; </a> 
<a> Utility . <RARE_TOKEN> = jsonObject . getString ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . post ( new Runnable ( ) { </a> 
<a> @ Override </a> 
<a> public void run ( ) { </a> 
<a> <RARE_TOKEN> . setText ( <RARE_TOKEN> " + name + <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( Utility . <RARE_TOKEN> ( <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> } catch ( JSONException e ) { </a> 
<a> e . printStackTrace ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> public class <RARE_TOKEN> implements <RARE_TOKEN> { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( String error ) { </a> 
<a> <RARE_TOKEN> . setText ( <RARE_TOKEN> <RARE_TOKEN> " + error ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public class <RARE_TOKEN> implements <RARE_TOKEN> { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> . setText ( <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> . setText ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> " ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( null ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> . setText ( <RARE_TOKEN> user <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> Bundle params = new Bundle ( ) ; </a> 
<a> params . putString ( <RARE_TOKEN> , <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> Utility . <RARE_TOKEN> . request ( <RARE_TOKEN> , params , new <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> public <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . from ( <RARE_TOKEN> . this . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> . length ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public Object <RARE_TOKEN> ( int position ) { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public long <RARE_TOKEN> ( int position ) { </a> 
<a> return 0 ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public View <RARE_TOKEN> ( int position , View <RARE_TOKEN> , ViewGroup parent ) { </a> 
<a> View <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( R . layout . <RARE_TOKEN> , null ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> = ( TextView ) <RARE_TOKEN> . findViewById ( R . id . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = ( <RARE_TOKEN> ) <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> . setText ( <RARE_TOKEN> [ position ] ) ; </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<a> class <RARE_TOKEN> { </a> 
<a> TextView <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package com . facebook . android ; </a> 
<a> import android . app . Activity ; </a> 
<a> import android . content . Intent ; </a> 
<a> import android . net . <RARE_TOKEN> ; </a> 
<a> import android . os . Bundle ; </a> 
<a> public class <RARE_TOKEN> extends Activity { </a> 
<a> @ Override </a> 
<a> public void onCreate ( Bundle savedInstanceState ) { </a> 
<a> super . onCreate ( savedInstanceState ) ; </a> 
<a> Intent <RARE_TOKEN> = <RARE_TOKEN> ( ) ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = <RARE_TOKEN> . getData ( ) ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> Utility . <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> Intent <RARE_TOKEN> = new Intent ( <RARE_TOKEN> ( ) , <RARE_TOKEN> . class ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( Intent . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package com . facebook . android ; </a> 
<a> import android . app . Activity ; </a> 
<a> import android . content . Context ; </a> 
<a> import android . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import android . os . Bundle ; </a> 
<a> import android . os . Handler ; </a> 
<a> import android . util . <RARE_TOKEN> ; </a> 
<a> import android . view . View ; </a> 
<a> import android . widget . <RARE_TOKEN> ; </a> 
<a> import com . facebook . android . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import com . facebook . android . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import com . facebook . android . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> @ SuppressWarnings ( <RARE_TOKEN> ) </a> 
<a> public class LoginButton extends <RARE_TOKEN> { </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> private Handler <RARE_TOKEN> ; </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( ) ; </a> 
<a> private String [ ] <RARE_TOKEN> ; </a> 
<a> private Activity <RARE_TOKEN> ; </a> 
<a> private int <RARE_TOKEN> ; </a> 
<a> public LoginButton ( Context context ) { </a> 
<a> super ( context ) ; </a> 
<a> } </a> 
<a> public LoginButton ( Context context , <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> super ( context , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public LoginButton ( Context context , <RARE_TOKEN> <RARE_TOKEN> , int <RARE_TOKEN> ) { </a> 
<a> super ( context , <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public void init ( final Activity activity , final int <RARE_TOKEN> , final <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> init ( activity , <RARE_TOKEN> , <RARE_TOKEN> , new String [ ] { } ) ; </a> 
<a> } </a> 
<a> public void init ( final Activity activity , final int <RARE_TOKEN> , final <RARE_TOKEN> <RARE_TOKEN> , </a> 
<a> final String [ ] permissions ) { </a> 
<a> <RARE_TOKEN> = activity ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = permissions ; </a> 
<a> <RARE_TOKEN> = new Handler ( ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ( ) ? R . <RARE_TOKEN> . <RARE_TOKEN> : R . <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> setOnClickListener ( new <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> private final class <RARE_TOKEN> implements OnClickListener { </a> 
<a> @ Override </a> 
<a> public void onClick ( View <RARE_TOKEN> ) { </a> 
<a> if ( <RARE_TOKEN> . <RARE_TOKEN> ( ) ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( getContext ( ) , new <RARE_TOKEN> ( ) ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , new <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> private final class <RARE_TOKEN> implements <RARE_TOKEN> { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( Bundle values ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( FacebookError error ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( error . getMessage ( ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void onError ( <RARE_TOKEN> error ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( error . getMessage ( ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( String response , final Object state ) { </a> 
<a> <RARE_TOKEN> . post ( new Runnable ( ) { </a> 
<a> @ Override </a> 
<a> public void run ( ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private class <RARE_TOKEN> implements <RARE_TOKEN> , <RARE_TOKEN> { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> ( R . <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> , getContext ( ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( String error ) { </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> . clear ( getContext ( ) ) ; </a> 
<a> <RARE_TOKEN> ( R . <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package com . facebook . android ; </a> 
<a> import android . app . Activity ; </a> 
<a> import android . app . <RARE_TOKEN> ; </a> 
<a> import android . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import android . os . Bundle ; </a> 
<a> import android . text . method . <RARE_TOKEN> ; </a> 
<a> import android . view . <RARE_TOKEN> ; </a> 
<a> import android . view . View ; </a> 
<a> import android . view . ViewGroup ; </a> 
<a> import android . view . ViewGroup . LayoutParams ; </a> 
<a> import android . widget . * ; </a> 
<a> import android . widget . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import android . widget . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import com . facebook . android . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import java . util . <RARE_TOKEN> ; </a> 
<a> @ SuppressWarnings ( <RARE_TOKEN> ) </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> private final static int <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private Button <RARE_TOKEN> ; </a> 
<a> private TextView <RARE_TOKEN> ; </a> 
<a> private Activity activity ; </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> ; </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> ; </a> 
<a> protected <RARE_TOKEN> < String > <RARE_TOKEN> ; </a> 
<a> String [ ] <RARE_TOKEN> = { <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> } ; </a> 
<a> String [ ] <RARE_TOKEN> = { <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> } ; </a> 
<a> String [ ] <RARE_TOKEN> = { <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> } ; </a> 
<a> public <RARE_TOKEN> ( Activity activity ) { </a> 
<a> super ( activity ) ; </a> 
<a> this . activity = activity ; </a> 
<a> <RARE_TOKEN> ( activity . getString ( R . string . <RARE_TOKEN> ) ) ; </a> 
<a> <RARE_TOKEN> = new <RARE_TOKEN> < String > ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void onCreate ( Bundle savedInstanceState ) { </a> 
<a> super . onCreate ( savedInstanceState ) ; </a> 
<a> <RARE_TOKEN> ( R . layout . <RARE_TOKEN> ) ; </a> 
<a> LayoutParams params = <RARE_TOKEN> ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> params . <RARE_TOKEN> = LayoutParams . <RARE_TOKEN> ; </a> 
<a> params . <RARE_TOKEN> = LayoutParams . <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> ( ) . <RARE_TOKEN> ( ( android . view . <RARE_TOKEN> . LayoutParams ) params ) ; </a> 
<a> <RARE_TOKEN> = ( TextView ) findViewById ( R . id . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> . getInstance ( ) ) ; </a> 
<a> <RARE_TOKEN> = ( <RARE_TOKEN> ) findViewById ( R . id . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = ( <RARE_TOKEN> ) findViewById ( R . id . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = ( <RARE_TOKEN> ) findViewById ( R . id . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = new <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = new <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = new <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = ( <RARE_TOKEN> ) findViewById ( R . id . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( activity . getString ( R . string . user ) ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( R . id . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( activity . getString ( R . string . <RARE_TOKEN> ) ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( R . id . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( activity . getString ( R . string . <RARE_TOKEN> ) ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( R . id . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( 0 ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( 0 ) . <RARE_TOKEN> ( ) . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( 1 ) . <RARE_TOKEN> ( ) . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( 2 ) . <RARE_TOKEN> ( ) . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = ( Button ) findViewById ( R . id . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . setOnClickListener ( new View . OnClickListener ( ) { </a> 
<a> @ Override </a> 
<a> public void onClick ( View v ) { </a> 
<a> if ( <RARE_TOKEN> . isEmpty ( ) && Utility . <RARE_TOKEN> . <RARE_TOKEN> ( ) ) { </a> 
<a> Toast . <RARE_TOKEN> ( activity . <RARE_TOKEN> ( ) , <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> , </a> 
<a> Toast . <RARE_TOKEN> ) . show ( ) ; </a> 
<a> <RARE_TOKEN> . this . dismiss ( ) ; </a> 
<a> } else { </a> 
<a> String [ ] permissions = <RARE_TOKEN> . <RARE_TOKEN> ( new String [ 0 ] ) ; </a> 
<a> Utility . <RARE_TOKEN> . <RARE_TOKEN> ( activity , permissions , new <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> } </a> 
<a> private final class <RARE_TOKEN> implements <RARE_TOKEN> { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( Bundle values ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> Toast . <RARE_TOKEN> ( activity . <RARE_TOKEN> ( ) , <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> , </a> 
<a> Toast . <RARE_TOKEN> ) . show ( ) ; </a> 
<a> <RARE_TOKEN> . this . dismiss ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( FacebookError error ) { </a> 
<a> Toast . <RARE_TOKEN> ( activity . <RARE_TOKEN> ( ) , </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> new permissions <RARE_TOKEN> , Toast . <RARE_TOKEN> ) . show ( ) ; </a> 
<a> <RARE_TOKEN> . this . dismiss ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void onError ( <RARE_TOKEN> error ) { </a> 
<a> Toast . <RARE_TOKEN> ( activity . <RARE_TOKEN> ( ) , <RARE_TOKEN> <RARE_TOKEN> new permissions <RARE_TOKEN> , </a> 
<a> Toast . <RARE_TOKEN> ) . show ( ) ; </a> 
<a> <RARE_TOKEN> . this . dismiss ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> Toast . <RARE_TOKEN> ( activity . <RARE_TOKEN> ( ) , </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> new permissions <RARE_TOKEN> , Toast . <RARE_TOKEN> ) . show ( ) ; </a> 
<a> <RARE_TOKEN> . this . dismiss ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> String [ ] permissions ; </a> 
<a> boolean [ ] <RARE_TOKEN> ; </a> 
<a> public <RARE_TOKEN> ( String [ ] permissions ) { </a> 
<a> this . permissions = permissions ; </a> 
<a> this . <RARE_TOKEN> = new boolean [ permissions . length ] ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . from ( activity . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int <RARE_TOKEN> ( ) { </a> 
<a> return permissions . length ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public Object <RARE_TOKEN> ( int position ) { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public long <RARE_TOKEN> ( int position ) { </a> 
<a> return 0 ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public View <RARE_TOKEN> ( final int position , View <RARE_TOKEN> , ViewGroup parent ) { </a> 
<a> View <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( R . layout . <RARE_TOKEN> , null ) ; </a> 
<a> <RARE_TOKEN> = ( <RARE_TOKEN> ) <RARE_TOKEN> . findViewById ( R . id . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> = ( <RARE_TOKEN> ) <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> . setText ( this . permissions [ position ] ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( position ) ; </a> 
<a> if ( Utility . <RARE_TOKEN> . containsKey ( this . permissions [ position ] ) </a> 
<a> && Utility . <RARE_TOKEN> . get ( this . permissions [ position ] ) . equals ( <RARE_TOKEN> ) ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( true ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( false ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( null ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( this . <RARE_TOKEN> [ position ] ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( true ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( new <RARE_TOKEN> ( ) { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( <RARE_TOKEN> button , boolean <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> [ button . getId ( ) ] = <RARE_TOKEN> ; </a> 
<a> if ( <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> . add ( button . <RARE_TOKEN> ( ) . toString ( ) ) ; </a> 
<a> } else if ( <RARE_TOKEN> . contains ( button . <RARE_TOKEN> ( ) ) ) { </a> 
<a> <RARE_TOKEN> . remove ( button . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> } </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package com . facebook . android ; </a> 
<a> import android . app . Activity ; </a> 
<a> import android . app . <RARE_TOKEN> ; </a> 
<a> import android . app . <RARE_TOKEN> ; </a> 
<a> import android . content . Context ; </a> 
<a> import android . content . DialogInterface ; </a> 
<a> import android . content . Intent ; </a> 
<a> import android . location . <RARE_TOKEN> ; </a> 
<a> import android . location . Location ; </a> 
<a> import android . location . <RARE_TOKEN> ; </a> 
<a> import android . location . <RARE_TOKEN> ; </a> 
<a> import android . os . Bundle ; </a> 
<a> import android . os . Handler ; </a> 
<a> import android . os . <RARE_TOKEN> ; </a> 
<a> import android . util . Log ; </a> 
<a> import android . view . <RARE_TOKEN> ; </a> 
<a> import android . view . View ; </a> 
<a> import android . view . ViewGroup ; </a> 
<a> import android . widget . * ; </a> 
<a> import android . widget . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import org . json . JSONArray ; </a> 
<a> import org . json . JSONException ; </a> 
<a> import org . json . JSONObject ; </a> 
<a> @ SuppressWarnings ( <RARE_TOKEN> ) </a> 
<a> public class <RARE_TOKEN> extends Activity implements <RARE_TOKEN> { </a> 
<a> private Handler <RARE_TOKEN> ; </a> 
<a> private JSONObject location ; </a> 
<a> protected <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> protected <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> protected <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> protected static JSONArray jsonArray ; </a> 
<a> final static double <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> final static double <RARE_TOKEN> = - <RARE_TOKEN> ; </a> 
<a> protected <RARE_TOKEN> dialog ; </a> 
<a> @ Override </a> 
<a> public void onCreate ( Bundle savedInstanceState ) { </a> 
<a> super . onCreate ( savedInstanceState ) ; </a> 
<a> <RARE_TOKEN> = new Handler ( ) ; </a> 
<a> location = new JSONObject ( ) ; </a> 
<a> <RARE_TOKEN> ( R . layout . <RARE_TOKEN> ) ; </a> 
<a> Bundle extras = <RARE_TOKEN> ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> String <RARE_TOKEN> = extras . getString ( <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> . equals ( <RARE_TOKEN> ) ) { </a> 
<a> try { </a> 
<a> location . put ( <RARE_TOKEN> , new <RARE_TOKEN> ( <RARE_TOKEN> ) ) ; </a> 
<a> location . put ( <RARE_TOKEN> , new <RARE_TOKEN> ( <RARE_TOKEN> ) ) ; </a> 
<a> } catch ( JSONException e ) { </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> new Thread ( ) { </a> 
<a> @ Override </a> 
<a> public void run ( ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> dialog = <RARE_TOKEN> . show ( <RARE_TOKEN> . this , "" , </a> 
<a> getString ( R . string . <RARE_TOKEN> ) , false , true , </a> 
<a> new DialogInterface . <RARE_TOKEN> ( ) { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( DialogInterface dialog ) { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> location <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> <RARE_TOKEN> = ( <RARE_TOKEN> ) <RARE_TOKEN> ( Context . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> <RARE_TOKEN> = new <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> String <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> , true ) ; </a> 
<a> if ( <RARE_TOKEN> != null && <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> , 1 , 0 , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> } else { </a> 
<a> new <RARE_TOKEN> . Builder ( <RARE_TOKEN> . this ) </a> 
<a> . <RARE_TOKEN> ( R . string . <RARE_TOKEN> ) </a> 
<a> . <RARE_TOKEN> ( getString ( R . string . <RARE_TOKEN> ) ) </a> 
<a> . <RARE_TOKEN> ( R . string . <RARE_TOKEN> , </a> 
<a> new DialogInterface . OnClickListener ( ) { </a> 
<a> @ Override </a> 
<a> public void onClick ( DialogInterface dialog , int <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( </a> 
<a> new Intent ( </a> 
<a> android . <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> ) , </a> 
<a> 0 ) ; </a> 
<a> } </a> 
<a> } ) </a> 
<a> . <RARE_TOKEN> ( R . string . cancel , </a> 
<a> new DialogInterface . OnClickListener ( ) { </a> 
<a> @ Override </a> 
<a> public void onClick ( DialogInterface dialog , int <RARE_TOKEN> ) { </a> 
<a> dialog . dismiss ( ) ; </a> 
<a> <RARE_TOKEN> . this . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } ) . show ( ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> . loop ( ) ; </a> 
<a> } </a> 
<a> } . start ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void onActivityResult ( int requestCode , int resultCode , Intent data ) { </a> 
<a> dialog . dismiss ( ) ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( ) { </a> 
<a> if ( ! <RARE_TOKEN> ( ) ) { </a> 
<a> dialog = <RARE_TOKEN> . show ( <RARE_TOKEN> . this , "" , getString ( R . string . <RARE_TOKEN> ) , true , </a> 
<a> true , new DialogInterface . <RARE_TOKEN> ( ) { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( DialogInterface dialog ) { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> } </a> 
<a> Bundle params = new Bundle ( ) ; </a> 
<a> params . putString ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> try { </a> 
<a> params . putString ( <RARE_TOKEN> , </a> 
<a> location . getString ( <RARE_TOKEN> ) + <RARE_TOKEN> + location . getString ( <RARE_TOKEN> ) ) ; </a> 
<a> } catch ( JSONException e ) { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> return ; </a> 
<a> } </a> 
<a> params . putString ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> Utility . <RARE_TOKEN> . request ( <RARE_TOKEN> , params , new <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( final String response , final Object state ) { </a> 
<a> Log . d ( <RARE_TOKEN> , <RARE_TOKEN> response: " + response ) ; </a> 
<a> dialog . dismiss ( ) ; </a> 
<a> try { </a> 
<a> jsonArray = new JSONObject ( response ) . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> if ( jsonArray == null ) { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> not be <RARE_TOKEN> ) ; </a> 
<a> return ; </a> 
<a> } </a> 
<a> } catch ( JSONException e ) { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> " + e . getMessage ( ) ) ; </a> 
<a> return ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> . post ( new Runnable ( ) { </a> 
<a> @ Override </a> 
<a> public void run ( ) { </a> 
<a> <RARE_TOKEN> = ( <RARE_TOKEN> ) findViewById ( R . id . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> . this ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( new <RARE_TOKEN> ( <RARE_TOKEN> . this ) ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( FacebookError error ) { </a> 
<a> dialog . dismiss ( ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> " + error . getMessage ( ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( <RARE_TOKEN> < ? > <RARE_TOKEN> , View v , int position , long <RARE_TOKEN> ) { </a> 
<a> if ( ! Utility . <RARE_TOKEN> . <RARE_TOKEN> ( ) ) { </a> 
<a> Util . <RARE_TOKEN> ( this , <RARE_TOKEN> , <RARE_TOKEN> must <RARE_TOKEN> log <RARE_TOKEN> ) ; </a> 
<a> } else { </a> 
<a> try { </a> 
<a> final String message = <RARE_TOKEN> from the " + getString ( R . string . <RARE_TOKEN> ) ; </a> 
<a> final String name = jsonArray . <RARE_TOKEN> ( position ) . getString ( "name" ) ; </a> 
<a> final String <RARE_TOKEN> = jsonArray . <RARE_TOKEN> ( position ) . getString ( <RARE_TOKEN> ) ; </a> 
<a> new <RARE_TOKEN> . Builder ( this ) . <RARE_TOKEN> ( R . string . <RARE_TOKEN> ) </a> 
<a> . <RARE_TOKEN> ( String . format ( getString ( R . string . <RARE_TOKEN> ) , name ) ) </a> 
<a> . <RARE_TOKEN> ( R . string . <RARE_TOKEN> , new DialogInterface . OnClickListener ( ) { </a> 
<a> @ Override </a> 
<a> public void onClick ( DialogInterface dialog , int <RARE_TOKEN> ) { </a> 
<a> Bundle params = new Bundle ( ) ; </a> 
<a> params . putString ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> params . putString ( "message" , message ) ; </a> 
<a> params . putString ( <RARE_TOKEN> , location . toString ( ) ) ; </a> 
<a> Utility . <RARE_TOKEN> . request ( <RARE_TOKEN> , params , <RARE_TOKEN> , </a> 
<a> new <RARE_TOKEN> ( ) , null ) ; </a> 
<a> } </a> 
<a> } ) . <RARE_TOKEN> ( R . string . cancel , null ) . show ( ) ; </a> 
<a> } catch ( JSONException e ) { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> " + e . getMessage ( ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( final String response , final Object state ) { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> " + response ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( FacebookError error ) { </a> 
<a> dialog . dismiss ( ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> " + error . getMessage ( ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( final String msg ) { </a> 
<a> <RARE_TOKEN> . post ( new Runnable ( ) { </a> 
<a> @ Override </a> 
<a> public void run ( ) { </a> 
<a> Toast <RARE_TOKEN> = Toast . <RARE_TOKEN> ( <RARE_TOKEN> . this , msg , Toast . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . show ( ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> } </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> public <RARE_TOKEN> ( Context context ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . from ( context ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int <RARE_TOKEN> ( ) { </a> 
<a> return jsonArray . length ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public Object <RARE_TOKEN> ( int position ) { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public long <RARE_TOKEN> ( int position ) { </a> 
<a> return 0 ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public View <RARE_TOKEN> ( int position , View <RARE_TOKEN> , ViewGroup parent ) { </a> 
<a> JSONObject jsonObject = null ; </a> 
<a> try { </a> 
<a> jsonObject = jsonArray . <RARE_TOKEN> ( position ) ; </a> 
<a> } catch ( JSONException <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> . printStackTrace ( ) ; </a> 
<a> } </a> 
<a> View <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( R . layout . <RARE_TOKEN> , null ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> . name = ( TextView ) <RARE_TOKEN> . findViewById ( R . id . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . location = ( TextView ) <RARE_TOKEN> . findViewById ( R . id . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = ( <RARE_TOKEN> ) <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> try { </a> 
<a> <RARE_TOKEN> . name . setText ( jsonObject . getString ( "name" ) ) ; </a> 
<a> } catch ( JSONException e ) { </a> 
<a> <RARE_TOKEN> . name . setText ( "" ) ; </a> 
<a> } </a> 
<a> try { </a> 
<a> String location = jsonObject . <RARE_TOKEN> ( <RARE_TOKEN> ) . getString ( <RARE_TOKEN> ) + ", " </a> 
<a> + jsonObject . <RARE_TOKEN> ( <RARE_TOKEN> ) . getString ( <RARE_TOKEN> ) + ", " </a> 
<a> + jsonObject . <RARE_TOKEN> ( <RARE_TOKEN> ) . getString ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . location . setText ( location ) ; </a> 
<a> } catch ( JSONException e ) { </a> 
<a> <RARE_TOKEN> . location . setText ( "" ) ; </a> 
<a> } </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<a> class <RARE_TOKEN> { </a> 
<a> TextView name ; </a> 
<a> TextView location ; </a> 
<a> } </a> 
<a> class <RARE_TOKEN> implements <RARE_TOKEN> { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( Location <RARE_TOKEN> ) { </a> 
<a> dialog . dismiss ( ) ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> try { </a> 
<a> location . put ( <RARE_TOKEN> , new <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ) ; </a> 
<a> location . put ( <RARE_TOKEN> , new <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ) ; </a> 
<a> } catch ( JSONException e ) { </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> " + String . valueOf ( <RARE_TOKEN> . <RARE_TOKEN> ( ) ) + " " </a> 
<a> + String . valueOf ( <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( this ) ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( String <RARE_TOKEN> ) { </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( String <RARE_TOKEN> ) { </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( String <RARE_TOKEN> , int status , Bundle extras ) { </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package com . facebook . android ; </a> 
<a> import java . util . <RARE_TOKEN> ; </a> 
<a> public class <RARE_TOKEN> { </a> 
<a> private static <RARE_TOKEN> < <RARE_TOKEN> > <RARE_TOKEN> = new <RARE_TOKEN> < <RARE_TOKEN> > ( ) ; </a> 
<a> private static <RARE_TOKEN> < <RARE_TOKEN> > <RARE_TOKEN> = new <RARE_TOKEN> < <RARE_TOKEN> > ( ) ; </a> 
<a> public static void <RARE_TOKEN> ( <RARE_TOKEN> listener ) { </a> 
<a> <RARE_TOKEN> . add ( listener ) ; </a> 
<a> } </a> 
<a> public static void <RARE_TOKEN> ( <RARE_TOKEN> listener ) { </a> 
<a> <RARE_TOKEN> . remove ( listener ) ; </a> 
<a> } </a> 
<a> public static void <RARE_TOKEN> ( <RARE_TOKEN> listener ) { </a> 
<a> <RARE_TOKEN> . add ( listener ) ; </a> 
<a> } </a> 
<a> public static void <RARE_TOKEN> ( <RARE_TOKEN> listener ) { </a> 
<a> <RARE_TOKEN> . remove ( listener ) ; </a> 
<a> } </a> 
<a> public static void <RARE_TOKEN> ( ) { </a> 
<a> for ( <RARE_TOKEN> listener : <RARE_TOKEN> ) { </a> 
<a> listener . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public static void <RARE_TOKEN> ( String error ) { </a> 
<a> for ( <RARE_TOKEN> listener : <RARE_TOKEN> ) { </a> 
<a> listener . <RARE_TOKEN> ( error ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public static void <RARE_TOKEN> ( ) { </a> 
<a> for ( <RARE_TOKEN> l : <RARE_TOKEN> ) { </a> 
<a> l . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public static void <RARE_TOKEN> ( ) { </a> 
<a> for ( <RARE_TOKEN> l : <RARE_TOKEN> ) { </a> 
<a> l . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public static interface <RARE_TOKEN> { </a> 
<a> public void <RARE_TOKEN> ( ) ; </a> 
<a> public void <RARE_TOKEN> ( String error ) ; </a> 
<a> } </a> 
<a> public static interface <RARE_TOKEN> { </a> 
<a> public void <RARE_TOKEN> ( ) ; </a> 
<a> public void <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package com . facebook . android ; </a> 
<a> import android . app . Activity ; </a> 
<a> import android . app . <RARE_TOKEN> ; </a> 
<a> import android . os . Bundle ; </a> 
<a> import android . text . method . <RARE_TOKEN> ; </a> 
<a> import android . view . View ; </a> 
<a> import android . widget . Button ; </a> 
<a> import android . widget . <RARE_TOKEN> ; </a> 
<a> import android . widget . TextView ; </a> 
<a> import java . text . <RARE_TOKEN> ; </a> 
<a> import java . util . Date ; </a> 
<a> @ SuppressWarnings ( <RARE_TOKEN> ) </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> , <RARE_TOKEN> ; </a> 
<a> private TextView <RARE_TOKEN> ; </a> 
<a> private Button <RARE_TOKEN> ; </a> 
<a> private Activity activity ; </a> 
<a> public <RARE_TOKEN> ( Activity activity ) { </a> 
<a> super ( activity ) ; </a> 
<a> this . activity = activity ; </a> 
<a> <RARE_TOKEN> ( R . string . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void onCreate ( Bundle savedInstanceState ) { </a> 
<a> super . onCreate ( savedInstanceState ) ; </a> 
<a> <RARE_TOKEN> ( R . layout . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = ( <RARE_TOKEN> ) findViewById ( R . id . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . setText ( Utility . <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> <RARE_TOKEN> = ( <RARE_TOKEN> ) findViewById ( R . id . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( Utility . <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> <RARE_TOKEN> = ( TextView ) findViewById ( R . id . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> . getInstance ( ) ) ; </a> 
<a> <RARE_TOKEN> = ( Button ) findViewById ( R . id . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . setOnClickListener ( new View . OnClickListener ( ) { </a> 
<a> @ Override </a> 
<a> public void onClick ( View v ) { </a> 
<a> <RARE_TOKEN> ( false ) ; </a> 
<a> <RARE_TOKEN> listener = new <RARE_TOKEN> ( ) ; </a> 
<a> if ( ! Utility . <RARE_TOKEN> . <RARE_TOKEN> ( activity , listener ) ) { </a> 
<a> listener . onError ( new Error ( </a> 
<a> activity . getString ( R . string . <RARE_TOKEN> ) ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> } </a> 
<a> private class <RARE_TOKEN> implements <RARE_TOKEN> . <RARE_TOKEN> { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( FacebookError e ) { </a> 
<a> <RARE_TOKEN> ( true ) ; </a> 
<a> String <RARE_TOKEN> = String . format ( activity . getString ( R . string . <RARE_TOKEN> ) + <RARE_TOKEN> , </a> 
<a> e . <RARE_TOKEN> ( ) ) ; </a> 
<a> Util . <RARE_TOKEN> ( activity , <RARE_TOKEN> , e . getMessage ( ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void onError ( Error e ) { </a> 
<a> <RARE_TOKEN> ( true ) ; </a> 
<a> Util . <RARE_TOKEN> ( activity , activity . getString ( R . string . error ) , e . getMessage ( ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( Bundle values ) { </a> 
<a> <RARE_TOKEN> ( true ) ; </a> 
<a> <RARE_TOKEN> . setText ( values . getString ( <RARE_TOKEN> . <RARE_TOKEN> ) ) ; </a> 
<a> <RARE_TOKEN> ( values . getLong ( <RARE_TOKEN> . <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( boolean enabled ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( enabled ) ; </a> 
<a> <RARE_TOKEN> . setText ( enabled ? R . string . <RARE_TOKEN> : R . string . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( long time ) { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . setText ( <RARE_TOKEN> . format ( new Date ( time ) ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package com . facebook . android ; </a> 
<a> import android . app . Activity ; </a> 
<a> import android . app . <RARE_TOKEN> ; </a> 
<a> import android . os . Bundle ; </a> 
<a> import android . os . Handler ; </a> 
<a> import android . text . method . <RARE_TOKEN> ; </a> 
<a> import android . view . View ; </a> 
<a> import android . view . ViewGroup . LayoutParams ; </a> 
<a> import android . widget . Button ; </a> 
<a> import android . widget . TextView ; </a> 
<a> import org . json . JSONException ; </a> 
<a> import org . json . JSONObject ; </a> 
<a> @ SuppressWarnings ( <RARE_TOKEN> ) </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> private Bundle values ; </a> 
<a> private TextView <RARE_TOKEN> , <RARE_TOKEN> ; </a> 
<a> private Button <RARE_TOKEN> , <RARE_TOKEN> ; </a> 
<a> private Activity activity ; </a> 
<a> private Handler <RARE_TOKEN> ; </a> 
<a> public <RARE_TOKEN> ( Activity activity , String <RARE_TOKEN> , Bundle values ) { </a> 
<a> super ( activity ) ; </a> 
<a> this . activity = activity ; </a> 
<a> this . values = values ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void onCreate ( Bundle savedInstanceState ) { </a> 
<a> super . onCreate ( savedInstanceState ) ; </a> 
<a> <RARE_TOKEN> = new Handler ( ) ; </a> 
<a> <RARE_TOKEN> ( R . layout . <RARE_TOKEN> ) ; </a> 
<a> LayoutParams params = <RARE_TOKEN> ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> params . <RARE_TOKEN> = LayoutParams . <RARE_TOKEN> ; </a> 
<a> params . <RARE_TOKEN> = LayoutParams . <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> ( ) . <RARE_TOKEN> ( ( android . view . <RARE_TOKEN> . LayoutParams ) params ) ; </a> 
<a> <RARE_TOKEN> = ( TextView ) findViewById ( R . id . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . setText ( values . toString ( ) ) ; </a> 
<a> <RARE_TOKEN> = ( TextView ) findViewById ( R . id . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> . getInstance ( ) ) ; </a> 
<a> <RARE_TOKEN> = ( Button ) findViewById ( R . id . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = ( Button ) findViewById ( R . id . <RARE_TOKEN> ) ; </a> 
<a> final String <RARE_TOKEN> = values . getString ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . setOnClickListener ( new View . OnClickListener ( ) { </a> 
<a> @ Override </a> 
<a> public void onClick ( View v ) { </a> 
<a> Utility . <RARE_TOKEN> . request ( <RARE_TOKEN> , new <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> <RARE_TOKEN> . setOnClickListener ( new View . OnClickListener ( ) { </a> 
<a> @ Override </a> 
<a> public void onClick ( View v ) { </a> 
<a> Utility . <RARE_TOKEN> . request ( <RARE_TOKEN> , new Bundle ( ) , <RARE_TOKEN> , </a> 
<a> new <RARE_TOKEN> ( ) , null ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> } </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( final String response , final Object state ) { </a> 
<a> try { </a> 
<a> JSONObject json = new JSONObject ( response ) ; </a> 
<a> setText ( json . toString ( 2 ) ) ; </a> 
<a> } catch ( JSONException e ) { </a> 
<a> setText ( activity . getString ( R . string . exception ) + e . getMessage ( ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( FacebookError error ) { </a> 
<a> setText ( activity . getString ( R . string . <RARE_TOKEN> ) + error . getMessage ( ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( final String response , final Object state ) { </a> 
<a> if ( response . equals ( <RARE_TOKEN> ) ) { </a> 
<a> String message = <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> + <RARE_TOKEN> ; </a> 
<a> message += <RARE_TOKEN> <RARE_TOKEN> " + response ; </a> 
<a> setText ( message ) ; </a> 
<a> } else { </a> 
<a> setText ( <RARE_TOKEN> post <RARE_TOKEN> not be <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( FacebookError error ) { </a> 
<a> setText ( activity . getString ( R . string . <RARE_TOKEN> ) + error . getMessage ( ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public void setText ( final String <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> . post ( new Runnable ( ) { </a> 
<a> @ Override </a> 
<a> public void run ( ) { </a> 
<a> <RARE_TOKEN> . setText ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package com . facebook . android ; </a> 
<a> import android . app . Activity ; </a> 
<a> import android . app . <RARE_TOKEN> ; </a> 
<a> import android . app . <RARE_TOKEN> ; </a> 
<a> import android . <RARE_TOKEN> . Bitmap ; </a> 
<a> import android . os . <RARE_TOKEN> ; </a> 
<a> import android . os . Bundle ; </a> 
<a> import android . os . Handler ; </a> 
<a> import android . text . <RARE_TOKEN> ; </a> 
<a> import android . text . util . <RARE_TOKEN> ; </a> 
<a> import android . view . View ; </a> 
<a> import android . view . ViewGroup . LayoutParams ; </a> 
<a> import android . widget . Button ; </a> 
<a> import android . widget . <RARE_TOKEN> ; </a> 
<a> import android . widget . TextView ; </a> 
<a> import org . json . JSONException ; </a> 
<a> import org . json . JSONObject ; </a> 
<a> @ SuppressWarnings ( <RARE_TOKEN> ) </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> private String response , <RARE_TOKEN> ; </a> 
<a> private TextView <RARE_TOKEN> , <RARE_TOKEN> ; </a> 
<a> private Button <RARE_TOKEN> , <RARE_TOKEN> ; </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> private Activity activity ; </a> 
<a> private <RARE_TOKEN> dialog ; </a> 
<a> private boolean <RARE_TOKEN> = false ; </a> 
<a> private Handler <RARE_TOKEN> ; </a> 
<a> public <RARE_TOKEN> ( Activity activity , String <RARE_TOKEN> , String response ) { </a> 
<a> super ( activity ) ; </a> 
<a> this . activity = activity ; </a> 
<a> this . response = response ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void onCreate ( Bundle savedInstanceState ) { </a> 
<a> super . onCreate ( savedInstanceState ) ; </a> 
<a> <RARE_TOKEN> = new Handler ( ) ; </a> 
<a> <RARE_TOKEN> ( R . layout . <RARE_TOKEN> ) ; </a> 
<a> LayoutParams params = <RARE_TOKEN> ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> params . <RARE_TOKEN> = LayoutParams . <RARE_TOKEN> ; </a> 
<a> params . <RARE_TOKEN> = LayoutParams . <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> ( ) . <RARE_TOKEN> ( ( android . view . <RARE_TOKEN> . LayoutParams ) params ) ; </a> 
<a> <RARE_TOKEN> = ( TextView ) findViewById ( R . id . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = ( TextView ) findViewById ( R . id . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = ( Button ) findViewById ( R . id . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = ( Button ) findViewById ( R . id . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = ( <RARE_TOKEN> ) findViewById ( R . id . <RARE_TOKEN> ) ; </a> 
<a> JSONObject json ; </a> 
<a> try { </a> 
<a> json = Util . <RARE_TOKEN> ( response ) ; </a> 
<a> final String <RARE_TOKEN> = json . getString ( <RARE_TOKEN> ) ; </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> . setText ( json . toString ( 2 ) ) ; </a> 
<a> <RARE_TOKEN> . setText ( activity . getString ( R . string . <RARE_TOKEN> ) ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . setOnClickListener ( new View . OnClickListener ( ) { </a> 
<a> @ Override </a> 
<a> public void onClick ( View v ) { </a> 
<a> if ( <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> . setText ( R . string . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = false ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( null ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> = true ; </a> 
<a> <RARE_TOKEN> . setText ( R . string . <RARE_TOKEN> ) ; </a> 
<a> Bundle params = new Bundle ( ) ; </a> 
<a> params . putString ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> dialog = <RARE_TOKEN> . show ( activity , "" , </a> 
<a> activity . getString ( R . string . <RARE_TOKEN> ) , true , true ) ; </a> 
<a> dialog . show ( ) ; </a> 
<a> Utility . <RARE_TOKEN> . request ( <RARE_TOKEN> , params , </a> 
<a> new <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> <RARE_TOKEN> . setOnClickListener ( new View . OnClickListener ( ) { </a> 
<a> @ Override </a> 
<a> public void onClick ( View v ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> } catch ( JSONException e ) { </a> 
<a> setText ( activity . getString ( R . string . exception ) + e . getMessage ( ) ) ; </a> 
<a> } catch ( FacebookError e ) { </a> 
<a> setText ( activity . getString ( R . string . <RARE_TOKEN> ) + e . getMessage ( ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> String <RARE_TOKEN> = <RARE_TOKEN> + <RARE_TOKEN> + Utility . <RARE_TOKEN> ; </a> 
<a> Bundle params = new Bundle ( ) ; </a> 
<a> params . putString ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> params . putString ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> Utility . <RARE_TOKEN> . request ( <RARE_TOKEN> , params , <RARE_TOKEN> , new <RARE_TOKEN> ( ) , </a> 
<a> null ) ; </a> 
<a> } </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( final String response , final Object state ) { </a> 
<a> try { </a> 
<a> JSONObject json = Util . <RARE_TOKEN> ( response ) ; </a> 
<a> final String <RARE_TOKEN> = json . getString ( <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> . isEmpty ( <RARE_TOKEN> ) ) { </a> 
<a> setText ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> field of the <RARE_TOKEN> ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> . post ( new Runnable ( ) { </a> 
<a> @ Override </a> 
<a> public void run ( ) { </a> 
<a> new <RARE_TOKEN> ( ) . execute ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> } </a> 
<a> } catch ( JSONException e ) { </a> 
<a> dialog . dismiss ( ) ; </a> 
<a> setText ( activity . getString ( R . string . exception ) + e . getMessage ( ) ) ; </a> 
<a> } catch ( FacebookError e ) { </a> 
<a> dialog . dismiss ( ) ; </a> 
<a> setText ( activity . getString ( R . string . <RARE_TOKEN> ) + e . getMessage ( ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( FacebookError error ) { </a> 
<a> dialog . dismiss ( ) ; </a> 
<a> setText ( activity . getString ( R . string . <RARE_TOKEN> ) + error . getMessage ( ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( final String response , final Object state ) { </a> 
<a> if ( response . equals ( <RARE_TOKEN> ) ) { </a> 
<a> String message = <RARE_TOKEN> <RARE_TOKEN> in <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> + <RARE_TOKEN> ; </a> 
<a> message += <RARE_TOKEN> <RARE_TOKEN> " + response ; </a> 
<a> setText ( message ) ; </a> 
<a> } else { </a> 
<a> setText ( <RARE_TOKEN> <RARE_TOKEN> not be <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( FacebookError error ) { </a> 
<a> setText ( activity . getString ( R . string . <RARE_TOKEN> ) + error . getMessage ( ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public void setText ( final String <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> . post ( new Runnable ( ) { </a> 
<a> @ Override </a> 
<a> public void run ( ) { </a> 
<a> <RARE_TOKEN> . setText ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> } </a> 
<a> private class <RARE_TOKEN> extends <RARE_TOKEN> < String , Void , Bitmap > { </a> 
<a> @ Override </a> 
<a> protected Bitmap <RARE_TOKEN> ( String ... <RARE_TOKEN> ) { </a> 
<a> return Utility . <RARE_TOKEN> ( <RARE_TOKEN> [ 0 ] ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( Bitmap result ) { </a> 
<a> dialog . dismiss ( ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( result ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package com . facebook . android ; </a> 
<a> import android . app . <RARE_TOKEN> ; </a> 
<a> import android . content . Context ; </a> 
<a> import android . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import android . <RARE_TOKEN> . Bitmap ; </a> 
<a> import android . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import android . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import android . net . <RARE_TOKEN> ; </a> 
<a> import android . net . http . <RARE_TOKEN> ; </a> 
<a> import android . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import org . json . JSONObject ; </a> 
<a> import java . io . * ; </a> 
<a> import java . net . URL ; </a> 
<a> import java . net . <RARE_TOKEN> ; </a> 
<a> import java . util . <RARE_TOKEN> ; </a> 
<a> public class Utility extends <RARE_TOKEN> { </a> 
<a> public static <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> @ SuppressWarnings ( <RARE_TOKEN> ) </a> 
<a> public static <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> public static JSONObject <RARE_TOKEN> ; </a> 
<a> public static String <RARE_TOKEN> = null ; </a> 
<a> public static String <RARE_TOKEN> = null ; </a> 
<a> public static <RARE_TOKEN> model ; </a> 
<a> public static <RARE_TOKEN> <RARE_TOKEN> = null ; </a> 
<a> public static <RARE_TOKEN> < String , String > <RARE_TOKEN> = new <RARE_TOKEN> < String , String > ( ) ; </a> 
<a> private static int <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> public static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> public static Bitmap <RARE_TOKEN> ( String url ) { </a> 
<a> Bitmap <RARE_TOKEN> = null ; </a> 
<a> try { </a> 
<a> URL <RARE_TOKEN> = new URL ( url ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> . connect ( ) ; </a> 
<a> InputStream is = <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( is ) ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( new <RARE_TOKEN> ( is ) ) ; </a> 
<a> <RARE_TOKEN> . close ( ) ; </a> 
<a> is . close ( ) ; </a> 
<a> } catch ( Exception e ) { </a> 
<a> e . printStackTrace ( ) ; </a> 
<a> } finally { </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> . close ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> static class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> public <RARE_TOKEN> ( InputStream <RARE_TOKEN> ) { </a> 
<a> super ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public long <RARE_TOKEN> ( long n ) throws IOException { </a> 
<a> long <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> while ( <RARE_TOKEN> < n ) { </a> 
<a> long <RARE_TOKEN> = in . <RARE_TOKEN> ( n - <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> == <RARE_TOKEN> ) { </a> 
<a> int b = read ( ) ; </a> 
<a> if ( b < 0 ) { </a> 
<a> break ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> = 1 ; </a> 
<a> } </a> 
<a> } </a> 
<a> <RARE_TOKEN> += <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<a> public static byte [ ] <RARE_TOKEN> ( Context context , <RARE_TOKEN> <RARE_TOKEN> ) throws IOException { </a> 
<a> InputStream is = context . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> = true ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( is , null , <RARE_TOKEN> ) ; </a> 
<a> is . close ( ) ; </a> 
<a> int <RARE_TOKEN> , <RARE_TOKEN> ; </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> ( context , <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> == <RARE_TOKEN> || <RARE_TOKEN> == <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> Bitmap <RARE_TOKEN> ; </a> 
<a> is = context . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> > <RARE_TOKEN> || <RARE_TOKEN> > <RARE_TOKEN> ) { </a> 
<a> float <RARE_TOKEN> = ( ( float ) <RARE_TOKEN> ) / ( ( float ) <RARE_TOKEN> ) ; </a> 
<a> float <RARE_TOKEN> = ( ( float ) <RARE_TOKEN> ) / ( ( float ) <RARE_TOKEN> ) ; </a> 
<a> float <RARE_TOKEN> = Math . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> = ( int ) <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( is , null , <RARE_TOKEN> ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( is ) ; </a> 
<a> } </a> 
<a> is . close ( ) ; </a> 
<a> if ( <RARE_TOKEN> > 0 ) { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = Bitmap . <RARE_TOKEN> ( <RARE_TOKEN> , 0 , 0 , <RARE_TOKEN> . <RARE_TOKEN> ( ) , </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) , <RARE_TOKEN> , true ) ; </a> 
<a> } </a> 
<a> String type = context . <RARE_TOKEN> ( ) . getType ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( ) ; </a> 
<a> if ( type . equals ( <RARE_TOKEN> ) ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( Bitmap . <RARE_TOKEN> . <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } else if ( type . equals ( <RARE_TOKEN> ) || type . equals ( <RARE_TOKEN> ) ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( Bitmap . <RARE_TOKEN> . <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> byte [ ] <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> . close ( ) ; </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public static int <RARE_TOKEN> ( Context context , <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> cursor = context . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( <RARE_TOKEN> , </a> 
<a> new String [ ] { <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> } , null , null , null ) ; </a> 
<a> if ( cursor . <RARE_TOKEN> ( ) != 1 ) { </a> 
<a> return - 1 ; </a> 
<a> } </a> 
<a> cursor . <RARE_TOKEN> ( ) ; </a> 
<a> int <RARE_TOKEN> = cursor . getInt ( 0 ) ; </a> 
<a> cursor . close ( ) ; </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package com . facebook . samples . <RARE_TOKEN> ; </a> 
<a> import android . app . <RARE_TOKEN> ; </a> 
<a> import android . content . Intent ; </a> 
<a> import android . <RARE_TOKEN> . Bitmap ; </a> 
<a> import android . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import android . location . Location ; </a> 
<a> import android . os . Bundle ; </a> 
<a> import android . support . v4 . app . <RARE_TOKEN> ; </a> 
<a> import android . support . v4 . app . <RARE_TOKEN> ; </a> 
<a> import android . support . v4 . app . <RARE_TOKEN> ; </a> 
<a> import android . text . <RARE_TOKEN> ; </a> 
<a> import android . view . View ; </a> 
<a> import android . view . ViewGroup ; </a> 
<a> import android . widget . Button ; </a> 
<a> import android . widget . TextView ; </a> 
<a> import com . facebook . * ; </a> 
<a> import com . facebook . model . GraphObject ; </a> 
<a> import com . facebook . model . GraphPlace ; </a> 
<a> import com . facebook . model . GraphUser ; </a> 
<a> import com . facebook . widget . * ; </a> 
<a> import java . util . * ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> private static final List < String > <RARE_TOKEN> = Arrays . asList ( <RARE_TOKEN> ) ; </a> 
<a> private static final Location <RARE_TOKEN> = new Location ( "" ) { </a> 
<a> { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( - <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } ; </a> 
<a> private final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private Button <RARE_TOKEN> ; </a> 
<a> private Button <RARE_TOKEN> ; </a> 
<a> private Button <RARE_TOKEN> ; </a> 
<a> private Button <RARE_TOKEN> ; </a> 
<a> private LoginButton <RARE_TOKEN> ; </a> 
<a> private ProfilePictureView <RARE_TOKEN> ; </a> 
<a> private TextView <RARE_TOKEN> ; </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> private ViewGroup <RARE_TOKEN> ; </a> 
<a> private GraphUser user ; </a> 
<a> private enum <RARE_TOKEN> { </a> 
<a> <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> </a> 
<a> } </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> private Session . StatusCallback callback = new Session . StatusCallback ( ) { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( Session session , SessionState state , Exception exception ) { </a> 
<a> <RARE_TOKEN> ( session , state , exception ) ; </a> 
<a> } </a> 
<a> } ; </a> 
<a> @ Override </a> 
<a> public void onCreate ( Bundle savedInstanceState ) { </a> 
<a> super . onCreate ( savedInstanceState ) ; </a> 
<a> <RARE_TOKEN> = new <RARE_TOKEN> ( this , callback ) ; </a> 
<a> <RARE_TOKEN> . onCreate ( savedInstanceState ) ; </a> 
<a> if ( savedInstanceState != null ) { </a> 
<a> String name = savedInstanceState . getString ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . valueOf ( name ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( R . layout . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = ( LoginButton ) findViewById ( R . id . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( new LoginButton . <RARE_TOKEN> ( ) { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( GraphUser user ) { </a> 
<a> <RARE_TOKEN> . this . user = user ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> <RARE_TOKEN> = ( ProfilePictureView ) findViewById ( R . id . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = ( TextView ) findViewById ( R . id . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = ( Button ) findViewById ( R . id . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . setOnClickListener ( new View . OnClickListener ( ) { </a> 
<a> public void onClick ( View view ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> <RARE_TOKEN> = ( Button ) findViewById ( R . id . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . setOnClickListener ( new View . OnClickListener ( ) { </a> 
<a> public void onClick ( View view ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> <RARE_TOKEN> = ( Button ) findViewById ( R . id . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . setOnClickListener ( new View . OnClickListener ( ) { </a> 
<a> public void onClick ( View view ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> <RARE_TOKEN> = ( Button ) findViewById ( R . id . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . setOnClickListener ( new View . OnClickListener ( ) { </a> 
<a> public void onClick ( View view ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> <RARE_TOKEN> = ( ViewGroup ) findViewById ( R . id . <RARE_TOKEN> ) ; </a> 
<a> final <RARE_TOKEN> <RARE_TOKEN> = <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> fragment = <RARE_TOKEN> . <RARE_TOKEN> ( R . id . <RARE_TOKEN> ) ; </a> 
<a> if ( fragment != null ) { </a> 
<a> <RARE_TOKEN> . setVisibility ( View . <RARE_TOKEN> ) ; </a> 
<a> if ( fragment instanceof <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( ( <RARE_TOKEN> ) fragment ) ; </a> 
<a> } else if ( fragment instanceof <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( ( <RARE_TOKEN> ) fragment ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( new <RARE_TOKEN> . <RARE_TOKEN> ( ) { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> if ( <RARE_TOKEN> . <RARE_TOKEN> ( ) == 0 ) { </a> 
<a> <RARE_TOKEN> . setVisibility ( View . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( ) { </a> 
<a> super . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void onSaveInstanceState ( Bundle outState ) { </a> 
<a> super . onSaveInstanceState ( outState ) ; </a> 
<a> <RARE_TOKEN> . onSaveInstanceState ( outState ) ; </a> 
<a> outState . putString ( <RARE_TOKEN> , <RARE_TOKEN> . name ( ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void onActivityResult ( int requestCode , int resultCode , Intent data ) { </a> 
<a> super . onActivityResult ( requestCode , resultCode , data ) ; </a> 
<a> <RARE_TOKEN> . onActivityResult ( requestCode , resultCode , data ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> super . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> super . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( Session session , SessionState state , Exception exception ) { </a> 
<a> if ( <RARE_TOKEN> != <RARE_TOKEN> . <RARE_TOKEN> && </a> 
<a> ( exception instanceof <RARE_TOKEN> || </a> 
<a> exception instanceof <RARE_TOKEN> ) ) { </a> 
<a> new <RARE_TOKEN> . Builder ( <RARE_TOKEN> . this ) </a> 
<a> . <RARE_TOKEN> ( R . string . <RARE_TOKEN> ) </a> 
<a> . <RARE_TOKEN> ( R . string . <RARE_TOKEN> ) </a> 
<a> . <RARE_TOKEN> ( R . string . <RARE_TOKEN> , null ) </a> 
<a> . show ( ) ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> } else if ( state == SessionState . <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( ) { </a> 
<a> Session session = Session . getActiveSession ( ) ; </a> 
<a> boolean <RARE_TOKEN> = ( session != null && session . isOpened ( ) ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> && user != null ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( user . getId ( ) ) ; </a> 
<a> <RARE_TOKEN> . setText ( getString ( R . string . <RARE_TOKEN> , user . <RARE_TOKEN> ( ) ) ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( null ) ; </a> 
<a> <RARE_TOKEN> . setText ( null ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ SuppressWarnings ( <RARE_TOKEN> ) </a> 
<a> private void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> switch ( <RARE_TOKEN> ) { </a> 
<a> case <RARE_TOKEN> : </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> break ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> break ; </a> 
<a> } </a> 
<a> } </a> 
<a> private interface <RARE_TOKEN> extends GraphObject { </a> 
<a> String getId ( ) ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( String message , GraphObject result , FacebookRequestError error ) { </a> 
<a> String <RARE_TOKEN> = null ; </a> 
<a> String <RARE_TOKEN> = null ; </a> 
<a> if ( error == null ) { </a> 
<a> <RARE_TOKEN> = getString ( R . string . success ) ; </a> 
<a> String id = result . cast ( <RARE_TOKEN> . class ) . getId ( ) ; </a> 
<a> <RARE_TOKEN> = getString ( R . string . <RARE_TOKEN> , message , id ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> = getString ( R . string . error ) ; </a> 
<a> <RARE_TOKEN> = error . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> new <RARE_TOKEN> . Builder ( this ) </a> 
<a> . <RARE_TOKEN> ( <RARE_TOKEN> ) </a> 
<a> . <RARE_TOKEN> ( <RARE_TOKEN> ) </a> 
<a> . <RARE_TOKEN> ( R . string . <RARE_TOKEN> , null ) </a> 
<a> . show ( ) ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( ) { </a> 
<a> if ( user != null && <RARE_TOKEN> ( ) ) { </a> 
<a> final String message = getString ( R . string . <RARE_TOKEN> , user . <RARE_TOKEN> ( ) , ( new Date ( ) . toString ( ) ) ) ; </a> 
<a> Request request = Request </a> 
<a> . <RARE_TOKEN> ( Session . getActiveSession ( ) , message , new Request . Callback ( ) { </a> 
<a> @ Override </a> 
<a> public void onCompleted ( Response response ) { </a> 
<a> <RARE_TOKEN> ( message , response . <RARE_TOKEN> ( ) , response . getError ( ) ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> request . <RARE_TOKEN> ( ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( ) { </a> 
<a> if ( <RARE_TOKEN> ( ) ) { </a> 
<a> Bitmap <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( this . getResources ( ) , R . <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> Request request = Request . <RARE_TOKEN> ( Session . getActiveSession ( ) , <RARE_TOKEN> , new Request . Callback ( ) { </a> 
<a> @ Override </a> 
<a> public void onCompleted ( Response response ) { </a> 
<a> <RARE_TOKEN> ( getString ( R . string . <RARE_TOKEN> ) , response . <RARE_TOKEN> ( ) , response . getError ( ) ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> request . <RARE_TOKEN> ( ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( PickerFragment < ? > fragment ) { </a> 
<a> fragment . <RARE_TOKEN> ( new PickerFragment . <RARE_TOKEN> ( ) { </a> 
<a> @ Override </a> 
<a> public void onError ( PickerFragment < ? > <RARE_TOKEN> , FacebookException error ) { </a> 
<a> <RARE_TOKEN> ( getString ( R . string . error ) , error . getMessage ( ) ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) </a> 
<a> . <RARE_TOKEN> ( R . id . <RARE_TOKEN> , fragment ) </a> 
<a> . <RARE_TOKEN> ( null ) </a> 
<a> . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> . setVisibility ( View . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> fragment . <RARE_TOKEN> ( false ) ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( ) { </a> 
<a> final <RARE_TOKEN> fragment = new <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> ( fragment ) ; </a> 
<a> <RARE_TOKEN> ( fragment ) ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( final <RARE_TOKEN> fragment ) { </a> 
<a> fragment . <RARE_TOKEN> ( new <RARE_TOKEN> . <RARE_TOKEN> ( ) { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( PickerFragment < ? > <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( fragment ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( <RARE_TOKEN> fragment ) { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> String <RARE_TOKEN> = "" ; </a> 
<a> Collection < GraphUser > <RARE_TOKEN> = fragment . <RARE_TOKEN> ( ) ; </a> 
<a> if ( <RARE_TOKEN> != null && <RARE_TOKEN> . size ( ) > 0 ) { </a> 
<a> ArrayList < String > names = new ArrayList < String > ( ) ; </a> 
<a> for ( GraphUser user : <RARE_TOKEN> ) { </a> 
<a> names . add ( user . getName ( ) ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( ", " , names ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> = getString ( R . string . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( getString ( R . string . <RARE_TOKEN> ) , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( <RARE_TOKEN> fragment ) { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> String result = "" ; </a> 
<a> GraphPlace <RARE_TOKEN> = fragment . <RARE_TOKEN> ( ) ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> result = <RARE_TOKEN> . getName ( ) ; </a> 
<a> } else { </a> 
<a> result = getString ( R . string . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( getString ( R . string . <RARE_TOKEN> ) , result ) ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( ) { </a> 
<a> final <RARE_TOKEN> fragment = new <RARE_TOKEN> ( ) ; </a> 
<a> fragment . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> fragment . <RARE_TOKEN> ( getString ( R . string . <RARE_TOKEN> ) ) ; </a> 
<a> <RARE_TOKEN> ( fragment ) ; </a> 
<a> <RARE_TOKEN> ( fragment ) ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( final <RARE_TOKEN> fragment ) { </a> 
<a> fragment . <RARE_TOKEN> ( new <RARE_TOKEN> . <RARE_TOKEN> ( ) { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( PickerFragment < ? > <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( fragment ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> fragment . <RARE_TOKEN> ( new <RARE_TOKEN> . <RARE_TOKEN> ( ) { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( PickerFragment < ? > <RARE_TOKEN> ) { </a> 
<a> if ( fragment . <RARE_TOKEN> ( ) != null ) { </a> 
<a> <RARE_TOKEN> ( fragment ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( String <RARE_TOKEN> , String message ) { </a> 
<a> new <RARE_TOKEN> . Builder ( this ) </a> 
<a> . <RARE_TOKEN> ( <RARE_TOKEN> ) </a> 
<a> . <RARE_TOKEN> ( message ) </a> 
<a> . <RARE_TOKEN> ( R . string . <RARE_TOKEN> , null ) </a> 
<a> . show ( ) ; </a> 
<a> } </a> 
<a> private boolean <RARE_TOKEN> ( ) { </a> 
<a> Session session = Session . getActiveSession ( ) ; </a> 
<a> return session != null && session . getPermissions ( ) . contains ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( <RARE_TOKEN> action ) { </a> 
<a> Session session = Session . getActiveSession ( ) ; </a> 
<a> if ( session != null ) { </a> 
<a> <RARE_TOKEN> = action ; </a> 
<a> if ( <RARE_TOKEN> ( ) ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } else { </a> 
<a> session . <RARE_TOKEN> ( new Session . <RARE_TOKEN> ( this , <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package com . facebook . samples . <RARE_TOKEN> ; </a> 
<a> import android . app . <RARE_TOKEN> ; </a> 
<a> import android . content . Intent ; </a> 
<a> import android . location . Location ; </a> 
<a> import android . os . Bundle ; </a> 
<a> import android . support . v4 . app . <RARE_TOKEN> ; </a> 
<a> import android . support . v4 . app . <RARE_TOKEN> ; </a> 
<a> import com . facebook . FacebookException ; </a> 
<a> import com . facebook . widget . PickerFragment ; </a> 
<a> import com . facebook . widget . <RARE_TOKEN> ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> public static void <RARE_TOKEN> ( Intent intent , Location location , String <RARE_TOKEN> ) { </a> 
<a> intent . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> , location ) ; </a> 
<a> intent . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void onCreate ( Bundle savedInstanceState ) { </a> 
<a> super . onCreate ( savedInstanceState ) ; </a> 
<a> <RARE_TOKEN> ( R . layout . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> = ( <RARE_TOKEN> ) <RARE_TOKEN> . <RARE_TOKEN> ( R . id . <RARE_TOKEN> ) ; </a> 
<a> if ( savedInstanceState == null ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ( ) . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( new PickerFragment . <RARE_TOKEN> ( ) { </a> 
<a> @ Override </a> 
<a> public void onError ( PickerFragment < ? > fragment , FacebookException error ) { </a> 
<a> <RARE_TOKEN> . this . onError ( error ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( new PickerFragment . <RARE_TOKEN> ( ) { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( PickerFragment < ? > fragment ) { </a> 
<a> if ( <RARE_TOKEN> . <RARE_TOKEN> ( ) != null ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( new PickerFragment . <RARE_TOKEN> ( ) { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( PickerFragment < ? > fragment ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = ( <RARE_TOKEN> ) <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> , null ) ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> private void onError ( Exception error ) { </a> 
<a> new <RARE_TOKEN> . Builder ( this ) </a> 
<a> . <RARE_TOKEN> ( R . string . <RARE_TOKEN> ) </a> 
<a> . <RARE_TOKEN> ( error . getMessage ( ) ) </a> 
<a> . <RARE_TOKEN> ( R . string . <RARE_TOKEN> , null ) </a> 
<a> . show ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( ) { </a> 
<a> super . <RARE_TOKEN> ( ) ; </a> 
<a> try { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( false ) ; </a> 
<a> } catch ( Exception ex ) { </a> 
<a> onError ( ex ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package com . facebook . samples . <RARE_TOKEN> ; </a> 
<a> import android . app . <RARE_TOKEN> ; </a> 
<a> import com . facebook . model . GraphPlace ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> public GraphPlace <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( GraphPlace <RARE_TOKEN> ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> private GraphPlace <RARE_TOKEN> ; </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package com . facebook . samples . <RARE_TOKEN> ; </a> 
<a> import android . app . <RARE_TOKEN> ; </a> 
<a> import android . content . Context ; </a> 
<a> import android . content . Intent ; </a> 
<a> import android . location . <RARE_TOKEN> ; </a> 
<a> import android . location . Location ; </a> 
<a> import android . location . <RARE_TOKEN> ; </a> 
<a> import android . location . <RARE_TOKEN> ; </a> 
<a> import android . os . Bundle ; </a> 
<a> import android . support . v4 . app . <RARE_TOKEN> ; </a> 
<a> import android . view . View ; </a> 
<a> import android . widget . Button ; </a> 
<a> import android . widget . TextView ; </a> 
<a> import com . facebook . model . <RARE_TOKEN> ; </a> 
<a> import com . facebook . model . GraphPlace ; </a> 
<a> import com . facebook . Session ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> implements <RARE_TOKEN> { </a> 
<a> private static final int <RARE_TOKEN> = 1 ; </a> 
<a> private static final Location <RARE_TOKEN> = new Location ( "" ) { </a> 
<a> { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( - <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } ; </a> 
<a> private static final Location <RARE_TOKEN> = new Location ( "" ) { </a> 
<a> { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( - <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } ; </a> 
<a> private static final Location <RARE_TOKEN> = new Location ( "" ) { </a> 
<a> { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } ; </a> 
<a> private TextView <RARE_TOKEN> ; </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> private Location <RARE_TOKEN> ; </a> 
<a> @ Override </a> 
<a> public void onCreate ( Bundle savedInstanceState ) { </a> 
<a> super . onCreate ( savedInstanceState ) ; </a> 
<a> <RARE_TOKEN> ( R . layout . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = ( TextView ) findViewById ( R . id . <RARE_TOKEN> ) ; </a> 
<a> Button button = ( Button ) findViewById ( R . id . <RARE_TOKEN> ) ; </a> 
<a> button . setOnClickListener ( new View . OnClickListener ( ) { </a> 
<a> public void onClick ( View view ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> button = ( Button ) findViewById ( R . id . <RARE_TOKEN> ) ; </a> 
<a> button . setOnClickListener ( new View . OnClickListener ( ) { </a> 
<a> public void onClick ( View view ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> button = ( Button ) findViewById ( R . id . <RARE_TOKEN> ) ; </a> 
<a> button . setOnClickListener ( new View . OnClickListener ( ) { </a> 
<a> public void onClick ( View view ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> if ( Session . getActiveSession ( ) == null || </a> 
<a> Session . getActiveSession ( ) . <RARE_TOKEN> ( ) ) { </a> 
<a> Session . <RARE_TOKEN> ( this , true , null ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> = ( <RARE_TOKEN> ) <RARE_TOKEN> ( Context . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( ) { </a> 
<a> super . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> private void onError ( Exception exception ) { </a> 
<a> <RARE_TOKEN> . Builder builder = new <RARE_TOKEN> . Builder ( this ) ; </a> 
<a> builder . <RARE_TOKEN> ( <RARE_TOKEN> ) . <RARE_TOKEN> ( exception . getMessage ( ) ) . <RARE_TOKEN> ( <RARE_TOKEN> , null ) ; </a> 
<a> builder . show ( ) ; </a> 
<a> } </a> 
<a> public void onActivityResult ( int requestCode , int resultCode , Intent data ) { </a> 
<a> switch ( requestCode ) { </a> 
<a> case <RARE_TOKEN> : </a> 
<a> <RARE_TOKEN> ( resultCode ) ; </a> 
<a> break ; </a> 
<a> default : </a> 
<a> Session . getActiveSession ( ) . onActivityResult ( this , requestCode , resultCode , data ) ; </a> 
<a> break ; </a> 
<a> } </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( int resultCode ) { </a> 
<a> String <RARE_TOKEN> = "" ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = ( <RARE_TOKEN> ) <RARE_TOKEN> ( ) ; </a> 
<a> GraphPlace <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> location = <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> = String . format ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> . getName ( ) , <RARE_TOKEN> . <RARE_TOKEN> ( ) , </a> 
<a> location . <RARE_TOKEN> ( ) , location . <RARE_TOKEN> ( ) , </a> 
<a> location . <RARE_TOKEN> ( ) , location . <RARE_TOKEN> ( ) , location . <RARE_TOKEN> ( ) , location . <RARE_TOKEN> ( ) , </a> 
<a> location . <RARE_TOKEN> ( ) ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> . setText ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( Location location ) { </a> 
<a> <RARE_TOKEN> = location ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( String <RARE_TOKEN> , int status , Bundle extras ) { </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( String <RARE_TOKEN> ) { </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( String <RARE_TOKEN> ) { </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( Location location ) { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = ( <RARE_TOKEN> ) <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( null ) ; </a> 
<a> Intent intent = new Intent ( this , <RARE_TOKEN> . class ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( intent , location , null ) ; </a> 
<a> <RARE_TOKEN> ( intent , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( ) { </a> 
<a> try { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } catch ( Exception ex ) { </a> 
<a> onError ( ex ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( ) { </a> 
<a> try { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } catch ( Exception ex ) { </a> 
<a> onError ( ex ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( ) { </a> 
<a> try { </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( ) ; </a> 
<a> String <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> , false ) ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> String model = android . os . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> if ( model . equals ( <RARE_TOKEN> ) || model . equals ( <RARE_TOKEN> ) || model . contains ( <RARE_TOKEN> ) ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } else { </a> 
<a> new <RARE_TOKEN> . Builder ( this ) </a> 
<a> . <RARE_TOKEN> ( R . string . <RARE_TOKEN> ) </a> 
<a> . <RARE_TOKEN> ( R . string . <RARE_TOKEN> ) </a> 
<a> . <RARE_TOKEN> ( R . string . <RARE_TOKEN> , null ) </a> 
<a> . show ( ) ; </a> 
<a> return ; </a> 
<a> } </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } catch ( Exception ex ) { </a> 
<a> onError ( ex ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package com . facebook . samples . <RARE_TOKEN> ; </a> 
<a> import android . os . Bundle ; </a> 
<a> import android . support . v4 . app . <RARE_TOKEN> ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> @ Override </a> 
<a> public void onCreate ( Bundle savedInstanceState ) { </a> 
<a> super . onCreate ( savedInstanceState ) ; </a> 
<a> <RARE_TOKEN> ( R . layout . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package com . facebook . samples . <RARE_TOKEN> ; </a> 
<a> import android . os . Bundle ; </a> 
<a> import android . support . v4 . app . <RARE_TOKEN> ; </a> 
<a> import android . view . <RARE_TOKEN> ; </a> 
<a> import android . view . View ; </a> 
<a> import android . view . ViewGroup ; </a> 
<a> import android . widget . * ; </a> 
<a> import com . facebook . widget . ProfilePictureView ; </a> 
<a> import java . util . Date ; </a> 
<a> import java . util . Random ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> private static final int <RARE_TOKEN> = 6 ; </a> 
<a> private static final int <RARE_TOKEN> = <RARE_TOKEN> / 2 ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String [ ] <RARE_TOKEN> = { </a> 
<a> <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , </a> 
<a> } ; </a> 
<a> private int <RARE_TOKEN> = ProfilePictureView . <RARE_TOKEN> ; </a> 
<a> private String <RARE_TOKEN> ; </a> 
<a> private Random <RARE_TOKEN> ; </a> 
<a> private ProfilePictureView <RARE_TOKEN> ; </a> 
<a> private Button <RARE_TOKEN> ; </a> 
<a> private Button <RARE_TOKEN> ; </a> 
<a> private TextView <RARE_TOKEN> ; </a> 
<a> private View <RARE_TOKEN> ; </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> @ Override </a> 
<a> public View <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> , ViewGroup parent , Bundle savedInstanceState ) { </a> 
<a> View <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( R . layout . <RARE_TOKEN> , parent , false ) ; </a> 
<a> <RARE_TOKEN> = new Random ( ( new Date ( ) ) . getTime ( ) ) ; </a> 
<a> <RARE_TOKEN> = ( ProfilePictureView ) <RARE_TOKEN> . findViewById ( R . id . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = ( Button ) <RARE_TOKEN> . findViewById ( R . id . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = ( Button ) <RARE_TOKEN> . findViewById ( R . id . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = ( TextView ) <RARE_TOKEN> . findViewById ( R . id . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . findViewById ( R . id . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = ( <RARE_TOKEN> ) <RARE_TOKEN> . findViewById ( R . id . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = ( <RARE_TOKEN> ) <RARE_TOKEN> . findViewById ( R . id . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> container = ( <RARE_TOKEN> ) <RARE_TOKEN> . findViewById ( R . id . <RARE_TOKEN> ) ; </a> 
<a> int <RARE_TOKEN> = container . <RARE_TOKEN> ( ) ; </a> 
<a> for ( int i = 0 ; i < <RARE_TOKEN> ; i ++ ) { </a> 
<a> View <RARE_TOKEN> = container . <RARE_TOKEN> ( i ) ; </a> 
<a> Object <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> if ( <RARE_TOKEN> instanceof Button ) { </a> 
<a> <RARE_TOKEN> ( ( Button ) <RARE_TOKEN> ) ; </a> 
<a> if ( i == 0 ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . toString ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( new <RARE_TOKEN> . <RARE_TOKEN> ( ) { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> , boolean <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> final Button <RARE_TOKEN> = ( Button ) <RARE_TOKEN> . findViewById ( R . id . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . setOnClickListener ( new View . OnClickListener ( ) { </a> 
<a> @ Override </a> 
<a> public void onClick ( View view ) { </a> 
<a> if ( <RARE_TOKEN> != ProfilePictureView . <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> . setText ( R . string . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> . setText ( R . string . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( ProfilePictureView . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> <RARE_TOKEN> . setOnClickListener ( new View . OnClickListener ( ) { </a> 
<a> @ Override </a> 
<a> public void onClick ( View view ) { </a> 
<a> switch ( <RARE_TOKEN> . <RARE_TOKEN> ( ) ) { </a> 
<a> case ProfilePictureView . <RARE_TOKEN> : </a> 
<a> <RARE_TOKEN> ( ProfilePictureView . <RARE_TOKEN> ) ; </a> 
<a> break ; </a> 
<a> case ProfilePictureView . <RARE_TOKEN> : </a> 
<a> <RARE_TOKEN> ( ProfilePictureView . <RARE_TOKEN> ) ; </a> 
<a> break ; </a> 
<a> } </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> <RARE_TOKEN> . setOnClickListener ( new View . OnClickListener ( ) { </a> 
<a> @ Override </a> 
<a> public void onClick ( View view ) { </a> 
<a> switch ( <RARE_TOKEN> . <RARE_TOKEN> ( ) ) { </a> 
<a> case ProfilePictureView . <RARE_TOKEN> : </a> 
<a> <RARE_TOKEN> ( ProfilePictureView . <RARE_TOKEN> ) ; </a> 
<a> break ; </a> 
<a> case ProfilePictureView . <RARE_TOKEN> : </a> 
<a> <RARE_TOKEN> ( ProfilePictureView . <RARE_TOKEN> ) ; </a> 
<a> break ; </a> 
<a> } </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( new <RARE_TOKEN> . <RARE_TOKEN> ( ) { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> , int i , boolean b ) { </a> 
<a> <RARE_TOKEN> ( i ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> <RARE_TOKEN> ( savedInstanceState ) ; </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void onSaveInstanceState ( Bundle outState ) { </a> 
<a> super . onSaveInstanceState ( outState ) ; </a> 
<a> outState . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( Bundle savedInstanceState ) { </a> 
<a> if ( savedInstanceState != null ) { </a> 
<a> <RARE_TOKEN> = savedInstanceState . getInt ( </a> 
<a> <RARE_TOKEN> , ProfilePictureView . <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> == ProfilePictureView . <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> ( ProfilePictureView . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( Button b ) { </a> 
<a> b . setOnClickListener ( new Button . OnClickListener ( ) { </a> 
<a> @ Override </a> 
<a> public void onClick ( View v ) { </a> 
<a> Object <RARE_TOKEN> = v . <RARE_TOKEN> ( ) ; </a> 
<a> String <RARE_TOKEN> = null ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . toString ( ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> [ <RARE_TOKEN> . nextInt ( <RARE_TOKEN> . length ) ] ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> = ProfilePictureView . <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> . setVisibility ( View . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . setVisibility ( View . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( int <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> . setVisibility ( View . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . setVisibility ( View . <RARE_TOKEN> ) ; </a> 
<a> switch ( <RARE_TOKEN> ) { </a> 
<a> case ProfilePictureView . <RARE_TOKEN> : </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( true ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( false ) ; </a> 
<a> <RARE_TOKEN> . setText ( R . string . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> break ; </a> 
<a> case ProfilePictureView . <RARE_TOKEN> : </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( true ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( true ) ; </a> 
<a> <RARE_TOKEN> . setText ( R . string . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> break ; </a> 
<a> case ProfilePictureView . <RARE_TOKEN> : </a> 
<a> default : </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( false ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( true ) ; </a> 
<a> <RARE_TOKEN> . setText ( R . string . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = ProfilePictureView . <RARE_TOKEN> ; </a> 
<a> break ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> . LayoutParams params = new <RARE_TOKEN> . LayoutParams ( </a> 
<a> 0 , </a> 
<a> ViewGroup . LayoutParams . <RARE_TOKEN> , </a> 
<a> 1 </a> 
<a> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( params ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( int i ) { </a> 
<a> if ( <RARE_TOKEN> != ProfilePictureView . <RARE_TOKEN> ) { </a> 
<a> return ; </a> 
<a> } </a> 
<a> float <RARE_TOKEN> = ( i * <RARE_TOKEN> ) + <RARE_TOKEN> ; </a> 
<a> float <RARE_TOKEN> = ( i * 28 ) + <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> . LayoutParams params = new <RARE_TOKEN> . LayoutParams ( </a> 
<a> ( int ) ( <RARE_TOKEN> * getResources ( ) . <RARE_TOKEN> ( ) . <RARE_TOKEN> ) , </a> 
<a> ( int ) ( <RARE_TOKEN> * getResources ( ) . <RARE_TOKEN> ( ) . <RARE_TOKEN> ) ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( params ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package com . facebook . <RARE_TOKEN> ; </a> 
<a> import android . content . Intent ; </a> 
<a> import android . <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import android . os . Bundle ; </a> 
<a> import android . view . View ; </a> 
<a> import android . widget . <RARE_TOKEN> ; </a> 
<a> import com . facebook . model . <RARE_TOKEN> ; </a> 
<a> public abstract class <RARE_TOKEN> { </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> private String <RARE_TOKEN> ; </a> 
<a> private String <RARE_TOKEN> ; </a> 
<a> private <RARE_TOKEN> adapter ; </a> 
<a> private int requestCode ; </a> 
<a> public <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> , String <RARE_TOKEN> , String <RARE_TOKEN> , int requestCode ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> this . requestCode = requestCode ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( <RARE_TOKEN> adapter ) { </a> 
<a> this . adapter = adapter ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public String <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public String <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public int <RARE_TOKEN> ( ) { </a> 
<a> return requestCode ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( String <RARE_TOKEN> ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> if ( adapter != null ) { </a> 
<a> adapter . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( String <RARE_TOKEN> ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> if ( adapter != null ) { </a> 
<a> adapter . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> protected abstract View . OnClickListener <RARE_TOKEN> ( ) ; </a> 
<a> protected abstract void <RARE_TOKEN> ( <RARE_TOKEN> action ) ; </a> 
<a> protected void onActivityResult ( Intent data ) { } </a> 
<a> protected void onSaveInstanceState ( Bundle bundle ) { } </a> 
<a> protected boolean <RARE_TOKEN> ( Bundle <RARE_TOKEN> ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> protected void <RARE_TOKEN> ( ) { </a> 
<a> adapter . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package com . facebook . <RARE_TOKEN> ; </a> 
<a> import android . content . Context ; </a> 
<a> import android . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import android . util . <RARE_TOKEN> ; </a> 
<a> import android . view . View ; </a> 
<a> import android . widget . <RARE_TOKEN> ; </a> 
<a> import android . widget . <RARE_TOKEN> ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> public <RARE_TOKEN> ( Context context ) { </a> 
<a> super ( context ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( Context context , <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> super ( context , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( Context context , <RARE_TOKEN> <RARE_TOKEN> , int <RARE_TOKEN> ) { </a> 
<a> super ( context , <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( int <RARE_TOKEN> , int <RARE_TOKEN> ) { </a> 
<a> super . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> ( ) ; </a> 
<a> int <RARE_TOKEN> = 0 ; </a> 
<a> <RARE_TOKEN> adapter = <RARE_TOKEN> ( ) ; </a> 
<a> int count = adapter . <RARE_TOKEN> ( ) ; </a> 
<a> for ( int i = 0 ; i < count ; i ++ ) { </a> 
<a> View <RARE_TOKEN> = adapter . <RARE_TOKEN> ( i , null , this ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ( 0 , <RARE_TOKEN> . <RARE_TOKEN> ) , </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( 0 , <RARE_TOKEN> . <RARE_TOKEN> ) ) ; </a> 
<a> <RARE_TOKEN> += <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> ( ) . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> += ( count - 1 ) * <RARE_TOKEN> ( ) + <RARE_TOKEN> . <RARE_TOKEN> + <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package com . facebook . <RARE_TOKEN> ; </a> 
<a> import android . content . Intent ; </a> 
<a> import android . os . Bundle ; </a> 
<a> import android . support . v4 . app . <RARE_TOKEN> ; </a> 
<a> import android . support . v4 . app . <RARE_TOKEN> ; </a> 
<a> import android . support . v4 . app . <RARE_TOKEN> ; </a> 
<a> import android . support . v4 . app . <RARE_TOKEN> ; </a> 
<a> import android . view . <RARE_TOKEN> ; </a> 
<a> import android . view . <RARE_TOKEN> ; </a> 
<a> import com . facebook . Session ; </a> 
<a> import com . facebook . SessionState ; </a> 
<a> import com . facebook . <RARE_TOKEN> ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> private static final int <RARE_TOKEN> = 0 ; </a> 
<a> private static final int <RARE_TOKEN> = 1 ; </a> 
<a> private static final int <RARE_TOKEN> = 2 ; </a> 
<a> private static final int <RARE_TOKEN> = <RARE_TOKEN> + 1 ; </a> 
<a> private <RARE_TOKEN> [ ] <RARE_TOKEN> = new <RARE_TOKEN> [ <RARE_TOKEN> ] ; </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> private boolean <RARE_TOKEN> = false ; </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> private Session . StatusCallback callback = new Session . StatusCallback ( ) { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( Session session , SessionState state , Exception exception ) { </a> 
<a> <RARE_TOKEN> ( session , state , exception ) ; </a> 
<a> } </a> 
<a> } ; </a> 
<a> @ Override </a> 
<a> public void onCreate ( Bundle savedInstanceState ) { </a> 
<a> super . onCreate ( savedInstanceState ) ; </a> 
<a> <RARE_TOKEN> = new <RARE_TOKEN> ( this , callback ) ; </a> 
<a> <RARE_TOKEN> . onCreate ( savedInstanceState ) ; </a> 
<a> <RARE_TOKEN> ( R . layout . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> [ <RARE_TOKEN> ] = <RARE_TOKEN> . <RARE_TOKEN> ( R . id . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> [ <RARE_TOKEN> ] = <RARE_TOKEN> . <RARE_TOKEN> ( R . id . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> [ <RARE_TOKEN> ] = <RARE_TOKEN> . <RARE_TOKEN> ( R . id . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> for ( int i = 0 ; i < <RARE_TOKEN> . length ; i ++ ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> [ i ] ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> super . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> = true ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> super . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> = false ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void onActivityResult ( int requestCode , int resultCode , Intent data ) { </a> 
<a> super . onActivityResult ( requestCode , resultCode , data ) ; </a> 
<a> <RARE_TOKEN> . onActivityResult ( requestCode , resultCode , data ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> super . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void onSaveInstanceState ( Bundle outState ) { </a> 
<a> super . onSaveInstanceState ( outState ) ; </a> 
<a> <RARE_TOKEN> . onSaveInstanceState ( outState ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( ) { </a> 
<a> super . <RARE_TOKEN> ( ) ; </a> 
<a> Session session = Session . getActiveSession ( ) ; </a> 
<a> if ( session != null && session . isOpened ( ) ) { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> , false ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> , false ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> if ( <RARE_TOKEN> [ <RARE_TOKEN> ] . <RARE_TOKEN> ( ) ) { </a> 
<a> if ( <RARE_TOKEN> . size ( ) == 0 ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . add ( R . string . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> return true ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> . clear ( ) ; </a> 
<a> <RARE_TOKEN> = null ; </a> 
<a> } </a> 
<a> return false ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> if ( <RARE_TOKEN> . equals ( <RARE_TOKEN> ) ) { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> , true ) ; </a> 
<a> return true ; </a> 
<a> } </a> 
<a> return false ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( Session session , SessionState state , Exception exception ) { </a> 
<a> if ( <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> manager = <RARE_TOKEN> ( ) ; </a> 
<a> int <RARE_TOKEN> = manager . <RARE_TOKEN> ( ) ; </a> 
<a> for ( int i = 0 ; i < <RARE_TOKEN> ; i ++ ) { </a> 
<a> manager . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> if ( state . equals ( SessionState . <RARE_TOKEN> ) ) { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> , false ) ; </a> 
<a> } else if ( state . <RARE_TOKEN> ( ) ) { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> , false ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( int <RARE_TOKEN> , boolean <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> for ( int i = 0 ; i < <RARE_TOKEN> . length ; i ++ ) { </a> 
<a> if ( i == <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> . show ( <RARE_TOKEN> [ i ] ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> [ i ] ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( null ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package com . facebook . <RARE_TOKEN> ; </a> 
<a> import android . app . Activity ; </a> 
<a> import android . app . <RARE_TOKEN> ; </a> 
<a> import android . app . <RARE_TOKEN> ; </a> 
<a> import android . content . Context ; </a> 
<a> import android . content . DialogInterface ; </a> 
<a> import android . content . Intent ; </a> 
<a> import android . net . <RARE_TOKEN> ; </a> 
<a> import android . os . <RARE_TOKEN> ; </a> 
<a> import android . os . Bundle ; </a> 
<a> import android . support . v4 . app . <RARE_TOKEN> ; </a> 
<a> import android . util . Log ; </a> 
<a> import android . view . <RARE_TOKEN> ; </a> 
<a> import android . view . View ; </a> 
<a> import android . view . ViewGroup ; </a> 
<a> import android . widget . * ; </a> 
<a> import com . facebook . * ; </a> 
<a> import com . facebook . model . * ; </a> 
<a> import com . facebook . widget . ProfilePictureView ; </a> 
<a> import org . json . JSONException ; </a> 
<a> import org . json . JSONObject ; </a> 
<a> import java . io . * ; </a> 
<a> import java . util . ArrayList ; </a> 
<a> import java . util . Arrays ; </a> 
<a> import java . util . List ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> private static final String TAG = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final <RARE_TOKEN> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> private static final int <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final List < String > <RARE_TOKEN> = Arrays . asList ( <RARE_TOKEN> ) ; </a> 
<a> private Button <RARE_TOKEN> ; </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> private List < <RARE_TOKEN> > <RARE_TOKEN> ; </a> 
<a> private ProfilePictureView <RARE_TOKEN> ; </a> 
<a> private TextView <RARE_TOKEN> ; </a> 
<a> private boolean <RARE_TOKEN> ; </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> private Session . StatusCallback callback = new Session . StatusCallback ( ) { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( final Session session , final SessionState state , final Exception exception ) { </a> 
<a> <RARE_TOKEN> ( session , state , exception ) ; </a> 
<a> } </a> 
<a> } ; </a> 
<a> @ Override </a> 
<a> public void onCreate ( Bundle savedInstanceState ) { </a> 
<a> super . onCreate ( savedInstanceState ) ; </a> 
<a> <RARE_TOKEN> = new <RARE_TOKEN> ( getActivity ( ) , callback ) ; </a> 
<a> <RARE_TOKEN> . onCreate ( savedInstanceState ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> super . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public View <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> , ViewGroup container , Bundle savedInstanceState ) { </a> 
<a> super . <RARE_TOKEN> ( <RARE_TOKEN> , container , savedInstanceState ) ; </a> 
<a> View view = <RARE_TOKEN> . <RARE_TOKEN> ( R . layout . <RARE_TOKEN> , container , false ) ; </a> 
<a> <RARE_TOKEN> = ( ProfilePictureView ) view . findViewById ( R . id . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( true ) ; </a> 
<a> <RARE_TOKEN> = ( TextView ) view . findViewById ( R . id . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = ( Button ) view . findViewById ( R . id . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = ( <RARE_TOKEN> ) view . findViewById ( R . id . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . setOnClickListener ( new View . OnClickListener ( ) { </a> 
<a> @ Override </a> 
<a> public void onClick ( View view ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> init ( savedInstanceState ) ; </a> 
<a> return view ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void onActivityResult ( int requestCode , int resultCode , Intent data ) { </a> 
<a> super . onActivityResult ( requestCode , resultCode , data ) ; </a> 
<a> if ( requestCode == <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> . onActivityResult ( requestCode , resultCode , data ) ; </a> 
<a> } else if ( resultCode == Activity . <RARE_TOKEN> && requestCode >= 0 && requestCode < <RARE_TOKEN> . size ( ) ) { </a> 
<a> <RARE_TOKEN> . get ( requestCode ) . onActivityResult ( data ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void onSaveInstanceState ( Bundle bundle ) { </a> 
<a> super . onSaveInstanceState ( bundle ) ; </a> 
<a> for ( <RARE_TOKEN> <RARE_TOKEN> : <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> . onSaveInstanceState ( bundle ) ; </a> 
<a> } </a> 
<a> bundle . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . onSaveInstanceState ( bundle ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> super . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> super . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( ) { </a> 
<a> if ( <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( final Session session , SessionState state , Exception exception ) { </a> 
<a> if ( session != null && session . isOpened ( ) ) { </a> 
<a> if ( state . equals ( SessionState . <RARE_TOKEN> ) ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> ( session ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( final Session session ) { </a> 
<a> Request request = Request . <RARE_TOKEN> ( session , new Request . <RARE_TOKEN> ( ) { </a> 
<a> @ Override </a> 
<a> public void onCompleted ( GraphUser user , Response response ) { </a> 
<a> if ( session == Session . getActiveSession ( ) ) { </a> 
<a> if ( user != null ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( user . getId ( ) ) ; </a> 
<a> <RARE_TOKEN> . setText ( user . getName ( ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> if ( response . getError ( ) != null ) { </a> 
<a> <RARE_TOKEN> ( response . getError ( ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> request . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> private void init ( Bundle savedInstanceState ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( false ) ; </a> 
<a> <RARE_TOKEN> = new ArrayList < <RARE_TOKEN> > ( ) ; </a> 
<a> <RARE_TOKEN> . add ( new <RARE_TOKEN> ( 0 ) ) ; </a> 
<a> <RARE_TOKEN> . add ( new <RARE_TOKEN> ( 1 ) ) ; </a> 
<a> <RARE_TOKEN> . add ( new <RARE_TOKEN> ( 2 ) ) ; </a> 
<a> if ( savedInstanceState != null ) { </a> 
<a> for ( <RARE_TOKEN> <RARE_TOKEN> : <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( savedInstanceState ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> = savedInstanceState . <RARE_TOKEN> ( <RARE_TOKEN> , false ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( new <RARE_TOKEN> ( getActivity ( ) , R . id . <RARE_TOKEN> , <RARE_TOKEN> ) ) ; </a> 
<a> Session session = Session . getActiveSession ( ) ; </a> 
<a> if ( session != null && session . isOpened ( ) ) { </a> 
<a> <RARE_TOKEN> ( session ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> = false ; </a> 
<a> Session session = Session . getActiveSession ( ) ; </a> 
<a> if ( session == null || ! session . isOpened ( ) ) { </a> 
<a> return ; </a> 
<a> } </a> 
<a> List < String > permissions = session . getPermissions ( ) ; </a> 
<a> if ( ! permissions . <RARE_TOKEN> ( <RARE_TOKEN> ) ) { </a> 
<a> <RARE_TOKEN> = true ; </a> 
<a> <RARE_TOKEN> ( session ) ; </a> 
<a> return ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . show ( getActivity ( ) , "" , </a> 
<a> getActivity ( ) . getResources ( ) . getString ( R . string . <RARE_TOKEN> ) , true ) ; </a> 
<a> <RARE_TOKEN> < Void , Void , Response > task = new <RARE_TOKEN> < Void , Void , Response > ( ) { </a> 
<a> @ Override </a> 
<a> protected Response <RARE_TOKEN> ( Void ... <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = GraphObject . Factory . create ( <RARE_TOKEN> . class ) ; </a> 
<a> for ( <RARE_TOKEN> <RARE_TOKEN> : <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> Request request = new Request ( Session . getActiveSession ( ) , </a> 
<a> <RARE_TOKEN> , null , HttpMethod . POST ) ; </a> 
<a> request . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> return request . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( Response response ) { </a> 
<a> <RARE_TOKEN> ( response ) ; </a> 
<a> } </a> 
<a> } ; </a> 
<a> task . execute ( ) ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( Session session ) { </a> 
<a> if ( session != null ) { </a> 
<a> Session . <RARE_TOKEN> <RARE_TOKEN> = new Session . <RARE_TOKEN> ( this , <RARE_TOKEN> ) </a> 
<a> . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ) </a> 
<a> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> session . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( Response response ) { </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> . dismiss ( ) ; </a> 
<a> <RARE_TOKEN> = null ; </a> 
<a> } </a> 
<a> if ( getActivity ( ) == null ) { </a> 
<a> return ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = response . <RARE_TOKEN> ( <RARE_TOKEN> . class ) ; </a> 
<a> if ( <RARE_TOKEN> != null && <RARE_TOKEN> . getId ( ) != null ) { </a> 
<a> String <RARE_TOKEN> = String . format ( getString ( R . string . <RARE_TOKEN> ) , <RARE_TOKEN> . getId ( ) ) ; </a> 
<a> new <RARE_TOKEN> . Builder ( getActivity ( ) ) </a> 
<a> . <RARE_TOKEN> ( R . string . <RARE_TOKEN> , null ) </a> 
<a> . <RARE_TOKEN> ( R . string . <RARE_TOKEN> ) </a> 
<a> . <RARE_TOKEN> ( <RARE_TOKEN> ) </a> 
<a> . show ( ) ; </a> 
<a> init ( null ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> ( response . getError ( ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( FacebookRequestError error ) { </a> 
<a> DialogInterface . OnClickListener listener = null ; </a> 
<a> String <RARE_TOKEN> = null ; </a> 
<a> if ( error == null ) { </a> 
<a> <RARE_TOKEN> = getString ( R . string . <RARE_TOKEN> ) ; </a> 
<a> } else { </a> 
<a> switch ( error . <RARE_TOKEN> ( ) ) { </a> 
<a> case <RARE_TOKEN> : </a> 
<a> String <RARE_TOKEN> = ( error . <RARE_TOKEN> ( ) ) ? "" : </a> 
<a> getString ( error . <RARE_TOKEN> ( ) ) ; </a> 
<a> <RARE_TOKEN> = getString ( R . string . <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> listener = new DialogInterface . OnClickListener ( ) { </a> 
<a> @ Override </a> 
<a> public void onClick ( DialogInterface <RARE_TOKEN> , int i ) { </a> 
<a> Intent intent = new Intent ( Intent . <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( intent ) ; </a> 
<a> } </a> 
<a> } ; </a> 
<a> break ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> <RARE_TOKEN> = getString ( R . string . <RARE_TOKEN> ) ; </a> 
<a> listener = new DialogInterface . OnClickListener ( ) { </a> 
<a> @ Override </a> 
<a> public void onClick ( DialogInterface <RARE_TOKEN> , int i ) { </a> 
<a> Session session = Session . getActiveSession ( ) ; </a> 
<a> if ( session != null && ! session . <RARE_TOKEN> ( ) ) { </a> 
<a> session . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } ; </a> 
<a> break ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> <RARE_TOKEN> = getString ( R . string . <RARE_TOKEN> ) ; </a> 
<a> listener = new DialogInterface . OnClickListener ( ) { </a> 
<a> @ Override </a> 
<a> public void onClick ( DialogInterface <RARE_TOKEN> , int i ) { </a> 
<a> <RARE_TOKEN> = true ; </a> 
<a> <RARE_TOKEN> ( Session . getActiveSession ( ) ) ; </a> 
<a> } </a> 
<a> } ; </a> 
<a> break ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> case <RARE_TOKEN> : </a> 
<a> <RARE_TOKEN> = getString ( R . string . <RARE_TOKEN> ) ; </a> 
<a> break ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> <RARE_TOKEN> = getString ( R . string . <RARE_TOKEN> , error . <RARE_TOKEN> ( ) ) ; </a> 
<a> break ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> case <RARE_TOKEN> : </a> 
<a> default : </a> 
<a> <RARE_TOKEN> = getString ( R . string . <RARE_TOKEN> , error . <RARE_TOKEN> ( ) ) ; </a> 
<a> break ; </a> 
<a> } </a> 
<a> } </a> 
<a> new <RARE_TOKEN> . Builder ( getActivity ( ) ) </a> 
<a> . <RARE_TOKEN> ( R . string . <RARE_TOKEN> , listener ) </a> 
<a> . <RARE_TOKEN> ( R . string . <RARE_TOKEN> ) </a> 
<a> . <RARE_TOKEN> ( <RARE_TOKEN> ) </a> 
<a> . show ( ) ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( <RARE_TOKEN> data , int requestCode ) { </a> 
<a> Intent intent = new Intent ( ) ; </a> 
<a> intent . <RARE_TOKEN> ( data ) ; </a> 
<a> intent . <RARE_TOKEN> ( getActivity ( ) , <RARE_TOKEN> . class ) ; </a> 
<a> <RARE_TOKEN> ( intent , requestCode ) ; </a> 
<a> } </a> 
<a> private interface <RARE_TOKEN> extends GraphObject { </a> 
<a> public String <RARE_TOKEN> ( ) ; </a> 
<a> public void <RARE_TOKEN> ( String url ) ; </a> 
<a> public String getId ( ) ; </a> 
<a> public void <RARE_TOKEN> ( String id ) ; </a> 
<a> } </a> 
<a> private interface <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> public <RARE_TOKEN> <RARE_TOKEN> ( ) ; </a> 
<a> public void <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> private interface <RARE_TOKEN> extends GraphObject { </a> 
<a> String getId ( ) ; </a> 
<a> } </a> 
<a> private class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private final String [ ] <RARE_TOKEN> ; </a> 
<a> private final String [ ] <RARE_TOKEN> ; </a> 
<a> private String <RARE_TOKEN> = null ; </a> 
<a> private String <RARE_TOKEN> = null ; </a> 
<a> public <RARE_TOKEN> ( int requestCode ) { </a> 
<a> super ( getActivity ( ) . getResources ( ) . <RARE_TOKEN> ( R . <RARE_TOKEN> . <RARE_TOKEN> ) , </a> 
<a> getActivity ( ) . getResources ( ) . getString ( R . string . <RARE_TOKEN> ) , </a> 
<a> getActivity ( ) . getResources ( ) . getString ( R . string . <RARE_TOKEN> ) , </a> 
<a> requestCode ) ; </a> 
<a> <RARE_TOKEN> = getActivity ( ) . getResources ( ) . <RARE_TOKEN> ( R . array . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = getActivity ( ) . getResources ( ) . <RARE_TOKEN> ( R . array . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected View . OnClickListener <RARE_TOKEN> ( ) { </a> 
<a> return new View . OnClickListener ( ) { </a> 
<a> @ Override </a> 
<a> public void onClick ( View view ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( <RARE_TOKEN> action ) { </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = action . cast ( <RARE_TOKEN> . class ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = GraphObject . Factory . create ( <RARE_TOKEN> . class ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void onSaveInstanceState ( Bundle bundle ) { </a> 
<a> if ( <RARE_TOKEN> != null && <RARE_TOKEN> != null ) { </a> 
<a> bundle . putString ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> bundle . putString ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected boolean <RARE_TOKEN> ( Bundle <RARE_TOKEN> ) { </a> 
<a> String <RARE_TOKEN> = <RARE_TOKEN> . getString ( <RARE_TOKEN> ) ; </a> 
<a> String <RARE_TOKEN> = <RARE_TOKEN> . getString ( <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> != null && <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> return true ; </a> 
<a> } </a> 
<a> return false ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( ) { </a> 
<a> String <RARE_TOKEN> = getActivity ( ) . getResources ( ) . getString ( R . string . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . Builder builder = new <RARE_TOKEN> . Builder ( getActivity ( ) ) ; </a> 
<a> builder . <RARE_TOKEN> ( <RARE_TOKEN> ) . </a> 
<a> <RARE_TOKEN> ( true ) . </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> , new DialogInterface . OnClickListener ( ) { </a> 
<a> @ Override </a> 
<a> public void onClick ( DialogInterface <RARE_TOKEN> , int i ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> [ i ] ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> [ i ] ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> builder . show ( ) ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( ) { </a> 
<a> if ( <RARE_TOKEN> != null && <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( true ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> ( getActivity ( ) . getResources ( ) . getString ( R . string . <RARE_TOKEN> ) ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( false ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> private class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private List < GraphUser > <RARE_TOKEN> ; </a> 
<a> public <RARE_TOKEN> ( int requestCode ) { </a> 
<a> super ( getActivity ( ) . getResources ( ) . <RARE_TOKEN> ( R . <RARE_TOKEN> . <RARE_TOKEN> ) , </a> 
<a> getActivity ( ) . getResources ( ) . getString ( R . string . <RARE_TOKEN> ) , </a> 
<a> getActivity ( ) . getResources ( ) . getString ( R . string . <RARE_TOKEN> ) , </a> 
<a> requestCode ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected View . OnClickListener <RARE_TOKEN> ( ) { </a> 
<a> return new View . OnClickListener ( ) { </a> 
<a> @ Override </a> 
<a> public void onClick ( View view ) { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> , <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> } ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void onActivityResult ( Intent data ) { </a> 
<a> <RARE_TOKEN> = ( ( <RARE_TOKEN> ) getActivity ( ) . <RARE_TOKEN> ( ) ) . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( <RARE_TOKEN> action ) { </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> action . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void onSaveInstanceState ( Bundle bundle ) { </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> bundle . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ( <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected boolean <RARE_TOKEN> ( Bundle <RARE_TOKEN> ) { </a> 
<a> byte [ ] bytes = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> if ( bytes != null ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ( bytes ) ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> return true ; </a> 
<a> } </a> 
<a> return false ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( ) { </a> 
<a> String text = null ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> if ( <RARE_TOKEN> . size ( ) == 1 ) { </a> 
<a> text = String . format ( getResources ( ) . getString ( R . string . <RARE_TOKEN> ) , </a> 
<a> <RARE_TOKEN> . get ( 0 ) . getName ( ) ) ; </a> 
<a> } else if ( <RARE_TOKEN> . size ( ) == 2 ) { </a> 
<a> text = String . format ( getResources ( ) . getString ( R . string . <RARE_TOKEN> ) , </a> 
<a> <RARE_TOKEN> . get ( 0 ) . getName ( ) , <RARE_TOKEN> . get ( 1 ) . getName ( ) ) ; </a> 
<a> } else if ( <RARE_TOKEN> . size ( ) > 2 ) { </a> 
<a> text = String . format ( getResources ( ) . getString ( R . string . <RARE_TOKEN> ) , </a> 
<a> <RARE_TOKEN> . get ( 0 ) . getName ( ) , ( <RARE_TOKEN> . size ( ) - 1 ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> if ( text == null ) { </a> 
<a> text = getResources ( ) . getString ( R . string . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( text ) ; </a> 
<a> } </a> 
<a> private byte [ ] <RARE_TOKEN> ( List < GraphUser > <RARE_TOKEN> ) { </a> 
<a> List < String > <RARE_TOKEN> = new ArrayList < String > ( <RARE_TOKEN> . size ( ) ) ; </a> 
<a> for ( GraphUser user : <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> . add ( user . <RARE_TOKEN> ( ) . toString ( ) ) ; </a> 
<a> } </a> 
<a> try { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( ) ; </a> 
<a> new <RARE_TOKEN> ( <RARE_TOKEN> ) . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> return <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> } catch ( IOException e ) { </a> 
<a> Log . e ( TAG , <RARE_TOKEN> to <RARE_TOKEN> <RARE_TOKEN> , e ) ; </a> 
<a> } </a> 
<a> return null ; </a> 
<a> } </a> 
<a> private List < GraphUser > <RARE_TOKEN> ( byte [ ] bytes ) { </a> 
<a> try { </a> 
<a> @ SuppressWarnings ( "unchecked" ) </a> 
<a> List < String > <RARE_TOKEN> = </a> 
<a> ( List < String > ) ( new <RARE_TOKEN> ( new <RARE_TOKEN> ( bytes ) ) ) . <RARE_TOKEN> ( ) ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> List < GraphUser > <RARE_TOKEN> = new ArrayList < GraphUser > ( <RARE_TOKEN> . size ( ) ) ; </a> 
<a> for ( String user : <RARE_TOKEN> ) { </a> 
<a> GraphUser <RARE_TOKEN> = GraphObject . Factory </a> 
<a> . create ( new JSONObject ( user ) , GraphUser . class ) ; </a> 
<a> <RARE_TOKEN> . add ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } catch ( <RARE_TOKEN> e ) { </a> 
<a> Log . e ( TAG , <RARE_TOKEN> to <RARE_TOKEN> <RARE_TOKEN> , e ) ; </a> 
<a> } catch ( IOException e ) { </a> 
<a> Log . e ( TAG , <RARE_TOKEN> to <RARE_TOKEN> <RARE_TOKEN> , e ) ; </a> 
<a> } catch ( JSONException e ) { </a> 
<a> Log . e ( TAG , <RARE_TOKEN> to <RARE_TOKEN> <RARE_TOKEN> , e ) ; </a> 
<a> } </a> 
<a> return null ; </a> 
<a> } </a> 
<a> } </a> 
<a> private class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private GraphPlace <RARE_TOKEN> = null ; </a> 
<a> public <RARE_TOKEN> ( int requestCode ) { </a> 
<a> super ( getActivity ( ) . getResources ( ) . <RARE_TOKEN> ( R . <RARE_TOKEN> . <RARE_TOKEN> ) , </a> 
<a> getActivity ( ) . getResources ( ) . getString ( R . string . <RARE_TOKEN> ) , </a> 
<a> getActivity ( ) . getResources ( ) . getString ( R . string . <RARE_TOKEN> ) , </a> 
<a> requestCode ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected View . OnClickListener <RARE_TOKEN> ( ) { </a> 
<a> return new View . OnClickListener ( ) { </a> 
<a> @ Override </a> 
<a> public void onClick ( View view ) { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> , <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> } ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void onActivityResult ( Intent data ) { </a> 
<a> <RARE_TOKEN> = ( ( <RARE_TOKEN> ) getActivity ( ) . <RARE_TOKEN> ( ) ) . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( <RARE_TOKEN> action ) { </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> action . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void onSaveInstanceState ( Bundle bundle ) { </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> bundle . putString ( <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> ( ) . toString ( ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected boolean <RARE_TOKEN> ( Bundle <RARE_TOKEN> ) { </a> 
<a> String <RARE_TOKEN> = <RARE_TOKEN> . getString ( <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> try { </a> 
<a> <RARE_TOKEN> = GraphObject . Factory </a> 
<a> . create ( new JSONObject ( <RARE_TOKEN> ) , GraphPlace . class ) ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> return true ; </a> 
<a> } catch ( JSONException e ) { </a> 
<a> Log . e ( TAG , <RARE_TOKEN> to <RARE_TOKEN> <RARE_TOKEN> , e ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> return false ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( ) { </a> 
<a> String text = null ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> text = <RARE_TOKEN> . getName ( ) ; </a> 
<a> } </a> 
<a> if ( text == null ) { </a> 
<a> text = getResources ( ) . getString ( R . string . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( text ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private class <RARE_TOKEN> extends <RARE_TOKEN> < <RARE_TOKEN> > { </a> 
<a> private List < <RARE_TOKEN> > <RARE_TOKEN> ; </a> 
<a> public <RARE_TOKEN> ( Context context , int <RARE_TOKEN> , List < <RARE_TOKEN> > <RARE_TOKEN> ) { </a> 
<a> super ( context , <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> for ( int i = 0 ; i < <RARE_TOKEN> . size ( ) ; i ++ ) { </a> 
<a> <RARE_TOKEN> . get ( i ) . <RARE_TOKEN> ( this ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public View <RARE_TOKEN> ( int position , View <RARE_TOKEN> , ViewGroup parent ) { </a> 
<a> View view = <RARE_TOKEN> ; </a> 
<a> if ( view == null ) { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = </a> 
<a> ( <RARE_TOKEN> ) getActivity ( ) . <RARE_TOKEN> ( Context . <RARE_TOKEN> ) ; </a> 
<a> view = <RARE_TOKEN> . <RARE_TOKEN> ( R . layout . <RARE_TOKEN> , null ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = <RARE_TOKEN> . get ( position ) ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> view . setOnClickListener ( <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = ( <RARE_TOKEN> ) view . findViewById ( R . id . <RARE_TOKEN> ) ; </a> 
<a> TextView <RARE_TOKEN> = ( TextView ) view . findViewById ( R . id . <RARE_TOKEN> ) ; </a> 
<a> TextView <RARE_TOKEN> = ( TextView ) view . findViewById ( R . id . <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> . setText ( <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> . setText ( <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> return view ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package com . facebook . <RARE_TOKEN> ; </a> 
<a> import android . os . Bundle ; </a> 
<a> import android . support . v4 . app . <RARE_TOKEN> ; </a> 
<a> import android . view . <RARE_TOKEN> ; </a> 
<a> import android . view . View ; </a> 
<a> import android . view . ViewGroup ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> @ Override </a> 
<a> public View <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> , ViewGroup container , Bundle savedInstanceState ) { </a> 
<a> View view = <RARE_TOKEN> . <RARE_TOKEN> ( R . layout . <RARE_TOKEN> , container , false ) ; </a> 
<a> return view ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package com . facebook . samples . <RARE_TOKEN> ; </a> 
<a> import android . app . Activity ; </a> 
<a> import android . content . Intent ; </a> 
<a> import android . os . Bundle ; </a> 
<a> import android . view . View ; </a> 
<a> import android . view . View . OnClickListener ; </a> 
<a> import android . widget . Button ; </a> 
<a> import android . widget . TextView ; </a> 
<a> import com . facebook . LoggingBehavior ; </a> 
<a> import com . facebook . Session ; </a> 
<a> import com . facebook . SessionState ; </a> 
<a> import com . facebook . <RARE_TOKEN> ; </a> 
<a> public class <RARE_TOKEN> extends Activity { </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private TextView <RARE_TOKEN> ; </a> 
<a> private Button <RARE_TOKEN> ; </a> 
<a> private Session . StatusCallback <RARE_TOKEN> = new <RARE_TOKEN> ( ) ; </a> 
<a> @ Override </a> 
<a> public void onCreate ( Bundle savedInstanceState ) { </a> 
<a> super . onCreate ( savedInstanceState ) ; </a> 
<a> <RARE_TOKEN> ( R . layout . activity ) ; </a> 
<a> <RARE_TOKEN> = ( Button ) findViewById ( R . id . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = ( TextView ) findViewById ( R . id . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( LoggingBehavior . <RARE_TOKEN> ) ; </a> 
<a> Session session = Session . getActiveSession ( ) ; </a> 
<a> if ( session == null ) { </a> 
<a> if ( savedInstanceState != null ) { </a> 
<a> session = Session . <RARE_TOKEN> ( this , null , <RARE_TOKEN> , savedInstanceState ) ; </a> 
<a> } </a> 
<a> if ( session == null ) { </a> 
<a> session = new Session ( this ) ; </a> 
<a> } </a> 
<a> Session . <RARE_TOKEN> ( session ) ; </a> 
<a> if ( session . <RARE_TOKEN> ( ) . equals ( SessionState . <RARE_TOKEN> ) ) { </a> 
<a> session . <RARE_TOKEN> ( new Session . OpenRequest ( this ) . setCallback ( <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> super . <RARE_TOKEN> ( ) ; </a> 
<a> Session . getActiveSession ( ) . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> super . <RARE_TOKEN> ( ) ; </a> 
<a> Session . getActiveSession ( ) . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void onActivityResult ( int requestCode , int resultCode , Intent data ) { </a> 
<a> super . onActivityResult ( requestCode , resultCode , data ) ; </a> 
<a> Session . getActiveSession ( ) . onActivityResult ( this , requestCode , resultCode , data ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void onSaveInstanceState ( Bundle outState ) { </a> 
<a> super . onSaveInstanceState ( outState ) ; </a> 
<a> Session session = Session . getActiveSession ( ) ; </a> 
<a> Session . <RARE_TOKEN> ( session , outState ) ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( ) { </a> 
<a> Session session = Session . getActiveSession ( ) ; </a> 
<a> if ( session . isOpened ( ) ) { </a> 
<a> <RARE_TOKEN> . setText ( <RARE_TOKEN> + session . <RARE_TOKEN> ( ) ) ; </a> 
<a> <RARE_TOKEN> . setText ( R . string . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . setOnClickListener ( new OnClickListener ( ) { </a> 
<a> public void onClick ( View view ) { <RARE_TOKEN> ( ) ; } </a> 
<a> } ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> . setText ( R . string . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . setText ( R . string . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . setOnClickListener ( new OnClickListener ( ) { </a> 
<a> public void onClick ( View view ) { <RARE_TOKEN> ( ) ; } </a> 
<a> } ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( ) { </a> 
<a> Session session = Session . getActiveSession ( ) ; </a> 
<a> if ( ! session . isOpened ( ) && ! session . <RARE_TOKEN> ( ) ) { </a> 
<a> session . <RARE_TOKEN> ( new Session . OpenRequest ( this ) . setCallback ( <RARE_TOKEN> ) ) ; </a> 
<a> } else { </a> 
<a> Session . <RARE_TOKEN> ( this , true , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( ) { </a> 
<a> Session session = Session . getActiveSession ( ) ; </a> 
<a> if ( ! session . <RARE_TOKEN> ( ) ) { </a> 
<a> session . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private class <RARE_TOKEN> implements Session . StatusCallback { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( Session session , SessionState state , Exception exception ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package com . facebook . samples . <RARE_TOKEN> ; </a> 
<a> import android . os . Bundle ; </a> 
<a> import android . support . v4 . app . <RARE_TOKEN> ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> public void onCreate ( Bundle savedInstanceState ) { </a> 
<a> super . onCreate ( savedInstanceState ) ; </a> 
<a> <RARE_TOKEN> ( R . layout . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package com . facebook . samples . <RARE_TOKEN> ; </a> 
<a> import android . content . Intent ; </a> 
<a> import android . os . Bundle ; </a> 
<a> import android . support . v4 . app . <RARE_TOKEN> ; </a> 
<a> import android . support . v4 . app . <RARE_TOKEN> ; </a> 
<a> import android . util . Log ; </a> 
<a> import com . facebook . Session ; </a> 
<a> import com . facebook . SessionState ; </a> 
<a> import com . facebook . widget . <RARE_TOKEN> ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> public void onCreate ( Bundle savedInstanceState ) { </a> 
<a> super . onCreate ( savedInstanceState ) ; </a> 
<a> <RARE_TOKEN> ( R . layout . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> = ( <RARE_TOKEN> ) <RARE_TOKEN> . <RARE_TOKEN> ( R . id . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( new Session . StatusCallback ( ) { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( Session session , SessionState state , Exception exception ) { </a> 
<a> Log . d ( <RARE_TOKEN> , String . format ( <RARE_TOKEN> session <RARE_TOKEN> <RARE_TOKEN> , state . toString ( ) ) ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void onActivityResult ( int requestCode , int resultCode , Intent data ) { </a> 
<a> <RARE_TOKEN> . onActivityResult ( requestCode , resultCode , data ) ; </a> 
<a> super . onActivityResult ( requestCode , resultCode , data ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package com . facebook . samples . <RARE_TOKEN> ; </a> 
<a> import android . content . Intent ; </a> 
<a> import android . os . Bundle ; </a> 
<a> import android . support . v4 . app . <RARE_TOKEN> ; </a> 
<a> import android . view . <RARE_TOKEN> ; </a> 
<a> import android . view . View ; </a> 
<a> import android . view . ViewGroup ; </a> 
<a> import android . widget . Button ; </a> 
<a> import android . widget . TextView ; </a> 
<a> import com . facebook . LoggingBehavior ; </a> 
<a> import com . facebook . Session ; </a> 
<a> import com . facebook . SessionState ; </a> 
<a> import com . facebook . <RARE_TOKEN> ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private TextView <RARE_TOKEN> ; </a> 
<a> private Button <RARE_TOKEN> ; </a> 
<a> private Session . StatusCallback <RARE_TOKEN> = new <RARE_TOKEN> ( ) ; </a> 
<a> @ Override </a> 
<a> public View <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> , ViewGroup container , Bundle savedInstanceState ) { </a> 
<a> View view = <RARE_TOKEN> . <RARE_TOKEN> ( R . layout . fragment , container , false ) ; </a> 
<a> <RARE_TOKEN> = ( Button ) view . findViewById ( R . id . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = ( TextView ) view . findViewById ( R . id . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( LoggingBehavior . <RARE_TOKEN> ) ; </a> 
<a> Session session = Session . getActiveSession ( ) ; </a> 
<a> if ( session == null ) { </a> 
<a> if ( savedInstanceState != null ) { </a> 
<a> session = Session . <RARE_TOKEN> ( getActivity ( ) , null , <RARE_TOKEN> , savedInstanceState ) ; </a> 
<a> } </a> 
<a> if ( session == null ) { </a> 
<a> session = new Session ( getActivity ( ) ) ; </a> 
<a> } </a> 
<a> Session . <RARE_TOKEN> ( session ) ; </a> 
<a> if ( session . <RARE_TOKEN> ( ) . equals ( SessionState . <RARE_TOKEN> ) ) { </a> 
<a> session . <RARE_TOKEN> ( new Session . OpenRequest ( this ) . setCallback ( <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> return view ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> super . <RARE_TOKEN> ( ) ; </a> 
<a> Session . getActiveSession ( ) . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> super . <RARE_TOKEN> ( ) ; </a> 
<a> Session . getActiveSession ( ) . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void onActivityResult ( int requestCode , int resultCode , Intent data ) { </a> 
<a> super . onActivityResult ( requestCode , resultCode , data ) ; </a> 
<a> Session . getActiveSession ( ) . onActivityResult ( getActivity ( ) , requestCode , resultCode , data ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void onSaveInstanceState ( Bundle outState ) { </a> 
<a> super . onSaveInstanceState ( outState ) ; </a> 
<a> Session session = Session . getActiveSession ( ) ; </a> 
<a> Session . <RARE_TOKEN> ( session , outState ) ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( ) { </a> 
<a> Session session = Session . getActiveSession ( ) ; </a> 
<a> if ( session . isOpened ( ) ) { </a> 
<a> <RARE_TOKEN> . setText ( <RARE_TOKEN> + session . <RARE_TOKEN> ( ) ) ; </a> 
<a> <RARE_TOKEN> . setText ( R . string . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . setOnClickListener ( new View . OnClickListener ( ) { </a> 
<a> public void onClick ( View view ) { <RARE_TOKEN> ( ) ; } </a> 
<a> } ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> . setText ( R . string . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . setText ( R . string . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . setOnClickListener ( new View . OnClickListener ( ) { </a> 
<a> public void onClick ( View view ) { <RARE_TOKEN> ( ) ; } </a> 
<a> } ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( ) { </a> 
<a> Session session = Session . getActiveSession ( ) ; </a> 
<a> if ( ! session . isOpened ( ) && ! session . <RARE_TOKEN> ( ) ) { </a> 
<a> session . <RARE_TOKEN> ( new Session . OpenRequest ( this ) . setCallback ( <RARE_TOKEN> ) ) ; </a> 
<a> } else { </a> 
<a> Session . <RARE_TOKEN> ( getActivity ( ) , this , true , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( ) { </a> 
<a> Session session = Session . getActiveSession ( ) ; </a> 
<a> if ( ! session . <RARE_TOKEN> ( ) ) { </a> 
<a> session . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private class <RARE_TOKEN> implements Session . StatusCallback { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( Session session , SessionState state , Exception exception ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package com . facebook . samples . <RARE_TOKEN> ; </a> 
<a> import android . app . Activity ; </a> 
<a> import android . content . Intent ; </a> 
<a> import android . os . Bundle ; </a> 
<a> import android . view . View ; </a> 
<a> import android . widget . Button ; </a> 
<a> public class <RARE_TOKEN> extends Activity { </a> 
<a> private Button <RARE_TOKEN> ; </a> 
<a> private Button <RARE_TOKEN> ; </a> 
<a> private Button <RARE_TOKEN> ; </a> 
<a> public void onCreate ( Bundle savedInstanceState ) { </a> 
<a> super . onCreate ( savedInstanceState ) ; </a> 
<a> <RARE_TOKEN> ( R . layout . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = ( Button ) findViewById ( R . id . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . setOnClickListener ( new View . OnClickListener ( ) { </a> 
<a> @ Override </a> 
<a> public void onClick ( View v ) { </a> 
<a> Intent intent = new Intent ( <RARE_TOKEN> . this , <RARE_TOKEN> . class ) ; </a> 
<a> <RARE_TOKEN> ( intent ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> <RARE_TOKEN> = ( Button ) findViewById ( R . id . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . setOnClickListener ( new View . OnClickListener ( ) { </a> 
<a> @ Override </a> 
<a> public void onClick ( View v ) { </a> 
<a> Intent intent = new Intent ( <RARE_TOKEN> . this , <RARE_TOKEN> . class ) ; </a> 
<a> <RARE_TOKEN> ( intent ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> <RARE_TOKEN> = ( Button ) findViewById ( R . id . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . setOnClickListener ( new View . OnClickListener ( ) { </a> 
<a> @ Override </a> 
<a> public void onClick ( View v ) { </a> 
<a> Intent intent = new Intent ( <RARE_TOKEN> . this , <RARE_TOKEN> . class ) ; </a> 
<a> <RARE_TOKEN> ( intent ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package com . facebook . samples . <RARE_TOKEN> ; </a> 
<a> import android . content . Intent ; </a> 
<a> import android . os . Bundle ; </a> 
<a> import android . support . v4 . app . <RARE_TOKEN> ; </a> 
<a> import android . support . v4 . app . <RARE_TOKEN> ; </a> 
<a> import android . support . v4 . app . <RARE_TOKEN> ; </a> 
<a> import android . view . <RARE_TOKEN> ; </a> 
<a> import com . facebook . * ; </a> 
<a> import com . facebook . model . GraphUser ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> private boolean <RARE_TOKEN> ; </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> private Session currentSession ; </a> 
<a> private Session . StatusCallback <RARE_TOKEN> ; </a> 
<a> @ Override </a> 
<a> public void onCreate ( Bundle savedInstanceState ) { </a> 
<a> super . onCreate ( savedInstanceState ) ; </a> 
<a> <RARE_TOKEN> ( R . layout . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( savedInstanceState ) ; </a> 
<a> <RARE_TOKEN> = new Session . StatusCallback ( ) { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( Session session , SessionState state , Exception exception ) { </a> 
<a> <RARE_TOKEN> ( session , state , exception ) ; </a> 
<a> } </a> 
<a> } ; </a> 
<a> if ( savedInstanceState != null ) { </a> 
<a> if ( savedInstanceState . <RARE_TOKEN> ( <RARE_TOKEN> ) ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( </a> 
<a> this , </a> 
<a> savedInstanceState . getString ( <RARE_TOKEN> ) ) ; </a> 
<a> currentSession = Session . <RARE_TOKEN> ( </a> 
<a> this , </a> 
<a> <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , </a> 
<a> savedInstanceState ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> if ( <RARE_TOKEN> ( ) ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } else { </a> 
<a> super . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void onSaveInstanceState ( Bundle outState ) { </a> 
<a> super . onSaveInstanceState ( outState ) ; </a> 
<a> outState . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ( ) ) ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> outState . putString ( <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> manager = <RARE_TOKEN> ( ) ; </a> 
<a> manager . <RARE_TOKEN> ( outState , <RARE_TOKEN> . TAG , <RARE_TOKEN> ) ; </a> 
<a> manager . <RARE_TOKEN> ( outState , <RARE_TOKEN> . TAG , <RARE_TOKEN> ) ; </a> 
<a> Session . <RARE_TOKEN> ( currentSession , outState ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( ) { </a> 
<a> super . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( new <RARE_TOKEN> . <RARE_TOKEN> ( ) { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( new <RARE_TOKEN> . <RARE_TOKEN> ( ) { </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> return <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> if ( currentSession != null ) { </a> 
<a> currentSession . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( ) { </a> 
<a> super . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( null ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( null ) ; </a> 
<a> if ( currentSession != null ) { </a> 
<a> currentSession . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void onActivityResult ( int requestCode , int resultCode , Intent data ) { </a> 
<a> super . onActivityResult ( requestCode , resultCode , data ) ; </a> 
<a> if ( currentSession != null ) { </a> 
<a> currentSession . onActivityResult ( this , requestCode , resultCode , data ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( Session session , SessionState state , Exception exception ) { </a> 
<a> if ( session != currentSession ) { </a> 
<a> return ; </a> 
<a> } </a> 
<a> if ( state . isOpened ( ) ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } else if ( state . <RARE_TOKEN> ( ) ) { </a> 
<a> <RARE_TOKEN> ( null ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( Bundle savedInstanceState ) { </a> 
<a> <RARE_TOKEN> manager = <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = manager . <RARE_TOKEN> ( ) ; </a> 
<a> if ( savedInstanceState != null ) { </a> 
<a> <RARE_TOKEN> = ( <RARE_TOKEN> ) manager . <RARE_TOKEN> ( savedInstanceState , <RARE_TOKEN> . TAG ) ; </a> 
<a> <RARE_TOKEN> = ( <RARE_TOKEN> ) manager . <RARE_TOKEN> ( savedInstanceState , <RARE_TOKEN> . TAG ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> <RARE_TOKEN> = new <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> . add ( R . id . <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> . TAG ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> <RARE_TOKEN> = new <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> . add ( R . id . <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> . TAG ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> = true ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = <RARE_TOKEN> ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) </a> 
<a> . show ( <RARE_TOKEN> ) </a> 
<a> . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> private boolean <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> = false ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = <RARE_TOKEN> ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) </a> 
<a> . show ( <RARE_TOKEN> ) </a> 
<a> . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( ) { </a> 
<a> if ( currentSession != null && currentSession . isOpened ( ) ) { </a> 
<a> Request request = Request . <RARE_TOKEN> ( currentSession , new Request . <RARE_TOKEN> ( ) { </a> 
<a> @ Override </a> 
<a> public void onCompleted ( GraphUser <RARE_TOKEN> , Response response ) { </a> 
<a> if ( response . getRequest ( ) . getSession ( ) == currentSession ) { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> request . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> if ( currentSession != null ) { </a> 
<a> currentSession . close ( ) ; </a> 
<a> currentSession = null ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> currentSession = new Session . Builder ( this ) </a> 
<a> . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ( ) ) </a> 
<a> . build ( ) ; </a> 
<a> currentSession . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> Session . OpenRequest openRequest = new Session . OpenRequest ( this ) ; </a> 
<a> openRequest . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> openRequest . <RARE_TOKEN> ( Session . <RARE_TOKEN> ) ; </a> 
<a> currentSession . <RARE_TOKEN> ( openRequest ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private boolean <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> switch ( <RARE_TOKEN> . <RARE_TOKEN> ( ) ) { </a> 
<a> case R . id . <RARE_TOKEN> : </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> return true ; </a> 
<a> default : </a> 
<a> return false ; </a> 
<a> } </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( GraphUser user ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( user ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( user ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package com . facebook . samples . <RARE_TOKEN> ; </a> 
<a> import android . os . Bundle ; </a> 
<a> import android . support . v4 . app . <RARE_TOKEN> ; </a> 
<a> import android . view . * ; </a> 
<a> import android . widget . TextView ; </a> 
<a> import com . facebook . model . GraphUser ; </a> 
<a> import com . facebook . widget . ProfilePictureView ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> public static final String TAG = <RARE_TOKEN> ; </a> 
<a> private TextView <RARE_TOKEN> ; </a> 
<a> private ProfilePictureView <RARE_TOKEN> ; </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> private GraphUser <RARE_TOKEN> ; </a> 
<a> @ Override </a> 
<a> public void onCreate ( Bundle savedInstanceState ) { </a> 
<a> super . onCreate ( savedInstanceState ) ; </a> 
<a> <RARE_TOKEN> ( true ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> , <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> super . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( R . <RARE_TOKEN> . <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> boolean <RARE_TOKEN> = false ; </a> 
<a> <RARE_TOKEN> listener = <RARE_TOKEN> ; </a> 
<a> if ( listener != null ) { </a> 
<a> <RARE_TOKEN> = listener . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( ! <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> = super . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public View <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> , ViewGroup parent , Bundle savedInstanceState ) { </a> 
<a> View v = <RARE_TOKEN> . <RARE_TOKEN> ( R . layout . <RARE_TOKEN> , parent , false ) ; </a> 
<a> <RARE_TOKEN> = ( TextView ) v . findViewById ( R . id . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = ( ProfilePictureView ) v . findViewById ( R . id . <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = null ; </a> 
<a> } </a> 
<a> return v ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( <RARE_TOKEN> listener ) { </a> 
<a> this . <RARE_TOKEN> = listener ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( GraphUser user ) { </a> 
<a> if ( <RARE_TOKEN> == null || <RARE_TOKEN> == null || ! <RARE_TOKEN> ( ) ) { </a> 
<a> <RARE_TOKEN> = user ; </a> 
<a> return ; </a> 
<a> } </a> 
<a> if ( user == null ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( null ) ; </a> 
<a> <RARE_TOKEN> . setText ( R . string . <RARE_TOKEN> ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( user . getId ( ) ) ; </a> 
<a> <RARE_TOKEN> . setText ( </a> 
<a> String . format ( getString ( R . string . <RARE_TOKEN> ) , user . <RARE_TOKEN> ( ) ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public interface <RARE_TOKEN> { </a> 
<a> boolean <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package com . facebook . samples . <RARE_TOKEN> ; </a> 
<a> import android . content . Context ; </a> 
<a> import android . content . <RARE_TOKEN> ; </a> 
<a> import android . os . Bundle ; </a> 
<a> import android . support . v4 . app . <RARE_TOKEN> ; </a> 
<a> import android . view . * ; </a> 
<a> import android . widget . * ; </a> 
<a> import com . facebook . model . GraphUser ; </a> 
<a> import com . facebook . widget . ProfilePictureView ; </a> 
<a> import com . facebook . SessionLoginBehavior ; </a> 
<a> import java . util . ArrayList ; </a> 
<a> import java . util . Arrays ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> public static final String TAG = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> private boolean <RARE_TOKEN> ; </a> 
<a> @ Override </a> 
<a> public void onCreate ( Bundle savedInstanceState ) { </a> 
<a> super . onCreate ( savedInstanceState ) ; </a> 
<a> <RARE_TOKEN> = new <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( </a> 
<a> getActivity ( ) , </a> 
<a> savedInstanceState != null ? </a> 
<a> savedInstanceState . getInt ( <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> ) : </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> ArrayList < <RARE_TOKEN> > <RARE_TOKEN> = new ArrayList < <RARE_TOKEN> > ( </a> 
<a> Arrays . asList ( <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ) ; </a> 
<a> <RARE_TOKEN> ( new <RARE_TOKEN> ( <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public View <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> , ViewGroup parent , Bundle savedInstanceState ) { </a> 
<a> View view = super . <RARE_TOKEN> ( <RARE_TOKEN> , parent , savedInstanceState ) ; </a> 
<a> <RARE_TOKEN> ( view . findViewById ( android . R . id . list ) ) ; </a> 
<a> return view ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> , View view , <RARE_TOKEN> . <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> super . <RARE_TOKEN> ( <RARE_TOKEN> , view , <RARE_TOKEN> ) ; </a> 
<a> getActivity ( ) . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( R . <RARE_TOKEN> . <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( <RARE_TOKEN> l , View view , int position , long id ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( position ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> info = ( <RARE_TOKEN> . <RARE_TOKEN> ) <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> adapter = ( <RARE_TOKEN> ) <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = adapter . <RARE_TOKEN> ( info . position ) ; </a> 
<a> switch ( <RARE_TOKEN> . <RARE_TOKEN> ( ) ) { </a> 
<a> case R . id . <RARE_TOKEN> : </a> 
<a> if ( <RARE_TOKEN> . <RARE_TOKEN> ( ) != null ) { </a> 
<a> <RARE_TOKEN> . clear ( ) ; </a> 
<a> if ( <RARE_TOKEN> == <RARE_TOKEN> . <RARE_TOKEN> ( ) ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( info . position ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> return true ; </a> 
<a> } </a> 
<a> return super . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void onSaveInstanceState ( Bundle outState ) { </a> 
<a> super . onSaveInstanceState ( outState ) ; </a> 
<a> outState . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( <RARE_TOKEN> listener ) { </a> 
<a> <RARE_TOKEN> = listener ; </a> 
<a> if ( listener != null && <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> = false ; </a> 
<a> } </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( GraphUser user ) { </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> return ; </a> 
<a> } </a> 
<a> if ( user != null ) { </a> 
<a> <RARE_TOKEN> s = <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> if ( s != null ) { </a> 
<a> s . <RARE_TOKEN> ( user ) ; </a> 
<a> } </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> listener = <RARE_TOKEN> ; </a> 
<a> if ( listener != null ) { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> listener . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> = true ; </a> 
<a> } </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> adapter = ( <RARE_TOKEN> ) <RARE_TOKEN> ( ) ; </a> 
<a> adapter . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> public interface <RARE_TOKEN> { </a> 
<a> void <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> private class <RARE_TOKEN> extends <RARE_TOKEN> < <RARE_TOKEN> > { </a> 
<a> public <RARE_TOKEN> ( ArrayList < <RARE_TOKEN> > <RARE_TOKEN> ) { </a> 
<a> super ( getActivity ( ) , android . R . layout . <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public View <RARE_TOKEN> ( int position , View <RARE_TOKEN> , ViewGroup parent ) { </a> 
<a> if ( null == <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> = getActivity ( ) . <RARE_TOKEN> ( ) </a> 
<a> . <RARE_TOKEN> ( R . layout . <RARE_TOKEN> , null ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = <RARE_TOKEN> ( position ) ; </a> 
<a> String <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> <RARE_TOKEN> = getString ( R . string . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> ProfilePictureView <RARE_TOKEN> = ( ProfilePictureView ) <RARE_TOKEN> . findViewById ( </a> 
<a> R . id . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( true ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> TextView <RARE_TOKEN> = ( TextView ) <RARE_TOKEN> . findViewById ( </a> 
<a> R . id . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . setText ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = ( <RARE_TOKEN> ) <RARE_TOKEN> . findViewById ( </a> 
<a> R . id . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ( ) == <RARE_TOKEN> ) ; </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<a> private class <RARE_TOKEN> { </a> 
<a> static final int <RARE_TOKEN> = - 1 ; </a> 
<a> private final static int <RARE_TOKEN> = 4 ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> private int <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private <RARE_TOKEN> [ ] <RARE_TOKEN> ; </a> 
<a> void <RARE_TOKEN> ( Context context , int <RARE_TOKEN> ) { </a> 
<a> if ( context == null ) { </a> 
<a> throw new IllegalArgumentException ( <RARE_TOKEN> <RARE_TOKEN> be <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> Context <RARE_TOKEN> = context . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> = ( <RARE_TOKEN> == null ) ? context : <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = new <RARE_TOKEN> [ <RARE_TOKEN> ] ; </a> 
<a> for ( int i = 0 ; i < <RARE_TOKEN> ; i ++ ) { </a> 
<a> SessionLoginBehavior loginBehavior = ( i == 0 ) ? </a> 
<a> SessionLoginBehavior . <RARE_TOKEN> : </a> 
<a> SessionLoginBehavior . <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> [ i ] = new <RARE_TOKEN> ( <RARE_TOKEN> , i , loginBehavior ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> , Context . <RARE_TOKEN> ) ; </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> . getInt ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> != <RARE_TOKEN> && <RARE_TOKEN> != <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> void <RARE_TOKEN> ( int <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> == <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> ( ) { </a> 
<a> if ( <RARE_TOKEN> == <RARE_TOKEN> ) { </a> 
<a> return null ; </a> 
<a> } else { </a> 
<a> return <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> int <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> [ ] <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> ( int <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> return <RARE_TOKEN> [ <RARE_TOKEN> ] ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( int <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( int <RARE_TOKEN> ) { </a> 
<a> if ( <RARE_TOKEN> <= <RARE_TOKEN> || <RARE_TOKEN> >= <RARE_TOKEN> ) { </a> 
<a> throw new IllegalArgumentException ( </a> 
<a> String . format ( <RARE_TOKEN> a <RARE_TOKEN> <RARE_TOKEN> 0 <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> , <RARE_TOKEN> - 1 ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package com . facebook . android . <RARE_TOKEN> ; </a> 
<a> import java . io . <RARE_TOKEN> ; </a> 
<a> import java . io . IOException ; </a> 
<a> import java . net . <RARE_TOKEN> ; </a> 
<a> import org . json . JSONObject ; </a> 
<a> import com . facebook . android . <RARE_TOKEN> ; </a> 
<a> import com . facebook . android . <RARE_TOKEN> ; </a> 
<a> import com . facebook . android . <RARE_TOKEN> ; </a> 
<a> import com . facebook . android . FacebookError ; </a> 
<a> import com . facebook . android . Util ; </a> 
<a> import com . facebook . android . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import com . facebook . android . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import android . app . Activity ; </a> 
<a> import android . content . Intent ; </a> 
<a> import android . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import android . os . Bundle ; </a> 
<a> import android . util . Log ; </a> 
<a> import android . view . View ; </a> 
<a> import android . view . View . OnClickListener ; </a> 
<a> import android . widget . Button ; </a> 
<a> import android . widget . TextView ; </a> 
<a> public class <RARE_TOKEN> extends Activity { </a> 
<a> public static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final String [ ] <RARE_TOKEN> = </a> 
<a> new String [ ] { <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> } ; </a> 
<a> TextView <RARE_TOKEN> ; </a> 
<a> TextView <RARE_TOKEN> ; </a> 
<a> Button <RARE_TOKEN> ; </a> 
<a> TextView <RARE_TOKEN> ; </a> 
<a> TextView <RARE_TOKEN> ; </a> 
<a> Button <RARE_TOKEN> ; </a> 
<a> TextView <RARE_TOKEN> ; </a> 
<a> TextView <RARE_TOKEN> ; </a> 
<a> Button <RARE_TOKEN> ; </a> 
<a> TextView <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> @ Override </a> 
<a> public void onCreate ( Bundle savedInstanceState ) { </a> 
<a> super . onCreate ( savedInstanceState ) ; </a> 
<a> <RARE_TOKEN> ( R . layout . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = ( TextView ) findViewById ( R . id . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = ( TextView ) findViewById ( R . id . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = ( Button ) findViewById ( R . id . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = ( TextView ) findViewById ( </a> 
<a> R . id . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = ( TextView ) findViewById ( </a> 
<a> R . id . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = ( Button ) findViewById ( R . id . post ) ; </a> 
<a> <RARE_TOKEN> = ( TextView ) findViewById ( R . id . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = ( TextView ) findViewById ( R . id . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = ( Button ) findViewById ( R . id . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = ( TextView ) findViewById ( R . id . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . setOnClickListener ( new OnClickListener ( ) { </a> 
<a> public void onClick ( View v ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> . this , <RARE_TOKEN> , </a> 
<a> new <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> <RARE_TOKEN> . setOnClickListener ( new OnClickListener ( ) { </a> 
<a> public void onClick ( View v ) { </a> 
<a> <RARE_TOKEN> . dialog ( <RARE_TOKEN> . this , <RARE_TOKEN> , </a> 
<a> new <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> <RARE_TOKEN> . setOnClickListener ( new OnClickListener ( ) { </a> 
<a> public void onClick ( View v ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void onActivityResult ( int requestCode , int resultCode , Intent data ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( requestCode , resultCode , data ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> if ( <RARE_TOKEN> ( ) ) { </a> 
<a> <RARE_TOKEN> . setText ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> . setText ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> failed" ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> ( ) ) { </a> 
<a> <RARE_TOKEN> . setText ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> . setText ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> failed" ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> try { </a> 
<a> Log . d ( "Tests" , <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> JSONObject response = Util . <RARE_TOKEN> ( <RARE_TOKEN> . request ( <RARE_TOKEN> ) ) ; </a> 
<a> if ( ! response . getString ( "name" ) . equals ( <RARE_TOKEN> <RARE_TOKEN> ) ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> Log . d ( "Tests" , <RARE_TOKEN> an <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> a <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> response = Util . <RARE_TOKEN> ( </a> 
<a> <RARE_TOKEN> . request ( <RARE_TOKEN> , new Bundle ( ) , <RARE_TOKEN> ) ) ; </a> 
<a> if ( ! response . getString ( "name" ) . equals ( <RARE_TOKEN> <RARE_TOKEN> ) ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> Log . d ( "Tests" , <RARE_TOKEN> a public <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> Bundle params = new Bundle ( ) ; </a> 
<a> params . putString ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> response = Util . <RARE_TOKEN> ( <RARE_TOKEN> . request ( <RARE_TOKEN> , params ) ) ; </a> 
<a> if ( response . <RARE_TOKEN> ( <RARE_TOKEN> ) . length ( ) == 0 ) return false ; </a> 
<a> Log . d ( "Tests" , <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> return true ; </a> 
<a> } catch ( Throwable e ) { </a> 
<a> e . printStackTrace ( ) ; </a> 
<a> return false ; </a> 
<a> } </a> 
<a> } </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> try { </a> 
<a> Bundle params = new Bundle ( ) ; </a> 
<a> Log . d ( "Tests" , <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> params . putString ( "message" , <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> try { </a> 
<a> Util . <RARE_TOKEN> ( <RARE_TOKEN> . request ( <RARE_TOKEN> , params , <RARE_TOKEN> ) ) ; </a> 
<a> return false ; </a> 
<a> } catch ( FacebookError e ) { </a> 
<a> Log . d ( "Tests" , <RARE_TOKEN> + e . getMessage ( ) + <RARE_TOKEN> ) ; </a> 
<a> if ( ! e . getMessage ( ) . equals ( <RARE_TOKEN> post <RARE_TOKEN> ) ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> } </a> 
<a> Log . d ( "Tests" , <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> try { </a> 
<a> Util . <RARE_TOKEN> ( <RARE_TOKEN> . request ( <RARE_TOKEN> , new Bundle ( ) , <RARE_TOKEN> ) ) ; </a> 
<a> return false ; </a> 
<a> } catch ( FacebookError e ) { </a> 
<a> Log . d ( "Tests" , <RARE_TOKEN> + e . getMessage ( ) + <RARE_TOKEN> ) ; </a> 
<a> if ( ! e . getMessage ( ) . equals ( </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> token is <RARE_TOKEN> to request this " + </a> 
<a> <RARE_TOKEN> ) ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> } </a> 
<a> Log . d ( "Tests" , <RARE_TOKEN> <RARE_TOKEN> post to <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> try { </a> 
<a> Util . <RARE_TOKEN> ( <RARE_TOKEN> . request ( <RARE_TOKEN> , new Bundle ( ) , <RARE_TOKEN> ) ) ; </a> 
<a> return false ; </a> 
<a> } catch ( FacebookError e ) { </a> 
<a> Log . d ( "Tests" , <RARE_TOKEN> + e . getMessage ( ) + <RARE_TOKEN> ) ; </a> 
<a> if ( ! e . getMessage ( ) . equals ( <RARE_TOKEN> <RARE_TOKEN> user <RARE_TOKEN> " + </a> 
<a> <RARE_TOKEN> the <RARE_TOKEN> to <RARE_TOKEN> this <RARE_TOKEN> ) ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> } </a> 
<a> Log . d ( "Tests" , <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> try { </a> 
<a> Util . <RARE_TOKEN> ( <RARE_TOKEN> . request ( <RARE_TOKEN> ) ) ; </a> 
<a> return false ; </a> 
<a> } catch ( FacebookError e ) { </a> 
<a> Log . d ( "Tests" , <RARE_TOKEN> + e . getMessage ( ) + <RARE_TOKEN> ) ; </a> 
<a> if ( ! e . getMessage ( ) . startsWith ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> } </a> 
<a> Log . d ( "Tests" , <RARE_TOKEN> request for <RARE_TOKEN> is <RARE_TOKEN> <RARE_TOKEN> " + </a> 
<a> <RARE_TOKEN> ) ; </a> 
<a> try { </a> 
<a> Util . <RARE_TOKEN> ( <RARE_TOKEN> . request ( <RARE_TOKEN> ) ) ; </a> 
<a> return false ; </a> 
<a> } catch ( FacebookError e ) { </a> 
<a> Log . d ( "Tests" , <RARE_TOKEN> + e . getMessage ( ) + <RARE_TOKEN> ) ; </a> 
<a> if ( ! e . getMessage ( ) . equals ( </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> token must be <RARE_TOKEN> to " + </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> the current <RARE_TOKEN> ) ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> } </a> 
<a> Log . d ( "Tests" , <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> try { </a> 
<a> Util . <RARE_TOKEN> ( <RARE_TOKEN> . request ( "" ) ) ; </a> 
<a> return false ; </a> 
<a> } catch ( FacebookError e ) { </a> 
<a> Log . d ( "Tests" , <RARE_TOKEN> + e . getMessage ( ) + <RARE_TOKEN> ) ; </a> 
<a> if ( ! e . getMessage ( ) . equals ( <RARE_TOKEN> get <RARE_TOKEN> ) ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> } </a> 
<a> Log . d ( "Tests" , <RARE_TOKEN> an <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> try { </a> 
<a> Util . <RARE_TOKEN> ( <RARE_TOKEN> . request ( <RARE_TOKEN> ) ) ; </a> 
<a> return false ; </a> 
<a> } catch ( FacebookError e ) { </a> 
<a> Log . d ( "Tests" , <RARE_TOKEN> + e . getMessage ( ) + <RARE_TOKEN> ) ; </a> 
<a> if ( ! e . getMessage ( ) . equals ( </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> of the <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> not " + </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> ) ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> } </a> 
<a> Log . d ( "Tests" , <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> try { </a> 
<a> Util . <RARE_TOKEN> ( <RARE_TOKEN> . request ( <RARE_TOKEN> , new Bundle ( ) , <RARE_TOKEN> ) ) ; </a> 
<a> return false ; </a> 
<a> } catch ( FacebookError e ) { </a> 
<a> Log . d ( "Tests" , <RARE_TOKEN> + e . getMessage ( ) + <RARE_TOKEN> ) ; </a> 
<a> if ( ! e . getMessage ( ) . equals ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ) return false ; </a> 
<a> } </a> 
<a> Log . d ( "Tests" , <RARE_TOKEN> that <RARE_TOKEN> method is <RARE_TOKEN> ) ; </a> 
<a> try { </a> 
<a> <RARE_TOKEN> . request ( new Bundle ( ) ) ; </a> 
<a> return false ; </a> 
<a> } catch ( IllegalArgumentException e ) { </a> 
<a> Log . d ( "Tests" , <RARE_TOKEN> + e . getMessage ( ) + <RARE_TOKEN> ) ; </a> 
<a> if ( ! e . getMessage ( ) . equals ( </a> 
<a> <RARE_TOKEN> method must be <RARE_TOKEN> " + </a> 
<a> <RARE_TOKEN> must <RARE_TOKEN> key <RARE_TOKEN> " + </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> + </a> 
<a> <RARE_TOKEN> ) ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> } </a> 
<a> Log . d ( "Tests" , <RARE_TOKEN> that <RARE_TOKEN> <RARE_TOKEN> request <RARE_TOKEN> be <RARE_TOKEN> " + </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> params . putString ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> try { </a> 
<a> Util . <RARE_TOKEN> ( <RARE_TOKEN> . request ( params ) ) ; </a> 
<a> return false ; </a> 
<a> } catch ( FacebookError e ) { </a> 
<a> Log . d ( "Tests" , <RARE_TOKEN> + e . getMessage ( ) + <RARE_TOKEN> ) ; </a> 
<a> if ( e . <RARE_TOKEN> ( ) != <RARE_TOKEN> || </a> 
<a> ! e . getMessage ( ) . equals ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> } </a> 
<a> Log . d ( "Tests" , <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> try { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> Util . <RARE_TOKEN> ( <RARE_TOKEN> . request ( <RARE_TOKEN> , new Bundle ( ) , <RARE_TOKEN> ) ) ; </a> 
<a> return false ; </a> 
<a> } catch ( FacebookError e ) { </a> 
<a> Log . d ( "Tests" , <RARE_TOKEN> + e . getMessage ( ) + <RARE_TOKEN> ) ; </a> 
<a> if ( ! e . getMessage ( ) . equals ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> } </a> 
<a> Log . d ( "Tests" , <RARE_TOKEN> <RARE_TOKEN> Error <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> return true ; </a> 
<a> } catch ( Throwable e ) { </a> 
<a> e . printStackTrace ( ) ; </a> 
<a> return false ; </a> 
<a> } </a> 
<a> } </a> 
<a> public class <RARE_TOKEN> implements <RARE_TOKEN> { </a> 
<a> public void <RARE_TOKEN> ( Bundle values ) { </a> 
<a> if ( <RARE_TOKEN> ( ) ) { </a> 
<a> <RARE_TOKEN> . setText ( </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> . setText ( </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> failed" ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> ( ) ) { </a> 
<a> <RARE_TOKEN> . setText ( </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> . setText ( </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> failed" ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> } </a> 
<a> public void onError ( <RARE_TOKEN> e ) { </a> 
<a> e . printStackTrace ( ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( FacebookError e ) { </a> 
<a> e . printStackTrace ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> if ( ! <RARE_TOKEN> . <RARE_TOKEN> ( ) ) return false ; </a> 
<a> try { </a> 
<a> Log . d ( "Tests" , <RARE_TOKEN> request for <RARE_TOKEN> ) ; </a> 
<a> String response = <RARE_TOKEN> . request ( <RARE_TOKEN> ) ; </a> 
<a> JSONObject obj = Util . <RARE_TOKEN> ( response ) ; </a> 
<a> if ( obj . getString ( "name" ) == null || </a> 
<a> obj . getString ( "name" ) . equals ( "" ) ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> Log . d ( "Tests" , <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> Bundle parameters = new Bundle ( ) ; </a> 
<a> parameters . putString ( "message" , <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> parameters . putString ( <RARE_TOKEN> , <RARE_TOKEN> test <RARE_TOKEN> ) ; </a> 
<a> response = <RARE_TOKEN> . request ( <RARE_TOKEN> , parameters , </a> 
<a> <RARE_TOKEN> ) ; </a> 
<a> Log . d ( "Tests" , <RARE_TOKEN> response: " + response ) ; </a> 
<a> if ( response == null || response . equals ( "" ) || </a> 
<a> response . equals ( <RARE_TOKEN> ) ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> Log . d ( "Tests" , <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> response = response . <RARE_TOKEN> ( <RARE_TOKEN> , "" ) ; </a> 
<a> response = response . <RARE_TOKEN> ( <RARE_TOKEN> , "" ) ; </a> 
<a> response = <RARE_TOKEN> . request ( response , new Bundle ( ) , </a> 
<a> <RARE_TOKEN> ) ; </a> 
<a> if ( ! response . equals ( <RARE_TOKEN> ) ) return false ; </a> 
<a> Log . d ( "Tests" , <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> parameters = new Bundle ( ) ; </a> 
<a> parameters . putString ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> parameters . putString ( <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> + </a> 
<a> <RARE_TOKEN> + </a> 
<a> <RARE_TOKEN> + </a> 
<a> <RARE_TOKEN> + </a> 
<a> <RARE_TOKEN> + </a> 
<a> <RARE_TOKEN> + </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> + </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> + </a> 
<a> <RARE_TOKEN> ) ; ; </a> 
<a> response = <RARE_TOKEN> . request ( parameters ) ; </a> 
<a> Log . d ( "Tests" , <RARE_TOKEN> response: " + response ) ; </a> 
<a> if ( response == null || response . equals ( "" ) || </a> 
<a> response . equals ( <RARE_TOKEN> ) ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> Log . d ( "Tests" , <RARE_TOKEN> <RARE_TOKEN> post <RARE_TOKEN> ) ; </a> 
<a> response = response . <RARE_TOKEN> ( <RARE_TOKEN> , "" ) ; </a> 
<a> response = <RARE_TOKEN> . request ( </a> 
<a> response , new Bundle ( ) , <RARE_TOKEN> ) ; </a> 
<a> if ( ! response . equals ( <RARE_TOKEN> ) ) return false ; </a> 
<a> Log . d ( "Tests" , <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> return true ; </a> 
<a> } catch ( Throwable e ) { </a> 
<a> e . printStackTrace ( ) ; </a> 
<a> return false ; </a> 
<a> } </a> 
<a> } </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> if ( ! <RARE_TOKEN> . <RARE_TOKEN> ( ) ) return false ; </a> 
<a> Log . d ( "Tests" , <RARE_TOKEN> that request for <RARE_TOKEN> is <RARE_TOKEN> ) ; </a> 
<a> try { </a> 
<a> Util . <RARE_TOKEN> ( <RARE_TOKEN> . request ( <RARE_TOKEN> ) ) ; </a> 
<a> return false ; </a> 
<a> } catch ( Throwable e ) { </a> 
<a> Log . d ( "Tests" , <RARE_TOKEN> + e . getMessage ( ) + <RARE_TOKEN> ) ; </a> 
<a> if ( ! e . getMessage ( ) . equals ( <RARE_TOKEN> path <RARE_TOKEN> <RARE_TOKEN> ) ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> } </a> 
<a> Log . d ( "Tests" , <RARE_TOKEN> that <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> method <RARE_TOKEN> ) ; </a> 
<a> Bundle params = new Bundle ( ) ; </a> 
<a> params . putString ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> try { </a> 
<a> Util . <RARE_TOKEN> ( <RARE_TOKEN> . request ( params ) ) ; </a> 
<a> return false ; </a> 
<a> } catch ( Throwable e ) { </a> 
<a> Log . d ( "Tests" , <RARE_TOKEN> + e . getMessage ( ) + <RARE_TOKEN> ) ; </a> 
<a> if ( ! e . getMessage ( ) . equals ( <RARE_TOKEN> <RARE_TOKEN> ) ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> } </a> 
<a> Log . d ( "Tests" , <RARE_TOKEN> <RARE_TOKEN> Error <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> return true ; </a> 
<a> } </a> 
<a> public class <RARE_TOKEN> implements <RARE_TOKEN> { </a> 
<a> public void <RARE_TOKEN> ( Bundle values ) { </a> 
<a> final String <RARE_TOKEN> = values . getString ( <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> Log . d ( <RARE_TOKEN> , <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> + <RARE_TOKEN> ) ; </a> 
<a> new <RARE_TOKEN> ( <RARE_TOKEN> ) . request ( <RARE_TOKEN> , </a> 
<a> new <RARE_TOKEN> ( ) ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> . this . <RARE_TOKEN> ( new Runnable ( ) { </a> 
<a> public void run ( ) { </a> 
<a> <RARE_TOKEN> . setText ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( ) { } </a> 
<a> public void onError ( <RARE_TOKEN> e ) { </a> 
<a> e . printStackTrace ( ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( FacebookError e ) { </a> 
<a> e . printStackTrace ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public class <RARE_TOKEN> implements <RARE_TOKEN> { </a> 
<a> public void <RARE_TOKEN> ( final String response , final Object state ) { </a> 
<a> Log . d ( "Tests" , <RARE_TOKEN> response: " + response ) ; </a> 
<a> try { </a> 
<a> JSONObject json = Util . <RARE_TOKEN> ( response ) ; </a> 
<a> String <RARE_TOKEN> = json . getString ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . this . <RARE_TOKEN> ( new Runnable ( ) { </a> 
<a> public void run ( ) { </a> 
<a> <RARE_TOKEN> . setText ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> Log . d ( "Tests" , <RARE_TOKEN> <RARE_TOKEN> post <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> ( <RARE_TOKEN> ) ) { </a> 
<a> <RARE_TOKEN> . this . <RARE_TOKEN> ( new Runnable ( ) { </a> 
<a> public void run ( ) { </a> 
<a> <RARE_TOKEN> . setText ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> . this . <RARE_TOKEN> ( new Runnable ( ) { </a> 
<a> public void run ( ) { </a> 
<a> <RARE_TOKEN> . setText ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> } </a> 
<a> } catch ( Throwable e ) { </a> 
<a> e . printStackTrace ( ) ; </a> 
<a> <RARE_TOKEN> . this . <RARE_TOKEN> ( new Runnable ( ) { </a> 
<a> public void run ( ) { </a> 
<a> <RARE_TOKEN> . setText ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( FacebookError e , final Object state ) { </a> 
<a> e . printStackTrace ( ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( <RARE_TOKEN> e , </a> 
<a> final Object state ) { </a> 
<a> e . printStackTrace ( ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( IOException e , final Object state ) { </a> 
<a> e . printStackTrace ( ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( <RARE_TOKEN> e , </a> 
<a> final Object state ) { </a> 
<a> e . printStackTrace ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public boolean <RARE_TOKEN> ( String <RARE_TOKEN> ) { </a> 
<a> try { </a> 
<a> String <RARE_TOKEN> = </a> 
<a> <RARE_TOKEN> . request ( <RARE_TOKEN> , new Bundle ( ) , <RARE_TOKEN> ) ; </a> 
<a> return <RARE_TOKEN> . equals ( <RARE_TOKEN> ) ; </a> 
<a> } catch ( Throwable e ) { </a> 
<a> e . printStackTrace ( ) ; </a> 
<a> return false ; </a> 
<a> } </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> if ( <RARE_TOKEN> ( ) ) { </a> 
<a> <RARE_TOKEN> . setText ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> . setText ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> try { </a> 
<a> Log . d ( "Tests" , <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> String response = <RARE_TOKEN> . <RARE_TOKEN> ( this ) ; </a> 
<a> Log . d ( "Tests" , <RARE_TOKEN> <RARE_TOKEN> response: <RARE_TOKEN> + response + <RARE_TOKEN> ) ; </a> 
<a> if ( ! response . equals ( <RARE_TOKEN> ) ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> Log . d ( "Tests" , <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> out facebook <RARE_TOKEN> ) ; </a> 
<a> try { </a> 
<a> Util . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ( this ) ) ; </a> 
<a> return false ; </a> 
<a> } catch ( FacebookError e ) { </a> 
<a> if ( e . <RARE_TOKEN> ( ) != <RARE_TOKEN> || </a> 
<a> ! e . getMessage ( ) . equals ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> } </a> 
<a> Log . d ( "Tests" , <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> try { </a> 
<a> Util . <RARE_TOKEN> ( new <RARE_TOKEN> ( <RARE_TOKEN> ) . <RARE_TOKEN> ( this ) ) ; </a> 
<a> return false ; </a> 
<a> } catch ( FacebookError e ) { </a> 
<a> if ( e . <RARE_TOKEN> ( ) != <RARE_TOKEN> || </a> 
<a> ! e . getMessage ( ) . equals ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> } </a> 
<a> Log . d ( "Tests" , <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> return true ; </a> 
<a> } catch ( Throwable e ) { </a> 
<a> e . printStackTrace ( ) ; </a> 
<a> return false ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . buffer ; </a> 
<a> import java . io . IOException ; </a> 
<a> import java . io . InputStream ; </a> 
<a> import java . io . OutputStream ; </a> 
<a> import java . nio . ByteBuffer ; </a> 
<a> import java . nio . ByteOrder ; </a> 
<a> import java . nio . channels . <RARE_TOKEN> ; </a> 
<a> import java . nio . channels . <RARE_TOKEN> ; </a> 
<a> import java . nio . charset . Charset ; </a> 
<a> public abstract class <RARE_TOKEN> implements ByteBuf { </a> 
<a> private final <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> private final ByteOrder order ; </a> 
<a> private final int maxCapacity ; </a> 
<a> private int readerIndex ; </a> 
<a> private int writerIndex ; </a> 
<a> private int <RARE_TOKEN> ; </a> 
<a> private int <RARE_TOKEN> ; </a> 
<a> int <RARE_TOKEN> = 1 ; </a> 
<a> protected <RARE_TOKEN> ( ByteOrder <RARE_TOKEN> , int maxCapacity ) { </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( maxCapacity < 0 ) { </a> 
<a> throw new IllegalArgumentException ( <RARE_TOKEN> " + maxCapacity + " (expected: >= <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> order = <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = new <RARE_TOKEN> ( this ) ; </a> 
<a> this . maxCapacity = maxCapacity ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ChannelBufType type ( ) { </a> 
<a> return ChannelBufType . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int maxCapacity ( ) { </a> 
<a> return maxCapacity ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int readerIndex ( ) { </a> 
<a> return readerIndex ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void readerIndex ( int readerIndex ) { </a> 
<a> if ( readerIndex < 0 || readerIndex > writerIndex ) { </a> 
<a> throw new IndexOutOfBoundsException ( <RARE_TOKEN> <RARE_TOKEN> " </a> 
<a> + readerIndex + " - <RARE_TOKEN> is " + writerIndex ) ; </a> 
<a> } </a> 
<a> this . readerIndex = readerIndex ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int writerIndex ( ) { </a> 
<a> return writerIndex ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void writerIndex ( int writerIndex ) { </a> 
<a> if ( writerIndex < readerIndex || writerIndex > capacity ( ) ) { </a> 
<a> throw new IndexOutOfBoundsException ( <RARE_TOKEN> <RARE_TOKEN> " </a> 
<a> + writerIndex + " - <RARE_TOKEN> is " + readerIndex + " or " + capacity ( ) ) ; </a> 
<a> } </a> 
<a> this . writerIndex = writerIndex ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( int readerIndex , int writerIndex ) { </a> 
<a> if ( readerIndex < 0 || readerIndex > writerIndex || writerIndex > capacity ( ) ) { </a> 
<a> throw new IndexOutOfBoundsException ( <RARE_TOKEN> <RARE_TOKEN> readerIndex is " </a> 
<a> + readerIndex + ", writerIndex is " </a> 
<a> + writerIndex + ", capacity is " + capacity ( ) ) ; </a> 
<a> } </a> 
<a> this . readerIndex = readerIndex ; </a> 
<a> this . writerIndex = writerIndex ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void clear ( ) { </a> 
<a> readerIndex = writerIndex = 0 ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean readable ( ) { </a> 
<a> return writerIndex > readerIndex ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ( ) > 0 ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int readableBytes ( ) { </a> 
<a> return writerIndex - readerIndex ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int <RARE_TOKEN> ( ) { </a> 
<a> return capacity ( ) - writerIndex ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> = readerIndex ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> readerIndex ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> = writerIndex ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> writerIndex = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> if ( readerIndex == 0 ) { </a> 
<a> return ; </a> 
<a> } </a> 
<a> if ( readerIndex != writerIndex ) { </a> 
<a> setBytes ( 0 , this , readerIndex , writerIndex - readerIndex ) ; </a> 
<a> writerIndex -= readerIndex ; </a> 
<a> <RARE_TOKEN> ( readerIndex ) ; </a> 
<a> readerIndex = 0 ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> ( readerIndex ) ; </a> 
<a> writerIndex = readerIndex = 0 ; </a> 
<a> } </a> 
<a> } </a> 
<a> protected void <RARE_TOKEN> ( int <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> = Math . <RARE_TOKEN> ( <RARE_TOKEN> - <RARE_TOKEN> , 0 ) ; </a> 
<a> <RARE_TOKEN> = Math . <RARE_TOKEN> ( <RARE_TOKEN> - <RARE_TOKEN> , 0 ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( int <RARE_TOKEN> ) { </a> 
<a> if ( <RARE_TOKEN> < 0 ) { </a> 
<a> throw new IllegalArgumentException ( String . format ( </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> (expected: >= <RARE_TOKEN> , <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> <= <RARE_TOKEN> ( ) ) { </a> 
<a> return ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> > maxCapacity - writerIndex ) { </a> 
<a> throw new IndexOutOfBoundsException ( String . format ( </a> 
<a> <RARE_TOKEN> + <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> , </a> 
<a> writerIndex , <RARE_TOKEN> , maxCapacity ) ) ; </a> 
<a> } </a> 
<a> int newCapacity = <RARE_TOKEN> ( writerIndex + <RARE_TOKEN> ) ; </a> 
<a> capacity ( newCapacity ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int <RARE_TOKEN> ( int <RARE_TOKEN> , boolean <RARE_TOKEN> ) { </a> 
<a> if ( <RARE_TOKEN> < 0 ) { </a> 
<a> throw new IllegalArgumentException ( String . format ( </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> (expected: >= <RARE_TOKEN> , <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> <= <RARE_TOKEN> ( ) ) { </a> 
<a> return 0 ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> > maxCapacity - writerIndex ) { </a> 
<a> if ( <RARE_TOKEN> ) { </a> 
<a> if ( capacity ( ) == maxCapacity ( ) ) { </a> 
<a> return 1 ; </a> 
<a> } </a> 
<a> capacity ( maxCapacity ( ) ) ; </a> 
<a> return 3 ; </a> 
<a> } </a> 
<a> } </a> 
<a> int newCapacity = <RARE_TOKEN> ( writerIndex + <RARE_TOKEN> ) ; </a> 
<a> capacity ( newCapacity ) ; </a> 
<a> return 2 ; </a> 
<a> } </a> 
<a> private int <RARE_TOKEN> ( int <RARE_TOKEN> ) { </a> 
<a> final int maxCapacity = this . maxCapacity ; </a> 
<a> final int <RARE_TOKEN> = <RARE_TOKEN> * 4 ; </a> 
<a> if ( <RARE_TOKEN> == <RARE_TOKEN> ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> > <RARE_TOKEN> ) { </a> 
<a> int newCapacity = <RARE_TOKEN> / <RARE_TOKEN> * <RARE_TOKEN> ; </a> 
<a> if ( newCapacity > maxCapacity - <RARE_TOKEN> ) { </a> 
<a> newCapacity = maxCapacity ; </a> 
<a> } else { </a> 
<a> newCapacity += <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> return newCapacity ; </a> 
<a> } </a> 
<a> int newCapacity = <RARE_TOKEN> ; </a> 
<a> while ( newCapacity < <RARE_TOKEN> ) { </a> 
<a> newCapacity <RARE_TOKEN> 1 ; </a> 
<a> } </a> 
<a> return Math . min ( newCapacity , maxCapacity ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public final ByteOrder order ( ) { </a> 
<a> return order ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ByteBuf order ( ByteOrder <RARE_TOKEN> ) { </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> == order ( ) ) { </a> 
<a> return this ; </a> 
<a> } </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( int index ) { </a> 
<a> return getByte ( index ) != 0 ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public short <RARE_TOKEN> ( int index ) { </a> 
<a> return ( short ) ( getByte ( index ) & 0xFF ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int <RARE_TOKEN> ( int index ) { </a> 
<a> return <RARE_TOKEN> ( index ) & <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int <RARE_TOKEN> ( int index ) { </a> 
<a> int value = <RARE_TOKEN> ( index ) ; </a> 
<a> if ( ( value & <RARE_TOKEN> ) != 0 ) { </a> 
<a> value |= <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> return value ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public long <RARE_TOKEN> ( int index ) { </a> 
<a> return getInt ( index ) & <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public char <RARE_TOKEN> ( int index ) { </a> 
<a> return ( char ) <RARE_TOKEN> ( index ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public float <RARE_TOKEN> ( int index ) { </a> 
<a> return <RARE_TOKEN> . <RARE_TOKEN> ( getInt ( index ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public double <RARE_TOKEN> ( int index ) { </a> 
<a> return <RARE_TOKEN> . <RARE_TOKEN> ( getLong ( index ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void getBytes ( int index , byte [ ] dst ) { </a> 
<a> getBytes ( index , dst , 0 , dst . length ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void getBytes ( int index , ByteBuf dst ) { </a> 
<a> getBytes ( index , dst , dst . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void getBytes ( int index , ByteBuf dst , int length ) { </a> 
<a> if ( length > dst . <RARE_TOKEN> ( ) ) { </a> 
<a> throw new IndexOutOfBoundsException ( <RARE_TOKEN> <RARE_TOKEN> bytes to be <RARE_TOKEN> <RARE_TOKEN> " </a> 
<a> + length + ", <RARE_TOKEN> is " + dst . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> getBytes ( index , dst , dst . writerIndex ( ) , length ) ; </a> 
<a> dst . writerIndex ( dst . writerIndex ( ) + length ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( int index , boolean value ) { </a> 
<a> setByte ( index , value ? 1 : 0 ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( int index , int value ) { </a> 
<a> <RARE_TOKEN> ( index , value ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( int index , float value ) { </a> 
<a> <RARE_TOKEN> ( index , <RARE_TOKEN> . <RARE_TOKEN> ( value ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( int index , double value ) { </a> 
<a> <RARE_TOKEN> ( index , <RARE_TOKEN> . <RARE_TOKEN> ( value ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void setBytes ( int index , byte [ ] src ) { </a> 
<a> setBytes ( index , src , 0 , src . length ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void setBytes ( int index , ByteBuf src ) { </a> 
<a> setBytes ( index , src , src . readableBytes ( ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void setBytes ( int index , ByteBuf src , int length ) { </a> 
<a> if ( length > src . readableBytes ( ) ) { </a> 
<a> throw new IndexOutOfBoundsException ( <RARE_TOKEN> <RARE_TOKEN> bytes to <RARE_TOKEN> <RARE_TOKEN> " </a> 
<a> + length + ", <RARE_TOKEN> is " + src . readableBytes ( ) ) ; </a> 
<a> } </a> 
<a> setBytes ( index , src , src . readerIndex ( ) , length ) ; </a> 
<a> src . readerIndex ( src . readerIndex ( ) + length ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( int index , int length ) { </a> 
<a> if ( length == 0 ) { </a> 
<a> return ; </a> 
<a> } </a> 
<a> if ( length < 0 ) { </a> 
<a> throw new IllegalArgumentException ( </a> 
<a> <RARE_TOKEN> must be 0 or <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> int <RARE_TOKEN> = length > > > 3 ; </a> 
<a> int <RARE_TOKEN> = length & 7 ; </a> 
<a> for ( int i = <RARE_TOKEN> ; i > 0 ; i -- ) { </a> 
<a> <RARE_TOKEN> ( index , 0 ) ; </a> 
<a> index += 8 ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> == 4 ) { </a> 
<a> <RARE_TOKEN> ( index , 0 ) ; </a> 
<a> } else if ( <RARE_TOKEN> < 4 ) { </a> 
<a> for ( int i = <RARE_TOKEN> ; i > 0 ; i -- ) { </a> 
<a> setByte ( index , ( byte ) 0 ) ; </a> 
<a> index ++ ; </a> 
<a> } </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> ( index , 0 ) ; </a> 
<a> index += 4 ; </a> 
<a> for ( int i = <RARE_TOKEN> - 4 ; i > 0 ; i -- ) { </a> 
<a> setByte ( index , ( byte ) 0 ) ; </a> 
<a> index ++ ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public byte <RARE_TOKEN> ( ) { </a> 
<a> if ( readerIndex == writerIndex ) { </a> 
<a> throw new IndexOutOfBoundsException ( <RARE_TOKEN> byte limit <RARE_TOKEN> " </a> 
<a> + readerIndex ) ; </a> 
<a> } </a> 
<a> return getByte ( readerIndex ++ ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ( ) != 0 ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public short <RARE_TOKEN> ( ) { </a> 
<a> return ( short ) ( <RARE_TOKEN> ( ) & 0xFF ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public short <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> ( 2 ) ; </a> 
<a> short v = <RARE_TOKEN> ( readerIndex ) ; </a> 
<a> readerIndex += 2 ; </a> 
<a> return v ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ( ) & <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int <RARE_TOKEN> ( ) { </a> 
<a> int value = <RARE_TOKEN> ( ) ; </a> 
<a> if ( ( value & <RARE_TOKEN> ) != 0 ) { </a> 
<a> value |= <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> return value ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> ( 3 ) ; </a> 
<a> int v = <RARE_TOKEN> ( readerIndex ) ; </a> 
<a> readerIndex += 3 ; </a> 
<a> return v ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> ( 4 ) ; </a> 
<a> int v = getInt ( readerIndex ) ; </a> 
<a> readerIndex += 4 ; </a> 
<a> return v ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public long <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ( ) & <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public long <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> ( 8 ) ; </a> 
<a> long v = getLong ( readerIndex ) ; </a> 
<a> readerIndex += 8 ; </a> 
<a> return v ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public char <RARE_TOKEN> ( ) { </a> 
<a> return ( char ) <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public float <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public double <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ByteBuf readBytes ( int length ) { </a> 
<a> <RARE_TOKEN> ( length ) ; </a> 
<a> if ( length == 0 ) { </a> 
<a> return Unpooled . EMPTY_BUFFER ; </a> 
<a> } </a> 
<a> ByteBuf buf = unsafe ( ) . <RARE_TOKEN> ( length ) ; </a> 
<a> buf . writeBytes ( this , readerIndex , length ) ; </a> 
<a> readerIndex += length ; </a> 
<a> return buf ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ByteBuf <RARE_TOKEN> ( int length ) { </a> 
<a> ByteBuf slice = slice ( readerIndex , length ) ; </a> 
<a> readerIndex += length ; </a> 
<a> return slice ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void readBytes ( byte [ ] dst , int dstIndex , int length ) { </a> 
<a> <RARE_TOKEN> ( length ) ; </a> 
<a> getBytes ( readerIndex , dst , dstIndex , length ) ; </a> 
<a> readerIndex += length ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void readBytes ( byte [ ] dst ) { </a> 
<a> readBytes ( dst , 0 , dst . length ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void readBytes ( ByteBuf dst ) { </a> 
<a> readBytes ( dst , dst . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void readBytes ( ByteBuf dst , int length ) { </a> 
<a> if ( length > dst . <RARE_TOKEN> ( ) ) { </a> 
<a> throw new IndexOutOfBoundsException ( <RARE_TOKEN> <RARE_TOKEN> bytes to be <RARE_TOKEN> <RARE_TOKEN> " </a> 
<a> + length + ", <RARE_TOKEN> is " + dst . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> readBytes ( dst , dst . writerIndex ( ) , length ) ; </a> 
<a> dst . writerIndex ( dst . writerIndex ( ) + length ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void readBytes ( ByteBuf dst , int dstIndex , int length ) { </a> 
<a> <RARE_TOKEN> ( length ) ; </a> 
<a> getBytes ( readerIndex , dst , dstIndex , length ) ; </a> 
<a> readerIndex += length ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void readBytes ( ByteBuffer dst ) { </a> 
<a> int length = dst . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> ( length ) ; </a> 
<a> getBytes ( readerIndex , dst ) ; </a> 
<a> readerIndex += length ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int readBytes ( <RARE_TOKEN> out , int length ) </a> 
<a> throws IOException { </a> 
<a> <RARE_TOKEN> ( length ) ; </a> 
<a> int readBytes = getBytes ( readerIndex , out , length ) ; </a> 
<a> readerIndex += readBytes ; </a> 
<a> return readBytes ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void readBytes ( OutputStream out , int length ) throws IOException { </a> 
<a> <RARE_TOKEN> ( length ) ; </a> 
<a> getBytes ( readerIndex , out , length ) ; </a> 
<a> readerIndex += length ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void skipBytes ( int length ) { </a> 
<a> int <RARE_TOKEN> = readerIndex + length ; </a> 
<a> if ( <RARE_TOKEN> > writerIndex ) { </a> 
<a> throw new IndexOutOfBoundsException ( <RARE_TOKEN> bytes <RARE_TOKEN> - <RARE_TOKEN> " </a> 
<a> + <RARE_TOKEN> + ", <RARE_TOKEN> is " + writerIndex ) ; </a> 
<a> } </a> 
<a> readerIndex = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( boolean value ) { </a> 
<a> writeByte ( value ? 1 : 0 ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void writeByte ( int value ) { </a> 
<a> <RARE_TOKEN> ( 1 ) ; </a> 
<a> setByte ( writerIndex ++ , value ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( int value ) { </a> 
<a> <RARE_TOKEN> ( 2 ) ; </a> 
<a> <RARE_TOKEN> ( writerIndex , value ) ; </a> 
<a> writerIndex += 2 ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( int value ) { </a> 
<a> <RARE_TOKEN> ( 3 ) ; </a> 
<a> <RARE_TOKEN> ( writerIndex , value ) ; </a> 
<a> writerIndex += 3 ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void writeInt ( int value ) { </a> 
<a> <RARE_TOKEN> ( 4 ) ; </a> 
<a> <RARE_TOKEN> ( writerIndex , value ) ; </a> 
<a> writerIndex += 4 ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( long value ) { </a> 
<a> <RARE_TOKEN> ( 8 ) ; </a> 
<a> <RARE_TOKEN> ( writerIndex , value ) ; </a> 
<a> writerIndex += 8 ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( int value ) { </a> 
<a> <RARE_TOKEN> ( value ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( float value ) { </a> 
<a> writeInt ( <RARE_TOKEN> . <RARE_TOKEN> ( value ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( double value ) { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ( value ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void writeBytes ( byte [ ] src , int srcIndex , int length ) { </a> 
<a> <RARE_TOKEN> ( length ) ; </a> 
<a> setBytes ( writerIndex , src , srcIndex , length ) ; </a> 
<a> writerIndex += length ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void writeBytes ( byte [ ] src ) { </a> 
<a> writeBytes ( src , 0 , src . length ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void writeBytes ( ByteBuf src ) { </a> 
<a> writeBytes ( src , src . readableBytes ( ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void writeBytes ( ByteBuf src , int length ) { </a> 
<a> if ( length > src . readableBytes ( ) ) { </a> 
<a> throw new IndexOutOfBoundsException ( <RARE_TOKEN> <RARE_TOKEN> bytes to write - <RARE_TOKEN> " </a> 
<a> + length + ", <RARE_TOKEN> is " + src . readableBytes ( ) ) ; </a> 
<a> } </a> 
<a> writeBytes ( src , src . readerIndex ( ) , length ) ; </a> 
<a> src . readerIndex ( src . readerIndex ( ) + length ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void writeBytes ( ByteBuf src , int srcIndex , int length ) { </a> 
<a> <RARE_TOKEN> ( length ) ; </a> 
<a> setBytes ( writerIndex , src , srcIndex , length ) ; </a> 
<a> writerIndex += length ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void writeBytes ( ByteBuffer src ) { </a> 
<a> int length = src . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> ( length ) ; </a> 
<a> setBytes ( writerIndex , src ) ; </a> 
<a> writerIndex += length ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int writeBytes ( InputStream in , int length ) </a> 
<a> throws IOException { </a> 
<a> <RARE_TOKEN> ( length ) ; </a> 
<a> int <RARE_TOKEN> = setBytes ( writerIndex , in , length ) ; </a> 
<a> if ( <RARE_TOKEN> > 0 ) { </a> 
<a> writerIndex += <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int writeBytes ( <RARE_TOKEN> in , int length ) </a> 
<a> throws IOException { </a> 
<a> <RARE_TOKEN> ( length ) ; </a> 
<a> int <RARE_TOKEN> = setBytes ( writerIndex , in , length ) ; </a> 
<a> if ( <RARE_TOKEN> > 0 ) { </a> 
<a> writerIndex += <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( int length ) { </a> 
<a> if ( length == 0 ) { </a> 
<a> return ; </a> 
<a> } </a> 
<a> if ( length < 0 ) { </a> 
<a> throw new IllegalArgumentException ( </a> 
<a> <RARE_TOKEN> must be 0 or <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> int <RARE_TOKEN> = length > > > 3 ; </a> 
<a> int <RARE_TOKEN> = length & 7 ; </a> 
<a> for ( int i = <RARE_TOKEN> ; i > 0 ; i -- ) { </a> 
<a> <RARE_TOKEN> ( 0 ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> == 4 ) { </a> 
<a> writeInt ( 0 ) ; </a> 
<a> } else if ( <RARE_TOKEN> < 4 ) { </a> 
<a> for ( int i = <RARE_TOKEN> ; i > 0 ; i -- ) { </a> 
<a> writeByte ( ( byte ) 0 ) ; </a> 
<a> } </a> 
<a> } else { </a> 
<a> writeInt ( 0 ) ; </a> 
<a> for ( int i = <RARE_TOKEN> - 4 ; i > 0 ; i -- ) { </a> 
<a> writeByte ( ( byte ) 0 ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ByteBuf <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ( readerIndex , readableBytes ( ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ByteBuf <RARE_TOKEN> ( ) { </a> 
<a> return new <RARE_TOKEN> ( this ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ByteBuf slice ( ) { </a> 
<a> return slice ( readerIndex , readableBytes ( ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ByteBuf slice ( int index , int length ) { </a> 
<a> if ( length == 0 ) { </a> 
<a> return Unpooled . EMPTY_BUFFER ; </a> 
<a> } </a> 
<a> return new <RARE_TOKEN> ( this , index , length ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ByteBuffer nioBuffer ( ) { </a> 
<a> return nioBuffer ( readerIndex , readableBytes ( ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ByteBuffer [ ] nioBuffers ( ) { </a> 
<a> return nioBuffers ( readerIndex , readableBytes ( ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public String toString ( Charset charset ) { </a> 
<a> return toString ( readerIndex , readableBytes ( ) , charset ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public String toString ( int index , int length , Charset charset ) { </a> 
<a> if ( length == 0 ) { </a> 
<a> return "" ; </a> 
<a> } </a> 
<a> ByteBuffer nioBuffer ; </a> 
<a> if ( <RARE_TOKEN> ( ) ) { </a> 
<a> nioBuffer = nioBuffer ( index , length ) ; </a> 
<a> } else { </a> 
<a> nioBuffer = ByteBuffer . <RARE_TOKEN> ( length ) ; </a> 
<a> getBytes ( index , nioBuffer ) ; </a> 
<a> nioBuffer . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> return ByteBufUtil . <RARE_TOKEN> ( nioBuffer , charset ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int indexOf ( int fromIndex , int <RARE_TOKEN> , byte value ) { </a> 
<a> return ByteBufUtil . indexOf ( this , fromIndex , <RARE_TOKEN> , value ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int indexOf ( int fromIndex , int <RARE_TOKEN> , ByteBufIndexFinder <RARE_TOKEN> ) { </a> 
<a> return ByteBufUtil . indexOf ( this , fromIndex , <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int bytesBefore ( byte value ) { </a> 
<a> return bytesBefore ( readerIndex ( ) , readableBytes ( ) , value ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int bytesBefore ( ByteBufIndexFinder <RARE_TOKEN> ) { </a> 
<a> return bytesBefore ( readerIndex ( ) , readableBytes ( ) , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int bytesBefore ( int length , byte value ) { </a> 
<a> <RARE_TOKEN> ( length ) ; </a> 
<a> return bytesBefore ( readerIndex ( ) , length , value ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int bytesBefore ( int length , ByteBufIndexFinder <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( length ) ; </a> 
<a> return bytesBefore ( readerIndex ( ) , length , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int bytesBefore ( int index , int length , byte value ) { </a> 
<a> int <RARE_TOKEN> = indexOf ( index , index + length , value ) ; </a> 
<a> if ( <RARE_TOKEN> < 0 ) { </a> 
<a> return - 1 ; </a> 
<a> } </a> 
<a> return <RARE_TOKEN> - index ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int bytesBefore ( int index , int length , </a> 
<a> ByteBufIndexFinder <RARE_TOKEN> ) { </a> 
<a> int <RARE_TOKEN> = indexOf ( index , index + length , <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> < 0 ) { </a> 
<a> return - 1 ; </a> 
<a> } </a> 
<a> return <RARE_TOKEN> - index ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int hashCode ( ) { </a> 
<a> return ByteBufUtil . hashCode ( this ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean equals ( Object o ) { </a> 
<a> if ( this == o ) { </a> 
<a> return true ; </a> 
<a> } </a> 
<a> if ( o instanceof ByteBuf ) { </a> 
<a> return ByteBufUtil . equals ( this , ( ByteBuf ) o ) ; </a> 
<a> } </a> 
<a> return false ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int <RARE_TOKEN> ( ByteBuf that ) { </a> 
<a> return ByteBufUtil . <RARE_TOKEN> ( this , that ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public String toString ( ) { </a> 
<a> return getClass ( ) . getSimpleName ( ) + <RARE_TOKEN> + </a> 
<a> <RARE_TOKEN> + readerIndex + ", " + </a> 
<a> <RARE_TOKEN> + writerIndex + ", " + </a> 
<a> <RARE_TOKEN> + capacity ( ) + </a> 
<a> <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> protected void <RARE_TOKEN> ( int <RARE_TOKEN> ) { </a> 
<a> if ( readableBytes ( ) < <RARE_TOKEN> ) { </a> 
<a> throw new IndexOutOfBoundsException ( <RARE_TOKEN> <RARE_TOKEN> readable bytes - <RARE_TOKEN> " </a> 
<a> + <RARE_TOKEN> + ", <RARE_TOKEN> is " + readableBytes ( ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . buffer ; </a> 
<a> import java . io . IOException ; </a> 
<a> import java . io . InputStream ; </a> 
<a> import java . io . OutputStream ; </a> 
<a> import java . nio . ByteBuffer ; </a> 
<a> import java . nio . ByteOrder ; </a> 
<a> import java . nio . channels . <RARE_TOKEN> ; </a> 
<a> import java . nio . channels . <RARE_TOKEN> ; </a> 
<a> import java . nio . charset . Charset ; </a> 
<a> import java . nio . charset . <RARE_TOKEN> ; </a> 
<a> public interface ByteBuf extends <RARE_TOKEN> , <RARE_TOKEN> < ByteBuf > { </a> 
<a> int capacity ( ) ; </a> 
<a> void capacity ( int newCapacity ) ; </a> 
<a> int maxCapacity ( ) ; </a> 
<a> ByteOrder order ( ) ; </a> 
<a> ByteBuf order ( ByteOrder <RARE_TOKEN> ) ; </a> 
<a> boolean <RARE_TOKEN> ( ) ; </a> 
<a> int readerIndex ( ) ; </a> 
<a> void readerIndex ( int readerIndex ) ; </a> 
<a> int writerIndex ( ) ; </a> 
<a> void writerIndex ( int writerIndex ) ; </a> 
<a> void <RARE_TOKEN> ( int readerIndex , int writerIndex ) ; </a> 
<a> int readableBytes ( ) ; </a> 
<a> int <RARE_TOKEN> ( ) ; </a> 
<a> boolean readable ( ) ; </a> 
<a> boolean <RARE_TOKEN> ( ) ; </a> 
<a> void clear ( ) ; </a> 
<a> void <RARE_TOKEN> ( ) ; </a> 
<a> void <RARE_TOKEN> ( ) ; </a> 
<a> void <RARE_TOKEN> ( ) ; </a> 
<a> void <RARE_TOKEN> ( ) ; </a> 
<a> void <RARE_TOKEN> ( ) ; </a> 
<a> void <RARE_TOKEN> ( int <RARE_TOKEN> ) ; </a> 
<a> int <RARE_TOKEN> ( int <RARE_TOKEN> , boolean <RARE_TOKEN> ) ; </a> 
<a> boolean <RARE_TOKEN> ( int index ) ; </a> 
<a> byte getByte ( int index ) ; </a> 
<a> short <RARE_TOKEN> ( int index ) ; </a> 
<a> short <RARE_TOKEN> ( int index ) ; </a> 
<a> int <RARE_TOKEN> ( int index ) ; </a> 
<a> int <RARE_TOKEN> ( int index ) ; </a> 
<a> int <RARE_TOKEN> ( int index ) ; </a> 
<a> int getInt ( int index ) ; </a> 
<a> long <RARE_TOKEN> ( int index ) ; </a> 
<a> long getLong ( int index ) ; </a> 
<a> char <RARE_TOKEN> ( int index ) ; </a> 
<a> float <RARE_TOKEN> ( int index ) ; </a> 
<a> double <RARE_TOKEN> ( int index ) ; </a> 
<a> void getBytes ( int index , ByteBuf dst ) ; </a> 
<a> void getBytes ( int index , ByteBuf dst , int length ) ; </a> 
<a> void getBytes ( int index , ByteBuf dst , int dstIndex , int length ) ; </a> 
<a> void getBytes ( int index , byte [ ] dst ) ; </a> 
<a> void getBytes ( int index , byte [ ] dst , int dstIndex , int length ) ; </a> 
<a> void getBytes ( int index , ByteBuffer dst ) ; </a> 
<a> void getBytes ( int index , OutputStream out , int length ) throws IOException ; </a> 
<a> int getBytes ( int index , <RARE_TOKEN> out , int length ) throws IOException ; </a> 
<a> void <RARE_TOKEN> ( int index , boolean value ) ; </a> 
<a> void setByte ( int index , int value ) ; </a> 
<a> void <RARE_TOKEN> ( int index , int value ) ; </a> 
<a> void <RARE_TOKEN> ( int index , int value ) ; </a> 
<a> void <RARE_TOKEN> ( int index , int value ) ; </a> 
<a> void <RARE_TOKEN> ( int index , long value ) ; </a> 
<a> void <RARE_TOKEN> ( int index , int value ) ; </a> 
<a> void <RARE_TOKEN> ( int index , float value ) ; </a> 
<a> void <RARE_TOKEN> ( int index , double value ) ; </a> 
<a> void setBytes ( int index , ByteBuf src ) ; </a> 
<a> void setBytes ( int index , ByteBuf src , int length ) ; </a> 
<a> void setBytes ( int index , ByteBuf src , int srcIndex , int length ) ; </a> 
<a> void setBytes ( int index , byte [ ] src ) ; </a> 
<a> void setBytes ( int index , byte [ ] src , int srcIndex , int length ) ; </a> 
<a> void setBytes ( int index , ByteBuffer src ) ; </a> 
<a> int setBytes ( int index , InputStream in , int length ) throws IOException ; </a> 
<a> int setBytes ( int index , <RARE_TOKEN> in , int length ) throws IOException ; </a> 
<a> void <RARE_TOKEN> ( int index , int length ) ; </a> 
<a> boolean <RARE_TOKEN> ( ) ; </a> 
<a> byte <RARE_TOKEN> ( ) ; </a> 
<a> short <RARE_TOKEN> ( ) ; </a> 
<a> short <RARE_TOKEN> ( ) ; </a> 
<a> int <RARE_TOKEN> ( ) ; </a> 
<a> int <RARE_TOKEN> ( ) ; </a> 
<a> int <RARE_TOKEN> ( ) ; </a> 
<a> int <RARE_TOKEN> ( ) ; </a> 
<a> long <RARE_TOKEN> ( ) ; </a> 
<a> long <RARE_TOKEN> ( ) ; </a> 
<a> char <RARE_TOKEN> ( ) ; </a> 
<a> float <RARE_TOKEN> ( ) ; </a> 
<a> double <RARE_TOKEN> ( ) ; </a> 
<a> ByteBuf readBytes ( int length ) ; </a> 
<a> ByteBuf <RARE_TOKEN> ( int length ) ; </a> 
<a> void readBytes ( ByteBuf dst ) ; </a> 
<a> void readBytes ( ByteBuf dst , int length ) ; </a> 
<a> void readBytes ( ByteBuf dst , int dstIndex , int length ) ; </a> 
<a> void readBytes ( byte [ ] dst ) ; </a> 
<a> void readBytes ( byte [ ] dst , int dstIndex , int length ) ; </a> 
<a> void readBytes ( ByteBuffer dst ) ; </a> 
<a> void readBytes ( OutputStream out , int length ) throws IOException ; </a> 
<a> int readBytes ( <RARE_TOKEN> out , int length ) throws IOException ; </a> 
<a> void skipBytes ( int length ) ; </a> 
<a> void <RARE_TOKEN> ( boolean value ) ; </a> 
<a> void writeByte ( int value ) ; </a> 
<a> void <RARE_TOKEN> ( int value ) ; </a> 
<a> void <RARE_TOKEN> ( int value ) ; </a> 
<a> void writeInt ( int value ) ; </a> 
<a> void <RARE_TOKEN> ( long value ) ; </a> 
<a> void <RARE_TOKEN> ( int value ) ; </a> 
<a> void <RARE_TOKEN> ( float value ) ; </a> 
<a> void <RARE_TOKEN> ( double value ) ; </a> 
<a> void writeBytes ( ByteBuf src ) ; </a> 
<a> void writeBytes ( ByteBuf src , int length ) ; </a> 
<a> void writeBytes ( ByteBuf src , int srcIndex , int length ) ; </a> 
<a> void writeBytes ( byte [ ] src ) ; </a> 
<a> void writeBytes ( byte [ ] src , int srcIndex , int length ) ; </a> 
<a> void writeBytes ( ByteBuffer src ) ; </a> 
<a> int writeBytes ( InputStream in , int length ) throws IOException ; </a> 
<a> int writeBytes ( <RARE_TOKEN> in , int length ) throws IOException ; </a> 
<a> void <RARE_TOKEN> ( int length ) ; </a> 
<a> int indexOf ( int fromIndex , int <RARE_TOKEN> , byte value ) ; </a> 
<a> int indexOf ( int fromIndex , int <RARE_TOKEN> , ByteBufIndexFinder <RARE_TOKEN> ) ; </a> 
<a> int bytesBefore ( byte value ) ; </a> 
<a> int bytesBefore ( ByteBufIndexFinder <RARE_TOKEN> ) ; </a> 
<a> int bytesBefore ( int length , byte value ) ; </a> 
<a> int bytesBefore ( int length , ByteBufIndexFinder <RARE_TOKEN> ) ; </a> 
<a> int bytesBefore ( int index , int length , byte value ) ; </a> 
<a> int bytesBefore ( int index , int length , ByteBufIndexFinder <RARE_TOKEN> ) ; </a> 
<a> ByteBuf <RARE_TOKEN> ( ) ; </a> 
<a> ByteBuf <RARE_TOKEN> ( int index , int length ) ; </a> 
<a> ByteBuf slice ( ) ; </a> 
<a> ByteBuf slice ( int index , int length ) ; </a> 
<a> ByteBuf <RARE_TOKEN> ( ) ; </a> 
<a> boolean <RARE_TOKEN> ( ) ; </a> 
<a> ByteBuffer nioBuffer ( ) ; </a> 
<a> ByteBuffer nioBuffer ( int index , int length ) ; </a> 
<a> boolean <RARE_TOKEN> ( ) ; </a> 
<a> ByteBuffer [ ] nioBuffers ( ) ; </a> 
<a> ByteBuffer [ ] nioBuffers ( int offset , int length ) ; </a> 
<a> boolean <RARE_TOKEN> ( ) ; </a> 
<a> byte [ ] array ( ) ; </a> 
<a> int <RARE_TOKEN> ( ) ; </a> 
<a> String toString ( Charset charset ) ; </a> 
<a> String toString ( int index , int length , Charset charset ) ; </a> 
<a> @ Override </a> 
<a> int hashCode ( ) ; </a> 
<a> @ Override </a> 
<a> boolean equals ( Object obj ) ; </a> 
<a> @ Override </a> 
<a> int <RARE_TOKEN> ( ByteBuf buffer ) ; </a> 
<a> @ Override </a> 
<a> String toString ( ) ; </a> 
<a> <RARE_TOKEN> unsafe ( ) ; </a> 
<a> interface <RARE_TOKEN> { </a> 
<a> ByteBuffer nioBuffer ( ) ; </a> 
<a> ByteBuffer [ ] nioBuffers ( ) ; </a> 
<a> ByteBuf <RARE_TOKEN> ( int <RARE_TOKEN> ) ; </a> 
<a> void <RARE_TOKEN> ( ) ; </a> 
<a> void <RARE_TOKEN> ( ) ; </a> 
<a> void <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . buffer ; </a> 
<a> public interface ByteBufIndexFinder { </a> 
<a> boolean <RARE_TOKEN> ( ByteBuf buffer , int <RARE_TOKEN> ) ; </a> 
<a> ByteBufIndexFinder <RARE_TOKEN> = new ByteBufIndexFinder ( ) { </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ByteBuf buffer , int <RARE_TOKEN> ) { </a> 
<a> return buffer . getByte ( <RARE_TOKEN> ) == 0 ; </a> 
<a> } </a> 
<a> } ; </a> 
<a> ByteBufIndexFinder <RARE_TOKEN> = new ByteBufIndexFinder ( ) { </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ByteBuf buffer , int <RARE_TOKEN> ) { </a> 
<a> return buffer . getByte ( <RARE_TOKEN> ) != 0 ; </a> 
<a> } </a> 
<a> } ; </a> 
<a> ByteBufIndexFinder <RARE_TOKEN> = new ByteBufIndexFinder ( ) { </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ByteBuf buffer , int <RARE_TOKEN> ) { </a> 
<a> return buffer . getByte ( <RARE_TOKEN> ) == <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } ; </a> 
<a> ByteBufIndexFinder <RARE_TOKEN> = new ByteBufIndexFinder ( ) { </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ByteBuf buffer , int <RARE_TOKEN> ) { </a> 
<a> return buffer . getByte ( <RARE_TOKEN> ) != <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } ; </a> 
<a> ByteBufIndexFinder <RARE_TOKEN> = new ByteBufIndexFinder ( ) { </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ByteBuf buffer , int <RARE_TOKEN> ) { </a> 
<a> return buffer . getByte ( <RARE_TOKEN> ) == <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } ; </a> 
<a> ByteBufIndexFinder <RARE_TOKEN> = new ByteBufIndexFinder ( ) { </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ByteBuf buffer , int <RARE_TOKEN> ) { </a> 
<a> return buffer . getByte ( <RARE_TOKEN> ) != <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } ; </a> 
<a> ByteBufIndexFinder <RARE_TOKEN> = new ByteBufIndexFinder ( ) { </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ByteBuf buffer , int <RARE_TOKEN> ) { </a> 
<a> byte b = buffer . getByte ( <RARE_TOKEN> ) ; </a> 
<a> return b == <RARE_TOKEN> || b == <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } ; </a> 
<a> ByteBufIndexFinder <RARE_TOKEN> = new ByteBufIndexFinder ( ) { </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ByteBuf buffer , int <RARE_TOKEN> ) { </a> 
<a> byte b = buffer . getByte ( <RARE_TOKEN> ) ; </a> 
<a> return b != <RARE_TOKEN> && b != <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } ; </a> 
<a> ByteBufIndexFinder <RARE_TOKEN> = new ByteBufIndexFinder ( ) { </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ByteBuf buffer , int <RARE_TOKEN> ) { </a> 
<a> byte b = buffer . getByte ( <RARE_TOKEN> ) ; </a> 
<a> return b == ' ' || b == <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } ; </a> 
<a> ByteBufIndexFinder <RARE_TOKEN> = new ByteBufIndexFinder ( ) { </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ByteBuf buffer , int <RARE_TOKEN> ) { </a> 
<a> byte b = buffer . getByte ( <RARE_TOKEN> ) ; </a> 
<a> return b != ' ' && b != <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } ; </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . buffer ; </a> 
<a> import java . io . <RARE_TOKEN> ; </a> 
<a> import java . io . <RARE_TOKEN> ; </a> 
<a> import java . io . <RARE_TOKEN> ; </a> 
<a> import java . io . IOException ; </a> 
<a> import java . io . InputStream ; </a> 
<a> public class <RARE_TOKEN> extends InputStream implements <RARE_TOKEN> { </a> 
<a> private final ByteBuf buffer ; </a> 
<a> private final int <RARE_TOKEN> ; </a> 
<a> private final int <RARE_TOKEN> ; </a> 
<a> public <RARE_TOKEN> ( ByteBuf buffer ) { </a> 
<a> this ( buffer , buffer . readableBytes ( ) ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( ByteBuf buffer , int length ) { </a> 
<a> if ( buffer == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( length < 0 ) { </a> 
<a> throw new IllegalArgumentException ( <RARE_TOKEN> " + length ) ; </a> 
<a> } </a> 
<a> if ( length > buffer . readableBytes ( ) ) { </a> 
<a> throw new IndexOutOfBoundsException ( <RARE_TOKEN> <RARE_TOKEN> bytes to be read - <RARE_TOKEN> " </a> 
<a> + length + ", <RARE_TOKEN> is " + buffer . readableBytes ( ) ) ; </a> 
<a> } </a> 
<a> this . buffer = buffer ; </a> 
<a> <RARE_TOKEN> = buffer . readerIndex ( ) ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> + length ; </a> 
<a> buffer . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> public int readBytes ( ) { </a> 
<a> return buffer . readerIndex ( ) - <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int <RARE_TOKEN> ( ) throws IOException { </a> 
<a> return <RARE_TOKEN> - buffer . readerIndex ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( int <RARE_TOKEN> ) { </a> 
<a> buffer . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return true ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int read ( ) throws IOException { </a> 
<a> if ( ! buffer . readable ( ) ) { </a> 
<a> return - 1 ; </a> 
<a> } </a> 
<a> return buffer . <RARE_TOKEN> ( ) & 0xff ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int read ( byte [ ] b , int off , int len ) throws IOException { </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> ( ) ; </a> 
<a> if ( <RARE_TOKEN> == 0 ) { </a> 
<a> return - 1 ; </a> 
<a> } </a> 
<a> len = Math . min ( <RARE_TOKEN> , len ) ; </a> 
<a> buffer . readBytes ( b , off , len ) ; </a> 
<a> return len ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ) throws IOException { </a> 
<a> buffer . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public long <RARE_TOKEN> ( long n ) throws IOException { </a> 
<a> if ( n > Integer . MAX_VALUE ) { </a> 
<a> return skipBytes ( Integer . MAX_VALUE ) ; </a> 
<a> } else { </a> 
<a> return skipBytes ( ( int ) n ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ) throws IOException { </a> 
<a> <RARE_TOKEN> ( 1 ) ; </a> 
<a> return read ( ) != 0 ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public byte <RARE_TOKEN> ( ) throws IOException { </a> 
<a> if ( ! buffer . readable ( ) ) { </a> 
<a> throw new <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> return buffer . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public char <RARE_TOKEN> ( ) throws IOException { </a> 
<a> return ( char ) <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public double <RARE_TOKEN> ( ) throws IOException { </a> 
<a> return <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public float <RARE_TOKEN> ( ) throws IOException { </a> 
<a> return <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( byte [ ] b ) throws IOException { </a> 
<a> <RARE_TOKEN> ( b , 0 , b . length ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( byte [ ] b , int off , int len ) throws IOException { </a> 
<a> <RARE_TOKEN> ( len ) ; </a> 
<a> buffer . readBytes ( b , off , len ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int <RARE_TOKEN> ( ) throws IOException { </a> 
<a> <RARE_TOKEN> ( 4 ) ; </a> 
<a> return buffer . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> private final StringBuilder <RARE_TOKEN> = new StringBuilder ( ) ; </a> 
<a> @ Override </a> 
<a> public String <RARE_TOKEN> ( ) throws IOException { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( 0 ) ; </a> 
<a> for ( ; ; ) { </a> 
<a> int b = read ( ) ; </a> 
<a> if ( b < 0 || b == <RARE_TOKEN> ) { </a> 
<a> break ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> . append ( ( char ) b ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> . length ( ) > 0 ) { </a> 
<a> while ( <RARE_TOKEN> . charAt ( <RARE_TOKEN> . length ( ) - 1 ) == <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> . length ( ) - 1 ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> return <RARE_TOKEN> . toString ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public long <RARE_TOKEN> ( ) throws IOException { </a> 
<a> <RARE_TOKEN> ( 8 ) ; </a> 
<a> return buffer . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public short <RARE_TOKEN> ( ) throws IOException { </a> 
<a> <RARE_TOKEN> ( 2 ) ; </a> 
<a> return buffer . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public String <RARE_TOKEN> ( ) throws IOException { </a> 
<a> return <RARE_TOKEN> . <RARE_TOKEN> ( this ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int <RARE_TOKEN> ( ) throws IOException { </a> 
<a> return <RARE_TOKEN> ( ) & 0xff ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int <RARE_TOKEN> ( ) throws IOException { </a> 
<a> return <RARE_TOKEN> ( ) & <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int skipBytes ( int n ) throws IOException { </a> 
<a> int <RARE_TOKEN> = Math . min ( <RARE_TOKEN> ( ) , n ) ; </a> 
<a> buffer . skipBytes ( <RARE_TOKEN> ) ; </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( int <RARE_TOKEN> ) throws IOException { </a> 
<a> if ( <RARE_TOKEN> < 0 ) { </a> 
<a> throw new IndexOutOfBoundsException ( <RARE_TOKEN> <RARE_TOKEN> be a <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> > <RARE_TOKEN> ( ) ) { </a> 
<a> throw new <RARE_TOKEN> ( <RARE_TOKEN> is <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> is " + <RARE_TOKEN> </a> 
<a> + ", <RARE_TOKEN> <RARE_TOKEN> is " + <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . buffer ; </a> 
<a> import java . io . <RARE_TOKEN> ; </a> 
<a> import java . io . <RARE_TOKEN> ; </a> 
<a> import java . io . IOException ; </a> 
<a> import java . io . OutputStream ; </a> 
<a> public class <RARE_TOKEN> extends OutputStream implements <RARE_TOKEN> { </a> 
<a> private final ByteBuf buffer ; </a> 
<a> private final int <RARE_TOKEN> ; </a> 
<a> private final <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( this ) ; </a> 
<a> public <RARE_TOKEN> ( ByteBuf buffer ) { </a> 
<a> if ( buffer == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> this . buffer = buffer ; </a> 
<a> <RARE_TOKEN> = buffer . writerIndex ( ) ; </a> 
<a> } </a> 
<a> public int <RARE_TOKEN> ( ) { </a> 
<a> return buffer . writerIndex ( ) - <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void write ( byte [ ] b , int off , int len ) throws IOException { </a> 
<a> if ( len == 0 ) { </a> 
<a> return ; </a> 
<a> } </a> 
<a> buffer . writeBytes ( b , off , len ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void write ( byte [ ] b ) throws IOException { </a> 
<a> buffer . writeBytes ( b ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void write ( int b ) throws IOException { </a> 
<a> buffer . writeByte ( ( byte ) b ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( boolean v ) throws IOException { </a> 
<a> write ( v ? ( byte ) 1 : ( byte ) 0 ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void writeByte ( int v ) throws IOException { </a> 
<a> write ( v ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void writeBytes ( String s ) throws IOException { </a> 
<a> int len = s . length ( ) ; </a> 
<a> for ( int i = 0 ; i < len ; i ++ ) { </a> 
<a> write ( ( byte ) s . charAt ( i ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( int v ) throws IOException { </a> 
<a> <RARE_TOKEN> ( ( short ) v ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( String s ) throws IOException { </a> 
<a> int len = s . length ( ) ; </a> 
<a> for ( int i = 0 ; i < len ; i ++ ) { </a> 
<a> <RARE_TOKEN> ( s . charAt ( i ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( double v ) throws IOException { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ( v ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( float v ) throws IOException { </a> 
<a> writeInt ( <RARE_TOKEN> . <RARE_TOKEN> ( v ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void writeInt ( int v ) throws IOException { </a> 
<a> buffer . writeInt ( v ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( long v ) throws IOException { </a> 
<a> buffer . <RARE_TOKEN> ( v ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( int v ) throws IOException { </a> 
<a> buffer . <RARE_TOKEN> ( ( short ) v ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( String s ) throws IOException { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( s ) ; </a> 
<a> } </a> 
<a> public ByteBuf buffer ( ) { </a> 
<a> return buffer ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . buffer ; </a> 
<a> import io . netty . util . CharsetUtil ; </a> 
<a> import java . nio . ByteBuffer ; </a> 
<a> import java . nio . ByteOrder ; </a> 
<a> import java . nio . <RARE_TOKEN> ; </a> 
<a> import java . nio . charset . <RARE_TOKEN> ; </a> 
<a> import java . nio . charset . Charset ; </a> 
<a> import java . nio . charset . <RARE_TOKEN> ; </a> 
<a> import java . nio . charset . <RARE_TOKEN> ; </a> 
<a> import java . nio . charset . <RARE_TOKEN> ; </a> 
<a> public final class ByteBufUtil { </a> 
<a> private static final char [ ] <RARE_TOKEN> = new char [ <RARE_TOKEN> * 4 ] ; </a> 
<a> static { </a> 
<a> final char [ ] <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> for ( int i = 0 ; i < <RARE_TOKEN> ; i ++ ) { </a> 
<a> <RARE_TOKEN> [ ( i < < 1 ) + 0 ] = <RARE_TOKEN> [ i > > > 4 & <RARE_TOKEN> ] ; </a> 
<a> <RARE_TOKEN> [ ( i < < 1 ) + 1 ] = <RARE_TOKEN> [ i > > > 0 & <RARE_TOKEN> ] ; </a> 
<a> } </a> 
<a> } </a> 
<a> public static String <RARE_TOKEN> ( ByteBuf buffer ) { </a> 
<a> return <RARE_TOKEN> ( buffer , buffer . readerIndex ( ) , buffer . readableBytes ( ) ) ; </a> 
<a> } </a> 
<a> public static String <RARE_TOKEN> ( ByteBuf buffer , int fromIndex , int length ) { </a> 
<a> if ( length < 0 ) { </a> 
<a> throw new IllegalArgumentException ( <RARE_TOKEN> " + length ) ; </a> 
<a> } </a> 
<a> if ( length == 0 ) { </a> 
<a> return "" ; </a> 
<a> } </a> 
<a> int <RARE_TOKEN> = fromIndex + length ; </a> 
<a> char [ ] buf = new char [ length < < 1 ] ; </a> 
<a> int <RARE_TOKEN> = fromIndex ; </a> 
<a> int <RARE_TOKEN> = 0 ; </a> 
<a> for ( ; <RARE_TOKEN> < <RARE_TOKEN> ; <RARE_TOKEN> ++ , <RARE_TOKEN> += 2 ) { </a> 
<a> System . <RARE_TOKEN> ( </a> 
<a> <RARE_TOKEN> , buffer . <RARE_TOKEN> ( <RARE_TOKEN> ) < < 1 , </a> 
<a> buf , <RARE_TOKEN> , 2 ) ; </a> 
<a> } </a> 
<a> return new String ( buf ) ; </a> 
<a> } </a> 
<a> public static int hashCode ( ByteBuf buffer ) { </a> 
<a> final int <RARE_TOKEN> = buffer . readableBytes ( ) ; </a> 
<a> final int <RARE_TOKEN> = <RARE_TOKEN> > > > 2 ; </a> 
<a> final int <RARE_TOKEN> = <RARE_TOKEN> & 3 ; </a> 
<a> int hashCode = 1 ; </a> 
<a> int <RARE_TOKEN> = buffer . readerIndex ( ) ; </a> 
<a> if ( buffer . order ( ) == ByteOrder . <RARE_TOKEN> ) { </a> 
<a> for ( int i = <RARE_TOKEN> ; i > 0 ; i -- ) { </a> 
<a> hashCode = <RARE_TOKEN> * hashCode + buffer . getInt ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> += 4 ; </a> 
<a> } </a> 
<a> } else { </a> 
<a> for ( int i = <RARE_TOKEN> ; i > 0 ; i -- ) { </a> 
<a> hashCode = <RARE_TOKEN> * hashCode + <RARE_TOKEN> ( buffer . getInt ( <RARE_TOKEN> ) ) ; </a> 
<a> <RARE_TOKEN> += 4 ; </a> 
<a> } </a> 
<a> } </a> 
<a> for ( int i = <RARE_TOKEN> ; i > 0 ; i -- ) { </a> 
<a> hashCode = <RARE_TOKEN> * hashCode + buffer . getByte ( <RARE_TOKEN> ++ ) ; </a> 
<a> } </a> 
<a> if ( hashCode == 0 ) { </a> 
<a> hashCode = 1 ; </a> 
<a> } </a> 
<a> return hashCode ; </a> 
<a> } </a> 
<a> public static boolean equals ( ByteBuf <RARE_TOKEN> , ByteBuf <RARE_TOKEN> ) { </a> 
<a> final int <RARE_TOKEN> = <RARE_TOKEN> . readableBytes ( ) ; </a> 
<a> if ( <RARE_TOKEN> != <RARE_TOKEN> . readableBytes ( ) ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> final int <RARE_TOKEN> = <RARE_TOKEN> > > > 3 ; </a> 
<a> final int <RARE_TOKEN> = <RARE_TOKEN> & 7 ; </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> . readerIndex ( ) ; </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> . readerIndex ( ) ; </a> 
<a> if ( <RARE_TOKEN> . order ( ) == <RARE_TOKEN> . order ( ) ) { </a> 
<a> for ( int i = <RARE_TOKEN> ; i > 0 ; i -- ) { </a> 
<a> if ( <RARE_TOKEN> . getLong ( <RARE_TOKEN> ) != <RARE_TOKEN> . getLong ( <RARE_TOKEN> ) ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> += 8 ; </a> 
<a> <RARE_TOKEN> += 8 ; </a> 
<a> } </a> 
<a> } else { </a> 
<a> for ( int i = <RARE_TOKEN> ; i > 0 ; i -- ) { </a> 
<a> if ( <RARE_TOKEN> . getLong ( <RARE_TOKEN> ) != <RARE_TOKEN> ( <RARE_TOKEN> . getLong ( <RARE_TOKEN> ) ) ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> += 8 ; </a> 
<a> <RARE_TOKEN> += 8 ; </a> 
<a> } </a> 
<a> } </a> 
<a> for ( int i = <RARE_TOKEN> ; i > 0 ; i -- ) { </a> 
<a> if ( <RARE_TOKEN> . getByte ( <RARE_TOKEN> ) != <RARE_TOKEN> . getByte ( <RARE_TOKEN> ) ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> ++ ; </a> 
<a> <RARE_TOKEN> ++ ; </a> 
<a> } </a> 
<a> return true ; </a> 
<a> } </a> 
<a> public static int <RARE_TOKEN> ( ByteBuf <RARE_TOKEN> , ByteBuf <RARE_TOKEN> ) { </a> 
<a> final int <RARE_TOKEN> = <RARE_TOKEN> . readableBytes ( ) ; </a> 
<a> final int <RARE_TOKEN> = <RARE_TOKEN> . readableBytes ( ) ; </a> 
<a> final int <RARE_TOKEN> = Math . min ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> final int <RARE_TOKEN> = <RARE_TOKEN> > > > 2 ; </a> 
<a> final int <RARE_TOKEN> = <RARE_TOKEN> & 3 ; </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> . readerIndex ( ) ; </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> . readerIndex ( ) ; </a> 
<a> if ( <RARE_TOKEN> . order ( ) == <RARE_TOKEN> . order ( ) ) { </a> 
<a> for ( int i = <RARE_TOKEN> ; i > 0 ; i -- ) { </a> 
<a> long <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> long <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> > <RARE_TOKEN> ) { </a> 
<a> return 1 ; </a> 
<a> } else if ( <RARE_TOKEN> < <RARE_TOKEN> ) { </a> 
<a> return - 1 ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> += 4 ; </a> 
<a> <RARE_TOKEN> += 4 ; </a> 
<a> } </a> 
<a> } else { </a> 
<a> for ( int i = <RARE_TOKEN> ; i > 0 ; i -- ) { </a> 
<a> long <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> long <RARE_TOKEN> = <RARE_TOKEN> ( <RARE_TOKEN> . getInt ( <RARE_TOKEN> ) ) & <RARE_TOKEN> ; </a> 
<a> if ( <RARE_TOKEN> > <RARE_TOKEN> ) { </a> 
<a> return 1 ; </a> 
<a> } else if ( <RARE_TOKEN> < <RARE_TOKEN> ) { </a> 
<a> return - 1 ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> += 4 ; </a> 
<a> <RARE_TOKEN> += 4 ; </a> 
<a> } </a> 
<a> } </a> 
<a> for ( int i = <RARE_TOKEN> ; i > 0 ; i -- ) { </a> 
<a> short <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> short <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> > <RARE_TOKEN> ) { </a> 
<a> return 1 ; </a> 
<a> } else if ( <RARE_TOKEN> < <RARE_TOKEN> ) { </a> 
<a> return - 1 ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> ++ ; </a> 
<a> <RARE_TOKEN> ++ ; </a> 
<a> } </a> 
<a> return <RARE_TOKEN> - <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public static int indexOf ( ByteBuf buffer , int fromIndex , int <RARE_TOKEN> , byte value ) { </a> 
<a> if ( fromIndex <= <RARE_TOKEN> ) { </a> 
<a> return <RARE_TOKEN> ( buffer , fromIndex , <RARE_TOKEN> , value ) ; </a> 
<a> } else { </a> 
<a> return <RARE_TOKEN> ( buffer , fromIndex , <RARE_TOKEN> , value ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public static int indexOf ( ByteBuf buffer , int fromIndex , int <RARE_TOKEN> , ByteBufIndexFinder <RARE_TOKEN> ) { </a> 
<a> if ( fromIndex <= <RARE_TOKEN> ) { </a> 
<a> return <RARE_TOKEN> ( buffer , fromIndex , <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } else { </a> 
<a> return <RARE_TOKEN> ( buffer , fromIndex , <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public static short <RARE_TOKEN> ( short value ) { </a> 
<a> return ( short ) ( value < < 8 | value > > > 8 & 0xff ) ; </a> 
<a> } </a> 
<a> public static int <RARE_TOKEN> ( int value ) { </a> 
<a> int <RARE_TOKEN> = value < < 16 & <RARE_TOKEN> | value & <RARE_TOKEN> | value > > > 16 & 0xff ; </a> 
<a> if ( ( <RARE_TOKEN> & <RARE_TOKEN> ) != 0 ) { </a> 
<a> <RARE_TOKEN> |= <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public static int <RARE_TOKEN> ( int value ) { </a> 
<a> return <RARE_TOKEN> ( ( short ) value ) < < 16 | </a> 
<a> <RARE_TOKEN> ( ( short ) ( value > > > 16 ) ) & <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public static long <RARE_TOKEN> ( long value ) { </a> 
<a> return ( long ) <RARE_TOKEN> ( ( int ) value ) < < 32 | </a> 
<a> <RARE_TOKEN> ( ( int ) ( value > > > 32 ) ) & <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> private static int <RARE_TOKEN> ( ByteBuf buffer , int fromIndex , int <RARE_TOKEN> , byte value ) { </a> 
<a> fromIndex = Math . <RARE_TOKEN> ( fromIndex , 0 ) ; </a> 
<a> if ( fromIndex >= <RARE_TOKEN> || buffer . capacity ( ) == 0 ) { </a> 
<a> return - 1 ; </a> 
<a> } </a> 
<a> for ( int i = fromIndex ; i < <RARE_TOKEN> ; i ++ ) { </a> 
<a> if ( buffer . getByte ( i ) == value ) { </a> 
<a> return i ; </a> 
<a> } </a> 
<a> } </a> 
<a> return - 1 ; </a> 
<a> } </a> 
<a> private static int <RARE_TOKEN> ( ByteBuf buffer , int fromIndex , int <RARE_TOKEN> , byte value ) { </a> 
<a> fromIndex = Math . min ( fromIndex , buffer . capacity ( ) ) ; </a> 
<a> if ( fromIndex < 0 || buffer . capacity ( ) == 0 ) { </a> 
<a> return - 1 ; </a> 
<a> } </a> 
<a> for ( int i = fromIndex - 1 ; i >= <RARE_TOKEN> ; i -- ) { </a> 
<a> if ( buffer . getByte ( i ) == value ) { </a> 
<a> return i ; </a> 
<a> } </a> 
<a> } </a> 
<a> return - 1 ; </a> 
<a> } </a> 
<a> private static int <RARE_TOKEN> ( </a> 
<a> ByteBuf buffer , int fromIndex , int <RARE_TOKEN> , ByteBufIndexFinder <RARE_TOKEN> ) { </a> 
<a> fromIndex = Math . <RARE_TOKEN> ( fromIndex , 0 ) ; </a> 
<a> if ( fromIndex >= <RARE_TOKEN> || buffer . capacity ( ) == 0 ) { </a> 
<a> return - 1 ; </a> 
<a> } </a> 
<a> for ( int i = fromIndex ; i < <RARE_TOKEN> ; i ++ ) { </a> 
<a> if ( <RARE_TOKEN> . <RARE_TOKEN> ( buffer , i ) ) { </a> 
<a> return i ; </a> 
<a> } </a> 
<a> } </a> 
<a> return - 1 ; </a> 
<a> } </a> 
<a> private static int <RARE_TOKEN> ( </a> 
<a> ByteBuf buffer , int fromIndex , int <RARE_TOKEN> , ByteBufIndexFinder <RARE_TOKEN> ) { </a> 
<a> fromIndex = Math . min ( fromIndex , buffer . capacity ( ) ) ; </a> 
<a> if ( fromIndex < 0 || buffer . capacity ( ) == 0 ) { </a> 
<a> return - 1 ; </a> 
<a> } </a> 
<a> for ( int i = fromIndex - 1 ; i >= <RARE_TOKEN> ; i -- ) { </a> 
<a> if ( <RARE_TOKEN> . <RARE_TOKEN> ( buffer , i ) ) { </a> 
<a> return i ; </a> 
<a> } </a> 
<a> } </a> 
<a> return - 1 ; </a> 
<a> } </a> 
<a> static ByteBuffer <RARE_TOKEN> ( <RARE_TOKEN> src , Charset charset ) { </a> 
<a> final <RARE_TOKEN> <RARE_TOKEN> = CharsetUtil . <RARE_TOKEN> ( charset ) ; </a> 
<a> final ByteBuffer dst = ByteBuffer . <RARE_TOKEN> ( </a> 
<a> ( int ) ( ( double ) src . <RARE_TOKEN> ( ) * <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ) ; </a> 
<a> try { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = <RARE_TOKEN> . encode ( src , dst , true ) ; </a> 
<a> if ( ! <RARE_TOKEN> . <RARE_TOKEN> ( ) ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . flush ( dst ) ; </a> 
<a> if ( ! <RARE_TOKEN> . <RARE_TOKEN> ( ) ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } catch ( <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> throw new IllegalStateException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> dst . <RARE_TOKEN> ( ) ; </a> 
<a> return dst ; </a> 
<a> } </a> 
<a> static String <RARE_TOKEN> ( ByteBuffer src , Charset charset ) { </a> 
<a> final <RARE_TOKEN> <RARE_TOKEN> = CharsetUtil . <RARE_TOKEN> ( charset ) ; </a> 
<a> final <RARE_TOKEN> dst = <RARE_TOKEN> . <RARE_TOKEN> ( </a> 
<a> ( int ) ( ( double ) src . <RARE_TOKEN> ( ) * <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ) ; </a> 
<a> try { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = <RARE_TOKEN> . decode ( src , dst , true ) ; </a> 
<a> if ( ! <RARE_TOKEN> . <RARE_TOKEN> ( ) ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . flush ( dst ) ; </a> 
<a> if ( ! <RARE_TOKEN> . <RARE_TOKEN> ( ) ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } catch ( <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> throw new IllegalStateException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> return dst . <RARE_TOKEN> ( ) . toString ( ) ; </a> 
<a> } </a> 
<a> private ByteBufUtil ( ) { } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . buffer ; </a> 
<a> public interface <RARE_TOKEN> { </a> 
<a> ChannelBufType type ( ) ; </a> 
<a> boolean <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . buffer ; </a> 
<a> public enum ChannelBufType { </a> 
<a> <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . buffer ; </a> 
<a> import java . util . List ; </a> 
<a> public interface <RARE_TOKEN> extends ByteBuf , <RARE_TOKEN> < ByteBuf > { </a> 
<a> void <RARE_TOKEN> ( ByteBuf buffer ) ; </a> 
<a> void <RARE_TOKEN> ( int cIndex , ByteBuf buffer ) ; </a> 
<a> void <RARE_TOKEN> ( ByteBuf ... buffers ) ; </a> 
<a> void <RARE_TOKEN> ( <RARE_TOKEN> < ByteBuf > buffers ) ; </a> 
<a> void <RARE_TOKEN> ( int cIndex , ByteBuf ... buffers ) ; </a> 
<a> void <RARE_TOKEN> ( int cIndex , <RARE_TOKEN> < ByteBuf > buffers ) ; </a> 
<a> void <RARE_TOKEN> ( int cIndex ) ; </a> 
<a> void <RARE_TOKEN> ( int cIndex , int <RARE_TOKEN> ) ; </a> 
<a> int <RARE_TOKEN> ( ) ; </a> 
<a> int <RARE_TOKEN> ( ) ; </a> 
<a> ByteBuf <RARE_TOKEN> ( int cIndex ) ; </a> 
<a> ByteBuf <RARE_TOKEN> ( int offset ) ; </a> 
<a> void <RARE_TOKEN> ( ) ; </a> 
<a> void <RARE_TOKEN> ( ) ; </a> 
<a> void <RARE_TOKEN> ( int cIndex , int <RARE_TOKEN> ) ; </a> 
<a> int <RARE_TOKEN> ( int offset ) ; </a> 
<a> int <RARE_TOKEN> ( int cIndex ) ; </a> 
<a> List < ByteBuf > <RARE_TOKEN> ( int offset , int length ) ; </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . buffer ; </a> 
<a> import io . netty . util . internal . <RARE_TOKEN> ; </a> 
<a> import java . io . IOException ; </a> 
<a> import java . io . InputStream ; </a> 
<a> import java . io . OutputStream ; </a> 
<a> import java . nio . ByteBuffer ; </a> 
<a> import java . nio . ByteOrder ; </a> 
<a> import java . nio . channels . <RARE_TOKEN> ; </a> 
<a> import java . nio . channels . <RARE_TOKEN> ; </a> 
<a> import java . util . ArrayList ; </a> 
<a> import java . util . Collection ; </a> 
<a> import java . util . Collections ; </a> 
<a> import java . util . Iterator ; </a> 
<a> import java . util . List ; </a> 
<a> import java . util . <RARE_TOKEN> ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> implements <RARE_TOKEN> { </a> 
<a> private final List < Component > components = new ArrayList < Component > ( ) ; </a> 
<a> private final int <RARE_TOKEN> ; </a> 
<a> private final <RARE_TOKEN> unsafe = new <RARE_TOKEN> ( ) ; </a> 
<a> private Component <RARE_TOKEN> ; </a> 
<a> private int <RARE_TOKEN> ; </a> 
<a> public <RARE_TOKEN> ( int <RARE_TOKEN> ) { </a> 
<a> super ( ByteOrder . <RARE_TOKEN> , Integer . MAX_VALUE ) ; </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( int <RARE_TOKEN> , ByteBuf ... buffers ) { </a> 
<a> super ( ByteOrder . <RARE_TOKEN> , Integer . MAX_VALUE ) ; </a> 
<a> if ( <RARE_TOKEN> < 2 ) { </a> 
<a> throw new IllegalArgumentException ( </a> 
<a> <RARE_TOKEN> " + <RARE_TOKEN> + " (expected: >= <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> ( 0 , buffers ) ; </a> 
<a> <RARE_TOKEN> ( 0 , capacity ( ) ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( int <RARE_TOKEN> , <RARE_TOKEN> < ByteBuf > buffers ) { </a> 
<a> super ( ByteOrder . <RARE_TOKEN> , Integer . MAX_VALUE ) ; </a> 
<a> if ( <RARE_TOKEN> < 2 ) { </a> 
<a> throw new IllegalArgumentException ( </a> 
<a> <RARE_TOKEN> " + <RARE_TOKEN> + " (expected: >= <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> ( 0 , buffers ) ; </a> 
<a> <RARE_TOKEN> ( 0 , capacity ( ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ByteBuf buffer ) { </a> 
<a> <RARE_TOKEN> ( components . size ( ) , buffer ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ByteBuf ... buffers ) { </a> 
<a> <RARE_TOKEN> ( components . size ( ) , buffers ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( <RARE_TOKEN> < ByteBuf > buffers ) { </a> 
<a> <RARE_TOKEN> ( components . size ( ) , buffers ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( int cIndex , ByteBuf buffer ) { </a> 
<a> <RARE_TOKEN> ( cIndex ) ; </a> 
<a> if ( buffer == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( buffer instanceof <RARE_TOKEN> ) { </a> 
<a> @ SuppressWarnings ( "unchecked" ) </a> 
<a> <RARE_TOKEN> < ByteBuf > <RARE_TOKEN> = ( <RARE_TOKEN> < ByteBuf > ) buffer ; </a> 
<a> <RARE_TOKEN> ( cIndex , <RARE_TOKEN> ) ; </a> 
<a> return ; </a> 
<a> } </a> 
<a> int readableBytes = buffer . readableBytes ( ) ; </a> 
<a> if ( readableBytes == 0 ) { </a> 
<a> return ; </a> 
<a> } </a> 
<a> final int <RARE_TOKEN> = components . size ( ) ; </a> 
<a> if ( <RARE_TOKEN> >= <RARE_TOKEN> ) { </a> 
<a> final int capacity = components . get ( <RARE_TOKEN> - 1 ) . endOffset + readableBytes ; </a> 
<a> ByteBuf <RARE_TOKEN> = buffer . unsafe ( ) . <RARE_TOKEN> ( capacity ) ; </a> 
<a> for ( int i = 0 ; i < <RARE_TOKEN> ; i ++ ) { </a> 
<a> ByteBuf b = components . get ( i ) . buf ; </a> 
<a> <RARE_TOKEN> . writeBytes ( b ) ; </a> 
<a> b . unsafe ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> . writeBytes ( buffer , buffer . readerIndex ( ) , readableBytes ) ; </a> 
<a> Component c = new Component ( <RARE_TOKEN> ) ; </a> 
<a> c . endOffset = c . length ; </a> 
<a> components . clear ( ) ; </a> 
<a> components . add ( c ) ; </a> 
<a> return ; </a> 
<a> } </a> 
<a> Component c = new Component ( buffer . order ( ByteOrder . <RARE_TOKEN> ) . slice ( ) ) ; </a> 
<a> if ( cIndex == components . size ( ) ) { </a> 
<a> components . add ( c ) ; </a> 
<a> if ( cIndex == 0 ) { </a> 
<a> c . endOffset = readableBytes ; </a> 
<a> } else { </a> 
<a> Component prev = components . get ( cIndex - 1 ) ; </a> 
<a> c . offset = prev . endOffset ; </a> 
<a> c . endOffset = c . offset + readableBytes ; </a> 
<a> } </a> 
<a> } else { </a> 
<a> components . add ( cIndex , c ) ; </a> 
<a> <RARE_TOKEN> ( cIndex ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( int cIndex , ByteBuf ... buffers ) { </a> 
<a> <RARE_TOKEN> ( cIndex ) ; </a> 
<a> if ( buffers == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> ByteBuf <RARE_TOKEN> = null ; </a> 
<a> int <RARE_TOKEN> = 0 ; </a> 
<a> int readableBytes = 0 ; </a> 
<a> for ( ByteBuf b : buffers ) { </a> 
<a> if ( b == null ) { </a> 
<a> break ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> = b ; </a> 
<a> <RARE_TOKEN> ++ ; </a> 
<a> readableBytes += b . readableBytes ( ) ; </a> 
<a> } </a> 
<a> if ( readableBytes == 0 ) { </a> 
<a> return ; </a> 
<a> } </a> 
<a> final int <RARE_TOKEN> = components . size ( ) ; </a> 
<a> if ( <RARE_TOKEN> + <RARE_TOKEN> > <RARE_TOKEN> ) { </a> 
<a> final ByteBuf <RARE_TOKEN> ; </a> 
<a> if ( <RARE_TOKEN> != 0 ) { </a> 
<a> final int capacity = components . get ( <RARE_TOKEN> - 1 ) . endOffset + readableBytes ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . unsafe ( ) . <RARE_TOKEN> ( capacity ) ; </a> 
<a> for ( int i = 0 ; i < cIndex ; i ++ ) { </a> 
<a> ByteBuf b = components . get ( i ) . buf ; </a> 
<a> <RARE_TOKEN> . writeBytes ( b ) ; </a> 
<a> b . unsafe ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> for ( ByteBuf b : buffers ) { </a> 
<a> if ( b == null ) { </a> 
<a> break ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> . writeBytes ( b , b . readerIndex ( ) , b . readableBytes ( ) ) ; </a> 
<a> } </a> 
<a> for ( int i = cIndex ; i < <RARE_TOKEN> ; i ++ ) { </a> 
<a> ByteBuf b = components . get ( i ) . buf ; </a> 
<a> <RARE_TOKEN> . writeBytes ( b ) ; </a> 
<a> b . unsafe ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . unsafe ( ) . <RARE_TOKEN> ( readableBytes ) ; </a> 
<a> for ( ByteBuf b : buffers ) { </a> 
<a> if ( b == null ) { </a> 
<a> break ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> . writeBytes ( b , b . readerIndex ( ) , b . readableBytes ( ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> Component c = new Component ( <RARE_TOKEN> ) ; </a> 
<a> c . endOffset = c . length ; </a> 
<a> components . clear ( ) ; </a> 
<a> components . add ( c ) ; </a> 
<a> <RARE_TOKEN> ( 0 ) ; </a> 
<a> return ; </a> 
<a> } </a> 
<a> for ( ByteBuf b : buffers ) { </a> 
<a> if ( b == null ) { </a> 
<a> break ; </a> 
<a> } </a> 
<a> if ( b . readable ( ) ) { </a> 
<a> <RARE_TOKEN> ( cIndex ++ , b ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( int cIndex , <RARE_TOKEN> < ByteBuf > buffers ) { </a> 
<a> if ( buffers == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( buffers instanceof <RARE_TOKEN> ) { </a> 
<a> List < Component > list = ( ( <RARE_TOKEN> ) buffers ) . components ; </a> 
<a> ByteBuf [ ] array = new ByteBuf [ list . size ( ) ] ; </a> 
<a> for ( int i = 0 ; i < array . length ; i ++ ) { </a> 
<a> array [ i ] = list . get ( i ) . buf ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( cIndex , array ) ; </a> 
<a> return ; </a> 
<a> } </a> 
<a> if ( buffers instanceof List ) { </a> 
<a> List < ByteBuf > list = ( List < ByteBuf > ) buffers ; </a> 
<a> ByteBuf [ ] array = new ByteBuf [ list . size ( ) ] ; </a> 
<a> for ( int i = 0 ; i < array . length ; i ++ ) { </a> 
<a> array [ i ] = list . get ( i ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( cIndex , array ) ; </a> 
<a> return ; </a> 
<a> } </a> 
<a> if ( buffers instanceof Collection ) { </a> 
<a> Collection < ByteBuf > <RARE_TOKEN> = ( Collection < ByteBuf > ) buffers ; </a> 
<a> ByteBuf [ ] array = new ByteBuf [ <RARE_TOKEN> . size ( ) ] ; </a> 
<a> int i = 0 ; </a> 
<a> for ( ByteBuf b : <RARE_TOKEN> ) { </a> 
<a> array [ i ++ ] = b ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( cIndex , array ) ; </a> 
<a> return ; </a> 
<a> } </a> 
<a> List < ByteBuf > list = new ArrayList < ByteBuf > ( ) ; </a> 
<a> for ( ByteBuf b : buffers ) { </a> 
<a> list . add ( b ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( cIndex , list . <RARE_TOKEN> ( new ByteBuf [ list . size ( ) ] ) ) ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( int cIndex ) { </a> 
<a> if ( cIndex < 0 || cIndex > components . size ( ) ) { </a> 
<a> throw new IndexOutOfBoundsException ( String . format ( </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> (expected: >= 0 && <= <RARE_TOKEN> , </a> 
<a> cIndex , components . size ( ) ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( int cIndex , int <RARE_TOKEN> ) { </a> 
<a> if ( cIndex < 0 || cIndex + <RARE_TOKEN> > components . size ( ) ) { </a> 
<a> throw new IndexOutOfBoundsException ( String . format ( </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> " + </a> 
<a> <RARE_TOKEN> cIndex >= 0 && cIndex + <RARE_TOKEN> <= <RARE_TOKEN> , </a> 
<a> cIndex , <RARE_TOKEN> , components . size ( ) ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( int cIndex ) { </a> 
<a> Component c = components . get ( cIndex ) ; </a> 
<a> <RARE_TOKEN> = c ; </a> 
<a> <RARE_TOKEN> = cIndex ; </a> 
<a> if ( cIndex == 0 ) { </a> 
<a> c . offset = 0 ; </a> 
<a> c . endOffset = c . length ; </a> 
<a> cIndex ++ ; </a> 
<a> } </a> 
<a> for ( int i = cIndex ; i < components . size ( ) ; i ++ ) { </a> 
<a> Component prev = components . get ( i - 1 ) ; </a> 
<a> Component <RARE_TOKEN> = components . get ( i ) ; </a> 
<a> <RARE_TOKEN> . offset = prev . endOffset ; </a> 
<a> <RARE_TOKEN> . endOffset = <RARE_TOKEN> . offset + <RARE_TOKEN> . length ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( int cIndex ) { </a> 
<a> <RARE_TOKEN> ( cIndex ) ; </a> 
<a> components . remove ( cIndex ) ; </a> 
<a> <RARE_TOKEN> ( cIndex ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( int cIndex , int <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( cIndex , <RARE_TOKEN> ) ; </a> 
<a> components . <RARE_TOKEN> ( cIndex , cIndex + <RARE_TOKEN> ) . clear ( ) ; </a> 
<a> <RARE_TOKEN> ( cIndex ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public Iterator < ByteBuf > <RARE_TOKEN> ( ) { </a> 
<a> List < ByteBuf > list = new ArrayList < ByteBuf > ( components . size ( ) ) ; </a> 
<a> for ( Component c : components ) { </a> 
<a> list . add ( c . buf ) ; </a> 
<a> } </a> 
<a> return list . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public List < ByteBuf > <RARE_TOKEN> ( int offset , int length ) { </a> 
<a> if ( length == 0 ) { </a> 
<a> return Collections . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> if ( offset + length > capacity ( ) ) { </a> 
<a> throw new IndexOutOfBoundsException ( <RARE_TOKEN> <RARE_TOKEN> bytes to <RARE_TOKEN> - <RARE_TOKEN> " </a> 
<a> + ( offset + length ) + ", capacity is " + capacity ( ) ) ; </a> 
<a> } </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> ( offset ) ; </a> 
<a> List < ByteBuf > slice = new ArrayList < ByteBuf > ( components . size ( ) ) ; </a> 
<a> Component <RARE_TOKEN> = components . get ( <RARE_TOKEN> ) ; </a> 
<a> ByteBuf <RARE_TOKEN> = <RARE_TOKEN> . buf . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> . readerIndex ( offset - <RARE_TOKEN> . offset ) ; </a> 
<a> ByteBuf buf = <RARE_TOKEN> ; </a> 
<a> int <RARE_TOKEN> = length ; </a> 
<a> <RARE_TOKEN> { </a> 
<a> int readableBytes = buf . readableBytes ( ) ; </a> 
<a> if ( <RARE_TOKEN> <= readableBytes ) { </a> 
<a> buf . writerIndex ( buf . readerIndex ( ) + <RARE_TOKEN> ) ; </a> 
<a> slice . add ( buf ) ; </a> 
<a> break ; </a> 
<a> } else { </a> 
<a> slice . add ( buf ) ; </a> 
<a> <RARE_TOKEN> -= readableBytes ; </a> 
<a> <RARE_TOKEN> ++ ; </a> 
<a> buf = components . get ( <RARE_TOKEN> ) . buf . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } while ( <RARE_TOKEN> > 0 ) ; </a> 
<a> for ( int i = 0 ; i < slice . size ( ) ; i ++ ) { </a> 
<a> slice . set ( i , slice . get ( i ) . slice ( ) ) ; </a> 
<a> } </a> 
<a> return slice ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> if ( components . size ( ) == 1 ) { </a> 
<a> return components . get ( 0 ) . buf . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> return false ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> if ( components . size ( ) == 1 ) { </a> 
<a> return components . get ( 0 ) . buf . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> return false ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public byte [ ] array ( ) { </a> 
<a> if ( components . size ( ) == 1 ) { </a> 
<a> return components . get ( 0 ) . buf . array ( ) ; </a> 
<a> } </a> 
<a> throw new UnsupportedOperationException ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int <RARE_TOKEN> ( ) { </a> 
<a> if ( components . size ( ) == 1 ) { </a> 
<a> return components . get ( 0 ) . buf . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> throw new UnsupportedOperationException ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int capacity ( ) { </a> 
<a> if ( components . isEmpty ( ) ) { </a> 
<a> return 0 ; </a> 
<a> } </a> 
<a> return components . get ( components . size ( ) - 1 ) . endOffset ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void capacity ( int newCapacity ) { </a> 
<a> if ( newCapacity < 0 || newCapacity > maxCapacity ( ) ) { </a> 
<a> throw new IllegalArgumentException ( <RARE_TOKEN> " + newCapacity ) ; </a> 
<a> } </a> 
<a> int <RARE_TOKEN> = capacity ( ) ; </a> 
<a> if ( newCapacity > <RARE_TOKEN> ) { </a> 
<a> final int <RARE_TOKEN> = newCapacity - <RARE_TOKEN> ; </a> 
<a> ByteBuf <RARE_TOKEN> ; </a> 
<a> if ( components . isEmpty ( ) ) { </a> 
<a> <RARE_TOKEN> = new <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } else { </a> 
<a> Component last = components . get ( components . size ( ) - 1 ) ; </a> 
<a> <RARE_TOKEN> = last . buf . unsafe ( ) . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( 0 , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } else if ( newCapacity < <RARE_TOKEN> ) { </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> - newCapacity ; </a> 
<a> for ( <RARE_TOKEN> < Component > i = components . <RARE_TOKEN> ( components . size ( ) ) ; i . <RARE_TOKEN> ( ) ; ) { </a> 
<a> Component c = i . <RARE_TOKEN> ( ) ; </a> 
<a> if ( <RARE_TOKEN> >= c . length ) { </a> 
<a> <RARE_TOKEN> -= c . length ; </a> 
<a> i . remove ( ) ; </a> 
<a> continue ; </a> 
<a> } </a> 
<a> Component <RARE_TOKEN> = new Component ( c . buf . slice ( 0 , c . length - <RARE_TOKEN> ) ) ; </a> 
<a> <RARE_TOKEN> . offset = c . offset ; </a> 
<a> <RARE_TOKEN> . endOffset = <RARE_TOKEN> . offset + <RARE_TOKEN> . length ; </a> 
<a> c . buf . unsafe ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> i . set ( <RARE_TOKEN> ) ; </a> 
<a> break ; </a> 
<a> } </a> 
<a> if ( readerIndex ( ) > newCapacity ) { </a> 
<a> <RARE_TOKEN> ( newCapacity , newCapacity ) ; </a> 
<a> } else if ( writerIndex ( ) > newCapacity ) { </a> 
<a> writerIndex ( newCapacity ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int <RARE_TOKEN> ( ) { </a> 
<a> return components . size ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int <RARE_TOKEN> ( int offset ) { </a> 
<a> if ( offset < 0 || offset >= capacity ( ) ) { </a> 
<a> throw new IndexOutOfBoundsException ( String . format ( </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> (expected: >= 0 && < <RARE_TOKEN> , offset , capacity ( ) ) ) ; </a> 
<a> } </a> 
<a> Component c = <RARE_TOKEN> ; </a> 
<a> if ( c == null ) { </a> 
<a> <RARE_TOKEN> = c = components . get ( 0 ) ; </a> 
<a> } </a> 
<a> if ( offset >= c . offset ) { </a> 
<a> if ( offset < c . endOffset ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> for ( int i = <RARE_TOKEN> + 1 ; i < components . size ( ) ; i ++ ) { </a> 
<a> c = components . get ( i ) ; </a> 
<a> if ( offset < c . endOffset ) { </a> 
<a> <RARE_TOKEN> = i ; </a> 
<a> <RARE_TOKEN> = c ; </a> 
<a> return i ; </a> 
<a> } </a> 
<a> } </a> 
<a> } else { </a> 
<a> for ( int i = <RARE_TOKEN> - 1 ; i >= 0 ; i -- ) { </a> 
<a> c = components . get ( i ) ; </a> 
<a> if ( offset >= c . offset ) { </a> 
<a> <RARE_TOKEN> = i ; </a> 
<a> <RARE_TOKEN> = c ; </a> 
<a> return i ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> throw new IllegalStateException ( <RARE_TOKEN> not <RARE_TOKEN> <RARE_TOKEN> - concurrent <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int <RARE_TOKEN> ( int cIndex ) { </a> 
<a> <RARE_TOKEN> ( cIndex ) ; </a> 
<a> return components . get ( cIndex ) . offset ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public byte getByte ( int index ) { </a> 
<a> Component c = <RARE_TOKEN> ( index ) ; </a> 
<a> return c . buf . getByte ( index - c . offset ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public short <RARE_TOKEN> ( int index ) { </a> 
<a> Component c = <RARE_TOKEN> ( index ) ; </a> 
<a> if ( index + 2 <= c . endOffset ) { </a> 
<a> return c . buf . <RARE_TOKEN> ( index - c . offset ) ; </a> 
<a> } else if ( order ( ) == ByteOrder . <RARE_TOKEN> ) { </a> 
<a> return ( short ) ( ( getByte ( index ) & 0xff ) < < 8 | getByte ( index + 1 ) & 0xff ) ; </a> 
<a> } else { </a> 
<a> return ( short ) ( getByte ( index ) & 0xff | ( getByte ( index + 1 ) & 0xff ) < < 8 ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int <RARE_TOKEN> ( int index ) { </a> 
<a> Component c = <RARE_TOKEN> ( index ) ; </a> 
<a> if ( index + 3 <= c . endOffset ) { </a> 
<a> return c . buf . <RARE_TOKEN> ( index - c . offset ) ; </a> 
<a> } else if ( order ( ) == ByteOrder . <RARE_TOKEN> ) { </a> 
<a> return ( <RARE_TOKEN> ( index ) & <RARE_TOKEN> ) < < 8 | getByte ( index + 2 ) & 0xff ; </a> 
<a> } else { </a> 
<a> return <RARE_TOKEN> ( index ) & <RARE_TOKEN> | ( getByte ( index + 2 ) & 0xFF ) < < 16 ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int getInt ( int index ) { </a> 
<a> Component c = <RARE_TOKEN> ( index ) ; </a> 
<a> if ( index + 4 <= c . endOffset ) { </a> 
<a> return c . buf . getInt ( index - c . offset ) ; </a> 
<a> } else if ( order ( ) == ByteOrder . <RARE_TOKEN> ) { </a> 
<a> return ( <RARE_TOKEN> ( index ) & <RARE_TOKEN> ) < < 16 | <RARE_TOKEN> ( index + 2 ) & <RARE_TOKEN> ; </a> 
<a> } else { </a> 
<a> return <RARE_TOKEN> ( index ) & <RARE_TOKEN> | ( <RARE_TOKEN> ( index + 2 ) & <RARE_TOKEN> ) < < 16 ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public long getLong ( int index ) { </a> 
<a> Component c = <RARE_TOKEN> ( index ) ; </a> 
<a> if ( index + 8 <= c . endOffset ) { </a> 
<a> return c . buf . getLong ( index - c . offset ) ; </a> 
<a> } else if ( order ( ) == ByteOrder . <RARE_TOKEN> ) { </a> 
<a> return ( getInt ( index ) & <RARE_TOKEN> ) < < 32 | getInt ( index + 4 ) & <RARE_TOKEN> ; </a> 
<a> } else { </a> 
<a> return getInt ( index ) & <RARE_TOKEN> | ( getInt ( index + 4 ) & <RARE_TOKEN> ) < < 32 ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void getBytes ( int index , byte [ ] dst , int dstIndex , int length ) { </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> ( index ) ; </a> 
<a> if ( index > capacity ( ) - length || dstIndex > dst . length - length ) { </a> 
<a> throw new IndexOutOfBoundsException ( <RARE_TOKEN> <RARE_TOKEN> bytes to read - <RARE_TOKEN> " </a> 
<a> + ( index + length ) + ", <RARE_TOKEN> is " + capacity ( ) + " or " </a> 
<a> + dst . length ) ; </a> 
<a> } </a> 
<a> int i = <RARE_TOKEN> ; </a> 
<a> while ( length > 0 ) { </a> 
<a> Component c = components . get ( i ) ; </a> 
<a> ByteBuf s = c . buf ; </a> 
<a> int adjustment = c . offset ; </a> 
<a> int localLength = Math . min ( length , s . capacity ( ) - ( index - adjustment ) ) ; </a> 
<a> s . getBytes ( index - adjustment , dst , dstIndex , localLength ) ; </a> 
<a> index += localLength ; </a> 
<a> dstIndex += localLength ; </a> 
<a> length -= localLength ; </a> 
<a> i ++ ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void getBytes ( int index , ByteBuffer dst ) { </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> ( index ) ; </a> 
<a> int limit = dst . limit ( ) ; </a> 
<a> int length = dst . <RARE_TOKEN> ( ) ; </a> 
<a> if ( index > capacity ( ) - length ) { </a> 
<a> throw new IndexOutOfBoundsException ( <RARE_TOKEN> <RARE_TOKEN> bytes to be read - <RARE_TOKEN> " </a> 
<a> + ( index + length ) + ", <RARE_TOKEN> is " + capacity ( ) ) ; </a> 
<a> } </a> 
<a> int i = <RARE_TOKEN> ; </a> 
<a> try { </a> 
<a> while ( length > 0 ) { </a> 
<a> Component c = components . get ( i ) ; </a> 
<a> ByteBuf s = c . buf ; </a> 
<a> int adjustment = c . offset ; </a> 
<a> int localLength = Math . min ( length , s . capacity ( ) - ( index - adjustment ) ) ; </a> 
<a> dst . limit ( dst . position ( ) + localLength ) ; </a> 
<a> s . getBytes ( index - adjustment , dst ) ; </a> 
<a> index += localLength ; </a> 
<a> length -= localLength ; </a> 
<a> i ++ ; </a> 
<a> } </a> 
<a> } finally { </a> 
<a> dst . limit ( limit ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void getBytes ( int index , ByteBuf dst , int dstIndex , int length ) { </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> ( index ) ; </a> 
<a> if ( index > capacity ( ) - length || dstIndex > dst . capacity ( ) - length ) { </a> 
<a> throw new IndexOutOfBoundsException ( <RARE_TOKEN> <RARE_TOKEN> bytes to be read - <RARE_TOKEN> " </a> 
<a> + ( index + length ) + " or " + ( dstIndex + length ) + ", <RARE_TOKEN> is " </a> 
<a> + capacity ( ) + " or " + dst . capacity ( ) ) ; </a> 
<a> } </a> 
<a> int i = <RARE_TOKEN> ; </a> 
<a> while ( length > 0 ) { </a> 
<a> Component c = components . get ( i ) ; </a> 
<a> ByteBuf s = c . buf ; </a> 
<a> int adjustment = c . offset ; </a> 
<a> int localLength = Math . min ( length , s . capacity ( ) - ( index - adjustment ) ) ; </a> 
<a> s . getBytes ( index - adjustment , dst , dstIndex , localLength ) ; </a> 
<a> index += localLength ; </a> 
<a> dstIndex += localLength ; </a> 
<a> length -= localLength ; </a> 
<a> i ++ ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int getBytes ( int index , <RARE_TOKEN> out , int length ) </a> 
<a> throws IOException { </a> 
<a> if ( <RARE_TOKEN> . <RARE_TOKEN> ( ) < 7 ) { </a> 
<a> return out . write ( <RARE_TOKEN> ( index , length ) ) ; </a> 
<a> } else { </a> 
<a> long <RARE_TOKEN> = out . write ( nioBuffers ( index , length ) ) ; </a> 
<a> if ( <RARE_TOKEN> > Integer . MAX_VALUE ) { </a> 
<a> return Integer . MAX_VALUE ; </a> 
<a> } else { </a> 
<a> return ( int ) <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void getBytes ( int index , OutputStream out , int length ) </a> 
<a> throws IOException { </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> ( index ) ; </a> 
<a> if ( index > capacity ( ) - length ) { </a> 
<a> throw new IndexOutOfBoundsException ( <RARE_TOKEN> <RARE_TOKEN> bytes to be read - <RARE_TOKEN> " </a> 
<a> + ( index + length ) + ", <RARE_TOKEN> of " + capacity ( ) ) ; </a> 
<a> } </a> 
<a> int i = <RARE_TOKEN> ; </a> 
<a> while ( length > 0 ) { </a> 
<a> Component c = components . get ( i ) ; </a> 
<a> ByteBuf s = c . buf ; </a> 
<a> int adjustment = c . offset ; </a> 
<a> int localLength = Math . min ( length , s . capacity ( ) - ( index - adjustment ) ) ; </a> 
<a> s . getBytes ( index - adjustment , out , localLength ) ; </a> 
<a> index += localLength ; </a> 
<a> length -= localLength ; </a> 
<a> i ++ ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void setByte ( int index , int value ) { </a> 
<a> Component c = <RARE_TOKEN> ( index ) ; </a> 
<a> c . buf . setByte ( index - c . offset , value ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( int index , int value ) { </a> 
<a> Component c = <RARE_TOKEN> ( index ) ; </a> 
<a> if ( index + 2 <= c . endOffset ) { </a> 
<a> c . buf . <RARE_TOKEN> ( index - c . offset , value ) ; </a> 
<a> } else if ( order ( ) == ByteOrder . <RARE_TOKEN> ) { </a> 
<a> setByte ( index , ( byte ) ( value > > > 8 ) ) ; </a> 
<a> setByte ( index + 1 , ( byte ) value ) ; </a> 
<a> } else { </a> 
<a> setByte ( index , ( byte ) value ) ; </a> 
<a> setByte ( index + 1 , ( byte ) ( value > > > 8 ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( int index , int value ) { </a> 
<a> Component c = <RARE_TOKEN> ( index ) ; </a> 
<a> if ( index + 3 <= c . endOffset ) { </a> 
<a> c . buf . <RARE_TOKEN> ( index - c . offset , value ) ; </a> 
<a> } else if ( order ( ) == ByteOrder . <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( index , ( short ) ( value > > 8 ) ) ; </a> 
<a> setByte ( index + 2 , ( byte ) value ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> ( index , ( short ) value ) ; </a> 
<a> setByte ( index + 2 , ( byte ) ( value > > > 16 ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( int index , int value ) { </a> 
<a> Component c = <RARE_TOKEN> ( index ) ; </a> 
<a> if ( index + 4 <= c . endOffset ) { </a> 
<a> c . buf . <RARE_TOKEN> ( index - c . offset , value ) ; </a> 
<a> } else if ( order ( ) == ByteOrder . <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( index , ( short ) ( value > > > 16 ) ) ; </a> 
<a> <RARE_TOKEN> ( index + 2 , ( short ) value ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> ( index , ( short ) value ) ; </a> 
<a> <RARE_TOKEN> ( index + 2 , ( short ) ( value > > > 16 ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( int index , long value ) { </a> 
<a> Component c = <RARE_TOKEN> ( index ) ; </a> 
<a> if ( index + 8 <= c . endOffset ) { </a> 
<a> c . buf . <RARE_TOKEN> ( index - c . offset , value ) ; </a> 
<a> } else if ( order ( ) == ByteOrder . <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( index , ( int ) ( value > > > 32 ) ) ; </a> 
<a> <RARE_TOKEN> ( index + 4 , ( int ) value ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> ( index , ( int ) value ) ; </a> 
<a> <RARE_TOKEN> ( index + 4 , ( int ) ( value > > > 32 ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void setBytes ( int index , byte [ ] src , int srcIndex , int length ) { </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> ( index ) ; </a> 
<a> if ( index > capacity ( ) - length || srcIndex > src . length - length ) { </a> 
<a> throw new IndexOutOfBoundsException ( <RARE_TOKEN> <RARE_TOKEN> bytes to read - <RARE_TOKEN> " </a> 
<a> + ( index + length ) + " or " + ( srcIndex + length ) + ", <RARE_TOKEN> is " </a> 
<a> + capacity ( ) + " or " + src . length ) ; </a> 
<a> } </a> 
<a> int i = <RARE_TOKEN> ; </a> 
<a> while ( length > 0 ) { </a> 
<a> Component c = components . get ( i ) ; </a> 
<a> ByteBuf s = c . buf ; </a> 
<a> int adjustment = c . offset ; </a> 
<a> int localLength = Math . min ( length , s . capacity ( ) - ( index - adjustment ) ) ; </a> 
<a> s . setBytes ( index - adjustment , src , srcIndex , localLength ) ; </a> 
<a> index += localLength ; </a> 
<a> srcIndex += localLength ; </a> 
<a> length -= localLength ; </a> 
<a> i ++ ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void setBytes ( int index , ByteBuffer src ) { </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> ( index ) ; </a> 
<a> int limit = src . limit ( ) ; </a> 
<a> int length = src . <RARE_TOKEN> ( ) ; </a> 
<a> if ( index > capacity ( ) - length ) { </a> 
<a> throw new IndexOutOfBoundsException ( <RARE_TOKEN> <RARE_TOKEN> bytes to be <RARE_TOKEN> - <RARE_TOKEN> " </a> 
<a> + ( index + length ) + ", <RARE_TOKEN> is " + capacity ( ) ) ; </a> 
<a> } </a> 
<a> int i = <RARE_TOKEN> ; </a> 
<a> try { </a> 
<a> while ( length > 0 ) { </a> 
<a> Component c = components . get ( i ) ; </a> 
<a> ByteBuf s = c . buf ; </a> 
<a> int adjustment = c . offset ; </a> 
<a> int localLength = Math . min ( length , s . capacity ( ) - ( index - adjustment ) ) ; </a> 
<a> src . limit ( src . position ( ) + localLength ) ; </a> 
<a> s . setBytes ( index - adjustment , src ) ; </a> 
<a> index += localLength ; </a> 
<a> length -= localLength ; </a> 
<a> i ++ ; </a> 
<a> } </a> 
<a> } finally { </a> 
<a> src . limit ( limit ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void setBytes ( int index , ByteBuf src , int srcIndex , int length ) { </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> ( index ) ; </a> 
<a> if ( index > capacity ( ) - length || srcIndex > src . capacity ( ) - length ) { </a> 
<a> throw new IndexOutOfBoundsException ( <RARE_TOKEN> <RARE_TOKEN> bytes to be <RARE_TOKEN> - <RARE_TOKEN> " </a> 
<a> + ( index + length ) + " or " + ( srcIndex + length ) + ", <RARE_TOKEN> is " </a> 
<a> + capacity ( ) + " or " + src . capacity ( ) ) ; </a> 
<a> } </a> 
<a> int i = <RARE_TOKEN> ; </a> 
<a> while ( length > 0 ) { </a> 
<a> Component c = components . get ( i ) ; </a> 
<a> ByteBuf s = c . buf ; </a> 
<a> int adjustment = c . offset ; </a> 
<a> int localLength = Math . min ( length , s . capacity ( ) - ( index - adjustment ) ) ; </a> 
<a> s . setBytes ( index - adjustment , src , srcIndex , localLength ) ; </a> 
<a> index += localLength ; </a> 
<a> srcIndex += localLength ; </a> 
<a> length -= localLength ; </a> 
<a> i ++ ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int setBytes ( int index , InputStream in , int length ) </a> 
<a> throws IOException { </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> ( index ) ; </a> 
<a> if ( index > capacity ( ) - length ) { </a> 
<a> throw new IndexOutOfBoundsException ( <RARE_TOKEN> <RARE_TOKEN> bytes to write - <RARE_TOKEN> " </a> 
<a> + ( index + length ) + ", <RARE_TOKEN> is " + capacity ( ) ) ; </a> 
<a> } </a> 
<a> int i = <RARE_TOKEN> ; </a> 
<a> int readBytes = 0 ; </a> 
<a> <RARE_TOKEN> { </a> 
<a> Component c = components . get ( i ) ; </a> 
<a> ByteBuf s = c . buf ; </a> 
<a> int adjustment = c . offset ; </a> 
<a> int localLength = Math . min ( length , s . capacity ( ) - ( index - adjustment ) ) ; </a> 
<a> int <RARE_TOKEN> = s . setBytes ( index - adjustment , in , localLength ) ; </a> 
<a> if ( <RARE_TOKEN> < 0 ) { </a> 
<a> if ( readBytes == 0 ) { </a> 
<a> return - 1 ; </a> 
<a> } else { </a> 
<a> break ; </a> 
<a> } </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> == localLength ) { </a> 
<a> index += localLength ; </a> 
<a> length -= localLength ; </a> 
<a> readBytes += localLength ; </a> 
<a> i ++ ; </a> 
<a> } else { </a> 
<a> index += <RARE_TOKEN> ; </a> 
<a> length -= <RARE_TOKEN> ; </a> 
<a> readBytes += <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } while ( length > 0 ) ; </a> 
<a> return readBytes ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int setBytes ( int index , <RARE_TOKEN> in , int length ) </a> 
<a> throws IOException { </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> ( index ) ; </a> 
<a> if ( index > capacity ( ) - length ) { </a> 
<a> throw new IndexOutOfBoundsException ( <RARE_TOKEN> <RARE_TOKEN> bytes to write - <RARE_TOKEN> " </a> 
<a> + ( index + length ) + ", <RARE_TOKEN> is " + capacity ( ) ) ; </a> 
<a> } </a> 
<a> int i = <RARE_TOKEN> ; </a> 
<a> int readBytes = 0 ; </a> 
<a> <RARE_TOKEN> { </a> 
<a> Component c = components . get ( i ) ; </a> 
<a> ByteBuf s = c . buf ; </a> 
<a> int adjustment = c . offset ; </a> 
<a> int localLength = Math . min ( length , s . capacity ( ) - ( index - adjustment ) ) ; </a> 
<a> int <RARE_TOKEN> = s . setBytes ( index - adjustment , in , localLength ) ; </a> 
<a> if ( <RARE_TOKEN> == 0 ) { </a> 
<a> break ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> < 0 ) { </a> 
<a> if ( readBytes == 0 ) { </a> 
<a> return - 1 ; </a> 
<a> } else { </a> 
<a> break ; </a> 
<a> } </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> == localLength ) { </a> 
<a> index += localLength ; </a> 
<a> length -= localLength ; </a> 
<a> readBytes += localLength ; </a> 
<a> i ++ ; </a> 
<a> } else { </a> 
<a> index += <RARE_TOKEN> ; </a> 
<a> length -= <RARE_TOKEN> ; </a> 
<a> readBytes += <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } while ( length > 0 ) ; </a> 
<a> return readBytes ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ByteBuf <RARE_TOKEN> ( int index , int length ) { </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> ( index ) ; </a> 
<a> if ( index > capacity ( ) - length ) { </a> 
<a> throw new IndexOutOfBoundsException ( <RARE_TOKEN> <RARE_TOKEN> bytes to <RARE_TOKEN> - <RARE_TOKEN> " </a> 
<a> + ( index + length ) + ", <RARE_TOKEN> is " + capacity ( ) ) ; </a> 
<a> } </a> 
<a> ByteBuf dst = unsafe ( ) . <RARE_TOKEN> ( length ) ; </a> 
<a> <RARE_TOKEN> ( index , length , <RARE_TOKEN> , dst ) ; </a> 
<a> return dst ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( int index , int length , int <RARE_TOKEN> , ByteBuf dst ) { </a> 
<a> int dstIndex = 0 ; </a> 
<a> int i = <RARE_TOKEN> ; </a> 
<a> while ( length > 0 ) { </a> 
<a> Component c = components . get ( i ) ; </a> 
<a> ByteBuf s = c . buf ; </a> 
<a> int adjustment = c . offset ; </a> 
<a> int localLength = Math . min ( length , s . capacity ( ) - ( index - adjustment ) ) ; </a> 
<a> s . getBytes ( index - adjustment , dst , dstIndex , localLength ) ; </a> 
<a> index += localLength ; </a> 
<a> dstIndex += localLength ; </a> 
<a> length -= localLength ; </a> 
<a> i ++ ; </a> 
<a> } </a> 
<a> dst . writerIndex ( dst . capacity ( ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ByteBuf <RARE_TOKEN> ( int cIndex ) { </a> 
<a> <RARE_TOKEN> ( cIndex ) ; </a> 
<a> return components . get ( cIndex ) . buf ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ByteBuf <RARE_TOKEN> ( int offset ) { </a> 
<a> return <RARE_TOKEN> ( offset ) . buf ; </a> 
<a> } </a> 
<a> private Component <RARE_TOKEN> ( int offset ) { </a> 
<a> if ( offset < 0 || offset >= capacity ( ) ) { </a> 
<a> throw new IndexOutOfBoundsException ( String . format ( </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> (expected: >= 0 && < <RARE_TOKEN> , offset , capacity ( ) ) ) ; </a> 
<a> } </a> 
<a> Component c = <RARE_TOKEN> ; </a> 
<a> if ( c == null ) { </a> 
<a> <RARE_TOKEN> = c = components . get ( 0 ) ; </a> 
<a> } </a> 
<a> if ( offset >= c . offset ) { </a> 
<a> if ( offset < c . endOffset ) { </a> 
<a> return c ; </a> 
<a> } </a> 
<a> for ( int i = <RARE_TOKEN> + 1 ; i < components . size ( ) ; i ++ ) { </a> 
<a> c = components . get ( i ) ; </a> 
<a> if ( offset < c . endOffset ) { </a> 
<a> <RARE_TOKEN> = i ; </a> 
<a> <RARE_TOKEN> = c ; </a> 
<a> return c ; </a> 
<a> } </a> 
<a> } </a> 
<a> } else { </a> 
<a> for ( int i = <RARE_TOKEN> - 1 ; i >= 0 ; i -- ) { </a> 
<a> c = components . get ( i ) ; </a> 
<a> if ( offset >= c . offset ) { </a> 
<a> <RARE_TOKEN> = i ; </a> 
<a> <RARE_TOKEN> = c ; </a> 
<a> return c ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> throw new IllegalStateException ( <RARE_TOKEN> not <RARE_TOKEN> <RARE_TOKEN> - concurrent <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> if ( components . size ( ) == 1 ) { </a> 
<a> return components . get ( 0 ) . buf . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> return false ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ByteBuffer nioBuffer ( int index , int length ) { </a> 
<a> if ( components . size ( ) == 1 ) { </a> 
<a> return components . get ( 0 ) . buf . nioBuffer ( index , length ) ; </a> 
<a> } </a> 
<a> throw new UnsupportedOperationException ( ) ; </a> 
<a> } </a> 
<a> private ByteBuffer <RARE_TOKEN> ( int index , int length ) { </a> 
<a> if ( components . size ( ) == 1 ) { </a> 
<a> return <RARE_TOKEN> ( components . get ( 0 ) . buf , index , length ) ; </a> 
<a> } </a> 
<a> ByteBuffer [ ] buffers = nioBuffers ( index , length ) ; </a> 
<a> ByteBuffer <RARE_TOKEN> = ByteBuffer . <RARE_TOKEN> ( length ) . order ( order ( ) ) ; </a> 
<a> for ( ByteBuffer b : buffers ) { </a> 
<a> <RARE_TOKEN> . put ( b ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return true ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ByteBuffer [ ] nioBuffers ( int index , int length ) { </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> ( index ) ; </a> 
<a> if ( index + length > capacity ( ) ) { </a> 
<a> throw new IndexOutOfBoundsException ( <RARE_TOKEN> <RARE_TOKEN> bytes to <RARE_TOKEN> - <RARE_TOKEN> </a> 
<a> + ( index + length ) + ", <RARE_TOKEN> is " + capacity ( ) ) ; </a> 
<a> } </a> 
<a> List < ByteBuffer > buffers = new ArrayList < ByteBuffer > ( components . size ( ) ) ; </a> 
<a> int i = <RARE_TOKEN> ; </a> 
<a> while ( length > 0 ) { </a> 
<a> Component c = components . get ( i ) ; </a> 
<a> ByteBuf s = c . buf ; </a> 
<a> int adjustment = c . offset ; </a> 
<a> int localLength = Math . min ( length , s . capacity ( ) - ( index - adjustment ) ) ; </a> 
<a> buffers . add ( <RARE_TOKEN> ( s , index - adjustment , localLength ) ) ; </a> 
<a> index += localLength ; </a> 
<a> length -= localLength ; </a> 
<a> i ++ ; </a> 
<a> } </a> 
<a> return buffers . <RARE_TOKEN> ( new ByteBuffer [ buffers . size ( ) ] ) ; </a> 
<a> } </a> 
<a> private static ByteBuffer <RARE_TOKEN> ( ByteBuf buf , int index , int length ) { </a> 
<a> if ( buf . <RARE_TOKEN> ( ) ) { </a> 
<a> return buf . nioBuffer ( index , length ) ; </a> 
<a> } else { </a> 
<a> return buf . <RARE_TOKEN> ( index , length ) . nioBuffer ( 0 , length ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> final int <RARE_TOKEN> = <RARE_TOKEN> ( ) ; </a> 
<a> if ( <RARE_TOKEN> <= 1 ) { </a> 
<a> return ; </a> 
<a> } </a> 
<a> final Component last = components . get ( <RARE_TOKEN> - 1 ) ; </a> 
<a> final int capacity = last . endOffset ; </a> 
<a> final ByteBuf <RARE_TOKEN> = last . buf . unsafe ( ) . <RARE_TOKEN> ( capacity ) ; </a> 
<a> for ( int i = 0 ; i < <RARE_TOKEN> ; i ++ ) { </a> 
<a> ByteBuf b = components . get ( i ) . buf ; </a> 
<a> <RARE_TOKEN> . writeBytes ( b ) ; </a> 
<a> b . unsafe ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> components . clear ( ) ; </a> 
<a> components . add ( new Component ( <RARE_TOKEN> ) ) ; </a> 
<a> <RARE_TOKEN> ( 0 ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( int cIndex , int <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( cIndex , <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> <= 1 ) { </a> 
<a> return ; </a> 
<a> } </a> 
<a> final int <RARE_TOKEN> = cIndex + <RARE_TOKEN> ; </a> 
<a> final Component last = components . get ( <RARE_TOKEN> - 1 ) ; </a> 
<a> final int capacity = last . endOffset - components . get ( cIndex ) . offset ; </a> 
<a> final ByteBuf <RARE_TOKEN> = last . buf . unsafe ( ) . <RARE_TOKEN> ( capacity ) ; </a> 
<a> for ( int i = cIndex ; i < <RARE_TOKEN> ; i ++ ) { </a> 
<a> ByteBuf b = components . get ( i ) . buf ; </a> 
<a> <RARE_TOKEN> . writeBytes ( b ) ; </a> 
<a> b . unsafe ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> components . <RARE_TOKEN> ( cIndex + 1 , <RARE_TOKEN> ) . clear ( ) ; </a> 
<a> components . set ( cIndex , new Component ( <RARE_TOKEN> ) ) ; </a> 
<a> <RARE_TOKEN> ( cIndex ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> final int readerIndex = readerIndex ( ) ; </a> 
<a> if ( readerIndex == 0 ) { </a> 
<a> return ; </a> 
<a> } </a> 
<a> int writerIndex = writerIndex ( ) ; </a> 
<a> if ( readerIndex == writerIndex && writerIndex == capacity ( ) ) { </a> 
<a> for ( Component c : components ) { </a> 
<a> c . buf . unsafe ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> components . clear ( ) ; </a> 
<a> <RARE_TOKEN> ( 0 , 0 ) ; </a> 
<a> <RARE_TOKEN> ( readerIndex ) ; </a> 
<a> return ; </a> 
<a> } </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> ( readerIndex ) ; </a> 
<a> for ( int i = 0 ; i < <RARE_TOKEN> ; i ++ ) { </a> 
<a> components . get ( i ) . buf . unsafe ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> components . <RARE_TOKEN> ( 0 , <RARE_TOKEN> ) . clear ( ) ; </a> 
<a> Component <RARE_TOKEN> = components . get ( 0 ) ; </a> 
<a> <RARE_TOKEN> ( 0 ) ; </a> 
<a> <RARE_TOKEN> ( readerIndex - <RARE_TOKEN> . offset , writerIndex - <RARE_TOKEN> . offset ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> . offset ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> final int readerIndex = readerIndex ( ) ; </a> 
<a> if ( readerIndex == 0 ) { </a> 
<a> return ; </a> 
<a> } </a> 
<a> int writerIndex = writerIndex ( ) ; </a> 
<a> if ( readerIndex == writerIndex && writerIndex == capacity ( ) ) { </a> 
<a> for ( Component c : components ) { </a> 
<a> c . buf . unsafe ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> components . clear ( ) ; </a> 
<a> <RARE_TOKEN> ( 0 , 0 ) ; </a> 
<a> <RARE_TOKEN> ( readerIndex ) ; </a> 
<a> return ; </a> 
<a> } </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> ( readerIndex ) ; </a> 
<a> for ( int i = 0 ; i < <RARE_TOKEN> ; i ++ ) { </a> 
<a> components . get ( i ) . buf . unsafe ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> components . <RARE_TOKEN> ( 0 , <RARE_TOKEN> ) . clear ( ) ; </a> 
<a> Component c = components . get ( 0 ) ; </a> 
<a> int adjustment = readerIndex - c . offset ; </a> 
<a> if ( adjustment == c . length ) { </a> 
<a> components . remove ( 0 ) ; </a> 
<a> } else { </a> 
<a> Component <RARE_TOKEN> = new Component ( c . buf . slice ( adjustment , c . length - adjustment ) ) ; </a> 
<a> c . buf . unsafe ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> components . set ( 0 , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( 0 ) ; </a> 
<a> <RARE_TOKEN> ( 0 , writerIndex - readerIndex ) ; </a> 
<a> <RARE_TOKEN> ( readerIndex ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public String toString ( ) { </a> 
<a> String result = super . toString ( ) ; </a> 
<a> result = result . substring ( 0 , result . length ( ) - 1 ) ; </a> 
<a> return result + ", <RARE_TOKEN> + components . size ( ) + <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> private static final class Component { </a> 
<a> final ByteBuf buf ; </a> 
<a> final int length ; </a> 
<a> int offset ; </a> 
<a> int endOffset ; </a> 
<a> Component ( ByteBuf buf ) { </a> 
<a> this . buf = buf ; </a> 
<a> length = buf . readableBytes ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public <RARE_TOKEN> unsafe ( ) { </a> 
<a> return unsafe ; </a> 
<a> } </a> 
<a> private final class <RARE_TOKEN> implements <RARE_TOKEN> { </a> 
<a> @ Override </a> 
<a> public ByteBuffer nioBuffer ( ) { </a> 
<a> if ( components . size ( ) == 1 ) { </a> 
<a> return components . get ( 0 ) . buf . unsafe ( ) . nioBuffer ( ) ; </a> 
<a> } </a> 
<a> throw new UnsupportedOperationException ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ByteBuffer [ ] nioBuffers ( ) { </a> 
<a> ByteBuffer [ ] nioBuffers = new ByteBuffer [ components . size ( ) ] ; </a> 
<a> int index = 0 ; </a> 
<a> for ( Component <RARE_TOKEN> : components ) { </a> 
<a> nioBuffers [ index ++ ] = <RARE_TOKEN> . buf . unsafe ( ) . nioBuffer ( ) ; </a> 
<a> } </a> 
<a> return nioBuffers ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ByteBuf <RARE_TOKEN> ( int <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> buf = new <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> buf . <RARE_TOKEN> ( new <RARE_TOKEN> ( new byte [ <RARE_TOKEN> ] , <RARE_TOKEN> ) ) ; </a> 
<a> return buf ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> if ( <RARE_TOKEN> <= 0 ) { </a> 
<a> throw new IllegalStateException ( ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> ++ ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> if ( <RARE_TOKEN> <= 0 ) { </a> 
<a> throw new IllegalStateException ( ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> -- ; </a> 
<a> if ( <RARE_TOKEN> == 0 ) { </a> 
<a> for ( Component c : components ) { </a> 
<a> c . buf . unsafe ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> components . clear ( ) ; </a> 
<a> <RARE_TOKEN> = null ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ByteBuffer [ ] nioBuffers ( ) { </a> 
<a> return nioBuffers ( readerIndex ( ) , readableBytes ( ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . buffer ; </a> 
<a> import java . util . <RARE_TOKEN> ; </a> 
<a> import java . util . Collection ; </a> 
<a> public class <RARE_TOKEN> < T > extends <RARE_TOKEN> < T > implements MessageBuf < T > { </a> 
<a> private static final long serialVersionUID = <RARE_TOKEN> ; </a> 
<a> public <RARE_TOKEN> ( ) { } </a> 
<a> public <RARE_TOKEN> ( Collection < ? extends T > c ) { </a> 
<a> super ( c ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( int <RARE_TOKEN> ) { </a> 
<a> super ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ChannelBufType type ( ) { </a> 
<a> return ChannelBufType . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int <RARE_TOKEN> ( Collection < ? super T > c ) { </a> 
<a> int <RARE_TOKEN> = 0 ; </a> 
<a> for ( ; ; ) { </a> 
<a> T o = poll ( ) ; </a> 
<a> if ( o == null ) { </a> 
<a> break ; </a> 
<a> } </a> 
<a> c . add ( o ) ; </a> 
<a> <RARE_TOKEN> ++ ; </a> 
<a> } </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int <RARE_TOKEN> ( Collection < ? super T > c , int <RARE_TOKEN> ) { </a> 
<a> int <RARE_TOKEN> = 0 ; </a> 
<a> while ( <RARE_TOKEN> < <RARE_TOKEN> ) { </a> 
<a> T o = poll ( ) ; </a> 
<a> if ( o == null ) { </a> 
<a> break ; </a> 
<a> } </a> 
<a> c . add ( o ) ; </a> 
<a> <RARE_TOKEN> ++ ; </a> 
<a> } </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . buffer ; </a> 
<a> import java . io . IOException ; </a> 
<a> import java . io . InputStream ; </a> 
<a> import java . io . OutputStream ; </a> 
<a> import java . lang . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import java . nio . ByteBuffer ; </a> 
<a> import java . nio . ByteOrder ; </a> 
<a> import java . nio . channels . <RARE_TOKEN> ; </a> 
<a> import java . nio . channels . <RARE_TOKEN> ; </a> 
<a> import java . nio . channels . <RARE_TOKEN> ; </a> 
<a> import sun . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> @ SuppressWarnings ( <RARE_TOKEN> ) </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> private static final <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> static { </a> 
<a> ByteBuffer <RARE_TOKEN> = ByteBuffer . <RARE_TOKEN> ( 1 ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> try { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . getClass ( ) . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( true ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = ( <RARE_TOKEN> ) <RARE_TOKEN> . get ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> } catch ( Throwable t ) { </a> 
<a> <RARE_TOKEN> = null ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> private static void <RARE_TOKEN> ( ByteBuffer buffer ) { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> try { </a> 
<a> <RARE_TOKEN> = ( <RARE_TOKEN> ) <RARE_TOKEN> . get ( buffer ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> } catch ( Throwable t ) { </a> 
<a> } </a> 
<a> } </a> 
<a> private final <RARE_TOKEN> unsafe = new <RARE_TOKEN> ( ) ; </a> 
<a> private boolean <RARE_TOKEN> ; </a> 
<a> private ByteBuffer buffer ; </a> 
<a> private ByteBuffer <RARE_TOKEN> ; </a> 
<a> private int capacity ; </a> 
<a> public <RARE_TOKEN> ( int <RARE_TOKEN> , int maxCapacity ) { </a> 
<a> super ( ByteOrder . <RARE_TOKEN> , maxCapacity ) ; </a> 
<a> if ( <RARE_TOKEN> < 0 ) { </a> 
<a> throw new IllegalArgumentException ( <RARE_TOKEN> " + <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( maxCapacity < 0 ) { </a> 
<a> throw new IllegalArgumentException ( <RARE_TOKEN> " + maxCapacity ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> > maxCapacity ) { </a> 
<a> throw new IllegalArgumentException ( String . format ( </a> 
<a> <RARE_TOKEN> > <RARE_TOKEN> , <RARE_TOKEN> , maxCapacity ) ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( ByteBuffer . <RARE_TOKEN> ( <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( ByteBuffer <RARE_TOKEN> , int maxCapacity ) { </a> 
<a> super ( ByteOrder . <RARE_TOKEN> , maxCapacity ) ; </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( ! <RARE_TOKEN> . <RARE_TOKEN> ( ) ) { </a> 
<a> throw new IllegalArgumentException ( <RARE_TOKEN> is not a <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> . <RARE_TOKEN> ( ) ) { </a> 
<a> throw new IllegalArgumentException ( <RARE_TOKEN> is a <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> if ( <RARE_TOKEN> > maxCapacity ) { </a> 
<a> throw new IllegalArgumentException ( String . format ( </a> 
<a> <RARE_TOKEN> > <RARE_TOKEN> , <RARE_TOKEN> , maxCapacity ) ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> = true ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> . slice ( ) . order ( ByteOrder . <RARE_TOKEN> ) ) ; </a> 
<a> writerIndex ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( ByteBuffer buffer ) { </a> 
<a> ByteBuffer <RARE_TOKEN> = this . buffer ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> if ( <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> = false ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> this . buffer = buffer ; </a> 
<a> <RARE_TOKEN> = buffer . <RARE_TOKEN> ( ) ; </a> 
<a> capacity = buffer . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return true ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int capacity ( ) { </a> 
<a> return capacity ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void capacity ( int newCapacity ) { </a> 
<a> if ( newCapacity < 0 || newCapacity > maxCapacity ( ) ) { </a> 
<a> throw new IllegalArgumentException ( <RARE_TOKEN> " + newCapacity ) ; </a> 
<a> } </a> 
<a> int readerIndex = readerIndex ( ) ; </a> 
<a> int writerIndex = writerIndex ( ) ; </a> 
<a> int <RARE_TOKEN> = capacity ; </a> 
<a> if ( newCapacity > <RARE_TOKEN> ) { </a> 
<a> ByteBuffer <RARE_TOKEN> = buffer ; </a> 
<a> ByteBuffer <RARE_TOKEN> = ByteBuffer . <RARE_TOKEN> ( newCapacity ) ; </a> 
<a> <RARE_TOKEN> . position ( readerIndex ) . limit ( writerIndex ) ; </a> 
<a> <RARE_TOKEN> . position ( readerIndex ) . limit ( writerIndex ) ; </a> 
<a> <RARE_TOKEN> . put ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . clear ( ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } else if ( newCapacity < <RARE_TOKEN> ) { </a> 
<a> ByteBuffer <RARE_TOKEN> = buffer ; </a> 
<a> ByteBuffer <RARE_TOKEN> = ByteBuffer . <RARE_TOKEN> ( newCapacity ) ; </a> 
<a> if ( readerIndex < newCapacity ) { </a> 
<a> if ( writerIndex > newCapacity ) { </a> 
<a> writerIndex ( writerIndex = newCapacity ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> . position ( readerIndex ) . limit ( writerIndex ) ; </a> 
<a> <RARE_TOKEN> . position ( readerIndex ) . limit ( writerIndex ) ; </a> 
<a> <RARE_TOKEN> . put ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . clear ( ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> ( newCapacity , newCapacity ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public byte [ ] array ( ) { </a> 
<a> throw new UnsupportedOperationException ( <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int <RARE_TOKEN> ( ) { </a> 
<a> throw new UnsupportedOperationException ( <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public byte getByte ( int index ) { </a> 
<a> return buffer . get ( index ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public short <RARE_TOKEN> ( int index ) { </a> 
<a> return buffer . <RARE_TOKEN> ( index ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int <RARE_TOKEN> ( int index ) { </a> 
<a> return ( getByte ( index ) & 0xff ) < < 16 | ( getByte ( index + 1 ) & 0xff ) < < 8 | </a> 
<a> ( getByte ( index + 2 ) & 0xff ) < < 0 ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int getInt ( int index ) { </a> 
<a> return buffer . getInt ( index ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public long getLong ( int index ) { </a> 
<a> return buffer . getLong ( index ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void getBytes ( int index , ByteBuf dst , int dstIndex , int length ) { </a> 
<a> if ( dst instanceof <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = ( <RARE_TOKEN> ) dst ; </a> 
<a> ByteBuffer data = <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> data . clear ( ) . position ( dstIndex ) . limit ( dstIndex + length ) ; </a> 
<a> getBytes ( index , data ) ; </a> 
<a> } else if ( buffer . <RARE_TOKEN> ( ) ) { </a> 
<a> dst . setBytes ( dstIndex , buffer . array ( ) , index + buffer . <RARE_TOKEN> ( ) , length ) ; </a> 
<a> } else { </a> 
<a> dst . setBytes ( dstIndex , this , index , length ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void getBytes ( int index , byte [ ] dst , int dstIndex , int length ) { </a> 
<a> try { </a> 
<a> <RARE_TOKEN> . clear ( ) . position ( index ) . limit ( index + length ) ; </a> 
<a> } catch ( IllegalArgumentException e ) { </a> 
<a> throw new IndexOutOfBoundsException ( <RARE_TOKEN> <RARE_TOKEN> bytes to read - <RARE_TOKEN> " + </a> 
<a> ( index + length ) + ", <RARE_TOKEN> is " + buffer . limit ( ) ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> . get ( dst , dstIndex , length ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void getBytes ( int index , ByteBuffer dst ) { </a> 
<a> int <RARE_TOKEN> = Math . min ( capacity ( ) - index , dst . <RARE_TOKEN> ( ) ) ; </a> 
<a> try { </a> 
<a> <RARE_TOKEN> . clear ( ) . position ( index ) . limit ( index + <RARE_TOKEN> ) ; </a> 
<a> } catch ( IllegalArgumentException e ) { </a> 
<a> throw new IndexOutOfBoundsException ( <RARE_TOKEN> <RARE_TOKEN> bytes to read - <RARE_TOKEN> " + </a> 
<a> ( index + <RARE_TOKEN> ) + ", <RARE_TOKEN> is " + buffer . limit ( ) ) ; </a> 
<a> } </a> 
<a> dst . put ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void setByte ( int index , int value ) { </a> 
<a> buffer . put ( index , ( byte ) value ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( int index , int value ) { </a> 
<a> buffer . <RARE_TOKEN> ( index , ( short ) value ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( int index , int value ) { </a> 
<a> setByte ( index , ( byte ) ( value > > > 16 ) ) ; </a> 
<a> setByte ( index + 1 , ( byte ) ( value > > > 8 ) ) ; </a> 
<a> setByte ( index + 2 , ( byte ) ( value > > > 0 ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( int index , int value ) { </a> 
<a> buffer . <RARE_TOKEN> ( index , value ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( int index , long value ) { </a> 
<a> buffer . <RARE_TOKEN> ( index , value ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void setBytes ( int index , ByteBuf src , int srcIndex , int length ) { </a> 
<a> if ( src instanceof <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = ( <RARE_TOKEN> ) src ; </a> 
<a> ByteBuffer data = <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> data . clear ( ) . position ( srcIndex ) . limit ( srcIndex + length ) ; </a> 
<a> setBytes ( index , data ) ; </a> 
<a> } else if ( buffer . <RARE_TOKEN> ( ) ) { </a> 
<a> src . getBytes ( srcIndex , buffer . array ( ) , index + buffer . <RARE_TOKEN> ( ) , length ) ; </a> 
<a> } else { </a> 
<a> src . getBytes ( srcIndex , this , index , length ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void setBytes ( int index , byte [ ] src , int srcIndex , int length ) { </a> 
<a> <RARE_TOKEN> . clear ( ) . position ( index ) . limit ( index + length ) ; </a> 
<a> <RARE_TOKEN> . put ( src , srcIndex , length ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void setBytes ( int index , ByteBuffer src ) { </a> 
<a> if ( src == <RARE_TOKEN> ) { </a> 
<a> src = src . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> . clear ( ) . position ( index ) . limit ( index + src . <RARE_TOKEN> ( ) ) ; </a> 
<a> <RARE_TOKEN> . put ( src ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void getBytes ( int index , OutputStream out , int length ) throws IOException { </a> 
<a> if ( length == 0 ) { </a> 
<a> return ; </a> 
<a> } </a> 
<a> if ( buffer . <RARE_TOKEN> ( ) ) { </a> 
<a> out . write ( buffer . array ( ) , index + buffer . <RARE_TOKEN> ( ) , length ) ; </a> 
<a> } else { </a> 
<a> byte [ ] <RARE_TOKEN> = new byte [ length ] ; </a> 
<a> <RARE_TOKEN> . clear ( ) . position ( index ) ; </a> 
<a> <RARE_TOKEN> . get ( <RARE_TOKEN> ) ; </a> 
<a> out . write ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int getBytes ( int index , <RARE_TOKEN> out , int length ) throws IOException { </a> 
<a> if ( length == 0 ) { </a> 
<a> return 0 ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> . clear ( ) . position ( index ) . limit ( index + length ) ; </a> 
<a> return out . write ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int setBytes ( int index , InputStream in , int length ) throws IOException { </a> 
<a> if ( buffer . <RARE_TOKEN> ( ) ) { </a> 
<a> return in . read ( buffer . array ( ) , buffer . <RARE_TOKEN> ( ) + index , length ) ; </a> 
<a> } else { </a> 
<a> byte [ ] <RARE_TOKEN> = new byte [ length ] ; </a> 
<a> int readBytes = in . read ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . clear ( ) . position ( index ) ; </a> 
<a> <RARE_TOKEN> . put ( <RARE_TOKEN> ) ; </a> 
<a> return readBytes ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int setBytes ( int index , <RARE_TOKEN> in , int length ) throws IOException { </a> 
<a> <RARE_TOKEN> . clear ( ) . position ( index ) . limit ( index + length ) ; </a> 
<a> try { </a> 
<a> return in . read ( <RARE_TOKEN> ) ; </a> 
<a> } catch ( <RARE_TOKEN> e ) { </a> 
<a> return - 1 ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return true ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ByteBuffer nioBuffer ( int index , int length ) { </a> 
<a> if ( index == 0 && length == capacity ( ) ) { </a> 
<a> return buffer . <RARE_TOKEN> ( ) ; </a> 
<a> } else { </a> 
<a> return ( ( ByteBuffer ) <RARE_TOKEN> . clear ( ) . position ( index ) . limit ( index + length ) ) . slice ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ByteBuffer [ ] nioBuffers ( int offset , int length ) { </a> 
<a> throw new UnsupportedOperationException ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ByteBuf <RARE_TOKEN> ( int index , int length ) { </a> 
<a> ByteBuffer src ; </a> 
<a> try { </a> 
<a> src = ( ByteBuffer ) <RARE_TOKEN> . clear ( ) . position ( index ) . limit ( index + length ) ; </a> 
<a> } catch ( IllegalArgumentException e ) { </a> 
<a> throw new IndexOutOfBoundsException ( <RARE_TOKEN> <RARE_TOKEN> bytes to read - <RARE_TOKEN> " + ( index + length ) ) ; </a> 
<a> } </a> 
<a> ByteBuffer dst = </a> 
<a> src . <RARE_TOKEN> ( ) ? ByteBuffer . <RARE_TOKEN> ( length ) : ByteBuffer . <RARE_TOKEN> ( length ) ; </a> 
<a> dst . put ( src ) ; </a> 
<a> dst . order ( order ( ) ) ; </a> 
<a> dst . clear ( ) ; </a> 
<a> return new <RARE_TOKEN> ( dst , maxCapacity ( ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public <RARE_TOKEN> unsafe ( ) { </a> 
<a> return unsafe ; </a> 
<a> } </a> 
<a> private class <RARE_TOKEN> implements <RARE_TOKEN> { </a> 
<a> @ Override </a> 
<a> public ByteBuffer nioBuffer ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ByteBuffer [ ] nioBuffers ( ) { </a> 
<a> throw new UnsupportedOperationException ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ByteBuf <RARE_TOKEN> ( int <RARE_TOKEN> ) { </a> 
<a> return new <RARE_TOKEN> ( <RARE_TOKEN> , Math . <RARE_TOKEN> ( <RARE_TOKEN> , maxCapacity ( ) ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> final int readerIndex = readerIndex ( ) ; </a> 
<a> if ( readerIndex == writerIndex ( ) ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> return ; </a> 
<a> } </a> 
<a> if ( readerIndex > 0 && readerIndex >= capacity > > > 1 ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> if ( <RARE_TOKEN> <= 0 ) { </a> 
<a> throw new IllegalStateException ( ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> ++ ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> if ( <RARE_TOKEN> <= 0 ) { </a> 
<a> throw new IllegalStateException ( ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> -- ; </a> 
<a> if ( <RARE_TOKEN> == 0 ) { </a> 
<a> if ( <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> = false ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> ( buffer ) ; </a> 
<a> } </a> 
<a> buffer = null ; </a> 
<a> <RARE_TOKEN> = null ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . buffer ; </a> 
<a> import java . io . IOException ; </a> 
<a> import java . io . InputStream ; </a> 
<a> import java . io . OutputStream ; </a> 
<a> import java . nio . ByteBuffer ; </a> 
<a> import java . nio . channels . <RARE_TOKEN> ; </a> 
<a> import java . nio . channels . <RARE_TOKEN> ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> implements <RARE_TOKEN> { </a> 
<a> private final <RARE_TOKEN> unsafe = new <RARE_TOKEN> ( ) ; </a> 
<a> final ByteBuf buffer ; </a> 
<a> public <RARE_TOKEN> ( ByteBuf buffer ) { </a> 
<a> super ( buffer . order ( ) , buffer . maxCapacity ( ) ) ; </a> 
<a> if ( buffer instanceof <RARE_TOKEN> ) { </a> 
<a> this . buffer = ( ( <RARE_TOKEN> ) buffer ) . buffer ; </a> 
<a> } else { </a> 
<a> this . buffer = buffer ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( buffer . readerIndex ( ) , buffer . writerIndex ( ) ) ; </a> 
<a> buffer . unsafe ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ByteBuf <RARE_TOKEN> ( ) { </a> 
<a> return buffer ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return buffer . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int capacity ( ) { </a> 
<a> return buffer . capacity ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void capacity ( int newCapacity ) { </a> 
<a> buffer . capacity ( newCapacity ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return buffer . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public byte [ ] array ( ) { </a> 
<a> return buffer . array ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int <RARE_TOKEN> ( ) { </a> 
<a> return buffer . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public byte getByte ( int index ) { </a> 
<a> return buffer . getByte ( index ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public short <RARE_TOKEN> ( int index ) { </a> 
<a> return buffer . <RARE_TOKEN> ( index ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int <RARE_TOKEN> ( int index ) { </a> 
<a> return buffer . <RARE_TOKEN> ( index ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int getInt ( int index ) { </a> 
<a> return buffer . getInt ( index ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public long getLong ( int index ) { </a> 
<a> return buffer . getLong ( index ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ByteBuf <RARE_TOKEN> ( ) { </a> 
<a> return new <RARE_TOKEN> ( this ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ByteBuf <RARE_TOKEN> ( int index , int length ) { </a> 
<a> return buffer . <RARE_TOKEN> ( index , length ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ByteBuf slice ( int index , int length ) { </a> 
<a> return buffer . slice ( index , length ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void getBytes ( int index , ByteBuf dst , int dstIndex , int length ) { </a> 
<a> buffer . getBytes ( index , dst , dstIndex , length ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void getBytes ( int index , byte [ ] dst , int dstIndex , int length ) { </a> 
<a> buffer . getBytes ( index , dst , dstIndex , length ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void getBytes ( int index , ByteBuffer dst ) { </a> 
<a> buffer . getBytes ( index , dst ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void setByte ( int index , int value ) { </a> 
<a> buffer . setByte ( index , value ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( int index , int value ) { </a> 
<a> buffer . <RARE_TOKEN> ( index , value ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( int index , int value ) { </a> 
<a> buffer . <RARE_TOKEN> ( index , value ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( int index , int value ) { </a> 
<a> buffer . <RARE_TOKEN> ( index , value ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( int index , long value ) { </a> 
<a> buffer . <RARE_TOKEN> ( index , value ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void setBytes ( int index , byte [ ] src , int srcIndex , int length ) { </a> 
<a> buffer . setBytes ( index , src , srcIndex , length ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void setBytes ( int index , ByteBuf src , int srcIndex , int length ) { </a> 
<a> buffer . setBytes ( index , src , srcIndex , length ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void setBytes ( int index , ByteBuffer src ) { </a> 
<a> buffer . setBytes ( index , src ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void getBytes ( int index , OutputStream out , int length ) </a> 
<a> throws IOException { </a> 
<a> buffer . getBytes ( index , out , length ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int getBytes ( int index , <RARE_TOKEN> out , int length ) </a> 
<a> throws IOException { </a> 
<a> return buffer . getBytes ( index , out , length ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int setBytes ( int index , InputStream in , int length ) </a> 
<a> throws IOException { </a> 
<a> return buffer . setBytes ( index , in , length ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int setBytes ( int index , <RARE_TOKEN> in , int length ) </a> 
<a> throws IOException { </a> 
<a> return buffer . setBytes ( index , in , length ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return buffer . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ByteBuffer nioBuffer ( int index , int length ) { </a> 
<a> return buffer . nioBuffer ( index , length ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return buffer . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ByteBuffer [ ] nioBuffers ( int offset , int length ) { </a> 
<a> return buffer . nioBuffers ( offset , length ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public <RARE_TOKEN> unsafe ( ) { </a> 
<a> return unsafe ; </a> 
<a> } </a> 
<a> private final class <RARE_TOKEN> implements <RARE_TOKEN> { </a> 
<a> @ Override </a> 
<a> public ByteBuffer nioBuffer ( ) { </a> 
<a> return buffer . unsafe ( ) . nioBuffer ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ByteBuffer [ ] nioBuffers ( ) { </a> 
<a> return buffer . unsafe ( ) . nioBuffers ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ByteBuf <RARE_TOKEN> ( int <RARE_TOKEN> ) { </a> 
<a> return buffer . unsafe ( ) . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> throw new UnsupportedOperationException ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> buffer . unsafe ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> buffer . unsafe ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . buffer ; </a> 
<a> import java . util . Collection ; </a> 
<a> import java . util . <RARE_TOKEN> ; </a> 
<a> public interface MessageBuf < T > extends <RARE_TOKEN> , <RARE_TOKEN> < T > { </a> 
<a> int <RARE_TOKEN> ( Collection < ? super T > c ) ; </a> 
<a> int <RARE_TOKEN> ( Collection < ? super T > c , int <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . buffer ; </a> 
<a> import java . util . Collection ; </a> 
<a> import java . util . Iterator ; </a> 
<a> import java . util . <RARE_TOKEN> ; </a> 
<a> public class <RARE_TOKEN> < T > implements MessageBuf < T > { </a> 
<a> private final <RARE_TOKEN> < T > queue ; </a> 
<a> public <RARE_TOKEN> ( <RARE_TOKEN> < T > queue ) { </a> 
<a> if ( queue == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> this . queue = queue ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ChannelBufType type ( ) { </a> 
<a> return ChannelBufType . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean add ( T e ) { </a> 
<a> return queue . add ( e ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( T e ) { </a> 
<a> return queue . <RARE_TOKEN> ( e ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public T remove ( ) { </a> 
<a> return queue . remove ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public T poll ( ) { </a> 
<a> return queue . poll ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public T <RARE_TOKEN> ( ) { </a> 
<a> return queue . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public T <RARE_TOKEN> ( ) { </a> 
<a> return queue . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int size ( ) { </a> 
<a> return queue . size ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean isEmpty ( ) { </a> 
<a> return queue . isEmpty ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean contains ( Object o ) { </a> 
<a> return queue . contains ( o ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public Iterator < T > <RARE_TOKEN> ( ) { </a> 
<a> return queue . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public Object [ ] <RARE_TOKEN> ( ) { </a> 
<a> return queue . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public < E > E [ ] <RARE_TOKEN> ( E [ ] a ) { </a> 
<a> return queue . <RARE_TOKEN> ( a ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean remove ( Object o ) { </a> 
<a> return queue . remove ( o ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( Collection < ? > c ) { </a> 
<a> return queue . <RARE_TOKEN> ( c ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( Collection < ? extends T > c ) { </a> 
<a> return queue . <RARE_TOKEN> ( c ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( Collection < ? > c ) { </a> 
<a> return queue . <RARE_TOKEN> ( c ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( Collection < ? > c ) { </a> 
<a> return queue . <RARE_TOKEN> ( c ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void clear ( ) { </a> 
<a> queue . clear ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int <RARE_TOKEN> ( Collection < ? super T > c ) { </a> 
<a> int <RARE_TOKEN> = 0 ; </a> 
<a> for ( ; ; ) { </a> 
<a> T o = poll ( ) ; </a> 
<a> if ( o == null ) { </a> 
<a> break ; </a> 
<a> } </a> 
<a> c . add ( o ) ; </a> 
<a> <RARE_TOKEN> ++ ; </a> 
<a> } </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int <RARE_TOKEN> ( Collection < ? super T > c , int <RARE_TOKEN> ) { </a> 
<a> int <RARE_TOKEN> = 0 ; </a> 
<a> while ( <RARE_TOKEN> < <RARE_TOKEN> ) { </a> 
<a> T o = poll ( ) ; </a> 
<a> if ( o == null ) { </a> 
<a> break ; </a> 
<a> } </a> 
<a> c . add ( o ) ; </a> 
<a> <RARE_TOKEN> ++ ; </a> 
<a> } </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public String toString ( ) { </a> 
<a> return queue . toString ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . buffer ; </a> 
<a> import java . io . IOException ; </a> 
<a> import java . io . InputStream ; </a> 
<a> import java . io . OutputStream ; </a> 
<a> import java . nio . ByteBuffer ; </a> 
<a> import java . nio . channels . <RARE_TOKEN> ; </a> 
<a> import java . nio . channels . <RARE_TOKEN> ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> implements <RARE_TOKEN> { </a> 
<a> private final <RARE_TOKEN> unsafe = new <RARE_TOKEN> ( ) ; </a> 
<a> private final ByteBuf buffer ; </a> 
<a> private final int adjustment ; </a> 
<a> private final int length ; </a> 
<a> public <RARE_TOKEN> ( ByteBuf buffer , int index , int length ) { </a> 
<a> super ( buffer . order ( ) , length ) ; </a> 
<a> if ( index < 0 || index > buffer . capacity ( ) ) { </a> 
<a> throw new IndexOutOfBoundsException ( <RARE_TOKEN> index of " + index </a> 
<a> + ", <RARE_TOKEN> is " + buffer . capacity ( ) ) ; </a> 
<a> } </a> 
<a> if ( index + length > buffer . capacity ( ) ) { </a> 
<a> throw new IndexOutOfBoundsException ( <RARE_TOKEN> <RARE_TOKEN> index of " </a> 
<a> + ( index + length ) + ", <RARE_TOKEN> is " + buffer . capacity ( ) ) ; </a> 
<a> } </a> 
<a> if ( buffer instanceof <RARE_TOKEN> ) { </a> 
<a> this . buffer = ( ( <RARE_TOKEN> ) buffer ) . buffer ; </a> 
<a> adjustment = ( ( <RARE_TOKEN> ) buffer ) . adjustment + index ; </a> 
<a> } else if ( buffer instanceof <RARE_TOKEN> ) { </a> 
<a> this . buffer = ( ( <RARE_TOKEN> ) buffer ) . buffer ; </a> 
<a> adjustment = index ; </a> 
<a> } else { </a> 
<a> this . buffer = buffer ; </a> 
<a> adjustment = index ; </a> 
<a> } </a> 
<a> this . length = length ; </a> 
<a> writerIndex ( length ) ; </a> 
<a> buffer . unsafe ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ByteBuf <RARE_TOKEN> ( ) { </a> 
<a> return buffer ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return buffer . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int capacity ( ) { </a> 
<a> return length ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void capacity ( int newCapacity ) { </a> 
<a> throw new UnsupportedOperationException ( <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return buffer . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public byte [ ] array ( ) { </a> 
<a> return buffer . array ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int <RARE_TOKEN> ( ) { </a> 
<a> return buffer . <RARE_TOKEN> ( ) + adjustment ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public byte getByte ( int index ) { </a> 
<a> checkIndex ( index ) ; </a> 
<a> return buffer . getByte ( index + adjustment ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public short <RARE_TOKEN> ( int index ) { </a> 
<a> checkIndex ( index , 2 ) ; </a> 
<a> return buffer . <RARE_TOKEN> ( index + adjustment ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int <RARE_TOKEN> ( int index ) { </a> 
<a> checkIndex ( index , 3 ) ; </a> 
<a> return buffer . <RARE_TOKEN> ( index + adjustment ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int getInt ( int index ) { </a> 
<a> checkIndex ( index , 4 ) ; </a> 
<a> return buffer . getInt ( index + adjustment ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public long getLong ( int index ) { </a> 
<a> checkIndex ( index , 8 ) ; </a> 
<a> return buffer . getLong ( index + adjustment ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ByteBuf <RARE_TOKEN> ( ) { </a> 
<a> ByteBuf <RARE_TOKEN> = new <RARE_TOKEN> ( buffer , adjustment , length ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( readerIndex ( ) , writerIndex ( ) ) ; </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ByteBuf <RARE_TOKEN> ( int index , int length ) { </a> 
<a> checkIndex ( index , length ) ; </a> 
<a> return buffer . <RARE_TOKEN> ( index + adjustment , length ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ByteBuf slice ( int index , int length ) { </a> 
<a> checkIndex ( index , length ) ; </a> 
<a> if ( length == 0 ) { </a> 
<a> return Unpooled . EMPTY_BUFFER ; </a> 
<a> } </a> 
<a> return new <RARE_TOKEN> ( buffer , index + adjustment , length ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void getBytes ( int index , ByteBuf dst , int dstIndex , int length ) { </a> 
<a> checkIndex ( index , length ) ; </a> 
<a> buffer . getBytes ( index + adjustment , dst , dstIndex , length ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void getBytes ( int index , byte [ ] dst , int dstIndex , int length ) { </a> 
<a> checkIndex ( index , length ) ; </a> 
<a> buffer . getBytes ( index + adjustment , dst , dstIndex , length ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void getBytes ( int index , ByteBuffer dst ) { </a> 
<a> checkIndex ( index , dst . <RARE_TOKEN> ( ) ) ; </a> 
<a> buffer . getBytes ( index + adjustment , dst ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void setByte ( int index , int value ) { </a> 
<a> checkIndex ( index ) ; </a> 
<a> buffer . setByte ( index + adjustment , value ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( int index , int value ) { </a> 
<a> checkIndex ( index , 2 ) ; </a> 
<a> buffer . <RARE_TOKEN> ( index + adjustment , value ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( int index , int value ) { </a> 
<a> checkIndex ( index , 3 ) ; </a> 
<a> buffer . <RARE_TOKEN> ( index + adjustment , value ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( int index , int value ) { </a> 
<a> checkIndex ( index , 4 ) ; </a> 
<a> buffer . <RARE_TOKEN> ( index + adjustment , value ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( int index , long value ) { </a> 
<a> checkIndex ( index , 8 ) ; </a> 
<a> buffer . <RARE_TOKEN> ( index + adjustment , value ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void setBytes ( int index , byte [ ] src , int srcIndex , int length ) { </a> 
<a> checkIndex ( index , length ) ; </a> 
<a> buffer . setBytes ( index + adjustment , src , srcIndex , length ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void setBytes ( int index , ByteBuf src , int srcIndex , int length ) { </a> 
<a> checkIndex ( index , length ) ; </a> 
<a> buffer . setBytes ( index + adjustment , src , srcIndex , length ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void setBytes ( int index , ByteBuffer src ) { </a> 
<a> checkIndex ( index , src . <RARE_TOKEN> ( ) ) ; </a> 
<a> buffer . setBytes ( index + adjustment , src ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void getBytes ( int index , OutputStream out , int length ) </a> 
<a> throws IOException { </a> 
<a> checkIndex ( index , length ) ; </a> 
<a> buffer . getBytes ( index + adjustment , out , length ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int getBytes ( int index , <RARE_TOKEN> out , int length ) </a> 
<a> throws IOException { </a> 
<a> checkIndex ( index , length ) ; </a> 
<a> return buffer . getBytes ( index + adjustment , out , length ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int setBytes ( int index , InputStream in , int length ) </a> 
<a> throws IOException { </a> 
<a> checkIndex ( index , length ) ; </a> 
<a> return buffer . setBytes ( index + adjustment , in , length ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int setBytes ( int index , <RARE_TOKEN> in , int length ) </a> 
<a> throws IOException { </a> 
<a> checkIndex ( index , length ) ; </a> 
<a> return buffer . setBytes ( index + adjustment , in , length ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return buffer . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ByteBuffer nioBuffer ( int index , int length ) { </a> 
<a> checkIndex ( index , length ) ; </a> 
<a> return buffer . nioBuffer ( index + adjustment , length ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return buffer . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ByteBuffer [ ] nioBuffers ( int index , int length ) { </a> 
<a> checkIndex ( index , length ) ; </a> 
<a> return buffer . nioBuffers ( index , length ) ; </a> 
<a> } </a> 
<a> private void checkIndex ( int index ) { </a> 
<a> if ( index < 0 || index >= capacity ( ) ) { </a> 
<a> throw new IndexOutOfBoundsException ( <RARE_TOKEN> <RARE_TOKEN> " + index </a> 
<a> + ", <RARE_TOKEN> is " + capacity ( ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private void checkIndex ( int <RARE_TOKEN> , int length ) { </a> 
<a> if ( length < 0 ) { </a> 
<a> throw new IllegalArgumentException ( </a> 
<a> <RARE_TOKEN> is <RARE_TOKEN> " + length ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> < 0 ) { </a> 
<a> throw new IndexOutOfBoundsException ( <RARE_TOKEN> <RARE_TOKEN> be <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> + length > capacity ( ) ) { </a> 
<a> throw new IndexOutOfBoundsException ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> - <RARE_TOKEN> <RARE_TOKEN> " </a> 
<a> + ( <RARE_TOKEN> + length ) + ", <RARE_TOKEN> is " + capacity ( ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public <RARE_TOKEN> unsafe ( ) { </a> 
<a> return unsafe ; </a> 
<a> } </a> 
<a> private final class <RARE_TOKEN> implements <RARE_TOKEN> { </a> 
<a> @ Override </a> 
<a> public ByteBuffer nioBuffer ( ) { </a> 
<a> return buffer . nioBuffer ( adjustment , length ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ByteBuffer [ ] nioBuffers ( ) { </a> 
<a> return buffer . nioBuffers ( adjustment , length ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ByteBuf <RARE_TOKEN> ( int <RARE_TOKEN> ) { </a> 
<a> return buffer . unsafe ( ) . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> throw new UnsupportedOperationException ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> buffer . unsafe ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> buffer . unsafe ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . buffer ; </a> 
<a> import java . io . IOException ; </a> 
<a> import java . io . InputStream ; </a> 
<a> import java . io . OutputStream ; </a> 
<a> import java . nio . ByteBuffer ; </a> 
<a> import java . nio . ByteOrder ; </a> 
<a> import java . nio . channels . <RARE_TOKEN> ; </a> 
<a> import java . nio . channels . <RARE_TOKEN> ; </a> 
<a> import java . nio . charset . Charset ; </a> 
<a> public class <RARE_TOKEN> implements <RARE_TOKEN> { </a> 
<a> private final ByteBuf buf ; </a> 
<a> private final ByteOrder order ; </a> 
<a> public <RARE_TOKEN> ( ByteBuf buf ) { </a> 
<a> if ( buf == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> this . buf = buf ; </a> 
<a> if ( buf . order ( ) == ByteOrder . <RARE_TOKEN> ) { </a> 
<a> order = ByteOrder . <RARE_TOKEN> ; </a> 
<a> } else { </a> 
<a> order = ByteOrder . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ByteOrder order ( ) { </a> 
<a> return order ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ByteBuf order ( ByteOrder <RARE_TOKEN> ) { </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> == order ) { </a> 
<a> return this ; </a> 
<a> } </a> 
<a> return buf ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ByteBuf <RARE_TOKEN> ( ) { </a> 
<a> return buf ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return buf . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ChannelBufType type ( ) { </a> 
<a> return ChannelBufType . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int capacity ( ) { </a> 
<a> return buf . capacity ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void capacity ( int newCapacity ) { </a> 
<a> buf . capacity ( newCapacity ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int maxCapacity ( ) { </a> 
<a> return buf . maxCapacity ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return buf . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int readerIndex ( ) { </a> 
<a> return buf . readerIndex ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void readerIndex ( int readerIndex ) { </a> 
<a> buf . readerIndex ( readerIndex ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int writerIndex ( ) { </a> 
<a> return buf . writerIndex ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void writerIndex ( int writerIndex ) { </a> 
<a> buf . writerIndex ( writerIndex ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( int readerIndex , int writerIndex ) { </a> 
<a> buf . <RARE_TOKEN> ( readerIndex , writerIndex ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int readableBytes ( ) { </a> 
<a> return buf . readableBytes ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int <RARE_TOKEN> ( ) { </a> 
<a> return buf . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean readable ( ) { </a> 
<a> return buf . readable ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return buf . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void clear ( ) { </a> 
<a> buf . clear ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> buf . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> buf . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> buf . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> buf . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> buf . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( int <RARE_TOKEN> ) { </a> 
<a> buf . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int <RARE_TOKEN> ( int <RARE_TOKEN> , boolean <RARE_TOKEN> ) { </a> 
<a> return buf . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( int index ) { </a> 
<a> return buf . <RARE_TOKEN> ( index ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public byte getByte ( int index ) { </a> 
<a> return buf . getByte ( index ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public short <RARE_TOKEN> ( int index ) { </a> 
<a> return buf . <RARE_TOKEN> ( index ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public short <RARE_TOKEN> ( int index ) { </a> 
<a> return ByteBufUtil . <RARE_TOKEN> ( buf . <RARE_TOKEN> ( index ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int <RARE_TOKEN> ( int index ) { </a> 
<a> return <RARE_TOKEN> ( index ) & <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int <RARE_TOKEN> ( int index ) { </a> 
<a> return ByteBufUtil . <RARE_TOKEN> ( buf . <RARE_TOKEN> ( index ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int <RARE_TOKEN> ( int index ) { </a> 
<a> return <RARE_TOKEN> ( index ) & <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int getInt ( int index ) { </a> 
<a> return ByteBufUtil . <RARE_TOKEN> ( buf . getInt ( index ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public long <RARE_TOKEN> ( int index ) { </a> 
<a> return getInt ( index ) & <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public long getLong ( int index ) { </a> 
<a> return ByteBufUtil . <RARE_TOKEN> ( buf . getLong ( index ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public char <RARE_TOKEN> ( int index ) { </a> 
<a> return ( char ) <RARE_TOKEN> ( index ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public float <RARE_TOKEN> ( int index ) { </a> 
<a> return <RARE_TOKEN> . <RARE_TOKEN> ( getInt ( index ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public double <RARE_TOKEN> ( int index ) { </a> 
<a> return <RARE_TOKEN> . <RARE_TOKEN> ( getLong ( index ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void getBytes ( int index , ByteBuf dst ) { </a> 
<a> buf . getBytes ( index , dst ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void getBytes ( int index , ByteBuf dst , int length ) { </a> 
<a> buf . getBytes ( index , dst , length ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void getBytes ( int index , ByteBuf dst , int dstIndex , int length ) { </a> 
<a> buf . getBytes ( index , dst , dstIndex , length ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void getBytes ( int index , byte [ ] dst ) { </a> 
<a> buf . getBytes ( index , dst ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void getBytes ( int index , byte [ ] dst , int dstIndex , int length ) { </a> 
<a> buf . getBytes ( index , dst , dstIndex , length ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void getBytes ( int index , ByteBuffer dst ) { </a> 
<a> buf . getBytes ( index , dst ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void getBytes ( int index , OutputStream out , int length ) throws IOException { </a> 
<a> buf . getBytes ( index , out , length ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int getBytes ( int index , <RARE_TOKEN> out , int length ) throws IOException { </a> 
<a> return buf . getBytes ( index , out , length ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( int index , boolean value ) { </a> 
<a> buf . <RARE_TOKEN> ( index , value ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void setByte ( int index , int value ) { </a> 
<a> buf . setByte ( index , value ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( int index , int value ) { </a> 
<a> buf . <RARE_TOKEN> ( index , ByteBufUtil . <RARE_TOKEN> ( ( short ) value ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( int index , int value ) { </a> 
<a> buf . <RARE_TOKEN> ( index , ByteBufUtil . <RARE_TOKEN> ( value ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( int index , int value ) { </a> 
<a> buf . <RARE_TOKEN> ( index , ByteBufUtil . <RARE_TOKEN> ( value ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( int index , long value ) { </a> 
<a> buf . <RARE_TOKEN> ( index , ByteBufUtil . <RARE_TOKEN> ( value ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( int index , int value ) { </a> 
<a> <RARE_TOKEN> ( index , value ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( int index , float value ) { </a> 
<a> <RARE_TOKEN> ( index , <RARE_TOKEN> . <RARE_TOKEN> ( value ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( int index , double value ) { </a> 
<a> <RARE_TOKEN> ( index , <RARE_TOKEN> . <RARE_TOKEN> ( value ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void setBytes ( int index , ByteBuf src ) { </a> 
<a> buf . setBytes ( index , src ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void setBytes ( int index , ByteBuf src , int length ) { </a> 
<a> buf . setBytes ( index , src , length ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void setBytes ( int index , ByteBuf src , int srcIndex , int length ) { </a> 
<a> buf . setBytes ( index , src , srcIndex , length ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void setBytes ( int index , byte [ ] src ) { </a> 
<a> buf . setBytes ( index , src ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void setBytes ( int index , byte [ ] src , int srcIndex , int length ) { </a> 
<a> buf . setBytes ( index , src , srcIndex , length ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void setBytes ( int index , ByteBuffer src ) { </a> 
<a> buf . setBytes ( index , src ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int setBytes ( int index , InputStream in , int length ) throws IOException { </a> 
<a> return buf . setBytes ( index , in , length ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int setBytes ( int index , <RARE_TOKEN> in , int length ) throws IOException { </a> 
<a> return buf . setBytes ( index , in , length ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( int index , int length ) { </a> 
<a> buf . <RARE_TOKEN> ( index , length ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return buf . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public byte <RARE_TOKEN> ( ) { </a> 
<a> return buf . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public short <RARE_TOKEN> ( ) { </a> 
<a> return buf . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public short <RARE_TOKEN> ( ) { </a> 
<a> return ByteBufUtil . <RARE_TOKEN> ( buf . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ( ) & <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int <RARE_TOKEN> ( ) { </a> 
<a> return ByteBufUtil . <RARE_TOKEN> ( buf . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ( ) & <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int <RARE_TOKEN> ( ) { </a> 
<a> return ByteBufUtil . <RARE_TOKEN> ( buf . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public long <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ( ) & <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public long <RARE_TOKEN> ( ) { </a> 
<a> return ByteBufUtil . <RARE_TOKEN> ( buf . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public char <RARE_TOKEN> ( ) { </a> 
<a> return ( char ) <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public float <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public double <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ByteBuf readBytes ( int length ) { </a> 
<a> return buf . readBytes ( length ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ByteBuf <RARE_TOKEN> ( int length ) { </a> 
<a> return buf . <RARE_TOKEN> ( length ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void readBytes ( ByteBuf dst ) { </a> 
<a> buf . readBytes ( dst ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void readBytes ( ByteBuf dst , int length ) { </a> 
<a> buf . readBytes ( dst , length ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void readBytes ( ByteBuf dst , int dstIndex , int length ) { </a> 
<a> buf . readBytes ( dst , dstIndex , length ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void readBytes ( byte [ ] dst ) { </a> 
<a> buf . readBytes ( dst ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void readBytes ( byte [ ] dst , int dstIndex , int length ) { </a> 
<a> buf . readBytes ( dst , dstIndex , length ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void readBytes ( ByteBuffer dst ) { </a> 
<a> buf . readBytes ( dst ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void readBytes ( OutputStream out , int length ) throws IOException { </a> 
<a> buf . readBytes ( out , length ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int readBytes ( <RARE_TOKEN> out , int length ) throws IOException { </a> 
<a> return buf . readBytes ( out , length ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void skipBytes ( int length ) { </a> 
<a> buf . skipBytes ( length ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( boolean value ) { </a> 
<a> buf . <RARE_TOKEN> ( value ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void writeByte ( int value ) { </a> 
<a> buf . writeByte ( value ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( int value ) { </a> 
<a> buf . <RARE_TOKEN> ( ByteBufUtil . <RARE_TOKEN> ( ( short ) value ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( int value ) { </a> 
<a> buf . <RARE_TOKEN> ( ByteBufUtil . <RARE_TOKEN> ( value ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void writeInt ( int value ) { </a> 
<a> buf . writeInt ( ByteBufUtil . <RARE_TOKEN> ( value ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( long value ) { </a> 
<a> buf . <RARE_TOKEN> ( ByteBufUtil . <RARE_TOKEN> ( value ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( int value ) { </a> 
<a> <RARE_TOKEN> ( value ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( float value ) { </a> 
<a> writeInt ( <RARE_TOKEN> . <RARE_TOKEN> ( value ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( double value ) { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ( value ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void writeBytes ( ByteBuf src ) { </a> 
<a> buf . writeBytes ( src ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void writeBytes ( ByteBuf src , int length ) { </a> 
<a> buf . writeBytes ( src , length ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void writeBytes ( ByteBuf src , int srcIndex , int length ) { </a> 
<a> buf . writeBytes ( src , srcIndex , length ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void writeBytes ( byte [ ] src ) { </a> 
<a> buf . writeBytes ( src ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void writeBytes ( byte [ ] src , int srcIndex , int length ) { </a> 
<a> buf . writeBytes ( src , srcIndex , length ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void writeBytes ( ByteBuffer src ) { </a> 
<a> buf . writeBytes ( src ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int writeBytes ( InputStream in , int length ) throws IOException { </a> 
<a> return buf . writeBytes ( in , length ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int writeBytes ( <RARE_TOKEN> in , int length ) throws IOException { </a> 
<a> return buf . writeBytes ( in , length ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( int length ) { </a> 
<a> buf . <RARE_TOKEN> ( length ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int indexOf ( int fromIndex , int <RARE_TOKEN> , byte value ) { </a> 
<a> return buf . indexOf ( fromIndex , <RARE_TOKEN> , value ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int indexOf ( int fromIndex , int <RARE_TOKEN> , ByteBufIndexFinder <RARE_TOKEN> ) { </a> 
<a> return buf . indexOf ( fromIndex , <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int bytesBefore ( byte value ) { </a> 
<a> return buf . bytesBefore ( value ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int bytesBefore ( ByteBufIndexFinder <RARE_TOKEN> ) { </a> 
<a> return buf . bytesBefore ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int bytesBefore ( int length , byte value ) { </a> 
<a> return buf . bytesBefore ( length , value ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int bytesBefore ( int length , ByteBufIndexFinder <RARE_TOKEN> ) { </a> 
<a> return buf . bytesBefore ( length , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int bytesBefore ( int index , int length , byte value ) { </a> 
<a> return buf . bytesBefore ( index , length , value ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int bytesBefore ( int index , int length , ByteBufIndexFinder <RARE_TOKEN> ) { </a> 
<a> return buf . bytesBefore ( index , length , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ByteBuf <RARE_TOKEN> ( ) { </a> 
<a> return buf . <RARE_TOKEN> ( ) . order ( order ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ByteBuf <RARE_TOKEN> ( int index , int length ) { </a> 
<a> return buf . <RARE_TOKEN> ( index , length ) . order ( order ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ByteBuf slice ( ) { </a> 
<a> return buf . slice ( ) . order ( order ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ByteBuf slice ( int index , int length ) { </a> 
<a> return buf . slice ( index , length ) . order ( order ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ByteBuf <RARE_TOKEN> ( ) { </a> 
<a> return buf . <RARE_TOKEN> ( ) . order ( order ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return buf . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ByteBuffer nioBuffer ( ) { </a> 
<a> return buf . nioBuffer ( ) . order ( order ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ByteBuffer nioBuffer ( int index , int length ) { </a> 
<a> return buf . nioBuffer ( index , length ) . order ( order ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return buf . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ByteBuffer [ ] nioBuffers ( ) { </a> 
<a> ByteBuffer [ ] nioBuffers = buf . nioBuffers ( ) ; </a> 
<a> for ( int i = 0 ; i < nioBuffers . length ; i ++ ) { </a> 
<a> nioBuffers [ i ] = nioBuffers [ i ] . order ( order ) ; </a> 
<a> } </a> 
<a> return nioBuffers ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ByteBuffer [ ] nioBuffers ( int offset , int length ) { </a> 
<a> ByteBuffer [ ] nioBuffers = buf . nioBuffers ( offset , length ) ; </a> 
<a> for ( int i = 0 ; i < nioBuffers . length ; i ++ ) { </a> 
<a> nioBuffers [ i ] = nioBuffers [ i ] . order ( order ) ; </a> 
<a> } </a> 
<a> return nioBuffers ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return buf . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public byte [ ] array ( ) { </a> 
<a> return buf . array ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int <RARE_TOKEN> ( ) { </a> 
<a> return buf . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public String toString ( Charset charset ) { </a> 
<a> return buf . toString ( charset ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public String toString ( int index , int length , Charset charset ) { </a> 
<a> return buf . toString ( index , length , charset ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public <RARE_TOKEN> unsafe ( ) { </a> 
<a> return buf . unsafe ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int hashCode ( ) { </a> 
<a> return buf . hashCode ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean equals ( Object obj ) { </a> 
<a> if ( this == obj ) { </a> 
<a> return true ; </a> 
<a> } </a> 
<a> if ( obj instanceof ByteBuf ) { </a> 
<a> return ByteBufUtil . equals ( this , ( ByteBuf ) obj ) ; </a> 
<a> } </a> 
<a> return false ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int <RARE_TOKEN> ( ByteBuf buffer ) { </a> 
<a> return ByteBufUtil . <RARE_TOKEN> ( this , buffer ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public String toString ( ) { </a> 
<a> return <RARE_TOKEN> + buf . toString ( ) + <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . buffer ; </a> 
<a> import java . nio . ByteBuffer ; </a> 
<a> import java . nio . ByteOrder ; </a> 
<a> import java . nio . <RARE_TOKEN> ; </a> 
<a> import java . nio . charset . Charset ; </a> 
<a> import java . util . ArrayList ; </a> 
<a> import java . util . List ; </a> 
<a> import java . util . <RARE_TOKEN> ; </a> 
<a> public final class Unpooled { </a> 
<a> public static final ByteOrder <RARE_TOKEN> = ByteOrder . <RARE_TOKEN> ; </a> 
<a> public static final ByteOrder <RARE_TOKEN> = ByteOrder . <RARE_TOKEN> ; </a> 
<a> public static final ByteBuf EMPTY_BUFFER = new <RARE_TOKEN> ( 0 , 0 ) { </a> 
<a> @ Override </a> 
<a> public ByteBuf order ( ByteOrder <RARE_TOKEN> ) { </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> return this ; </a> 
<a> } </a> 
<a> } ; </a> 
<a> public static < T > MessageBuf < T > <RARE_TOKEN> ( ) { </a> 
<a> return new <RARE_TOKEN> < T > ( ) ; </a> 
<a> } </a> 
<a> public static < T > MessageBuf < T > <RARE_TOKEN> ( int <RARE_TOKEN> ) { </a> 
<a> return new <RARE_TOKEN> < T > ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public static < T > MessageBuf < T > wrappedBuffer ( <RARE_TOKEN> < T > queue ) { </a> 
<a> if ( queue instanceof MessageBuf ) { </a> 
<a> return ( MessageBuf < T > ) queue ; </a> 
<a> } </a> 
<a> return new <RARE_TOKEN> < T > ( queue ) ; </a> 
<a> } </a> 
<a> public static ByteBuf buffer ( ) { </a> 
<a> return buffer ( <RARE_TOKEN> , Integer . MAX_VALUE ) ; </a> 
<a> } </a> 
<a> public static ByteBuf <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ( <RARE_TOKEN> , Integer . MAX_VALUE ) ; </a> 
<a> } </a> 
<a> public static ByteBuf buffer ( int <RARE_TOKEN> ) { </a> 
<a> return buffer ( <RARE_TOKEN> , Integer . MAX_VALUE ) ; </a> 
<a> } </a> 
<a> public static ByteBuf <RARE_TOKEN> ( int <RARE_TOKEN> ) { </a> 
<a> return <RARE_TOKEN> ( <RARE_TOKEN> , Integer . MAX_VALUE ) ; </a> 
<a> } </a> 
<a> public static ByteBuf buffer ( int <RARE_TOKEN> , int maxCapacity ) { </a> 
<a> if ( <RARE_TOKEN> == 0 && maxCapacity == 0 ) { </a> 
<a> return EMPTY_BUFFER ; </a> 
<a> } </a> 
<a> return new <RARE_TOKEN> ( <RARE_TOKEN> , maxCapacity ) ; </a> 
<a> } </a> 
<a> public static ByteBuf <RARE_TOKEN> ( int <RARE_TOKEN> , int maxCapacity ) { </a> 
<a> if ( <RARE_TOKEN> == 0 && maxCapacity == 0 ) { </a> 
<a> return EMPTY_BUFFER ; </a> 
<a> } </a> 
<a> return new <RARE_TOKEN> ( <RARE_TOKEN> , maxCapacity ) ; </a> 
<a> } </a> 
<a> public static ByteBuf wrappedBuffer ( byte [ ] array ) { </a> 
<a> if ( array . length == 0 ) { </a> 
<a> return EMPTY_BUFFER ; </a> 
<a> } </a> 
<a> return new <RARE_TOKEN> ( array , array . length ) ; </a> 
<a> } </a> 
<a> public static ByteBuf wrappedBuffer ( byte [ ] array , int offset , int length ) { </a> 
<a> if ( length == 0 ) { </a> 
<a> return EMPTY_BUFFER ; </a> 
<a> } </a> 
<a> if ( offset == 0 && length == array . length ) { </a> 
<a> return wrappedBuffer ( array ) ; </a> 
<a> } </a> 
<a> return new <RARE_TOKEN> ( wrappedBuffer ( array ) , offset , length ) ; </a> 
<a> } </a> 
<a> public static ByteBuf wrappedBuffer ( ByteBuffer buffer ) { </a> 
<a> if ( ! buffer . <RARE_TOKEN> ( ) ) { </a> 
<a> return EMPTY_BUFFER ; </a> 
<a> } </a> 
<a> if ( buffer . <RARE_TOKEN> ( ) ) { </a> 
<a> return wrappedBuffer ( </a> 
<a> buffer . array ( ) , </a> 
<a> buffer . <RARE_TOKEN> ( ) + buffer . position ( ) , </a> 
<a> buffer . <RARE_TOKEN> ( ) ) . order ( buffer . order ( ) ) ; </a> 
<a> } else { </a> 
<a> return new <RARE_TOKEN> ( buffer , buffer . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public static ByteBuf wrappedBuffer ( ByteBuf buffer ) { </a> 
<a> if ( buffer . readable ( ) ) { </a> 
<a> return buffer . slice ( ) ; </a> 
<a> } else { </a> 
<a> return EMPTY_BUFFER ; </a> 
<a> } </a> 
<a> } </a> 
<a> public static ByteBuf wrappedBuffer ( byte [ ] ... <RARE_TOKEN> ) { </a> 
<a> return wrappedBuffer ( 16 , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public static ByteBuf wrappedBuffer ( ByteBuf ... buffers ) { </a> 
<a> return wrappedBuffer ( 16 , buffers ) ; </a> 
<a> } </a> 
<a> public static ByteBuf wrappedBuffer ( ByteBuffer ... buffers ) { </a> 
<a> return wrappedBuffer ( 16 , buffers ) ; </a> 
<a> } </a> 
<a> public static ByteBuf wrappedBuffer ( int <RARE_TOKEN> , byte [ ] ... <RARE_TOKEN> ) { </a> 
<a> switch ( <RARE_TOKEN> . length ) { </a> 
<a> case 0 : </a> 
<a> break ; </a> 
<a> case 1 : </a> 
<a> if ( <RARE_TOKEN> [ 0 ] . length != 0 ) { </a> 
<a> return wrappedBuffer ( <RARE_TOKEN> [ 0 ] ) ; </a> 
<a> } </a> 
<a> break ; </a> 
<a> default : </a> 
<a> final List < ByteBuf > components = new ArrayList < ByteBuf > ( <RARE_TOKEN> . length ) ; </a> 
<a> for ( byte [ ] a : <RARE_TOKEN> ) { </a> 
<a> if ( a == null ) { </a> 
<a> break ; </a> 
<a> } </a> 
<a> if ( a . length > 0 ) { </a> 
<a> components . add ( wrappedBuffer ( a ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> if ( ! components . isEmpty ( ) ) { </a> 
<a> return new <RARE_TOKEN> ( <RARE_TOKEN> , components ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> return EMPTY_BUFFER ; </a> 
<a> } </a> 
<a> public static ByteBuf wrappedBuffer ( int <RARE_TOKEN> , ByteBuf ... buffers ) { </a> 
<a> switch ( buffers . length ) { </a> 
<a> case 0 : </a> 
<a> break ; </a> 
<a> case 1 : </a> 
<a> if ( buffers [ 0 ] . readable ( ) ) { </a> 
<a> return wrappedBuffer ( buffers [ 0 ] . order ( <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> break ; </a> 
<a> default : </a> 
<a> for ( ByteBuf b : buffers ) { </a> 
<a> if ( b . readable ( ) ) { </a> 
<a> return new <RARE_TOKEN> ( <RARE_TOKEN> , buffers ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> return EMPTY_BUFFER ; </a> 
<a> } </a> 
<a> public static ByteBuf wrappedBuffer ( int <RARE_TOKEN> , ByteBuffer ... buffers ) { </a> 
<a> switch ( buffers . length ) { </a> 
<a> case 0 : </a> 
<a> break ; </a> 
<a> case 1 : </a> 
<a> if ( buffers [ 0 ] . <RARE_TOKEN> ( ) ) { </a> 
<a> return wrappedBuffer ( buffers [ 0 ] . order ( <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> break ; </a> 
<a> default : </a> 
<a> final List < ByteBuf > components = new ArrayList < ByteBuf > ( buffers . length ) ; </a> 
<a> for ( ByteBuffer b : buffers ) { </a> 
<a> if ( b == null ) { </a> 
<a> break ; </a> 
<a> } </a> 
<a> if ( b . <RARE_TOKEN> ( ) > 0 ) { </a> 
<a> components . add ( wrappedBuffer ( b . order ( <RARE_TOKEN> ) ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> if ( ! components . isEmpty ( ) ) { </a> 
<a> return new <RARE_TOKEN> ( <RARE_TOKEN> , components ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> return EMPTY_BUFFER ; </a> 
<a> } </a> 
<a> public static <RARE_TOKEN> <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ( 16 ) ; </a> 
<a> } </a> 
<a> public static <RARE_TOKEN> <RARE_TOKEN> ( int <RARE_TOKEN> ) { </a> 
<a> return new <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public static ByteBuf copiedBuffer ( byte [ ] array ) { </a> 
<a> if ( array . length == 0 ) { </a> 
<a> return EMPTY_BUFFER ; </a> 
<a> } </a> 
<a> return wrappedBuffer ( array . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> public static ByteBuf copiedBuffer ( byte [ ] array , int offset , int length ) { </a> 
<a> if ( length == 0 ) { </a> 
<a> return EMPTY_BUFFER ; </a> 
<a> } </a> 
<a> byte [ ] <RARE_TOKEN> = new byte [ length ] ; </a> 
<a> System . <RARE_TOKEN> ( array , offset , <RARE_TOKEN> , 0 , length ) ; </a> 
<a> return wrappedBuffer ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public static ByteBuf copiedBuffer ( ByteBuffer buffer ) { </a> 
<a> int length = buffer . <RARE_TOKEN> ( ) ; </a> 
<a> if ( length == 0 ) { </a> 
<a> return EMPTY_BUFFER ; </a> 
<a> } </a> 
<a> byte [ ] <RARE_TOKEN> = new byte [ length ] ; </a> 
<a> int position = buffer . position ( ) ; </a> 
<a> try { </a> 
<a> buffer . get ( <RARE_TOKEN> ) ; </a> 
<a> } finally { </a> 
<a> buffer . position ( position ) ; </a> 
<a> } </a> 
<a> return wrappedBuffer ( <RARE_TOKEN> ) . order ( buffer . order ( ) ) ; </a> 
<a> } </a> 
<a> public static ByteBuf copiedBuffer ( ByteBuf buffer ) { </a> 
<a> if ( buffer . readable ( ) ) { </a> 
<a> return buffer . <RARE_TOKEN> ( ) ; </a> 
<a> } else { </a> 
<a> return EMPTY_BUFFER ; </a> 
<a> } </a> 
<a> } </a> 
<a> public static ByteBuf copiedBuffer ( byte [ ] ... <RARE_TOKEN> ) { </a> 
<a> switch ( <RARE_TOKEN> . length ) { </a> 
<a> case 0 : </a> 
<a> return EMPTY_BUFFER ; </a> 
<a> case 1 : </a> 
<a> if ( <RARE_TOKEN> [ 0 ] . length == 0 ) { </a> 
<a> return EMPTY_BUFFER ; </a> 
<a> } else { </a> 
<a> return copiedBuffer ( <RARE_TOKEN> [ 0 ] ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> int length = 0 ; </a> 
<a> for ( byte [ ] a : <RARE_TOKEN> ) { </a> 
<a> if ( Integer . MAX_VALUE - length < a . length ) { </a> 
<a> throw new IllegalArgumentException ( </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> length of the <RARE_TOKEN> <RARE_TOKEN> is <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> length += a . length ; </a> 
<a> } </a> 
<a> if ( length == 0 ) { </a> 
<a> return EMPTY_BUFFER ; </a> 
<a> } </a> 
<a> byte [ ] <RARE_TOKEN> = new byte [ length ] ; </a> 
<a> for ( int i = 0 , j = 0 ; i < <RARE_TOKEN> . length ; i ++ ) { </a> 
<a> byte [ ] a = <RARE_TOKEN> [ i ] ; </a> 
<a> System . <RARE_TOKEN> ( a , 0 , <RARE_TOKEN> , j , a . length ) ; </a> 
<a> j += a . length ; </a> 
<a> } </a> 
<a> return wrappedBuffer ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public static ByteBuf copiedBuffer ( ByteBuf ... buffers ) { </a> 
<a> switch ( buffers . length ) { </a> 
<a> case 0 : </a> 
<a> return EMPTY_BUFFER ; </a> 
<a> case 1 : </a> 
<a> return copiedBuffer ( buffers [ 0 ] ) ; </a> 
<a> } </a> 
<a> ByteOrder order = null ; </a> 
<a> int length = 0 ; </a> 
<a> for ( ByteBuf b : buffers ) { </a> 
<a> int <RARE_TOKEN> = b . readableBytes ( ) ; </a> 
<a> if ( <RARE_TOKEN> <= 0 ) { </a> 
<a> continue ; </a> 
<a> } </a> 
<a> if ( Integer . MAX_VALUE - length < <RARE_TOKEN> ) { </a> 
<a> throw new IllegalArgumentException ( </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> length of the <RARE_TOKEN> buffers is <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> length += <RARE_TOKEN> ; </a> 
<a> if ( order != null ) { </a> 
<a> if ( ! order . equals ( b . order ( ) ) ) { </a> 
<a> throw new IllegalArgumentException ( <RARE_TOKEN> byte <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } else { </a> 
<a> order = b . order ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> if ( length == 0 ) { </a> 
<a> return EMPTY_BUFFER ; </a> 
<a> } </a> 
<a> byte [ ] <RARE_TOKEN> = new byte [ length ] ; </a> 
<a> for ( int i = 0 , j = 0 ; i < buffers . length ; i ++ ) { </a> 
<a> ByteBuf b = buffers [ i ] ; </a> 
<a> int <RARE_TOKEN> = b . readableBytes ( ) ; </a> 
<a> b . getBytes ( b . readerIndex ( ) , <RARE_TOKEN> , j , <RARE_TOKEN> ) ; </a> 
<a> j += <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> return wrappedBuffer ( <RARE_TOKEN> ) . order ( order ) ; </a> 
<a> } </a> 
<a> public static ByteBuf copiedBuffer ( ByteBuffer ... buffers ) { </a> 
<a> switch ( buffers . length ) { </a> 
<a> case 0 : </a> 
<a> return EMPTY_BUFFER ; </a> 
<a> case 1 : </a> 
<a> return copiedBuffer ( buffers [ 0 ] ) ; </a> 
<a> } </a> 
<a> ByteOrder order = null ; </a> 
<a> int length = 0 ; </a> 
<a> for ( ByteBuffer b : buffers ) { </a> 
<a> int <RARE_TOKEN> = b . <RARE_TOKEN> ( ) ; </a> 
<a> if ( <RARE_TOKEN> <= 0 ) { </a> 
<a> continue ; </a> 
<a> } </a> 
<a> if ( Integer . MAX_VALUE - length < <RARE_TOKEN> ) { </a> 
<a> throw new IllegalArgumentException ( </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> length of the <RARE_TOKEN> buffers is <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> length += <RARE_TOKEN> ; </a> 
<a> if ( order != null ) { </a> 
<a> if ( ! order . equals ( b . order ( ) ) ) { </a> 
<a> throw new IllegalArgumentException ( <RARE_TOKEN> byte <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } else { </a> 
<a> order = b . order ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> if ( length == 0 ) { </a> 
<a> return EMPTY_BUFFER ; </a> 
<a> } </a> 
<a> byte [ ] <RARE_TOKEN> = new byte [ length ] ; </a> 
<a> for ( int i = 0 , j = 0 ; i < buffers . length ; i ++ ) { </a> 
<a> ByteBuffer b = buffers [ i ] ; </a> 
<a> int <RARE_TOKEN> = b . <RARE_TOKEN> ( ) ; </a> 
<a> int <RARE_TOKEN> = b . position ( ) ; </a> 
<a> b . get ( <RARE_TOKEN> , j , <RARE_TOKEN> ) ; </a> 
<a> b . position ( <RARE_TOKEN> ) ; </a> 
<a> j += <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> return wrappedBuffer ( <RARE_TOKEN> ) . order ( order ) ; </a> 
<a> } </a> 
<a> public static ByteBuf copiedBuffer ( <RARE_TOKEN> string , Charset charset ) { </a> 
<a> if ( string == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( string instanceof <RARE_TOKEN> ) { </a> 
<a> return copiedBuffer ( ( <RARE_TOKEN> ) string , charset ) ; </a> 
<a> } </a> 
<a> return copiedBuffer ( <RARE_TOKEN> . wrap ( string ) , charset ) ; </a> 
<a> } </a> 
<a> public static ByteBuf copiedBuffer ( </a> 
<a> <RARE_TOKEN> string , int offset , int length , Charset charset ) { </a> 
<a> if ( string == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( length == 0 ) { </a> 
<a> return EMPTY_BUFFER ; </a> 
<a> } </a> 
<a> if ( string instanceof <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> buf = ( <RARE_TOKEN> ) string ; </a> 
<a> if ( buf . <RARE_TOKEN> ( ) ) { </a> 
<a> return copiedBuffer ( </a> 
<a> buf . array ( ) , </a> 
<a> buf . <RARE_TOKEN> ( ) + buf . position ( ) + offset , </a> 
<a> length , charset ) ; </a> 
<a> } </a> 
<a> buf = buf . slice ( ) ; </a> 
<a> buf . limit ( length ) ; </a> 
<a> buf . position ( offset ) ; </a> 
<a> return copiedBuffer ( buf , charset ) ; </a> 
<a> } </a> 
<a> return copiedBuffer ( <RARE_TOKEN> . wrap ( string , offset , offset + length ) , charset ) ; </a> 
<a> } </a> 
<a> public static ByteBuf copiedBuffer ( char [ ] array , Charset charset ) { </a> 
<a> return copiedBuffer ( array , 0 , array . length , charset ) ; </a> 
<a> } </a> 
<a> public static ByteBuf copiedBuffer ( char [ ] array , int offset , int length , Charset charset ) { </a> 
<a> if ( array == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( length == 0 ) { </a> 
<a> return EMPTY_BUFFER ; </a> 
<a> } </a> 
<a> return copiedBuffer ( <RARE_TOKEN> . wrap ( array , offset , length ) , charset ) ; </a> 
<a> } </a> 
<a> private static ByteBuf copiedBuffer ( <RARE_TOKEN> buffer , Charset charset ) { </a> 
<a> ByteBuffer dst = ByteBufUtil . <RARE_TOKEN> ( buffer , charset ) ; </a> 
<a> ByteBuf result = wrappedBuffer ( dst . array ( ) ) ; </a> 
<a> result . writerIndex ( dst . <RARE_TOKEN> ( ) ) ; </a> 
<a> return result ; </a> 
<a> } </a> 
<a> public static ByteBuf <RARE_TOKEN> ( ByteBuf buffer ) { </a> 
<a> if ( buffer instanceof <RARE_TOKEN> ) { </a> 
<a> buffer = ( ( <RARE_TOKEN> ) buffer ) . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> return new <RARE_TOKEN> ( buffer ) ; </a> 
<a> } </a> 
<a> public static ByteBuf <RARE_TOKEN> ( int value ) { </a> 
<a> ByteBuf buf = buffer ( 4 ) ; </a> 
<a> buf . writeInt ( value ) ; </a> 
<a> return buf ; </a> 
<a> } </a> 
<a> public static ByteBuf <RARE_TOKEN> ( int ... values ) { </a> 
<a> if ( values == null || values . length == 0 ) { </a> 
<a> return EMPTY_BUFFER ; </a> 
<a> } </a> 
<a> ByteBuf buffer = buffer ( values . length * 4 ) ; </a> 
<a> for ( int v : values ) { </a> 
<a> buffer . writeInt ( v ) ; </a> 
<a> } </a> 
<a> return buffer ; </a> 
<a> } </a> 
<a> public static ByteBuf <RARE_TOKEN> ( int value ) { </a> 
<a> ByteBuf buf = buffer ( 2 ) ; </a> 
<a> buf . <RARE_TOKEN> ( value ) ; </a> 
<a> return buf ; </a> 
<a> } </a> 
<a> public static ByteBuf <RARE_TOKEN> ( short ... values ) { </a> 
<a> if ( values == null || values . length == 0 ) { </a> 
<a> return EMPTY_BUFFER ; </a> 
<a> } </a> 
<a> ByteBuf buffer = buffer ( values . length * 2 ) ; </a> 
<a> for ( int v : values ) { </a> 
<a> buffer . <RARE_TOKEN> ( v ) ; </a> 
<a> } </a> 
<a> return buffer ; </a> 
<a> } </a> 
<a> public static ByteBuf <RARE_TOKEN> ( int ... values ) { </a> 
<a> if ( values == null || values . length == 0 ) { </a> 
<a> return EMPTY_BUFFER ; </a> 
<a> } </a> 
<a> ByteBuf buffer = buffer ( values . length * 2 ) ; </a> 
<a> for ( int v : values ) { </a> 
<a> buffer . <RARE_TOKEN> ( v ) ; </a> 
<a> } </a> 
<a> return buffer ; </a> 
<a> } </a> 
<a> public static ByteBuf <RARE_TOKEN> ( int value ) { </a> 
<a> ByteBuf buf = buffer ( 3 ) ; </a> 
<a> buf . <RARE_TOKEN> ( value ) ; </a> 
<a> return buf ; </a> 
<a> } </a> 
<a> public static ByteBuf <RARE_TOKEN> ( int ... values ) { </a> 
<a> if ( values == null || values . length == 0 ) { </a> 
<a> return EMPTY_BUFFER ; </a> 
<a> } </a> 
<a> ByteBuf buffer = buffer ( values . length * 3 ) ; </a> 
<a> for ( int v : values ) { </a> 
<a> buffer . <RARE_TOKEN> ( v ) ; </a> 
<a> } </a> 
<a> return buffer ; </a> 
<a> } </a> 
<a> public static ByteBuf <RARE_TOKEN> ( long value ) { </a> 
<a> ByteBuf buf = buffer ( 8 ) ; </a> 
<a> buf . <RARE_TOKEN> ( value ) ; </a> 
<a> return buf ; </a> 
<a> } </a> 
<a> public static ByteBuf <RARE_TOKEN> ( long ... values ) { </a> 
<a> if ( values == null || values . length == 0 ) { </a> 
<a> return EMPTY_BUFFER ; </a> 
<a> } </a> 
<a> ByteBuf buffer = buffer ( values . length * 8 ) ; </a> 
<a> for ( long v : values ) { </a> 
<a> buffer . <RARE_TOKEN> ( v ) ; </a> 
<a> } </a> 
<a> return buffer ; </a> 
<a> } </a> 
<a> public static ByteBuf <RARE_TOKEN> ( boolean value ) { </a> 
<a> ByteBuf buf = buffer ( 1 ) ; </a> 
<a> buf . <RARE_TOKEN> ( value ) ; </a> 
<a> return buf ; </a> 
<a> } </a> 
<a> public static ByteBuf <RARE_TOKEN> ( boolean ... values ) { </a> 
<a> if ( values == null || values . length == 0 ) { </a> 
<a> return EMPTY_BUFFER ; </a> 
<a> } </a> 
<a> ByteBuf buffer = buffer ( values . length ) ; </a> 
<a> for ( boolean v : values ) { </a> 
<a> buffer . <RARE_TOKEN> ( v ) ; </a> 
<a> } </a> 
<a> return buffer ; </a> 
<a> } </a> 
<a> public static ByteBuf <RARE_TOKEN> ( float value ) { </a> 
<a> ByteBuf buf = buffer ( 4 ) ; </a> 
<a> buf . <RARE_TOKEN> ( value ) ; </a> 
<a> return buf ; </a> 
<a> } </a> 
<a> public static ByteBuf <RARE_TOKEN> ( float ... values ) { </a> 
<a> if ( values == null || values . length == 0 ) { </a> 
<a> return EMPTY_BUFFER ; </a> 
<a> } </a> 
<a> ByteBuf buffer = buffer ( values . length * 4 ) ; </a> 
<a> for ( float v : values ) { </a> 
<a> buffer . <RARE_TOKEN> ( v ) ; </a> 
<a> } </a> 
<a> return buffer ; </a> 
<a> } </a> 
<a> public static ByteBuf <RARE_TOKEN> ( double value ) { </a> 
<a> ByteBuf buf = buffer ( 8 ) ; </a> 
<a> buf . <RARE_TOKEN> ( value ) ; </a> 
<a> return buf ; </a> 
<a> } </a> 
<a> public static ByteBuf <RARE_TOKEN> ( double ... values ) { </a> 
<a> if ( values == null || values . length == 0 ) { </a> 
<a> return EMPTY_BUFFER ; </a> 
<a> } </a> 
<a> ByteBuf buffer = buffer ( values . length * 8 ) ; </a> 
<a> for ( double v : values ) { </a> 
<a> buffer . <RARE_TOKEN> ( v ) ; </a> 
<a> } </a> 
<a> return buffer ; </a> 
<a> } </a> 
<a> private Unpooled ( ) { </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . buffer ; </a> 
<a> public interface <RARE_TOKEN> extends ByteBuf { </a> 
<a> ByteBuf <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . buffer ; </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . buffer ; </a> 
<a> import static io . netty . buffer . Unpooled . * ; </a> 
<a> import static org . junit . Assert . * ; </a> 
<a> import java . nio . ByteBuffer ; </a> 
<a> import java . nio . ByteOrder ; </a> 
<a> import java . util . ArrayList ; </a> 
<a> import java . util . List ; </a> 
<a> import org . junit . Test ; </a> 
<a> public abstract class <RARE_TOKEN> extends </a> 
<a> <RARE_TOKEN> { </a> 
<a> private final ByteOrder order ; </a> 
<a> protected <RARE_TOKEN> ( ByteOrder order ) { </a> 
<a> if ( order == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> this . order = order ; </a> 
<a> } </a> 
<a> private List < ByteBuf > buffers ; </a> 
<a> private ByteBuf buffer ; </a> 
<a> @ Override </a> 
<a> protected ByteBuf <RARE_TOKEN> ( int length ) { </a> 
<a> buffers = new ArrayList < ByteBuf > ( ) ; </a> 
<a> for ( int i = 0 ; i < length + <RARE_TOKEN> ; i += <RARE_TOKEN> ) { </a> 
<a> buffers . add ( Unpooled . EMPTY_BUFFER ) ; </a> 
<a> buffers . add ( Unpooled . wrappedBuffer ( new byte [ 1 ] ) ) ; </a> 
<a> buffers . add ( Unpooled . EMPTY_BUFFER ) ; </a> 
<a> buffers . add ( Unpooled . wrappedBuffer ( new byte [ 2 ] ) ) ; </a> 
<a> buffers . add ( Unpooled . EMPTY_BUFFER ) ; </a> 
<a> buffers . add ( Unpooled . wrappedBuffer ( new byte [ 3 ] ) ) ; </a> 
<a> buffers . add ( Unpooled . EMPTY_BUFFER ) ; </a> 
<a> buffers . add ( Unpooled . wrappedBuffer ( new byte [ 4 ] ) ) ; </a> 
<a> buffers . add ( Unpooled . EMPTY_BUFFER ) ; </a> 
<a> buffers . add ( Unpooled . wrappedBuffer ( new byte [ 5 ] ) ) ; </a> 
<a> buffers . add ( Unpooled . EMPTY_BUFFER ) ; </a> 
<a> buffers . add ( Unpooled . wrappedBuffer ( new byte [ 6 ] ) ) ; </a> 
<a> buffers . add ( Unpooled . EMPTY_BUFFER ) ; </a> 
<a> buffers . add ( Unpooled . wrappedBuffer ( new byte [ 7 ] ) ) ; </a> 
<a> buffers . add ( Unpooled . EMPTY_BUFFER ) ; </a> 
<a> buffers . add ( Unpooled . wrappedBuffer ( new byte [ 8 ] ) ) ; </a> 
<a> buffers . add ( Unpooled . EMPTY_BUFFER ) ; </a> 
<a> buffers . add ( Unpooled . wrappedBuffer ( new byte [ 9 ] ) ) ; </a> 
<a> buffers . add ( Unpooled . EMPTY_BUFFER ) ; </a> 
<a> } </a> 
<a> buffer = Unpooled . wrappedBuffer ( </a> 
<a> Integer . MAX_VALUE , buffers . <RARE_TOKEN> ( new ByteBuf [ buffers . size ( ) ] ) ) . order ( order ) ; </a> 
<a> buffer . capacity ( length ) ; </a> 
<a> assertEquals ( length , buffer . capacity ( ) ) ; </a> 
<a> assertEquals ( length , buffer . readableBytes ( ) ) ; </a> 
<a> assertFalse ( buffer . <RARE_TOKEN> ( ) ) ; </a> 
<a> buffer . writerIndex ( 0 ) ; </a> 
<a> return buffer ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected ByteBuf [ ] components ( ) { </a> 
<a> return buffers . <RARE_TOKEN> ( new ByteBuf [ buffers . size ( ) ] ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected boolean <RARE_TOKEN> ( ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> buf = ( <RARE_TOKEN> ) Unpooled . wrappedBuffer ( new byte [ ] { 1 , 2 , 3 , 4 , 5 } , new byte [ ] { 4 , 5 , 6 , 7 , 8 , 9 , 26 } ) ; </a> 
<a> assertEquals ( buf . <RARE_TOKEN> ( 2 ) . capacity ( ) , 5 ) ; </a> 
<a> byte index = 0 ; </a> 
<a> while ( index < buf . capacity ( ) ) { </a> 
<a> ByteBuf <RARE_TOKEN> = buf . <RARE_TOKEN> ( index ++ ) ; </a> 
<a> assertNotNull ( <RARE_TOKEN> ) ; </a> 
<a> assertTrue ( <RARE_TOKEN> . capacity ( ) > 0 ) ; </a> 
<a> assertNotNull ( <RARE_TOKEN> . getByte ( 0 ) ) ; </a> 
<a> assertNotNull ( <RARE_TOKEN> . getByte ( <RARE_TOKEN> . readableBytes ( ) - 1 ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> ByteBuf a , b ; </a> 
<a> a = wrappedBuffer ( new byte [ ] { 1 , 2 , 3 , 4 , 5 , 6 , 7 , 8 , 9 , 10 } ) . order ( order ) ; </a> 
<a> b = wrappedBuffer ( </a> 
<a> wrappedBuffer ( new byte [ ] { 1 , 2 , 3 , 4 , 5 , 6 , 7 , 8 , 9 , 10 } , 0 , 5 ) . order ( order ) , </a> 
<a> wrappedBuffer ( new byte [ ] { 1 , 2 , 3 , 4 , 5 , 6 , 7 , 8 , 9 , 10 } , 5 , 5 ) . order ( order ) ) ; </a> 
<a> a . skipBytes ( 6 ) ; </a> 
<a> a . <RARE_TOKEN> ( ) ; </a> 
<a> b . skipBytes ( 6 ) ; </a> 
<a> b . <RARE_TOKEN> ( ) ; </a> 
<a> assertEquals ( a . readerIndex ( ) , b . readerIndex ( ) ) ; </a> 
<a> a . readerIndex ( a . readerIndex ( ) - 1 ) ; </a> 
<a> b . readerIndex ( b . readerIndex ( ) - 1 ) ; </a> 
<a> assertEquals ( a . readerIndex ( ) , b . readerIndex ( ) ) ; </a> 
<a> a . writerIndex ( a . writerIndex ( ) - 1 ) ; </a> 
<a> a . <RARE_TOKEN> ( ) ; </a> 
<a> b . writerIndex ( b . writerIndex ( ) - 1 ) ; </a> 
<a> b . <RARE_TOKEN> ( ) ; </a> 
<a> assertEquals ( a . writerIndex ( ) , b . writerIndex ( ) ) ; </a> 
<a> a . writerIndex ( a . writerIndex ( ) + 1 ) ; </a> 
<a> b . writerIndex ( b . writerIndex ( ) + 1 ) ; </a> 
<a> assertEquals ( a . writerIndex ( ) , b . writerIndex ( ) ) ; </a> 
<a> assertTrue ( ByteBufUtil . equals ( a , b ) ) ; </a> 
<a> a . <RARE_TOKEN> ( ) ; </a> 
<a> b . <RARE_TOKEN> ( ) ; </a> 
<a> assertEquals ( a . readerIndex ( ) , b . readerIndex ( ) ) ; </a> 
<a> assertEquals ( a . writerIndex ( ) , b . writerIndex ( ) ) ; </a> 
<a> assertTrue ( ByteBufUtil . equals ( a , b ) ) ; </a> 
<a> a . <RARE_TOKEN> ( ) ; </a> 
<a> b . <RARE_TOKEN> ( ) ; </a> 
<a> assertEquals ( a . readerIndex ( ) , b . readerIndex ( ) ) ; </a> 
<a> a . <RARE_TOKEN> ( ) ; </a> 
<a> b . <RARE_TOKEN> ( ) ; </a> 
<a> assertEquals ( a . writerIndex ( ) , b . writerIndex ( ) ) ; </a> 
<a> assertTrue ( ByteBufUtil . equals ( a , b ) ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> buf = <RARE_TOKEN> ( 2 ) ; </a> 
<a> buf . <RARE_TOKEN> ( wrappedBuffer ( new byte [ ] { 1 } ) ) ; </a> 
<a> assertEquals ( 1 , buf . <RARE_TOKEN> ( ) ) ; </a> 
<a> buf . <RARE_TOKEN> ( wrappedBuffer ( new byte [ ] { 2 , 3 } ) ) ; </a> 
<a> assertEquals ( 2 , buf . <RARE_TOKEN> ( ) ) ; </a> 
<a> buf . <RARE_TOKEN> ( wrappedBuffer ( new byte [ ] { 4 , 5 , 6 } ) ) ; </a> 
<a> assertEquals ( 1 , buf . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertTrue ( buf . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertNotNull ( buf . array ( ) ) ; </a> 
<a> assertEquals ( 0 , buf . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> buf = <RARE_TOKEN> ( Integer . MAX_VALUE ) ; </a> 
<a> buf . <RARE_TOKEN> ( wrappedBuffer ( new byte [ ] { 1 } ) ) ; </a> 
<a> buf . <RARE_TOKEN> ( wrappedBuffer ( new byte [ ] { 2 , 3 } ) ) ; </a> 
<a> buf . <RARE_TOKEN> ( wrappedBuffer ( new byte [ ] { 4 , 5 , 6 } ) ) ; </a> 
<a> buf . <RARE_TOKEN> ( ) ; </a> 
<a> assertEquals ( 1 , buf . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertTrue ( buf . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertNotNull ( buf . array ( ) ) ; </a> 
<a> assertEquals ( 0 , buf . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> buf = <RARE_TOKEN> ( Integer . MAX_VALUE ) ; </a> 
<a> buf . <RARE_TOKEN> ( wrappedBuffer ( new byte [ ] { 1 } ) ) ; </a> 
<a> buf . <RARE_TOKEN> ( wrappedBuffer ( new byte [ ] { 2 , 3 } ) ) ; </a> 
<a> buf . <RARE_TOKEN> ( wrappedBuffer ( new byte [ ] { 4 , 5 , 6 } ) ) ; </a> 
<a> buf . <RARE_TOKEN> ( wrappedBuffer ( new byte [ ] { 7 , 8 , 9 , 10 } ) ) ; </a> 
<a> buf . <RARE_TOKEN> ( 1 , 2 ) ; </a> 
<a> assertEquals ( 3 , buf . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertEquals ( wrappedBuffer ( new byte [ ] { 1 } ) , buf . <RARE_TOKEN> ( 0 ) ) ; </a> 
<a> assertEquals ( wrappedBuffer ( new byte [ ] { 2 , 3 , 4 , 5 , 6 } ) , buf . <RARE_TOKEN> ( 1 ) ) ; </a> 
<a> assertEquals ( wrappedBuffer ( new byte [ ] { 7 , 8 , 9 , 10 } ) , buf . <RARE_TOKEN> ( 2 ) ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> ByteBuf header = buffer ( 12 ) . order ( order ) ; </a> 
<a> ByteBuf <RARE_TOKEN> = buffer ( <RARE_TOKEN> ) . order ( order ) ; </a> 
<a> header . writeBytes ( new byte [ 12 ] ) ; </a> 
<a> <RARE_TOKEN> . writeBytes ( new byte [ <RARE_TOKEN> ] ) ; </a> 
<a> ByteBuf buffer = wrappedBuffer ( header , <RARE_TOKEN> ) ; </a> 
<a> assertTrue ( header . readableBytes ( ) == 12 ) ; </a> 
<a> assertTrue ( <RARE_TOKEN> . readableBytes ( ) == <RARE_TOKEN> ) ; </a> 
<a> assertEquals ( 12 + <RARE_TOKEN> , buffer . readableBytes ( ) ) ; </a> 
<a> assertFalse ( buffer . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> ByteBuf a , b ; </a> 
<a> a = wrappedBuffer ( new byte [ ] { 1 } ) . order ( order ) ; </a> 
<a> b = wrappedBuffer ( wrappedBuffer ( new byte [ ] { 1 } ) . order ( order ) , </a> 
<a> wrappedBuffer ( new byte [ ] { 2 } ) . order ( order ) ) ; </a> 
<a> assertFalse ( ByteBufUtil . equals ( a , b ) ) ; </a> 
<a> a = wrappedBuffer ( new byte [ ] { 1 , 2 , 3 } ) . order ( order ) ; </a> 
<a> b = wrappedBuffer ( wrappedBuffer ( new byte [ ] { 1 } ) . order ( order ) , </a> 
<a> wrappedBuffer ( new byte [ ] { 2 } ) . order ( order ) , </a> 
<a> wrappedBuffer ( new byte [ ] { 3 } ) . order ( order ) ) ; </a> 
<a> assertTrue ( ByteBufUtil . equals ( a , b ) ) ; </a> 
<a> a = wrappedBuffer ( new byte [ ] { 1 , 2 , 3 } ) . order ( order ) ; </a> 
<a> b = wrappedBuffer ( wrappedBuffer ( new byte [ ] { 0 , 1 , 2 , 3 , 4 } , 1 , 2 ) . order ( order ) , </a> 
<a> wrappedBuffer ( new byte [ ] { 0 , 1 , 2 , 3 , 4 } , 3 , 1 ) . order ( order ) ) ; </a> 
<a> assertTrue ( ByteBufUtil . equals ( a , b ) ) ; </a> 
<a> a = wrappedBuffer ( new byte [ ] { 1 , 2 , 3 } ) . order ( order ) ; </a> 
<a> b = wrappedBuffer ( wrappedBuffer ( new byte [ ] { 1 , 2 } ) . order ( order ) , </a> 
<a> wrappedBuffer ( new byte [ ] { 4 } ) . order ( order ) ) ; </a> 
<a> assertFalse ( ByteBufUtil . equals ( a , b ) ) ; </a> 
<a> a = wrappedBuffer ( new byte [ ] { 1 , 2 , 3 } ) . order ( order ) ; </a> 
<a> b = wrappedBuffer ( wrappedBuffer ( new byte [ ] { 0 , 1 , 2 , 4 , 5 } , 1 , 2 ) . order ( order ) , </a> 
<a> wrappedBuffer ( new byte [ ] { 0 , 1 , 2 , 4 , 5 } , 3 , 1 ) . order ( order ) ) ; </a> 
<a> assertFalse ( ByteBufUtil . equals ( a , b ) ) ; </a> 
<a> a = wrappedBuffer ( new byte [ ] { 1 , 2 , 3 , 4 , 5 , 6 , 7 , 8 , 9 , 10 } ) . order ( order ) ; </a> 
<a> b = wrappedBuffer ( wrappedBuffer ( new byte [ ] { 1 , 2 , 3 } ) . order ( order ) , </a> 
<a> wrappedBuffer ( new byte [ ] { 4 , 5 , 6 } ) . order ( order ) , </a> 
<a> wrappedBuffer ( new byte [ ] { 7 , 8 , 9 , 10 } ) . order ( order ) ) ; </a> 
<a> assertTrue ( ByteBufUtil . equals ( a , b ) ) ; </a> 
<a> a = wrappedBuffer ( new byte [ ] { 1 , 2 , 3 , 4 , 5 , 6 , 7 , 8 , 9 , 10 } ) . order ( order ) ; </a> 
<a> b = wrappedBuffer ( wrappedBuffer ( new byte [ ] { 0 , 1 , 2 , 3 , 4 , 5 , 6 , 7 , 8 , 9 , 10 , 11 } , 1 , 5 ) . order ( order ) , </a> 
<a> wrappedBuffer ( new byte [ ] { 0 , 1 , 2 , 3 , 4 , 5 , 6 , 7 , 8 , 9 , 10 , 11 } , 6 , 5 ) . order ( order ) ) ; </a> 
<a> assertTrue ( ByteBufUtil . equals ( a , b ) ) ; </a> 
<a> a = wrappedBuffer ( new byte [ ] { 1 , 2 , 3 , 4 , 5 , 6 , 7 , 8 , 9 , 10 } ) . order ( order ) ; </a> 
<a> b = wrappedBuffer ( wrappedBuffer ( new byte [ ] { 1 , 2 , 3 , 4 , 6 } ) . order ( order ) , </a> 
<a> wrappedBuffer ( new byte [ ] { 7 , 8 , 5 , 9 , 10 } ) . order ( order ) ) ; </a> 
<a> assertFalse ( ByteBufUtil . equals ( a , b ) ) ; </a> 
<a> a = wrappedBuffer ( new byte [ ] { 1 , 2 , 3 , 4 , 5 , 6 , 7 , 8 , 9 , 10 } ) . order ( order ) ; </a> 
<a> b = wrappedBuffer ( wrappedBuffer ( new byte [ ] { 0 , 1 , 2 , 3 , 4 , 6 , 7 , 8 , 5 , 9 , 10 , 11 } , 1 , 5 ) . order ( order ) , </a> 
<a> wrappedBuffer ( new byte [ ] { 0 , 1 , 2 , 3 , 4 , 6 , 7 , 8 , 5 , 9 , 10 , 11 } , 6 , 5 ) . order ( order ) ) ; </a> 
<a> assertFalse ( ByteBufUtil . equals ( a , b ) ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> assertEquals ( 16 , wrappedBuffer ( wrappedBuffer ( ByteBuffer . <RARE_TOKEN> ( 16 ) ) ) . capacity ( ) ) ; </a> 
<a> assertEquals ( </a> 
<a> wrappedBuffer ( wrappedBuffer ( new byte [ ] { 1 , 2 , 3 } ) . order ( order ) ) , </a> 
<a> wrappedBuffer ( wrappedBuffer ( new byte [ ] [ ] { new byte [ ] { 1 , 2 , 3 } } ) . order ( order ) ) ) ; </a> 
<a> assertEquals ( </a> 
<a> wrappedBuffer ( wrappedBuffer ( new byte [ ] { 1 , 2 , 3 } ) . order ( order ) ) , </a> 
<a> wrappedBuffer ( wrappedBuffer ( </a> 
<a> new byte [ ] { 1 } , </a> 
<a> new byte [ ] { 2 } , </a> 
<a> new byte [ ] { 3 } ) . order ( order ) ) ) ; </a> 
<a> assertEquals ( </a> 
<a> wrappedBuffer ( wrappedBuffer ( new byte [ ] { 1 , 2 , 3 } ) . order ( order ) ) , </a> 
<a> wrappedBuffer ( new ByteBuf [ ] { </a> 
<a> wrappedBuffer ( new byte [ ] { 1 , 2 , 3 } ) . order ( order ) </a> 
<a> } ) ) ; </a> 
<a> assertEquals ( </a> 
<a> wrappedBuffer ( wrappedBuffer ( new byte [ ] { 1 , 2 , 3 } ) . order ( order ) ) , </a> 
<a> wrappedBuffer ( </a> 
<a> wrappedBuffer ( new byte [ ] { 1 } ) . order ( order ) , </a> 
<a> wrappedBuffer ( new byte [ ] { 2 } ) . order ( order ) , </a> 
<a> wrappedBuffer ( new byte [ ] { 3 } ) . order ( order ) ) ) ; </a> 
<a> assertEquals ( </a> 
<a> wrappedBuffer ( wrappedBuffer ( new byte [ ] { 1 , 2 , 3 } ) . order ( order ) ) , </a> 
<a> wrappedBuffer ( wrappedBuffer ( new ByteBuffer [ ] { </a> 
<a> ByteBuffer . wrap ( new byte [ ] { 1 , 2 , 3 } ) </a> 
<a> } ) ) ) ; </a> 
<a> assertEquals ( </a> 
<a> wrappedBuffer ( wrappedBuffer ( new byte [ ] { 1 , 2 , 3 } ) . order ( order ) ) , </a> 
<a> wrappedBuffer ( wrappedBuffer ( </a> 
<a> ByteBuffer . wrap ( new byte [ ] { 1 } ) , </a> 
<a> ByteBuffer . wrap ( new byte [ ] { 2 } ) , </a> 
<a> ByteBuffer . wrap ( new byte [ ] { 3 } ) ) ) ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> ByteBuf a , b ; </a> 
<a> a = wrappedBuffer ( new byte [ ] { 1 } ) . order ( order ) ; </a> 
<a> b = wrappedBuffer ( wrappedBuffer ( new byte [ ] { 1 } , new byte [ 1 ] ) . order ( order ) ) ; </a> 
<a> b . writerIndex ( b . writerIndex ( ) - 1 ) ; </a> 
<a> b . writeBytes ( </a> 
<a> wrappedBuffer ( new byte [ ] { 2 } ) . order ( order ) ) ; </a> 
<a> assertFalse ( ByteBufUtil . equals ( a , b ) ) ; </a> 
<a> a = wrappedBuffer ( new byte [ ] { 1 , 2 , 3 } ) . order ( order ) ; </a> 
<a> b = wrappedBuffer ( wrappedBuffer ( new byte [ ] { 1 } , new byte [ 2 ] ) . order ( order ) ) ; </a> 
<a> b . writerIndex ( b . writerIndex ( ) - 2 ) ; </a> 
<a> b . writeBytes ( </a> 
<a> wrappedBuffer ( new byte [ ] { 2 } ) . order ( order ) ) ; </a> 
<a> b . writeBytes ( wrappedBuffer ( new byte [ ] { 3 } ) . order ( order ) ) ; </a> 
<a> assertTrue ( ByteBufUtil . equals ( a , b ) ) ; </a> 
<a> a = wrappedBuffer ( new byte [ ] { 1 , 2 , 3 } ) . order ( order ) ; </a> 
<a> b = wrappedBuffer ( wrappedBuffer ( new byte [ ] { 0 , 1 , 2 , 3 , 4 } , 1 , 3 ) . order ( order ) ) ; </a> 
<a> b . writerIndex ( b . writerIndex ( ) - 1 ) ; </a> 
<a> b . writeBytes ( </a> 
<a> wrappedBuffer ( new byte [ ] { 0 , 1 , 2 , 3 , 4 } , 3 , 1 ) . order ( order ) ) ; </a> 
<a> assertTrue ( ByteBufUtil . equals ( a , b ) ) ; </a> 
<a> a = wrappedBuffer ( new byte [ ] { 1 , 2 , 3 } ) . order ( order ) ; </a> 
<a> b = wrappedBuffer ( wrappedBuffer ( new byte [ ] { 1 , 2 } , new byte [ 1 ] ) . order ( order ) ) ; </a> 
<a> b . writerIndex ( b . writerIndex ( ) - 1 ) ; </a> 
<a> b . writeBytes ( </a> 
<a> wrappedBuffer ( new byte [ ] { 4 } ) . order ( order ) ) ; </a> 
<a> assertFalse ( ByteBufUtil . equals ( a , b ) ) ; </a> 
<a> a = wrappedBuffer ( new byte [ ] { 1 , 2 , 3 } ) . order ( order ) ; </a> 
<a> b = wrappedBuffer ( wrappedBuffer ( new byte [ ] { 0 , 1 , 2 , 4 , 5 } , 1 , 3 ) . order ( order ) ) ; </a> 
<a> b . writerIndex ( b . writerIndex ( ) - 1 ) ; </a> 
<a> b . writeBytes ( </a> 
<a> wrappedBuffer ( new byte [ ] { 0 , 1 , 2 , 4 , 5 } , 3 , 1 ) . order ( order ) ) ; </a> 
<a> assertFalse ( ByteBufUtil . equals ( a , b ) ) ; </a> 
<a> a = wrappedBuffer ( new byte [ ] { 1 , 2 , 3 , 4 , 5 , 6 , 7 , 8 , 9 , 10 } ) . order ( order ) ; </a> 
<a> b = wrappedBuffer ( wrappedBuffer ( new byte [ ] { 1 , 2 , 3 } , new byte [ 7 ] ) . order ( order ) ) ; </a> 
<a> b . writerIndex ( b . writerIndex ( ) - 7 ) ; </a> 
<a> b . writeBytes ( </a> 
<a> wrappedBuffer ( new byte [ ] { 4 , 5 , 6 } ) . order ( order ) ) ; </a> 
<a> b . writeBytes ( </a> 
<a> wrappedBuffer ( new byte [ ] { 7 , 8 , 9 , 10 } ) . order ( order ) ) ; </a> 
<a> assertTrue ( ByteBufUtil . equals ( a , b ) ) ; </a> 
<a> a = wrappedBuffer ( new byte [ ] { 1 , 2 , 3 , 4 , 5 , 6 , 7 , 8 , 9 , 10 } ) . order ( order ) ; </a> 
<a> b = wrappedBuffer ( wrappedBuffer ( new byte [ ] { 0 , 1 , 2 , 3 , 4 , 5 , 6 , 7 , 8 , 9 , 10 , 11 } , 1 , 10 ) . order ( order ) ) ; </a> 
<a> b . writerIndex ( b . writerIndex ( ) - 5 ) ; </a> 
<a> b . writeBytes ( </a> 
<a> wrappedBuffer ( new byte [ ] { 0 , 1 , 2 , 3 , 4 , 5 , 6 , 7 , 8 , 9 , 10 , 11 } , 6 , 5 ) . order ( order ) ) ; </a> 
<a> assertTrue ( ByteBufUtil . equals ( a , b ) ) ; </a> 
<a> a = wrappedBuffer ( new byte [ ] { 1 , 2 , 3 , 4 , 5 , 6 , 7 , 8 , 9 , 10 } ) . order ( order ) ; </a> 
<a> b = wrappedBuffer ( wrappedBuffer ( new byte [ ] { 1 , 2 , 3 , 4 , 6 } , new byte [ 5 ] ) . order ( order ) ) ; </a> 
<a> b . writerIndex ( b . writerIndex ( ) - 5 ) ; </a> 
<a> b . writeBytes ( </a> 
<a> wrappedBuffer ( new byte [ ] { 7 , 8 , 5 , 9 , 10 } ) . order ( order ) ) ; </a> 
<a> assertFalse ( ByteBufUtil . equals ( a , b ) ) ; </a> 
<a> a = wrappedBuffer ( new byte [ ] { 1 , 2 , 3 , 4 , 5 , 6 , 7 , 8 , 9 , 10 } ) . order ( order ) ; </a> 
<a> b = wrappedBuffer ( wrappedBuffer ( new byte [ ] { 0 , 1 , 2 , 3 , 4 , 6 , 7 , 8 , 5 , 9 , 10 , 11 } , 1 , 10 ) . order ( order ) ) ; </a> 
<a> b . writerIndex ( b . writerIndex ( ) - 5 ) ; </a> 
<a> b . writeBytes ( </a> 
<a> wrappedBuffer ( new byte [ ] { 0 , 1 , 2 , 3 , 4 , 6 , 7 , 8 , 5 , 9 , 10 , 11 } , 6 , 5 ) . order ( order ) ) ; </a> 
<a> assertFalse ( ByteBufUtil . equals ( a , b ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . buffer ; </a> 
<a> import static org . junit . Assert . * ; </a> 
<a> import java . nio . ByteOrder ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> private ByteBuf buffer ; </a> 
<a> @ Override </a> 
<a> protected ByteBuf <RARE_TOKEN> ( int length ) { </a> 
<a> buffer = Unpooled . <RARE_TOKEN> ( length ) ; </a> 
<a> assertSame ( ByteOrder . <RARE_TOKEN> , buffer . order ( ) ) ; </a> 
<a> assertEquals ( 0 , buffer . writerIndex ( ) ) ; </a> 
<a> return buffer ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected ByteBuf [ ] components ( ) { </a> 
<a> return new ByteBuf [ ] { buffer } ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . buffer ; </a> 
<a> import static org . junit . Assert . * ; </a> 
<a> import org . junit . Test ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> private ByteBuf buffer ; </a> 
<a> @ Override </a> 
<a> protected ByteBuf <RARE_TOKEN> ( int length ) { </a> 
<a> buffer = Unpooled . buffer ( length ) ; </a> 
<a> assertEquals ( 0 , buffer . writerIndex ( ) ) ; </a> 
<a> return buffer ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected ByteBuf [ ] components ( ) { </a> 
<a> return new ByteBuf [ ] { buffer } ; </a> 
<a> } </a> 
<a> @ Test ( expected = NullPointerException . class ) </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> new <RARE_TOKEN> ( null , 0 ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . buffer ; </a> 
<a> import static org . junit . Assert . * ; </a> 
<a> import java . io . <RARE_TOKEN> ; </a> 
<a> import org . junit . Test ; </a> 
<a> public class <RARE_TOKEN> { </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) throws Exception { </a> 
<a> ByteBuf buf = Unpooled . buffer ( 0 , <RARE_TOKEN> ) ; </a> 
<a> try { </a> 
<a> new <RARE_TOKEN> ( null ) ; </a> 
<a> fail ( ) ; </a> 
<a> } catch ( NullPointerException e ) { </a> 
<a> } </a> 
<a> <RARE_TOKEN> out = new <RARE_TOKEN> ( buf ) ; </a> 
<a> assertSame ( buf , out . buffer ( ) ) ; </a> 
<a> out . <RARE_TOKEN> ( true ) ; </a> 
<a> out . <RARE_TOKEN> ( false ) ; </a> 
<a> out . writeByte ( <RARE_TOKEN> ) ; </a> 
<a> out . writeByte ( <RARE_TOKEN> ) ; </a> 
<a> out . writeBytes ( <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> out . <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> out . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> out . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> out . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> out . writeInt ( <RARE_TOKEN> ) ; </a> 
<a> out . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> out . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> out . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> out . <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> out . writeBytes ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> out . write ( new byte [ 0 ] ) ; </a> 
<a> out . write ( new byte [ ] { 1 , 2 , 3 , 4 } ) ; </a> 
<a> out . write ( new byte [ ] { 1 , 3 , 3 , 4 } , 0 , 0 ) ; </a> 
<a> out . close ( ) ; </a> 
<a> try { </a> 
<a> new <RARE_TOKEN> ( null ) ; </a> 
<a> fail ( ) ; </a> 
<a> } catch ( NullPointerException e ) { </a> 
<a> } </a> 
<a> try { </a> 
<a> new <RARE_TOKEN> ( null , 0 ) ; </a> 
<a> fail ( ) ; </a> 
<a> } catch ( NullPointerException e ) { </a> 
<a> } </a> 
<a> try { </a> 
<a> new <RARE_TOKEN> ( buf , - 1 ) ; </a> 
<a> } catch ( IllegalArgumentException e ) { </a> 
<a> } </a> 
<a> try { </a> 
<a> new <RARE_TOKEN> ( buf , buf . capacity ( ) + 1 ) ; </a> 
<a> } catch ( IndexOutOfBoundsException e ) { </a> 
<a> } </a> 
<a> <RARE_TOKEN> in = new <RARE_TOKEN> ( buf ) ; </a> 
<a> assertTrue ( in . <RARE_TOKEN> ( ) ) ; </a> 
<a> in . <RARE_TOKEN> ( Integer . MAX_VALUE ) ; </a> 
<a> assertEquals ( buf . writerIndex ( ) , in . <RARE_TOKEN> ( Long . MAX_VALUE ) ) ; </a> 
<a> assertFalse ( buf . readable ( ) ) ; </a> 
<a> in . <RARE_TOKEN> ( ) ; </a> 
<a> assertEquals ( 0 , buf . readerIndex ( ) ) ; </a> 
<a> assertEquals ( 4 , in . <RARE_TOKEN> ( 4 ) ) ; </a> 
<a> assertEquals ( 4 , buf . readerIndex ( ) ) ; </a> 
<a> in . <RARE_TOKEN> ( ) ; </a> 
<a> assertTrue ( in . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertFalse ( in . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , in . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , in . <RARE_TOKEN> ( ) ) ; </a> 
<a> byte [ ] <RARE_TOKEN> = new byte [ 13 ] ; </a> 
<a> in . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> <RARE_TOKEN> , new String ( <RARE_TOKEN> , <RARE_TOKEN> ) ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , in . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , in . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , in . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , in . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , in . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , in . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertEquals ( ' ' , in . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , in . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , in . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , in . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , in . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , in . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , in . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , in . <RARE_TOKEN> ( ) , <RARE_TOKEN> ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , in . <RARE_TOKEN> ( ) , <RARE_TOKEN> ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , in . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , in . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , in . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , in . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> <RARE_TOKEN> , in . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> , in . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertEquals ( 4 , in . read ( <RARE_TOKEN> ) ) ; </a> 
<a> assertEquals ( 1 , <RARE_TOKEN> [ 0 ] ) ; </a> 
<a> assertEquals ( 2 , <RARE_TOKEN> [ 1 ] ) ; </a> 
<a> assertEquals ( 3 , <RARE_TOKEN> [ 2 ] ) ; </a> 
<a> assertEquals ( 4 , <RARE_TOKEN> [ 3 ] ) ; </a> 
<a> assertEquals ( - 1 , in . read ( ) ) ; </a> 
<a> assertEquals ( - 1 , in . read ( <RARE_TOKEN> ) ) ; </a> 
<a> try { </a> 
<a> in . <RARE_TOKEN> ( ) ; </a> 
<a> fail ( ) ; </a> 
<a> } catch ( <RARE_TOKEN> e ) { </a> 
<a> } </a> 
<a> try { </a> 
<a> in . <RARE_TOKEN> ( <RARE_TOKEN> , 0 , - 1 ) ; </a> 
<a> fail ( ) ; </a> 
<a> } catch ( IndexOutOfBoundsException e ) { </a> 
<a> } </a> 
<a> try { </a> 
<a> in . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> fail ( ) ; </a> 
<a> } catch ( <RARE_TOKEN> e ) { </a> 
<a> } </a> 
<a> in . close ( ) ; </a> 
<a> assertEquals ( buf . readerIndex ( ) , in . readBytes ( ) ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) throws Exception { </a> 
<a> ByteBuf buf = Unpooled . buffer ( 0 ) ; </a> 
<a> <RARE_TOKEN> in = new <RARE_TOKEN> ( buf ) ; </a> 
<a> String s = in . <RARE_TOKEN> ( ) ; </a> 
<a> assertEquals ( 0 , s . length ( ) ) ; </a> 
<a> in . close ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . buffer ; </a> 
<a> import static io . netty . buffer . Unpooled . * ; </a> 
<a> import static org . junit . Assert . * ; </a> 
<a> import java . io . InputStream ; </a> 
<a> import java . nio . ByteBuffer ; </a> 
<a> import java . nio . channels . <RARE_TOKEN> ; </a> 
<a> import java . util . ArrayList ; </a> 
<a> import java . util . <RARE_TOKEN> ; </a> 
<a> import java . util . List ; </a> 
<a> import java . util . Map ; </a> 
<a> import java . util . Map . Entry ; </a> 
<a> import org . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import org . junit . Test ; </a> 
<a> public class <RARE_TOKEN> { </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> ByteBuf header = buffer ( 12 ) ; </a> 
<a> ByteBuf <RARE_TOKEN> = buffer ( <RARE_TOKEN> ) ; </a> 
<a> header . writeBytes ( new byte [ 12 ] ) ; </a> 
<a> <RARE_TOKEN> . writeBytes ( new byte [ <RARE_TOKEN> ] ) ; </a> 
<a> ByteBuf buffer = wrappedBuffer ( header , <RARE_TOKEN> ) ; </a> 
<a> assertTrue ( header . readableBytes ( ) == 12 ) ; </a> 
<a> assertTrue ( <RARE_TOKEN> . readableBytes ( ) == <RARE_TOKEN> ) ; </a> 
<a> assertEquals ( 12 + <RARE_TOKEN> , buffer . readableBytes ( ) ) ; </a> 
<a> assertFalse ( buffer . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> Map < byte [ ] , Integer > map = new <RARE_TOKEN> < byte [ ] , Integer > ( ) ; </a> 
<a> map . put ( new byte [ 0 ] , 1 ) ; </a> 
<a> map . put ( new byte [ ] { 1 } , 32 ) ; </a> 
<a> map . put ( new byte [ ] { 2 } , <RARE_TOKEN> ) ; </a> 
<a> map . put ( new byte [ ] { 0 , 1 } , <RARE_TOKEN> ) ; </a> 
<a> map . put ( new byte [ ] { 1 , 2 } , <RARE_TOKEN> ) ; </a> 
<a> map . put ( new byte [ ] { 0 , 1 , 2 , 3 , 4 , 5 } , <RARE_TOKEN> ) ; </a> 
<a> map . put ( new byte [ ] { 6 , 7 , 8 , 9 , 0 , 1 } , ( int ) <RARE_TOKEN> ) ; </a> 
<a> map . put ( new byte [ ] { - 1 , - 1 , - 1 , ( byte ) <RARE_TOKEN> } , 1 ) ; </a> 
<a> for ( Entry < byte [ ] , Integer > e : map . <RARE_TOKEN> ( ) ) { </a> 
<a> assertEquals ( </a> 
<a> e . getValue ( ) . <RARE_TOKEN> ( ) , </a> 
<a> ByteBufUtil . hashCode ( wrappedBuffer ( e . <RARE_TOKEN> ( ) ) ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> ByteBuf a , b ; </a> 
<a> a = wrappedBuffer ( new byte [ ] { 1 } ) ; </a> 
<a> b = wrappedBuffer ( new byte [ ] { 1 , 2 } ) ; </a> 
<a> assertFalse ( ByteBufUtil . equals ( a , b ) ) ; </a> 
<a> a = wrappedBuffer ( new byte [ ] { 1 , 2 , 3 } ) ; </a> 
<a> b = wrappedBuffer ( new byte [ ] { 1 , 2 , 3 } ) ; </a> 
<a> assertTrue ( ByteBufUtil . equals ( a , b ) ) ; </a> 
<a> a = wrappedBuffer ( new byte [ ] { 1 , 2 , 3 } ) ; </a> 
<a> b = wrappedBuffer ( new byte [ ] { 0 , 1 , 2 , 3 , 4 } , 1 , 3 ) ; </a> 
<a> assertTrue ( ByteBufUtil . equals ( a , b ) ) ; </a> 
<a> a = wrappedBuffer ( new byte [ ] { 1 , 2 , 3 } ) ; </a> 
<a> b = wrappedBuffer ( new byte [ ] { 1 , 2 , 4 } ) ; </a> 
<a> assertFalse ( ByteBufUtil . equals ( a , b ) ) ; </a> 
<a> a = wrappedBuffer ( new byte [ ] { 1 , 2 , 3 } ) ; </a> 
<a> b = wrappedBuffer ( new byte [ ] { 0 , 1 , 2 , 4 , 5 } , 1 , 3 ) ; </a> 
<a> assertFalse ( ByteBufUtil . equals ( a , b ) ) ; </a> 
<a> a = wrappedBuffer ( new byte [ ] { 1 , 2 , 3 , 4 , 5 , 6 , 7 , 8 , 9 , 10 } ) ; </a> 
<a> b = wrappedBuffer ( new byte [ ] { 1 , 2 , 3 , 4 , 5 , 6 , 7 , 8 , 9 , 10 } ) ; </a> 
<a> assertTrue ( ByteBufUtil . equals ( a , b ) ) ; </a> 
<a> a = wrappedBuffer ( new byte [ ] { 1 , 2 , 3 , 4 , 5 , 6 , 7 , 8 , 9 , 10 } ) ; </a> 
<a> b = wrappedBuffer ( new byte [ ] { 0 , 1 , 2 , 3 , 4 , 5 , 6 , 7 , 8 , 9 , 10 , 11 } , 1 , 10 ) ; </a> 
<a> assertTrue ( ByteBufUtil . equals ( a , b ) ) ; </a> 
<a> a = wrappedBuffer ( new byte [ ] { 1 , 2 , 3 , 4 , 5 , 6 , 7 , 8 , 9 , 10 } ) ; </a> 
<a> b = wrappedBuffer ( new byte [ ] { 1 , 2 , 3 , 4 , 6 , 7 , 8 , 5 , 9 , 10 } ) ; </a> 
<a> assertFalse ( ByteBufUtil . equals ( a , b ) ) ; </a> 
<a> a = wrappedBuffer ( new byte [ ] { 1 , 2 , 3 , 4 , 5 , 6 , 7 , 8 , 9 , 10 } ) ; </a> 
<a> b = wrappedBuffer ( new byte [ ] { 0 , 1 , 2 , 3 , 4 , 6 , 7 , 8 , 5 , 9 , 10 , 11 } , 1 , 10 ) ; </a> 
<a> assertFalse ( ByteBufUtil . equals ( a , b ) ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> List < ByteBuf > expected = new ArrayList < ByteBuf > ( ) ; </a> 
<a> expected . add ( wrappedBuffer ( new byte [ ] { 1 } ) ) ; </a> 
<a> expected . add ( wrappedBuffer ( new byte [ ] { 1 , 2 } ) ) ; </a> 
<a> expected . add ( wrappedBuffer ( new byte [ ] { 1 , 2 , 3 , 4 , 5 , 6 , 7 , 8 , 9 , 10 } ) ) ; </a> 
<a> expected . add ( wrappedBuffer ( new byte [ ] { 1 , 2 , 3 , 4 , 5 , 6 , 7 , 8 , 9 , 10 , 11 , 12 } ) ) ; </a> 
<a> expected . add ( wrappedBuffer ( new byte [ ] { 2 } ) ) ; </a> 
<a> expected . add ( wrappedBuffer ( new byte [ ] { 2 , 3 } ) ) ; </a> 
<a> expected . add ( wrappedBuffer ( new byte [ ] { 2 , 3 , 4 , 5 , 6 , 7 , 8 , 9 , 10 , 11 } ) ) ; </a> 
<a> expected . add ( wrappedBuffer ( new byte [ ] { 2 , 3 , 4 , 5 , 6 , 7 , 8 , 9 , 10 , 11 , 12 , 13 } ) ) ; </a> 
<a> expected . add ( wrappedBuffer ( new byte [ ] { 2 , 3 , 4 } , 1 , 1 ) ) ; </a> 
<a> expected . add ( wrappedBuffer ( new byte [ ] { 1 , 2 , 3 , 4 } , 2 , 2 ) ) ; </a> 
<a> expected . add ( wrappedBuffer ( new byte [ ] { 2 , 3 , 4 , 5 , 6 , 7 , 8 , 9 , 10 , 11 , 12 , 13 , 14 } , 1 , 10 ) ) ; </a> 
<a> expected . add ( wrappedBuffer ( new byte [ ] { 1 , 2 , 3 , 4 , 5 , 6 , 7 , 8 , 9 , 10 , 11 , 12 , 13 , 14 } , 2 , 12 ) ) ; </a> 
<a> expected . add ( wrappedBuffer ( new byte [ ] { 2 , 3 , 4 , 5 } , 2 , 1 ) ) ; </a> 
<a> expected . add ( wrappedBuffer ( new byte [ ] { 1 , 2 , 3 , 4 , 5 } , 3 , 2 ) ) ; </a> 
<a> expected . add ( wrappedBuffer ( new byte [ ] { 2 , 3 , 4 , 5 , 6 , 7 , 8 , 9 , 10 , 11 , 12 , 13 , 14 } , 2 , 10 ) ) ; </a> 
<a> expected . add ( wrappedBuffer ( new byte [ ] { 1 , 2 , 3 , 4 , 5 , 6 , 7 , 8 , 9 , 10 , 11 , 12 , 13 , 14 , 15 } , 3 , 12 ) ) ; </a> 
<a> for ( int i = 0 ; i < expected . size ( ) ; i ++ ) { </a> 
<a> for ( int j = 0 ; j < expected . size ( ) ; j ++ ) { </a> 
<a> if ( i == j ) { </a> 
<a> assertEquals ( 0 , ByteBufUtil . <RARE_TOKEN> ( expected . get ( i ) , expected . get ( j ) ) ) ; </a> 
<a> } else if ( i < j ) { </a> 
<a> assertTrue ( ByteBufUtil . <RARE_TOKEN> ( expected . get ( i ) , expected . get ( j ) ) < 0 ) ; </a> 
<a> } else { </a> 
<a> assertTrue ( ByteBufUtil . <RARE_TOKEN> ( expected . get ( i ) , expected . get ( j ) ) > 0 ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> assertSame ( EMPTY_BUFFER , wrappedBuffer ( new byte [ 0 ] ) ) ; </a> 
<a> assertSame ( EMPTY_BUFFER , wrappedBuffer ( new byte [ 0 ] ) . order ( <RARE_TOKEN> ) ) ; </a> 
<a> assertSame ( EMPTY_BUFFER , wrappedBuffer ( new byte [ 8 ] , 0 , 0 ) ) ; </a> 
<a> assertSame ( EMPTY_BUFFER , wrappedBuffer ( new byte [ 8 ] , 0 , 0 ) . order ( <RARE_TOKEN> ) ) ; </a> 
<a> assertSame ( EMPTY_BUFFER , wrappedBuffer ( new byte [ 8 ] , 8 , 0 ) ) ; </a> 
<a> assertSame ( EMPTY_BUFFER , wrappedBuffer ( new byte [ 8 ] , 8 , 0 ) . order ( <RARE_TOKEN> ) ) ; </a> 
<a> assertSame ( EMPTY_BUFFER , wrappedBuffer ( ByteBuffer . <RARE_TOKEN> ( 0 ) ) ) ; </a> 
<a> assertSame ( EMPTY_BUFFER , wrappedBuffer ( EMPTY_BUFFER ) ) ; </a> 
<a> assertSame ( EMPTY_BUFFER , wrappedBuffer ( new byte [ 0 ] [ ] ) ) ; </a> 
<a> assertSame ( EMPTY_BUFFER , wrappedBuffer ( new byte [ ] [ ] { new byte [ 0 ] } ) ) ; </a> 
<a> assertSame ( EMPTY_BUFFER , wrappedBuffer ( new ByteBuffer [ 0 ] ) ) ; </a> 
<a> assertSame ( EMPTY_BUFFER , wrappedBuffer ( new ByteBuffer [ ] { ByteBuffer . <RARE_TOKEN> ( 0 ) } ) ) ; </a> 
<a> assertSame ( EMPTY_BUFFER , wrappedBuffer ( ByteBuffer . <RARE_TOKEN> ( 0 ) , ByteBuffer . <RARE_TOKEN> ( 0 ) ) ) ; </a> 
<a> assertSame ( EMPTY_BUFFER , wrappedBuffer ( new ByteBuf [ 0 ] ) ) ; </a> 
<a> assertSame ( EMPTY_BUFFER , wrappedBuffer ( new ByteBuf [ ] { buffer ( 0 ) } ) ) ; </a> 
<a> assertSame ( EMPTY_BUFFER , wrappedBuffer ( buffer ( 0 ) , buffer ( 0 ) ) ) ; </a> 
<a> assertSame ( EMPTY_BUFFER , copiedBuffer ( new byte [ 0 ] ) ) ; </a> 
<a> assertSame ( EMPTY_BUFFER , copiedBuffer ( new byte [ 0 ] ) . order ( <RARE_TOKEN> ) ) ; </a> 
<a> assertSame ( EMPTY_BUFFER , copiedBuffer ( new byte [ 8 ] , 0 , 0 ) ) ; </a> 
<a> assertSame ( EMPTY_BUFFER , copiedBuffer ( new byte [ 8 ] , 0 , 0 ) . order ( <RARE_TOKEN> ) ) ; </a> 
<a> assertSame ( EMPTY_BUFFER , copiedBuffer ( new byte [ 8 ] , 8 , 0 ) ) ; </a> 
<a> assertSame ( EMPTY_BUFFER , copiedBuffer ( new byte [ 8 ] , 8 , 0 ) . order ( <RARE_TOKEN> ) ) ; </a> 
<a> assertSame ( EMPTY_BUFFER , copiedBuffer ( ByteBuffer . <RARE_TOKEN> ( 0 ) ) ) ; </a> 
<a> assertSame ( EMPTY_BUFFER , copiedBuffer ( EMPTY_BUFFER ) ) ; </a> 
<a> assertSame ( EMPTY_BUFFER , copiedBuffer ( new byte [ 0 ] [ ] ) ) ; </a> 
<a> assertSame ( EMPTY_BUFFER , copiedBuffer ( new byte [ ] [ ] { new byte [ 0 ] } ) ) ; </a> 
<a> assertSame ( EMPTY_BUFFER , copiedBuffer ( new ByteBuffer [ 0 ] ) ) ; </a> 
<a> assertSame ( EMPTY_BUFFER , copiedBuffer ( new ByteBuffer [ ] { ByteBuffer . <RARE_TOKEN> ( 0 ) } ) ) ; </a> 
<a> assertSame ( EMPTY_BUFFER , copiedBuffer ( ByteBuffer . <RARE_TOKEN> ( 0 ) , ByteBuffer . <RARE_TOKEN> ( 0 ) ) ) ; </a> 
<a> assertSame ( EMPTY_BUFFER , copiedBuffer ( new ByteBuf [ 0 ] ) ) ; </a> 
<a> assertSame ( EMPTY_BUFFER , copiedBuffer ( new ByteBuf [ ] { buffer ( 0 ) } ) ) ; </a> 
<a> assertSame ( EMPTY_BUFFER , copiedBuffer ( buffer ( 0 ) , buffer ( 0 ) ) ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> assertTrue ( ByteBufUtil . <RARE_TOKEN> ( </a> 
<a> Unpooled . wrappedBuffer ( new byte [ ] { ( byte ) 0xFF , ( byte ) 0xFF , ( byte ) 0xFF , ( byte ) 0xFF } ) , </a> 
<a> Unpooled . wrappedBuffer ( new byte [ ] { ( byte ) 0x00 , ( byte ) 0x00 , ( byte ) 0x00 , ( byte ) 0x00 } ) ) </a> 
<a> > 0 ) ; </a> 
<a> assertTrue ( ByteBufUtil . <RARE_TOKEN> ( </a> 
<a> Unpooled . wrappedBuffer ( new byte [ ] { ( byte ) 0xFF } ) , </a> 
<a> Unpooled . wrappedBuffer ( new byte [ ] { ( byte ) 0x00 } ) ) </a> 
<a> > 0 ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> ByteBuf buf = wrappedBuffer ( </a> 
<a> EMPTY_BUFFER , </a> 
<a> wrappedBuffer ( new byte [ 16 ] ) . order ( <RARE_TOKEN> ) , </a> 
<a> EMPTY_BUFFER ) ; </a> 
<a> assertEquals ( 16 , buf . capacity ( ) ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> assertEquals ( 16 , wrappedBuffer ( ByteBuffer . <RARE_TOKEN> ( 16 ) ) . capacity ( ) ) ; </a> 
<a> assertEquals ( </a> 
<a> wrappedBuffer ( new byte [ ] { 1 , 2 , 3 } ) , </a> 
<a> wrappedBuffer ( new byte [ ] [ ] { new byte [ ] { 1 , 2 , 3 } } ) ) ; </a> 
<a> assertEquals ( </a> 
<a> wrappedBuffer ( new byte [ ] { 1 , 2 , 3 } ) , </a> 
<a> wrappedBuffer ( </a> 
<a> new byte [ ] { 1 } , </a> 
<a> new byte [ ] { 2 } , </a> 
<a> new byte [ ] { 3 } ) ) ; </a> 
<a> assertEquals ( </a> 
<a> wrappedBuffer ( new byte [ ] { 1 , 2 , 3 } ) , </a> 
<a> wrappedBuffer ( new ByteBuf [ ] { </a> 
<a> wrappedBuffer ( new byte [ ] { 1 , 2 , 3 } ) </a> 
<a> } ) ) ; </a> 
<a> assertEquals ( </a> 
<a> wrappedBuffer ( new byte [ ] { 1 , 2 , 3 } ) , </a> 
<a> wrappedBuffer ( </a> 
<a> wrappedBuffer ( new byte [ ] { 1 } ) , </a> 
<a> wrappedBuffer ( new byte [ ] { 2 } ) , </a> 
<a> wrappedBuffer ( new byte [ ] { 3 } ) ) ) ; </a> 
<a> assertEquals ( </a> 
<a> wrappedBuffer ( new byte [ ] { 1 , 2 , 3 } ) , </a> 
<a> wrappedBuffer ( new ByteBuffer [ ] { </a> 
<a> ByteBuffer . wrap ( new byte [ ] { 1 , 2 , 3 } ) </a> 
<a> } ) ) ; </a> 
<a> assertEquals ( </a> 
<a> wrappedBuffer ( new byte [ ] { 1 , 2 , 3 } ) , </a> 
<a> wrappedBuffer ( </a> 
<a> ByteBuffer . wrap ( new byte [ ] { 1 } ) , </a> 
<a> ByteBuffer . wrap ( new byte [ ] { 2 } ) , </a> 
<a> ByteBuffer . wrap ( new byte [ ] { 3 } ) ) ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> assertEquals ( 16 , copiedBuffer ( ByteBuffer . <RARE_TOKEN> ( 16 ) ) . capacity ( ) ) ; </a> 
<a> assertEquals ( </a> 
<a> wrappedBuffer ( new byte [ ] { 1 , 2 , 3 } ) , </a> 
<a> copiedBuffer ( new byte [ ] [ ] { new byte [ ] { 1 , 2 , 3 } } ) ) ; </a> 
<a> assertEquals ( </a> 
<a> wrappedBuffer ( new byte [ ] { 1 , 2 , 3 } ) , </a> 
<a> copiedBuffer ( </a> 
<a> new byte [ ] { 1 } , </a> 
<a> new byte [ ] { 2 } , </a> 
<a> new byte [ ] { 3 } ) ) ; </a> 
<a> assertEquals ( </a> 
<a> wrappedBuffer ( new byte [ ] { 1 , 2 , 3 } ) , </a> 
<a> copiedBuffer ( new ByteBuf [ ] { </a> 
<a> wrappedBuffer ( new byte [ ] { 1 , 2 , 3 } ) </a> 
<a> } ) ) ; </a> 
<a> assertEquals ( </a> 
<a> wrappedBuffer ( new byte [ ] { 1 , 2 , 3 } ) , </a> 
<a> copiedBuffer ( </a> 
<a> wrappedBuffer ( new byte [ ] { 1 } ) , </a> 
<a> wrappedBuffer ( new byte [ ] { 2 } ) , </a> 
<a> wrappedBuffer ( new byte [ ] { 3 } ) ) ) ; </a> 
<a> assertEquals ( </a> 
<a> wrappedBuffer ( new byte [ ] { 1 , 2 , 3 } ) , </a> 
<a> copiedBuffer ( new ByteBuffer [ ] { </a> 
<a> ByteBuffer . wrap ( new byte [ ] { 1 , 2 , 3 } ) </a> 
<a> } ) ) ; </a> 
<a> assertEquals ( </a> 
<a> wrappedBuffer ( new byte [ ] { 1 , 2 , 3 } ) , </a> 
<a> copiedBuffer ( </a> 
<a> ByteBuffer . wrap ( new byte [ ] { 1 } ) , </a> 
<a> ByteBuffer . wrap ( new byte [ ] { 2 } ) , </a> 
<a> ByteBuffer . wrap ( new byte [ ] { 3 } ) ) ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> assertEquals ( "" , ByteBufUtil . <RARE_TOKEN> ( EMPTY_BUFFER ) ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , ByteBufUtil . <RARE_TOKEN> ( wrappedBuffer ( </a> 
<a> new byte [ ] { </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> </a> 
<a> } ) ) ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , ByteBufUtil . <RARE_TOKEN> ( wrappedBuffer ( </a> 
<a> new byte [ ] { </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> </a> 
<a> } ) ) ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> assertEquals ( <RARE_TOKEN> , ByteBufUtil . <RARE_TOKEN> ( <RARE_TOKEN> ) ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , ByteBufUtil . <RARE_TOKEN> ( <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) throws Exception { </a> 
<a> ByteBuf buf = <RARE_TOKEN> ( buffer ( 16 ) ) ; </a> 
<a> try { </a> 
<a> buf . <RARE_TOKEN> ( ) ; </a> 
<a> fail ( ) ; </a> 
<a> } catch ( UnsupportedOperationException e ) { </a> 
<a> } </a> 
<a> try { </a> 
<a> buf . setByte ( 0 , ( byte ) 0 ) ; </a> 
<a> fail ( ) ; </a> 
<a> } catch ( UnsupportedOperationException e ) { </a> 
<a> } </a> 
<a> try { </a> 
<a> buf . setBytes ( 0 , EMPTY_BUFFER , 0 , 0 ) ; </a> 
<a> fail ( ) ; </a> 
<a> } catch ( UnsupportedOperationException e ) { </a> 
<a> } </a> 
<a> try { </a> 
<a> buf . setBytes ( 0 , new byte [ 0 ] , 0 , 0 ) ; </a> 
<a> fail ( ) ; </a> 
<a> } catch ( UnsupportedOperationException e ) { </a> 
<a> } </a> 
<a> try { </a> 
<a> buf . setBytes ( 0 , ByteBuffer . <RARE_TOKEN> ( 0 ) ) ; </a> 
<a> fail ( ) ; </a> 
<a> } catch ( UnsupportedOperationException e ) { </a> 
<a> } </a> 
<a> try { </a> 
<a> buf . <RARE_TOKEN> ( 0 , ( short ) 0 ) ; </a> 
<a> fail ( ) ; </a> 
<a> } catch ( UnsupportedOperationException e ) { </a> 
<a> } </a> 
<a> try { </a> 
<a> buf . <RARE_TOKEN> ( 0 , 0 ) ; </a> 
<a> fail ( ) ; </a> 
<a> } catch ( UnsupportedOperationException e ) { </a> 
<a> } </a> 
<a> try { </a> 
<a> buf . <RARE_TOKEN> ( 0 , 0 ) ; </a> 
<a> fail ( ) ; </a> 
<a> } catch ( UnsupportedOperationException e ) { </a> 
<a> } </a> 
<a> try { </a> 
<a> buf . <RARE_TOKEN> ( 0 , 0 ) ; </a> 
<a> fail ( ) ; </a> 
<a> } catch ( UnsupportedOperationException e ) { </a> 
<a> } </a> 
<a> try { </a> 
<a> buf . setBytes ( 0 , <RARE_TOKEN> . <RARE_TOKEN> ( InputStream . class ) , 0 ) ; </a> 
<a> fail ( ) ; </a> 
<a> } catch ( UnsupportedOperationException e ) { </a> 
<a> } </a> 
<a> try { </a> 
<a> buf . setBytes ( 0 , <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> . class ) , 0 ) ; </a> 
<a> fail ( ) ; </a> 
<a> } catch ( UnsupportedOperationException e ) { </a> 
<a> } </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> ByteBuf buffer = Unpooled . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> assertEquals ( 4 , buffer . capacity ( ) ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , buffer . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertFalse ( buffer . readable ( ) ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> ByteBuf buffer = Unpooled . <RARE_TOKEN> ( 1 , 4 ) ; </a> 
<a> assertEquals ( 8 , buffer . capacity ( ) ) ; </a> 
<a> assertEquals ( 1 , buffer . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertEquals ( 4 , buffer . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertFalse ( buffer . readable ( ) ) ; </a> 
<a> assertEquals ( 0 , Unpooled . <RARE_TOKEN> ( null ) . capacity ( ) ) ; </a> 
<a> assertEquals ( 0 , Unpooled . <RARE_TOKEN> ( new int [ 0 ] ) . capacity ( ) ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> ByteBuf buffer = Unpooled . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> assertEquals ( 2 , buffer . capacity ( ) ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , buffer . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertFalse ( buffer . readable ( ) ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> ByteBuf buffer = Unpooled . <RARE_TOKEN> ( new short [ ] { 1 , 4 } ) ; </a> 
<a> assertEquals ( 4 , buffer . capacity ( ) ) ; </a> 
<a> assertEquals ( 1 , buffer . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertEquals ( 4 , buffer . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertFalse ( buffer . readable ( ) ) ; </a> 
<a> assertEquals ( 0 , Unpooled . <RARE_TOKEN> ( ( short [ ] ) null ) . capacity ( ) ) ; </a> 
<a> assertEquals ( 0 , Unpooled . <RARE_TOKEN> ( new short [ 0 ] ) . capacity ( ) ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> ByteBuf buffer = Unpooled . <RARE_TOKEN> ( 1 , 4 ) ; </a> 
<a> assertEquals ( 4 , buffer . capacity ( ) ) ; </a> 
<a> assertEquals ( 1 , buffer . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertEquals ( 4 , buffer . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertFalse ( buffer . readable ( ) ) ; </a> 
<a> assertEquals ( 0 , Unpooled . <RARE_TOKEN> ( ( int [ ] ) null ) . capacity ( ) ) ; </a> 
<a> assertEquals ( 0 , Unpooled . <RARE_TOKEN> ( new int [ 0 ] ) . capacity ( ) ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> ByteBuf buffer = Unpooled . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> assertEquals ( 3 , buffer . capacity ( ) ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , buffer . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertFalse ( buffer . readable ( ) ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> ByteBuf buffer = Unpooled . <RARE_TOKEN> ( 1 , 4 ) ; </a> 
<a> assertEquals ( 6 , buffer . capacity ( ) ) ; </a> 
<a> assertEquals ( 1 , buffer . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertEquals ( 4 , buffer . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertFalse ( buffer . readable ( ) ) ; </a> 
<a> assertEquals ( 0 , Unpooled . <RARE_TOKEN> ( null ) . capacity ( ) ) ; </a> 
<a> assertEquals ( 0 , Unpooled . <RARE_TOKEN> ( new int [ 0 ] ) . capacity ( ) ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> ByteBuf buffer = Unpooled . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> assertEquals ( 8 , buffer . capacity ( ) ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , buffer . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertFalse ( buffer . readable ( ) ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> ByteBuf buffer = Unpooled . <RARE_TOKEN> ( 1 , 4 ) ; </a> 
<a> assertEquals ( 16 , buffer . capacity ( ) ) ; </a> 
<a> assertEquals ( 1 , buffer . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertEquals ( 4 , buffer . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertFalse ( buffer . readable ( ) ) ; </a> 
<a> assertEquals ( 0 , Unpooled . <RARE_TOKEN> ( null ) . capacity ( ) ) ; </a> 
<a> assertEquals ( 0 , Unpooled . <RARE_TOKEN> ( new long [ 0 ] ) . capacity ( ) ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> ByteBuf buffer = Unpooled . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> assertEquals ( 4 , buffer . capacity ( ) ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , buffer . <RARE_TOKEN> ( ) , <RARE_TOKEN> ) ; </a> 
<a> assertFalse ( buffer . readable ( ) ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> ByteBuf buffer = Unpooled . <RARE_TOKEN> ( 1 , 4 ) ; </a> 
<a> assertEquals ( 8 , buffer . capacity ( ) ) ; </a> 
<a> assertEquals ( 1 , buffer . <RARE_TOKEN> ( ) , <RARE_TOKEN> ) ; </a> 
<a> assertEquals ( 4 , buffer . <RARE_TOKEN> ( ) , <RARE_TOKEN> ) ; </a> 
<a> assertFalse ( buffer . readable ( ) ) ; </a> 
<a> assertEquals ( 0 , Unpooled . <RARE_TOKEN> ( null ) . capacity ( ) ) ; </a> 
<a> assertEquals ( 0 , Unpooled . <RARE_TOKEN> ( new float [ 0 ] ) . capacity ( ) ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> ByteBuf buffer = Unpooled . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> assertEquals ( 8 , buffer . capacity ( ) ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , buffer . <RARE_TOKEN> ( ) , <RARE_TOKEN> ) ; </a> 
<a> assertFalse ( buffer . readable ( ) ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> ByteBuf buffer = Unpooled . <RARE_TOKEN> ( 1 , 4 ) ; </a> 
<a> assertEquals ( 16 , buffer . capacity ( ) ) ; </a> 
<a> assertEquals ( 1 , buffer . <RARE_TOKEN> ( ) , <RARE_TOKEN> ) ; </a> 
<a> assertEquals ( 4 , buffer . <RARE_TOKEN> ( ) , <RARE_TOKEN> ) ; </a> 
<a> assertFalse ( buffer . readable ( ) ) ; </a> 
<a> assertEquals ( 0 , Unpooled . <RARE_TOKEN> ( null ) . capacity ( ) ) ; </a> 
<a> assertEquals ( 0 , Unpooled . <RARE_TOKEN> ( new double [ 0 ] ) . capacity ( ) ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> ByteBuf buffer = Unpooled . <RARE_TOKEN> ( true , false ) ; </a> 
<a> assertEquals ( 2 , buffer . capacity ( ) ) ; </a> 
<a> assertEquals ( true , buffer . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertEquals ( false , buffer . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertFalse ( buffer . readable ( ) ) ; </a> 
<a> assertEquals ( 0 , Unpooled . <RARE_TOKEN> ( null ) . capacity ( ) ) ; </a> 
<a> assertEquals ( 0 , Unpooled . <RARE_TOKEN> ( new boolean [ 0 ] ) . capacity ( ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . buffer ; </a> 
<a> import static org . junit . Assert . * ; </a> 
<a> import java . nio . ByteOrder ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> private ByteBuf buffer ; </a> 
<a> @ Override </a> 
<a> protected ByteBuf <RARE_TOKEN> ( int length ) { </a> 
<a> buffer = Unpooled . buffer ( length ) . order ( ByteOrder . <RARE_TOKEN> ) ; </a> 
<a> assertEquals ( 0 , buffer . writerIndex ( ) ) ; </a> 
<a> return buffer ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected ByteBuf [ ] components ( ) { </a> 
<a> return new ByteBuf [ ] { buffer } ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . buffer ; </a> 
<a> import static io . netty . buffer . Unpooled . * ; </a> 
<a> import static org . <RARE_TOKEN> . <RARE_TOKEN> . * ; </a> 
<a> import static org . junit . Assert . * ; </a> 
<a> import java . io . IOException ; </a> 
<a> import java . io . InputStream ; </a> 
<a> import java . io . OutputStream ; </a> 
<a> import java . nio . ByteBuffer ; </a> 
<a> import java . nio . channels . <RARE_TOKEN> ; </a> 
<a> import java . nio . channels . <RARE_TOKEN> ; </a> 
<a> import org . junit . Test ; </a> 
<a> public class <RARE_TOKEN> { </a> 
<a> @ Test ( expected = NullPointerException . class ) </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> new <RARE_TOKEN> ( null ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> assertTrue ( Unpooled . <RARE_TOKEN> ( Unpooled . buffer ( 1 ) ) instanceof <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> ByteBuf buf = Unpooled . buffer ( 1 ) ; </a> 
<a> assertSame ( buf , ( ( <RARE_TOKEN> ) Unpooled . <RARE_TOKEN> ( buf ) ) . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> ByteBuf buf = Unpooled . buffer ( 1 ) ; </a> 
<a> assertSame ( Unpooled . <RARE_TOKEN> , Unpooled . <RARE_TOKEN> ( buf ) . order ( ) ) ; </a> 
<a> buf = buf . order ( <RARE_TOKEN> ) ; </a> 
<a> assertSame ( Unpooled . <RARE_TOKEN> , Unpooled . <RARE_TOKEN> ( buf ) . order ( ) ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> ByteBuf buf = Unpooled . <RARE_TOKEN> ( Unpooled . buffer ( 1 ) ) ; </a> 
<a> assertTrue ( buf . <RARE_TOKEN> ( ) instanceof <RARE_TOKEN> ) ; </a> 
<a> assertTrue ( buf . slice ( ) instanceof <RARE_TOKEN> ) ; </a> 
<a> assertTrue ( buf . slice ( 0 , 1 ) instanceof <RARE_TOKEN> ) ; </a> 
<a> assertTrue ( buf . <RARE_TOKEN> ( ) instanceof <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> ByteBuf buf = Unpooled . <RARE_TOKEN> ( Unpooled . buffer ( 1 ) ) ; </a> 
<a> assertFalse ( buf . <RARE_TOKEN> ( ) instanceof <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) throws Exception { </a> 
<a> ByteBuf buf = createStrictMock ( ByteBuf . class ) ; </a> 
<a> expect ( buf . order ( ) ) . andReturn ( <RARE_TOKEN> ) . <RARE_TOKEN> ( ) ; </a> 
<a> expect ( buf . maxCapacity ( ) ) . andReturn ( <RARE_TOKEN> ) . <RARE_TOKEN> ( ) ; </a> 
<a> expect ( buf . readerIndex ( ) ) . andReturn ( 0 ) . <RARE_TOKEN> ( ) ; </a> 
<a> expect ( buf . writerIndex ( ) ) . andReturn ( 0 ) . <RARE_TOKEN> ( ) ; </a> 
<a> expect ( buf . capacity ( ) ) . andReturn ( 0 ) . <RARE_TOKEN> ( ) ; </a> 
<a> expect ( buf . getBytes ( 1 , ( <RARE_TOKEN> ) null , 2 ) ) . andReturn ( 3 ) ; </a> 
<a> buf . getBytes ( 4 , ( OutputStream ) null , 5 ) ; </a> 
<a> buf . getBytes ( 6 , ( byte [ ] ) null , 7 , 8 ) ; </a> 
<a> buf . getBytes ( 9 , ( ByteBuf ) null , 10 , 11 ) ; </a> 
<a> buf . getBytes ( 12 , ( ByteBuffer ) null ) ; </a> 
<a> expect ( buf . getByte ( 13 ) ) . andReturn ( <RARE_TOKEN> . valueOf ( ( byte ) 14 ) ) ; </a> 
<a> expect ( buf . <RARE_TOKEN> ( 15 ) ) . andReturn ( <RARE_TOKEN> . valueOf ( ( short ) 16 ) ) ; </a> 
<a> expect ( buf . <RARE_TOKEN> ( 17 ) ) . andReturn ( <RARE_TOKEN> ) ; </a> 
<a> expect ( buf . getInt ( 19 ) ) . andReturn ( 20 ) ; </a> 
<a> expect ( buf . getLong ( <RARE_TOKEN> ) ) . andReturn ( <RARE_TOKEN> ) ; </a> 
<a> ByteBuffer <RARE_TOKEN> = ByteBuffer . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> expect ( buf . nioBuffer ( 23 , 24 ) ) . andReturn ( <RARE_TOKEN> ) ; </a> 
<a> expect ( buf . capacity ( ) ) . andReturn ( 27 ) ; </a> 
<a> replay ( buf ) ; </a> 
<a> ByteBuf <RARE_TOKEN> = <RARE_TOKEN> ( buf ) ; </a> 
<a> assertEquals ( 3 , <RARE_TOKEN> . getBytes ( 1 , ( <RARE_TOKEN> ) null , 2 ) ) ; </a> 
<a> <RARE_TOKEN> . getBytes ( 4 , ( OutputStream ) null , 5 ) ; </a> 
<a> <RARE_TOKEN> . getBytes ( 6 , ( byte [ ] ) null , 7 , 8 ) ; </a> 
<a> <RARE_TOKEN> . getBytes ( 9 , ( ByteBuf ) null , 10 , 11 ) ; </a> 
<a> <RARE_TOKEN> . getBytes ( 12 , ( ByteBuffer ) null ) ; </a> 
<a> assertEquals ( ( byte ) 14 , <RARE_TOKEN> . getByte ( 13 ) ) ; </a> 
<a> assertEquals ( ( short ) 16 , <RARE_TOKEN> . <RARE_TOKEN> ( 15 ) ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> ( 17 ) ) ; </a> 
<a> assertEquals ( 20 , <RARE_TOKEN> . getInt ( 19 ) ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , <RARE_TOKEN> . getLong ( <RARE_TOKEN> ) ) ; </a> 
<a> ByteBuffer <RARE_TOKEN> = <RARE_TOKEN> . nioBuffer ( 23 , 24 ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> , <RARE_TOKEN> . capacity ( ) ) ; </a> 
<a> assertTrue ( <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertEquals ( 27 , <RARE_TOKEN> . capacity ( ) ) ; </a> 
<a> verify ( buf ) ; </a> 
<a> } </a> 
<a> @ Test ( expected = UnsupportedOperationException . class ) </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> ( EMPTY_BUFFER ) . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Test ( expected = UnsupportedOperationException . class ) </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> ( EMPTY_BUFFER ) . setByte ( 0 , ( byte ) 0 ) ; </a> 
<a> } </a> 
<a> @ Test ( expected = UnsupportedOperationException . class ) </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> ( EMPTY_BUFFER ) . <RARE_TOKEN> ( 0 , ( short ) 0 ) ; </a> 
<a> } </a> 
<a> @ Test ( expected = UnsupportedOperationException . class ) </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> ( EMPTY_BUFFER ) . <RARE_TOKEN> ( 0 , 0 ) ; </a> 
<a> } </a> 
<a> @ Test ( expected = UnsupportedOperationException . class ) </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> ( EMPTY_BUFFER ) . <RARE_TOKEN> ( 0 , 0 ) ; </a> 
<a> } </a> 
<a> @ Test ( expected = UnsupportedOperationException . class ) </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> ( EMPTY_BUFFER ) . <RARE_TOKEN> ( 0 , 0 ) ; </a> 
<a> } </a> 
<a> @ Test ( expected = UnsupportedOperationException . class ) </a> 
<a> public void <RARE_TOKEN> ( ) throws IOException { </a> 
<a> <RARE_TOKEN> ( EMPTY_BUFFER ) . setBytes ( 0 , ( InputStream ) null , 0 ) ; </a> 
<a> } </a> 
<a> @ Test ( expected = UnsupportedOperationException . class ) </a> 
<a> public void <RARE_TOKEN> ( ) throws IOException { </a> 
<a> <RARE_TOKEN> ( EMPTY_BUFFER ) . setBytes ( 0 , ( <RARE_TOKEN> ) null , 0 ) ; </a> 
<a> } </a> 
<a> @ Test ( expected = UnsupportedOperationException . class ) </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> ( EMPTY_BUFFER ) . setBytes ( 0 , ( byte [ ] ) null , 0 , 0 ) ; </a> 
<a> } </a> 
<a> @ Test ( expected = UnsupportedOperationException . class ) </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> ( EMPTY_BUFFER ) . setBytes ( 0 , ( ByteBuf ) null , 0 , 0 ) ; </a> 
<a> } </a> 
<a> @ Test ( expected = UnsupportedOperationException . class ) </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> ( EMPTY_BUFFER ) . setBytes ( 0 , ( ByteBuffer ) null ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . buffer ; </a> 
<a> import static org . junit . Assert . * ; </a> 
<a> import java . util . Random ; </a> 
<a> import org . junit . Test ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> private final Random random = new Random ( ) ; </a> 
<a> private ByteBuf buffer ; </a> 
<a> @ Override </a> 
<a> protected ByteBuf <RARE_TOKEN> ( int length ) { </a> 
<a> buffer = Unpooled . wrappedBuffer ( </a> 
<a> new byte [ length * 2 ] , random . nextInt ( length - 1 ) + 1 , length ) ; </a> 
<a> assertEquals ( length , buffer . writerIndex ( ) ) ; </a> 
<a> return buffer ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected ByteBuf [ ] components ( ) { </a> 
<a> return new ByteBuf [ ] { buffer } ; </a> 
<a> } </a> 
<a> @ Test ( expected = NullPointerException . class ) </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> new <RARE_TOKEN> ( null , 0 , 0 ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . http ; </a> 
<a> import static io . netty . handler . codec . http . <RARE_TOKEN> . * ; </a> 
<a> public final class <RARE_TOKEN> { </a> 
<a> public static String encode ( String name , String value ) { </a> 
<a> return encode ( new <RARE_TOKEN> ( name , value ) ) ; </a> 
<a> } </a> 
<a> public static String encode ( Cookie cookie ) { </a> 
<a> if ( cookie == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> StringBuilder buf = new StringBuilder ( ) ; </a> 
<a> encode ( buf , cookie ) ; </a> 
<a> return <RARE_TOKEN> ( buf ) ; </a> 
<a> } </a> 
<a> public static String encode ( Cookie ... <RARE_TOKEN> ) { </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> StringBuilder buf = new StringBuilder ( ) ; </a> 
<a> for ( Cookie c : <RARE_TOKEN> ) { </a> 
<a> if ( c == null ) { </a> 
<a> break ; </a> 
<a> } </a> 
<a> encode ( buf , c ) ; </a> 
<a> } </a> 
<a> return <RARE_TOKEN> ( buf ) ; </a> 
<a> } </a> 
<a> public static String encode ( <RARE_TOKEN> < Cookie > <RARE_TOKEN> ) { </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> StringBuilder buf = new StringBuilder ( ) ; </a> 
<a> for ( Cookie c : <RARE_TOKEN> ) { </a> 
<a> if ( c == null ) { </a> 
<a> break ; </a> 
<a> } </a> 
<a> encode ( buf , c ) ; </a> 
<a> } </a> 
<a> return <RARE_TOKEN> ( buf ) ; </a> 
<a> } </a> 
<a> private static void encode ( StringBuilder buf , Cookie c ) { </a> 
<a> if ( c . <RARE_TOKEN> ( ) >= 1 ) { </a> 
<a> add ( buf , <RARE_TOKEN> + <RARE_TOKEN> . <RARE_TOKEN> , 1 ) ; </a> 
<a> } </a> 
<a> add ( buf , c . getName ( ) , c . getValue ( ) ) ; </a> 
<a> if ( c . getPath ( ) != null ) { </a> 
<a> add ( buf , <RARE_TOKEN> + <RARE_TOKEN> . <RARE_TOKEN> , c . getPath ( ) ) ; </a> 
<a> } </a> 
<a> if ( c . <RARE_TOKEN> ( ) != null ) { </a> 
<a> add ( buf , <RARE_TOKEN> + <RARE_TOKEN> . <RARE_TOKEN> , c . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> if ( c . <RARE_TOKEN> ( ) >= 1 ) { </a> 
<a> if ( ! c . <RARE_TOKEN> ( ) . isEmpty ( ) ) { </a> 
<a> buf . append ( <RARE_TOKEN> ) ; </a> 
<a> buf . append ( <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> buf . append ( ( char ) HttpConstants . <RARE_TOKEN> ) ; </a> 
<a> buf . append ( ( char ) HttpConstants . <RARE_TOKEN> ) ; </a> 
<a> for ( int port : c . <RARE_TOKEN> ( ) ) { </a> 
<a> buf . append ( port ) ; </a> 
<a> buf . append ( ( char ) HttpConstants . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> buf . <RARE_TOKEN> ( buf . length ( ) - 1 , ( char ) HttpConstants . <RARE_TOKEN> ) ; </a> 
<a> buf . append ( ( char ) HttpConstants . <RARE_TOKEN> ) ; </a> 
<a> buf . append ( ( char ) HttpConstants . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> private <RARE_TOKEN> ( ) { </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . http ; </a> 
<a> import java . text . <RARE_TOKEN> ; </a> 
<a> import java . util . ArrayList ; </a> 
<a> import java . util . Collections ; </a> 
<a> import java . util . List ; </a> 
<a> import java . util . Set ; </a> 
<a> import java . util . <RARE_TOKEN> ; </a> 
<a> public final class <RARE_TOKEN> { </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> public static Set < Cookie > decode ( String header ) { </a> 
<a> List < String > names = new ArrayList < String > ( 8 ) ; </a> 
<a> List < String > values = new ArrayList < String > ( 8 ) ; </a> 
<a> <RARE_TOKEN> ( header , names , values ) ; </a> 
<a> if ( names . isEmpty ( ) ) { </a> 
<a> return Collections . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> int i ; </a> 
<a> int version = 0 ; </a> 
<a> if ( names . get ( 0 ) . equalsIgnoreCase ( <RARE_TOKEN> . <RARE_TOKEN> ) ) { </a> 
<a> try { </a> 
<a> version = Integer . parseInt ( values . get ( 0 ) ) ; </a> 
<a> } catch ( <RARE_TOKEN> e ) { </a> 
<a> } </a> 
<a> i = 1 ; </a> 
<a> } else { </a> 
<a> i = 0 ; </a> 
<a> } </a> 
<a> if ( names . size ( ) <= i ) { </a> 
<a> return Collections . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> Set < Cookie > <RARE_TOKEN> = new <RARE_TOKEN> < Cookie > ( ) ; </a> 
<a> for ( ; i < names . size ( ) ; i ++ ) { </a> 
<a> String name = names . get ( i ) ; </a> 
<a> String value = values . get ( i ) ; </a> 
<a> if ( value == null ) { </a> 
<a> value = "" ; </a> 
<a> } </a> 
<a> Cookie c = new <RARE_TOKEN> ( name , value ) ; </a> 
<a> boolean <RARE_TOKEN> = false ; </a> 
<a> boolean <RARE_TOKEN> = false ; </a> 
<a> boolean <RARE_TOKEN> = false ; </a> 
<a> String <RARE_TOKEN> = null ; </a> 
<a> String <RARE_TOKEN> = null ; </a> 
<a> String <RARE_TOKEN> = null ; </a> 
<a> String path = null ; </a> 
<a> long <RARE_TOKEN> = Long . <RARE_TOKEN> ; </a> 
<a> List < Integer > <RARE_TOKEN> = new ArrayList < Integer > ( 2 ) ; </a> 
<a> for ( int j = i + 1 ; j < names . size ( ) ; j ++ , i ++ ) { </a> 
<a> name = names . get ( j ) ; </a> 
<a> value = values . get ( j ) ; </a> 
<a> if ( <RARE_TOKEN> . <RARE_TOKEN> . equalsIgnoreCase ( name ) ) { </a> 
<a> <RARE_TOKEN> = true ; </a> 
<a> } else if ( <RARE_TOKEN> . <RARE_TOKEN> . equalsIgnoreCase ( name ) ) { </a> 
<a> <RARE_TOKEN> = true ; </a> 
<a> } else if ( <RARE_TOKEN> . <RARE_TOKEN> . equalsIgnoreCase ( name ) ) { </a> 
<a> <RARE_TOKEN> = true ; </a> 
<a> } else if ( <RARE_TOKEN> . <RARE_TOKEN> . equalsIgnoreCase ( name ) ) { </a> 
<a> <RARE_TOKEN> = value ; </a> 
<a> } else if ( <RARE_TOKEN> . <RARE_TOKEN> . equalsIgnoreCase ( name ) ) { </a> 
<a> <RARE_TOKEN> = value ; </a> 
<a> } else if ( <RARE_TOKEN> . <RARE_TOKEN> . equalsIgnoreCase ( name ) ) { </a> 
<a> <RARE_TOKEN> = value ; </a> 
<a> } else if ( <RARE_TOKEN> . <RARE_TOKEN> . equalsIgnoreCase ( name ) ) { </a> 
<a> path = value ; </a> 
<a> } else if ( <RARE_TOKEN> . <RARE_TOKEN> . equalsIgnoreCase ( name ) ) { </a> 
<a> try { </a> 
<a> long <RARE_TOKEN> = </a> 
<a> new <RARE_TOKEN> ( ) . <RARE_TOKEN> ( value ) . getTime ( ) - </a> 
<a> System . currentTimeMillis ( ) ; </a> 
<a> if ( <RARE_TOKEN> <= 0 ) { </a> 
<a> <RARE_TOKEN> = 0 ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> / 1000 + ( <RARE_TOKEN> <RARE_TOKEN> 1000 != 0 ? 1 : 0 ) ; </a> 
<a> } </a> 
<a> } catch ( <RARE_TOKEN> e ) { </a> 
<a> } </a> 
<a> } else if ( <RARE_TOKEN> . <RARE_TOKEN> . equalsIgnoreCase ( name ) ) { </a> 
<a> <RARE_TOKEN> = Integer . parseInt ( value ) ; </a> 
<a> } else if ( <RARE_TOKEN> . <RARE_TOKEN> . equalsIgnoreCase ( name ) ) { </a> 
<a> version = Integer . parseInt ( value ) ; </a> 
<a> } else if ( <RARE_TOKEN> . <RARE_TOKEN> . equalsIgnoreCase ( name ) ) { </a> 
<a> String [ ] <RARE_TOKEN> = value . split ( <RARE_TOKEN> ) ; </a> 
<a> for ( String <RARE_TOKEN> : <RARE_TOKEN> ) { </a> 
<a> try { </a> 
<a> <RARE_TOKEN> . add ( Integer . valueOf ( <RARE_TOKEN> ) ) ; </a> 
<a> } catch ( <RARE_TOKEN> e ) { </a> 
<a> } </a> 
<a> } </a> 
<a> } else { </a> 
<a> break ; </a> 
<a> } </a> 
<a> } </a> 
<a> c . <RARE_TOKEN> ( version ) ; </a> 
<a> c . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> c . <RARE_TOKEN> ( path ) ; </a> 
<a> c . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> c . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> c . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> if ( version > 0 ) { </a> 
<a> c . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( version > 1 ) { </a> 
<a> c . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> c . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> c . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> . add ( c ) ; </a> 
<a> } </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> private static void <RARE_TOKEN> ( </a> 
<a> final String header , final List < String > names , final List < String > values ) { </a> 
<a> final int <RARE_TOKEN> = header . length ( ) ; </a> 
<a> loop : for ( int i = 0 ; ; ) { </a> 
<a> for ( ; ; ) { </a> 
<a> if ( i == <RARE_TOKEN> ) { </a> 
<a> break loop ; </a> 
<a> } </a> 
<a> switch ( header . charAt ( i ) ) { </a> 
<a> case <RARE_TOKEN> : case <RARE_TOKEN> : case <RARE_TOKEN> : case <RARE_TOKEN> : case <RARE_TOKEN> : </a> 
<a> case ' ' : case <RARE_TOKEN> : case <RARE_TOKEN> : </a> 
<a> i ++ ; </a> 
<a> continue ; </a> 
<a> } </a> 
<a> break ; </a> 
<a> } </a> 
<a> for ( ; ; ) { </a> 
<a> if ( i == <RARE_TOKEN> ) { </a> 
<a> break loop ; </a> 
<a> } </a> 
<a> if ( header . charAt ( i ) == <RARE_TOKEN> ) { </a> 
<a> i ++ ; </a> 
<a> continue ; </a> 
<a> } </a> 
<a> break ; </a> 
<a> } </a> 
<a> String name ; </a> 
<a> String value ; </a> 
<a> if ( i == <RARE_TOKEN> ) { </a> 
<a> name = null ; </a> 
<a> value = null ; </a> 
<a> } else { </a> 
<a> int <RARE_TOKEN> = i ; </a> 
<a> <RARE_TOKEN> : for ( ; ; ) { </a> 
<a> switch ( header . charAt ( i ) ) { </a> 
<a> case <RARE_TOKEN> : </a> 
<a> name = header . substring ( <RARE_TOKEN> , i ) ; </a> 
<a> value = null ; </a> 
<a> break <RARE_TOKEN> ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> name = header . substring ( <RARE_TOKEN> , i ) ; </a> 
<a> i ++ ; </a> 
<a> if ( i == <RARE_TOKEN> ) { </a> 
<a> value = "" ; </a> 
<a> break <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> int <RARE_TOKEN> = i ; </a> 
<a> char c = header . charAt ( i ) ; </a> 
<a> if ( c == <RARE_TOKEN> || c == <RARE_TOKEN> ) { </a> 
<a> StringBuilder <RARE_TOKEN> = new StringBuilder ( header . length ( ) - i ) ; </a> 
<a> final char q = c ; </a> 
<a> boolean <RARE_TOKEN> = false ; </a> 
<a> i ++ ; </a> 
<a> for ( ; ; ) { </a> 
<a> if ( i == <RARE_TOKEN> ) { </a> 
<a> value = <RARE_TOKEN> . toString ( ) ; </a> 
<a> break <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> = false ; </a> 
<a> c = header . charAt ( i ++ ) ; </a> 
<a> switch ( c ) { </a> 
<a> case <RARE_TOKEN> : case <RARE_TOKEN> : case <RARE_TOKEN> : </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> . length ( ) - 1 , c ) ; </a> 
<a> break ; </a> 
<a> default : </a> 
<a> <RARE_TOKEN> . append ( c ) ; </a> 
<a> } </a> 
<a> } else { </a> 
<a> c = header . charAt ( i ++ ) ; </a> 
<a> if ( c == q ) { </a> 
<a> value = <RARE_TOKEN> . toString ( ) ; </a> 
<a> break <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> . append ( c ) ; </a> 
<a> if ( c == <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> = true ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } else { </a> 
<a> int <RARE_TOKEN> = header . indexOf ( <RARE_TOKEN> , i ) ; </a> 
<a> if ( <RARE_TOKEN> > 0 ) { </a> 
<a> value = header . substring ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> i = <RARE_TOKEN> ; </a> 
<a> } else { </a> 
<a> value = header . substring ( <RARE_TOKEN> ) ; </a> 
<a> i = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<a> break <RARE_TOKEN> ; </a> 
<a> default : </a> 
<a> i ++ ; </a> 
<a> } </a> 
<a> if ( i == <RARE_TOKEN> ) { </a> 
<a> name = header . substring ( <RARE_TOKEN> ) ; </a> 
<a> value = null ; </a> 
<a> break ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> names . add ( name ) ; </a> 
<a> values . add ( value ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private <RARE_TOKEN> ( ) { </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . http ; </a> 
<a> final class <RARE_TOKEN> { </a> 
<a> static String <RARE_TOKEN> ( StringBuilder buf ) { </a> 
<a> if ( buf . length ( ) > 0 ) { </a> 
<a> buf . <RARE_TOKEN> ( buf . length ( ) - 2 ) ; </a> 
<a> } </a> 
<a> return buf . toString ( ) ; </a> 
<a> } </a> 
<a> static void add ( StringBuilder sb , String name , String val ) { </a> 
<a> if ( val == null ) { </a> 
<a> <RARE_TOKEN> ( sb , name , "" ) ; </a> 
<a> return ; </a> 
<a> } </a> 
<a> for ( int i = 0 ; i < val . length ( ) ; i ++ ) { </a> 
<a> char c = val . charAt ( i ) ; </a> 
<a> switch ( c ) { </a> 
<a> case <RARE_TOKEN> : case ' ' : case <RARE_TOKEN> : case <RARE_TOKEN> : case <RARE_TOKEN> : case <RARE_TOKEN> : </a> 
<a> case <RARE_TOKEN> : case <RARE_TOKEN> : case <RARE_TOKEN> : case <RARE_TOKEN> : case <RARE_TOKEN> : case <RARE_TOKEN> : </a> 
<a> case <RARE_TOKEN> : case <RARE_TOKEN> : case <RARE_TOKEN> : case <RARE_TOKEN> : case <RARE_TOKEN> : </a> 
<a> case <RARE_TOKEN> : case <RARE_TOKEN> : </a> 
<a> <RARE_TOKEN> ( sb , name , val ) ; </a> 
<a> return ; </a> 
<a> } </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( sb , name , val ) ; </a> 
<a> } </a> 
<a> static void <RARE_TOKEN> ( StringBuilder sb , String name , String val ) { </a> 
<a> sb . append ( name ) ; </a> 
<a> sb . append ( ( char ) HttpConstants . <RARE_TOKEN> ) ; </a> 
<a> sb . append ( val ) ; </a> 
<a> sb . append ( ( char ) HttpConstants . <RARE_TOKEN> ) ; </a> 
<a> sb . append ( ( char ) HttpConstants . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> static void <RARE_TOKEN> ( StringBuilder sb , String name , String val ) { </a> 
<a> if ( val == null ) { </a> 
<a> val = "" ; </a> 
<a> } </a> 
<a> sb . append ( name ) ; </a> 
<a> sb . append ( ( char ) HttpConstants . <RARE_TOKEN> ) ; </a> 
<a> sb . append ( ( char ) HttpConstants . <RARE_TOKEN> ) ; </a> 
<a> sb . append ( val . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ) ; </a> 
<a> sb . append ( ( char ) HttpConstants . <RARE_TOKEN> ) ; </a> 
<a> sb . append ( ( char ) HttpConstants . <RARE_TOKEN> ) ; </a> 
<a> sb . append ( ( char ) HttpConstants . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> static void add ( StringBuilder sb , String name , long val ) { </a> 
<a> sb . append ( name ) ; </a> 
<a> sb . append ( ( char ) HttpConstants . <RARE_TOKEN> ) ; </a> 
<a> sb . append ( val ) ; </a> 
<a> sb . append ( ( char ) HttpConstants . <RARE_TOKEN> ) ; </a> 
<a> sb . append ( ( char ) HttpConstants . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> private <RARE_TOKEN> ( ) { </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . http ; </a> 
<a> final class <RARE_TOKEN> { </a> 
<a> static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private <RARE_TOKEN> ( ) { </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . http ; </a> 
<a> import java . util . Collections ; </a> 
<a> import java . util . Set ; </a> 
<a> import java . util . <RARE_TOKEN> ; </a> 
<a> public class <RARE_TOKEN> implements Cookie { </a> 
<a> private final String name ; </a> 
<a> private String value ; </a> 
<a> private String <RARE_TOKEN> ; </a> 
<a> private String path ; </a> 
<a> private String <RARE_TOKEN> ; </a> 
<a> private String <RARE_TOKEN> ; </a> 
<a> private boolean <RARE_TOKEN> ; </a> 
<a> private Set < Integer > <RARE_TOKEN> = Collections . <RARE_TOKEN> ( ) ; </a> 
<a> private Set < Integer > <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private long <RARE_TOKEN> = Long . <RARE_TOKEN> ; </a> 
<a> private int version ; </a> 
<a> private boolean <RARE_TOKEN> ; </a> 
<a> private boolean <RARE_TOKEN> ; </a> 
<a> public <RARE_TOKEN> ( String name , String value ) { </a> 
<a> if ( name == null ) { </a> 
<a> throw new NullPointerException ( "name" ) ; </a> 
<a> } </a> 
<a> name = name . <RARE_TOKEN> ( ) ; </a> 
<a> if ( name . length ( ) == 0 ) { </a> 
<a> throw new IllegalArgumentException ( <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> for ( int i = 0 ; i < name . length ( ) ; i ++ ) { </a> 
<a> char c = name . charAt ( i ) ; </a> 
<a> if ( c > <RARE_TOKEN> ) { </a> 
<a> throw new IllegalArgumentException ( </a> 
<a> <RARE_TOKEN> contains <RARE_TOKEN> <RARE_TOKEN> " + name ) ; </a> 
<a> } </a> 
<a> switch ( c ) { </a> 
<a> case <RARE_TOKEN> : case <RARE_TOKEN> : case <RARE_TOKEN> : case <RARE_TOKEN> : case <RARE_TOKEN> : </a> 
<a> case ' ' : case <RARE_TOKEN> : case <RARE_TOKEN> : case <RARE_TOKEN> : </a> 
<a> throw new IllegalArgumentException ( </a> 
<a> <RARE_TOKEN> contains one of the <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> " + </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> " + name ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> if ( name . charAt ( 0 ) == <RARE_TOKEN> ) { </a> 
<a> throw new IllegalArgumentException ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> not <RARE_TOKEN> " + name ) ; </a> 
<a> } </a> 
<a> this . name = name ; </a> 
<a> <RARE_TOKEN> ( value ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public String getName ( ) { </a> 
<a> return name ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public String getValue ( ) { </a> 
<a> return value ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( String value ) { </a> 
<a> if ( value == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> this . value = value ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public String <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( String <RARE_TOKEN> ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public String getPath ( ) { </a> 
<a> return path ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( String path ) { </a> 
<a> this . path = <RARE_TOKEN> ( <RARE_TOKEN> , path ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public String <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( String <RARE_TOKEN> ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public String <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( String <RARE_TOKEN> ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( boolean <RARE_TOKEN> ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public Set < Integer > <RARE_TOKEN> ( ) { </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> <RARE_TOKEN> = Collections . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( int ... <RARE_TOKEN> ) { </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> int [ ] <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> if ( <RARE_TOKEN> . length == 0 ) { </a> 
<a> <RARE_TOKEN> = this . <RARE_TOKEN> = Collections . <RARE_TOKEN> ( ) ; </a> 
<a> } else { </a> 
<a> Set < Integer > <RARE_TOKEN> = new <RARE_TOKEN> < Integer > ( ) ; </a> 
<a> for ( int p : <RARE_TOKEN> ) { </a> 
<a> if ( p <= 0 || p > <RARE_TOKEN> ) { </a> 
<a> throw new IllegalArgumentException ( <RARE_TOKEN> out of <RARE_TOKEN> " + p ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> . add ( Integer . valueOf ( p ) ) ; </a> 
<a> } </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = null ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( <RARE_TOKEN> < Integer > <RARE_TOKEN> ) { </a> 
<a> Set < Integer > <RARE_TOKEN> = new <RARE_TOKEN> < Integer > ( ) ; </a> 
<a> for ( int p : <RARE_TOKEN> ) { </a> 
<a> if ( p <= 0 || p > <RARE_TOKEN> ) { </a> 
<a> throw new IllegalArgumentException ( <RARE_TOKEN> out of <RARE_TOKEN> " + p ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> . add ( Integer . valueOf ( p ) ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> . isEmpty ( ) ) { </a> 
<a> <RARE_TOKEN> = this . <RARE_TOKEN> = Collections . <RARE_TOKEN> ( ) ; </a> 
<a> } else { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = null ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public long <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( long <RARE_TOKEN> ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int <RARE_TOKEN> ( ) { </a> 
<a> return version ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( int version ) { </a> 
<a> this . version = version ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( boolean <RARE_TOKEN> ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( boolean <RARE_TOKEN> ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int hashCode ( ) { </a> 
<a> return getName ( ) . hashCode ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean equals ( Object o ) { </a> 
<a> if ( ! ( o instanceof Cookie ) ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> Cookie that = ( Cookie ) o ; </a> 
<a> if ( ! getName ( ) . equalsIgnoreCase ( that . getName ( ) ) ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> if ( getPath ( ) == null ) { </a> 
<a> if ( that . getPath ( ) != null ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> } else if ( that . getPath ( ) == null ) { </a> 
<a> return false ; </a> 
<a> } else if ( ! getPath ( ) . equals ( that . getPath ( ) ) ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> ( ) == null ) { </a> 
<a> if ( that . <RARE_TOKEN> ( ) != null ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> } else if ( that . <RARE_TOKEN> ( ) == null ) { </a> 
<a> return false ; </a> 
<a> } else { </a> 
<a> return <RARE_TOKEN> ( ) . equalsIgnoreCase ( that . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> return true ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int <RARE_TOKEN> ( Cookie c ) { </a> 
<a> int v ; </a> 
<a> v = getName ( ) . <RARE_TOKEN> ( c . getName ( ) ) ; </a> 
<a> if ( v != 0 ) { </a> 
<a> return v ; </a> 
<a> } </a> 
<a> if ( getPath ( ) == null ) { </a> 
<a> if ( c . getPath ( ) != null ) { </a> 
<a> return - 1 ; </a> 
<a> } </a> 
<a> } else if ( c . getPath ( ) == null ) { </a> 
<a> return 1 ; </a> 
<a> } else { </a> 
<a> v = getPath ( ) . <RARE_TOKEN> ( c . getPath ( ) ) ; </a> 
<a> if ( v != 0 ) { </a> 
<a> return v ; </a> 
<a> } </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> ( ) == null ) { </a> 
<a> if ( c . <RARE_TOKEN> ( ) != null ) { </a> 
<a> return - 1 ; </a> 
<a> } </a> 
<a> } else if ( c . <RARE_TOKEN> ( ) == null ) { </a> 
<a> return 1 ; </a> 
<a> } else { </a> 
<a> v = <RARE_TOKEN> ( ) . <RARE_TOKEN> ( c . <RARE_TOKEN> ( ) ) ; </a> 
<a> return v ; </a> 
<a> } </a> 
<a> return 0 ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public String toString ( ) { </a> 
<a> StringBuilder buf = new StringBuilder ( ) ; </a> 
<a> buf . append ( getName ( ) ) ; </a> 
<a> buf . append ( <RARE_TOKEN> ) ; </a> 
<a> buf . append ( getValue ( ) ) ; </a> 
<a> if ( <RARE_TOKEN> ( ) != null ) { </a> 
<a> buf . append ( ", <RARE_TOKEN> ) ; </a> 
<a> buf . append ( <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> if ( getPath ( ) != null ) { </a> 
<a> buf . append ( ", <RARE_TOKEN> ) ; </a> 
<a> buf . append ( getPath ( ) ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> ( ) != null ) { </a> 
<a> buf . append ( ", <RARE_TOKEN> ) ; </a> 
<a> buf . append ( <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> ( ) >= 0 ) { </a> 
<a> buf . append ( ", <RARE_TOKEN> ) ; </a> 
<a> buf . append ( <RARE_TOKEN> ( ) ) ; </a> 
<a> buf . append ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> ( ) ) { </a> 
<a> buf . append ( ", <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> ( ) ) { </a> 
<a> buf . append ( ", <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> return buf . toString ( ) ; </a> 
<a> } </a> 
<a> private static String <RARE_TOKEN> ( String name , String value ) { </a> 
<a> if ( value == null ) { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> value = value . <RARE_TOKEN> ( ) ; </a> 
<a> if ( value . length ( ) == 0 ) { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> for ( int i = 0 ; i < value . length ( ) ; i ++ ) { </a> 
<a> char c = value . charAt ( i ) ; </a> 
<a> switch ( c ) { </a> 
<a> case <RARE_TOKEN> : case <RARE_TOKEN> : case <RARE_TOKEN> : case <RARE_TOKEN> : case <RARE_TOKEN> : </a> 
<a> throw new IllegalArgumentException ( </a> 
<a> name + " contains one of the <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> " + </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> + value + <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> return value ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . http ; </a> 
<a> import io . netty . buffer . ByteBuf ; </a> 
<a> import io . netty . buffer . Unpooled ; </a> 
<a> import java . util . List ; </a> 
<a> import java . util . Map ; </a> 
<a> import java . util . Set ; </a> 
<a> public class <RARE_TOKEN> implements <RARE_TOKEN> { </a> 
<a> private final HttpHeaders headers = new HttpHeaders ( ) { </a> 
<a> @ Override </a> 
<a> void <RARE_TOKEN> ( String name ) { </a> 
<a> super . <RARE_TOKEN> ( name ) ; </a> 
<a> if ( name . equalsIgnoreCase ( HttpHeaders . Names . <RARE_TOKEN> ) || </a> 
<a> name . equalsIgnoreCase ( HttpHeaders . Names . <RARE_TOKEN> ) || </a> 
<a> name . equalsIgnoreCase ( HttpHeaders . Names . <RARE_TOKEN> ) ) { </a> 
<a> throw new IllegalArgumentException ( </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> " + name ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } ; </a> 
<a> @ Override </a> 
<a> public boolean isLast ( ) { </a> 
<a> return true ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void addHeader ( final String name , final Object value ) { </a> 
<a> headers . addHeader ( name , value ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void setHeader ( final String name , final Object value ) { </a> 
<a> headers . setHeader ( name , value ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void setHeader ( final String name , final <RARE_TOKEN> < ? > values ) { </a> 
<a> headers . setHeader ( name , values ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void removeHeader ( final String name ) { </a> 
<a> headers . removeHeader ( name ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> headers . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public String getHeader ( final String name ) { </a> 
<a> return headers . getHeader ( name ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public List < String > getHeaders ( final String name ) { </a> 
<a> return headers . getHeaders ( name ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public List < Map . Entry < String , String > > getHeaders ( ) { </a> 
<a> return headers . getHeaders ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( final String name ) { </a> 
<a> return headers . <RARE_TOKEN> ( name ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public Set < String > <RARE_TOKEN> ( ) { </a> 
<a> return headers . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ByteBuf getContent ( ) { </a> 
<a> return Unpooled . EMPTY_BUFFER ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ByteBuf content ) { </a> 
<a> throw new IllegalStateException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . http ; </a> 
<a> import io . netty . util . internal . StringUtil ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> implements HttpResponse { </a> 
<a> private HttpResponseStatus status ; </a> 
<a> public <RARE_TOKEN> ( HttpVersion version , HttpResponseStatus status ) { </a> 
<a> super ( version ) ; </a> 
<a> <RARE_TOKEN> ( status ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public HttpResponseStatus getStatus ( ) { </a> 
<a> return status ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( HttpResponseStatus status ) { </a> 
<a> if ( status == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> this . status = status ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public String toString ( ) { </a> 
<a> StringBuilder buf = new StringBuilder ( ) ; </a> 
<a> buf . append ( getClass ( ) . getSimpleName ( ) ) ; </a> 
<a> buf . append ( <RARE_TOKEN> " ) ; </a> 
<a> buf . append ( <RARE_TOKEN> ( ) ) ; </a> 
<a> buf . append ( <RARE_TOKEN> ) ; </a> 
<a> buf . append ( StringUtil . NEWLINE ) ; </a> 
<a> buf . append ( <RARE_TOKEN> ( ) . <RARE_TOKEN> ( ) ) ; </a> 
<a> buf . append ( ' ' ) ; </a> 
<a> buf . append ( getStatus ( ) . toString ( ) ) ; </a> 
<a> buf . append ( StringUtil . NEWLINE ) ; </a> 
<a> <RARE_TOKEN> ( buf ) ; </a> 
<a> buf . <RARE_TOKEN> ( buf . length ( ) - StringUtil . NEWLINE . length ( ) ) ; </a> 
<a> return buf . toString ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . http ; </a> 
<a> import io . netty . buffer . ByteBuf ; </a> 
<a> import io . netty . buffer . Unpooled ; </a> 
<a> import io . netty . channel . ChannelPipeline ; </a> 
<a> import java . util . Collections ; </a> 
<a> import java . util . List ; </a> 
<a> import java . util . Map ; </a> 
<a> import java . util . Set ; </a> 
<a> public interface HttpChunk { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( ) { </a> 
<a> @ Override </a> 
<a> public ByteBuf getContent ( ) { </a> 
<a> return Unpooled . EMPTY_BUFFER ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ByteBuf content ) { </a> 
<a> throw new IllegalStateException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean isLast ( ) { </a> 
<a> return true ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void addHeader ( String name , Object value ) { </a> 
<a> throw new IllegalStateException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( String name ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public String getHeader ( String name ) { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public Set < String > <RARE_TOKEN> ( ) { </a> 
<a> return Collections . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public List < String > getHeaders ( String name ) { </a> 
<a> return Collections . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public List < Map . Entry < String , String > > getHeaders ( ) { </a> 
<a> return Collections . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void removeHeader ( String name ) { </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void setHeader ( String name , Object value ) { </a> 
<a> throw new IllegalStateException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void setHeader ( String name , <RARE_TOKEN> < ? > values ) { </a> 
<a> throw new IllegalStateException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } ; </a> 
<a> boolean isLast ( ) ; </a> 
<a> ByteBuf getContent ( ) ; </a> 
<a> void <RARE_TOKEN> ( ByteBuf content ) ; </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . http ; </a> 
<a> import static io . netty . handler . codec . http . HttpHeaders . * ; </a> 
<a> import io . netty . buffer . ByteBuf ; </a> 
<a> import io . netty . buffer . <RARE_TOKEN> ; </a> 
<a> import io . netty . buffer . Unpooled ; </a> 
<a> import io . netty . channel . ChannelHandler ; </a> 
<a> import io . netty . channel . ChannelHandlerContext ; </a> 
<a> import io . netty . channel . ChannelPipeline ; </a> 
<a> import io . netty . handler . codec . <RARE_TOKEN> ; </a> 
<a> import io . netty . handler . codec . TooLongFrameException ; </a> 
<a> import io . netty . util . CharsetUtil ; </a> 
<a> import java . util . Map . Entry ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> < Object , HttpMessage > { </a> 
<a> public static final int <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final ByteBuf <RARE_TOKEN> = Unpooled . copiedBuffer ( </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> , CharsetUtil . <RARE_TOKEN> ) ; </a> 
<a> private final int <RARE_TOKEN> ; </a> 
<a> private HttpMessage <RARE_TOKEN> ; </a> 
<a> private int <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private ChannelHandlerContext ctx ; </a> 
<a> public <RARE_TOKEN> ( int <RARE_TOKEN> ) { </a> 
<a> if ( <RARE_TOKEN> <= 0 ) { </a> 
<a> throw new IllegalArgumentException ( </a> 
<a> <RARE_TOKEN> must be a <RARE_TOKEN> <RARE_TOKEN> " + </a> 
<a> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public final int <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public final void <RARE_TOKEN> ( int <RARE_TOKEN> ) { </a> 
<a> if ( <RARE_TOKEN> < 2 ) { </a> 
<a> throw new IllegalArgumentException ( </a> 
<a> <RARE_TOKEN> " + <RARE_TOKEN> + </a> 
<a> " (expected: >= <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( ctx == null ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } else { </a> 
<a> throw new IllegalStateException ( </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> be <RARE_TOKEN> <RARE_TOKEN> the <RARE_TOKEN> is <RARE_TOKEN> to a <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( Object msg ) throws Exception { </a> 
<a> return msg instanceof HttpMessage || msg instanceof HttpChunk ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public HttpMessage decode ( ChannelHandlerContext ctx , Object msg ) throws Exception { </a> 
<a> HttpMessage <RARE_TOKEN> = this . <RARE_TOKEN> ; </a> 
<a> if ( msg instanceof HttpMessage ) { </a> 
<a> HttpMessage m = ( HttpMessage ) msg ; </a> 
<a> if ( <RARE_TOKEN> ( m ) ) { </a> 
<a> ctx . write ( <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> switch ( m . <RARE_TOKEN> ( ) ) { </a> 
<a> case <RARE_TOKEN> : </a> 
<a> this . <RARE_TOKEN> = null ; </a> 
<a> return m ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> case <RARE_TOKEN> : </a> 
<a> m . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> m . <RARE_TOKEN> ( Unpooled . <RARE_TOKEN> ( <RARE_TOKEN> ) ) ; </a> 
<a> this . <RARE_TOKEN> = m ; </a> 
<a> return null ; </a> 
<a> default : </a> 
<a> throw new Error ( ) ; </a> 
<a> } </a> 
<a> } else if ( msg instanceof HttpChunk ) { </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> throw new IllegalStateException ( </a> 
<a> <RARE_TOKEN> " + HttpChunk . class . getSimpleName ( ) + </a> 
<a> " <RARE_TOKEN> " + HttpMessage . class . getSimpleName ( ) + </a> 
<a> " or last <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> HttpChunk chunk = ( HttpChunk ) msg ; </a> 
<a> ByteBuf content = <RARE_TOKEN> . getContent ( ) ; </a> 
<a> if ( content . readableBytes ( ) > <RARE_TOKEN> - chunk . getContent ( ) . readableBytes ( ) ) { </a> 
<a> throw new TooLongFrameException ( </a> 
<a> <RARE_TOKEN> content length <RARE_TOKEN> " + <RARE_TOKEN> + </a> 
<a> " <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( chunk . getContent ( ) ) ; </a> 
<a> if ( chunk . isLast ( ) ) { </a> 
<a> this . <RARE_TOKEN> = null ; </a> 
<a> if ( chunk instanceof <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = ( <RARE_TOKEN> ) chunk ; </a> 
<a> for ( Entry < String , String > header : <RARE_TOKEN> . getHeaders ( ) ) { </a> 
<a> <RARE_TOKEN> . setHeader ( header . <RARE_TOKEN> ( ) , header . getValue ( ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> <RARE_TOKEN> . setHeader ( </a> 
<a> HttpHeaders . Names . <RARE_TOKEN> , </a> 
<a> String . valueOf ( content . readableBytes ( ) ) ) ; </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } else { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> } else { </a> 
<a> throw new IllegalStateException ( </a> 
<a> <RARE_TOKEN> " + HttpMessage . class . getSimpleName ( ) + " <RARE_TOKEN> " + </a> 
<a> HttpChunk . class . getSimpleName ( ) + " <RARE_TOKEN> <RARE_TOKEN> " + msg . getClass ( ) . getName ( ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( ByteBuf input ) { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = ( <RARE_TOKEN> ) <RARE_TOKEN> . getContent ( ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( input ) ; </a> 
<a> <RARE_TOKEN> . writerIndex ( <RARE_TOKEN> . capacity ( ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ChannelHandlerContext ctx ) throws Exception { </a> 
<a> this . ctx = ctx ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . http ; </a> 
<a> import io . netty . buffer . ByteBuf ; </a> 
<a> import io . netty . channel . Channel ; </a> 
<a> import io . netty . channel . ChannelHandlerContext ; </a> 
<a> import io . netty . channel . <RARE_TOKEN> ; </a> 
<a> import io . netty . handler . codec . <RARE_TOKEN> ; </a> 
<a> import java . util . <RARE_TOKEN> ; </a> 
<a> import java . util . <RARE_TOKEN> ; </a> 
<a> import java . util . concurrent . atomic . <RARE_TOKEN> ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> final <RARE_TOKEN> < HttpMethod > queue = new <RARE_TOKEN> < HttpMethod > ( ) ; </a> 
<a> volatile boolean done ; </a> 
<a> private final <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( ) ; </a> 
<a> private final boolean <RARE_TOKEN> ; </a> 
<a> public <RARE_TOKEN> ( ) { </a> 
<a> this ( <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , false ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( </a> 
<a> int <RARE_TOKEN> , int maxHeaderSize , int maxChunkSize ) { </a> 
<a> this ( <RARE_TOKEN> , maxHeaderSize , maxChunkSize , false ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( </a> 
<a> int <RARE_TOKEN> , int maxHeaderSize , int maxChunkSize , </a> 
<a> boolean <RARE_TOKEN> ) { </a> 
<a> init ( </a> 
<a> new <RARE_TOKEN> ( <RARE_TOKEN> , maxHeaderSize , maxChunkSize ) , </a> 
<a> new <RARE_TOKEN> ( ) ) ; </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> private final class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> @ Override </a> 
<a> public void encode ( </a> 
<a> ChannelHandlerContext ctx , Object msg , ByteBuf out ) throws Exception { </a> 
<a> if ( msg instanceof HttpRequest && ! done ) { </a> 
<a> queue . <RARE_TOKEN> ( ( ( HttpRequest ) msg ) . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> super . encode ( ctx , msg , out ) ; </a> 
<a> if ( <RARE_TOKEN> ) { </a> 
<a> if ( msg instanceof HttpRequest && ( ( HttpMessage ) msg ) . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( ) ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> } else if ( msg instanceof HttpChunk && ( ( HttpChunk ) msg ) . isLast ( ) ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> private final class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> <RARE_TOKEN> ( int <RARE_TOKEN> , int maxHeaderSize , int maxChunkSize ) { </a> 
<a> super ( <RARE_TOKEN> , maxHeaderSize , maxChunkSize ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public Object decode ( </a> 
<a> ChannelHandlerContext ctx , ByteBuf buffer ) throws Exception { </a> 
<a> if ( done ) { </a> 
<a> return buffer . readBytes ( <RARE_TOKEN> ( ) ) ; </a> 
<a> } else { </a> 
<a> Object msg = super . decode ( ctx , buffer ) ; </a> 
<a> if ( <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( msg ) ; </a> 
<a> } </a> 
<a> return msg ; </a> 
<a> } </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( Object msg ) { </a> 
<a> if ( msg == null ) { </a> 
<a> return ; </a> 
<a> } </a> 
<a> if ( msg instanceof HttpMessage && ( ( HttpMessage ) msg ) . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( ) ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> } else if ( msg instanceof HttpChunk && ( ( HttpChunk ) msg ) . isLast ( ) ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> } else if ( msg instanceof Object [ ] ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected boolean <RARE_TOKEN> ( HttpMessage msg ) { </a> 
<a> final int statusCode = ( ( HttpResponse ) msg ) . getStatus ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> if ( statusCode == <RARE_TOKEN> ) { </a> 
<a> return true ; </a> 
<a> } </a> 
<a> HttpMethod method = queue . poll ( ) ; </a> 
<a> char <RARE_TOKEN> = method . getName ( ) . charAt ( 0 ) ; </a> 
<a> switch ( <RARE_TOKEN> ) { </a> 
<a> case <RARE_TOKEN> : </a> 
<a> if ( HttpMethod . <RARE_TOKEN> . equals ( method ) ) { </a> 
<a> return true ; </a> 
<a> } </a> 
<a> break ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> if ( statusCode == 200 ) { </a> 
<a> if ( HttpMethod . <RARE_TOKEN> . equals ( method ) ) { </a> 
<a> done = true ; </a> 
<a> queue . clear ( ) ; </a> 
<a> return true ; </a> 
<a> } </a> 
<a> } </a> 
<a> break ; </a> 
<a> } </a> 
<a> return super . <RARE_TOKEN> ( msg ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ChannelHandlerContext ctx ) </a> 
<a> throws Exception { </a> 
<a> super . <RARE_TOKEN> ( ctx ) ; </a> 
<a> if ( <RARE_TOKEN> ) { </a> 
<a> long <RARE_TOKEN> = <RARE_TOKEN> . get ( ) ; </a> 
<a> if ( <RARE_TOKEN> > 0 ) { </a> 
<a> ctx . fireExceptionCaught ( new <RARE_TOKEN> ( </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> " + <RARE_TOKEN> + </a> 
<a> " <RARE_TOKEN> <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . http ; </a> 
<a> import io . netty . util . CharsetUtil ; </a> 
<a> import java . nio . charset . Charset ; </a> 
<a> public final class HttpConstants { </a> 
<a> public static final byte <RARE_TOKEN> = 32 ; </a> 
<a> public static final byte <RARE_TOKEN> = 9 ; </a> 
<a> public static final byte <RARE_TOKEN> = 13 ; </a> 
<a> public static final byte <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> public static final byte <RARE_TOKEN> = 10 ; </a> 
<a> public static final byte <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> public static final byte <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> public static final byte <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> public static final byte <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> public static final Charset <RARE_TOKEN> = CharsetUtil . <RARE_TOKEN> ; </a> 
<a> private HttpConstants ( ) { </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . http ; </a> 
<a> import io . netty . channel . embedded . EmbeddedByteChannel ; </a> 
<a> import io . netty . handler . codec . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import io . netty . handler . codec . <RARE_TOKEN> . ZlibWrapper ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> private final int compressionLevel ; </a> 
<a> private final int windowBits ; </a> 
<a> private final int memLevel ; </a> 
<a> public <RARE_TOKEN> ( ) { </a> 
<a> this ( 6 ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( int compressionLevel ) { </a> 
<a> this ( compressionLevel , 15 , 8 ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( int compressionLevel , int windowBits , int memLevel ) { </a> 
<a> if ( compressionLevel < 0 || compressionLevel > 9 ) { </a> 
<a> throw new IllegalArgumentException ( </a> 
<a> <RARE_TOKEN> " + compressionLevel + </a> 
<a> " (expected: <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( windowBits < 9 || windowBits > 15 ) { </a> 
<a> throw new IllegalArgumentException ( </a> 
<a> <RARE_TOKEN> " + windowBits + " (expected: <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( memLevel < 1 || memLevel > 9 ) { </a> 
<a> throw new IllegalArgumentException ( </a> 
<a> <RARE_TOKEN> " + memLevel + " (expected: <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> this . compressionLevel = compressionLevel ; </a> 
<a> this . windowBits = windowBits ; </a> 
<a> this . memLevel = memLevel ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected Result <RARE_TOKEN> ( HttpMessage msg , String <RARE_TOKEN> ) throws Exception { </a> 
<a> String <RARE_TOKEN> = msg . getHeader ( HttpHeaders . Names . <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> != null && </a> 
<a> ! HttpHeaders . Values . <RARE_TOKEN> . equalsIgnoreCase ( <RARE_TOKEN> ) ) { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> ZlibWrapper wrapper = <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> if ( wrapper == null ) { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> String <RARE_TOKEN> ; </a> 
<a> switch ( wrapper ) { </a> 
<a> case <RARE_TOKEN> : </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> break ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> break ; </a> 
<a> default : </a> 
<a> throw new Error ( ) ; </a> 
<a> } </a> 
<a> return new Result ( </a> 
<a> <RARE_TOKEN> , </a> 
<a> new EmbeddedByteChannel ( <RARE_TOKEN> . <RARE_TOKEN> ( </a> 
<a> wrapper , compressionLevel , windowBits , memLevel ) ) ) ; </a> 
<a> } </a> 
<a> protected ZlibWrapper <RARE_TOKEN> ( String <RARE_TOKEN> ) { </a> 
<a> float <RARE_TOKEN> = - <RARE_TOKEN> ; </a> 
<a> float <RARE_TOKEN> = - <RARE_TOKEN> ; </a> 
<a> float <RARE_TOKEN> = - <RARE_TOKEN> ; </a> 
<a> for ( String <RARE_TOKEN> : <RARE_TOKEN> . split ( <RARE_TOKEN> ) ) { </a> 
<a> float q = <RARE_TOKEN> ; </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> . indexOf ( <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> != - 1 ) { </a> 
<a> try { </a> 
<a> q = <RARE_TOKEN> . valueOf ( <RARE_TOKEN> . substring ( <RARE_TOKEN> + 1 ) ) ; </a> 
<a> } catch ( <RARE_TOKEN> e ) { </a> 
<a> q = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> . contains ( <RARE_TOKEN> ) ) { </a> 
<a> <RARE_TOKEN> = q ; </a> 
<a> } else if ( <RARE_TOKEN> . contains ( <RARE_TOKEN> ) && q > <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> = q ; </a> 
<a> } else if ( <RARE_TOKEN> . contains ( <RARE_TOKEN> ) && q > <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> = q ; </a> 
<a> } </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> > <RARE_TOKEN> || <RARE_TOKEN> > <RARE_TOKEN> ) { </a> 
<a> if ( <RARE_TOKEN> >= <RARE_TOKEN> ) { </a> 
<a> return ZlibWrapper . <RARE_TOKEN> ; </a> 
<a> } else { </a> 
<a> return ZlibWrapper . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> > <RARE_TOKEN> ) { </a> 
<a> if ( <RARE_TOKEN> == - <RARE_TOKEN> ) { </a> 
<a> return ZlibWrapper . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> == - <RARE_TOKEN> ) { </a> 
<a> return ZlibWrapper . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<a> return null ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . http ; </a> 
<a> import io . netty . buffer . ByteBuf ; </a> 
<a> import io . netty . buffer . Unpooled ; </a> 
<a> import io . netty . channel . ChannelHandlerContext ; </a> 
<a> import io . netty . channel . embedded . EmbeddedByteChannel ; </a> 
<a> import io . netty . handler . codec . <RARE_TOKEN> ; </a> 
<a> public abstract class <RARE_TOKEN> extends <RARE_TOKEN> < Object , Object > { </a> 
<a> private EmbeddedByteChannel <RARE_TOKEN> ; </a> 
<a> protected <RARE_TOKEN> ( ) { </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( Object msg ) throws Exception { </a> 
<a> return msg instanceof HttpMessage || msg instanceof HttpChunk ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public Object decode ( ChannelHandlerContext ctx , Object msg ) throws Exception { </a> 
<a> if ( msg instanceof HttpResponse && ( ( HttpResponse ) msg ) . getStatus ( ) . <RARE_TOKEN> ( ) == <RARE_TOKEN> ) { </a> 
<a> return msg ; </a> 
<a> } else if ( msg instanceof HttpMessage ) { </a> 
<a> HttpMessage m = ( HttpMessage ) msg ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> String <RARE_TOKEN> = m . getHeader ( HttpHeaders . Names . <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> = HttpHeaders . Values . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> boolean <RARE_TOKEN> = </a> 
<a> m . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( ) || m . getContent ( ) . readable ( ) ; </a> 
<a> if ( <RARE_TOKEN> && ( <RARE_TOKEN> = <RARE_TOKEN> ( <RARE_TOKEN> ) ) != null ) { </a> 
<a> m . setHeader ( </a> 
<a> HttpHeaders . Names . <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ) ; </a> 
<a> if ( m . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( ) ) { </a> 
<a> ByteBuf content = m . getContent ( ) ; </a> 
<a> ByteBuf <RARE_TOKEN> = Unpooled . buffer ( ) ; </a> 
<a> decode ( content , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> m . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> if ( m . <RARE_TOKEN> ( HttpHeaders . Names . <RARE_TOKEN> ) ) { </a> 
<a> m . setHeader ( </a> 
<a> HttpHeaders . Names . <RARE_TOKEN> , </a> 
<a> Integer . toString ( <RARE_TOKEN> . readableBytes ( ) ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } else if ( msg instanceof HttpChunk ) { </a> 
<a> HttpChunk c = ( HttpChunk ) msg ; </a> 
<a> ByteBuf content = c . getContent ( ) ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> if ( ! c . isLast ( ) ) { </a> 
<a> ByteBuf <RARE_TOKEN> = Unpooled . buffer ( ) ; </a> 
<a> decode ( content , <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> . readable ( ) ) { </a> 
<a> c . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } else { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> } else { </a> 
<a> ByteBuf <RARE_TOKEN> = Unpooled . buffer ( ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> . readable ( ) ) { </a> 
<a> return new Object [ ] { new <RARE_TOKEN> ( <RARE_TOKEN> ) , c } ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> return msg ; </a> 
<a> } </a> 
<a> protected abstract EmbeddedByteChannel <RARE_TOKEN> ( String <RARE_TOKEN> ) throws Exception ; </a> 
<a> protected String <RARE_TOKEN> ( String <RARE_TOKEN> ) throws Exception { </a> 
<a> return HttpHeaders . Values . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ChannelHandlerContext ctx ) throws Exception { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> super . <RARE_TOKEN> ( ctx ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ChannelHandlerContext ctx ) throws Exception { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> super . <RARE_TOKEN> ( ctx ) ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( ) { </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> ( Unpooled . buffer ( ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private void decode ( ByteBuf in , ByteBuf out ) { </a> 
<a> <RARE_TOKEN> . writeInbound ( in ) ; </a> 
<a> <RARE_TOKEN> ( out ) ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( ByteBuf out ) { </a> 
<a> if ( <RARE_TOKEN> . <RARE_TOKEN> ( ) ) { </a> 
<a> <RARE_TOKEN> ( out ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> = null ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( ByteBuf out ) { </a> 
<a> for ( ; ; ) { </a> 
<a> ByteBuf buf = ( ByteBuf ) <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> if ( buf == null ) { </a> 
<a> break ; </a> 
<a> } </a> 
<a> out . writeBytes ( buf ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . http ; </a> 
<a> import java . text . <RARE_TOKEN> ; </a> 
<a> import java . text . <RARE_TOKEN> ; </a> 
<a> import java . util . Date ; </a> 
<a> import java . util . <RARE_TOKEN> ; </a> 
<a> import java . util . <RARE_TOKEN> ; </a> 
<a> final class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> private static final long serialVersionUID = - <RARE_TOKEN> ; </a> 
<a> private final <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( ) ; </a> 
<a> private final <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> ( ) { </a> 
<a> super ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public Date <RARE_TOKEN> ( String text , <RARE_TOKEN> pos ) { </a> 
<a> Date <RARE_TOKEN> = super . <RARE_TOKEN> ( text , pos ) ; </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( text , pos ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( text , pos ) ; </a> 
<a> } </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> private static final class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> private static final long serialVersionUID = - <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> ( ) { </a> 
<a> super ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private static final class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> private static final long serialVersionUID = <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> ( ) { </a> 
<a> super ( <RARE_TOKEN> <RARE_TOKEN> d <RARE_TOKEN> <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . http ; </a> 
<a> import io . netty . buffer . ByteBuf ; </a> 
<a> import io . netty . buffer . Unpooled ; </a> 
<a> import java . util . <RARE_TOKEN> ; </a> 
<a> import java . util . Date ; </a> 
<a> import java . util . List ; </a> 
<a> import java . util . Map ; </a> 
<a> import java . util . Set ; </a> 
<a> public interface HttpMessage { </a> 
<a> String getHeader ( String name ) ; </a> 
<a> List < String > getHeaders ( String name ) ; </a> 
<a> List < Map . Entry < String , String > > getHeaders ( ) ; </a> 
<a> boolean <RARE_TOKEN> ( String name ) ; </a> 
<a> Set < String > <RARE_TOKEN> ( ) ; </a> 
<a> HttpVersion <RARE_TOKEN> ( ) ; </a> 
<a> void <RARE_TOKEN> ( HttpVersion version ) ; </a> 
<a> ByteBuf getContent ( ) ; </a> 
<a> void <RARE_TOKEN> ( ByteBuf content ) ; </a> 
<a> void addHeader ( String name , Object value ) ; </a> 
<a> void setHeader ( String name , Object value ) ; </a> 
<a> void setHeader ( String name , <RARE_TOKEN> < ? > values ) ; </a> 
<a> void removeHeader ( String name ) ; </a> 
<a> void <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> ( ) ; </a> 
<a> void <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . http ; </a> 
<a> import io . netty . buffer . ByteBuf ; </a> 
<a> import io . netty . buffer . Unpooled ; </a> 
<a> import io . netty . channel . ChannelHandlerContext ; </a> 
<a> import io . netty . channel . ChannelPipeline ; </a> 
<a> import io . netty . handler . codec . <RARE_TOKEN> ; </a> 
<a> import io . netty . handler . codec . TooLongFrameException ; </a> 
<a> import java . util . List ; </a> 
<a> public abstract class <RARE_TOKEN> extends <RARE_TOKEN> < Object , <RARE_TOKEN> . State > { </a> 
<a> private final int <RARE_TOKEN> ; </a> 
<a> private final int maxHeaderSize ; </a> 
<a> private final int maxChunkSize ; </a> 
<a> private HttpMessage message ; </a> 
<a> private ByteBuf content ; </a> 
<a> private long chunkSize ; </a> 
<a> private int <RARE_TOKEN> ; </a> 
<a> private int <RARE_TOKEN> ; </a> 
<a> protected enum State { </a> 
<a> <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> </a> 
<a> } </a> 
<a> protected <RARE_TOKEN> ( ) { </a> 
<a> this ( <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> protected <RARE_TOKEN> ( </a> 
<a> int <RARE_TOKEN> , int maxHeaderSize , int maxChunkSize ) { </a> 
<a> super ( State . <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> <= 0 ) { </a> 
<a> throw new IllegalArgumentException ( </a> 
<a> <RARE_TOKEN> must be a <RARE_TOKEN> <RARE_TOKEN> " + </a> 
<a> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( maxHeaderSize <= 0 ) { </a> 
<a> throw new IllegalArgumentException ( </a> 
<a> <RARE_TOKEN> must be a <RARE_TOKEN> <RARE_TOKEN> " + </a> 
<a> maxHeaderSize ) ; </a> 
<a> } </a> 
<a> if ( maxChunkSize < 0 ) { </a> 
<a> throw new IllegalArgumentException ( </a> 
<a> <RARE_TOKEN> must be a <RARE_TOKEN> <RARE_TOKEN> " + </a> 
<a> maxChunkSize ) ; </a> 
<a> } </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> this . maxHeaderSize = maxHeaderSize ; </a> 
<a> this . maxChunkSize = maxChunkSize ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public Object decode ( ChannelHandlerContext ctx , ByteBuf buffer ) throws Exception { </a> 
<a> switch ( state ( ) ) { </a> 
<a> case <RARE_TOKEN> : { </a> 
<a> try { </a> 
<a> <RARE_TOKEN> ( buffer ) ; </a> 
<a> <RARE_TOKEN> ( State . <RARE_TOKEN> ) ; </a> 
<a> } finally { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> case <RARE_TOKEN> : { </a> 
<a> String [ ] <RARE_TOKEN> = <RARE_TOKEN> ( <RARE_TOKEN> ( buffer , <RARE_TOKEN> ) ) ; </a> 
<a> if ( <RARE_TOKEN> . length < 3 ) { </a> 
<a> <RARE_TOKEN> ( State . <RARE_TOKEN> ) ; </a> 
<a> return null ; </a> 
<a> } </a> 
<a> message = <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( State . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> case <RARE_TOKEN> : { </a> 
<a> State <RARE_TOKEN> = <RARE_TOKEN> ( buffer ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> == State . <RARE_TOKEN> ) { </a> 
<a> return message ; </a> 
<a> } else if ( <RARE_TOKEN> == State . <RARE_TOKEN> ) { </a> 
<a> return message ; </a> 
<a> } else { </a> 
<a> long <RARE_TOKEN> = HttpHeaders . <RARE_TOKEN> ( message , - 1 ) ; </a> 
<a> if ( <RARE_TOKEN> == 0 || <RARE_TOKEN> == - 1 && <RARE_TOKEN> ( ) ) { </a> 
<a> content = Unpooled . EMPTY_BUFFER ; </a> 
<a> return <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> switch ( <RARE_TOKEN> ) { </a> 
<a> case <RARE_TOKEN> : </a> 
<a> if ( <RARE_TOKEN> > maxChunkSize || HttpHeaders . <RARE_TOKEN> ( message ) ) { </a> 
<a> <RARE_TOKEN> ( State . <RARE_TOKEN> ) ; </a> 
<a> message . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> chunkSize = HttpHeaders . <RARE_TOKEN> ( message , - 1 ) ; </a> 
<a> return message ; </a> 
<a> } </a> 
<a> break ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> if ( buffer . readableBytes ( ) > maxChunkSize || HttpHeaders . <RARE_TOKEN> ( message ) ) { </a> 
<a> <RARE_TOKEN> ( State . <RARE_TOKEN> ) ; </a> 
<a> message . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> return message ; </a> 
<a> } </a> 
<a> break ; </a> 
<a> default : </a> 
<a> throw new IllegalStateException ( "Unexpected <RARE_TOKEN> " + <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> return null ; </a> 
<a> } </a> 
<a> case <RARE_TOKEN> : { </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> ( ) ; </a> 
<a> if ( <RARE_TOKEN> > maxChunkSize ) { </a> 
<a> <RARE_TOKEN> = maxChunkSize ; </a> 
<a> } </a> 
<a> if ( message . <RARE_TOKEN> ( ) != <RARE_TOKEN> . <RARE_TOKEN> ) { </a> 
<a> message . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> return new Object [ ] { message , new <RARE_TOKEN> ( buffer . readBytes ( <RARE_TOKEN> ) ) } ; </a> 
<a> } else { </a> 
<a> return new <RARE_TOKEN> ( buffer . readBytes ( <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> case <RARE_TOKEN> : { </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> ( ) ; </a> 
<a> if ( <RARE_TOKEN> > maxChunkSize ) { </a> 
<a> <RARE_TOKEN> = maxChunkSize ; </a> 
<a> } </a> 
<a> HttpChunk chunk = new <RARE_TOKEN> ( buffer . readBytes ( <RARE_TOKEN> ) ) ; </a> 
<a> if ( ! buffer . readable ( ) ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> if ( ! chunk . isLast ( ) ) { </a> 
<a> return new Object [ ] { chunk , HttpChunk . <RARE_TOKEN> } ; </a> 
<a> } </a> 
<a> } </a> 
<a> return chunk ; </a> 
<a> } </a> 
<a> case <RARE_TOKEN> : { </a> 
<a> return <RARE_TOKEN> ( buffer ) ; </a> 
<a> } </a> 
<a> case <RARE_TOKEN> : { </a> 
<a> assert chunkSize <= Integer . MAX_VALUE ; </a> 
<a> int chunkSize = ( int ) this . chunkSize ; </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> ( ) ; </a> 
<a> if ( <RARE_TOKEN> == 0 ) { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> int <RARE_TOKEN> = chunkSize ; </a> 
<a> if ( <RARE_TOKEN> > maxChunkSize ) { </a> 
<a> <RARE_TOKEN> = maxChunkSize ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> > <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> HttpChunk chunk = new <RARE_TOKEN> ( buffer . readBytes ( <RARE_TOKEN> ) ) ; </a> 
<a> if ( chunkSize > <RARE_TOKEN> ) { </a> 
<a> chunkSize -= <RARE_TOKEN> ; </a> 
<a> } else { </a> 
<a> chunkSize = 0 ; </a> 
<a> } </a> 
<a> this . chunkSize = chunkSize ; </a> 
<a> if ( chunkSize == 0 ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> if ( ! chunk . isLast ( ) ) { </a> 
<a> return new Object [ ] { chunk , HttpChunk . <RARE_TOKEN> } ; </a> 
<a> } </a> 
<a> } </a> 
<a> return chunk ; </a> 
<a> } </a> 
<a> case <RARE_TOKEN> : { </a> 
<a> String <RARE_TOKEN> = <RARE_TOKEN> ( buffer , <RARE_TOKEN> ) ; </a> 
<a> int chunkSize = <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> this . chunkSize = chunkSize ; </a> 
<a> if ( chunkSize == 0 ) { </a> 
<a> <RARE_TOKEN> ( State . <RARE_TOKEN> ) ; </a> 
<a> return null ; </a> 
<a> } else if ( chunkSize > maxChunkSize ) { </a> 
<a> <RARE_TOKEN> ( State . <RARE_TOKEN> ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> ( State . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> case <RARE_TOKEN> : { </a> 
<a> assert chunkSize <= Integer . MAX_VALUE ; </a> 
<a> HttpChunk chunk = new <RARE_TOKEN> ( buffer . readBytes ( ( int ) chunkSize ) ) ; </a> 
<a> <RARE_TOKEN> ( State . <RARE_TOKEN> ) ; </a> 
<a> return chunk ; </a> 
<a> } </a> 
<a> case <RARE_TOKEN> : { </a> 
<a> assert chunkSize <= Integer . MAX_VALUE ; </a> 
<a> int chunkSize = ( int ) this . chunkSize ; </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> ( ) ; </a> 
<a> if ( <RARE_TOKEN> == 0 ) { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> int <RARE_TOKEN> = chunkSize ; </a> 
<a> if ( <RARE_TOKEN> > maxChunkSize ) { </a> 
<a> <RARE_TOKEN> = maxChunkSize ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> > <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> HttpChunk chunk = new <RARE_TOKEN> ( buffer . readBytes ( <RARE_TOKEN> ) ) ; </a> 
<a> if ( chunkSize > <RARE_TOKEN> ) { </a> 
<a> chunkSize -= <RARE_TOKEN> ; </a> 
<a> } else { </a> 
<a> chunkSize = 0 ; </a> 
<a> } </a> 
<a> this . chunkSize = chunkSize ; </a> 
<a> if ( chunkSize == 0 ) { </a> 
<a> <RARE_TOKEN> ( State . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( ! chunk . isLast ( ) ) { </a> 
<a> return chunk ; </a> 
<a> } </a> 
<a> } </a> 
<a> case <RARE_TOKEN> : { </a> 
<a> for ( ; ; ) { </a> 
<a> byte next = buffer . <RARE_TOKEN> ( ) ; </a> 
<a> if ( next == HttpConstants . <RARE_TOKEN> ) { </a> 
<a> if ( buffer . <RARE_TOKEN> ( ) == HttpConstants . <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( State . <RARE_TOKEN> ) ; </a> 
<a> return null ; </a> 
<a> } </a> 
<a> } else if ( next == HttpConstants . <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( State . <RARE_TOKEN> ) ; </a> 
<a> return null ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> case <RARE_TOKEN> : { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = <RARE_TOKEN> ( buffer ) ; </a> 
<a> if ( maxChunkSize == 0 ) { </a> 
<a> return <RARE_TOKEN> ( ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<a> default : { </a> 
<a> throw new Error ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> protected boolean <RARE_TOKEN> ( HttpMessage msg ) { </a> 
<a> if ( msg instanceof HttpResponse ) { </a> 
<a> HttpResponse res = ( HttpResponse ) msg ; </a> 
<a> int code = res . getStatus ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> if ( code >= <RARE_TOKEN> && code < 200 ) { </a> 
<a> if ( code == <RARE_TOKEN> && ! res . <RARE_TOKEN> ( HttpHeaders . Names . <RARE_TOKEN> ) ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> return true ; </a> 
<a> } </a> 
<a> switch ( code ) { </a> 
<a> case <RARE_TOKEN> : case <RARE_TOKEN> : case <RARE_TOKEN> : </a> 
<a> return true ; </a> 
<a> } </a> 
<a> } </a> 
<a> return false ; </a> 
<a> } </a> 
<a> private Object <RARE_TOKEN> ( ) { </a> 
<a> HttpMessage message = this . message ; </a> 
<a> ByteBuf content = this . content ; </a> 
<a> if ( content != null ) { </a> 
<a> message . <RARE_TOKEN> ( content ) ; </a> 
<a> this . content = null ; </a> 
<a> } </a> 
<a> this . message = null ; </a> 
<a> <RARE_TOKEN> ( State . <RARE_TOKEN> ) ; </a> 
<a> return message ; </a> 
<a> } </a> 
<a> private static void <RARE_TOKEN> ( ByteBuf buffer ) { </a> 
<a> for ( ; ; ) { </a> 
<a> char c = ( char ) buffer . <RARE_TOKEN> ( ) ; </a> 
<a> if ( ! <RARE_TOKEN> . <RARE_TOKEN> ( c ) && </a> 
<a> ! <RARE_TOKEN> . <RARE_TOKEN> ( c ) ) { </a> 
<a> buffer . readerIndex ( buffer . readerIndex ( ) - 1 ) ; </a> 
<a> break ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> private Object <RARE_TOKEN> ( ByteBuf buffer ) { </a> 
<a> long length = HttpHeaders . <RARE_TOKEN> ( message , - 1 ) ; </a> 
<a> assert length <= Integer . MAX_VALUE ; </a> 
<a> int <RARE_TOKEN> = ( int ) length - <RARE_TOKEN> ; </a> 
<a> if ( <RARE_TOKEN> > <RARE_TOKEN> ( ) ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> += <RARE_TOKEN> ; </a> 
<a> if ( length < <RARE_TOKEN> ) { </a> 
<a> if ( message . <RARE_TOKEN> ( ) != <RARE_TOKEN> . <RARE_TOKEN> ) { </a> 
<a> message . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> return new Object [ ] { message , new <RARE_TOKEN> ( read ( buffer , <RARE_TOKEN> ) ) } ; </a> 
<a> } else { </a> 
<a> return new <RARE_TOKEN> ( read ( buffer , <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> if ( content == null ) { </a> 
<a> content = read ( buffer , ( int ) length ) ; </a> 
<a> } else { </a> 
<a> content . writeBytes ( buffer . readBytes ( ( int ) length ) ) ; </a> 
<a> } </a> 
<a> return <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> private ByteBuf read ( ByteBuf buffer , int len ) { </a> 
<a> ByteBuf internal = <RARE_TOKEN> ( ) ; </a> 
<a> if ( internal . readableBytes ( ) >= len ) { </a> 
<a> int index = internal . readerIndex ( ) ; </a> 
<a> ByteBuf buf = internal . slice ( index , len ) ; </a> 
<a> buffer . readerIndex ( index + len ) ; </a> 
<a> return buf ; </a> 
<a> } else { </a> 
<a> return buffer . readBytes ( len ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private State <RARE_TOKEN> ( ByteBuf buffer ) throws TooLongFrameException { </a> 
<a> <RARE_TOKEN> = 0 ; </a> 
<a> final HttpMessage message = this . message ; </a> 
<a> String <RARE_TOKEN> = <RARE_TOKEN> ( buffer ) ; </a> 
<a> String name = null ; </a> 
<a> String value = null ; </a> 
<a> if ( <RARE_TOKEN> . length ( ) != 0 ) { </a> 
<a> message . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> { </a> 
<a> char <RARE_TOKEN> = <RARE_TOKEN> . charAt ( 0 ) ; </a> 
<a> if ( name != null && ( <RARE_TOKEN> == ' ' || <RARE_TOKEN> == <RARE_TOKEN> ) ) { </a> 
<a> value = value + ' ' + <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> } else { </a> 
<a> if ( name != null ) { </a> 
<a> message . addHeader ( name , value ) ; </a> 
<a> } </a> 
<a> String [ ] header = <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> name = header [ 0 ] ; </a> 
<a> value = header [ 1 ] ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ( buffer ) ; </a> 
<a> } while ( <RARE_TOKEN> . length ( ) != 0 ) ; </a> 
<a> if ( name != null ) { </a> 
<a> message . addHeader ( name , value ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> State <RARE_TOKEN> ; </a> 
<a> if ( <RARE_TOKEN> ( message ) ) { </a> 
<a> message . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = State . <RARE_TOKEN> ; </a> 
<a> } else if ( <RARE_TOKEN> . <RARE_TOKEN> ( message ) ) { </a> 
<a> message . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = State . <RARE_TOKEN> ; </a> 
<a> } else if ( HttpHeaders . <RARE_TOKEN> ( message , - 1 ) >= 0 ) { </a> 
<a> <RARE_TOKEN> = State . <RARE_TOKEN> ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> = State . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> ( ByteBuf buffer ) throws TooLongFrameException { </a> 
<a> <RARE_TOKEN> = 0 ; </a> 
<a> String <RARE_TOKEN> = <RARE_TOKEN> ( buffer ) ; </a> 
<a> String <RARE_TOKEN> = null ; </a> 
<a> if ( <RARE_TOKEN> . length ( ) != 0 ) { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> { </a> 
<a> char <RARE_TOKEN> = <RARE_TOKEN> . charAt ( 0 ) ; </a> 
<a> if ( <RARE_TOKEN> != null && ( <RARE_TOKEN> == ' ' || <RARE_TOKEN> == <RARE_TOKEN> ) ) { </a> 
<a> List < String > current = <RARE_TOKEN> . getHeaders ( <RARE_TOKEN> ) ; </a> 
<a> if ( current . size ( ) != 0 ) { </a> 
<a> int <RARE_TOKEN> = current . size ( ) - 1 ; </a> 
<a> String <RARE_TOKEN> = current . get ( <RARE_TOKEN> ) + <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> current . set ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } else { </a> 
<a> } </a> 
<a> } else { </a> 
<a> String [ ] header = <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> String name = header [ 0 ] ; </a> 
<a> if ( ! name . equalsIgnoreCase ( HttpHeaders . Names . <RARE_TOKEN> ) && </a> 
<a> ! name . equalsIgnoreCase ( HttpHeaders . Names . <RARE_TOKEN> ) && </a> 
<a> ! name . equalsIgnoreCase ( HttpHeaders . Names . <RARE_TOKEN> ) ) { </a> 
<a> <RARE_TOKEN> . addHeader ( name , header [ 1 ] ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> = name ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ( buffer ) ; </a> 
<a> } while ( <RARE_TOKEN> . length ( ) != 0 ) ; </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> return HttpChunk . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> private String <RARE_TOKEN> ( ByteBuf buffer ) throws TooLongFrameException { </a> 
<a> StringBuilder sb = new StringBuilder ( <RARE_TOKEN> ) ; </a> 
<a> int <RARE_TOKEN> = this . <RARE_TOKEN> ; </a> 
<a> loop : </a> 
<a> for ( ; ; ) { </a> 
<a> char <RARE_TOKEN> = ( char ) buffer . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> ++ ; </a> 
<a> switch ( <RARE_TOKEN> ) { </a> 
<a> case HttpConstants . <RARE_TOKEN> : </a> 
<a> <RARE_TOKEN> = ( char ) buffer . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> ++ ; </a> 
<a> if ( <RARE_TOKEN> == HttpConstants . <RARE_TOKEN> ) { </a> 
<a> break loop ; </a> 
<a> } </a> 
<a> break ; </a> 
<a> case HttpConstants . <RARE_TOKEN> : </a> 
<a> break loop ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> >= maxHeaderSize ) { </a> 
<a> throw new TooLongFrameException ( </a> 
<a> <RARE_TOKEN> header is <RARE_TOKEN> <RARE_TOKEN> " + </a> 
<a> maxHeaderSize + " <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> sb . append ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> return sb . toString ( ) ; </a> 
<a> } </a> 
<a> protected abstract boolean <RARE_TOKEN> ( ) ; </a> 
<a> protected abstract HttpMessage <RARE_TOKEN> ( String [ ] <RARE_TOKEN> ) throws Exception ; </a> 
<a> private static int <RARE_TOKEN> ( String <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> for ( int i = 0 ; i < <RARE_TOKEN> . length ( ) ; i ++ ) { </a> 
<a> char c = <RARE_TOKEN> . charAt ( i ) ; </a> 
<a> if ( c == <RARE_TOKEN> || <RARE_TOKEN> . <RARE_TOKEN> ( c ) || <RARE_TOKEN> . <RARE_TOKEN> ( c ) ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . substring ( 0 , i ) ; </a> 
<a> break ; </a> 
<a> } </a> 
<a> } </a> 
<a> return Integer . parseInt ( <RARE_TOKEN> , 16 ) ; </a> 
<a> } </a> 
<a> private static String <RARE_TOKEN> ( ByteBuf buffer , int <RARE_TOKEN> ) throws TooLongFrameException { </a> 
<a> StringBuilder sb = new StringBuilder ( <RARE_TOKEN> ) ; </a> 
<a> int <RARE_TOKEN> = 0 ; </a> 
<a> while ( true ) { </a> 
<a> byte <RARE_TOKEN> = buffer . <RARE_TOKEN> ( ) ; </a> 
<a> if ( <RARE_TOKEN> == HttpConstants . <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> = buffer . <RARE_TOKEN> ( ) ; </a> 
<a> if ( <RARE_TOKEN> == HttpConstants . <RARE_TOKEN> ) { </a> 
<a> return sb . toString ( ) ; </a> 
<a> } </a> 
<a> } else if ( <RARE_TOKEN> == HttpConstants . <RARE_TOKEN> ) { </a> 
<a> return sb . toString ( ) ; </a> 
<a> } else { </a> 
<a> if ( <RARE_TOKEN> >= <RARE_TOKEN> ) { </a> 
<a> throw new TooLongFrameException ( </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> is <RARE_TOKEN> <RARE_TOKEN> " + <RARE_TOKEN> + </a> 
<a> " <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> ++ ; </a> 
<a> sb . append ( ( char ) <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> private static String [ ] <RARE_TOKEN> ( String sb ) { </a> 
<a> int <RARE_TOKEN> ; </a> 
<a> int <RARE_TOKEN> ; </a> 
<a> int <RARE_TOKEN> ; </a> 
<a> int <RARE_TOKEN> ; </a> 
<a> int <RARE_TOKEN> ; </a> 
<a> int <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ( sb , 0 ) ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ( sb , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ( sb , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ( sb , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ( sb , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ( sb ) ; </a> 
<a> return new String [ ] { </a> 
<a> sb . substring ( <RARE_TOKEN> , <RARE_TOKEN> ) , </a> 
<a> sb . substring ( <RARE_TOKEN> , <RARE_TOKEN> ) , </a> 
<a> <RARE_TOKEN> < <RARE_TOKEN> ? sb . substring ( <RARE_TOKEN> , <RARE_TOKEN> ) : "" } ; </a> 
<a> } </a> 
<a> private static String [ ] <RARE_TOKEN> ( String sb ) { </a> 
<a> final int length = sb . length ( ) ; </a> 
<a> int <RARE_TOKEN> ; </a> 
<a> int <RARE_TOKEN> ; </a> 
<a> int <RARE_TOKEN> ; </a> 
<a> int <RARE_TOKEN> ; </a> 
<a> int <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ( sb , 0 ) ; </a> 
<a> for ( <RARE_TOKEN> = <RARE_TOKEN> ; <RARE_TOKEN> < length ; <RARE_TOKEN> ++ ) { </a> 
<a> char ch = sb . charAt ( <RARE_TOKEN> ) ; </a> 
<a> if ( ch == <RARE_TOKEN> || <RARE_TOKEN> . <RARE_TOKEN> ( ch ) ) { </a> 
<a> break ; </a> 
<a> } </a> 
<a> } </a> 
<a> for ( <RARE_TOKEN> = <RARE_TOKEN> ; <RARE_TOKEN> < length ; <RARE_TOKEN> ++ ) { </a> 
<a> if ( sb . charAt ( <RARE_TOKEN> ) == <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ++ ; </a> 
<a> break ; </a> 
<a> } </a> 
<a> } </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ( sb , <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> == length ) { </a> 
<a> return new String [ ] { </a> 
<a> sb . substring ( <RARE_TOKEN> , <RARE_TOKEN> ) , </a> 
<a> "" </a> 
<a> } ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ( sb ) ; </a> 
<a> return new String [ ] { </a> 
<a> sb . substring ( <RARE_TOKEN> , <RARE_TOKEN> ) , </a> 
<a> sb . substring ( <RARE_TOKEN> , <RARE_TOKEN> ) </a> 
<a> } ; </a> 
<a> } </a> 
<a> private static int <RARE_TOKEN> ( String sb , int offset ) { </a> 
<a> int result ; </a> 
<a> for ( result = offset ; result < sb . length ( ) ; result ++ ) { </a> 
<a> if ( ! <RARE_TOKEN> . <RARE_TOKEN> ( sb . charAt ( result ) ) ) { </a> 
<a> break ; </a> 
<a> } </a> 
<a> } </a> 
<a> return result ; </a> 
<a> } </a> 
<a> private static int <RARE_TOKEN> ( String sb , int offset ) { </a> 
<a> int result ; </a> 
<a> for ( result = offset ; result < sb . length ( ) ; result ++ ) { </a> 
<a> if ( <RARE_TOKEN> . <RARE_TOKEN> ( sb . charAt ( result ) ) ) { </a> 
<a> break ; </a> 
<a> } </a> 
<a> } </a> 
<a> return result ; </a> 
<a> } </a> 
<a> private static int <RARE_TOKEN> ( String sb ) { </a> 
<a> int result ; </a> 
<a> for ( result = sb . length ( ) ; result > 0 ; result -- ) { </a> 
<a> if ( ! <RARE_TOKEN> . <RARE_TOKEN> ( sb . charAt ( result - 1 ) ) ) { </a> 
<a> break ; </a> 
<a> } </a> 
<a> } </a> 
<a> return result ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . http ; </a> 
<a> import static io . netty . buffer . Unpooled . * ; </a> 
<a> import static io . netty . handler . codec . http . HttpConstants . * ; </a> 
<a> import io . netty . buffer . ByteBuf ; </a> 
<a> import io . netty . channel . ChannelHandlerContext ; </a> 
<a> import io . netty . handler . codec . <RARE_TOKEN> ; </a> 
<a> import io . netty . handler . codec . <RARE_TOKEN> ; </a> 
<a> import io . netty . util . CharsetUtil ; </a> 
<a> import java . util . Map ; </a> 
<a> public abstract class <RARE_TOKEN> extends <RARE_TOKEN> < Object > { </a> 
<a> private static final ByteBuf <RARE_TOKEN> = </a> 
<a> copiedBuffer ( <RARE_TOKEN> , CharsetUtil . <RARE_TOKEN> ) ; </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> protected <RARE_TOKEN> ( ) { </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( Object msg ) throws Exception { </a> 
<a> return msg instanceof HttpMessage || msg instanceof HttpChunk ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void encode ( ChannelHandlerContext ctx , Object msg , ByteBuf out ) throws Exception { </a> 
<a> if ( msg instanceof HttpMessage ) { </a> 
<a> HttpMessage m = ( HttpMessage ) msg ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = m . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> m . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> out . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> ( out , m ) ; </a> 
<a> <RARE_TOKEN> ( out , m ) ; </a> 
<a> out . writeByte ( <RARE_TOKEN> ) ; </a> 
<a> out . writeByte ( <RARE_TOKEN> ) ; </a> 
<a> ByteBuf content = m . getContent ( ) ; </a> 
<a> out . writeBytes ( content , content . readerIndex ( ) , content . readableBytes ( ) ) ; </a> 
<a> } else if ( msg instanceof HttpChunk ) { </a> 
<a> HttpChunk chunk = ( HttpChunk ) msg ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> throw new IllegalArgumentException ( <RARE_TOKEN> must <RARE_TOKEN> an <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> switch ( <RARE_TOKEN> ) { </a> 
<a> case <RARE_TOKEN> : </a> 
<a> throw new IllegalArgumentException ( </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> of the last <RARE_TOKEN> HttpMessage is <RARE_TOKEN> ) ; </a> 
<a> case <RARE_TOKEN> : { </a> 
<a> ByteBuf content = chunk . getContent ( ) ; </a> 
<a> out . writeBytes ( content , content . readerIndex ( ) , content . readableBytes ( ) ) ; </a> 
<a> break ; </a> 
<a> } </a> 
<a> case <RARE_TOKEN> : </a> 
<a> if ( chunk . isLast ( ) ) { </a> 
<a> if ( chunk instanceof <RARE_TOKEN> ) { </a> 
<a> out . writeByte ( ( byte ) <RARE_TOKEN> ) ; </a> 
<a> out . writeByte ( <RARE_TOKEN> ) ; </a> 
<a> out . writeByte ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( out , ( <RARE_TOKEN> ) chunk ) ; </a> 
<a> out . writeByte ( <RARE_TOKEN> ) ; </a> 
<a> out . writeByte ( <RARE_TOKEN> ) ; </a> 
<a> } else { </a> 
<a> out . writeBytes ( <RARE_TOKEN> , <RARE_TOKEN> . readerIndex ( ) , <RARE_TOKEN> . readableBytes ( ) ) ; </a> 
<a> } </a> 
<a> } else { </a> 
<a> ByteBuf content = chunk . getContent ( ) ; </a> 
<a> int <RARE_TOKEN> = content . readableBytes ( ) ; </a> 
<a> out . writeBytes ( copiedBuffer ( Integer . <RARE_TOKEN> ( <RARE_TOKEN> ) , CharsetUtil . <RARE_TOKEN> ) ) ; </a> 
<a> out . writeByte ( <RARE_TOKEN> ) ; </a> 
<a> out . writeByte ( <RARE_TOKEN> ) ; </a> 
<a> out . writeBytes ( content , content . readerIndex ( ) , <RARE_TOKEN> ) ; </a> 
<a> out . writeByte ( <RARE_TOKEN> ) ; </a> 
<a> out . writeByte ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } else { </a> 
<a> throw new <RARE_TOKEN> ( msg , HttpMessage . class , HttpChunk . class ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private static void <RARE_TOKEN> ( ByteBuf buf , HttpMessage message ) { </a> 
<a> for ( Map . Entry < String , String > h : message . getHeaders ( ) ) { </a> 
<a> <RARE_TOKEN> ( buf , h . <RARE_TOKEN> ( ) , h . getValue ( ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private static void <RARE_TOKEN> ( ByteBuf buf , <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> for ( Map . Entry < String , String > h : <RARE_TOKEN> . getHeaders ( ) ) { </a> 
<a> <RARE_TOKEN> ( buf , h . <RARE_TOKEN> ( ) , h . getValue ( ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private static void <RARE_TOKEN> ( ByteBuf buf , String header , String value ) { </a> 
<a> buf . writeBytes ( header . getBytes ( CharsetUtil . <RARE_TOKEN> ) ) ; </a> 
<a> buf . writeByte ( <RARE_TOKEN> ) ; </a> 
<a> buf . writeByte ( <RARE_TOKEN> ) ; </a> 
<a> buf . writeBytes ( value . getBytes ( CharsetUtil . <RARE_TOKEN> ) ) ; </a> 
<a> buf . writeByte ( <RARE_TOKEN> ) ; </a> 
<a> buf . writeByte ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> protected abstract void <RARE_TOKEN> ( ByteBuf buf , HttpMessage message ) throws Exception ; </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . http ; </a> 
<a> import java . util . HashMap ; </a> 
<a> import java . util . Map ; </a> 
<a> public class HttpMethod implements <RARE_TOKEN> < HttpMethod > { </a> 
<a> public static final HttpMethod <RARE_TOKEN> = new HttpMethod ( <RARE_TOKEN> ) ; </a> 
<a> public static final HttpMethod GET = new HttpMethod ( <RARE_TOKEN> ) ; </a> 
<a> public static final HttpMethod <RARE_TOKEN> = new HttpMethod ( <RARE_TOKEN> ) ; </a> 
<a> public static final HttpMethod POST = new HttpMethod ( <RARE_TOKEN> ) ; </a> 
<a> public static final HttpMethod <RARE_TOKEN> = new HttpMethod ( <RARE_TOKEN> ) ; </a> 
<a> public static final HttpMethod <RARE_TOKEN> = new HttpMethod ( <RARE_TOKEN> ) ; </a> 
<a> public static final HttpMethod <RARE_TOKEN> = new HttpMethod ( <RARE_TOKEN> ) ; </a> 
<a> public static final HttpMethod <RARE_TOKEN> = new HttpMethod ( <RARE_TOKEN> ) ; </a> 
<a> public static final HttpMethod <RARE_TOKEN> = new HttpMethod ( <RARE_TOKEN> ) ; </a> 
<a> private static final Map < String , HttpMethod > <RARE_TOKEN> = </a> 
<a> new HashMap < String , HttpMethod > ( ) ; </a> 
<a> static { </a> 
<a> <RARE_TOKEN> . put ( <RARE_TOKEN> . toString ( ) , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . put ( GET . toString ( ) , GET ) ; </a> 
<a> <RARE_TOKEN> . put ( <RARE_TOKEN> . toString ( ) , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . put ( POST . toString ( ) , POST ) ; </a> 
<a> <RARE_TOKEN> . put ( <RARE_TOKEN> . toString ( ) , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . put ( <RARE_TOKEN> . toString ( ) , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . put ( <RARE_TOKEN> . toString ( ) , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . put ( <RARE_TOKEN> . toString ( ) , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . put ( <RARE_TOKEN> . toString ( ) , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public static HttpMethod valueOf ( String name ) { </a> 
<a> if ( name == null ) { </a> 
<a> throw new NullPointerException ( "name" ) ; </a> 
<a> } </a> 
<a> name = name . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> if ( name . length ( ) == 0 ) { </a> 
<a> throw new IllegalArgumentException ( <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> HttpMethod result = <RARE_TOKEN> . get ( name ) ; </a> 
<a> if ( result != null ) { </a> 
<a> return result ; </a> 
<a> } else { </a> 
<a> return new HttpMethod ( name ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private final String name ; </a> 
<a> public HttpMethod ( String name ) { </a> 
<a> if ( name == null ) { </a> 
<a> throw new NullPointerException ( "name" ) ; </a> 
<a> } </a> 
<a> name = name . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> if ( name . length ( ) == 0 ) { </a> 
<a> throw new IllegalArgumentException ( <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> for ( int i = 0 ; i < name . length ( ) ; i ++ ) { </a> 
<a> if ( <RARE_TOKEN> . <RARE_TOKEN> ( name . charAt ( i ) ) || </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( name . charAt ( i ) ) ) { </a> 
<a> throw new IllegalArgumentException ( <RARE_TOKEN> <RARE_TOKEN> in <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> this . name = name ; </a> 
<a> } </a> 
<a> public String getName ( ) { </a> 
<a> return name ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int hashCode ( ) { </a> 
<a> return getName ( ) . hashCode ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean equals ( Object o ) { </a> 
<a> if ( ! ( o instanceof HttpMethod ) ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> HttpMethod that = ( HttpMethod ) o ; </a> 
<a> return getName ( ) . equals ( that . getName ( ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public String toString ( ) { </a> 
<a> return getName ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int <RARE_TOKEN> ( HttpMethod o ) { </a> 
<a> return getName ( ) . <RARE_TOKEN> ( o . getName ( ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . http ; </a> 
<a> public interface HttpRequest extends HttpMessage { </a> 
<a> HttpMethod <RARE_TOKEN> ( ) ; </a> 
<a> void <RARE_TOKEN> ( HttpMethod method ) ; </a> 
<a> String <RARE_TOKEN> ( ) ; </a> 
<a> void <RARE_TOKEN> ( String uri ) ; </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . http ; </a> 
<a> import io . netty . buffer . ByteBuf ; </a> 
<a> import io . netty . channel . ChannelPipeline ; </a> 
<a> import io . netty . handler . codec . TooLongFrameException ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> public <RARE_TOKEN> ( ) { </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( </a> 
<a> int <RARE_TOKEN> , int maxHeaderSize , int maxChunkSize ) { </a> 
<a> super ( <RARE_TOKEN> , maxHeaderSize , maxChunkSize ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected HttpMessage <RARE_TOKEN> ( String [ ] <RARE_TOKEN> ) throws Exception { </a> 
<a> return new <RARE_TOKEN> ( </a> 
<a> HttpVersion . valueOf ( <RARE_TOKEN> [ 2 ] ) , HttpMethod . valueOf ( <RARE_TOKEN> [ 0 ] ) , <RARE_TOKEN> [ 1 ] ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected boolean <RARE_TOKEN> ( ) { </a> 
<a> return true ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . http ; </a> 
<a> import static io . netty . handler . codec . http . HttpConstants . * ; </a> 
<a> import io . netty . buffer . ByteBuf ; </a> 
<a> import io . netty . util . CharsetUtil ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> public <RARE_TOKEN> ( ) { </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( ByteBuf buf , HttpMessage message ) throws Exception { </a> 
<a> HttpRequest request = ( HttpRequest ) message ; </a> 
<a> buf . writeBytes ( request . <RARE_TOKEN> ( ) . toString ( ) . getBytes ( CharsetUtil . <RARE_TOKEN> ) ) ; </a> 
<a> buf . writeByte ( <RARE_TOKEN> ) ; </a> 
<a> buf . writeBytes ( request . <RARE_TOKEN> ( ) . getBytes ( CharsetUtil . <RARE_TOKEN> ) ) ; </a> 
<a> buf . writeByte ( <RARE_TOKEN> ) ; </a> 
<a> buf . writeBytes ( request . <RARE_TOKEN> ( ) . toString ( ) . getBytes ( CharsetUtil . <RARE_TOKEN> ) ) ; </a> 
<a> buf . writeByte ( <RARE_TOKEN> ) ; </a> 
<a> buf . writeByte ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . http ; </a> 
<a> public interface HttpResponse extends HttpMessage { </a> 
<a> HttpResponseStatus getStatus ( ) ; </a> 
<a> void <RARE_TOKEN> ( HttpResponseStatus status ) ; </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . http ; </a> 
<a> import io . netty . buffer . ByteBuf ; </a> 
<a> import io . netty . channel . ChannelPipeline ; </a> 
<a> import io . netty . handler . codec . TooLongFrameException ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> public <RARE_TOKEN> ( ) { </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( </a> 
<a> int <RARE_TOKEN> , int maxHeaderSize , int maxChunkSize ) { </a> 
<a> super ( <RARE_TOKEN> , maxHeaderSize , maxChunkSize ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected HttpMessage <RARE_TOKEN> ( String [ ] <RARE_TOKEN> ) { </a> 
<a> return new <RARE_TOKEN> ( </a> 
<a> HttpVersion . valueOf ( <RARE_TOKEN> [ 0 ] ) , </a> 
<a> new HttpResponseStatus ( Integer . valueOf ( <RARE_TOKEN> [ 1 ] ) , <RARE_TOKEN> [ 2 ] ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected boolean <RARE_TOKEN> ( ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . http ; </a> 
<a> import static io . netty . handler . codec . http . HttpConstants . * ; </a> 
<a> import io . netty . buffer . ByteBuf ; </a> 
<a> import io . netty . util . CharsetUtil ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> public <RARE_TOKEN> ( ) { </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( ByteBuf buf , HttpMessage message ) throws Exception { </a> 
<a> HttpResponse response = ( HttpResponse ) message ; </a> 
<a> buf . writeBytes ( response . <RARE_TOKEN> ( ) . toString ( ) . getBytes ( CharsetUtil . <RARE_TOKEN> ) ) ; </a> 
<a> buf . writeByte ( <RARE_TOKEN> ) ; </a> 
<a> buf . writeBytes ( String . valueOf ( response . getStatus ( ) . <RARE_TOKEN> ( ) ) . getBytes ( CharsetUtil . <RARE_TOKEN> ) ) ; </a> 
<a> buf . writeByte ( <RARE_TOKEN> ) ; </a> 
<a> buf . writeBytes ( String . valueOf ( response . getStatus ( ) . <RARE_TOKEN> ( ) ) . getBytes ( CharsetUtil . <RARE_TOKEN> ) ) ; </a> 
<a> buf . writeByte ( <RARE_TOKEN> ) ; </a> 
<a> buf . writeByte ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . http ; </a> 
<a> public enum <RARE_TOKEN> { </a> 
<a> <RARE_TOKEN> ( false ) , </a> 
<a> <RARE_TOKEN> ( false ) , </a> 
<a> <RARE_TOKEN> ( true ) ; </a> 
<a> private final boolean <RARE_TOKEN> ; </a> 
<a> private <RARE_TOKEN> ( boolean <RARE_TOKEN> ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return ! <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . http ; </a> 
<a> import java . util . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import java . util . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> public class HttpVersion implements <RARE_TOKEN> < HttpVersion > { </a> 
<a> private static final <RARE_TOKEN> <RARE_TOKEN> = </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> public static final HttpVersion <RARE_TOKEN> = new HttpVersion ( <RARE_TOKEN> , 1 , 0 , false ) ; </a> 
<a> public static final HttpVersion <RARE_TOKEN> = new HttpVersion ( <RARE_TOKEN> , 1 , 1 , true ) ; </a> 
<a> public static HttpVersion valueOf ( String text ) { </a> 
<a> if ( text == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> text = text . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> if ( text . equals ( <RARE_TOKEN> ) ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> if ( text . equals ( <RARE_TOKEN> ) ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> return new HttpVersion ( text , true ) ; </a> 
<a> } </a> 
<a> private final String <RARE_TOKEN> ; </a> 
<a> private final int <RARE_TOKEN> ; </a> 
<a> private final int <RARE_TOKEN> ; </a> 
<a> private final String text ; </a> 
<a> private final boolean <RARE_TOKEN> ; </a> 
<a> public HttpVersion ( String text , boolean <RARE_TOKEN> ) { </a> 
<a> if ( text == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> text = text . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> if ( text . length ( ) == 0 ) { </a> 
<a> throw new IllegalArgumentException ( <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> m = <RARE_TOKEN> . <RARE_TOKEN> ( text ) ; </a> 
<a> if ( ! m . <RARE_TOKEN> ( ) ) { </a> 
<a> throw new IllegalArgumentException ( <RARE_TOKEN> version <RARE_TOKEN> " + text ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> = m . group ( 1 ) ; </a> 
<a> <RARE_TOKEN> = Integer . parseInt ( m . group ( 2 ) ) ; </a> 
<a> <RARE_TOKEN> = Integer . parseInt ( m . group ( 3 ) ) ; </a> 
<a> this . text = <RARE_TOKEN> + <RARE_TOKEN> + <RARE_TOKEN> + <RARE_TOKEN> + <RARE_TOKEN> ; </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public HttpVersion ( </a> 
<a> String <RARE_TOKEN> , int <RARE_TOKEN> , int <RARE_TOKEN> , </a> 
<a> boolean <RARE_TOKEN> ) { </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> if ( <RARE_TOKEN> . length ( ) == 0 ) { </a> 
<a> throw new IllegalArgumentException ( <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> for ( int i = 0 ; i < <RARE_TOKEN> . length ( ) ; i ++ ) { </a> 
<a> if ( <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> . charAt ( i ) ) || </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> . charAt ( i ) ) ) { </a> 
<a> throw new IllegalArgumentException ( <RARE_TOKEN> <RARE_TOKEN> in <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> < 0 ) { </a> 
<a> throw new IllegalArgumentException ( <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> < 0 ) { </a> 
<a> throw new IllegalArgumentException ( <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> text = <RARE_TOKEN> + <RARE_TOKEN> + <RARE_TOKEN> + <RARE_TOKEN> + <RARE_TOKEN> ; </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public String <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public int <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public int <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public String <RARE_TOKEN> ( ) { </a> 
<a> return text ; </a> 
<a> } </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public String toString ( ) { </a> 
<a> return <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int hashCode ( ) { </a> 
<a> return ( <RARE_TOKEN> ( ) . hashCode ( ) * <RARE_TOKEN> + <RARE_TOKEN> ( ) ) * <RARE_TOKEN> + </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean equals ( Object o ) { </a> 
<a> if ( ! ( o instanceof HttpVersion ) ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> HttpVersion that = ( HttpVersion ) o ; </a> 
<a> return <RARE_TOKEN> ( ) == that . <RARE_TOKEN> ( ) && </a> 
<a> <RARE_TOKEN> ( ) == that . <RARE_TOKEN> ( ) && </a> 
<a> <RARE_TOKEN> ( ) . equals ( that . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int <RARE_TOKEN> ( HttpVersion o ) { </a> 
<a> int v = <RARE_TOKEN> ( ) . <RARE_TOKEN> ( o . <RARE_TOKEN> ( ) ) ; </a> 
<a> if ( v != 0 ) { </a> 
<a> return v ; </a> 
<a> } </a> 
<a> v = <RARE_TOKEN> ( ) - o . <RARE_TOKEN> ( ) ; </a> 
<a> if ( v != 0 ) { </a> 
<a> return v ; </a> 
<a> } </a> 
<a> return <RARE_TOKEN> ( ) - o . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . http ; </a> 
<a> import io . netty . util . CharsetUtil ; </a> 
<a> import java . net . URI ; </a> 
<a> import java . net . <RARE_TOKEN> ; </a> 
<a> import java . nio . charset . Charset ; </a> 
<a> import java . util . ArrayList ; </a> 
<a> import java . util . Collections ; </a> 
<a> import java . util . <RARE_TOKEN> ; </a> 
<a> import java . util . List ; </a> 
<a> import java . util . Map ; </a> 
<a> public class <RARE_TOKEN> { </a> 
<a> private static final int <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private final Charset charset ; </a> 
<a> private final String uri ; </a> 
<a> private final boolean <RARE_TOKEN> ; </a> 
<a> private final int <RARE_TOKEN> ; </a> 
<a> private String path ; </a> 
<a> private Map < String , List < String > > params ; </a> 
<a> private int <RARE_TOKEN> ; </a> 
<a> public <RARE_TOKEN> ( String uri ) { </a> 
<a> this ( uri , HttpConstants . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( String uri , boolean <RARE_TOKEN> ) { </a> 
<a> this ( uri , HttpConstants . <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( String uri , Charset charset ) { </a> 
<a> this ( uri , charset , true ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( String uri , Charset charset , boolean <RARE_TOKEN> ) { </a> 
<a> this ( uri , charset , <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( String uri , Charset charset , boolean <RARE_TOKEN> , int <RARE_TOKEN> ) { </a> 
<a> if ( uri == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( charset == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> <= 0 ) { </a> 
<a> throw new IllegalArgumentException ( </a> 
<a> <RARE_TOKEN> " + <RARE_TOKEN> + " (expected: a <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> this . uri = uri . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> this . charset = charset ; </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( URI uri ) { </a> 
<a> this ( uri , HttpConstants . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( URI uri , Charset charset ) { </a> 
<a> this ( uri , charset , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( URI uri , Charset charset , int <RARE_TOKEN> ) { </a> 
<a> if ( uri == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( charset == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> <= 0 ) { </a> 
<a> throw new IllegalArgumentException ( </a> 
<a> <RARE_TOKEN> " + <RARE_TOKEN> + " (expected: a <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> String <RARE_TOKEN> = uri . <RARE_TOKEN> ( ) ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> = true ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> = "" ; </a> 
<a> <RARE_TOKEN> = false ; </a> 
<a> } </a> 
<a> String <RARE_TOKEN> = <RARE_TOKEN> + <RARE_TOKEN> + uri . <RARE_TOKEN> ( ) ; </a> 
<a> this . uri = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> this . charset = charset ; </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public String getPath ( ) { </a> 
<a> if ( path == null ) { </a> 
<a> if ( ! <RARE_TOKEN> ) { </a> 
<a> return path = "" ; </a> 
<a> } </a> 
<a> int <RARE_TOKEN> = uri . indexOf ( <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> < 0 ) { </a> 
<a> path = uri ; </a> 
<a> } else { </a> 
<a> return path = uri . substring ( 0 , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> return path ; </a> 
<a> } </a> 
<a> public Map < String , List < String > > <RARE_TOKEN> ( ) { </a> 
<a> if ( params == null ) { </a> 
<a> if ( <RARE_TOKEN> ) { </a> 
<a> int <RARE_TOKEN> = getPath ( ) . length ( ) ; </a> 
<a> if ( uri . length ( ) == <RARE_TOKEN> ) { </a> 
<a> return Collections . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( uri . substring ( <RARE_TOKEN> + 1 ) ) ; </a> 
<a> } else { </a> 
<a> if ( uri . isEmpty ( ) ) { </a> 
<a> return Collections . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( uri ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> return params ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( String s ) { </a> 
<a> Map < String , List < String > > params = this . params = new <RARE_TOKEN> < String , List < String > > ( ) ; </a> 
<a> <RARE_TOKEN> = 0 ; </a> 
<a> String name = null ; </a> 
<a> int pos = 0 ; </a> 
<a> int i ; </a> 
<a> char c ; </a> 
<a> for ( i = 0 ; i < s . length ( ) ; i ++ ) { </a> 
<a> c = s . charAt ( i ) ; </a> 
<a> if ( c == <RARE_TOKEN> && name == null ) { </a> 
<a> if ( pos != i ) { </a> 
<a> name = <RARE_TOKEN> ( s . substring ( pos , i ) , charset ) ; </a> 
<a> } </a> 
<a> pos = i + 1 ; </a> 
<a> } else if ( c == <RARE_TOKEN> ) { </a> 
<a> if ( name == null && pos != i ) { </a> 
<a> if ( ! <RARE_TOKEN> ( params , <RARE_TOKEN> ( s . substring ( pos , i ) , charset ) , "" ) ) { </a> 
<a> return ; </a> 
<a> } </a> 
<a> } else if ( name != null ) { </a> 
<a> if ( ! <RARE_TOKEN> ( params , name , <RARE_TOKEN> ( s . substring ( pos , i ) , charset ) ) ) { </a> 
<a> return ; </a> 
<a> } </a> 
<a> name = null ; </a> 
<a> } </a> 
<a> pos = i + 1 ; </a> 
<a> } </a> 
<a> } </a> 
<a> if ( pos != i ) { </a> 
<a> if ( name == null ) { </a> 
<a> <RARE_TOKEN> ( params , <RARE_TOKEN> ( s . substring ( pos , i ) , charset ) , "" ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> ( params , name , <RARE_TOKEN> ( s . substring ( pos , i ) , charset ) ) ; </a> 
<a> } </a> 
<a> } else if ( name != null ) { </a> 
<a> <RARE_TOKEN> ( params , name , "" ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private boolean <RARE_TOKEN> ( Map < String , List < String > > params , String name , String value ) { </a> 
<a> if ( <RARE_TOKEN> >= <RARE_TOKEN> ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> List < String > values = params . get ( name ) ; </a> 
<a> if ( values == null ) { </a> 
<a> values = new ArrayList < String > ( 1 ) ; </a> 
<a> params . put ( name , values ) ; </a> 
<a> } </a> 
<a> values . add ( value ) ; </a> 
<a> <RARE_TOKEN> ++ ; </a> 
<a> return true ; </a> 
<a> } </a> 
<a> public static String <RARE_TOKEN> ( final String s ) { </a> 
<a> return <RARE_TOKEN> ( s , HttpConstants . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ SuppressWarnings ( <RARE_TOKEN> ) </a> 
<a> public static String <RARE_TOKEN> ( final String s , </a> 
<a> final Charset charset ) { </a> 
<a> if ( s == null ) { </a> 
<a> return "" ; </a> 
<a> } </a> 
<a> final int size = s . length ( ) ; </a> 
<a> boolean <RARE_TOKEN> = false ; </a> 
<a> for ( int i = 0 ; i < size ; i ++ ) { </a> 
<a> final char c = s . charAt ( i ) ; </a> 
<a> switch ( c ) { </a> 
<a> case <RARE_TOKEN> : </a> 
<a> i ++ ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> <RARE_TOKEN> = true ; </a> 
<a> break ; </a> 
<a> } </a> 
<a> } </a> 
<a> if ( ! <RARE_TOKEN> ) { </a> 
<a> return s ; </a> 
<a> } </a> 
<a> final byte [ ] buf = new byte [ size ] ; </a> 
<a> int pos = 0 ; </a> 
<a> for ( int i = 0 ; i < size ; i ++ ) { </a> 
<a> char c = s . charAt ( i ) ; </a> 
<a> switch ( c ) { </a> 
<a> case <RARE_TOKEN> : </a> 
<a> buf [ pos ++ ] = ' ' ; </a> 
<a> break ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> if ( i == size - 1 ) { </a> 
<a> throw new IllegalArgumentException ( <RARE_TOKEN> <RARE_TOKEN> </a> 
<a> + " <RARE_TOKEN> <RARE_TOKEN> end of <RARE_TOKEN> " + s ) ; </a> 
<a> } </a> 
<a> c = s . charAt ( ++ i ) ; </a> 
<a> if ( c == <RARE_TOKEN> ) { </a> 
<a> buf [ pos ++ ] = <RARE_TOKEN> ; </a> 
<a> break ; </a> 
<a> } else if ( i == size - 1 ) { </a> 
<a> throw new IllegalArgumentException ( <RARE_TOKEN> <RARE_TOKEN> </a> 
<a> + " <RARE_TOKEN> <RARE_TOKEN> end of <RARE_TOKEN> " + s ) ; </a> 
<a> } </a> 
<a> c = <RARE_TOKEN> ( c ) ; </a> 
<a> final char <RARE_TOKEN> = <RARE_TOKEN> ( s . charAt ( ++ i ) ) ; </a> 
<a> if ( c == <RARE_TOKEN> . MAX_VALUE || <RARE_TOKEN> == <RARE_TOKEN> . MAX_VALUE ) { </a> 
<a> throw new IllegalArgumentException ( </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> + s . charAt ( i - 1 ) </a> 
<a> + s . charAt ( i ) + <RARE_TOKEN> <RARE_TOKEN> index " + ( i - 2 ) </a> 
<a> + " <RARE_TOKEN> " + s ) ; </a> 
<a> } </a> 
<a> c = ( char ) ( c * 16 + <RARE_TOKEN> ) ; </a> 
<a> default : </a> 
<a> buf [ pos ++ ] = ( byte ) c ; </a> 
<a> break ; </a> 
<a> } </a> 
<a> } </a> 
<a> return new String ( buf , 0 , pos , charset ) ; </a> 
<a> } </a> 
<a> private static char <RARE_TOKEN> ( final char c ) { </a> 
<a> if ( <RARE_TOKEN> <= c && c <= <RARE_TOKEN> ) { </a> 
<a> return ( char ) ( c - <RARE_TOKEN> ) ; </a> 
<a> } else if ( <RARE_TOKEN> <= c && c <= <RARE_TOKEN> ) { </a> 
<a> return ( char ) ( c - <RARE_TOKEN> + 10 ) ; </a> 
<a> } else if ( <RARE_TOKEN> <= c && c <= <RARE_TOKEN> ) { </a> 
<a> return ( char ) ( c - <RARE_TOKEN> + 10 ) ; </a> 
<a> } else { </a> 
<a> return <RARE_TOKEN> . MAX_VALUE ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . http ; </a> 
<a> import java . io . <RARE_TOKEN> ; </a> 
<a> import java . net . URI ; </a> 
<a> import java . net . <RARE_TOKEN> ; </a> 
<a> import java . net . <RARE_TOKEN> ; </a> 
<a> import java . nio . charset . Charset ; </a> 
<a> import java . nio . charset . <RARE_TOKEN> ; </a> 
<a> import java . util . ArrayList ; </a> 
<a> import java . util . List ; </a> 
<a> public class <RARE_TOKEN> { </a> 
<a> private final Charset charset ; </a> 
<a> private final String uri ; </a> 
<a> private final List < <RARE_TOKEN> > params = new ArrayList < <RARE_TOKEN> > ( ) ; </a> 
<a> public <RARE_TOKEN> ( String uri ) { </a> 
<a> this ( uri , HttpConstants . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( String uri , Charset charset ) { </a> 
<a> if ( uri == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( charset == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> this . uri = uri ; </a> 
<a> this . charset = charset ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( String name , String value ) { </a> 
<a> if ( name == null ) { </a> 
<a> throw new NullPointerException ( "name" ) ; </a> 
<a> } </a> 
<a> if ( value == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> params . add ( new <RARE_TOKEN> ( name , value ) ) ; </a> 
<a> } </a> 
<a> public URI <RARE_TOKEN> ( ) throws <RARE_TOKEN> { </a> 
<a> return new URI ( toString ( ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public String toString ( ) { </a> 
<a> if ( params . isEmpty ( ) ) { </a> 
<a> return uri ; </a> 
<a> } else { </a> 
<a> StringBuilder sb = new StringBuilder ( uri ) . append ( <RARE_TOKEN> ) ; </a> 
<a> for ( int i = 0 ; i < params . size ( ) ; i ++ ) { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = params . get ( i ) ; </a> 
<a> sb . append ( <RARE_TOKEN> ( <RARE_TOKEN> . name , charset ) ) ; </a> 
<a> sb . append ( <RARE_TOKEN> ) ; </a> 
<a> sb . append ( <RARE_TOKEN> ( <RARE_TOKEN> . value , charset ) ) ; </a> 
<a> if ( i != params . size ( ) - 1 ) { </a> 
<a> sb . append ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> return sb . toString ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private static String <RARE_TOKEN> ( String s , Charset charset ) { </a> 
<a> try { </a> 
<a> return <RARE_TOKEN> . encode ( s , charset . name ( ) ) . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } catch ( <RARE_TOKEN> e ) { </a> 
<a> throw new <RARE_TOKEN> ( charset . name ( ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private static final class <RARE_TOKEN> { </a> 
<a> final String name ; </a> 
<a> final String value ; </a> 
<a> <RARE_TOKEN> ( String name , String value ) { </a> 
<a> this . value = value ; </a> 
<a> this . name = name ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . http ; </a> 
<a> import static io . netty . handler . codec . http . <RARE_TOKEN> . * ; </a> 
<a> import java . util . ArrayList ; </a> 
<a> import java . util . Collection ; </a> 
<a> import java . util . Date ; </a> 
<a> import java . util . List ; </a> 
<a> public final class <RARE_TOKEN> { </a> 
<a> public static String encode ( String name , String value ) { </a> 
<a> return encode ( new <RARE_TOKEN> ( name , value ) ) ; </a> 
<a> } </a> 
<a> public static String encode ( Cookie cookie ) { </a> 
<a> if ( cookie == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> StringBuilder buf = new StringBuilder ( ) ; </a> 
<a> add ( buf , cookie . getName ( ) , cookie . getValue ( ) ) ; </a> 
<a> if ( cookie . <RARE_TOKEN> ( ) != Long . <RARE_TOKEN> ) { </a> 
<a> if ( cookie . <RARE_TOKEN> ( ) == 0 ) { </a> 
<a> <RARE_TOKEN> ( buf , <RARE_TOKEN> . <RARE_TOKEN> , </a> 
<a> new <RARE_TOKEN> ( ) . format ( </a> 
<a> new Date ( System . currentTimeMillis ( ) + </a> 
<a> cookie . <RARE_TOKEN> ( ) * <RARE_TOKEN> ) ) ) ; </a> 
<a> } else { </a> 
<a> add ( buf , <RARE_TOKEN> . <RARE_TOKEN> , cookie . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> if ( cookie . getPath ( ) != null ) { </a> 
<a> if ( cookie . <RARE_TOKEN> ( ) > 0 ) { </a> 
<a> add ( buf , <RARE_TOKEN> . <RARE_TOKEN> , cookie . getPath ( ) ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> ( buf , <RARE_TOKEN> . <RARE_TOKEN> , cookie . getPath ( ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> if ( cookie . <RARE_TOKEN> ( ) != null ) { </a> 
<a> if ( cookie . <RARE_TOKEN> ( ) > 0 ) { </a> 
<a> add ( buf , <RARE_TOKEN> . <RARE_TOKEN> , cookie . <RARE_TOKEN> ( ) ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> ( buf , <RARE_TOKEN> . <RARE_TOKEN> , cookie . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> if ( cookie . <RARE_TOKEN> ( ) ) { </a> 
<a> buf . append ( <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> buf . append ( ( char ) HttpConstants . <RARE_TOKEN> ) ; </a> 
<a> buf . append ( ( char ) HttpConstants . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( cookie . <RARE_TOKEN> ( ) ) { </a> 
<a> buf . append ( <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> buf . append ( ( char ) HttpConstants . <RARE_TOKEN> ) ; </a> 
<a> buf . append ( ( char ) HttpConstants . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( cookie . <RARE_TOKEN> ( ) >= 1 ) { </a> 
<a> if ( cookie . <RARE_TOKEN> ( ) != null ) { </a> 
<a> add ( buf , <RARE_TOKEN> . <RARE_TOKEN> , cookie . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> add ( buf , <RARE_TOKEN> . <RARE_TOKEN> , 1 ) ; </a> 
<a> if ( cookie . <RARE_TOKEN> ( ) != null ) { </a> 
<a> <RARE_TOKEN> ( buf , <RARE_TOKEN> . <RARE_TOKEN> , cookie . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> if ( ! cookie . <RARE_TOKEN> ( ) . isEmpty ( ) ) { </a> 
<a> buf . append ( <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> buf . append ( ( char ) HttpConstants . <RARE_TOKEN> ) ; </a> 
<a> buf . append ( ( char ) HttpConstants . <RARE_TOKEN> ) ; </a> 
<a> for ( int port : cookie . <RARE_TOKEN> ( ) ) { </a> 
<a> buf . append ( port ) ; </a> 
<a> buf . append ( ( char ) HttpConstants . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> buf . <RARE_TOKEN> ( buf . length ( ) - 1 , ( char ) HttpConstants . <RARE_TOKEN> ) ; </a> 
<a> buf . append ( ( char ) HttpConstants . <RARE_TOKEN> ) ; </a> 
<a> buf . append ( ( char ) HttpConstants . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( cookie . <RARE_TOKEN> ( ) ) { </a> 
<a> buf . append ( <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> buf . append ( ( char ) HttpConstants . <RARE_TOKEN> ) ; </a> 
<a> buf . append ( ( char ) HttpConstants . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> return <RARE_TOKEN> ( buf ) ; </a> 
<a> } </a> 
<a> public static List < String > encode ( Cookie ... <RARE_TOKEN> ) { </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> List < String > <RARE_TOKEN> = new ArrayList < String > ( <RARE_TOKEN> . length ) ; </a> 
<a> for ( Cookie c : <RARE_TOKEN> ) { </a> 
<a> if ( c == null ) { </a> 
<a> break ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> . add ( encode ( c ) ) ; </a> 
<a> } </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public static List < String > encode ( Collection < Cookie > <RARE_TOKEN> ) { </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> List < String > <RARE_TOKEN> = new ArrayList < String > ( <RARE_TOKEN> . size ( ) ) ; </a> 
<a> for ( Cookie c : <RARE_TOKEN> ) { </a> 
<a> if ( c == null ) { </a> 
<a> break ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> . add ( encode ( c ) ) ; </a> 
<a> } </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public static List < String > encode ( <RARE_TOKEN> < Cookie > <RARE_TOKEN> ) { </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> List < String > <RARE_TOKEN> = new ArrayList < String > ( ) ; </a> 
<a> for ( Cookie c : <RARE_TOKEN> ) { </a> 
<a> if ( c == null ) { </a> 
<a> break ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> . add ( encode ( c ) ) ; </a> 
<a> } </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> private <RARE_TOKEN> ( ) { </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . http ; </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . http . websocketx ; </a> 
<a> import io . netty . buffer . ByteBuf ; </a> 
<a> import io . netty . buffer . Unpooled ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> public <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> ( Unpooled . EMPTY_BUFFER ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( ByteBuf <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( boolean <RARE_TOKEN> , int <RARE_TOKEN> , ByteBuf <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public String toString ( ) { </a> 
<a> return getClass ( ) . getSimpleName ( ) + <RARE_TOKEN> " + <RARE_TOKEN> ( ) + <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . http . websocketx ; </a> 
<a> import io . netty . buffer . ByteBuf ; </a> 
<a> import io . netty . buffer . Unpooled ; </a> 
<a> import io . netty . util . CharsetUtil ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> private String <RARE_TOKEN> ; </a> 
<a> public <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> ( Unpooled . EMPTY_BUFFER ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( ByteBuf <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( boolean <RARE_TOKEN> , int <RARE_TOKEN> , ByteBuf <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( </a> 
<a> boolean <RARE_TOKEN> , int <RARE_TOKEN> , ByteBuf <RARE_TOKEN> , String <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( boolean <RARE_TOKEN> , int <RARE_TOKEN> , String text ) { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> setText ( text ) ; </a> 
<a> } </a> 
<a> public String <RARE_TOKEN> ( ) { </a> 
<a> if ( <RARE_TOKEN> ( ) == null ) { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> return <RARE_TOKEN> ( ) . toString ( CharsetUtil . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public void setText ( String text ) { </a> 
<a> if ( text == null || text . isEmpty ( ) ) { </a> 
<a> <RARE_TOKEN> ( Unpooled . EMPTY_BUFFER ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> ( Unpooled . copiedBuffer ( text , CharsetUtil . <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public String toString ( ) { </a> 
<a> return getClass ( ) . getSimpleName ( ) + <RARE_TOKEN> " + <RARE_TOKEN> ( ) + <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public String <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( String <RARE_TOKEN> ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . http . websocketx ; </a> 
<a> import io . netty . buffer . ByteBuf ; </a> 
<a> import io . netty . buffer . Unpooled ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> public <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> ( true ) ; </a> 
<a> <RARE_TOKEN> ( Unpooled . EMPTY_BUFFER ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( ByteBuf <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( boolean <RARE_TOKEN> , int <RARE_TOKEN> , ByteBuf <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public String toString ( ) { </a> 
<a> return getClass ( ) . getSimpleName ( ) + <RARE_TOKEN> " + <RARE_TOKEN> ( ) + <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . http . websocketx ; </a> 
<a> import io . netty . buffer . ByteBuf ; </a> 
<a> import io . netty . buffer . Unpooled ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> public <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> ( Unpooled . EMPTY_BUFFER ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( ByteBuf <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( boolean <RARE_TOKEN> , int <RARE_TOKEN> , ByteBuf <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public String toString ( ) { </a> 
<a> return getClass ( ) . getSimpleName ( ) + <RARE_TOKEN> " + <RARE_TOKEN> ( ) + <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . http . websocketx ; </a> 
<a> final class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> private static final long serialVersionUID = <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> ( String <RARE_TOKEN> ) { </a> 
<a> super ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . http . websocketx ; </a> 
<a> final class <RARE_TOKEN> { </a> 
<a> private static final int <RARE_TOKEN> = 0 ; </a> 
<a> private static final int <RARE_TOKEN> = 12 ; </a> 
<a> private static final byte [ ] <RARE_TOKEN> = { 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , </a> 
<a> 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , </a> 
<a> 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , </a> 
<a> 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , </a> 
<a> 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 1 , 1 , 1 , 1 , 1 , 1 , 1 , </a> 
<a> 1 , 1 , 1 , 1 , 1 , 1 , 1 , 1 , 1 , 9 , 9 , 9 , 9 , 9 , 9 , 9 , 9 , 9 , 9 , 9 , 9 , 9 , 9 , 9 , 9 , 7 , 7 , 7 , 7 , </a> 
<a> 7 , 7 , 7 , 7 , 7 , 7 , 7 , 7 , 7 , 7 , 7 , 7 , 7 , 7 , 7 , 7 , 7 , 7 , 7 , 7 , 7 , 7 , 7 , 7 , 7 , 7 , 7 , 7 , 8 , </a> 
<a> 8 , 2 , 2 , 2 , 2 , 2 , 2 , 2 , 2 , 2 , 2 , 2 , 2 , 2 , 2 , 2 , 2 , 2 , 2 , 2 , 2 , 2 , 2 , 2 , 2 , 2 , 2 , 2 , 2 , </a> 
<a> 2 , 2 , 10 , 3 , 3 , 3 , 3 , 3 , 3 , 3 , 3 , 3 , 3 , 3 , 3 , 4 , 3 , 3 , 11 , 6 , 6 , 6 , 5 , 8 , 8 , 8 , 8 , 8 , </a> 
<a> 8 , 8 , 8 , 8 , 8 , 8 } ; </a> 
<a> private static final byte [ ] <RARE_TOKEN> = { 0 , 12 , 24 , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , 12 , 12 , 12 , <RARE_TOKEN> , <RARE_TOKEN> , 12 , 12 , </a> 
<a> 12 , 12 , 12 , 12 , 12 , 12 , 12 , 12 , 12 , 12 , 12 , 0 , 12 , 12 , 12 , 12 , 12 , 0 , 12 , 0 , 12 , 12 , </a> 
<a> 12 , 24 , 12 , 12 , 12 , 12 , 12 , 24 , 12 , 24 , 12 , 12 , 12 , 12 , 12 , 12 , 12 , 12 , 12 , 24 , 12 , 12 , </a> 
<a> 12 , 12 , 12 , 24 , 12 , 12 , 12 , 12 , 12 , 12 , 12 , 24 , 12 , 12 , 12 , 12 , 12 , 12 , 12 , 12 , 12 , <RARE_TOKEN> , </a> 
<a> 12 , <RARE_TOKEN> , 12 , 12 , 12 , <RARE_TOKEN> , 12 , 12 , 12 , 12 , 12 , <RARE_TOKEN> , 12 , <RARE_TOKEN> , 12 , 12 , 12 , <RARE_TOKEN> , 12 , 12 , 12 , 12 , </a> 
<a> 12 , 12 , 12 , 12 , 12 , 12 } ; </a> 
<a> private int state = <RARE_TOKEN> ; </a> 
<a> private int <RARE_TOKEN> ; </a> 
<a> private final StringBuilder <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> ( byte [ ] bytes ) { </a> 
<a> <RARE_TOKEN> = new StringBuilder ( bytes . length ) ; </a> 
<a> write ( bytes ) ; </a> 
<a> } </a> 
<a> public void write ( byte [ ] bytes ) { </a> 
<a> for ( byte b : bytes ) { </a> 
<a> write ( b ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public void write ( int b ) { </a> 
<a> byte type = <RARE_TOKEN> [ b & 0xFF ] ; </a> 
<a> <RARE_TOKEN> = state != <RARE_TOKEN> ? b & <RARE_TOKEN> | <RARE_TOKEN> < < 6 : 0xff > > type & b ; </a> 
<a> state = <RARE_TOKEN> [ state + type ] ; </a> 
<a> if ( state == <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> . append ( ( char ) <RARE_TOKEN> ) ; </a> 
<a> } else if ( state == <RARE_TOKEN> ) { </a> 
<a> throw new <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> not <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public String toString ( ) { </a> 
<a> if ( state != <RARE_TOKEN> ) { </a> 
<a> throw new <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> not <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> return <RARE_TOKEN> . toString ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . http . websocketx ; </a> 
<a> import io . netty . buffer . ByteBuf ; </a> 
<a> import io . netty . channel . ChannelHandler . Sharable ; </a> 
<a> import io . netty . channel . ChannelHandlerContext ; </a> 
<a> import io . netty . handler . codec . <RARE_TOKEN> ; </a> 
<a> @ Sharable </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> < <RARE_TOKEN> > { </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( Object msg ) throws Exception { </a> 
<a> return msg instanceof <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void encode ( </a> 
<a> ChannelHandlerContext ctx , </a> 
<a> <RARE_TOKEN> msg , ByteBuf out ) throws Exception { </a> 
<a> if ( msg instanceof <RARE_TOKEN> ) { </a> 
<a> ByteBuf data = msg . <RARE_TOKEN> ( ) ; </a> 
<a> out . writeByte ( ( byte ) 0x00 ) ; </a> 
<a> out . writeBytes ( data , data . readerIndex ( ) , data . readableBytes ( ) ) ; </a> 
<a> out . writeByte ( ( byte ) 0xFF ) ; </a> 
<a> } else if ( msg instanceof <RARE_TOKEN> ) { </a> 
<a> out . writeByte ( ( byte ) 0xFF ) ; </a> 
<a> out . writeByte ( ( byte ) 0x00 ) ; </a> 
<a> } else { </a> 
<a> ByteBuf data = msg . <RARE_TOKEN> ( ) ; </a> 
<a> int <RARE_TOKEN> = data . readableBytes ( ) ; </a> 
<a> out . <RARE_TOKEN> ( <RARE_TOKEN> + 5 ) ; </a> 
<a> out . writeByte ( ( byte ) <RARE_TOKEN> ) ; </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> > > > 28 & <RARE_TOKEN> ; </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> > > > 14 & <RARE_TOKEN> ; </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> > > > 7 & <RARE_TOKEN> ; </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> & <RARE_TOKEN> ; </a> 
<a> if ( <RARE_TOKEN> == 0 ) { </a> 
<a> if ( <RARE_TOKEN> == 0 ) { </a> 
<a> if ( <RARE_TOKEN> == 0 ) { </a> 
<a> out . writeByte ( <RARE_TOKEN> ) ; </a> 
<a> } else { </a> 
<a> out . writeByte ( <RARE_TOKEN> | <RARE_TOKEN> ) ; </a> 
<a> out . writeByte ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } else { </a> 
<a> out . writeByte ( <RARE_TOKEN> | <RARE_TOKEN> ) ; </a> 
<a> out . writeByte ( <RARE_TOKEN> | <RARE_TOKEN> ) ; </a> 
<a> out . writeByte ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } else { </a> 
<a> out . writeByte ( <RARE_TOKEN> | <RARE_TOKEN> ) ; </a> 
<a> out . writeByte ( <RARE_TOKEN> | <RARE_TOKEN> ) ; </a> 
<a> out . writeByte ( <RARE_TOKEN> | <RARE_TOKEN> ) ; </a> 
<a> out . writeByte ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> out . writeBytes ( data , data . readerIndex ( ) , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . http . websocketx ; </a> 
<a> import io . netty . buffer . ByteBuf ; </a> 
<a> import io . netty . buffer . Unpooled ; </a> 
<a> import io . netty . channel . ChannelHandlerContext ; </a> 
<a> import io . netty . handler . codec . <RARE_TOKEN> ; </a> 
<a> import io . netty . handler . codec . TooLongFrameException ; </a> 
<a> import io . netty . logging . InternalLogger ; </a> 
<a> import io . netty . logging . InternalLoggerFactory ; </a> 
<a> import java . nio . ByteBuffer ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> < <RARE_TOKEN> > { </a> 
<a> private static final InternalLogger logger = InternalLoggerFactory . getInstance ( <RARE_TOKEN> . class ) ; </a> 
<a> private static final byte <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final byte <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final byte <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final byte <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final byte <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final byte <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private final boolean <RARE_TOKEN> ; </a> 
<a> public <RARE_TOKEN> ( boolean <RARE_TOKEN> ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( Object msg ) throws Exception { </a> 
<a> return msg instanceof <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void encode ( ChannelHandlerContext ctx , </a> 
<a> <RARE_TOKEN> msg , ByteBuf out ) throws Exception { </a> 
<a> byte [ ] <RARE_TOKEN> ; </a> 
<a> ByteBuf data = msg . <RARE_TOKEN> ( ) ; </a> 
<a> if ( data == null ) { </a> 
<a> data = Unpooled . EMPTY_BUFFER ; </a> 
<a> } </a> 
<a> byte <RARE_TOKEN> ; </a> 
<a> if ( msg instanceof <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } else if ( msg instanceof <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } else if ( msg instanceof <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } else if ( msg instanceof <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } else if ( msg instanceof <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } else if ( msg instanceof <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } else { </a> 
<a> throw new UnsupportedOperationException ( <RARE_TOKEN> encode frame of <RARE_TOKEN> " + msg . getClass ( ) . getName ( ) ) ; </a> 
<a> } </a> 
<a> int length = data . readableBytes ( ) ; </a> 
<a> if ( logger . isDebugEnabled ( ) ) { </a> 
<a> logger . debug ( <RARE_TOKEN> WebSocket <RARE_TOKEN> <RARE_TOKEN> + <RARE_TOKEN> + " <RARE_TOKEN> + length ) ; </a> 
<a> } </a> 
<a> int <RARE_TOKEN> = 0 ; </a> 
<a> if ( msg . <RARE_TOKEN> ( ) ) { </a> 
<a> <RARE_TOKEN> |= 1 < < 7 ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> |= msg . <RARE_TOKEN> ( ) <RARE_TOKEN> 8 < < 4 ; </a> 
<a> <RARE_TOKEN> |= <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> if ( <RARE_TOKEN> == <RARE_TOKEN> && length > <RARE_TOKEN> ) { </a> 
<a> throw new TooLongFrameException ( <RARE_TOKEN> <RARE_TOKEN> for <RARE_TOKEN> <RARE_TOKEN> length must be <= <RARE_TOKEN> <RARE_TOKEN> " </a> 
<a> + length ) ; </a> 
<a> } </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> ? 4 : 0 ; </a> 
<a> if ( length <= <RARE_TOKEN> ) { </a> 
<a> out . <RARE_TOKEN> ( 2 + <RARE_TOKEN> + length ) ; </a> 
<a> out . writeByte ( <RARE_TOKEN> ) ; </a> 
<a> byte b = ( byte ) ( <RARE_TOKEN> ? <RARE_TOKEN> | ( byte ) length : ( byte ) length ) ; </a> 
<a> out . writeByte ( b ) ; </a> 
<a> } else if ( length <= <RARE_TOKEN> ) { </a> 
<a> out . <RARE_TOKEN> ( 4 + <RARE_TOKEN> + length ) ; </a> 
<a> out . writeByte ( <RARE_TOKEN> ) ; </a> 
<a> out . writeByte ( <RARE_TOKEN> ? <RARE_TOKEN> : <RARE_TOKEN> ) ; </a> 
<a> out . writeByte ( length > > > 8 & 0xFF ) ; </a> 
<a> out . writeByte ( length & 0xFF ) ; </a> 
<a> } else { </a> 
<a> out . <RARE_TOKEN> ( 10 + <RARE_TOKEN> + length ) ; </a> 
<a> out . writeByte ( <RARE_TOKEN> ) ; </a> 
<a> out . writeByte ( <RARE_TOKEN> ? 0xFF : <RARE_TOKEN> ) ; </a> 
<a> out . <RARE_TOKEN> ( length ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> ) { </a> 
<a> int random = ( int ) ( Math . random ( ) * Integer . MAX_VALUE ) ; </a> 
<a> <RARE_TOKEN> = ByteBuffer . <RARE_TOKEN> ( 4 ) . <RARE_TOKEN> ( random ) . array ( ) ; </a> 
<a> out . writeBytes ( <RARE_TOKEN> ) ; </a> 
<a> int <RARE_TOKEN> = 0 ; </a> 
<a> for ( int i = data . readerIndex ( ) ; i < data . writerIndex ( ) ; i ++ ) { </a> 
<a> byte <RARE_TOKEN> = data . getByte ( i ) ; </a> 
<a> out . writeByte ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> [ + <RARE_TOKEN> ++ <RARE_TOKEN> 4 ] ) ; </a> 
<a> } </a> 
<a> } else { </a> 
<a> out . writeBytes ( data , data . readerIndex ( ) , data . readableBytes ( ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . http . websocketx ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> public <RARE_TOKEN> ( boolean <RARE_TOKEN> , boolean <RARE_TOKEN> , int <RARE_TOKEN> ) { </a> 
<a> super ( <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . http . websocketx ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> public <RARE_TOKEN> ( boolean <RARE_TOKEN> ) { </a> 
<a> super ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . http . websocketx ; </a> 
<a> import io . netty . channel . Channel ; </a> 
<a> import io . netty . channel . ChannelFuture ; </a> 
<a> import io . netty . handler . codec . http . HttpResponse ; </a> 
<a> import java . net . URI ; </a> 
<a> import java . util . Map ; </a> 
<a> public abstract class <RARE_TOKEN> { </a> 
<a> private final URI <RARE_TOKEN> ; </a> 
<a> private final <RARE_TOKEN> version ; </a> 
<a> private boolean <RARE_TOKEN> ; </a> 
<a> private final String <RARE_TOKEN> ; </a> 
<a> private String <RARE_TOKEN> ; </a> 
<a> protected final Map < String , String > <RARE_TOKEN> ; </a> 
<a> private final int <RARE_TOKEN> ; </a> 
<a> public <RARE_TOKEN> ( URI <RARE_TOKEN> , <RARE_TOKEN> version , String <RARE_TOKEN> , </a> 
<a> Map < String , String > <RARE_TOKEN> , int <RARE_TOKEN> ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> this . version = version ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public URI <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> <RARE_TOKEN> ( ) { </a> 
<a> return version ; </a> 
<a> } </a> 
<a> public int <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> protected void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> = true ; </a> 
<a> } </a> 
<a> public String <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public String <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> protected void <RARE_TOKEN> ( String <RARE_TOKEN> ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public abstract ChannelFuture <RARE_TOKEN> ( Channel channel ) ; </a> 
<a> public abstract void <RARE_TOKEN> ( Channel channel , HttpResponse response ) ; </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . http . websocketx ; </a> 
<a> import io . netty . buffer . Unpooled ; </a> 
<a> import io . netty . channel . Channel ; </a> 
<a> import io . netty . channel . ChannelFuture ; </a> 
<a> import io . netty . handler . codec . http . <RARE_TOKEN> ; </a> 
<a> import io . netty . handler . codec . http . HttpHeaders . Names ; </a> 
<a> import io . netty . handler . codec . http . HttpHeaders . Values ; </a> 
<a> import io . netty . handler . codec . http . HttpMethod ; </a> 
<a> import io . netty . handler . codec . http . HttpRequest ; </a> 
<a> import io . netty . handler . codec . http . <RARE_TOKEN> ; </a> 
<a> import io . netty . handler . codec . http . HttpResponse ; </a> 
<a> import io . netty . handler . codec . http . <RARE_TOKEN> ; </a> 
<a> import io . netty . handler . codec . http . HttpResponseStatus ; </a> 
<a> import io . netty . handler . codec . http . HttpVersion ; </a> 
<a> import java . net . URI ; </a> 
<a> import java . nio . ByteBuffer ; </a> 
<a> import java . util . Arrays ; </a> 
<a> import java . util . Map ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> private byte [ ] <RARE_TOKEN> ; </a> 
<a> public <RARE_TOKEN> ( URI <RARE_TOKEN> , <RARE_TOKEN> version , String <RARE_TOKEN> , </a> 
<a> Map < String , String > <RARE_TOKEN> , int <RARE_TOKEN> ) { </a> 
<a> super ( <RARE_TOKEN> , version , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ChannelFuture <RARE_TOKEN> ( Channel channel ) { </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( 1 , 12 ) ; </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( 1 , 12 ) ; </a> 
<a> int <RARE_TOKEN> = Integer . MAX_VALUE / <RARE_TOKEN> ; </a> 
<a> int <RARE_TOKEN> = Integer . MAX_VALUE / <RARE_TOKEN> ; </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( 0 , <RARE_TOKEN> ) ; </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( 0 , <RARE_TOKEN> ) ; </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> * <RARE_TOKEN> ; </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> * <RARE_TOKEN> ; </a> 
<a> String <RARE_TOKEN> = Integer . toString ( <RARE_TOKEN> ) ; </a> 
<a> String <RARE_TOKEN> = Integer . toString ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> byte [ ] <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( 8 ) ; </a> 
<a> ByteBuffer buffer = ByteBuffer . <RARE_TOKEN> ( 4 ) ; </a> 
<a> buffer . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> byte [ ] <RARE_TOKEN> = buffer . array ( ) ; </a> 
<a> buffer = ByteBuffer . <RARE_TOKEN> ( 4 ) ; </a> 
<a> buffer . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> byte [ ] <RARE_TOKEN> = buffer . array ( ) ; </a> 
<a> byte [ ] <RARE_TOKEN> = new byte [ 16 ] ; </a> 
<a> System . <RARE_TOKEN> ( <RARE_TOKEN> , 0 , <RARE_TOKEN> , 0 , 4 ) ; </a> 
<a> System . <RARE_TOKEN> ( <RARE_TOKEN> , 0 , <RARE_TOKEN> , 4 , 4 ) ; </a> 
<a> System . <RARE_TOKEN> ( <RARE_TOKEN> , 0 , <RARE_TOKEN> , 8 , 8 ) ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> URI <RARE_TOKEN> = <RARE_TOKEN> ( ) ; </a> 
<a> String path = <RARE_TOKEN> . getPath ( ) ; </a> 
<a> if ( <RARE_TOKEN> . <RARE_TOKEN> ( ) != null && <RARE_TOKEN> . <RARE_TOKEN> ( ) . length ( ) > 0 ) { </a> 
<a> path = <RARE_TOKEN> . getPath ( ) + <RARE_TOKEN> + <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> HttpRequest request = new <RARE_TOKEN> ( HttpVersion . <RARE_TOKEN> , HttpMethod . GET , path ) ; </a> 
<a> request . addHeader ( Names . <RARE_TOKEN> , Values . <RARE_TOKEN> ) ; </a> 
<a> request . addHeader ( Names . <RARE_TOKEN> , Values . <RARE_TOKEN> ) ; </a> 
<a> request . addHeader ( Names . <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> String <RARE_TOKEN> = <RARE_TOKEN> + <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> if ( <RARE_TOKEN> != 80 && <RARE_TOKEN> != <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> + <RARE_TOKEN> + <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> request . addHeader ( Names . <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> request . addHeader ( Names . <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> request . addHeader ( Names . <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> String <RARE_TOKEN> = <RARE_TOKEN> ( ) ; </a> 
<a> if ( <RARE_TOKEN> != null && ! <RARE_TOKEN> . equals ( "" ) ) { </a> 
<a> request . addHeader ( Names . <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> for ( String header : <RARE_TOKEN> . <RARE_TOKEN> ( ) ) { </a> 
<a> request . addHeader ( header , <RARE_TOKEN> . get ( header ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> request . <RARE_TOKEN> ( Unpooled . copiedBuffer ( <RARE_TOKEN> ) ) ; </a> 
<a> ChannelFuture future = channel . write ( request ) ; </a> 
<a> channel . pipeline ( ) . <RARE_TOKEN> ( <RARE_TOKEN> . class , <RARE_TOKEN> , new <RARE_TOKEN> ( ) ) ; </a> 
<a> return future ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( Channel channel , HttpResponse response ) throws <RARE_TOKEN> { </a> 
<a> final HttpResponseStatus status = new HttpResponseStatus ( <RARE_TOKEN> , <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> if ( ! response . getStatus ( ) . equals ( status ) ) { </a> 
<a> throw new <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> response <RARE_TOKEN> " + response . getStatus ( ) ) ; </a> 
<a> } </a> 
<a> String <RARE_TOKEN> = response . getHeader ( Names . <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> == null || ! <RARE_TOKEN> . equalsIgnoreCase ( Values . <RARE_TOKEN> ) ) { </a> 
<a> throw new <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> response <RARE_TOKEN> " </a> 
<a> + response . getHeader ( Names . <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> String connection = response . getHeader ( Names . <RARE_TOKEN> ) ; </a> 
<a> if ( connection == null || ! connection . equalsIgnoreCase ( Values . <RARE_TOKEN> ) ) { </a> 
<a> throw new <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> response <RARE_TOKEN> " </a> 
<a> + response . getHeader ( Names . <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> byte [ ] <RARE_TOKEN> = response . getContent ( ) . array ( ) ; </a> 
<a> if ( ! Arrays . equals ( <RARE_TOKEN> , <RARE_TOKEN> ) ) { </a> 
<a> throw new <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> String <RARE_TOKEN> = response . getHeader ( Names . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> channel . pipeline ( ) . get ( <RARE_TOKEN> . class ) . <RARE_TOKEN> ( </a> 
<a> <RARE_TOKEN> , new <RARE_TOKEN> ( <RARE_TOKEN> ( ) ) ) ; </a> 
<a> } </a> 
<a> private static String <RARE_TOKEN> ( String key ) { </a> 
<a> int count = <RARE_TOKEN> . <RARE_TOKEN> ( 1 , 12 ) ; </a> 
<a> char [ ] <RARE_TOKEN> = new char [ count ] ; </a> 
<a> int <RARE_TOKEN> = 0 ; </a> 
<a> while ( <RARE_TOKEN> < count ) { </a> 
<a> int <RARE_TOKEN> = ( int ) ( Math . random ( ) * <RARE_TOKEN> + <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> < <RARE_TOKEN> && <RARE_TOKEN> < <RARE_TOKEN> || <RARE_TOKEN> < <RARE_TOKEN> && <RARE_TOKEN> < <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> [ <RARE_TOKEN> ] = ( char ) <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> += 1 ; </a> 
<a> } </a> 
<a> } </a> 
<a> for ( int i = 0 ; i < count ; i ++ ) { </a> 
<a> int split = <RARE_TOKEN> . <RARE_TOKEN> ( 0 , key . length ( ) ) ; </a> 
<a> String <RARE_TOKEN> = key . substring ( 0 , split ) ; </a> 
<a> String <RARE_TOKEN> = key . substring ( split ) ; </a> 
<a> key = <RARE_TOKEN> + <RARE_TOKEN> [ i ] + <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> return key ; </a> 
<a> } </a> 
<a> private static String <RARE_TOKEN> ( String key , int <RARE_TOKEN> ) { </a> 
<a> for ( int i = 0 ; i < <RARE_TOKEN> ; i ++ ) { </a> 
<a> int split = <RARE_TOKEN> . <RARE_TOKEN> ( 1 , key . length ( ) - 1 ) ; </a> 
<a> String <RARE_TOKEN> = key . substring ( 0 , split ) ; </a> 
<a> String <RARE_TOKEN> = key . substring ( split ) ; </a> 
<a> key = <RARE_TOKEN> + " " + <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> return key ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . http . websocketx ; </a> 
<a> import io . netty . channel . Channel ; </a> 
<a> import io . netty . channel . ChannelFuture ; </a> 
<a> import io . netty . handler . codec . http . <RARE_TOKEN> ; </a> 
<a> import io . netty . handler . codec . http . HttpHeaders . Names ; </a> 
<a> import io . netty . handler . codec . http . HttpHeaders . Values ; </a> 
<a> import io . netty . handler . codec . http . HttpMethod ; </a> 
<a> import io . netty . handler . codec . http . HttpRequest ; </a> 
<a> import io . netty . handler . codec . http . <RARE_TOKEN> ; </a> 
<a> import io . netty . handler . codec . http . HttpResponse ; </a> 
<a> import io . netty . handler . codec . http . <RARE_TOKEN> ; </a> 
<a> import io . netty . handler . codec . http . HttpResponseStatus ; </a> 
<a> import io . netty . handler . codec . http . HttpVersion ; </a> 
<a> import io . netty . logging . InternalLogger ; </a> 
<a> import io . netty . logging . InternalLoggerFactory ; </a> 
<a> import io . netty . util . CharsetUtil ; </a> 
<a> import java . net . URI ; </a> 
<a> import java . util . Map ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> private static final InternalLogger logger = InternalLoggerFactory . getInstance ( <RARE_TOKEN> . class ) ; </a> 
<a> public static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private String <RARE_TOKEN> ; </a> 
<a> private final boolean <RARE_TOKEN> ; </a> 
<a> public <RARE_TOKEN> ( URI <RARE_TOKEN> , <RARE_TOKEN> version , String <RARE_TOKEN> , </a> 
<a> boolean <RARE_TOKEN> , Map < String , String > <RARE_TOKEN> , int <RARE_TOKEN> ) { </a> 
<a> super ( <RARE_TOKEN> , version , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ChannelFuture <RARE_TOKEN> ( Channel channel ) { </a> 
<a> URI <RARE_TOKEN> = <RARE_TOKEN> ( ) ; </a> 
<a> String path = <RARE_TOKEN> . getPath ( ) ; </a> 
<a> if ( <RARE_TOKEN> . <RARE_TOKEN> ( ) != null && <RARE_TOKEN> . <RARE_TOKEN> ( ) . length ( ) > 0 ) { </a> 
<a> path = <RARE_TOKEN> . getPath ( ) + <RARE_TOKEN> + <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> byte [ ] <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( 16 ) ; </a> 
<a> String key = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> String <RARE_TOKEN> = key + <RARE_TOKEN> ; </a> 
<a> byte [ ] <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> . getBytes ( CharsetUtil . <RARE_TOKEN> ) ) ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> if ( logger . isDebugEnabled ( ) ) { </a> 
<a> logger . debug ( String . format ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> response: <RARE_TOKEN> , key , </a> 
<a> <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> HttpRequest request = new <RARE_TOKEN> ( HttpVersion . <RARE_TOKEN> , HttpMethod . GET , path ) ; </a> 
<a> request . addHeader ( Names . <RARE_TOKEN> , Values . <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> request . addHeader ( Names . <RARE_TOKEN> , Values . <RARE_TOKEN> ) ; </a> 
<a> request . addHeader ( Names . <RARE_TOKEN> , key ) ; </a> 
<a> request . addHeader ( Names . <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> String <RARE_TOKEN> = <RARE_TOKEN> + <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> if ( <RARE_TOKEN> != 80 && <RARE_TOKEN> != <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> + <RARE_TOKEN> + <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> request . addHeader ( Names . <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> String <RARE_TOKEN> = <RARE_TOKEN> ( ) ; </a> 
<a> if ( <RARE_TOKEN> != null && ! <RARE_TOKEN> . equals ( "" ) ) { </a> 
<a> request . addHeader ( Names . <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> request . addHeader ( Names . <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> for ( String header : <RARE_TOKEN> . <RARE_TOKEN> ( ) ) { </a> 
<a> request . addHeader ( header , <RARE_TOKEN> . get ( header ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> ChannelFuture future = channel . write ( request ) ; </a> 
<a> channel . pipeline ( ) . <RARE_TOKEN> ( <RARE_TOKEN> . class , <RARE_TOKEN> , new <RARE_TOKEN> ( true ) ) ; </a> 
<a> return future ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( Channel channel , HttpResponse response ) { </a> 
<a> final HttpResponseStatus status = HttpResponseStatus . <RARE_TOKEN> ; </a> 
<a> if ( ! response . getStatus ( ) . equals ( status ) ) { </a> 
<a> throw new <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> response <RARE_TOKEN> " + response . getStatus ( ) ) ; </a> 
<a> } </a> 
<a> String <RARE_TOKEN> = response . getHeader ( Names . <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> == null || ! <RARE_TOKEN> . equalsIgnoreCase ( Values . <RARE_TOKEN> ) ) { </a> 
<a> throw new <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> response <RARE_TOKEN> " </a> 
<a> + response . getHeader ( Names . <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> String connection = response . getHeader ( Names . <RARE_TOKEN> ) ; </a> 
<a> if ( connection == null || ! connection . equalsIgnoreCase ( Values . <RARE_TOKEN> ) ) { </a> 
<a> throw new <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> response <RARE_TOKEN> " </a> 
<a> + response . getHeader ( Names . <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> String <RARE_TOKEN> = response . getHeader ( Names . <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> == null || ! <RARE_TOKEN> . equals ( <RARE_TOKEN> ) ) { </a> 
<a> throw new <RARE_TOKEN> ( String . format ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> String <RARE_TOKEN> = response . getHeader ( Names . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> channel . pipeline ( ) . get ( <RARE_TOKEN> . class ) . <RARE_TOKEN> ( </a> 
<a> <RARE_TOKEN> , </a> 
<a> new <RARE_TOKEN> ( false , <RARE_TOKEN> , <RARE_TOKEN> ( ) ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . http . websocketx ; </a> 
<a> import io . netty . channel . Channel ; </a> 
<a> import io . netty . channel . ChannelFuture ; </a> 
<a> import io . netty . handler . codec . http . <RARE_TOKEN> ; </a> 
<a> import io . netty . handler . codec . http . HttpHeaders . Names ; </a> 
<a> import io . netty . handler . codec . http . HttpHeaders . Values ; </a> 
<a> import io . netty . handler . codec . http . HttpMethod ; </a> 
<a> import io . netty . handler . codec . http . HttpRequest ; </a> 
<a> import io . netty . handler . codec . http . <RARE_TOKEN> ; </a> 
<a> import io . netty . handler . codec . http . HttpResponse ; </a> 
<a> import io . netty . handler . codec . http . <RARE_TOKEN> ; </a> 
<a> import io . netty . handler . codec . http . HttpResponseStatus ; </a> 
<a> import io . netty . handler . codec . http . HttpVersion ; </a> 
<a> import io . netty . logging . InternalLogger ; </a> 
<a> import io . netty . logging . InternalLoggerFactory ; </a> 
<a> import io . netty . util . CharsetUtil ; </a> 
<a> import java . net . URI ; </a> 
<a> import java . util . Map ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> private static final InternalLogger logger = InternalLoggerFactory . getInstance ( <RARE_TOKEN> . class ) ; </a> 
<a> public static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private String <RARE_TOKEN> ; </a> 
<a> private final boolean <RARE_TOKEN> ; </a> 
<a> public <RARE_TOKEN> ( URI <RARE_TOKEN> , <RARE_TOKEN> version , String <RARE_TOKEN> , </a> 
<a> boolean <RARE_TOKEN> , Map < String , String > <RARE_TOKEN> , int <RARE_TOKEN> ) { </a> 
<a> super ( <RARE_TOKEN> , version , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ChannelFuture <RARE_TOKEN> ( Channel channel ) { </a> 
<a> URI <RARE_TOKEN> = <RARE_TOKEN> ( ) ; </a> 
<a> String path = <RARE_TOKEN> . getPath ( ) ; </a> 
<a> if ( <RARE_TOKEN> . <RARE_TOKEN> ( ) != null && <RARE_TOKEN> . <RARE_TOKEN> ( ) . length ( ) > 0 ) { </a> 
<a> path = <RARE_TOKEN> . getPath ( ) + <RARE_TOKEN> + <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> byte [ ] <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( 16 ) ; </a> 
<a> String key = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> String <RARE_TOKEN> = key + <RARE_TOKEN> ; </a> 
<a> byte [ ] <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> . getBytes ( CharsetUtil . <RARE_TOKEN> ) ) ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> if ( logger . isDebugEnabled ( ) ) { </a> 
<a> logger . debug ( String . format ( <RARE_TOKEN> <RARE_TOKEN> 13 <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> response: <RARE_TOKEN> , key , </a> 
<a> <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> HttpRequest request = new <RARE_TOKEN> ( HttpVersion . <RARE_TOKEN> , HttpMethod . GET , path ) ; </a> 
<a> request . addHeader ( Names . <RARE_TOKEN> , Values . <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> request . addHeader ( Names . <RARE_TOKEN> , Values . <RARE_TOKEN> ) ; </a> 
<a> request . addHeader ( Names . <RARE_TOKEN> , key ) ; </a> 
<a> request . addHeader ( Names . <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> String <RARE_TOKEN> = <RARE_TOKEN> + <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> if ( <RARE_TOKEN> != 80 && <RARE_TOKEN> != <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> + <RARE_TOKEN> + <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> request . addHeader ( Names . <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> String <RARE_TOKEN> = <RARE_TOKEN> ( ) ; </a> 
<a> if ( <RARE_TOKEN> != null && ! <RARE_TOKEN> . equals ( "" ) ) { </a> 
<a> request . addHeader ( Names . <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> request . addHeader ( Names . <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> for ( String header : <RARE_TOKEN> . <RARE_TOKEN> ( ) ) { </a> 
<a> request . addHeader ( header , <RARE_TOKEN> . get ( header ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> ChannelFuture future = channel . write ( request ) ; </a> 
<a> channel . pipeline ( ) . <RARE_TOKEN> ( <RARE_TOKEN> . class , <RARE_TOKEN> , new <RARE_TOKEN> ( true ) ) ; </a> 
<a> return future ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( Channel channel , HttpResponse response ) throws <RARE_TOKEN> { </a> 
<a> final HttpResponseStatus status = HttpResponseStatus . <RARE_TOKEN> ; </a> 
<a> if ( ! response . getStatus ( ) . equals ( status ) ) { </a> 
<a> throw new <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> response <RARE_TOKEN> " + response . getStatus ( ) ) ; </a> 
<a> } </a> 
<a> String <RARE_TOKEN> = response . getHeader ( Names . <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> == null || ! <RARE_TOKEN> . equalsIgnoreCase ( Values . <RARE_TOKEN> ) ) { </a> 
<a> throw new <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> response <RARE_TOKEN> " </a> 
<a> + response . getHeader ( Names . <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> String connection = response . getHeader ( Names . <RARE_TOKEN> ) ; </a> 
<a> if ( connection == null || ! connection . equalsIgnoreCase ( Values . <RARE_TOKEN> ) ) { </a> 
<a> throw new <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> response <RARE_TOKEN> " </a> 
<a> + response . getHeader ( Names . <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> String <RARE_TOKEN> = response . getHeader ( Names . <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> == null || ! <RARE_TOKEN> . equals ( <RARE_TOKEN> ) ) { </a> 
<a> throw new <RARE_TOKEN> ( String . format ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> String <RARE_TOKEN> = response . getHeader ( Names . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> channel . pipeline ( ) . get ( <RARE_TOKEN> . class ) . <RARE_TOKEN> ( </a> 
<a> <RARE_TOKEN> , </a> 
<a> new <RARE_TOKEN> ( false , <RARE_TOKEN> , <RARE_TOKEN> ( ) ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . http . websocketx ; </a> 
<a> import java . net . URI ; </a> 
<a> import java . util . Map ; </a> 
<a> public class <RARE_TOKEN> { </a> 
<a> public <RARE_TOKEN> <RARE_TOKEN> ( </a> 
<a> URI <RARE_TOKEN> , <RARE_TOKEN> version , String <RARE_TOKEN> , </a> 
<a> boolean <RARE_TOKEN> , Map < String , String > <RARE_TOKEN> ) { </a> 
<a> return <RARE_TOKEN> ( <RARE_TOKEN> , version , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> <RARE_TOKEN> ( </a> 
<a> URI <RARE_TOKEN> , <RARE_TOKEN> version , String <RARE_TOKEN> , </a> 
<a> boolean <RARE_TOKEN> , Map < String , String > <RARE_TOKEN> , int <RARE_TOKEN> ) { </a> 
<a> if ( version == <RARE_TOKEN> . <RARE_TOKEN> ) { </a> 
<a> return new <RARE_TOKEN> ( </a> 
<a> <RARE_TOKEN> , version , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( version == <RARE_TOKEN> . <RARE_TOKEN> ) { </a> 
<a> return new <RARE_TOKEN> ( </a> 
<a> <RARE_TOKEN> , version , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( version == <RARE_TOKEN> . <RARE_TOKEN> ) { </a> 
<a> return new <RARE_TOKEN> ( </a> 
<a> <RARE_TOKEN> , version , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> throw new <RARE_TOKEN> ( <RARE_TOKEN> version " + version . toString ( ) + " not <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . http . websocketx ; </a> 
<a> public enum <RARE_TOKEN> { </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . http . websocketx ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> private static final long serialVersionUID = <RARE_TOKEN> ; </a> 
<a> public <RARE_TOKEN> ( String s ) { </a> 
<a> super ( s ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( String s , Throwable throwable ) { </a> 
<a> super ( s , throwable ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . http . websocketx ; </a> 
<a> import io . netty . channel . Channel ; </a> 
<a> import io . netty . channel . ChannelFuture ; </a> 
<a> import io . netty . handler . codec . http . HttpRequest ; </a> 
<a> import java . util . Collections ; </a> 
<a> import java . util . <RARE_TOKEN> ; </a> 
<a> import java . util . Set ; </a> 
<a> public abstract class <RARE_TOKEN> { </a> 
<a> private final String <RARE_TOKEN> ; </a> 
<a> private final String [ ] subprotocols ; </a> 
<a> private final <RARE_TOKEN> version ; </a> 
<a> private final int <RARE_TOKEN> ; </a> 
<a> private String <RARE_TOKEN> ; </a> 
<a> protected <RARE_TOKEN> ( </a> 
<a> <RARE_TOKEN> version , String <RARE_TOKEN> , String subprotocols , </a> 
<a> int <RARE_TOKEN> ) { </a> 
<a> this . version = version ; </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> if ( subprotocols != null ) { </a> 
<a> String [ ] <RARE_TOKEN> = subprotocols . split ( <RARE_TOKEN> ) ; </a> 
<a> for ( int i = 0 ; i < <RARE_TOKEN> . length ; i ++ ) { </a> 
<a> <RARE_TOKEN> [ i ] = <RARE_TOKEN> [ i ] . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> this . subprotocols = <RARE_TOKEN> ; </a> 
<a> } else { </a> 
<a> this . subprotocols = new String [ 0 ] ; </a> 
<a> } </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public String <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public Set < String > <RARE_TOKEN> ( ) { </a> 
<a> Set < String > <RARE_TOKEN> = new <RARE_TOKEN> < String > ( ) ; </a> 
<a> Collections . <RARE_TOKEN> ( <RARE_TOKEN> , subprotocols ) ; </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> <RARE_TOKEN> ( ) { </a> 
<a> return version ; </a> 
<a> } </a> 
<a> public int <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public abstract ChannelFuture <RARE_TOKEN> ( Channel channel , HttpRequest req ) ; </a> 
<a> public abstract ChannelFuture close ( Channel channel , <RARE_TOKEN> frame ) ; </a> 
<a> protected String <RARE_TOKEN> ( String <RARE_TOKEN> ) { </a> 
<a> if ( <RARE_TOKEN> == null || subprotocols . length == 0 ) { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> String [ ] <RARE_TOKEN> = <RARE_TOKEN> . split ( <RARE_TOKEN> ) ; </a> 
<a> for ( String p : <RARE_TOKEN> ) { </a> 
<a> String <RARE_TOKEN> = p . <RARE_TOKEN> ( ) ; </a> 
<a> for ( String <RARE_TOKEN> : subprotocols ) { </a> 
<a> if ( <RARE_TOKEN> . equals ( <RARE_TOKEN> ) ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> return null ; </a> 
<a> } </a> 
<a> public String <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> protected void <RARE_TOKEN> ( String value ) { </a> 
<a> <RARE_TOKEN> = value ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . http . websocketx ; </a> 
<a> import static io . netty . handler . codec . http . HttpHeaders . Names . * ; </a> 
<a> import static io . netty . handler . codec . http . HttpHeaders . Values . * ; </a> 
<a> import static io . netty . handler . codec . http . HttpVersion . * ; </a> 
<a> import io . netty . buffer . ByteBuf ; </a> 
<a> import io . netty . buffer . Unpooled ; </a> 
<a> import io . netty . channel . Channel ; </a> 
<a> import io . netty . channel . ChannelFuture ; </a> 
<a> import io . netty . channel . ChannelPipeline ; </a> 
<a> import io . netty . handler . codec . http . <RARE_TOKEN> ; </a> 
<a> import io . netty . handler . codec . http . <RARE_TOKEN> ; </a> 
<a> import io . netty . handler . codec . http . HttpHeaders . Names ; </a> 
<a> import io . netty . handler . codec . http . HttpHeaders . Values ; </a> 
<a> import io . netty . handler . codec . http . HttpRequest ; </a> 
<a> import io . netty . handler . codec . http . <RARE_TOKEN> ; </a> 
<a> import io . netty . handler . codec . http . HttpResponse ; </a> 
<a> import io . netty . handler . codec . http . <RARE_TOKEN> ; </a> 
<a> import io . netty . handler . codec . http . HttpResponseStatus ; </a> 
<a> import io . netty . logging . InternalLogger ; </a> 
<a> import io . netty . logging . InternalLoggerFactory ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> private static final InternalLogger logger = InternalLoggerFactory . getInstance ( <RARE_TOKEN> . class ) ; </a> 
<a> public <RARE_TOKEN> ( String <RARE_TOKEN> , String subprotocols , int <RARE_TOKEN> ) { </a> 
<a> super ( <RARE_TOKEN> . <RARE_TOKEN> , <RARE_TOKEN> , subprotocols , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ChannelFuture <RARE_TOKEN> ( Channel channel , HttpRequest req ) { </a> 
<a> if ( logger . isDebugEnabled ( ) ) { </a> 
<a> logger . debug ( String . format ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> server <RARE_TOKEN> , channel . id ( ) ) ) ; </a> 
<a> } </a> 
<a> if ( ! Values . <RARE_TOKEN> . equalsIgnoreCase ( req . getHeader ( <RARE_TOKEN> ) ) </a> 
<a> || ! <RARE_TOKEN> . equalsIgnoreCase ( req . getHeader ( Names . <RARE_TOKEN> ) ) ) { </a> 
<a> throw new <RARE_TOKEN> ( <RARE_TOKEN> a WebSocket <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> boolean <RARE_TOKEN> = req . <RARE_TOKEN> ( <RARE_TOKEN> ) && req . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> HttpResponse res = new <RARE_TOKEN> ( <RARE_TOKEN> , new HttpResponseStatus ( <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> ? <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> : <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ) ; </a> 
<a> res . addHeader ( Names . <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> res . addHeader ( <RARE_TOKEN> , Values . <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> ) { </a> 
<a> res . addHeader ( <RARE_TOKEN> , req . getHeader ( <RARE_TOKEN> ) ) ; </a> 
<a> res . addHeader ( <RARE_TOKEN> , <RARE_TOKEN> ( ) ) ; </a> 
<a> String subprotocols = req . getHeader ( Names . <RARE_TOKEN> ) ; </a> 
<a> if ( subprotocols != null ) { </a> 
<a> String <RARE_TOKEN> = <RARE_TOKEN> ( subprotocols ) ; </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> throw new <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> not <RARE_TOKEN> " + subprotocols ) ; </a> 
<a> } else { </a> 
<a> res . addHeader ( Names . <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> String <RARE_TOKEN> = req . getHeader ( <RARE_TOKEN> ) ; </a> 
<a> String <RARE_TOKEN> = req . getHeader ( <RARE_TOKEN> ) ; </a> 
<a> int a = ( int ) ( Long . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> , "" ) ) / <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> , "" ) . length ( ) ) ; </a> 
<a> int b = ( int ) ( Long . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> , "" ) ) / <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> , "" ) . length ( ) ) ; </a> 
<a> long c = req . getContent ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> ByteBuf input = Unpooled . buffer ( 16 ) ; </a> 
<a> input . writeInt ( a ) ; </a> 
<a> input . writeInt ( b ) ; </a> 
<a> input . <RARE_TOKEN> ( c ) ; </a> 
<a> ByteBuf output = Unpooled . wrappedBuffer ( <RARE_TOKEN> . <RARE_TOKEN> ( input . array ( ) ) ) ; </a> 
<a> res . <RARE_TOKEN> ( output ) ; </a> 
<a> } else { </a> 
<a> res . addHeader ( <RARE_TOKEN> , req . getHeader ( <RARE_TOKEN> ) ) ; </a> 
<a> res . addHeader ( <RARE_TOKEN> , <RARE_TOKEN> ( ) ) ; </a> 
<a> String <RARE_TOKEN> = req . getHeader ( <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> res . addHeader ( <RARE_TOKEN> , <RARE_TOKEN> ( <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> ChannelPipeline p = channel . pipeline ( ) ; </a> 
<a> if ( p . get ( <RARE_TOKEN> . class ) != null ) { </a> 
<a> p . remove ( <RARE_TOKEN> . class ) ; </a> 
<a> } </a> 
<a> p . <RARE_TOKEN> ( <RARE_TOKEN> . class , <RARE_TOKEN> , </a> 
<a> new <RARE_TOKEN> ( <RARE_TOKEN> ( ) ) ) ; </a> 
<a> ChannelFuture future = channel . write ( res ) ; </a> 
<a> p . <RARE_TOKEN> ( <RARE_TOKEN> . class , <RARE_TOKEN> , new <RARE_TOKEN> ( ) ) ; </a> 
<a> return future ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ChannelFuture close ( Channel channel , <RARE_TOKEN> frame ) { </a> 
<a> return channel . write ( frame ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . http . websocketx ; </a> 
<a> import static io . netty . handler . codec . http . HttpHeaders . Values . * ; </a> 
<a> import static io . netty . handler . codec . http . HttpVersion . * ; </a> 
<a> import io . netty . channel . Channel ; </a> 
<a> import io . netty . channel . ChannelFuture ; </a> 
<a> import io . netty . channel . ChannelFutureListener ; </a> 
<a> import io . netty . channel . ChannelPipeline ; </a> 
<a> import io . netty . handler . codec . http . <RARE_TOKEN> ; </a> 
<a> import io . netty . handler . codec . http . <RARE_TOKEN> ; </a> 
<a> import io . netty . handler . codec . http . HttpHeaders . Names ; </a> 
<a> import io . netty . handler . codec . http . HttpRequest ; </a> 
<a> import io . netty . handler . codec . http . <RARE_TOKEN> ; </a> 
<a> import io . netty . handler . codec . http . HttpResponse ; </a> 
<a> import io . netty . handler . codec . http . <RARE_TOKEN> ; </a> 
<a> import io . netty . handler . codec . http . HttpResponseStatus ; </a> 
<a> import io . netty . logging . InternalLogger ; </a> 
<a> import io . netty . logging . InternalLoggerFactory ; </a> 
<a> import io . netty . util . CharsetUtil ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> private static final InternalLogger logger = InternalLoggerFactory . getInstance ( <RARE_TOKEN> . class ) ; </a> 
<a> public static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private final boolean <RARE_TOKEN> ; </a> 
<a> public <RARE_TOKEN> ( </a> 
<a> String <RARE_TOKEN> , String subprotocols , boolean <RARE_TOKEN> , int <RARE_TOKEN> ) { </a> 
<a> super ( <RARE_TOKEN> . <RARE_TOKEN> , <RARE_TOKEN> , subprotocols , <RARE_TOKEN> ) ; </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ChannelFuture <RARE_TOKEN> ( Channel channel , HttpRequest req ) { </a> 
<a> if ( logger . isDebugEnabled ( ) ) { </a> 
<a> logger . debug ( String . format ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> 8 server <RARE_TOKEN> , channel . id ( ) ) ) ; </a> 
<a> } </a> 
<a> HttpResponse res = new <RARE_TOKEN> ( <RARE_TOKEN> , HttpResponseStatus . <RARE_TOKEN> ) ; </a> 
<a> String key = req . getHeader ( Names . <RARE_TOKEN> ) ; </a> 
<a> if ( key == null ) { </a> 
<a> throw new <RARE_TOKEN> ( <RARE_TOKEN> a WebSocket <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> String <RARE_TOKEN> = key + <RARE_TOKEN> ; </a> 
<a> byte [ ] <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> . getBytes ( CharsetUtil . <RARE_TOKEN> ) ) ; </a> 
<a> String <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> if ( logger . isDebugEnabled ( ) ) { </a> 
<a> logger . debug ( String . format ( <RARE_TOKEN> <RARE_TOKEN> 8 <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> , key , <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> res . <RARE_TOKEN> ( HttpResponseStatus . <RARE_TOKEN> ) ; </a> 
<a> res . addHeader ( Names . <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> res . addHeader ( Names . <RARE_TOKEN> , Names . <RARE_TOKEN> ) ; </a> 
<a> res . addHeader ( Names . <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> String subprotocols = req . getHeader ( Names . <RARE_TOKEN> ) ; </a> 
<a> if ( subprotocols != null ) { </a> 
<a> String <RARE_TOKEN> = <RARE_TOKEN> ( subprotocols ) ; </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> throw new <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> not <RARE_TOKEN> " + subprotocols ) ; </a> 
<a> } else { </a> 
<a> res . addHeader ( Names . <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> ChannelFuture future = channel . write ( res ) ; </a> 
<a> ChannelPipeline p = channel . pipeline ( ) ; </a> 
<a> if ( p . get ( <RARE_TOKEN> . class ) != null ) { </a> 
<a> p . remove ( <RARE_TOKEN> . class ) ; </a> 
<a> } </a> 
<a> p . <RARE_TOKEN> ( <RARE_TOKEN> . class , <RARE_TOKEN> , </a> 
<a> new <RARE_TOKEN> ( true , <RARE_TOKEN> , <RARE_TOKEN> ( ) ) ) ; </a> 
<a> p . <RARE_TOKEN> ( <RARE_TOKEN> . class , <RARE_TOKEN> , new <RARE_TOKEN> ( false ) ) ; </a> 
<a> return future ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ChannelFuture close ( Channel channel , <RARE_TOKEN> frame ) { </a> 
<a> ChannelFuture f = channel . write ( frame ) ; </a> 
<a> f . addListener ( ChannelFutureListener . <RARE_TOKEN> ) ; </a> 
<a> return f ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . http . websocketx ; </a> 
<a> import static io . netty . handler . codec . http . HttpHeaders . Values . * ; </a> 
<a> import static io . netty . handler . codec . http . HttpVersion . * ; </a> 
<a> import io . netty . channel . Channel ; </a> 
<a> import io . netty . channel . ChannelFuture ; </a> 
<a> import io . netty . channel . ChannelFutureListener ; </a> 
<a> import io . netty . channel . ChannelPipeline ; </a> 
<a> import io . netty . handler . codec . http . <RARE_TOKEN> ; </a> 
<a> import io . netty . handler . codec . http . <RARE_TOKEN> ; </a> 
<a> import io . netty . handler . codec . http . HttpHeaders . Names ; </a> 
<a> import io . netty . handler . codec . http . HttpRequest ; </a> 
<a> import io . netty . handler . codec . http . <RARE_TOKEN> ; </a> 
<a> import io . netty . handler . codec . http . HttpResponse ; </a> 
<a> import io . netty . handler . codec . http . <RARE_TOKEN> ; </a> 
<a> import io . netty . handler . codec . http . HttpResponseStatus ; </a> 
<a> import io . netty . logging . InternalLogger ; </a> 
<a> import io . netty . logging . InternalLoggerFactory ; </a> 
<a> import io . netty . util . CharsetUtil ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> private static final InternalLogger logger = InternalLoggerFactory . getInstance ( <RARE_TOKEN> . class ) ; </a> 
<a> public static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private final boolean <RARE_TOKEN> ; </a> 
<a> public <RARE_TOKEN> ( </a> 
<a> String <RARE_TOKEN> , String subprotocols , boolean <RARE_TOKEN> , int <RARE_TOKEN> ) { </a> 
<a> super ( <RARE_TOKEN> . <RARE_TOKEN> , <RARE_TOKEN> , subprotocols , <RARE_TOKEN> ) ; </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ChannelFuture <RARE_TOKEN> ( Channel channel , HttpRequest req ) { </a> 
<a> if ( logger . isDebugEnabled ( ) ) { </a> 
<a> logger . debug ( String . format ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> 13 server <RARE_TOKEN> , channel . id ( ) ) ) ; </a> 
<a> } </a> 
<a> HttpResponse res = new <RARE_TOKEN> ( <RARE_TOKEN> , HttpResponseStatus . <RARE_TOKEN> ) ; </a> 
<a> String key = req . getHeader ( Names . <RARE_TOKEN> ) ; </a> 
<a> if ( key == null ) { </a> 
<a> throw new <RARE_TOKEN> ( <RARE_TOKEN> a WebSocket <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> String <RARE_TOKEN> = key + <RARE_TOKEN> ; </a> 
<a> byte [ ] <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> . getBytes ( CharsetUtil . <RARE_TOKEN> ) ) ; </a> 
<a> String <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> if ( logger . isDebugEnabled ( ) ) { </a> 
<a> logger . debug ( String . format ( <RARE_TOKEN> <RARE_TOKEN> 13 <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> , key , <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> res . <RARE_TOKEN> ( HttpResponseStatus . <RARE_TOKEN> ) ; </a> 
<a> res . addHeader ( Names . <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> res . addHeader ( Names . <RARE_TOKEN> , Names . <RARE_TOKEN> ) ; </a> 
<a> res . addHeader ( Names . <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> String subprotocols = req . getHeader ( Names . <RARE_TOKEN> ) ; </a> 
<a> if ( subprotocols != null ) { </a> 
<a> String <RARE_TOKEN> = <RARE_TOKEN> ( subprotocols ) ; </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> throw new <RARE_TOKEN> ( </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> not <RARE_TOKEN> " + subprotocols ) ; </a> 
<a> } else { </a> 
<a> res . addHeader ( Names . <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> ChannelFuture future = channel . write ( res ) ; </a> 
<a> ChannelPipeline p = channel . pipeline ( ) ; </a> 
<a> if ( p . get ( <RARE_TOKEN> . class ) != null ) { </a> 
<a> p . remove ( <RARE_TOKEN> . class ) ; </a> 
<a> } </a> 
<a> p . <RARE_TOKEN> ( <RARE_TOKEN> . class , <RARE_TOKEN> , </a> 
<a> new <RARE_TOKEN> ( true , <RARE_TOKEN> , <RARE_TOKEN> ( ) ) ) ; </a> 
<a> p . <RARE_TOKEN> ( <RARE_TOKEN> . class , <RARE_TOKEN> , new <RARE_TOKEN> ( false ) ) ; </a> 
<a> return future ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ChannelFuture close ( Channel channel , <RARE_TOKEN> frame ) { </a> 
<a> ChannelFuture f = channel . write ( frame ) ; </a> 
<a> f . addListener ( ChannelFutureListener . <RARE_TOKEN> ) ; </a> 
<a> return f ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . http . websocketx ; </a> 
<a> import io . netty . channel . Channel ; </a> 
<a> import io . netty . handler . codec . http . <RARE_TOKEN> ; </a> 
<a> import io . netty . handler . codec . http . HttpHeaders . Names ; </a> 
<a> import io . netty . handler . codec . http . HttpRequest ; </a> 
<a> import io . netty . handler . codec . http . HttpResponse ; </a> 
<a> import io . netty . handler . codec . http . HttpResponseStatus ; </a> 
<a> import io . netty . handler . codec . http . HttpVersion ; </a> 
<a> public class <RARE_TOKEN> { </a> 
<a> private final String <RARE_TOKEN> ; </a> 
<a> private final String subprotocols ; </a> 
<a> private final boolean <RARE_TOKEN> ; </a> 
<a> private final int <RARE_TOKEN> ; </a> 
<a> public <RARE_TOKEN> ( </a> 
<a> String <RARE_TOKEN> , String subprotocols , boolean <RARE_TOKEN> ) { </a> 
<a> this ( <RARE_TOKEN> , subprotocols , <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( </a> 
<a> String <RARE_TOKEN> , String subprotocols , boolean <RARE_TOKEN> , </a> 
<a> int <RARE_TOKEN> ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> this . subprotocols = subprotocols ; </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> <RARE_TOKEN> ( HttpRequest req ) { </a> 
<a> String version = req . getHeader ( Names . <RARE_TOKEN> ) ; </a> 
<a> if ( version != null ) { </a> 
<a> if ( version . equals ( <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ) { </a> 
<a> return new <RARE_TOKEN> ( </a> 
<a> <RARE_TOKEN> , subprotocols , <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } else if ( version . equals ( <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ) { </a> 
<a> return new <RARE_TOKEN> ( </a> 
<a> <RARE_TOKEN> , subprotocols , <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } else { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> } else { </a> 
<a> return new <RARE_TOKEN> ( <RARE_TOKEN> , subprotocols , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( Channel channel ) { </a> 
<a> HttpResponse res = new <RARE_TOKEN> ( </a> 
<a> HttpVersion . <RARE_TOKEN> , </a> 
<a> HttpResponseStatus . <RARE_TOKEN> ) ; </a> 
<a> res . <RARE_TOKEN> ( HttpResponseStatus . <RARE_TOKEN> ) ; </a> 
<a> res . setHeader ( Names . <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> channel . write ( res ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . http . websocketx ; </a> 
<a> import io . netty . buffer . ByteBuf ; </a> 
<a> import io . netty . buffer . Unpooled ; </a> 
<a> import io . netty . handler . codec . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import io . netty . util . CharsetUtil ; </a> 
<a> import java . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import java . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> final class <RARE_TOKEN> { </a> 
<a> static byte [ ] <RARE_TOKEN> ( byte [ ] data ) { </a> 
<a> try { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = <RARE_TOKEN> . getInstance ( <RARE_TOKEN> ) ; </a> 
<a> return <RARE_TOKEN> . <RARE_TOKEN> ( data ) ; </a> 
<a> } catch ( <RARE_TOKEN> e ) { </a> 
<a> throw new <RARE_TOKEN> ( <RARE_TOKEN> not <RARE_TOKEN> <RARE_TOKEN> this <RARE_TOKEN> - <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> static byte [ ] <RARE_TOKEN> ( byte [ ] data ) { </a> 
<a> try { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = <RARE_TOKEN> . getInstance ( <RARE_TOKEN> ) ; </a> 
<a> return <RARE_TOKEN> . <RARE_TOKEN> ( data ) ; </a> 
<a> } catch ( <RARE_TOKEN> e ) { </a> 
<a> throw new <RARE_TOKEN> ( <RARE_TOKEN> is not <RARE_TOKEN> <RARE_TOKEN> this <RARE_TOKEN> - <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> static String <RARE_TOKEN> ( byte [ ] data ) { </a> 
<a> ByteBuf <RARE_TOKEN> = Unpooled . wrappedBuffer ( data ) ; </a> 
<a> return <RARE_TOKEN> . encode ( <RARE_TOKEN> ) . toString ( CharsetUtil . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> static byte [ ] <RARE_TOKEN> ( int size ) { </a> 
<a> byte [ ] bytes = new byte [ size ] ; </a> 
<a> for ( int index = 0 ; index < size ; index ++ ) { </a> 
<a> bytes [ index ] = ( byte ) <RARE_TOKEN> ( 0 , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> return bytes ; </a> 
<a> } </a> 
<a> static int <RARE_TOKEN> ( int <RARE_TOKEN> , int <RARE_TOKEN> ) { </a> 
<a> return ( int ) ( Math . random ( ) * <RARE_TOKEN> + <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> private <RARE_TOKEN> ( ) { </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . http . websocketx ; </a> 
<a> public enum <RARE_TOKEN> { </a> 
<a> <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> ; </a> 
<a> public String <RARE_TOKEN> ( ) { </a> 
<a> if ( this == <RARE_TOKEN> ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } else if ( this == <RARE_TOKEN> ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } else if ( this == <RARE_TOKEN> ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> throw new IllegalStateException ( <RARE_TOKEN> <RARE_TOKEN> socket <RARE_TOKEN> " + this ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . http . websocketx ; </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . <RARE_TOKEN> ; </a> 
<a> import io . netty . handler . codec . http . HttpHeaders ; </a> 
<a> public final class <RARE_TOKEN> { </a> 
<a> public static final class Names { </a> 
<a> public static final String <RARE_TOKEN> = HttpHeaders . Names . <RARE_TOKEN> ; </a> 
<a> public static final String <RARE_TOKEN> = HttpHeaders . Names . <RARE_TOKEN> ; </a> 
<a> public static final String <RARE_TOKEN> = HttpHeaders . Names . <RARE_TOKEN> ; </a> 
<a> public static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> public static final String <RARE_TOKEN> = HttpHeaders . Names . <RARE_TOKEN> ; </a> 
<a> public static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> public static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> public static final String <RARE_TOKEN> = HttpHeaders . Names . <RARE_TOKEN> ; </a> 
<a> public static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> public static final String <RARE_TOKEN> = HttpHeaders . Names . <RARE_TOKEN> ; </a> 
<a> public static final String <RARE_TOKEN> = HttpHeaders . Names . <RARE_TOKEN> ; </a> 
<a> public static final String <RARE_TOKEN> = HttpHeaders . Names . <RARE_TOKEN> ; </a> 
<a> public static final String <RARE_TOKEN> = HttpHeaders . Names . <RARE_TOKEN> ; </a> 
<a> public static final String <RARE_TOKEN> = HttpHeaders . Names . <RARE_TOKEN> ; </a> 
<a> public static final String <RARE_TOKEN> = HttpHeaders . Names . <RARE_TOKEN> ; </a> 
<a> public static final String <RARE_TOKEN> = HttpHeaders . Names . <RARE_TOKEN> ; </a> 
<a> public static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> public static final String <RARE_TOKEN> = HttpHeaders . Names . <RARE_TOKEN> ; </a> 
<a> public static final String <RARE_TOKEN> = HttpHeaders . Names . <RARE_TOKEN> ; </a> 
<a> public static final String <RARE_TOKEN> = HttpHeaders . Names . <RARE_TOKEN> ; </a> 
<a> public static final String <RARE_TOKEN> = HttpHeaders . Names . <RARE_TOKEN> ; </a> 
<a> public static final String <RARE_TOKEN> = HttpHeaders . Names . <RARE_TOKEN> ; </a> 
<a> public static final String <RARE_TOKEN> = HttpHeaders . Names . <RARE_TOKEN> ; </a> 
<a> public static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> public static final String <RARE_TOKEN> = HttpHeaders . Names . <RARE_TOKEN> ; </a> 
<a> public static final String <RARE_TOKEN> = HttpHeaders . Names . <RARE_TOKEN> ; </a> 
<a> public static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> public static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> public static final String <RARE_TOKEN> = HttpHeaders . Names . <RARE_TOKEN> ; </a> 
<a> public static final String <RARE_TOKEN> = HttpHeaders . Names . <RARE_TOKEN> ; </a> 
<a> public static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> public static final String <RARE_TOKEN> = HttpHeaders . Names . <RARE_TOKEN> ; </a> 
<a> public static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> public static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> public static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> public static final String <RARE_TOKEN> = HttpHeaders . Names . <RARE_TOKEN> ; </a> 
<a> public static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> public static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> public static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> public static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> public static final String <RARE_TOKEN> = HttpHeaders . Names . <RARE_TOKEN> ; </a> 
<a> public static final String <RARE_TOKEN> = HttpHeaders . Names . <RARE_TOKEN> ; </a> 
<a> public static final String <RARE_TOKEN> = HttpHeaders . Names . <RARE_TOKEN> ; </a> 
<a> public static final String <RARE_TOKEN> = HttpHeaders . Names . <RARE_TOKEN> ; </a> 
<a> private Names ( ) { </a> 
<a> } </a> 
<a> } </a> 
<a> public static final class Values { </a> 
<a> public static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> public static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> public static final String <RARE_TOKEN> = HttpHeaders . Values . <RARE_TOKEN> ; </a> 
<a> public static final String <RARE_TOKEN> = HttpHeaders . Values . <RARE_TOKEN> ; </a> 
<a> public static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> public static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> public static final String <RARE_TOKEN> = HttpHeaders . Values . <RARE_TOKEN> ; </a> 
<a> public static final String <RARE_TOKEN> = HttpHeaders . Values . <RARE_TOKEN> ; </a> 
<a> public static final String <RARE_TOKEN> = HttpHeaders . Values . <RARE_TOKEN> ; </a> 
<a> public static final String <RARE_TOKEN> = HttpHeaders . Values . <RARE_TOKEN> ; </a> 
<a> public static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> public static final String <RARE_TOKEN> = HttpHeaders . Values . <RARE_TOKEN> ; </a> 
<a> public static final String <RARE_TOKEN> = HttpHeaders . Values . <RARE_TOKEN> ; </a> 
<a> public static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> public static final String <RARE_TOKEN> = HttpHeaders . Values . <RARE_TOKEN> ; </a> 
<a> public static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> public static final String <RARE_TOKEN> = HttpHeaders . Values . <RARE_TOKEN> ; </a> 
<a> public static final String <RARE_TOKEN> = HttpHeaders . Values . <RARE_TOKEN> ; </a> 
<a> public static final String <RARE_TOKEN> = HttpHeaders . Values . <RARE_TOKEN> ; </a> 
<a> public static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> public static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> public static final String <RARE_TOKEN> = HttpHeaders . Values . <RARE_TOKEN> ; </a> 
<a> public static final String <RARE_TOKEN> = HttpHeaders . Values . <RARE_TOKEN> ; </a> 
<a> public static final String <RARE_TOKEN> = HttpHeaders . Values . <RARE_TOKEN> ; </a> 
<a> public static final String <RARE_TOKEN> = HttpHeaders . Values . <RARE_TOKEN> ; </a> 
<a> public static final String <RARE_TOKEN> = HttpHeaders . Values . <RARE_TOKEN> ; </a> 
<a> public static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> public static final String <RARE_TOKEN> = HttpHeaders . Values . <RARE_TOKEN> ; </a> 
<a> public static final String <RARE_TOKEN> = HttpHeaders . Values . <RARE_TOKEN> ; </a> 
<a> public static final String <RARE_TOKEN> = HttpHeaders . Values . <RARE_TOKEN> ; </a> 
<a> public static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> public static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> public static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> public static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> public static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> public static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> public static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> public static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> public static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> public static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> public static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> public static final String URL = <RARE_TOKEN> ; </a> 
<a> private Values ( ) { } </a> 
<a> } </a> 
<a> private <RARE_TOKEN> ( ) { } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . <RARE_TOKEN> ; </a> 
<a> import io . netty . buffer . ByteBuf ; </a> 
<a> import io . netty . channel . ChannelHandlerContext ; </a> 
<a> import io . netty . channel . embedded . <RARE_TOKEN> ; </a> 
<a> import io . netty . handler . codec . TooLongFrameException ; </a> 
<a> import io . netty . handler . codec . http . <RARE_TOKEN> ; </a> 
<a> import io . netty . handler . codec . http . HttpMessage ; </a> 
<a> import io . netty . handler . codec . http . <RARE_TOKEN> ; </a> 
<a> public abstract class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> private final <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> protected <RARE_TOKEN> ( ) { </a> 
<a> this ( <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> protected <RARE_TOKEN> ( int <RARE_TOKEN> , int maxHeaderSize , int <RARE_TOKEN> ) { </a> 
<a> super ( <RARE_TOKEN> , maxHeaderSize , <RARE_TOKEN> * 2 ) ; </a> 
<a> <RARE_TOKEN> = new <RARE_TOKEN> ( new <RARE_TOKEN> ( <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public Object decode ( ChannelHandlerContext ctx , ByteBuf buffer ) throws Exception { </a> 
<a> Object o = super . decode ( ctx , buffer ) ; </a> 
<a> if ( o != null && <RARE_TOKEN> . writeInbound ( o ) ) { </a> 
<a> return <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> } else { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected boolean <RARE_TOKEN> ( HttpMessage msg ) { </a> 
<a> boolean <RARE_TOKEN> = super . <RARE_TOKEN> ( msg ) ; </a> 
<a> if ( <RARE_TOKEN> ) { </a> 
<a> return true ; </a> 
<a> } </a> 
<a> if ( ! msg . <RARE_TOKEN> ( <RARE_TOKEN> . Names . <RARE_TOKEN> ) ) { </a> 
<a> return true ; </a> 
<a> } </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . <RARE_TOKEN> ; </a> 
<a> import io . netty . buffer . ByteBuf ; </a> 
<a> import io . netty . channel . ChannelHandler . Sharable ; </a> 
<a> import io . netty . channel . ChannelHandlerContext ; </a> 
<a> import io . netty . handler . codec . <RARE_TOKEN> ; </a> 
<a> import io . netty . handler . codec . http . HttpMessage ; </a> 
<a> import io . netty . handler . codec . http . <RARE_TOKEN> ; </a> 
<a> @ Sharable </a> 
<a> public abstract class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> protected <RARE_TOKEN> ( ) { </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void encode ( ChannelHandlerContext ctx , Object msg , </a> 
<a> ByteBuf out ) throws Exception { </a> 
<a> if ( ! ( msg instanceof HttpMessage ) ) { </a> 
<a> throw new <RARE_TOKEN> ( msg , HttpMessage . class ) ; </a> 
<a> } </a> 
<a> super . encode ( ctx , msg , out ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . <RARE_TOKEN> ; </a> 
<a> import io . netty . handler . codec . http . HttpMethod ; </a> 
<a> import java . util . HashMap ; </a> 
<a> import java . util . Map ; </a> 
<a> public final class <RARE_TOKEN> { </a> 
<a> public static final HttpMethod <RARE_TOKEN> = HttpMethod . <RARE_TOKEN> ; </a> 
<a> public static final HttpMethod <RARE_TOKEN> = new HttpMethod ( <RARE_TOKEN> ) ; </a> 
<a> public static final HttpMethod <RARE_TOKEN> = new HttpMethod ( <RARE_TOKEN> ) ; </a> 
<a> public static final HttpMethod <RARE_TOKEN> = new HttpMethod ( <RARE_TOKEN> ) ; </a> 
<a> public static final HttpMethod <RARE_TOKEN> = new HttpMethod ( <RARE_TOKEN> ) ; </a> 
<a> public static final HttpMethod <RARE_TOKEN> = new HttpMethod ( <RARE_TOKEN> ) ; </a> 
<a> public static final HttpMethod <RARE_TOKEN> = new HttpMethod ( <RARE_TOKEN> ) ; </a> 
<a> public static final HttpMethod <RARE_TOKEN> = new HttpMethod ( <RARE_TOKEN> ) ; </a> 
<a> public static final HttpMethod <RARE_TOKEN> = new HttpMethod ( <RARE_TOKEN> ) ; </a> 
<a> public static final HttpMethod <RARE_TOKEN> = new HttpMethod ( <RARE_TOKEN> ) ; </a> 
<a> public static final HttpMethod <RARE_TOKEN> = new HttpMethod ( <RARE_TOKEN> ) ; </a> 
<a> private static final Map < String , HttpMethod > <RARE_TOKEN> = new HashMap < String , HttpMethod > ( ) ; </a> 
<a> static { </a> 
<a> <RARE_TOKEN> . put ( <RARE_TOKEN> . toString ( ) , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . put ( <RARE_TOKEN> . toString ( ) , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . put ( <RARE_TOKEN> . toString ( ) , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . put ( <RARE_TOKEN> . toString ( ) , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . put ( <RARE_TOKEN> . toString ( ) , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . put ( <RARE_TOKEN> . toString ( ) , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . put ( <RARE_TOKEN> . toString ( ) , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . put ( <RARE_TOKEN> . toString ( ) , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . put ( <RARE_TOKEN> . toString ( ) , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . put ( <RARE_TOKEN> . toString ( ) , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . put ( <RARE_TOKEN> . toString ( ) , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public static HttpMethod valueOf ( String name ) { </a> 
<a> if ( name == null ) { </a> 
<a> throw new NullPointerException ( "name" ) ; </a> 
<a> } </a> 
<a> name = name . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> if ( name . length ( ) == 0 ) { </a> 
<a> throw new IllegalArgumentException ( <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> HttpMethod result = <RARE_TOKEN> . get ( name ) ; </a> 
<a> if ( result != null ) { </a> 
<a> return result ; </a> 
<a> } else { </a> 
<a> return new HttpMethod ( name ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private <RARE_TOKEN> ( ) { </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . <RARE_TOKEN> ; </a> 
<a> import io . netty . buffer . ByteBuf ; </a> 
<a> import io . netty . handler . codec . TooLongFrameException ; </a> 
<a> import io . netty . handler . codec . http . <RARE_TOKEN> ; </a> 
<a> import io . netty . handler . codec . http . HttpMessage ; </a> 
<a> import io . netty . handler . codec . http . HttpRequest ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> public <RARE_TOKEN> ( ) { </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( int <RARE_TOKEN> , int maxHeaderSize , int <RARE_TOKEN> ) { </a> 
<a> super ( <RARE_TOKEN> , maxHeaderSize , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected HttpMessage <RARE_TOKEN> ( String [ ] <RARE_TOKEN> ) throws Exception { </a> 
<a> return new <RARE_TOKEN> ( <RARE_TOKEN> . valueOf ( <RARE_TOKEN> [ 2 ] ) , </a> 
<a> <RARE_TOKEN> . valueOf ( <RARE_TOKEN> [ 0 ] ) , <RARE_TOKEN> [ 1 ] ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected boolean <RARE_TOKEN> ( ) { </a> 
<a> return true ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . <RARE_TOKEN> ; </a> 
<a> import io . netty . buffer . ByteBuf ; </a> 
<a> import io . netty . handler . codec . http . HttpMessage ; </a> 
<a> import io . netty . handler . codec . http . HttpRequest ; </a> 
<a> import io . netty . util . CharsetUtil ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( ByteBuf buf , HttpMessage message ) </a> 
<a> throws Exception { </a> 
<a> HttpRequest request = ( HttpRequest ) message ; </a> 
<a> buf . writeBytes ( request . <RARE_TOKEN> ( ) . toString ( ) . getBytes ( CharsetUtil . <RARE_TOKEN> ) ) ; </a> 
<a> buf . writeByte ( ( byte ) ' ' ) ; </a> 
<a> buf . writeBytes ( request . <RARE_TOKEN> ( ) . getBytes ( CharsetUtil . <RARE_TOKEN> ) ) ; </a> 
<a> buf . writeByte ( ( byte ) ' ' ) ; </a> 
<a> buf . writeBytes ( request . <RARE_TOKEN> ( ) . toString ( ) . getBytes ( CharsetUtil . <RARE_TOKEN> ) ) ; </a> 
<a> buf . writeByte ( ( byte ) <RARE_TOKEN> ) ; </a> 
<a> buf . writeByte ( ( byte ) <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . <RARE_TOKEN> ; </a> 
<a> import io . netty . buffer . ByteBuf ; </a> 
<a> import io . netty . handler . codec . TooLongFrameException ; </a> 
<a> import io . netty . handler . codec . http . <RARE_TOKEN> ; </a> 
<a> import io . netty . handler . codec . http . HttpMessage ; </a> 
<a> import io . netty . handler . codec . http . HttpResponse ; </a> 
<a> import io . netty . handler . codec . http . HttpResponseStatus ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> public <RARE_TOKEN> ( ) { </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( int <RARE_TOKEN> , int maxHeaderSize , </a> 
<a> int <RARE_TOKEN> ) { </a> 
<a> super ( <RARE_TOKEN> , maxHeaderSize , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected HttpMessage <RARE_TOKEN> ( String [ ] <RARE_TOKEN> ) throws Exception { </a> 
<a> return new <RARE_TOKEN> ( </a> 
<a> <RARE_TOKEN> . valueOf ( <RARE_TOKEN> [ 0 ] ) , </a> 
<a> new HttpResponseStatus ( Integer . valueOf ( <RARE_TOKEN> [ 1 ] ) , <RARE_TOKEN> [ 2 ] ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected boolean <RARE_TOKEN> ( ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . <RARE_TOKEN> ; </a> 
<a> import io . netty . buffer . ByteBuf ; </a> 
<a> import io . netty . handler . codec . http . HttpMessage ; </a> 
<a> import io . netty . handler . codec . http . HttpResponse ; </a> 
<a> import io . netty . util . CharsetUtil ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( ByteBuf buf , HttpMessage message ) </a> 
<a> throws Exception { </a> 
<a> HttpResponse response = ( HttpResponse ) message ; </a> 
<a> buf . writeBytes ( response . <RARE_TOKEN> ( ) . toString ( ) . getBytes ( CharsetUtil . <RARE_TOKEN> ) ) ; </a> 
<a> buf . writeByte ( ( byte ) ' ' ) ; </a> 
<a> buf . writeBytes ( String . valueOf ( response . getStatus ( ) . <RARE_TOKEN> ( ) ) . getBytes ( CharsetUtil . <RARE_TOKEN> ) ) ; </a> 
<a> buf . writeByte ( ( byte ) ' ' ) ; </a> 
<a> buf . writeBytes ( String . valueOf ( response . getStatus ( ) . <RARE_TOKEN> ( ) ) . getBytes ( CharsetUtil . <RARE_TOKEN> ) ) ; </a> 
<a> buf . writeByte ( ( byte ) <RARE_TOKEN> ) ; </a> 
<a> buf . writeByte ( ( byte ) <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . <RARE_TOKEN> ; </a> 
<a> import io . netty . handler . codec . http . HttpVersion ; </a> 
<a> public final class <RARE_TOKEN> { </a> 
<a> public static final HttpVersion <RARE_TOKEN> = new HttpVersion ( <RARE_TOKEN> , 1 , 0 , true ) ; </a> 
<a> public static HttpVersion valueOf ( String text ) { </a> 
<a> if ( text == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> text = text . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> if ( text . equals ( <RARE_TOKEN> ) ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> return new HttpVersion ( text , true ) ; </a> 
<a> } </a> 
<a> private <RARE_TOKEN> ( ) { </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . <RARE_TOKEN> ; </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . spdy ; </a> 
<a> import io . netty . util . internal . StringUtil ; </a> 
<a> public class <RARE_TOKEN> implements <RARE_TOKEN> { </a> 
<a> private int <RARE_TOKEN> ; </a> 
<a> private <RARE_TOKEN> status ; </a> 
<a> public <RARE_TOKEN> ( int <RARE_TOKEN> ) { </a> 
<a> this ( <RARE_TOKEN> , 0 ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( int <RARE_TOKEN> , int statusCode ) { </a> 
<a> this ( <RARE_TOKEN> , <RARE_TOKEN> . valueOf ( statusCode ) ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( int <RARE_TOKEN> , <RARE_TOKEN> status ) { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( status ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( int <RARE_TOKEN> ) { </a> 
<a> if ( <RARE_TOKEN> < 0 ) { </a> 
<a> throw new IllegalArgumentException ( <RARE_TOKEN> </a> 
<a> + " <RARE_TOKEN> be <RARE_TOKEN> " + <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public <RARE_TOKEN> getStatus ( ) { </a> 
<a> return status ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( <RARE_TOKEN> status ) { </a> 
<a> this . status = status ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public String toString ( ) { </a> 
<a> StringBuilder buf = new StringBuilder ( ) ; </a> 
<a> buf . append ( getClass ( ) . getSimpleName ( ) ) ; </a> 
<a> buf . append ( StringUtil . NEWLINE ) ; </a> 
<a> buf . append ( <RARE_TOKEN> <RARE_TOKEN> = " ) ; </a> 
<a> buf . append ( <RARE_TOKEN> ) ; </a> 
<a> buf . append ( StringUtil . NEWLINE ) ; </a> 
<a> buf . append ( <RARE_TOKEN> <RARE_TOKEN> " ) ; </a> 
<a> buf . append ( status . toString ( ) ) ; </a> 
<a> return buf . toString ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . spdy ; </a> 
<a> import io . netty . util . internal . StringUtil ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> </a> 
<a> implements <RARE_TOKEN> { </a> 
<a> private int streamId ; </a> 
<a> private boolean last ; </a> 
<a> public <RARE_TOKEN> ( int streamId ) { </a> 
<a> <RARE_TOKEN> ( streamId ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int getStreamId ( ) { </a> 
<a> return streamId ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( int streamId ) { </a> 
<a> if ( streamId <= 0 ) { </a> 
<a> throw new IllegalArgumentException ( </a> 
<a> <RARE_TOKEN> must be <RARE_TOKEN> " + streamId ) ; </a> 
<a> } </a> 
<a> this . streamId = streamId ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean isLast ( ) { </a> 
<a> return last ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( boolean last ) { </a> 
<a> this . last = last ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public String toString ( ) { </a> 
<a> StringBuilder buf = new StringBuilder ( ) ; </a> 
<a> buf . append ( getClass ( ) . getSimpleName ( ) ) ; </a> 
<a> buf . append ( <RARE_TOKEN> " ) ; </a> 
<a> buf . append ( isLast ( ) ) ; </a> 
<a> buf . append ( <RARE_TOKEN> ) ; </a> 
<a> buf . append ( StringUtil . NEWLINE ) ; </a> 
<a> buf . append ( <RARE_TOKEN> <RARE_TOKEN> = " ) ; </a> 
<a> buf . append ( streamId ) ; </a> 
<a> buf . append ( StringUtil . NEWLINE ) ; </a> 
<a> buf . append ( <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> buf . append ( StringUtil . NEWLINE ) ; </a> 
<a> <RARE_TOKEN> ( buf ) ; </a> 
<a> buf . <RARE_TOKEN> ( buf . length ( ) - StringUtil . NEWLINE . length ( ) ) ; </a> 
<a> return buf . toString ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . spdy ; </a> 
<a> public class <RARE_TOKEN> implements <RARE_TOKEN> { </a> 
<a> public <RARE_TOKEN> ( ) { </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public String toString ( ) { </a> 
<a> return getClass ( ) . getSimpleName ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . spdy ; </a> 
<a> import io . netty . util . internal . StringUtil ; </a> 
<a> public class <RARE_TOKEN> implements <RARE_TOKEN> { </a> 
<a> private int id ; </a> 
<a> public <RARE_TOKEN> ( int id ) { </a> 
<a> <RARE_TOKEN> ( id ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int getId ( ) { </a> 
<a> return id ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( int id ) { </a> 
<a> this . id = id ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public String toString ( ) { </a> 
<a> StringBuilder buf = new StringBuilder ( ) ; </a> 
<a> buf . append ( getClass ( ) . getSimpleName ( ) ) ; </a> 
<a> buf . append ( StringUtil . NEWLINE ) ; </a> 
<a> buf . append ( <RARE_TOKEN> ID = " ) ; </a> 
<a> buf . append ( id ) ; </a> 
<a> return buf . toString ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . spdy ; </a> 
<a> import io . netty . util . internal . StringUtil ; </a> 
<a> public class <RARE_TOKEN> implements <RARE_TOKEN> { </a> 
<a> private int streamId ; </a> 
<a> private SpdyStreamStatus status ; </a> 
<a> public <RARE_TOKEN> ( int streamId , int statusCode ) { </a> 
<a> this ( streamId , SpdyStreamStatus . valueOf ( statusCode ) ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( int streamId , SpdyStreamStatus status ) { </a> 
<a> <RARE_TOKEN> ( streamId ) ; </a> 
<a> <RARE_TOKEN> ( status ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int getStreamId ( ) { </a> 
<a> return streamId ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( int streamId ) { </a> 
<a> if ( streamId <= 0 ) { </a> 
<a> throw new IllegalArgumentException ( </a> 
<a> <RARE_TOKEN> must be <RARE_TOKEN> " + streamId ) ; </a> 
<a> } </a> 
<a> this . streamId = streamId ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public SpdyStreamStatus getStatus ( ) { </a> 
<a> return status ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( SpdyStreamStatus status ) { </a> 
<a> this . status = status ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public String toString ( ) { </a> 
<a> StringBuilder buf = new StringBuilder ( ) ; </a> 
<a> buf . append ( getClass ( ) . getSimpleName ( ) ) ; </a> 
<a> buf . append ( StringUtil . NEWLINE ) ; </a> 
<a> buf . append ( <RARE_TOKEN> <RARE_TOKEN> = " ) ; </a> 
<a> buf . append ( streamId ) ; </a> 
<a> buf . append ( StringUtil . NEWLINE ) ; </a> 
<a> buf . append ( <RARE_TOKEN> <RARE_TOKEN> " ) ; </a> 
<a> buf . append ( status . toString ( ) ) ; </a> 
<a> return buf . toString ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . spdy ; </a> 
<a> import io . netty . util . internal . StringUtil ; </a> 
<a> import java . util . Map ; </a> 
<a> import java . util . Set ; </a> 
<a> import java . util . <RARE_TOKEN> ; </a> 
<a> public class <RARE_TOKEN> implements <RARE_TOKEN> { </a> 
<a> private boolean clear ; </a> 
<a> private final Map < Integer , <RARE_TOKEN> > <RARE_TOKEN> = new <RARE_TOKEN> < Integer , <RARE_TOKEN> > ( ) ; </a> 
<a> public <RARE_TOKEN> ( ) { </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public Set < Integer > <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( int ID ) { </a> 
<a> Integer key = new Integer ( ID ) ; </a> 
<a> return <RARE_TOKEN> . containsKey ( key ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int getValue ( int ID ) { </a> 
<a> Integer key = new Integer ( ID ) ; </a> 
<a> if ( <RARE_TOKEN> . containsKey ( key ) ) { </a> 
<a> return <RARE_TOKEN> . get ( key ) . getValue ( ) ; </a> 
<a> } else { </a> 
<a> return - 1 ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( int ID , int value ) { </a> 
<a> <RARE_TOKEN> ( ID , value , false , false ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( int ID , int value , boolean <RARE_TOKEN> , boolean <RARE_TOKEN> ) { </a> 
<a> if ( ID <= 0 || ID > <RARE_TOKEN> . <RARE_TOKEN> ) { </a> 
<a> throw new IllegalArgumentException ( <RARE_TOKEN> ID is not <RARE_TOKEN> " + ID ) ; </a> 
<a> } </a> 
<a> Integer key = new Integer ( ID ) ; </a> 
<a> if ( <RARE_TOKEN> . containsKey ( key ) ) { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = <RARE_TOKEN> . get ( key ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( value ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> . put ( key , new <RARE_TOKEN> ( value , <RARE_TOKEN> , <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( int ID ) { </a> 
<a> Integer key = new Integer ( ID ) ; </a> 
<a> if ( <RARE_TOKEN> . containsKey ( key ) ) { </a> 
<a> <RARE_TOKEN> . remove ( key ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( int ID ) { </a> 
<a> Integer key = new Integer ( ID ) ; </a> 
<a> if ( <RARE_TOKEN> . containsKey ( key ) ) { </a> 
<a> return <RARE_TOKEN> . get ( key ) . <RARE_TOKEN> ( ) ; </a> 
<a> } else { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( int ID , boolean <RARE_TOKEN> ) { </a> 
<a> Integer key = new Integer ( ID ) ; </a> 
<a> if ( <RARE_TOKEN> . containsKey ( key ) ) { </a> 
<a> <RARE_TOKEN> . get ( key ) . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( int ID ) { </a> 
<a> Integer key = new Integer ( ID ) ; </a> 
<a> if ( <RARE_TOKEN> . containsKey ( key ) ) { </a> 
<a> return <RARE_TOKEN> . get ( key ) . <RARE_TOKEN> ( ) ; </a> 
<a> } else { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( int ID , boolean <RARE_TOKEN> ) { </a> 
<a> Integer key = new Integer ( ID ) ; </a> 
<a> if ( <RARE_TOKEN> . containsKey ( key ) ) { </a> 
<a> <RARE_TOKEN> . get ( key ) . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return clear ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( boolean clear ) { </a> 
<a> this . clear = clear ; </a> 
<a> } </a> 
<a> private Set < Map . Entry < Integer , <RARE_TOKEN> > > <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( StringBuilder buf ) { </a> 
<a> for ( Map . Entry < Integer , <RARE_TOKEN> > e : <RARE_TOKEN> ( ) ) { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = e . getValue ( ) ; </a> 
<a> buf . append ( <RARE_TOKEN> " ) ; </a> 
<a> buf . append ( e . <RARE_TOKEN> ( ) . toString ( ) ) ; </a> 
<a> buf . append ( <RARE_TOKEN> ) ; </a> 
<a> buf . append ( <RARE_TOKEN> . getValue ( ) ) ; </a> 
<a> buf . append ( " <RARE_TOKEN> <RARE_TOKEN> " ) ; </a> 
<a> buf . append ( <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> buf . append ( <RARE_TOKEN> <RARE_TOKEN> " ) ; </a> 
<a> buf . append ( <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> buf . append ( <RARE_TOKEN> ) ; </a> 
<a> buf . append ( StringUtil . NEWLINE ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public String toString ( ) { </a> 
<a> StringBuilder buf = new StringBuilder ( ) ; </a> 
<a> buf . append ( getClass ( ) . getSimpleName ( ) ) ; </a> 
<a> buf . append ( StringUtil . NEWLINE ) ; </a> 
<a> <RARE_TOKEN> ( buf ) ; </a> 
<a> buf . <RARE_TOKEN> ( buf . length ( ) - StringUtil . NEWLINE . length ( ) ) ; </a> 
<a> return buf . toString ( ) ; </a> 
<a> } </a> 
<a> private static final class <RARE_TOKEN> { </a> 
<a> private int value ; </a> 
<a> private boolean <RARE_TOKEN> ; </a> 
<a> private boolean <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> ( int value , boolean <RARE_TOKEN> , boolean <RARE_TOKEN> ) { </a> 
<a> this . value = value ; </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> int getValue ( ) { </a> 
<a> return value ; </a> 
<a> } </a> 
<a> void <RARE_TOKEN> ( int value ) { </a> 
<a> this . value = value ; </a> 
<a> } </a> 
<a> boolean <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> void <RARE_TOKEN> ( boolean <RARE_TOKEN> ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> boolean <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> void <RARE_TOKEN> ( boolean <RARE_TOKEN> ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . spdy ; </a> 
<a> import io . netty . util . internal . StringUtil ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> </a> 
<a> implements <RARE_TOKEN> { </a> 
<a> private int streamId ; </a> 
<a> private boolean last ; </a> 
<a> public <RARE_TOKEN> ( int streamId ) { </a> 
<a> <RARE_TOKEN> ( streamId ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int getStreamId ( ) { </a> 
<a> return streamId ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( int streamId ) { </a> 
<a> if ( streamId <= 0 ) { </a> 
<a> throw new IllegalArgumentException ( </a> 
<a> <RARE_TOKEN> must be <RARE_TOKEN> " + streamId ) ; </a> 
<a> } </a> 
<a> this . streamId = streamId ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean isLast ( ) { </a> 
<a> return last ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( boolean last ) { </a> 
<a> this . last = last ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public String toString ( ) { </a> 
<a> StringBuilder buf = new StringBuilder ( ) ; </a> 
<a> buf . append ( getClass ( ) . getSimpleName ( ) ) ; </a> 
<a> buf . append ( <RARE_TOKEN> " ) ; </a> 
<a> buf . append ( isLast ( ) ) ; </a> 
<a> buf . append ( <RARE_TOKEN> ) ; </a> 
<a> buf . append ( StringUtil . NEWLINE ) ; </a> 
<a> buf . append ( <RARE_TOKEN> <RARE_TOKEN> = " ) ; </a> 
<a> buf . append ( streamId ) ; </a> 
<a> buf . append ( StringUtil . NEWLINE ) ; </a> 
<a> buf . append ( <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> buf . append ( StringUtil . NEWLINE ) ; </a> 
<a> <RARE_TOKEN> ( buf ) ; </a> 
<a> buf . <RARE_TOKEN> ( buf . length ( ) - StringUtil . NEWLINE . length ( ) ) ; </a> 
<a> return buf . toString ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . spdy ; </a> 
<a> import io . netty . util . internal . StringUtil ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> </a> 
<a> implements <RARE_TOKEN> { </a> 
<a> private int streamId ; </a> 
<a> private int <RARE_TOKEN> ; </a> 
<a> private byte <RARE_TOKEN> ; </a> 
<a> private boolean last ; </a> 
<a> private boolean <RARE_TOKEN> ; </a> 
<a> public <RARE_TOKEN> ( </a> 
<a> int streamId , int <RARE_TOKEN> , byte <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( streamId ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int getStreamId ( ) { </a> 
<a> return streamId ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( int streamId ) { </a> 
<a> if ( streamId <= 0 ) { </a> 
<a> throw new IllegalArgumentException ( </a> 
<a> <RARE_TOKEN> must be <RARE_TOKEN> " + streamId ) ; </a> 
<a> } </a> 
<a> this . streamId = streamId ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( int <RARE_TOKEN> ) { </a> 
<a> if ( <RARE_TOKEN> < 0 ) { </a> 
<a> throw new IllegalArgumentException ( </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> be <RARE_TOKEN> " + </a> 
<a> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public byte <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( byte <RARE_TOKEN> ) { </a> 
<a> if ( <RARE_TOKEN> < 0 || <RARE_TOKEN> > 7 ) { </a> 
<a> throw new IllegalArgumentException ( </a> 
<a> <RARE_TOKEN> must be <RARE_TOKEN> 0 <RARE_TOKEN> 7 <RARE_TOKEN> " + <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean isLast ( ) { </a> 
<a> return last ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( boolean last ) { </a> 
<a> this . last = last ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( boolean <RARE_TOKEN> ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public String toString ( ) { </a> 
<a> StringBuilder buf = new StringBuilder ( ) ; </a> 
<a> buf . append ( getClass ( ) . getSimpleName ( ) ) ; </a> 
<a> buf . append ( <RARE_TOKEN> " ) ; </a> 
<a> buf . append ( isLast ( ) ) ; </a> 
<a> buf . append ( <RARE_TOKEN> <RARE_TOKEN> " ) ; </a> 
<a> buf . append ( <RARE_TOKEN> ( ) ) ; </a> 
<a> buf . append ( <RARE_TOKEN> ) ; </a> 
<a> buf . append ( StringUtil . NEWLINE ) ; </a> 
<a> buf . append ( <RARE_TOKEN> <RARE_TOKEN> = " ) ; </a> 
<a> buf . append ( streamId ) ; </a> 
<a> buf . append ( StringUtil . NEWLINE ) ; </a> 
<a> if ( <RARE_TOKEN> != 0 ) { </a> 
<a> buf . append ( <RARE_TOKEN> <RARE_TOKEN> = " ) ; </a> 
<a> buf . append ( <RARE_TOKEN> ) ; </a> 
<a> buf . append ( StringUtil . NEWLINE ) ; </a> 
<a> } </a> 
<a> buf . append ( <RARE_TOKEN> <RARE_TOKEN> = " ) ; </a> 
<a> buf . append ( <RARE_TOKEN> ) ; </a> 
<a> buf . append ( StringUtil . NEWLINE ) ; </a> 
<a> buf . append ( <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> buf . append ( StringUtil . NEWLINE ) ; </a> 
<a> <RARE_TOKEN> ( buf ) ; </a> 
<a> buf . <RARE_TOKEN> ( buf . length ( ) - StringUtil . NEWLINE . length ( ) ) ; </a> 
<a> return buf . toString ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . spdy ; </a> 
<a> public final class <RARE_TOKEN> { </a> 
<a> public static final int <RARE_TOKEN> = 2 ; </a> 
<a> public static final int <RARE_TOKEN> = 3 ; </a> 
<a> private <RARE_TOKEN> ( ) { } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . spdy ; </a> 
<a> import io . netty . buffer . ByteBuf ; </a> 
<a> import io . netty . buffer . Unpooled ; </a> 
<a> public interface <RARE_TOKEN> { </a> 
<a> int getStreamId ( ) ; </a> 
<a> void <RARE_TOKEN> ( int streamID ) ; </a> 
<a> boolean isLast ( ) ; </a> 
<a> void <RARE_TOKEN> ( boolean last ) ; </a> 
<a> ByteBuf getData ( ) ; </a> 
<a> void <RARE_TOKEN> ( ByteBuf data ) ; </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . spdy ; </a> 
<a> import io . netty . channel . <RARE_TOKEN> ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> public <RARE_TOKEN> ( int version ) { </a> 
<a> this ( version , <RARE_TOKEN> , <RARE_TOKEN> , 6 , 15 , 8 ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( </a> 
<a> int version , int maxChunkSize , int maxHeaderSize , </a> 
<a> int compressionLevel , int windowBits , int memLevel ) { </a> 
<a> super ( </a> 
<a> new <RARE_TOKEN> ( version , maxChunkSize , maxHeaderSize ) , </a> 
<a> new <RARE_TOKEN> ( version , compressionLevel , windowBits , memLevel ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . spdy ; </a> 
<a> import static io . netty . handler . codec . spdy . <RARE_TOKEN> . * ; </a> 
<a> import io . netty . buffer . ByteBuf ; </a> 
<a> import io . netty . buffer . Unpooled ; </a> 
<a> import io . netty . channel . ChannelHandlerContext ; </a> 
<a> import io . netty . handler . codec . <RARE_TOKEN> ; </a> 
<a> import io . netty . handler . codec . TooLongFrameException ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> < Object > { </a> 
<a> private final int spdyVersion ; </a> 
<a> private final int maxChunkSize ; </a> 
<a> private final int maxHeaderSize ; </a> 
<a> private final <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> private State state ; </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> private SpdyHeaderBlock <RARE_TOKEN> ; </a> 
<a> private byte <RARE_TOKEN> ; </a> 
<a> private int length ; </a> 
<a> private int version ; </a> 
<a> private int type ; </a> 
<a> private int streamID ; </a> 
<a> private int <RARE_TOKEN> ; </a> 
<a> private int <RARE_TOKEN> ; </a> 
<a> private ByteBuf <RARE_TOKEN> ; </a> 
<a> private enum State { </a> 
<a> <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> </a> 
<a> } </a> 
<a> @ Deprecated </a> 
<a> public <RARE_TOKEN> ( ) { </a> 
<a> this ( 2 ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( int version ) { </a> 
<a> this ( version , <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( int version , int maxChunkSize , int maxHeaderSize ) { </a> 
<a> if ( version < <RARE_TOKEN> . <RARE_TOKEN> || version > <RARE_TOKEN> . <RARE_TOKEN> ) { </a> 
<a> throw new IllegalArgumentException ( </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> " + version ) ; </a> 
<a> } </a> 
<a> if ( maxChunkSize <= 0 ) { </a> 
<a> throw new IllegalArgumentException ( </a> 
<a> <RARE_TOKEN> must be a <RARE_TOKEN> <RARE_TOKEN> " + maxChunkSize ) ; </a> 
<a> } </a> 
<a> if ( maxHeaderSize <= 0 ) { </a> 
<a> throw new IllegalArgumentException ( </a> 
<a> <RARE_TOKEN> must be a <RARE_TOKEN> <RARE_TOKEN> " + maxHeaderSize ) ; </a> 
<a> } </a> 
<a> spdyVersion = version ; </a> 
<a> this . maxChunkSize = maxChunkSize ; </a> 
<a> this . maxHeaderSize = maxHeaderSize ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . newInstance ( version ) ; </a> 
<a> state = State . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public Object <RARE_TOKEN> ( ChannelHandlerContext ctx , ByteBuf in ) throws Exception { </a> 
<a> try { </a> 
<a> return decode ( ctx , in ) ; </a> 
<a> } finally { </a> 
<a> <RARE_TOKEN> . end ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public Object decode ( ChannelHandlerContext ctx , ByteBuf buffer ) throws Exception { </a> 
<a> switch ( state ) { </a> 
<a> case <RARE_TOKEN> : </a> 
<a> state = <RARE_TOKEN> ( buffer ) ; </a> 
<a> if ( state == State . <RARE_TOKEN> ) { </a> 
<a> if ( version != spdyVersion ) { </a> 
<a> <RARE_TOKEN> ( ctx , <RARE_TOKEN> <RARE_TOKEN> " + version ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> ( ctx ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> if ( length == 0 ) { </a> 
<a> if ( state == State . <RARE_TOKEN> ) { </a> 
<a> if ( streamID == 0 ) { </a> 
<a> state = State . <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> ( ctx , <RARE_TOKEN> <RARE_TOKEN> data <RARE_TOKEN> ) ; </a> 
<a> return null ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> spdyDataFrame = new <RARE_TOKEN> ( streamID ) ; </a> 
<a> spdyDataFrame . <RARE_TOKEN> ( ( <RARE_TOKEN> & <RARE_TOKEN> ) != 0 ) ; </a> 
<a> state = State . <RARE_TOKEN> ; </a> 
<a> return spdyDataFrame ; </a> 
<a> } </a> 
<a> state = State . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> return null ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> try { </a> 
<a> Object frame = <RARE_TOKEN> ( buffer ) ; </a> 
<a> if ( frame != null ) { </a> 
<a> state = State . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> return frame ; </a> 
<a> } catch ( IllegalArgumentException e ) { </a> 
<a> state = State . <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> ( ctx ) ; </a> 
<a> } </a> 
<a> return null ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> if ( buffer . readableBytes ( ) < 4 ) { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> ( buffer , buffer . readerIndex ( ) ) ; </a> 
<a> buffer . skipBytes ( 4 ) ; </a> 
<a> length -= 4 ; </a> 
<a> if ( ( length & <RARE_TOKEN> ) != 0 || length > > 3 != <RARE_TOKEN> ) { </a> 
<a> state = State . <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> ( ctx ) ; </a> 
<a> return null ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> = new <RARE_TOKEN> ( ) ; </a> 
<a> boolean clear = ( <RARE_TOKEN> & <RARE_TOKEN> ) != 0 ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( clear ) ; </a> 
<a> } </a> 
<a> int <RARE_TOKEN> = Math . min ( buffer . readableBytes ( ) > > 3 , length > > 3 ) ; </a> 
<a> for ( int i = 0 ; i < <RARE_TOKEN> ; i ++ ) { </a> 
<a> int ID ; </a> 
<a> byte <RARE_TOKEN> ; </a> 
<a> if ( version < 3 ) { </a> 
<a> ID = buffer . <RARE_TOKEN> ( ) & 0xFF | </a> 
<a> ( buffer . <RARE_TOKEN> ( ) & 0xFF ) < < 8 | </a> 
<a> ( buffer . <RARE_TOKEN> ( ) & 0xFF ) < < 16 ; </a> 
<a> <RARE_TOKEN> = buffer . <RARE_TOKEN> ( ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> = buffer . <RARE_TOKEN> ( ) ; </a> 
<a> ID = <RARE_TOKEN> ( buffer , buffer . readerIndex ( ) ) ; </a> 
<a> buffer . skipBytes ( 3 ) ; </a> 
<a> } </a> 
<a> int value = <RARE_TOKEN> ( buffer , buffer . readerIndex ( ) ) ; </a> 
<a> buffer . skipBytes ( 4 ) ; </a> 
<a> if ( ID == 0 ) { </a> 
<a> state = State . <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = null ; </a> 
<a> <RARE_TOKEN> ( ctx ) ; </a> 
<a> return null ; </a> 
<a> } </a> 
<a> if ( ! <RARE_TOKEN> . <RARE_TOKEN> ( ID ) ) { </a> 
<a> boolean <RARE_TOKEN> = ( <RARE_TOKEN> & <RARE_TOKEN> ) != 0 ; </a> 
<a> boolean <RARE_TOKEN> = ( <RARE_TOKEN> & <RARE_TOKEN> ) != 0 ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ID , value , <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> length -= 8 * <RARE_TOKEN> ; </a> 
<a> if ( length == 0 ) { </a> 
<a> state = State . <RARE_TOKEN> ; </a> 
<a> Object frame = <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = null ; </a> 
<a> return frame ; </a> 
<a> } </a> 
<a> return null ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> try { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ( buffer ) ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> if ( length == 0 ) { </a> 
<a> state = State . <RARE_TOKEN> ; </a> 
<a> Object frame = <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = null ; </a> 
<a> return frame ; </a> 
<a> } </a> 
<a> state = State . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> return null ; </a> 
<a> } catch ( IllegalArgumentException e ) { </a> 
<a> state = State . <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> ( ctx ) ; </a> 
<a> return null ; </a> 
<a> } </a> 
<a> case <RARE_TOKEN> : </a> 
<a> int <RARE_TOKEN> = Math . min ( buffer . readableBytes ( ) , length ) ; </a> 
<a> length -= <RARE_TOKEN> ; </a> 
<a> try { </a> 
<a> <RARE_TOKEN> ( buffer . <RARE_TOKEN> ( <RARE_TOKEN> ) ) ; </a> 
<a> } catch ( Exception e ) { </a> 
<a> state = State . <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = null ; </a> 
<a> <RARE_TOKEN> = null ; </a> 
<a> ctx . fireExceptionCaught ( e ) ; </a> 
<a> return null ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> != null && <RARE_TOKEN> . <RARE_TOKEN> ( ) ) { </a> 
<a> Object frame = <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = null ; </a> 
<a> <RARE_TOKEN> = null ; </a> 
<a> if ( length == 0 ) { </a> 
<a> state = State . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> return frame ; </a> 
<a> } </a> 
<a> if ( length == 0 ) { </a> 
<a> Object frame = <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = null ; </a> 
<a> state = State . <RARE_TOKEN> ; </a> 
<a> return frame ; </a> 
<a> } </a> 
<a> return null ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> if ( streamID == 0 ) { </a> 
<a> state = State . <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> ( ctx , <RARE_TOKEN> <RARE_TOKEN> data <RARE_TOKEN> ) ; </a> 
<a> return null ; </a> 
<a> } </a> 
<a> int <RARE_TOKEN> = Math . min ( maxChunkSize , length ) ; </a> 
<a> if ( buffer . readableBytes ( ) < <RARE_TOKEN> ) { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> spdyDataFrame = new <RARE_TOKEN> ( streamID ) ; </a> 
<a> spdyDataFrame . <RARE_TOKEN> ( buffer . readBytes ( <RARE_TOKEN> ) ) ; </a> 
<a> length -= <RARE_TOKEN> ; </a> 
<a> if ( length == 0 ) { </a> 
<a> spdyDataFrame . <RARE_TOKEN> ( ( <RARE_TOKEN> & <RARE_TOKEN> ) != 0 ) ; </a> 
<a> state = State . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> return spdyDataFrame ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> int <RARE_TOKEN> = Math . min ( buffer . readableBytes ( ) , length ) ; </a> 
<a> buffer . skipBytes ( <RARE_TOKEN> ) ; </a> 
<a> length -= <RARE_TOKEN> ; </a> 
<a> if ( length == 0 ) { </a> 
<a> state = State . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> return null ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> buffer . skipBytes ( buffer . readableBytes ( ) ) ; </a> 
<a> return null ; </a> 
<a> default : </a> 
<a> throw new Error ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private State <RARE_TOKEN> ( ByteBuf buffer ) { </a> 
<a> if ( buffer . readableBytes ( ) < <RARE_TOKEN> ) { </a> 
<a> return State . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> int <RARE_TOKEN> = buffer . readerIndex ( ) ; </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> + <RARE_TOKEN> ; </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> + <RARE_TOKEN> ; </a> 
<a> buffer . skipBytes ( <RARE_TOKEN> ) ; </a> 
<a> boolean <RARE_TOKEN> = ( buffer . getByte ( <RARE_TOKEN> ) & <RARE_TOKEN> ) != 0 ; </a> 
<a> <RARE_TOKEN> = buffer . getByte ( <RARE_TOKEN> ) ; </a> 
<a> length = <RARE_TOKEN> ( buffer , <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> ) { </a> 
<a> version = <RARE_TOKEN> ( buffer , <RARE_TOKEN> ) & <RARE_TOKEN> ; </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> + <RARE_TOKEN> ; </a> 
<a> type = <RARE_TOKEN> ( buffer , <RARE_TOKEN> ) ; </a> 
<a> if ( version != spdyVersion || ! <RARE_TOKEN> ( ) ) { </a> 
<a> return State . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> State <RARE_TOKEN> ; </a> 
<a> if ( <RARE_TOKEN> ( ) ) { </a> 
<a> switch ( type ) { </a> 
<a> case <RARE_TOKEN> : </a> 
<a> case <RARE_TOKEN> : </a> 
<a> case <RARE_TOKEN> : </a> 
<a> <RARE_TOKEN> = State . <RARE_TOKEN> ; </a> 
<a> break ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> <RARE_TOKEN> = State . <RARE_TOKEN> ; </a> 
<a> break ; </a> 
<a> default : </a> 
<a> <RARE_TOKEN> = State . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } else if ( length != 0 ) { </a> 
<a> <RARE_TOKEN> = State . <RARE_TOKEN> ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> = State . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } else { </a> 
<a> streamID = <RARE_TOKEN> ( buffer , <RARE_TOKEN> ) ; </a> 
<a> return State . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<a> private Object <RARE_TOKEN> ( ByteBuf buffer ) { </a> 
<a> int streamID ; </a> 
<a> int statusCode ; </a> 
<a> switch ( type ) { </a> 
<a> case <RARE_TOKEN> : </a> 
<a> if ( buffer . readableBytes ( ) < 8 ) { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> streamID = <RARE_TOKEN> ( buffer , buffer . readerIndex ( ) ) ; </a> 
<a> statusCode = <RARE_TOKEN> ( buffer , buffer . readerIndex ( ) + 4 ) ; </a> 
<a> buffer . skipBytes ( 8 ) ; </a> 
<a> return new <RARE_TOKEN> ( streamID , statusCode ) ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> if ( buffer . readableBytes ( ) < 4 ) { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> int ID = <RARE_TOKEN> ( buffer , buffer . readerIndex ( ) ) ; </a> 
<a> buffer . skipBytes ( 4 ) ; </a> 
<a> return new <RARE_TOKEN> ( ID ) ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> int <RARE_TOKEN> = version < 3 ? 4 : 8 ; </a> 
<a> if ( buffer . readableBytes ( ) < <RARE_TOKEN> ) { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> ( buffer , buffer . readerIndex ( ) ) ; </a> 
<a> buffer . skipBytes ( 4 ) ; </a> 
<a> if ( version < 3 ) { </a> 
<a> return new <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> statusCode = <RARE_TOKEN> ( buffer , buffer . readerIndex ( ) ) ; </a> 
<a> buffer . skipBytes ( 4 ) ; </a> 
<a> return new <RARE_TOKEN> ( <RARE_TOKEN> , statusCode ) ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> if ( buffer . readableBytes ( ) < 8 ) { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> streamID = <RARE_TOKEN> ( buffer , buffer . readerIndex ( ) ) ; </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> ( buffer , buffer . readerIndex ( ) + 4 ) ; </a> 
<a> buffer . skipBytes ( 8 ) ; </a> 
<a> return new <RARE_TOKEN> ( streamID , <RARE_TOKEN> ) ; </a> 
<a> default : </a> 
<a> throw new Error ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private SpdyHeaderBlock <RARE_TOKEN> ( ByteBuf buffer ) { </a> 
<a> int <RARE_TOKEN> ; </a> 
<a> int streamID ; </a> 
<a> switch ( type ) { </a> 
<a> case <RARE_TOKEN> : </a> 
<a> <RARE_TOKEN> = version < 3 ? 12 : 10 ; </a> 
<a> if ( buffer . readableBytes ( ) < <RARE_TOKEN> ) { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> int offset = buffer . readerIndex ( ) ; </a> 
<a> streamID = <RARE_TOKEN> ( buffer , offset ) ; </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> ( buffer , offset + 4 ) ; </a> 
<a> byte <RARE_TOKEN> = ( byte ) ( buffer . getByte ( offset + 8 ) > > 5 & <RARE_TOKEN> ) ; </a> 
<a> if ( version < 3 ) { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> 1 ; </a> 
<a> } </a> 
<a> buffer . skipBytes ( 10 ) ; </a> 
<a> length -= 10 ; </a> 
<a> if ( version < 3 && length == 2 && buffer . <RARE_TOKEN> ( buffer . readerIndex ( ) ) == 0 ) { </a> 
<a> buffer . skipBytes ( 2 ) ; </a> 
<a> length = 0 ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> spdySynStreamFrame = </a> 
<a> new <RARE_TOKEN> ( streamID , <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> spdySynStreamFrame . <RARE_TOKEN> ( ( <RARE_TOKEN> & <RARE_TOKEN> ) != 0 ) ; </a> 
<a> spdySynStreamFrame . <RARE_TOKEN> ( ( <RARE_TOKEN> & <RARE_TOKEN> ) != 0 ) ; </a> 
<a> return spdySynStreamFrame ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> <RARE_TOKEN> = version < 3 ? 8 : 4 ; </a> 
<a> if ( buffer . readableBytes ( ) < <RARE_TOKEN> ) { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> streamID = <RARE_TOKEN> ( buffer , buffer . readerIndex ( ) ) ; </a> 
<a> buffer . skipBytes ( 4 ) ; </a> 
<a> length -= 4 ; </a> 
<a> if ( version < 3 ) { </a> 
<a> buffer . skipBytes ( 2 ) ; </a> 
<a> length -= 2 ; </a> 
<a> } </a> 
<a> if ( version < 3 && length == 2 && buffer . <RARE_TOKEN> ( buffer . readerIndex ( ) ) == 0 ) { </a> 
<a> buffer . skipBytes ( 2 ) ; </a> 
<a> length = 0 ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> spdySynReplyFrame = new <RARE_TOKEN> ( streamID ) ; </a> 
<a> spdySynReplyFrame . <RARE_TOKEN> ( ( <RARE_TOKEN> & <RARE_TOKEN> ) != 0 ) ; </a> 
<a> return spdySynReplyFrame ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> if ( buffer . readableBytes ( ) < 4 ) { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> if ( version < 3 && length > 4 && buffer . readableBytes ( ) < 8 ) { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> streamID = <RARE_TOKEN> ( buffer , buffer . readerIndex ( ) ) ; </a> 
<a> buffer . skipBytes ( 4 ) ; </a> 
<a> length -= 4 ; </a> 
<a> if ( version < 3 && length != 0 ) { </a> 
<a> buffer . skipBytes ( 2 ) ; </a> 
<a> length -= 2 ; </a> 
<a> } </a> 
<a> if ( version < 3 && length == 2 && buffer . <RARE_TOKEN> ( buffer . readerIndex ( ) ) == 0 ) { </a> 
<a> buffer . skipBytes ( 2 ) ; </a> 
<a> length = 0 ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( streamID ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ( <RARE_TOKEN> & <RARE_TOKEN> ) != 0 ) ; </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> default : </a> 
<a> throw new Error ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private boolean <RARE_TOKEN> ( int bytes ) throws Exception { </a> 
<a> if ( <RARE_TOKEN> . readableBytes ( ) >= bytes ) { </a> 
<a> return true ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> . decode ( <RARE_TOKEN> ) ; </a> 
<a> return <RARE_TOKEN> . readableBytes ( ) >= bytes ; </a> 
<a> } </a> 
<a> private int <RARE_TOKEN> ( ) { </a> 
<a> if ( version < 3 ) { </a> 
<a> return <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> } else { </a> 
<a> return <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( ByteBuf buffer ) throws Exception { </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> <RARE_TOKEN> = 0 ; </a> 
<a> <RARE_TOKEN> = - 1 ; </a> 
<a> <RARE_TOKEN> = Unpooled . buffer ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( buffer ) ; </a> 
<a> <RARE_TOKEN> . decode ( <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> <RARE_TOKEN> = null ; </a> 
<a> return ; </a> 
<a> } </a> 
<a> int <RARE_TOKEN> = version < 3 ? 2 : 4 ; </a> 
<a> if ( <RARE_TOKEN> == - 1 ) { </a> 
<a> if ( <RARE_TOKEN> . readableBytes ( ) < <RARE_TOKEN> ) { </a> 
<a> return ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ( ) ; </a> 
<a> if ( <RARE_TOKEN> < 0 ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> return ; </a> 
<a> } </a> 
<a> } </a> 
<a> while ( <RARE_TOKEN> > 0 ) { </a> 
<a> int <RARE_TOKEN> = this . <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> if ( ! <RARE_TOKEN> ( <RARE_TOKEN> ) ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> return ; </a> 
<a> } </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> ( ) ; </a> 
<a> if ( <RARE_TOKEN> <= 0 ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> return ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> += <RARE_TOKEN> ; </a> 
<a> if ( <RARE_TOKEN> > maxHeaderSize ) { </a> 
<a> throw new TooLongFrameException ( </a> 
<a> <RARE_TOKEN> block <RARE_TOKEN> " + maxHeaderSize ) ; </a> 
<a> } </a> 
<a> if ( ! <RARE_TOKEN> ( <RARE_TOKEN> ) ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> return ; </a> 
<a> } </a> 
<a> byte [ ] <RARE_TOKEN> = new byte [ <RARE_TOKEN> ] ; </a> 
<a> <RARE_TOKEN> . readBytes ( <RARE_TOKEN> ) ; </a> 
<a> String name = new String ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> . <RARE_TOKEN> ( name ) ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> return ; </a> 
<a> } </a> 
<a> if ( ! <RARE_TOKEN> ( <RARE_TOKEN> ) ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> return ; </a> 
<a> } </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> ( ) ; </a> 
<a> if ( <RARE_TOKEN> <= 0 ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> return ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> += <RARE_TOKEN> ; </a> 
<a> if ( <RARE_TOKEN> > maxHeaderSize ) { </a> 
<a> throw new TooLongFrameException ( </a> 
<a> <RARE_TOKEN> block <RARE_TOKEN> " + maxHeaderSize ) ; </a> 
<a> } </a> 
<a> if ( ! <RARE_TOKEN> ( <RARE_TOKEN> ) ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> return ; </a> 
<a> } </a> 
<a> byte [ ] <RARE_TOKEN> = new byte [ <RARE_TOKEN> ] ; </a> 
<a> <RARE_TOKEN> . readBytes ( <RARE_TOKEN> ) ; </a> 
<a> int index = 0 ; </a> 
<a> int offset = 0 ; </a> 
<a> while ( index < <RARE_TOKEN> ) { </a> 
<a> while ( index < <RARE_TOKEN> . length && <RARE_TOKEN> [ index ] != ( byte ) 0 ) { </a> 
<a> index ++ ; </a> 
<a> } </a> 
<a> if ( index < <RARE_TOKEN> . length && <RARE_TOKEN> [ index + 1 ] == ( byte ) 0 ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> return ; </a> 
<a> } </a> 
<a> String value = new String ( <RARE_TOKEN> , offset , index - offset , <RARE_TOKEN> ) ; </a> 
<a> try { </a> 
<a> <RARE_TOKEN> . addHeader ( name , value ) ; </a> 
<a> } catch ( IllegalArgumentException e ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> return ; </a> 
<a> } </a> 
<a> index ++ ; </a> 
<a> offset = index ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> -- ; </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> = null ; </a> 
<a> } </a> 
<a> private boolean <RARE_TOKEN> ( ) { </a> 
<a> switch ( type ) { </a> 
<a> case <RARE_TOKEN> : </a> 
<a> return version < 3 ? length >= 12 : length >= 10 ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> return version < 3 ? length >= 8 : length >= 4 ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> return <RARE_TOKEN> == 0 && length == 8 ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> return length >= 4 ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> return length == 0 ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> return length == 4 ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> return version < 3 ? length == 4 : length == 8 ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> if ( version < 3 ) { </a> 
<a> return length == 4 || length >= 8 ; </a> 
<a> } else { </a> 
<a> return length >= 4 ; </a> 
<a> } </a> 
<a> case <RARE_TOKEN> : </a> 
<a> return length == 8 ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> default : </a> 
<a> return true ; </a> 
<a> } </a> 
<a> } </a> 
<a> private boolean <RARE_TOKEN> ( ) { </a> 
<a> switch ( type ) { </a> 
<a> case <RARE_TOKEN> : </a> 
<a> case <RARE_TOKEN> : </a> 
<a> case <RARE_TOKEN> : </a> 
<a> case <RARE_TOKEN> : </a> 
<a> case <RARE_TOKEN> : </a> 
<a> case <RARE_TOKEN> : </a> 
<a> case <RARE_TOKEN> : </a> 
<a> case <RARE_TOKEN> : </a> 
<a> return true ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> case <RARE_TOKEN> : </a> 
<a> default : </a> 
<a> return false ; </a> 
<a> } </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( ChannelHandlerContext ctx ) { </a> 
<a> String message = <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> switch ( type ) { </a> 
<a> case <RARE_TOKEN> : </a> 
<a> message = <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> break ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> message = <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> break ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> message = <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> break ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> message = <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> break ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> message = <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> break ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> message = <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> break ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> message = <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> break ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> message = <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> break ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> message = <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> break ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> message = <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> break ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( ctx , message ) ; </a> 
<a> } </a> 
<a> private static void <RARE_TOKEN> ( ChannelHandlerContext ctx , String message ) { </a> 
<a> ctx . fireExceptionCaught ( new <RARE_TOKEN> ( message ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . spdy ; </a> 
<a> import java . util . List ; </a> 
<a> import java . util . Map ; </a> 
<a> import java . util . Set ; </a> 
<a> public interface SpdyHeaderBlock { </a> 
<a> boolean <RARE_TOKEN> ( ) ; </a> 
<a> void <RARE_TOKEN> ( ) ; </a> 
<a> String getHeader ( String name ) ; </a> 
<a> List < String > getHeaders ( String name ) ; </a> 
<a> List < Map . Entry < String , String > > getHeaders ( ) ; </a> 
<a> boolean <RARE_TOKEN> ( String name ) ; </a> 
<a> Set < String > <RARE_TOKEN> ( ) ; </a> 
<a> void addHeader ( String name , Object value ) ; </a> 
<a> void setHeader ( String name , Object value ) ; </a> 
<a> void setHeader ( String name , <RARE_TOKEN> < ? > values ) ; </a> 
<a> void removeHeader ( String name ) ; </a> 
<a> void <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . spdy ; </a> 
<a> import io . netty . buffer . ByteBuf ; </a> 
<a> import io . netty . util . internal . <RARE_TOKEN> ; </a> 
<a> abstract class <RARE_TOKEN> { </a> 
<a> static <RARE_TOKEN> newInstance ( </a> 
<a> int version , int compressionLevel , int windowBits , int memLevel ) { </a> 
<a> if ( <RARE_TOKEN> . <RARE_TOKEN> ( ) >= 7 ) { </a> 
<a> return new <RARE_TOKEN> ( </a> 
<a> version , compressionLevel ) ; </a> 
<a> } else { </a> 
<a> return new <RARE_TOKEN> ( </a> 
<a> version , compressionLevel , windowBits , memLevel ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> abstract void <RARE_TOKEN> ( ByteBuf <RARE_TOKEN> ) ; </a> 
<a> abstract void encode ( ByteBuf <RARE_TOKEN> ) ; </a> 
<a> abstract void end ( ) ; </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . spdy ; </a> 
<a> import io . netty . buffer . ByteBuf ; </a> 
<a> abstract class <RARE_TOKEN> { </a> 
<a> static <RARE_TOKEN> newInstance ( int version ) { </a> 
<a> return new <RARE_TOKEN> ( version ) ; </a> 
<a> } </a> 
<a> abstract void <RARE_TOKEN> ( ByteBuf <RARE_TOKEN> ) ; </a> 
<a> abstract void decode ( ByteBuf <RARE_TOKEN> ) throws Exception ; </a> 
<a> abstract void end ( ) ; </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . spdy ; </a> 
<a> import static io . netty . handler . codec . spdy . <RARE_TOKEN> . * ; </a> 
<a> import io . netty . buffer . ByteBuf ; </a> 
<a> import io . netty . handler . codec . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import io . netty . util . internal . <RARE_TOKEN> . JZlib ; </a> 
<a> import io . netty . util . internal . <RARE_TOKEN> . ZStream ; </a> 
<a> class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> private final ZStream z = new ZStream ( ) ; </a> 
<a> public <RARE_TOKEN> ( </a> 
<a> int version , int compressionLevel , int windowBits , int memLevel ) { </a> 
<a> if ( version < <RARE_TOKEN> . <RARE_TOKEN> || version > <RARE_TOKEN> . <RARE_TOKEN> ) { </a> 
<a> throw new IllegalArgumentException ( </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> " + version ) ; </a> 
<a> } </a> 
<a> if ( compressionLevel < 0 || compressionLevel > 9 ) { </a> 
<a> throw new IllegalArgumentException ( </a> 
<a> <RARE_TOKEN> " + compressionLevel + " (expected: <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( windowBits < 9 || windowBits > 15 ) { </a> 
<a> throw new IllegalArgumentException ( </a> 
<a> <RARE_TOKEN> " + windowBits + " (expected: <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( memLevel < 1 || memLevel > 9 ) { </a> 
<a> throw new IllegalArgumentException ( </a> 
<a> <RARE_TOKEN> " + memLevel + " (expected: <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> int resultCode = z . <RARE_TOKEN> ( </a> 
<a> compressionLevel , windowBits , memLevel , JZlib . <RARE_TOKEN> ) ; </a> 
<a> if ( resultCode != JZlib . Z_OK ) { </a> 
<a> throw new <RARE_TOKEN> ( </a> 
<a> "failed to <RARE_TOKEN> an <RARE_TOKEN> header block <RARE_TOKEN> " + resultCode ) ; </a> 
<a> } else { </a> 
<a> if ( version < 3 ) { </a> 
<a> resultCode = z . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> . length ) ; </a> 
<a> } else { </a> 
<a> resultCode = z . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> . length ) ; </a> 
<a> } </a> 
<a> if ( resultCode != JZlib . Z_OK ) { </a> 
<a> throw new <RARE_TOKEN> ( </a> 
<a> "failed to set the <RARE_TOKEN> <RARE_TOKEN> " + resultCode ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ByteBuf <RARE_TOKEN> ) { </a> 
<a> byte [ ] in = new byte [ <RARE_TOKEN> . readableBytes ( ) ] ; </a> 
<a> <RARE_TOKEN> . readBytes ( in ) ; </a> 
<a> z . next_in = in ; </a> 
<a> z . next_in_index = 0 ; </a> 
<a> z . avail_in = in . length ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void encode ( ByteBuf <RARE_TOKEN> ) { </a> 
<a> try { </a> 
<a> byte [ ] out = new byte [ ( int ) Math . <RARE_TOKEN> ( z . next_in . length * <RARE_TOKEN> ) + 12 ] ; </a> 
<a> z . <RARE_TOKEN> = out ; </a> 
<a> z . <RARE_TOKEN> = 0 ; </a> 
<a> z . <RARE_TOKEN> = out . length ; </a> 
<a> int resultCode = z . <RARE_TOKEN> ( JZlib . <RARE_TOKEN> ) ; </a> 
<a> if ( resultCode != JZlib . Z_OK ) { </a> 
<a> throw new <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> " + resultCode ) ; </a> 
<a> } </a> 
<a> if ( z . <RARE_TOKEN> != 0 ) { </a> 
<a> <RARE_TOKEN> . writeBytes ( out , 0 , z . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } finally { </a> 
<a> z . next_in = null ; </a> 
<a> z . <RARE_TOKEN> = null ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void end ( ) { </a> 
<a> z . <RARE_TOKEN> ( ) ; </a> 
<a> z . next_in = null ; </a> 
<a> z . <RARE_TOKEN> = null ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . spdy ; </a> 
<a> import static io . netty . handler . codec . spdy . <RARE_TOKEN> . * ; </a> 
<a> import io . netty . buffer . ByteBuf ; </a> 
<a> import java . util . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> private final byte [ ] out = new byte [ <RARE_TOKEN> ] ; </a> 
<a> private final <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> public <RARE_TOKEN> ( int version , int compressionLevel ) { </a> 
<a> if ( version < <RARE_TOKEN> . <RARE_TOKEN> || version > <RARE_TOKEN> . <RARE_TOKEN> ) { </a> 
<a> throw new IllegalArgumentException ( </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> " + version ) ; </a> 
<a> } </a> 
<a> if ( compressionLevel < 0 || compressionLevel > 9 ) { </a> 
<a> throw new IllegalArgumentException ( </a> 
<a> <RARE_TOKEN> " + compressionLevel + " (expected: <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> = new <RARE_TOKEN> ( compressionLevel ) ; </a> 
<a> if ( version < 3 ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ByteBuf <RARE_TOKEN> ) { </a> 
<a> byte [ ] in = new byte [ <RARE_TOKEN> . readableBytes ( ) ] ; </a> 
<a> <RARE_TOKEN> . readBytes ( in ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( in ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void encode ( ByteBuf <RARE_TOKEN> ) { </a> 
<a> while ( ! <RARE_TOKEN> . <RARE_TOKEN> ( ) ) { </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( out , 0 , out . length , <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . writeBytes ( out , 0 , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void end ( ) { </a> 
<a> <RARE_TOKEN> . end ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . spdy ; </a> 
<a> import static io . netty . handler . codec . spdy . <RARE_TOKEN> . * ; </a> 
<a> import io . netty . buffer . ByteBuf ; </a> 
<a> import java . util . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import java . util . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> private final int version ; </a> 
<a> private final byte [ ] out = new byte [ <RARE_TOKEN> ] ; </a> 
<a> private final <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( ) ; </a> 
<a> public <RARE_TOKEN> ( int version ) { </a> 
<a> if ( version < <RARE_TOKEN> . <RARE_TOKEN> || version > <RARE_TOKEN> . <RARE_TOKEN> ) { </a> 
<a> throw new IllegalArgumentException ( </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> " + version ) ; </a> 
<a> } </a> 
<a> this . version = version ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ByteBuf <RARE_TOKEN> ) { </a> 
<a> byte [ ] in = new byte [ <RARE_TOKEN> . readableBytes ( ) ] ; </a> 
<a> <RARE_TOKEN> . readBytes ( in ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( in ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void decode ( ByteBuf <RARE_TOKEN> ) throws Exception { </a> 
<a> try { </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( out ) ; </a> 
<a> if ( <RARE_TOKEN> == 0 && <RARE_TOKEN> . <RARE_TOKEN> ( ) ) { </a> 
<a> if ( version < 3 ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( out ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> . writeBytes ( out , 0 , <RARE_TOKEN> ) ; </a> 
<a> } catch ( <RARE_TOKEN> e ) { </a> 
<a> throw new <RARE_TOKEN> ( </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> header <RARE_TOKEN> , e ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void end ( ) { </a> 
<a> <RARE_TOKEN> . end ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . spdy ; </a> 
<a> import io . netty . handler . codec . http . HttpMethod ; </a> 
<a> import io . netty . handler . codec . http . HttpResponseStatus ; </a> 
<a> import io . netty . handler . codec . http . HttpVersion ; </a> 
<a> import java . util . <RARE_TOKEN> ; </a> 
<a> import java . util . List ; </a> 
<a> import java . util . Map ; </a> 
<a> import java . util . Set ; </a> 
<a> import java . util . <RARE_TOKEN> ; </a> 
<a> public class <RARE_TOKEN> { </a> 
<a> public static final class <RARE_TOKEN> { </a> 
<a> public static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> public static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> public static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> public static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> public static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> public static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private <RARE_TOKEN> ( ) { } </a> 
<a> } </a> 
<a> public static final class <RARE_TOKEN> { </a> 
<a> public static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> public static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> public static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> public static final String URL = <RARE_TOKEN> ; </a> 
<a> public static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private <RARE_TOKEN> ( ) { } </a> 
<a> } </a> 
<a> public static String getHeader ( SpdyHeaderBlock block , String name ) { </a> 
<a> return block . getHeader ( name ) ; </a> 
<a> } </a> 
<a> public static String getHeader ( SpdyHeaderBlock block , String name , String <RARE_TOKEN> ) { </a> 
<a> String value = block . getHeader ( name ) ; </a> 
<a> if ( value == null ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> return value ; </a> 
<a> } </a> 
<a> public static void setHeader ( SpdyHeaderBlock block , String name , Object value ) { </a> 
<a> block . setHeader ( name , value ) ; </a> 
<a> } </a> 
<a> public static void setHeader ( SpdyHeaderBlock block , String name , <RARE_TOKEN> < ? > values ) { </a> 
<a> block . setHeader ( name , values ) ; </a> 
<a> } </a> 
<a> public static void addHeader ( SpdyHeaderBlock block , String name , Object value ) { </a> 
<a> block . addHeader ( name , value ) ; </a> 
<a> } </a> 
<a> public static void <RARE_TOKEN> ( SpdyHeaderBlock block ) { </a> 
<a> block . removeHeader ( <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public static String <RARE_TOKEN> ( SpdyHeaderBlock block ) { </a> 
<a> return block . getHeader ( <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public static void <RARE_TOKEN> ( SpdyHeaderBlock block , String host ) { </a> 
<a> block . setHeader ( <RARE_TOKEN> . <RARE_TOKEN> , host ) ; </a> 
<a> } </a> 
<a> @ Deprecated </a> 
<a> public static void <RARE_TOKEN> ( SpdyHeaderBlock block ) { </a> 
<a> <RARE_TOKEN> ( 2 , block ) ; </a> 
<a> } </a> 
<a> public static void <RARE_TOKEN> ( int spdyVersion , SpdyHeaderBlock block ) { </a> 
<a> if ( spdyVersion < 3 ) { </a> 
<a> block . removeHeader ( <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> } else { </a> 
<a> block . removeHeader ( <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Deprecated </a> 
<a> public static HttpMethod <RARE_TOKEN> ( SpdyHeaderBlock block ) { </a> 
<a> return <RARE_TOKEN> ( 2 , block ) ; </a> 
<a> } </a> 
<a> public static HttpMethod <RARE_TOKEN> ( int spdyVersion , SpdyHeaderBlock block ) { </a> 
<a> try { </a> 
<a> if ( spdyVersion < 3 ) { </a> 
<a> return HttpMethod . valueOf ( block . getHeader ( <RARE_TOKEN> . <RARE_TOKEN> ) ) ; </a> 
<a> } else { </a> 
<a> return HttpMethod . valueOf ( block . getHeader ( <RARE_TOKEN> . <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> } catch ( Exception e ) { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Deprecated </a> 
<a> public static void <RARE_TOKEN> ( SpdyHeaderBlock block , HttpMethod method ) { </a> 
<a> <RARE_TOKEN> ( 2 , block , method ) ; </a> 
<a> } </a> 
<a> public static void <RARE_TOKEN> ( int spdyVersion , SpdyHeaderBlock block , HttpMethod method ) { </a> 
<a> if ( spdyVersion < 3 ) { </a> 
<a> block . setHeader ( <RARE_TOKEN> . <RARE_TOKEN> , method . getName ( ) ) ; </a> 
<a> } else { </a> 
<a> block . setHeader ( <RARE_TOKEN> . <RARE_TOKEN> , method . getName ( ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Deprecated </a> 
<a> public static void <RARE_TOKEN> ( SpdyHeaderBlock block ) { </a> 
<a> <RARE_TOKEN> ( 2 , block ) ; </a> 
<a> } </a> 
<a> public static void <RARE_TOKEN> ( int spdyVersion , SpdyHeaderBlock block ) { </a> 
<a> if ( spdyVersion < 2 ) { </a> 
<a> block . removeHeader ( <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> } else { </a> 
<a> block . removeHeader ( <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Deprecated </a> 
<a> public static String <RARE_TOKEN> ( SpdyHeaderBlock block ) { </a> 
<a> return <RARE_TOKEN> ( 2 , block ) ; </a> 
<a> } </a> 
<a> public static String <RARE_TOKEN> ( int spdyVersion , SpdyHeaderBlock block ) { </a> 
<a> if ( spdyVersion < 3 ) { </a> 
<a> return block . getHeader ( <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> } else { </a> 
<a> return block . getHeader ( <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Deprecated </a> 
<a> public static void <RARE_TOKEN> ( SpdyHeaderBlock block , String <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( 2 , block , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public static void <RARE_TOKEN> ( int spdyVersion , SpdyHeaderBlock block , String <RARE_TOKEN> ) { </a> 
<a> if ( spdyVersion < 3 ) { </a> 
<a> block . setHeader ( <RARE_TOKEN> . <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } else { </a> 
<a> block . setHeader ( <RARE_TOKEN> . <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Deprecated </a> 
<a> public static void <RARE_TOKEN> ( SpdyHeaderBlock block ) { </a> 
<a> <RARE_TOKEN> ( 2 , block ) ; </a> 
<a> } </a> 
<a> public static void <RARE_TOKEN> ( int spdyVersion , SpdyHeaderBlock block ) { </a> 
<a> if ( spdyVersion < 3 ) { </a> 
<a> block . removeHeader ( <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> } else { </a> 
<a> block . removeHeader ( <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Deprecated </a> 
<a> public static HttpResponseStatus getStatus ( SpdyHeaderBlock block ) { </a> 
<a> return getStatus ( 2 , block ) ; </a> 
<a> } </a> 
<a> public static HttpResponseStatus getStatus ( int spdyVersion , SpdyHeaderBlock block ) { </a> 
<a> try { </a> 
<a> String status ; </a> 
<a> if ( spdyVersion < 3 ) { </a> 
<a> status = block . getHeader ( <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> } else { </a> 
<a> status = block . getHeader ( <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> int <RARE_TOKEN> = status . indexOf ( ' ' ) ; </a> 
<a> if ( <RARE_TOKEN> == - 1 ) { </a> 
<a> return HttpResponseStatus . valueOf ( Integer . parseInt ( status ) ) ; </a> 
<a> } else { </a> 
<a> int code = Integer . parseInt ( status . substring ( 0 , <RARE_TOKEN> ) ) ; </a> 
<a> String <RARE_TOKEN> = status . substring ( <RARE_TOKEN> + 1 ) ; </a> 
<a> HttpResponseStatus <RARE_TOKEN> = HttpResponseStatus . valueOf ( code ) ; </a> 
<a> if ( <RARE_TOKEN> . <RARE_TOKEN> ( ) . equals ( <RARE_TOKEN> ) ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } else { </a> 
<a> return new HttpResponseStatus ( code , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } catch ( Exception e ) { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Deprecated </a> 
<a> public static void <RARE_TOKEN> ( SpdyHeaderBlock block , HttpResponseStatus status ) { </a> 
<a> <RARE_TOKEN> ( 2 , block , status ) ; </a> 
<a> } </a> 
<a> public static void <RARE_TOKEN> ( int spdyVersion , SpdyHeaderBlock block , HttpResponseStatus status ) { </a> 
<a> if ( spdyVersion < 3 ) { </a> 
<a> block . setHeader ( <RARE_TOKEN> . <RARE_TOKEN> , status . toString ( ) ) ; </a> 
<a> } else { </a> 
<a> block . setHeader ( <RARE_TOKEN> . <RARE_TOKEN> , status . toString ( ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Deprecated </a> 
<a> public static void <RARE_TOKEN> ( SpdyHeaderBlock block ) { </a> 
<a> <RARE_TOKEN> ( 2 , block ) ; </a> 
<a> } </a> 
<a> public static void <RARE_TOKEN> ( int spdyVersion , SpdyHeaderBlock block ) { </a> 
<a> if ( spdyVersion < 3 ) { </a> 
<a> block . removeHeader ( <RARE_TOKEN> . URL ) ; </a> 
<a> } else { </a> 
<a> block . removeHeader ( <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Deprecated </a> 
<a> public static String <RARE_TOKEN> ( SpdyHeaderBlock block ) { </a> 
<a> return <RARE_TOKEN> ( 2 , block ) ; </a> 
<a> } </a> 
<a> public static String <RARE_TOKEN> ( int spdyVersion , SpdyHeaderBlock block ) { </a> 
<a> if ( spdyVersion < 3 ) { </a> 
<a> return block . getHeader ( <RARE_TOKEN> . URL ) ; </a> 
<a> } else { </a> 
<a> return block . getHeader ( <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Deprecated </a> 
<a> public static void <RARE_TOKEN> ( SpdyHeaderBlock block , String path ) { </a> 
<a> <RARE_TOKEN> ( 2 , block , path ) ; </a> 
<a> } </a> 
<a> public static void <RARE_TOKEN> ( int spdyVersion , SpdyHeaderBlock block , String path ) { </a> 
<a> if ( spdyVersion < 3 ) { </a> 
<a> block . setHeader ( <RARE_TOKEN> . URL , path ) ; </a> 
<a> } else { </a> 
<a> block . setHeader ( <RARE_TOKEN> . <RARE_TOKEN> , path ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Deprecated </a> 
<a> public static void <RARE_TOKEN> ( SpdyHeaderBlock block ) { </a> 
<a> <RARE_TOKEN> ( 2 , block ) ; </a> 
<a> } </a> 
<a> public static void <RARE_TOKEN> ( int spdyVersion , SpdyHeaderBlock block ) { </a> 
<a> if ( spdyVersion < 3 ) { </a> 
<a> block . removeHeader ( <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> } else { </a> 
<a> block . removeHeader ( <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Deprecated </a> 
<a> public static HttpVersion <RARE_TOKEN> ( SpdyHeaderBlock block ) { </a> 
<a> return <RARE_TOKEN> ( 2 , block ) ; </a> 
<a> } </a> 
<a> public static HttpVersion <RARE_TOKEN> ( int spdyVersion , SpdyHeaderBlock block ) { </a> 
<a> try { </a> 
<a> if ( spdyVersion < 3 ) { </a> 
<a> return HttpVersion . valueOf ( block . getHeader ( <RARE_TOKEN> . <RARE_TOKEN> ) ) ; </a> 
<a> } else { </a> 
<a> return HttpVersion . valueOf ( block . getHeader ( <RARE_TOKEN> . <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> } catch ( Exception e ) { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Deprecated </a> 
<a> public static void <RARE_TOKEN> ( SpdyHeaderBlock block , HttpVersion <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( 2 , block , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public static void <RARE_TOKEN> ( int spdyVersion , SpdyHeaderBlock block , HttpVersion <RARE_TOKEN> ) { </a> 
<a> if ( spdyVersion < 3 ) { </a> 
<a> block . setHeader ( <RARE_TOKEN> . <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> } else { </a> 
<a> block . setHeader ( <RARE_TOKEN> . <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private static final int <RARE_TOKEN> = 17 ; </a> 
<a> private static int <RARE_TOKEN> ( String name ) { </a> 
<a> int h = 0 ; </a> 
<a> for ( int i = name . length ( ) - 1 ; i >= 0 ; i -- ) { </a> 
<a> char c = name . charAt ( i ) ; </a> 
<a> if ( c >= <RARE_TOKEN> && c <= <RARE_TOKEN> ) { </a> 
<a> c += 32 ; </a> 
<a> } </a> 
<a> h = <RARE_TOKEN> * h + c ; </a> 
<a> } </a> 
<a> if ( h > 0 ) { </a> 
<a> return h ; </a> 
<a> } else if ( h == Integer . <RARE_TOKEN> ) { </a> 
<a> return Integer . MAX_VALUE ; </a> 
<a> } else { </a> 
<a> return - h ; </a> 
<a> } </a> 
<a> } </a> 
<a> private static boolean <RARE_TOKEN> ( String <RARE_TOKEN> , String <RARE_TOKEN> ) { </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> . length ( ) ; </a> 
<a> if ( <RARE_TOKEN> != <RARE_TOKEN> . length ( ) ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> for ( int i = <RARE_TOKEN> - 1 ; i >= 0 ; i -- ) { </a> 
<a> char <RARE_TOKEN> = <RARE_TOKEN> . charAt ( i ) ; </a> 
<a> char <RARE_TOKEN> = <RARE_TOKEN> . charAt ( i ) ; </a> 
<a> if ( <RARE_TOKEN> != <RARE_TOKEN> ) { </a> 
<a> if ( <RARE_TOKEN> >= <RARE_TOKEN> && <RARE_TOKEN> <= <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> += 32 ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> >= <RARE_TOKEN> && <RARE_TOKEN> <= <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> += 32 ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> != <RARE_TOKEN> ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> return true ; </a> 
<a> } </a> 
<a> private static int index ( int <RARE_TOKEN> ) { </a> 
<a> return <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> private final Entry [ ] <RARE_TOKEN> = new Entry [ <RARE_TOKEN> ] ; </a> 
<a> private final Entry <RARE_TOKEN> = new Entry ( - 1 , null , null ) ; </a> 
<a> <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> void addHeader ( final String name , final Object value ) { </a> 
<a> String <RARE_TOKEN> = name . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> String <RARE_TOKEN> = toString ( value ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> int h = <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> int i = index ( h ) ; </a> 
<a> <RARE_TOKEN> ( h , i , <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( int h , int i , final String name , final String value ) { </a> 
<a> Entry e = <RARE_TOKEN> [ i ] ; </a> 
<a> Entry <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> [ i ] = <RARE_TOKEN> = new Entry ( h , name , value ) ; </a> 
<a> <RARE_TOKEN> . next = e ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> void removeHeader ( final String name ) { </a> 
<a> if ( name == null ) { </a> 
<a> throw new NullPointerException ( "name" ) ; </a> 
<a> } </a> 
<a> String <RARE_TOKEN> = name . <RARE_TOKEN> ( ) ; </a> 
<a> int h = <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> int i = index ( h ) ; </a> 
<a> <RARE_TOKEN> ( h , i , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( int h , int i , String name ) { </a> 
<a> Entry e = <RARE_TOKEN> [ i ] ; </a> 
<a> if ( e == null ) { </a> 
<a> return ; </a> 
<a> } </a> 
<a> for ( ; ; ) { </a> 
<a> if ( e . <RARE_TOKEN> == h && <RARE_TOKEN> ( name , e . key ) ) { </a> 
<a> e . remove ( ) ; </a> 
<a> Entry next = e . next ; </a> 
<a> if ( next != null ) { </a> 
<a> <RARE_TOKEN> [ i ] = next ; </a> 
<a> e = next ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> [ i ] = null ; </a> 
<a> return ; </a> 
<a> } </a> 
<a> } else { </a> 
<a> break ; </a> 
<a> } </a> 
<a> } </a> 
<a> for ( ; ; ) { </a> 
<a> Entry next = e . next ; </a> 
<a> if ( next == null ) { </a> 
<a> break ; </a> 
<a> } </a> 
<a> if ( next . <RARE_TOKEN> == h && <RARE_TOKEN> ( name , next . key ) ) { </a> 
<a> e . next = next . next ; </a> 
<a> next . remove ( ) ; </a> 
<a> } else { </a> 
<a> e = next ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> void setHeader ( final String name , final Object value ) { </a> 
<a> String <RARE_TOKEN> = name . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> String <RARE_TOKEN> = toString ( value ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> int h = <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> int i = index ( h ) ; </a> 
<a> <RARE_TOKEN> ( h , i , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( h , i , <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> void setHeader ( final String name , final <RARE_TOKEN> < ? > values ) { </a> 
<a> if ( values == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> String <RARE_TOKEN> = name . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> int h = <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> int i = index ( h ) ; </a> 
<a> <RARE_TOKEN> ( h , i , <RARE_TOKEN> ) ; </a> 
<a> for ( Object v : values ) { </a> 
<a> if ( v == null ) { </a> 
<a> break ; </a> 
<a> } </a> 
<a> String <RARE_TOKEN> = toString ( v ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( h , i , <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> void <RARE_TOKEN> ( ) { </a> 
<a> for ( int i = 0 ; i < <RARE_TOKEN> . length ; i ++ ) { </a> 
<a> <RARE_TOKEN> [ i ] = null ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> String getHeader ( final String name ) { </a> 
<a> if ( name == null ) { </a> 
<a> throw new NullPointerException ( "name" ) ; </a> 
<a> } </a> 
<a> int h = <RARE_TOKEN> ( name ) ; </a> 
<a> int i = index ( h ) ; </a> 
<a> Entry e = <RARE_TOKEN> [ i ] ; </a> 
<a> while ( e != null ) { </a> 
<a> if ( e . <RARE_TOKEN> == h && <RARE_TOKEN> ( name , e . key ) ) { </a> 
<a> return e . value ; </a> 
<a> } </a> 
<a> e = e . next ; </a> 
<a> } </a> 
<a> return null ; </a> 
<a> } </a> 
<a> List < String > getHeaders ( final String name ) { </a> 
<a> if ( name == null ) { </a> 
<a> throw new NullPointerException ( "name" ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> < String > values = new <RARE_TOKEN> < String > ( ) ; </a> 
<a> int h = <RARE_TOKEN> ( name ) ; </a> 
<a> int i = index ( h ) ; </a> 
<a> Entry e = <RARE_TOKEN> [ i ] ; </a> 
<a> while ( e != null ) { </a> 
<a> if ( e . <RARE_TOKEN> == h && <RARE_TOKEN> ( name , e . key ) ) { </a> 
<a> values . <RARE_TOKEN> ( e . value ) ; </a> 
<a> } </a> 
<a> e = e . next ; </a> 
<a> } </a> 
<a> return values ; </a> 
<a> } </a> 
<a> List < Map . Entry < String , String > > getHeaders ( ) { </a> 
<a> List < Map . Entry < String , String > > <RARE_TOKEN> = </a> 
<a> new <RARE_TOKEN> < Map . Entry < String , String > > ( ) ; </a> 
<a> Entry e = <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> while ( e != <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> . add ( e ) ; </a> 
<a> e = e . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> boolean <RARE_TOKEN> ( String name ) { </a> 
<a> return getHeader ( name ) != null ; </a> 
<a> } </a> 
<a> Set < String > <RARE_TOKEN> ( ) { </a> 
<a> Set < String > names = new <RARE_TOKEN> < String > ( ) ; </a> 
<a> Entry e = <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> while ( e != <RARE_TOKEN> ) { </a> 
<a> names . add ( e . key ) ; </a> 
<a> e = e . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> return names ; </a> 
<a> } </a> 
<a> private static String toString ( Object value ) { </a> 
<a> if ( value == null ) { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> return value . toString ( ) ; </a> 
<a> } </a> 
<a> private static final class Entry implements Map . Entry < String , String > { </a> 
<a> final int <RARE_TOKEN> ; </a> 
<a> final String key ; </a> 
<a> String value ; </a> 
<a> Entry next ; </a> 
<a> Entry <RARE_TOKEN> , <RARE_TOKEN> ; </a> 
<a> Entry ( int <RARE_TOKEN> , String key , String value ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> this . key = key ; </a> 
<a> this . value = value ; </a> 
<a> } </a> 
<a> void remove ( ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> void <RARE_TOKEN> ( Entry e ) { </a> 
<a> <RARE_TOKEN> = e ; </a> 
<a> <RARE_TOKEN> = e . <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> = this ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> = this ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public String <RARE_TOKEN> ( ) { </a> 
<a> return key ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public String getValue ( ) { </a> 
<a> return value ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public String <RARE_TOKEN> ( String value ) { </a> 
<a> if ( value == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( value ) ; </a> 
<a> String <RARE_TOKEN> = this . value ; </a> 
<a> this . value = value ; </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public String toString ( ) { </a> 
<a> return key + <RARE_TOKEN> + value ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . spdy ; </a> 
<a> public interface <RARE_TOKEN> extends SpdyHeaderBlock , <RARE_TOKEN> { </a> 
<a> int getStreamId ( ) ; </a> 
<a> void <RARE_TOKEN> ( int streamID ) ; </a> 
<a> boolean isLast ( ) ; </a> 
<a> void <RARE_TOKEN> ( boolean last ) ; </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . spdy ; </a> 
<a> import io . netty . channel . <RARE_TOKEN> ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> public <RARE_TOKEN> ( int version , int <RARE_TOKEN> ) { </a> 
<a> super ( </a> 
<a> new <RARE_TOKEN> ( version , <RARE_TOKEN> ) , </a> 
<a> new <RARE_TOKEN> ( version ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . spdy ; </a> 
<a> import io . netty . buffer . ByteBuf ; </a> 
<a> import io . netty . buffer . Unpooled ; </a> 
<a> import io . netty . channel . ChannelHandlerContext ; </a> 
<a> import io . netty . handler . codec . <RARE_TOKEN> ; </a> 
<a> import io . netty . handler . codec . TooLongFrameException ; </a> 
<a> import io . netty . handler . codec . http . <RARE_TOKEN> ; </a> 
<a> import io . netty . handler . codec . http . <RARE_TOKEN> ; </a> 
<a> import io . netty . handler . codec . http . HttpHeaders ; </a> 
<a> import io . netty . handler . codec . http . HttpMessage ; </a> 
<a> import io . netty . handler . codec . http . HttpMethod ; </a> 
<a> import io . netty . handler . codec . http . HttpRequest ; </a> 
<a> import io . netty . handler . codec . http . HttpResponse ; </a> 
<a> import io . netty . handler . codec . http . HttpResponseStatus ; </a> 
<a> import io . netty . handler . codec . http . HttpVersion ; </a> 
<a> import java . util . HashMap ; </a> 
<a> import java . util . Map ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> < Object , HttpMessage > { </a> 
<a> private final int spdyVersion ; </a> 
<a> private final int <RARE_TOKEN> ; </a> 
<a> private final Map < Integer , HttpMessage > <RARE_TOKEN> = new HashMap < Integer , HttpMessage > ( ) ; </a> 
<a> public <RARE_TOKEN> ( int version , int <RARE_TOKEN> ) { </a> 
<a> if ( version < <RARE_TOKEN> . <RARE_TOKEN> || version > <RARE_TOKEN> . <RARE_TOKEN> ) { </a> 
<a> throw new IllegalArgumentException ( </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> " + version ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> <= 0 ) { </a> 
<a> throw new IllegalArgumentException ( </a> 
<a> <RARE_TOKEN> must be a <RARE_TOKEN> <RARE_TOKEN> " + <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> spdyVersion = version ; </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public HttpMessage decode ( ChannelHandlerContext ctx , Object msg ) throws Exception { </a> 
<a> if ( msg instanceof <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> spdySynStreamFrame = ( <RARE_TOKEN> ) msg ; </a> 
<a> int streamID = spdySynStreamFrame . getStreamId ( ) ; </a> 
<a> if ( <RARE_TOKEN> . <RARE_TOKEN> ( streamID ) ) { </a> 
<a> int <RARE_TOKEN> = spdySynStreamFrame . <RARE_TOKEN> ( ) ; </a> 
<a> if ( <RARE_TOKEN> == 0 ) { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = </a> 
<a> new <RARE_TOKEN> ( streamID , SpdyStreamStatus . <RARE_TOKEN> ) ; </a> 
<a> ctx . write ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> String URL = <RARE_TOKEN> . <RARE_TOKEN> ( spdyVersion , spdySynStreamFrame ) ; </a> 
<a> if ( URL == null ) { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = </a> 
<a> new <RARE_TOKEN> ( streamID , SpdyStreamStatus . <RARE_TOKEN> ) ; </a> 
<a> ctx . write ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> try { </a> 
<a> HttpResponse httpResponse = <RARE_TOKEN> ( spdyVersion , spdySynStreamFrame ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( httpResponse , streamID ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( httpResponse , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( httpResponse , spdySynStreamFrame . <RARE_TOKEN> ( ) ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( httpResponse , URL ) ; </a> 
<a> if ( spdySynStreamFrame . isLast ( ) ) { </a> 
<a> HttpHeaders . <RARE_TOKEN> ( httpResponse , 0 ) ; </a> 
<a> return httpResponse ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> . put ( new Integer ( streamID ) , httpResponse ) ; </a> 
<a> } </a> 
<a> } catch ( Exception e ) { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = </a> 
<a> new <RARE_TOKEN> ( streamID , SpdyStreamStatus . <RARE_TOKEN> ) ; </a> 
<a> ctx . write ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } else { </a> 
<a> try { </a> 
<a> HttpRequest <RARE_TOKEN> = <RARE_TOKEN> ( spdyVersion , spdySynStreamFrame ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> , streamID ) ; </a> 
<a> if ( spdySynStreamFrame . isLast ( ) ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> . put ( new Integer ( streamID ) , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } catch ( Exception e ) { </a> 
<a> <RARE_TOKEN> spdySynReplyFrame = new <RARE_TOKEN> ( streamID ) ; </a> 
<a> spdySynReplyFrame . <RARE_TOKEN> ( true ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( spdyVersion , spdySynReplyFrame , HttpResponseStatus . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( spdyVersion , spdySynReplyFrame , HttpVersion . <RARE_TOKEN> ) ; </a> 
<a> ctx . write ( spdySynReplyFrame ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } else if ( msg instanceof <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> spdySynReplyFrame = ( <RARE_TOKEN> ) msg ; </a> 
<a> int streamID = spdySynReplyFrame . getStreamId ( ) ; </a> 
<a> try { </a> 
<a> HttpResponse httpResponse = <RARE_TOKEN> ( spdyVersion , spdySynReplyFrame ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( httpResponse , streamID ) ; </a> 
<a> if ( spdySynReplyFrame . isLast ( ) ) { </a> 
<a> HttpHeaders . <RARE_TOKEN> ( httpResponse , 0 ) ; </a> 
<a> return httpResponse ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> . put ( new Integer ( streamID ) , httpResponse ) ; </a> 
<a> } </a> 
<a> } catch ( Exception e ) { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = </a> 
<a> new <RARE_TOKEN> ( streamID , SpdyStreamStatus . <RARE_TOKEN> ) ; </a> 
<a> ctx . write ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } else if ( msg instanceof <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = ( <RARE_TOKEN> ) msg ; </a> 
<a> Integer streamID = new Integer ( <RARE_TOKEN> . getStreamId ( ) ) ; </a> 
<a> HttpMessage httpMessage = <RARE_TOKEN> . get ( streamID ) ; </a> 
<a> if ( httpMessage == null ) { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> for ( Map . Entry < String , String > e : <RARE_TOKEN> . getHeaders ( ) ) { </a> 
<a> httpMessage . addHeader ( e . <RARE_TOKEN> ( ) , e . getValue ( ) ) ; </a> 
<a> } </a> 
<a> } else if ( msg instanceof <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> spdyDataFrame = ( <RARE_TOKEN> ) msg ; </a> 
<a> Integer streamID = new Integer ( spdyDataFrame . getStreamId ( ) ) ; </a> 
<a> HttpMessage httpMessage = <RARE_TOKEN> . get ( streamID ) ; </a> 
<a> if ( httpMessage == null ) { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> ByteBuf content = httpMessage . getContent ( ) ; </a> 
<a> if ( content . readableBytes ( ) > <RARE_TOKEN> - spdyDataFrame . getData ( ) . readableBytes ( ) ) { </a> 
<a> <RARE_TOKEN> . remove ( streamID ) ; </a> 
<a> throw new TooLongFrameException ( </a> 
<a> <RARE_TOKEN> content length <RARE_TOKEN> " + <RARE_TOKEN> + " <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> ByteBuf <RARE_TOKEN> = spdyDataFrame . getData ( ) ; </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> . readableBytes ( ) ; </a> 
<a> if ( content == Unpooled . EMPTY_BUFFER ) { </a> 
<a> content = Unpooled . buffer ( <RARE_TOKEN> ) ; </a> 
<a> content . writeBytes ( <RARE_TOKEN> , <RARE_TOKEN> . readerIndex ( ) , <RARE_TOKEN> ) ; </a> 
<a> httpMessage . <RARE_TOKEN> ( content ) ; </a> 
<a> } else { </a> 
<a> content . writeBytes ( <RARE_TOKEN> , <RARE_TOKEN> . readerIndex ( ) , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( spdyDataFrame . isLast ( ) ) { </a> 
<a> HttpHeaders . <RARE_TOKEN> ( httpMessage , content . readableBytes ( ) ) ; </a> 
<a> <RARE_TOKEN> . remove ( streamID ) ; </a> 
<a> return httpMessage ; </a> 
<a> } </a> 
<a> } else if ( msg instanceof <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = ( <RARE_TOKEN> ) msg ; </a> 
<a> Integer streamID = new Integer ( <RARE_TOKEN> . getStreamId ( ) ) ; </a> 
<a> <RARE_TOKEN> . remove ( streamID ) ; </a> 
<a> } </a> 
<a> return null ; </a> 
<a> } </a> 
<a> private static HttpRequest <RARE_TOKEN> ( int spdyVersion , SpdyHeaderBlock <RARE_TOKEN> ) </a> 
<a> throws Exception { </a> 
<a> HttpMethod method = <RARE_TOKEN> . <RARE_TOKEN> ( spdyVersion , <RARE_TOKEN> ) ; </a> 
<a> String url = <RARE_TOKEN> . <RARE_TOKEN> ( spdyVersion , <RARE_TOKEN> ) ; </a> 
<a> HttpVersion <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( spdyVersion , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( spdyVersion , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( spdyVersion , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( spdyVersion , <RARE_TOKEN> ) ; </a> 
<a> HttpRequest <RARE_TOKEN> = new <RARE_TOKEN> ( <RARE_TOKEN> , method , url ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( spdyVersion , <RARE_TOKEN> ) ; </a> 
<a> if ( spdyVersion >= 3 ) { </a> 
<a> String host = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> HttpHeaders . <RARE_TOKEN> ( <RARE_TOKEN> , host ) ; </a> 
<a> } </a> 
<a> for ( Map . Entry < String , String > e : <RARE_TOKEN> . getHeaders ( ) ) { </a> 
<a> <RARE_TOKEN> . addHeader ( e . <RARE_TOKEN> ( ) , e . getValue ( ) ) ; </a> 
<a> } </a> 
<a> HttpHeaders . <RARE_TOKEN> ( <RARE_TOKEN> , true ) ; </a> 
<a> <RARE_TOKEN> . removeHeader ( HttpHeaders . Names . <RARE_TOKEN> ) ; </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> private static HttpResponse <RARE_TOKEN> ( int spdyVersion , SpdyHeaderBlock <RARE_TOKEN> ) </a> 
<a> throws Exception { </a> 
<a> HttpResponseStatus status = <RARE_TOKEN> . getStatus ( spdyVersion , <RARE_TOKEN> ) ; </a> 
<a> HttpVersion version = <RARE_TOKEN> . <RARE_TOKEN> ( spdyVersion , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( spdyVersion , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( spdyVersion , <RARE_TOKEN> ) ; </a> 
<a> HttpResponse httpResponse = new <RARE_TOKEN> ( version , status ) ; </a> 
<a> for ( Map . Entry < String , String > e : <RARE_TOKEN> . getHeaders ( ) ) { </a> 
<a> httpResponse . addHeader ( e . <RARE_TOKEN> ( ) , e . getValue ( ) ) ; </a> 
<a> } </a> 
<a> HttpHeaders . <RARE_TOKEN> ( httpResponse , true ) ; </a> 
<a> httpResponse . removeHeader ( HttpHeaders . Names . <RARE_TOKEN> ) ; </a> 
<a> httpResponse . removeHeader ( HttpHeaders . Names . <RARE_TOKEN> ) ; </a> 
<a> return httpResponse ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . spdy ; </a> 
<a> import io . netty . channel . ChannelHandlerContext ; </a> 
<a> import io . netty . handler . codec . <RARE_TOKEN> ; </a> 
<a> import io . netty . handler . codec . <RARE_TOKEN> ; </a> 
<a> import io . netty . handler . codec . http . HttpChunk ; </a> 
<a> import io . netty . handler . codec . http . <RARE_TOKEN> ; </a> 
<a> import io . netty . handler . codec . http . HttpHeaders ; </a> 
<a> import io . netty . handler . codec . http . HttpMessage ; </a> 
<a> import io . netty . handler . codec . http . HttpRequest ; </a> 
<a> import io . netty . handler . codec . http . HttpResponse ; </a> 
<a> import java . util . ArrayList ; </a> 
<a> import java . util . List ; </a> 
<a> import java . util . Map ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> < Object , Object > { </a> 
<a> private final int spdyVersion ; </a> 
<a> private volatile int <RARE_TOKEN> ; </a> 
<a> public <RARE_TOKEN> ( int version ) { </a> 
<a> if ( version < <RARE_TOKEN> . <RARE_TOKEN> || version > <RARE_TOKEN> . <RARE_TOKEN> ) { </a> 
<a> throw new IllegalArgumentException ( </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> " + version ) ; </a> 
<a> } </a> 
<a> spdyVersion = version ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( Object msg ) throws Exception { </a> 
<a> return msg instanceof HttpRequest || </a> 
<a> msg instanceof HttpResponse || </a> 
<a> msg instanceof HttpChunk ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public Object encode ( ChannelHandlerContext ctx , Object msg ) throws Exception { </a> 
<a> List < Object > out = new ArrayList < Object > ( ) ; </a> 
<a> if ( msg instanceof HttpRequest ) { </a> 
<a> HttpRequest <RARE_TOKEN> = ( HttpRequest ) msg ; </a> 
<a> <RARE_TOKEN> spdySynStreamFrame = <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> int streamID = spdySynStreamFrame . getStreamId ( ) ; </a> 
<a> out . add ( spdySynStreamFrame ) ; </a> 
<a> <RARE_TOKEN> ( out , streamID , <RARE_TOKEN> ) ; </a> 
<a> } else if ( msg instanceof HttpResponse ) { </a> 
<a> HttpResponse httpResponse = ( HttpResponse ) msg ; </a> 
<a> if ( httpResponse . <RARE_TOKEN> ( <RARE_TOKEN> . Names . <RARE_TOKEN> ) ) { </a> 
<a> <RARE_TOKEN> spdySynStreamFrame = <RARE_TOKEN> ( httpResponse ) ; </a> 
<a> int streamID = spdySynStreamFrame . getStreamId ( ) ; </a> 
<a> out . add ( spdySynStreamFrame ) ; </a> 
<a> <RARE_TOKEN> ( out , streamID , httpResponse ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> spdySynReplyFrame = <RARE_TOKEN> ( httpResponse ) ; </a> 
<a> int streamID = spdySynReplyFrame . getStreamId ( ) ; </a> 
<a> out . add ( spdySynReplyFrame ) ; </a> 
<a> <RARE_TOKEN> ( out , streamID , httpResponse ) ; </a> 
<a> } </a> 
<a> } else if ( msg instanceof HttpChunk ) { </a> 
<a> HttpChunk chunk = ( HttpChunk ) msg ; </a> 
<a> <RARE_TOKEN> spdyDataFrame = new <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> spdyDataFrame . <RARE_TOKEN> ( chunk . getContent ( ) ) ; </a> 
<a> spdyDataFrame . <RARE_TOKEN> ( chunk . isLast ( ) ) ; </a> 
<a> if ( chunk instanceof <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = ( <RARE_TOKEN> ) chunk ; </a> 
<a> List < Map . Entry < String , String > > <RARE_TOKEN> = <RARE_TOKEN> . getHeaders ( ) ; </a> 
<a> if ( <RARE_TOKEN> . isEmpty ( ) ) { </a> 
<a> out . add ( spdyDataFrame ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> for ( Map . Entry < String , String > entry : <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> . addHeader ( entry . <RARE_TOKEN> ( ) , entry . getValue ( ) ) ; </a> 
<a> } </a> 
<a> out . add ( <RARE_TOKEN> ) ; </a> 
<a> out . add ( spdyDataFrame ) ; </a> 
<a> } </a> 
<a> } else { </a> 
<a> out . add ( spdyDataFrame ) ; </a> 
<a> } </a> 
<a> } else { </a> 
<a> throw new <RARE_TOKEN> ( msg ) ; </a> 
<a> } </a> 
<a> return out . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> private static void <RARE_TOKEN> ( List < Object > out , int streamID , HttpMessage httpMessage ) { </a> 
<a> if ( ! httpMessage . getContent ( ) . readable ( ) ) { </a> 
<a> return ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> spdyDataFrame = new <RARE_TOKEN> ( streamID ) ; </a> 
<a> spdyDataFrame . <RARE_TOKEN> ( httpMessage . getContent ( ) ) ; </a> 
<a> spdyDataFrame . <RARE_TOKEN> ( true ) ; </a> 
<a> out . add ( spdyDataFrame ) ; </a> 
<a> } </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> ( HttpMessage httpMessage ) </a> 
<a> throws Exception { </a> 
<a> boolean <RARE_TOKEN> = httpMessage . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> int streamID = <RARE_TOKEN> . getStreamId ( httpMessage ) ; </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( httpMessage ) ; </a> 
<a> byte <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( httpMessage ) ; </a> 
<a> String URL = <RARE_TOKEN> . <RARE_TOKEN> ( httpMessage ) ; </a> 
<a> String <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( httpMessage ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( httpMessage ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( httpMessage ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( httpMessage ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( httpMessage ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( httpMessage ) ; </a> 
<a> httpMessage . removeHeader ( HttpHeaders . Names . <RARE_TOKEN> ) ; </a> 
<a> httpMessage . removeHeader ( <RARE_TOKEN> ) ; </a> 
<a> httpMessage . removeHeader ( <RARE_TOKEN> ) ; </a> 
<a> httpMessage . removeHeader ( HttpHeaders . Names . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> spdySynStreamFrame = </a> 
<a> new <RARE_TOKEN> ( streamID , <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> if ( httpMessage instanceof HttpRequest ) { </a> 
<a> HttpRequest <RARE_TOKEN> = ( HttpRequest ) httpMessage ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( spdyVersion , spdySynStreamFrame , <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( spdyVersion , spdySynStreamFrame , <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( spdyVersion , spdySynStreamFrame , httpMessage . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> if ( httpMessage instanceof HttpResponse ) { </a> 
<a> HttpResponse httpResponse = ( HttpResponse ) httpMessage ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( spdyVersion , spdySynStreamFrame , httpResponse . getStatus ( ) ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( spdyVersion , spdySynStreamFrame , URL ) ; </a> 
<a> spdySynStreamFrame . <RARE_TOKEN> ( true ) ; </a> 
<a> } </a> 
<a> if ( spdyVersion >= 3 ) { </a> 
<a> String host = HttpHeaders . <RARE_TOKEN> ( httpMessage ) ; </a> 
<a> httpMessage . removeHeader ( HttpHeaders . Names . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( spdySynStreamFrame , host ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( spdyVersion , spdySynStreamFrame , <RARE_TOKEN> ) ; </a> 
<a> for ( Map . Entry < String , String > entry : httpMessage . getHeaders ( ) ) { </a> 
<a> spdySynStreamFrame . addHeader ( entry . <RARE_TOKEN> ( ) , entry . getValue ( ) ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> = streamID ; </a> 
<a> spdySynStreamFrame . <RARE_TOKEN> ( false ) ; </a> 
<a> } else { </a> 
<a> spdySynStreamFrame . <RARE_TOKEN> ( httpMessage . getContent ( ) . readableBytes ( ) == 0 ) ; </a> 
<a> } </a> 
<a> return spdySynStreamFrame ; </a> 
<a> } </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> ( HttpResponse httpResponse ) </a> 
<a> throws Exception { </a> 
<a> boolean <RARE_TOKEN> = httpResponse . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> int streamID = <RARE_TOKEN> . getStreamId ( httpResponse ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( httpResponse ) ; </a> 
<a> httpResponse . removeHeader ( HttpHeaders . Names . <RARE_TOKEN> ) ; </a> 
<a> httpResponse . removeHeader ( <RARE_TOKEN> ) ; </a> 
<a> httpResponse . removeHeader ( <RARE_TOKEN> ) ; </a> 
<a> httpResponse . removeHeader ( HttpHeaders . Names . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> spdySynReplyFrame = new <RARE_TOKEN> ( streamID ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( spdyVersion , spdySynReplyFrame , httpResponse . getStatus ( ) ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( spdyVersion , spdySynReplyFrame , httpResponse . <RARE_TOKEN> ( ) ) ; </a> 
<a> for ( Map . Entry < String , String > entry : httpResponse . getHeaders ( ) ) { </a> 
<a> spdySynReplyFrame . addHeader ( entry . <RARE_TOKEN> ( ) , entry . getValue ( ) ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> = streamID ; </a> 
<a> spdySynReplyFrame . <RARE_TOKEN> ( false ) ; </a> 
<a> } else { </a> 
<a> spdySynReplyFrame . <RARE_TOKEN> ( httpResponse . getContent ( ) . readableBytes ( ) == 0 ) ; </a> 
<a> } </a> 
<a> return spdySynReplyFrame ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . spdy ; </a> 
<a> import io . netty . handler . codec . http . HttpHeaders ; </a> 
<a> import io . netty . handler . codec . http . HttpMessage ; </a> 
<a> public final class <RARE_TOKEN> { </a> 
<a> public static final class Names { </a> 
<a> public static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> public static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> public static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> public static final String URL = <RARE_TOKEN> ; </a> 
<a> public static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private Names ( ) { } </a> 
<a> } </a> 
<a> private <RARE_TOKEN> ( ) { </a> 
<a> } </a> 
<a> public static void <RARE_TOKEN> ( HttpMessage message ) { </a> 
<a> message . removeHeader ( Names . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public static int getStreamId ( HttpMessage message ) { </a> 
<a> return HttpHeaders . <RARE_TOKEN> ( message , Names . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public static void <RARE_TOKEN> ( HttpMessage message , int streamId ) { </a> 
<a> HttpHeaders . <RARE_TOKEN> ( message , Names . <RARE_TOKEN> , streamId ) ; </a> 
<a> } </a> 
<a> public static void <RARE_TOKEN> ( HttpMessage message ) { </a> 
<a> message . removeHeader ( Names . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public static int <RARE_TOKEN> ( HttpMessage message ) { </a> 
<a> return HttpHeaders . <RARE_TOKEN> ( message , Names . <RARE_TOKEN> , 0 ) ; </a> 
<a> } </a> 
<a> public static void <RARE_TOKEN> ( HttpMessage message , int <RARE_TOKEN> ) { </a> 
<a> HttpHeaders . <RARE_TOKEN> ( message , Names . <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public static void <RARE_TOKEN> ( HttpMessage message ) { </a> 
<a> message . removeHeader ( Names . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public static byte <RARE_TOKEN> ( HttpMessage message ) { </a> 
<a> return ( byte ) HttpHeaders . <RARE_TOKEN> ( message , Names . <RARE_TOKEN> , 0 ) ; </a> 
<a> } </a> 
<a> public static void <RARE_TOKEN> ( HttpMessage message , byte <RARE_TOKEN> ) { </a> 
<a> HttpHeaders . <RARE_TOKEN> ( message , Names . <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public static void <RARE_TOKEN> ( HttpMessage message ) { </a> 
<a> message . removeHeader ( Names . URL ) ; </a> 
<a> } </a> 
<a> public static String <RARE_TOKEN> ( HttpMessage message ) { </a> 
<a> return message . getHeader ( Names . URL ) ; </a> 
<a> } </a> 
<a> public static void <RARE_TOKEN> ( HttpMessage message , String url ) { </a> 
<a> message . setHeader ( Names . URL , url ) ; </a> 
<a> } </a> 
<a> public static void <RARE_TOKEN> ( HttpMessage message ) { </a> 
<a> message . removeHeader ( Names . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public static String <RARE_TOKEN> ( HttpMessage message ) { </a> 
<a> return message . getHeader ( Names . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public static void <RARE_TOKEN> ( HttpMessage message , String <RARE_TOKEN> ) { </a> 
<a> message . setHeader ( Names . <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . spdy ; </a> 
<a> public interface <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . spdy ; </a> 
<a> public interface <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> int getId ( ) ; </a> 
<a> void <RARE_TOKEN> ( int id ) ; </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . spdy ; </a> 
<a> public class <RARE_TOKEN> extends Exception { </a> 
<a> private static final long serialVersionUID = <RARE_TOKEN> ; </a> 
<a> public <RARE_TOKEN> ( ) { } </a> 
<a> public <RARE_TOKEN> ( String message , Throwable cause ) { </a> 
<a> super ( message , cause ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( String message ) { </a> 
<a> super ( message ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( Throwable cause ) { </a> 
<a> super ( cause ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . spdy ; </a> 
<a> public interface <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> int getStreamId ( ) ; </a> 
<a> void <RARE_TOKEN> ( int streamID ) ; </a> 
<a> SpdyStreamStatus getStatus ( ) ; </a> 
<a> void <RARE_TOKEN> ( SpdyStreamStatus status ) ; </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . spdy ; </a> 
<a> import io . netty . buffer . MessageBuf ; </a> 
<a> import io . netty . buffer . Unpooled ; </a> 
<a> import io . netty . channel . ChannelFuture ; </a> 
<a> import io . netty . channel . ChannelFutureListener ; </a> 
<a> import io . netty . channel . <RARE_TOKEN> ; </a> 
<a> import io . netty . channel . ChannelHandlerContext ; </a> 
<a> import io . netty . channel . <RARE_TOKEN> ; </a> 
<a> import io . netty . channel . <RARE_TOKEN> ; </a> 
<a> import java . nio . channels . <RARE_TOKEN> ; </a> 
<a> import java . util . concurrent . atomic . AtomicInteger ; </a> 
<a> public class <RARE_TOKEN> </a> 
<a> extends <RARE_TOKEN> </a> 
<a> implements <RARE_TOKEN> < Object > , <RARE_TOKEN> < Object > { </a> 
<a> private static final <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( ) ; </a> 
<a> private static final <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> static { </a> 
<a> <RARE_TOKEN> [ ] <RARE_TOKEN> = new <RARE_TOKEN> [ 0 ] ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> private final <RARE_TOKEN> spdySession = new <RARE_TOKEN> ( ) ; </a> 
<a> private volatile int <RARE_TOKEN> ; </a> 
<a> private volatile int <RARE_TOKEN> ; </a> 
<a> private volatile int <RARE_TOKEN> ; </a> 
<a> private volatile int <RARE_TOKEN> ; </a> 
<a> private static final int <RARE_TOKEN> = <RARE_TOKEN> * <RARE_TOKEN> ; </a> 
<a> private volatile int <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private volatile int <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private final Object <RARE_TOKEN> = new Object ( ) ; </a> 
<a> private final AtomicInteger <RARE_TOKEN> = new AtomicInteger ( ) ; </a> 
<a> private volatile boolean <RARE_TOKEN> ; </a> 
<a> private volatile boolean <RARE_TOKEN> ; </a> 
<a> private volatile ChannelFuture <RARE_TOKEN> ; </a> 
<a> private final boolean server ; </a> 
<a> private final boolean <RARE_TOKEN> ; </a> 
<a> public <RARE_TOKEN> ( int version , boolean server ) { </a> 
<a> if ( version < <RARE_TOKEN> . <RARE_TOKEN> || version > <RARE_TOKEN> . <RARE_TOKEN> ) { </a> 
<a> throw new IllegalArgumentException ( </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> " + version ) ; </a> 
<a> } </a> 
<a> this . server = server ; </a> 
<a> <RARE_TOKEN> = version >= 3 ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public MessageBuf < Object > <RARE_TOKEN> ( ChannelHandlerContext ctx ) throws Exception { </a> 
<a> return Unpooled . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public MessageBuf < Object > <RARE_TOKEN> ( ChannelHandlerContext ctx ) throws Exception { </a> 
<a> return Unpooled . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void inboundBufferUpdated ( ChannelHandlerContext ctx ) throws Exception { </a> 
<a> MessageBuf < Object > in = ctx . <RARE_TOKEN> ( ) ; </a> 
<a> for ( ; ; ) { </a> 
<a> Object msg = in . poll ( ) ; </a> 
<a> if ( msg == null ) { </a> 
<a> break ; </a> 
<a> } </a> 
<a> if ( msg instanceof <RARE_TOKEN> || </a> 
<a> msg instanceof <RARE_TOKEN> || </a> 
<a> msg instanceof <RARE_TOKEN> || </a> 
<a> msg instanceof <RARE_TOKEN> || </a> 
<a> msg instanceof <RARE_TOKEN> || </a> 
<a> msg instanceof <RARE_TOKEN> || </a> 
<a> msg instanceof <RARE_TOKEN> || </a> 
<a> msg instanceof <RARE_TOKEN> || </a> 
<a> msg instanceof <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( ctx , msg ) ; </a> 
<a> } else { </a> 
<a> ctx . <RARE_TOKEN> ( ) . add ( msg ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> ctx . fireInboundBufferUpdated ( ) ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( ChannelHandlerContext ctx , Object msg ) throws Exception { </a> 
<a> if ( msg instanceof <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> spdyDataFrame = ( <RARE_TOKEN> ) msg ; </a> 
<a> int streamID = spdyDataFrame . getStreamId ( ) ; </a> 
<a> if ( ! spdySession . <RARE_TOKEN> ( streamID ) ) { </a> 
<a> if ( streamID <= <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( ctx , streamID , SpdyStreamStatus . <RARE_TOKEN> ) ; </a> 
<a> } else if ( ! <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( ctx , streamID , SpdyStreamStatus . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> return ; </a> 
<a> } </a> 
<a> if ( spdySession . <RARE_TOKEN> ( streamID ) ) { </a> 
<a> <RARE_TOKEN> ( ctx , streamID , SpdyStreamStatus . <RARE_TOKEN> ) ; </a> 
<a> return ; </a> 
<a> } </a> 
<a> if ( ! <RARE_TOKEN> ( streamID ) && ! spdySession . <RARE_TOKEN> ( streamID ) ) { </a> 
<a> <RARE_TOKEN> ( ctx , streamID , SpdyStreamStatus . <RARE_TOKEN> ) ; </a> 
<a> return ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> ) { </a> 
<a> int <RARE_TOKEN> = - 1 * spdyDataFrame . getData ( ) . readableBytes ( ) ; </a> 
<a> int <RARE_TOKEN> = spdySession . <RARE_TOKEN> ( streamID , <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> < spdySession . <RARE_TOKEN> ( streamID ) ) { </a> 
<a> <RARE_TOKEN> ( ctx , streamID , SpdyStreamStatus . <RARE_TOKEN> ) ; </a> 
<a> return ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> < 0 ) { </a> 
<a> while ( spdyDataFrame . getData ( ) . readableBytes ( ) > <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( streamID ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( spdyDataFrame . getData ( ) . <RARE_TOKEN> ( <RARE_TOKEN> ) ) ; </a> 
<a> ctx . <RARE_TOKEN> ( ) . add ( <RARE_TOKEN> ) ; </a> 
<a> ctx . flush ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> <= <RARE_TOKEN> / 2 && ! spdyDataFrame . isLast ( ) ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> - <RARE_TOKEN> ; </a> 
<a> spdySession . <RARE_TOKEN> ( streamID , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = </a> 
<a> new <RARE_TOKEN> ( streamID , <RARE_TOKEN> ) ; </a> 
<a> ctx . write ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> if ( spdyDataFrame . isLast ( ) ) { </a> 
<a> <RARE_TOKEN> ( streamID , true ) ; </a> 
<a> } </a> 
<a> } else if ( msg instanceof <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> spdySynStreamFrame = ( <RARE_TOKEN> ) msg ; </a> 
<a> int streamID = spdySynStreamFrame . getStreamId ( ) ; </a> 
<a> if ( spdySynStreamFrame . <RARE_TOKEN> ( ) || </a> 
<a> ! <RARE_TOKEN> ( streamID ) || </a> 
<a> spdySession . <RARE_TOKEN> ( streamID ) ) { </a> 
<a> <RARE_TOKEN> ( ctx , streamID , SpdyStreamStatus . <RARE_TOKEN> ) ; </a> 
<a> return ; </a> 
<a> } </a> 
<a> if ( streamID <= <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( ctx , <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> return ; </a> 
<a> } </a> 
<a> byte <RARE_TOKEN> = spdySynStreamFrame . <RARE_TOKEN> ( ) ; </a> 
<a> boolean <RARE_TOKEN> = spdySynStreamFrame . isLast ( ) ; </a> 
<a> boolean <RARE_TOKEN> = spdySynStreamFrame . <RARE_TOKEN> ( ) ; </a> 
<a> if ( ! <RARE_TOKEN> ( streamID , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> ) ) { </a> 
<a> <RARE_TOKEN> ( ctx , streamID , SpdyStreamStatus . <RARE_TOKEN> ) ; </a> 
<a> return ; </a> 
<a> } </a> 
<a> } else if ( msg instanceof <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> spdySynReplyFrame = ( <RARE_TOKEN> ) msg ; </a> 
<a> int streamID = spdySynReplyFrame . getStreamId ( ) ; </a> 
<a> if ( spdySynReplyFrame . <RARE_TOKEN> ( ) || </a> 
<a> <RARE_TOKEN> ( streamID ) || </a> 
<a> spdySession . <RARE_TOKEN> ( streamID ) ) { </a> 
<a> <RARE_TOKEN> ( ctx , streamID , SpdyStreamStatus . <RARE_TOKEN> ) ; </a> 
<a> return ; </a> 
<a> } </a> 
<a> if ( spdySession . <RARE_TOKEN> ( streamID ) ) { </a> 
<a> <RARE_TOKEN> ( ctx , streamID , SpdyStreamStatus . <RARE_TOKEN> ) ; </a> 
<a> return ; </a> 
<a> } </a> 
<a> spdySession . <RARE_TOKEN> ( streamID ) ; </a> 
<a> if ( spdySynReplyFrame . isLast ( ) ) { </a> 
<a> <RARE_TOKEN> ( streamID , true ) ; </a> 
<a> } </a> 
<a> } else if ( msg instanceof <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = ( <RARE_TOKEN> ) msg ; </a> 
<a> <RARE_TOKEN> ( ctx , <RARE_TOKEN> . getStreamId ( ) ) ; </a> 
<a> } else if ( msg instanceof <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = ( <RARE_TOKEN> ) msg ; </a> 
<a> int <RARE_TOKEN> = </a> 
<a> <RARE_TOKEN> . getValue ( <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> >= 0 ) { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> , true ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ) ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> , false ) ; </a> 
<a> if ( <RARE_TOKEN> ) { </a> 
<a> int <RARE_TOKEN> = </a> 
<a> <RARE_TOKEN> . getValue ( <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> >= 0 ) { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } else if ( msg instanceof <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = ( <RARE_TOKEN> ) msg ; </a> 
<a> if ( <RARE_TOKEN> ( <RARE_TOKEN> . getId ( ) ) ) { </a> 
<a> ctx . write ( <RARE_TOKEN> ) ; </a> 
<a> return ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> . get ( ) == 0 ) { </a> 
<a> return ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> } else if ( msg instanceof <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> = true ; </a> 
<a> } else if ( msg instanceof <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = ( <RARE_TOKEN> ) msg ; </a> 
<a> int streamID = <RARE_TOKEN> . getStreamId ( ) ; </a> 
<a> if ( <RARE_TOKEN> . <RARE_TOKEN> ( ) ) { </a> 
<a> <RARE_TOKEN> ( ctx , streamID , SpdyStreamStatus . <RARE_TOKEN> ) ; </a> 
<a> return ; </a> 
<a> } </a> 
<a> if ( spdySession . <RARE_TOKEN> ( streamID ) ) { </a> 
<a> <RARE_TOKEN> ( ctx , streamID , SpdyStreamStatus . <RARE_TOKEN> ) ; </a> 
<a> return ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> . isLast ( ) ) { </a> 
<a> <RARE_TOKEN> ( streamID , true ) ; </a> 
<a> } </a> 
<a> } else if ( msg instanceof <RARE_TOKEN> ) { </a> 
<a> if ( <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = ( <RARE_TOKEN> ) msg ; </a> 
<a> int streamID = <RARE_TOKEN> . getStreamId ( ) ; </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> if ( spdySession . <RARE_TOKEN> ( streamID ) ) { </a> 
<a> return ; </a> 
<a> } </a> 
<a> if ( spdySession . <RARE_TOKEN> ( streamID ) > Integer . MAX_VALUE - <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( ctx , streamID , SpdyStreamStatus . <RARE_TOKEN> ) ; </a> 
<a> return ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( ctx , streamID , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> ctx . <RARE_TOKEN> ( ) . add ( msg ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void exceptionCaught ( ChannelHandlerContext ctx , Throwable cause ) throws Exception { </a> 
<a> if ( cause instanceof <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( ctx , <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> super . exceptionCaught ( ctx , cause ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void close ( ChannelHandlerContext ctx , ChannelFuture future ) throws Exception { </a> 
<a> <RARE_TOKEN> ( ctx ) ; </a> 
<a> super . close ( ctx , future ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void flush ( ChannelHandlerContext ctx , ChannelFuture future ) throws Exception { </a> 
<a> MessageBuf < Object > in = ctx . <RARE_TOKEN> ( ) ; </a> 
<a> for ( ; ; ) { </a> 
<a> Object msg = in . poll ( ) ; </a> 
<a> if ( msg == null ) { </a> 
<a> break ; </a> 
<a> } </a> 
<a> if ( msg instanceof <RARE_TOKEN> || </a> 
<a> msg instanceof <RARE_TOKEN> || </a> 
<a> msg instanceof <RARE_TOKEN> || </a> 
<a> msg instanceof <RARE_TOKEN> || </a> 
<a> msg instanceof <RARE_TOKEN> || </a> 
<a> msg instanceof <RARE_TOKEN> || </a> 
<a> msg instanceof <RARE_TOKEN> || </a> 
<a> msg instanceof <RARE_TOKEN> || </a> 
<a> msg instanceof <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( ctx , msg ) ; </a> 
<a> } else { </a> 
<a> ctx . <RARE_TOKEN> ( ) . add ( msg ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> ctx . flush ( future ) ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( ChannelHandlerContext ctx , Object msg ) </a> 
<a> throws Exception { </a> 
<a> if ( msg instanceof <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> spdyDataFrame = ( <RARE_TOKEN> ) msg ; </a> 
<a> final int streamID = spdyDataFrame . getStreamId ( ) ; </a> 
<a> if ( spdySession . <RARE_TOKEN> ( streamID ) ) { </a> 
<a> ctx . fireExceptionCaught ( <RARE_TOKEN> ) ; </a> 
<a> return ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> ) { </a> 
<a> synchronized ( <RARE_TOKEN> ) { </a> 
<a> int <RARE_TOKEN> = spdyDataFrame . getData ( ) . readableBytes ( ) ; </a> 
<a> int <RARE_TOKEN> = spdySession . <RARE_TOKEN> ( streamID ) ; </a> 
<a> if ( <RARE_TOKEN> >= <RARE_TOKEN> ) { </a> 
<a> spdySession . <RARE_TOKEN> ( streamID , - 1 * <RARE_TOKEN> ) ; </a> 
<a> } else if ( <RARE_TOKEN> > 0 ) { </a> 
<a> spdySession . <RARE_TOKEN> ( streamID , - 1 * <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( streamID ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( spdyDataFrame . getData ( ) . <RARE_TOKEN> ( <RARE_TOKEN> ) ) ; </a> 
<a> spdySession . <RARE_TOKEN> ( streamID , spdyDataFrame ) ; </a> 
<a> ctx . <RARE_TOKEN> ( ) . add ( <RARE_TOKEN> ) ; </a> 
<a> return ; </a> 
<a> } else { </a> 
<a> spdySession . <RARE_TOKEN> ( streamID , spdyDataFrame ) ; </a> 
<a> return ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> if ( spdyDataFrame . isLast ( ) ) { </a> 
<a> <RARE_TOKEN> ( streamID , false ) ; </a> 
<a> } </a> 
<a> } else if ( msg instanceof <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> spdySynStreamFrame = ( <RARE_TOKEN> ) msg ; </a> 
<a> int streamID = spdySynStreamFrame . getStreamId ( ) ; </a> 
<a> if ( <RARE_TOKEN> ( streamID ) ) { </a> 
<a> ctx . fireExceptionCaught ( <RARE_TOKEN> ) ; </a> 
<a> return ; </a> 
<a> } </a> 
<a> byte <RARE_TOKEN> = spdySynStreamFrame . <RARE_TOKEN> ( ) ; </a> 
<a> boolean <RARE_TOKEN> = spdySynStreamFrame . <RARE_TOKEN> ( ) ; </a> 
<a> boolean <RARE_TOKEN> = spdySynStreamFrame . isLast ( ) ; </a> 
<a> if ( ! <RARE_TOKEN> ( streamID , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> ) ) { </a> 
<a> ctx . fireExceptionCaught ( <RARE_TOKEN> ) ; </a> 
<a> return ; </a> 
<a> } </a> 
<a> } else if ( msg instanceof <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> spdySynReplyFrame = ( <RARE_TOKEN> ) msg ; </a> 
<a> int streamID = spdySynReplyFrame . getStreamId ( ) ; </a> 
<a> if ( ! <RARE_TOKEN> ( streamID ) || spdySession . <RARE_TOKEN> ( streamID ) ) { </a> 
<a> ctx . fireExceptionCaught ( <RARE_TOKEN> ) ; </a> 
<a> return ; </a> 
<a> } </a> 
<a> if ( spdySynReplyFrame . isLast ( ) ) { </a> 
<a> <RARE_TOKEN> ( streamID , false ) ; </a> 
<a> } </a> 
<a> } else if ( msg instanceof <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = ( <RARE_TOKEN> ) msg ; </a> 
<a> <RARE_TOKEN> ( ctx , <RARE_TOKEN> . getStreamId ( ) ) ; </a> 
<a> } else if ( msg instanceof <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = ( <RARE_TOKEN> ) msg ; </a> 
<a> int <RARE_TOKEN> = </a> 
<a> <RARE_TOKEN> . getValue ( <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> >= 0 ) { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> , false ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ) ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> , false ) ; </a> 
<a> if ( <RARE_TOKEN> ) { </a> 
<a> int <RARE_TOKEN> = </a> 
<a> <RARE_TOKEN> . getValue ( <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> >= 0 ) { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } else if ( msg instanceof <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = ( <RARE_TOKEN> ) msg ; </a> 
<a> if ( <RARE_TOKEN> ( <RARE_TOKEN> . getId ( ) ) ) { </a> 
<a> ctx . fireExceptionCaught ( new IllegalArgumentException ( </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> " + <RARE_TOKEN> . getId ( ) ) ) ; </a> 
<a> return ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> } else if ( msg instanceof <RARE_TOKEN> ) { </a> 
<a> ctx . fireExceptionCaught ( <RARE_TOKEN> ) ; </a> 
<a> return ; </a> 
<a> } else if ( msg instanceof <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = ( <RARE_TOKEN> ) msg ; </a> 
<a> int streamID = <RARE_TOKEN> . getStreamId ( ) ; </a> 
<a> if ( spdySession . <RARE_TOKEN> ( streamID ) ) { </a> 
<a> ctx . fireExceptionCaught ( <RARE_TOKEN> ) ; </a> 
<a> return ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> . isLast ( ) ) { </a> 
<a> <RARE_TOKEN> ( streamID , false ) ; </a> 
<a> } </a> 
<a> } else if ( msg instanceof <RARE_TOKEN> ) { </a> 
<a> ctx . fireExceptionCaught ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> ctx . <RARE_TOKEN> ( ) . add ( msg ) ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( </a> 
<a> ChannelHandlerContext ctx , <RARE_TOKEN> status ) { </a> 
<a> <RARE_TOKEN> ( ctx , status ) ; </a> 
<a> ctx . flush ( ) . addListener ( ChannelFutureListener . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( </a> 
<a> ChannelHandlerContext ctx , int streamID , SpdyStreamStatus status ) { </a> 
<a> boolean <RARE_TOKEN> = ! spdySession . <RARE_TOKEN> ( streamID ) ; </a> 
<a> <RARE_TOKEN> ( ctx , streamID ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( streamID , status ) ; </a> 
<a> ctx . write ( <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> ) { </a> 
<a> ctx . <RARE_TOKEN> ( ) . add ( <RARE_TOKEN> ) ; </a> 
<a> ctx . fireInboundBufferUpdated ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private boolean <RARE_TOKEN> ( int ID ) { </a> 
<a> boolean <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( ID ) ; </a> 
<a> return server && ! <RARE_TOKEN> || ! server && <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( int <RARE_TOKEN> , boolean <RARE_TOKEN> ) { </a> 
<a> if ( <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> == <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> return ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> == 0 ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> return ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> == 0 ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> return ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> > <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<a> private synchronized void <RARE_TOKEN> ( int <RARE_TOKEN> ) { </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> - <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> for ( Integer streamId : spdySession . <RARE_TOKEN> ( ) ) { </a> 
<a> spdySession . <RARE_TOKEN> ( streamId . <RARE_TOKEN> ( ) , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private synchronized void <RARE_TOKEN> ( int <RARE_TOKEN> ) { </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> - <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> spdySession . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> private synchronized boolean <RARE_TOKEN> ( </a> 
<a> int streamID , byte <RARE_TOKEN> , boolean <RARE_TOKEN> , boolean <RARE_TOKEN> ) { </a> 
<a> if ( <RARE_TOKEN> || <RARE_TOKEN> ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> int <RARE_TOKEN> = this . <RARE_TOKEN> ; </a> 
<a> if ( <RARE_TOKEN> != 0 && </a> 
<a> spdySession . <RARE_TOKEN> ( ) >= <RARE_TOKEN> ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> spdySession . <RARE_TOKEN> ( </a> 
<a> streamID , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> ( streamID ) ) { </a> 
<a> <RARE_TOKEN> = streamID ; </a> 
<a> } </a> 
<a> return true ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( int streamID , boolean <RARE_TOKEN> ) { </a> 
<a> if ( <RARE_TOKEN> ) { </a> 
<a> spdySession . <RARE_TOKEN> ( streamID ) ; </a> 
<a> } else { </a> 
<a> spdySession . <RARE_TOKEN> ( streamID ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> != null && spdySession . <RARE_TOKEN> ( ) ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( ChannelHandlerContext ctx , int streamID ) { </a> 
<a> if ( spdySession . <RARE_TOKEN> ( streamID ) ) { </a> 
<a> ctx . fireExceptionCaught ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> != null && spdySession . <RARE_TOKEN> ( ) ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( ChannelHandlerContext ctx , final int streamID , int <RARE_TOKEN> ) { </a> 
<a> synchronized ( <RARE_TOKEN> ) { </a> 
<a> int <RARE_TOKEN> = spdySession . <RARE_TOKEN> ( streamID , <RARE_TOKEN> ) ; </a> 
<a> while ( <RARE_TOKEN> > 0 ) { </a> 
<a> <RARE_TOKEN> spdyDataFrame = ( <RARE_TOKEN> ) spdySession . <RARE_TOKEN> ( streamID ) ; </a> 
<a> if ( spdyDataFrame == null ) { </a> 
<a> break ; </a> 
<a> } </a> 
<a> int <RARE_TOKEN> = spdyDataFrame . getData ( ) . readableBytes ( ) ; </a> 
<a> if ( <RARE_TOKEN> >= <RARE_TOKEN> ) { </a> 
<a> spdySession . <RARE_TOKEN> ( streamID ) ; </a> 
<a> <RARE_TOKEN> = spdySession . <RARE_TOKEN> ( streamID , - 1 * <RARE_TOKEN> ) ; </a> 
<a> if ( spdyDataFrame . isLast ( ) ) { </a> 
<a> <RARE_TOKEN> ( streamID , false ) ; </a> 
<a> } </a> 
<a> ctx . <RARE_TOKEN> ( ) . add ( spdyDataFrame ) ; </a> 
<a> } else { </a> 
<a> spdySession . <RARE_TOKEN> ( streamID , - 1 * <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( streamID ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( spdyDataFrame . getData ( ) . <RARE_TOKEN> ( <RARE_TOKEN> ) ) ; </a> 
<a> ctx . <RARE_TOKEN> ( ) . add ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = 0 ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( ChannelHandlerContext ctx ) { </a> 
<a> if ( ! ctx . channel ( ) . isActive ( ) ) { </a> 
<a> return ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( ctx , <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> ChannelFuture f = ctx . flush ( ) ; </a> 
<a> if ( spdySession . <RARE_TOKEN> ( ) ) { </a> 
<a> f . addListener ( new <RARE_TOKEN> ( ctx ) ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> = ctx . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> . addListener ( new <RARE_TOKEN> ( ctx ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private synchronized void <RARE_TOKEN> ( </a> 
<a> ChannelHandlerContext ctx , <RARE_TOKEN> status ) { </a> 
<a> if ( ! <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> = true ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( <RARE_TOKEN> , status ) ; </a> 
<a> ctx . <RARE_TOKEN> ( ) . add ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private static final class <RARE_TOKEN> implements ChannelFutureListener { </a> 
<a> private final ChannelHandlerContext ctx ; </a> 
<a> <RARE_TOKEN> ( ChannelHandlerContext ctx ) { </a> 
<a> this . ctx = ctx ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ChannelFuture <RARE_TOKEN> ) throws Exception { </a> 
<a> if ( ! ( <RARE_TOKEN> . cause ( ) instanceof <RARE_TOKEN> ) ) { </a> 
<a> ctx . close ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . spdy ; </a> 
<a> public class <RARE_TOKEN> implements <RARE_TOKEN> < <RARE_TOKEN> > { </a> 
<a> public static final <RARE_TOKEN> <RARE_TOKEN> = </a> 
<a> new <RARE_TOKEN> ( 0 , <RARE_TOKEN> ) ; </a> 
<a> public static final <RARE_TOKEN> <RARE_TOKEN> = </a> 
<a> new <RARE_TOKEN> ( 1 , <RARE_TOKEN> ) ; </a> 
<a> public static final <RARE_TOKEN> <RARE_TOKEN> = </a> 
<a> new <RARE_TOKEN> ( 11 , <RARE_TOKEN> ) ; </a> 
<a> public static <RARE_TOKEN> valueOf ( int code ) { </a> 
<a> switch ( code ) { </a> 
<a> case 0 : </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> case 1 : </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> case 11 : </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> return new <RARE_TOKEN> ( code , <RARE_TOKEN> <RARE_TOKEN> + code + <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> private final int code ; </a> 
<a> private final String <RARE_TOKEN> ; </a> 
<a> public <RARE_TOKEN> ( int code , String <RARE_TOKEN> ) { </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> this . code = code ; </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public int <RARE_TOKEN> ( ) { </a> 
<a> return code ; </a> 
<a> } </a> 
<a> public String <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int hashCode ( ) { </a> 
<a> return <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean equals ( Object o ) { </a> 
<a> if ( ! ( o instanceof <RARE_TOKEN> ) ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> return <RARE_TOKEN> ( ) == ( ( <RARE_TOKEN> ) o ) . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public String toString ( ) { </a> 
<a> return <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int <RARE_TOKEN> ( <RARE_TOKEN> o ) { </a> 
<a> return <RARE_TOKEN> ( ) - o . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . spdy ; </a> 
<a> public class SpdyStreamStatus implements <RARE_TOKEN> < SpdyStreamStatus > { </a> 
<a> public static final SpdyStreamStatus <RARE_TOKEN> = </a> 
<a> new SpdyStreamStatus ( 1 , <RARE_TOKEN> ) ; </a> 
<a> public static final SpdyStreamStatus <RARE_TOKEN> = </a> 
<a> new SpdyStreamStatus ( 2 , <RARE_TOKEN> ) ; </a> 
<a> public static final SpdyStreamStatus <RARE_TOKEN> = </a> 
<a> new SpdyStreamStatus ( 3 , <RARE_TOKEN> ) ; </a> 
<a> public static final SpdyStreamStatus <RARE_TOKEN> = </a> 
<a> new SpdyStreamStatus ( 4 , <RARE_TOKEN> ) ; </a> 
<a> public static final SpdyStreamStatus <RARE_TOKEN> = </a> 
<a> new SpdyStreamStatus ( 5 , <RARE_TOKEN> ) ; </a> 
<a> public static final SpdyStreamStatus <RARE_TOKEN> = </a> 
<a> new SpdyStreamStatus ( 6 , <RARE_TOKEN> ) ; </a> 
<a> public static final SpdyStreamStatus <RARE_TOKEN> = </a> 
<a> new SpdyStreamStatus ( 7 , <RARE_TOKEN> ) ; </a> 
<a> public static final SpdyStreamStatus <RARE_TOKEN> = </a> 
<a> new SpdyStreamStatus ( 8 , <RARE_TOKEN> ) ; </a> 
<a> public static final SpdyStreamStatus <RARE_TOKEN> = </a> 
<a> new SpdyStreamStatus ( 9 , <RARE_TOKEN> ) ; </a> 
<a> public static final SpdyStreamStatus <RARE_TOKEN> = </a> 
<a> new SpdyStreamStatus ( 10 , <RARE_TOKEN> ) ; </a> 
<a> public static final SpdyStreamStatus <RARE_TOKEN> = </a> 
<a> new SpdyStreamStatus ( 11 , <RARE_TOKEN> ) ; </a> 
<a> public static SpdyStreamStatus valueOf ( int code ) { </a> 
<a> if ( code == 0 ) { </a> 
<a> throw new IllegalArgumentException ( </a> 
<a> <RARE_TOKEN> is not a <RARE_TOKEN> status code for a <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> switch ( code ) { </a> 
<a> case 1 : </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> case 2 : </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> case 3 : </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> case 4 : </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> case 5 : </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> case 6 : </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> case 7 : </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> case 8 : </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> case 9 : </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> case 10 : </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> case 11 : </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> return new SpdyStreamStatus ( code , <RARE_TOKEN> <RARE_TOKEN> + code + <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> private final int code ; </a> 
<a> private final String <RARE_TOKEN> ; </a> 
<a> public SpdyStreamStatus ( int code , String <RARE_TOKEN> ) { </a> 
<a> if ( code == 0 ) { </a> 
<a> throw new IllegalArgumentException ( </a> 
<a> <RARE_TOKEN> is not a <RARE_TOKEN> status code for a <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> this . code = code ; </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public int <RARE_TOKEN> ( ) { </a> 
<a> return code ; </a> 
<a> } </a> 
<a> public String <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int hashCode ( ) { </a> 
<a> return <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean equals ( Object o ) { </a> 
<a> if ( ! ( o instanceof SpdyStreamStatus ) ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> return <RARE_TOKEN> ( ) == ( ( SpdyStreamStatus ) o ) . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public String toString ( ) { </a> 
<a> return <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int <RARE_TOKEN> ( SpdyStreamStatus o ) { </a> 
<a> return <RARE_TOKEN> ( ) - o . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . spdy ; </a> 
<a> public interface <RARE_TOKEN> extends SpdyHeaderBlock , <RARE_TOKEN> { </a> 
<a> int getStreamId ( ) ; </a> 
<a> void <RARE_TOKEN> ( int streamID ) ; </a> 
<a> boolean isLast ( ) ; </a> 
<a> void <RARE_TOKEN> ( boolean last ) ; </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . spdy ; </a> 
<a> public interface <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> int getStreamId ( ) ; </a> 
<a> void <RARE_TOKEN> ( int streamID ) ; </a> 
<a> int <RARE_TOKEN> ( ) ; </a> 
<a> void <RARE_TOKEN> ( int <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . spdy ; </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . http ; </a> 
<a> import static org . junit . Assert . * ; </a> 
<a> import java . text . <RARE_TOKEN> ; </a> 
<a> import java . util . Date ; </a> 
<a> import java . util . List ; </a> 
<a> import org . junit . Test ; </a> 
<a> public class <RARE_TOKEN> { </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> String result = <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( ) ; </a> 
<a> Cookie cookie = new <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> cookie . <RARE_TOKEN> ( <RARE_TOKEN> is a <RARE_TOKEN> ) ; </a> 
<a> cookie . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> cookie . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> cookie . <RARE_TOKEN> ( true ) ; </a> 
<a> cookie . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> cookie . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> cookie . <RARE_TOKEN> ( 80 , <RARE_TOKEN> ) ; </a> 
<a> cookie . <RARE_TOKEN> ( true ) ; </a> 
<a> String <RARE_TOKEN> = <RARE_TOKEN> . encode ( cookie ) ; </a> 
<a> long currentTime = System . currentTimeMillis ( ) ; </a> 
<a> boolean fail = true ; </a> 
<a> for ( int <RARE_TOKEN> = 0 ; <RARE_TOKEN> <= <RARE_TOKEN> ; <RARE_TOKEN> += <RARE_TOKEN> ) { </a> 
<a> if ( <RARE_TOKEN> . equals ( result . <RARE_TOKEN> ( </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> . format ( new Date ( currentTime + <RARE_TOKEN> + <RARE_TOKEN> ) ) ) ) ) { </a> 
<a> fail = false ; </a> 
<a> break ; </a> 
<a> } </a> 
<a> } </a> 
<a> if ( fail ) { </a> 
<a> fail ( <RARE_TOKEN> " + result + ", <RARE_TOKEN> " + <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> String result = <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> is a <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> Cookie cookie = new <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> cookie . <RARE_TOKEN> ( 1 ) ; </a> 
<a> cookie . <RARE_TOKEN> ( <RARE_TOKEN> is a <RARE_TOKEN> ) ; </a> 
<a> cookie . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> cookie . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> cookie . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> cookie . <RARE_TOKEN> ( true ) ; </a> 
<a> String <RARE_TOKEN> = <RARE_TOKEN> . encode ( cookie ) ; </a> 
<a> assertEquals ( result , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> String result = <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> is a <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> Cookie cookie = new <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> cookie . <RARE_TOKEN> ( 1 ) ; </a> 
<a> cookie . <RARE_TOKEN> ( <RARE_TOKEN> is a <RARE_TOKEN> ) ; </a> 
<a> cookie . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> cookie . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> cookie . <RARE_TOKEN> ( true ) ; </a> 
<a> cookie . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> cookie . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> cookie . <RARE_TOKEN> ( 80 , <RARE_TOKEN> ) ; </a> 
<a> cookie . <RARE_TOKEN> ( true ) ; </a> 
<a> String <RARE_TOKEN> = <RARE_TOKEN> . encode ( cookie ) ; </a> 
<a> assertEquals ( result , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> String <RARE_TOKEN> = <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> " ; </a> 
<a> String <RARE_TOKEN> = <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> " ; </a> 
<a> String <RARE_TOKEN> = <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> Cookie cookie = new <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> cookie . <RARE_TOKEN> ( 1 ) ; </a> 
<a> cookie . <RARE_TOKEN> ( <RARE_TOKEN> is a <RARE_TOKEN> ) ; </a> 
<a> cookie . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> cookie . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> cookie . <RARE_TOKEN> ( true ) ; </a> 
<a> cookie . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> cookie . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> cookie . <RARE_TOKEN> ( 80 , <RARE_TOKEN> ) ; </a> 
<a> cookie . <RARE_TOKEN> ( true ) ; </a> 
<a> Cookie <RARE_TOKEN> = new <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( 1 ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> is <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( false ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( false ) ; </a> 
<a> Cookie <RARE_TOKEN> = new <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( 1 ) ; </a> 
<a> String <RARE_TOKEN> = <RARE_TOKEN> . encode ( cookie , <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> + <RARE_TOKEN> + <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> String <RARE_TOKEN> = <RARE_TOKEN> . encode ( ) ; </a> 
<a> List < String > <RARE_TOKEN> = <RARE_TOKEN> . encode ( ) ; </a> 
<a> assertNotNull ( <RARE_TOKEN> ) ; </a> 
<a> assertNotNull ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . http ; </a> 
<a> import org . junit . Assert ; </a> 
<a> import org . junit . Test ; </a> 
<a> public class <RARE_TOKEN> { </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> HttpMessage m = new <RARE_TOKEN> ( </a> 
<a> HttpVersion . <RARE_TOKEN> , HttpMethod . GET , "/" ) ; </a> 
<a> for ( int i = 0 ; i < 1000 ; i ++ ) { </a> 
<a> m . setHeader ( String . valueOf ( i ) , "" ) ; </a> 
<a> } </a> 
<a> for ( int i = <RARE_TOKEN> ; i >= 0 ; i -- ) { </a> 
<a> m . removeHeader ( String . valueOf ( i ) ) ; </a> 
<a> } </a> 
<a> for ( int i = 0 ; i < 1000 ; i ++ ) { </a> 
<a> Assert . assertNull ( m . getHeader ( String . valueOf ( i ) ) ) ; </a> 
<a> } </a> 
<a> Assert . assertTrue ( m . getHeaders ( ) . isEmpty ( ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . http ; </a> 
<a> import static org . junit . Assert . * ; </a> 
<a> import io . netty . buffer . ByteBuf ; </a> 
<a> import io . netty . buffer . <RARE_TOKEN> ; </a> 
<a> import io . netty . buffer . Unpooled ; </a> 
<a> import io . netty . channel . ChannelHandlerContext ; </a> 
<a> import io . netty . channel . embedded . <RARE_TOKEN> ; </a> 
<a> import io . netty . handler . codec . TooLongFrameException ; </a> 
<a> import io . netty . util . CharsetUtil ; </a> 
<a> import java . util . List ; </a> 
<a> import org . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import org . junit . Test ; </a> 
<a> public class <RARE_TOKEN> { </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( <RARE_TOKEN> * <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> HttpMessage message = new <RARE_TOKEN> ( HttpVersion . <RARE_TOKEN> ) ; </a> 
<a> HttpHeaders . setHeader ( message , <RARE_TOKEN> , true ) ; </a> 
<a> message . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> HttpChunk <RARE_TOKEN> = new <RARE_TOKEN> ( Unpooled . copiedBuffer ( <RARE_TOKEN> , CharsetUtil . <RARE_TOKEN> ) ) ; </a> 
<a> HttpChunk <RARE_TOKEN> = new <RARE_TOKEN> ( Unpooled . copiedBuffer ( <RARE_TOKEN> , CharsetUtil . <RARE_TOKEN> ) ) ; </a> 
<a> HttpChunk <RARE_TOKEN> = new <RARE_TOKEN> ( Unpooled . EMPTY_BUFFER ) ; </a> 
<a> assertFalse ( <RARE_TOKEN> . writeInbound ( message ) ) ; </a> 
<a> assertFalse ( <RARE_TOKEN> . writeInbound ( <RARE_TOKEN> ) ) ; </a> 
<a> assertFalse ( <RARE_TOKEN> . writeInbound ( <RARE_TOKEN> ) ) ; </a> 
<a> assertTrue ( <RARE_TOKEN> . writeInbound ( <RARE_TOKEN> ) ) ; </a> 
<a> assertTrue ( <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> HttpMessage <RARE_TOKEN> = ( HttpMessage ) <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> assertNotNull ( <RARE_TOKEN> ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> . getContent ( ) . readableBytes ( ) + <RARE_TOKEN> . getContent ( ) . readableBytes ( ) , HttpHeaders . <RARE_TOKEN> ( <RARE_TOKEN> ) ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> . getHeader ( <RARE_TOKEN> ) , Boolean . <RARE_TOKEN> . toString ( ) ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> assertNull ( <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> private static void <RARE_TOKEN> ( HttpMessage <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> buffer = ( <RARE_TOKEN> ) <RARE_TOKEN> . getContent ( ) ; </a> 
<a> assertEquals ( 2 , buffer . <RARE_TOKEN> ( ) ) ; </a> 
<a> List < ByteBuf > buffers = buffer . <RARE_TOKEN> ( 0 , buffer . capacity ( ) ) ; </a> 
<a> assertEquals ( 2 , buffers . size ( ) ) ; </a> 
<a> for ( ByteBuf buf : buffers ) { </a> 
<a> assertFalse ( buf instanceof <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( <RARE_TOKEN> * <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> HttpMessage message = new <RARE_TOKEN> ( HttpVersion . <RARE_TOKEN> ) ; </a> 
<a> HttpHeaders . setHeader ( message , <RARE_TOKEN> , true ) ; </a> 
<a> message . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> HttpChunk <RARE_TOKEN> = new <RARE_TOKEN> ( Unpooled . copiedBuffer ( <RARE_TOKEN> , CharsetUtil . <RARE_TOKEN> ) ) ; </a> 
<a> HttpChunk <RARE_TOKEN> = new <RARE_TOKEN> ( Unpooled . copiedBuffer ( <RARE_TOKEN> , CharsetUtil . <RARE_TOKEN> ) ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> . setHeader ( <RARE_TOKEN> , true ) ; </a> 
<a> assertFalse ( <RARE_TOKEN> . writeInbound ( message ) ) ; </a> 
<a> assertFalse ( <RARE_TOKEN> . writeInbound ( <RARE_TOKEN> ) ) ; </a> 
<a> assertFalse ( <RARE_TOKEN> . writeInbound ( <RARE_TOKEN> ) ) ; </a> 
<a> assertTrue ( <RARE_TOKEN> . writeInbound ( <RARE_TOKEN> ) ) ; </a> 
<a> assertTrue ( <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> HttpMessage <RARE_TOKEN> = ( HttpMessage ) <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> assertNotNull ( <RARE_TOKEN> ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> . getContent ( ) . readableBytes ( ) + <RARE_TOKEN> . getContent ( ) . readableBytes ( ) , HttpHeaders . <RARE_TOKEN> ( <RARE_TOKEN> ) ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> . getHeader ( <RARE_TOKEN> ) , Boolean . <RARE_TOKEN> . toString ( ) ) ; </a> 
<a> assertEquals ( <RARE_TOKEN> . getHeader ( <RARE_TOKEN> ) , Boolean . <RARE_TOKEN> . toString ( ) ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> assertNull ( <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> @ Test ( expected = TooLongFrameException . class ) </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( 4 ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> HttpMessage message = new <RARE_TOKEN> ( HttpVersion . <RARE_TOKEN> ) ; </a> 
<a> message . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> HttpChunk <RARE_TOKEN> = new <RARE_TOKEN> ( Unpooled . copiedBuffer ( <RARE_TOKEN> , CharsetUtil . <RARE_TOKEN> ) ) ; </a> 
<a> HttpChunk <RARE_TOKEN> = new <RARE_TOKEN> ( Unpooled . copiedBuffer ( <RARE_TOKEN> , CharsetUtil . <RARE_TOKEN> ) ) ; </a> 
<a> assertFalse ( <RARE_TOKEN> . writeInbound ( message ) ) ; </a> 
<a> assertFalse ( <RARE_TOKEN> . writeInbound ( <RARE_TOKEN> ) ) ; </a> 
<a> <RARE_TOKEN> . writeInbound ( <RARE_TOKEN> ) ; </a> 
<a> fail ( ) ; </a> 
<a> } </a> 
<a> @ Test ( expected = IllegalArgumentException . class ) </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> new <RARE_TOKEN> ( 0 ) ; </a> 
<a> } </a> 
<a> @ Test ( expected = IllegalArgumentException . class ) </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( Integer . MAX_VALUE ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( 1 ) ; </a> 
<a> } </a> 
<a> @ Test ( expected = IllegalStateException . class ) </a> 
<a> public void <RARE_TOKEN> ( ) throws Exception { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( Integer . MAX_VALUE ) ; </a> 
<a> ChannelHandlerContext ctx = <RARE_TOKEN> . <RARE_TOKEN> ( ChannelHandlerContext . class ) ; </a> 
<a> <RARE_TOKEN> . replay ( ctx ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ctx ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( 10 ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . http ; </a> 
<a> import static org . junit . Assert . * ; </a> 
<a> import io . netty . buffer . Unpooled ; </a> 
<a> import io . netty . channel . embedded . EmbeddedByteChannel ; </a> 
<a> import io . netty . handler . codec . <RARE_TOKEN> ; </a> 
<a> import io . netty . handler . codec . <RARE_TOKEN> ; </a> 
<a> import io . netty . util . CharsetUtil ; </a> 
<a> import org . junit . Test ; </a> 
<a> public class <RARE_TOKEN> { </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> 200 <RARE_TOKEN> + <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> + <RARE_TOKEN> <RARE_TOKEN> + <RARE_TOKEN> <RARE_TOKEN> + <RARE_TOKEN> </a> 
<a> + <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> 200 <RARE_TOKEN> + <RARE_TOKEN> <RARE_TOKEN> + <RARE_TOKEN> <RARE_TOKEN> + <RARE_TOKEN> </a> 
<a> + <RARE_TOKEN> + <RARE_TOKEN> + <RARE_TOKEN> + <RARE_TOKEN> + <RARE_TOKEN> ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> + <RARE_TOKEN> ; </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> codec = new <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , true ) ; </a> 
<a> EmbeddedByteChannel ch = new EmbeddedByteChannel ( codec ) ; </a> 
<a> ch . <RARE_TOKEN> ( new <RARE_TOKEN> ( HttpVersion . <RARE_TOKEN> , HttpMethod . GET , <RARE_TOKEN> ) ) ; </a> 
<a> ch . writeInbound ( Unpooled . copiedBuffer ( <RARE_TOKEN> , CharsetUtil . <RARE_TOKEN> ) ) ; </a> 
<a> ch . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> codec = new <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , true ) ; </a> 
<a> EmbeddedByteChannel ch = new EmbeddedByteChannel ( codec ) ; </a> 
<a> ch . <RARE_TOKEN> ( new <RARE_TOKEN> ( HttpVersion . <RARE_TOKEN> , HttpMethod . GET , <RARE_TOKEN> ) ) ; </a> 
<a> ch . writeInbound ( Unpooled . copiedBuffer ( <RARE_TOKEN> , CharsetUtil . <RARE_TOKEN> ) ) ; </a> 
<a> ch . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> codec = new <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , true ) ; </a> 
<a> EmbeddedByteChannel ch = new EmbeddedByteChannel ( codec ) ; </a> 
<a> assertTrue ( ch . <RARE_TOKEN> ( new <RARE_TOKEN> ( HttpVersion . <RARE_TOKEN> , HttpMethod . GET , <RARE_TOKEN> ) ) ) ; </a> 
<a> assertNotNull ( ch . readOutbound ( ) ) ; </a> 
<a> try { </a> 
<a> ch . <RARE_TOKEN> ( ) ; </a> 
<a> fail ( ) ; </a> 
<a> } catch ( <RARE_TOKEN> e ) { </a> 
<a> assertTrue ( e instanceof <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> codec = new <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , true ) ; </a> 
<a> EmbeddedByteChannel ch = new EmbeddedByteChannel ( codec ) ; </a> 
<a> ch . <RARE_TOKEN> ( new <RARE_TOKEN> ( HttpVersion . <RARE_TOKEN> , HttpMethod . GET , <RARE_TOKEN> ) ) ; </a> 
<a> ch . writeInbound ( Unpooled . copiedBuffer ( <RARE_TOKEN> , CharsetUtil . <RARE_TOKEN> ) ) ; </a> 
<a> try { </a> 
<a> ch . <RARE_TOKEN> ( ) ; </a> 
<a> fail ( ) ; </a> 
<a> } catch ( <RARE_TOKEN> e ) { </a> 
<a> assertTrue ( e instanceof <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . http ; </a> 
<a> import io . netty . buffer . ByteBuf ; </a> 
<a> import io . netty . buffer . Unpooled ; </a> 
<a> import io . netty . channel . embedded . EmbeddedByteChannel ; </a> 
<a> import io . netty . util . CharsetUtil ; </a> 
<a> import org . junit . Assert ; </a> 
<a> import org . junit . Test ; </a> 
<a> public class <RARE_TOKEN> { </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) throws Exception { </a> 
<a> int maxChunkSize = <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( 1000 , 1000 , maxChunkSize ) ; </a> 
<a> EmbeddedByteChannel <RARE_TOKEN> = new EmbeddedByteChannel ( <RARE_TOKEN> ) ; </a> 
<a> int <RARE_TOKEN> = maxChunkSize * 5 ; </a> 
<a> <RARE_TOKEN> . writeInbound ( Unpooled . copiedBuffer ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> + </a> 
<a> <RARE_TOKEN> " + <RARE_TOKEN> + <RARE_TOKEN> + </a> 
<a> <RARE_TOKEN> , CharsetUtil . <RARE_TOKEN> ) ) ; </a> 
<a> int <RARE_TOKEN> = ( int ) ( maxChunkSize * <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . writeInbound ( <RARE_TOKEN> ( <RARE_TOKEN> ) ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> HttpMessage httpMessage = ( HttpMessage ) <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> Assert . assertSame ( <RARE_TOKEN> . <RARE_TOKEN> , httpMessage . <RARE_TOKEN> ( ) ) ; </a> 
<a> boolean <RARE_TOKEN> = true ; </a> 
<a> int <RARE_TOKEN> = 0 ; </a> 
<a> for ( ; ; ) { </a> 
<a> HttpChunk <RARE_TOKEN> = ( HttpChunk ) <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> break ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> = false ; </a> 
<a> <RARE_TOKEN> += <RARE_TOKEN> . getContent ( ) . readableBytes ( ) ; </a> 
<a> Assert . assertFalse ( <RARE_TOKEN> . isLast ( ) ) ; </a> 
<a> } </a> 
<a> Assert . assertFalse ( <RARE_TOKEN> ) ; </a> 
<a> Assert . assertEquals ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> private static ByteBuf <RARE_TOKEN> ( int size ) { </a> 
<a> StringBuilder sb = new StringBuilder ( ) ; </a> 
<a> for ( int i = 0 ; i < size ; ++ i ) { </a> 
<a> sb . append ( "a" ) ; </a> 
<a> } </a> 
<a> return Unpooled . copiedBuffer ( sb . toString ( ) , CharsetUtil . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . http . websocketx ; </a> 
<a> import static io . netty . handler . codec . http . HttpHeaders . Values . * ; </a> 
<a> import static io . netty . handler . codec . http . HttpVersion . * ; </a> 
<a> import io . netty . buffer . ByteBuf ; </a> 
<a> import io . netty . buffer . Unpooled ; </a> 
<a> import io . netty . channel . embedded . EmbeddedByteChannel ; </a> 
<a> import io . netty . handler . codec . http . <RARE_TOKEN> ; </a> 
<a> import io . netty . handler . codec . http . <RARE_TOKEN> ; </a> 
<a> import io . netty . handler . codec . http . HttpHeaders . Names ; </a> 
<a> import io . netty . handler . codec . http . HttpMethod ; </a> 
<a> import io . netty . handler . codec . http . HttpRequest ; </a> 
<a> import io . netty . handler . codec . http . <RARE_TOKEN> ; </a> 
<a> import io . netty . handler . codec . http . HttpResponse ; </a> 
<a> import io . netty . handler . codec . http . <RARE_TOKEN> ; </a> 
<a> import io . netty . handler . codec . http . <RARE_TOKEN> ; </a> 
<a> import io . netty . util . CharsetUtil ; </a> 
<a> import org . junit . Assert ; </a> 
<a> import org . junit . Test ; </a> 
<a> public class <RARE_TOKEN> { </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> EmbeddedByteChannel ch = new EmbeddedByteChannel ( </a> 
<a> new <RARE_TOKEN> ( <RARE_TOKEN> ) , new <RARE_TOKEN> ( ) , new <RARE_TOKEN> ( ) ) ; </a> 
<a> HttpRequest req = new <RARE_TOKEN> ( <RARE_TOKEN> , HttpMethod . GET , <RARE_TOKEN> ) ; </a> 
<a> req . setHeader ( Names . <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> req . setHeader ( Names . <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> req . setHeader ( Names . <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> req . setHeader ( Names . <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> req . setHeader ( Names . <RARE_TOKEN> , <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> 1 <RARE_TOKEN> ) ; </a> 
<a> req . setHeader ( Names . <RARE_TOKEN> , <RARE_TOKEN> 5 <RARE_TOKEN> 1 <RARE_TOKEN> ) ; </a> 
<a> req . setHeader ( Names . <RARE_TOKEN> , <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> ByteBuf buffer = Unpooled . copiedBuffer ( <RARE_TOKEN> , CharsetUtil . <RARE_TOKEN> ) ; </a> 
<a> req . <RARE_TOKEN> ( buffer ) ; </a> 
<a> new <RARE_TOKEN> ( </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , Integer . MAX_VALUE ) . <RARE_TOKEN> ( ch , req ) ; </a> 
<a> ByteBuf <RARE_TOKEN> = ch . readOutbound ( ) ; </a> 
<a> EmbeddedByteChannel <RARE_TOKEN> = new EmbeddedByteChannel ( new <RARE_TOKEN> ( ) ) ; </a> 
<a> <RARE_TOKEN> . writeInbound ( <RARE_TOKEN> ) ; </a> 
<a> HttpResponse res = ( HttpResponse ) <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> Assert . assertEquals ( <RARE_TOKEN> , res . getHeader ( Names . <RARE_TOKEN> ) ) ; </a> 
<a> Assert . assertEquals ( <RARE_TOKEN> , res . getHeader ( Names . <RARE_TOKEN> ) ) ; </a> 
<a> Assert . assertEquals ( <RARE_TOKEN> , res . getContent ( ) . toString ( CharsetUtil . <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . http . websocketx ; </a> 
<a> import static io . netty . handler . codec . http . HttpHeaders . Values . * ; </a> 
<a> import static io . netty . handler . codec . http . HttpVersion . * ; </a> 
<a> import io . netty . buffer . ByteBuf ; </a> 
<a> import io . netty . channel . embedded . EmbeddedByteChannel ; </a> 
<a> import io . netty . handler . codec . http . <RARE_TOKEN> ; </a> 
<a> import io . netty . handler . codec . http . <RARE_TOKEN> ; </a> 
<a> import io . netty . handler . codec . http . HttpHeaders . Names ; </a> 
<a> import io . netty . handler . codec . http . HttpMethod ; </a> 
<a> import io . netty . handler . codec . http . HttpRequest ; </a> 
<a> import io . netty . handler . codec . http . <RARE_TOKEN> ; </a> 
<a> import io . netty . handler . codec . http . HttpResponse ; </a> 
<a> import io . netty . handler . codec . http . <RARE_TOKEN> ; </a> 
<a> import io . netty . handler . codec . http . <RARE_TOKEN> ; </a> 
<a> import org . junit . Assert ; </a> 
<a> import org . junit . Test ; </a> 
<a> public class <RARE_TOKEN> { </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> EmbeddedByteChannel ch = new EmbeddedByteChannel ( </a> 
<a> new <RARE_TOKEN> ( <RARE_TOKEN> ) , new <RARE_TOKEN> ( ) , new <RARE_TOKEN> ( ) ) ; </a> 
<a> HttpRequest req = new <RARE_TOKEN> ( <RARE_TOKEN> , HttpMethod . GET , <RARE_TOKEN> ) ; </a> 
<a> req . setHeader ( Names . <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> req . setHeader ( Names . <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> req . setHeader ( Names . <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> req . setHeader ( Names . <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> req . setHeader ( Names . <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> req . setHeader ( Names . <RARE_TOKEN> , <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> req . setHeader ( Names . <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> new <RARE_TOKEN> ( </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , false , Integer . MAX_VALUE ) . <RARE_TOKEN> ( ch , req ) ; </a> 
<a> ByteBuf <RARE_TOKEN> = ch . readOutbound ( ) ; </a> 
<a> EmbeddedByteChannel <RARE_TOKEN> = new EmbeddedByteChannel ( new <RARE_TOKEN> ( ) ) ; </a> 
<a> <RARE_TOKEN> . writeInbound ( <RARE_TOKEN> ) ; </a> 
<a> HttpResponse res = ( HttpResponse ) <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> Assert . assertEquals ( </a> 
<a> <RARE_TOKEN> , res . getHeader ( Names . <RARE_TOKEN> ) ) ; </a> 
<a> Assert . assertEquals ( <RARE_TOKEN> , res . getHeader ( Names . <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . spdy ; </a> 
<a> import io . netty . channel . ChannelHandlerContext ; </a> 
<a> import io . netty . channel . ChannelInboundMessageHandlerAdapter ; </a> 
<a> import io . netty . channel . embedded . <RARE_TOKEN> ; </a> 
<a> import io . netty . logging . InternalLogger ; </a> 
<a> import io . netty . logging . InternalLoggerFactory ; </a> 
<a> import java . util . List ; </a> 
<a> import java . util . Map ; </a> 
<a> import org . junit . Assert ; </a> 
<a> import org . junit . Test ; </a> 
<a> public class <RARE_TOKEN> { </a> 
<a> private static final InternalLogger logger = </a> 
<a> InternalLoggerFactory . getInstance ( <RARE_TOKEN> . class ) ; </a> 
<a> private static final int <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> private static final <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( ) ; </a> 
<a> static { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> , 0 ) ; </a> 
<a> } </a> 
<a> private static void <RARE_TOKEN> ( SpdyHeaderBlock <RARE_TOKEN> , SpdyHeaderBlock expected ) { </a> 
<a> for ( String name : expected . <RARE_TOKEN> ( ) ) { </a> 
<a> List < String > <RARE_TOKEN> = expected . getHeaders ( name ) ; </a> 
<a> List < String > <RARE_TOKEN> = <RARE_TOKEN> . getHeaders ( name ) ; </a> 
<a> Assert . assertTrue ( <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> Assert . assertTrue ( <RARE_TOKEN> . isEmpty ( ) ) ; </a> 
<a> <RARE_TOKEN> . removeHeader ( name ) ; </a> 
<a> } </a> 
<a> Assert . assertTrue ( <RARE_TOKEN> . getHeaders ( ) . isEmpty ( ) ) ; </a> 
<a> } </a> 
<a> private static void <RARE_TOKEN> ( Object msg , int streamID , boolean last ) { </a> 
<a> Assert . assertNotNull ( msg ) ; </a> 
<a> Assert . assertTrue ( msg instanceof <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> spdyDataFrame = ( <RARE_TOKEN> ) msg ; </a> 
<a> Assert . assertTrue ( spdyDataFrame . getStreamId ( ) == streamID ) ; </a> 
<a> Assert . assertTrue ( spdyDataFrame . isLast ( ) == last ) ; </a> 
<a> } </a> 
<a> private static void <RARE_TOKEN> ( Object msg , int streamID , boolean last , SpdyHeaderBlock headers ) { </a> 
<a> Assert . assertNotNull ( msg ) ; </a> 
<a> Assert . assertTrue ( msg instanceof <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> spdySynReplyFrame = ( <RARE_TOKEN> ) msg ; </a> 
<a> Assert . assertTrue ( spdySynReplyFrame . getStreamId ( ) == streamID ) ; </a> 
<a> Assert . assertTrue ( spdySynReplyFrame . isLast ( ) == last ) ; </a> 
<a> <RARE_TOKEN> ( spdySynReplyFrame , headers ) ; </a> 
<a> } </a> 
<a> private static void <RARE_TOKEN> ( Object msg , int streamID , SpdyStreamStatus status ) { </a> 
<a> Assert . assertNotNull ( msg ) ; </a> 
<a> Assert . assertTrue ( msg instanceof <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = ( <RARE_TOKEN> ) msg ; </a> 
<a> Assert . assertTrue ( <RARE_TOKEN> . getStreamId ( ) == streamID ) ; </a> 
<a> Assert . assertTrue ( <RARE_TOKEN> . getStatus ( ) . equals ( status ) ) ; </a> 
<a> } </a> 
<a> private static void <RARE_TOKEN> ( Object msg , int ID ) { </a> 
<a> Assert . assertNotNull ( msg ) ; </a> 
<a> Assert . assertTrue ( msg instanceof <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = ( <RARE_TOKEN> ) msg ; </a> 
<a> Assert . assertTrue ( <RARE_TOKEN> . getId ( ) == ID ) ; </a> 
<a> } </a> 
<a> private static void <RARE_TOKEN> ( Object msg , int <RARE_TOKEN> ) { </a> 
<a> Assert . assertNotNull ( msg ) ; </a> 
<a> Assert . assertTrue ( msg instanceof <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = ( <RARE_TOKEN> ) msg ; </a> 
<a> Assert . assertTrue ( <RARE_TOKEN> . <RARE_TOKEN> ( ) == <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> private static void <RARE_TOKEN> ( Object msg , int streamID , SpdyHeaderBlock headers ) { </a> 
<a> Assert . assertNotNull ( msg ) ; </a> 
<a> Assert . assertTrue ( msg instanceof <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = ( <RARE_TOKEN> ) msg ; </a> 
<a> Assert . assertTrue ( <RARE_TOKEN> . getStreamId ( ) == streamID ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> , headers ) ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( int version , boolean server ) { </a> 
<a> <RARE_TOKEN> sessionHandler = new <RARE_TOKEN> ( </a> 
<a> new <RARE_TOKEN> ( version , server ) , new <RARE_TOKEN> ( <RARE_TOKEN> , server ) ) ; </a> 
<a> while ( sessionHandler . readOutbound ( ) != null ) { </a> 
<a> continue ; </a> 
<a> } </a> 
<a> int <RARE_TOKEN> = server ? 1 : 2 ; </a> 
<a> int <RARE_TOKEN> = server ? 2 : 1 ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> spdySynStreamFrame = </a> 
<a> new <RARE_TOKEN> ( <RARE_TOKEN> , 0 , ( byte ) 0 ) ; </a> 
<a> spdySynStreamFrame . setHeader ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> spdyDataFrame = new <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> spdyDataFrame . <RARE_TOKEN> ( true ) ; </a> 
<a> sessionHandler . writeInbound ( new <RARE_TOKEN> ( <RARE_TOKEN> ) ) ; </a> 
<a> <RARE_TOKEN> ( sessionHandler . readOutbound ( ) , <RARE_TOKEN> , SpdyStreamStatus . <RARE_TOKEN> ) ; </a> 
<a> Assert . assertNull ( sessionHandler . readOutbound ( ) ) ; </a> 
<a> sessionHandler . writeInbound ( new <RARE_TOKEN> ( <RARE_TOKEN> ) ) ; </a> 
<a> <RARE_TOKEN> ( sessionHandler . readOutbound ( ) , <RARE_TOKEN> , SpdyStreamStatus . <RARE_TOKEN> ) ; </a> 
<a> Assert . assertNull ( sessionHandler . readOutbound ( ) ) ; </a> 
<a> <RARE_TOKEN> += 2 ; </a> 
<a> sessionHandler . writeInbound ( new <RARE_TOKEN> ( <RARE_TOKEN> ) ) ; </a> 
<a> Assert . assertNull ( sessionHandler . readOutbound ( ) ) ; </a> 
<a> sessionHandler . writeInbound ( new <RARE_TOKEN> ( <RARE_TOKEN> ) ) ; </a> 
<a> <RARE_TOKEN> ( sessionHandler . readOutbound ( ) , <RARE_TOKEN> , SpdyStreamStatus . <RARE_TOKEN> ) ; </a> 
<a> Assert . assertNull ( sessionHandler . readOutbound ( ) ) ; </a> 
<a> <RARE_TOKEN> += 2 ; </a> 
<a> sessionHandler . writeInbound ( spdySynStreamFrame ) ; </a> 
<a> <RARE_TOKEN> ( sessionHandler . readOutbound ( ) , <RARE_TOKEN> , false , spdySynStreamFrame ) ; </a> 
<a> Assert . assertNull ( sessionHandler . readOutbound ( ) ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . addHeader ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . addHeader ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> sessionHandler . writeInbound ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( sessionHandler . readOutbound ( ) , <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> Assert . assertNull ( sessionHandler . readOutbound ( ) ) ; </a> 
<a> <RARE_TOKEN> += 2 ; </a> 
<a> spdySynStreamFrame . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> spdySynStreamFrame . <RARE_TOKEN> ( true ) ; </a> 
<a> spdySynStreamFrame . <RARE_TOKEN> ( true ) ; </a> 
<a> sessionHandler . writeInbound ( spdySynStreamFrame ) ; </a> 
<a> <RARE_TOKEN> ( sessionHandler . readOutbound ( ) , <RARE_TOKEN> , SpdyStreamStatus . <RARE_TOKEN> ) ; </a> 
<a> Assert . assertNull ( sessionHandler . readOutbound ( ) ) ; </a> 
<a> sessionHandler . writeInbound ( new <RARE_TOKEN> ( <RARE_TOKEN> , 3 ) ) ; </a> 
<a> Assert . assertNull ( sessionHandler . readOutbound ( ) ) ; </a> 
<a> <RARE_TOKEN> += 2 ; </a> 
<a> spdySynStreamFrame . <RARE_TOKEN> ( false ) ; </a> 
<a> sessionHandler . writeInbound ( spdySynStreamFrame ) ; </a> 
<a> Assert . assertNull ( sessionHandler . readOutbound ( ) ) ; </a> 
<a> spdySynStreamFrame . <RARE_TOKEN> ( false ) ; </a> 
<a> sessionHandler . writeInbound ( spdySynStreamFrame ) ; </a> 
<a> <RARE_TOKEN> ( sessionHandler . readOutbound ( ) , <RARE_TOKEN> , SpdyStreamStatus . <RARE_TOKEN> ) ; </a> 
<a> Assert . assertNull ( sessionHandler . readOutbound ( ) ) ; </a> 
<a> <RARE_TOKEN> += 2 ; </a> 
<a> spdySynStreamFrame . <RARE_TOKEN> ( <RARE_TOKEN> - 1 ) ; </a> 
<a> sessionHandler . writeInbound ( spdySynStreamFrame ) ; </a> 
<a> <RARE_TOKEN> ( sessionHandler . readOutbound ( ) , <RARE_TOKEN> - 1 , SpdyStreamStatus . <RARE_TOKEN> ) ; </a> 
<a> Assert . assertNull ( sessionHandler . readOutbound ( ) ) ; </a> 
<a> spdySynStreamFrame . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> , 2 ) ; </a> 
<a> sessionHandler . writeInbound ( <RARE_TOKEN> ) ; </a> 
<a> Assert . assertNull ( sessionHandler . readOutbound ( ) ) ; </a> 
<a> sessionHandler . writeInbound ( spdySynStreamFrame ) ; </a> 
<a> <RARE_TOKEN> ( sessionHandler . readOutbound ( ) , <RARE_TOKEN> , SpdyStreamStatus . <RARE_TOKEN> ) ; </a> 
<a> Assert . assertNull ( sessionHandler . readOutbound ( ) ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> , 4 ) ; </a> 
<a> sessionHandler . writeInbound ( <RARE_TOKEN> ) ; </a> 
<a> Assert . assertNull ( sessionHandler . readOutbound ( ) ) ; </a> 
<a> sessionHandler . writeInbound ( spdySynStreamFrame ) ; </a> 
<a> <RARE_TOKEN> ( sessionHandler . readOutbound ( ) , <RARE_TOKEN> , false , spdySynStreamFrame ) ; </a> 
<a> Assert . assertNull ( sessionHandler . readOutbound ( ) ) ; </a> 
<a> int <RARE_TOKEN> = spdyDataFrame . getStreamId ( ) ; </a> 
<a> sessionHandler . writeInbound ( spdyDataFrame ) ; </a> 
<a> <RARE_TOKEN> ( sessionHandler . readOutbound ( ) , <RARE_TOKEN> , spdyDataFrame . isLast ( ) ) ; </a> 
<a> Assert . assertNull ( sessionHandler . readOutbound ( ) ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> sessionHandler . writeInbound ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( sessionHandler . readOutbound ( ) , <RARE_TOKEN> , SpdyStreamStatus . <RARE_TOKEN> ) ; </a> 
<a> Assert . assertNull ( sessionHandler . readOutbound ( ) ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> sessionHandler . writeInbound ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( sessionHandler . readOutbound ( ) , <RARE_TOKEN> , SpdyStreamStatus . <RARE_TOKEN> ) ; </a> 
<a> Assert . assertNull ( sessionHandler . readOutbound ( ) ) ; </a> 
<a> sessionHandler . writeInbound ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( sessionHandler . readOutbound ( ) , <RARE_TOKEN> . getId ( ) ) ; </a> 
<a> Assert . assertNull ( sessionHandler . readOutbound ( ) ) ; </a> 
<a> sessionHandler . writeInbound ( <RARE_TOKEN> ) ; </a> 
<a> Assert . assertNull ( sessionHandler . readOutbound ( ) ) ; </a> 
<a> sessionHandler . writeInbound ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( sessionHandler . readOutbound ( ) , <RARE_TOKEN> ) ; </a> 
<a> Assert . assertNull ( sessionHandler . readOutbound ( ) ) ; </a> 
<a> <RARE_TOKEN> += 2 ; </a> 
<a> spdySynStreamFrame . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> sessionHandler . writeInbound ( spdySynStreamFrame ) ; </a> 
<a> <RARE_TOKEN> ( sessionHandler . readOutbound ( ) , <RARE_TOKEN> , SpdyStreamStatus . <RARE_TOKEN> ) ; </a> 
<a> Assert . assertNull ( sessionHandler . readOutbound ( ) ) ; </a> 
<a> spdyDataFrame . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> sessionHandler . writeInbound ( spdyDataFrame ) ; </a> 
<a> Assert . assertNull ( sessionHandler . readOutbound ( ) ) ; </a> 
<a> sessionHandler . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> for ( int version = <RARE_TOKEN> . <RARE_TOKEN> ; version <= <RARE_TOKEN> . <RARE_TOKEN> ; version ++ ) { </a> 
<a> logger . info ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> + version ) ; </a> 
<a> <RARE_TOKEN> ( version , false ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> for ( int version = <RARE_TOKEN> . <RARE_TOKEN> ; version <= <RARE_TOKEN> . <RARE_TOKEN> ; version ++ ) { </a> 
<a> logger . info ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> + version ) ; </a> 
<a> <RARE_TOKEN> ( version , true ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private class <RARE_TOKEN> extends ChannelInboundMessageHandlerAdapter < Object > { </a> 
<a> private final int <RARE_TOKEN> ; </a> 
<a> private final boolean server ; </a> 
<a> <RARE_TOKEN> ( int <RARE_TOKEN> , boolean server ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> this . server = server ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ChannelHandlerContext ctx ) throws Exception { </a> 
<a> int streamID = server ? 2 : 1 ; </a> 
<a> <RARE_TOKEN> spdySynStreamFrame = </a> 
<a> new <RARE_TOKEN> ( streamID , 0 , ( byte ) 0 ) ; </a> 
<a> spdySynStreamFrame . <RARE_TOKEN> ( true ) ; </a> 
<a> ctx . write ( spdySynStreamFrame ) ; </a> 
<a> spdySynStreamFrame . <RARE_TOKEN> ( spdySynStreamFrame . getStreamId ( ) + 2 ) ; </a> 
<a> ctx . write ( spdySynStreamFrame ) ; </a> 
<a> spdySynStreamFrame . <RARE_TOKEN> ( spdySynStreamFrame . getStreamId ( ) + 2 ) ; </a> 
<a> ctx . write ( spdySynStreamFrame ) ; </a> 
<a> spdySynStreamFrame . <RARE_TOKEN> ( spdySynStreamFrame . getStreamId ( ) + 2 ) ; </a> 
<a> ctx . write ( spdySynStreamFrame ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> , 3 ) ; </a> 
<a> ctx . write ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ChannelHandlerContext ctx , Object msg ) throws Exception { </a> 
<a> if ( msg instanceof <RARE_TOKEN> || </a> 
<a> msg instanceof <RARE_TOKEN> || </a> 
<a> msg instanceof <RARE_TOKEN> ) { </a> 
<a> ctx . write ( msg ) ; </a> 
<a> return ; </a> 
<a> } </a> 
<a> if ( msg instanceof <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> spdySynStreamFrame = ( <RARE_TOKEN> ) msg ; </a> 
<a> if ( ! spdySynStreamFrame . <RARE_TOKEN> ( ) ) { </a> 
<a> int streamID = spdySynStreamFrame . getStreamId ( ) ; </a> 
<a> <RARE_TOKEN> spdySynReplyFrame = new <RARE_TOKEN> ( streamID ) ; </a> 
<a> spdySynReplyFrame . <RARE_TOKEN> ( spdySynStreamFrame . isLast ( ) ) ; </a> 
<a> for ( Map . Entry < String , String > entry : spdySynStreamFrame . getHeaders ( ) ) { </a> 
<a> spdySynReplyFrame . addHeader ( entry . <RARE_TOKEN> ( ) , entry . getValue ( ) ) ; </a> 
<a> } </a> 
<a> ctx . write ( spdySynReplyFrame ) ; </a> 
<a> } </a> 
<a> return ; </a> 
<a> } </a> 
<a> if ( msg instanceof <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = ( <RARE_TOKEN> ) msg ; </a> 
<a> if ( <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ) { </a> 
<a> ctx . close ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec ; </a> 
<a> import io . netty . buffer . ByteBuf ; </a> 
<a> import io . netty . channel . ChannelFuture ; </a> 
<a> import io . netty . channel . <RARE_TOKEN> ; </a> 
<a> import io . netty . channel . ChannelHandlerContext ; </a> 
<a> import io . netty . channel . <RARE_TOKEN> ; </a> 
<a> import io . netty . channel . <RARE_TOKEN> ; </a> 
<a> public abstract class <RARE_TOKEN> </a> 
<a> extends <RARE_TOKEN> </a> 
<a> implements <RARE_TOKEN> , <RARE_TOKEN> { </a> 
<a> private final <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( ) { </a> 
<a> @ Override </a> 
<a> public void encode ( </a> 
<a> ChannelHandlerContext ctx , </a> 
<a> ByteBuf in , ByteBuf out ) throws Exception { </a> 
<a> <RARE_TOKEN> . this . encode ( ctx , in , out ) ; </a> 
<a> } </a> 
<a> } ; </a> 
<a> private final <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( ) { </a> 
<a> @ Override </a> 
<a> public void decode ( </a> 
<a> ChannelHandlerContext ctx , </a> 
<a> ByteBuf in , ByteBuf out ) throws Exception { </a> 
<a> <RARE_TOKEN> . this . decode ( ctx , in , out ) ; </a> 
<a> } </a> 
<a> } ; </a> 
<a> @ Override </a> 
<a> public ByteBuf <RARE_TOKEN> ( ChannelHandlerContext ctx ) throws Exception { </a> 
<a> return <RARE_TOKEN> . <RARE_TOKEN> ( ctx ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void inboundBufferUpdated ( ChannelHandlerContext ctx ) throws Exception { </a> 
<a> <RARE_TOKEN> . inboundBufferUpdated ( ctx ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ByteBuf <RARE_TOKEN> ( ChannelHandlerContext ctx ) throws Exception { </a> 
<a> return <RARE_TOKEN> . <RARE_TOKEN> ( ctx ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void flush ( </a> 
<a> ChannelHandlerContext ctx , ChannelFuture future ) throws Exception { </a> 
<a> <RARE_TOKEN> . flush ( ctx , future ) ; </a> 
<a> } </a> 
<a> public abstract void encode ( </a> 
<a> ChannelHandlerContext ctx , </a> 
<a> ByteBuf in , ByteBuf out ) throws Exception ; </a> 
<a> public abstract void decode ( </a> 
<a> ChannelHandlerContext ctx , </a> 
<a> ByteBuf in , ByteBuf out ) throws Exception ; </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec ; </a> 
<a> import io . netty . buffer . ByteBuf ; </a> 
<a> import io . netty . buffer . Unpooled ; </a> 
<a> import io . netty . channel . ChannelHandlerContext ; </a> 
<a> import io . netty . channel . <RARE_TOKEN> ; </a> 
<a> import io . netty . channel . <RARE_TOKEN> ; </a> 
<a> import io . netty . channel . ChannelPipeline ; </a> 
<a> public abstract class <RARE_TOKEN> < <RARE_TOKEN> > </a> 
<a> extends <RARE_TOKEN> implements <RARE_TOKEN> { </a> 
<a> private ChannelHandlerContext ctx ; </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ChannelHandlerContext ctx ) throws Exception { </a> 
<a> this . ctx = ctx ; </a> 
<a> super . <RARE_TOKEN> ( ctx ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ByteBuf <RARE_TOKEN> ( ChannelHandlerContext ctx ) throws Exception { </a> 
<a> return Unpooled . buffer ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void inboundBufferUpdated ( ChannelHandlerContext ctx ) throws Exception { </a> 
<a> <RARE_TOKEN> ( ctx ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ChannelHandlerContext ctx ) throws Exception { </a> 
<a> ByteBuf in = ctx . <RARE_TOKEN> ( ) ; </a> 
<a> if ( in . readable ( ) ) { </a> 
<a> <RARE_TOKEN> ( ctx ) ; </a> 
<a> } </a> 
<a> try { </a> 
<a> if ( <RARE_TOKEN> . <RARE_TOKEN> ( ctx , <RARE_TOKEN> ( ctx , in ) , true ) ) { </a> 
<a> ctx . fireInboundBufferUpdated ( ) ; </a> 
<a> } </a> 
<a> } catch ( Throwable t ) { </a> 
<a> if ( t instanceof <RARE_TOKEN> ) { </a> 
<a> ctx . fireExceptionCaught ( t ) ; </a> 
<a> } else { </a> 
<a> ctx . fireExceptionCaught ( new <RARE_TOKEN> ( t ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> ctx . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> protected void <RARE_TOKEN> ( ChannelHandlerContext ctx ) { </a> 
<a> ByteBuf in = ctx . <RARE_TOKEN> ( ) ; </a> 
<a> boolean <RARE_TOKEN> = false ; </a> 
<a> for ( ; ; ) { </a> 
<a> try { </a> 
<a> int <RARE_TOKEN> = in . readableBytes ( ) ; </a> 
<a> <RARE_TOKEN> o = decode ( ctx , in ) ; </a> 
<a> if ( o == null ) { </a> 
<a> if ( <RARE_TOKEN> == in . readableBytes ( ) ) { </a> 
<a> break ; </a> 
<a> } else { </a> 
<a> continue ; </a> 
<a> } </a> 
<a> } else { </a> 
<a> if ( <RARE_TOKEN> == in . readableBytes ( ) ) { </a> 
<a> throw new IllegalStateException ( </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> not read <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> a <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> . <RARE_TOKEN> ( ctx , o , true ) ) { </a> 
<a> <RARE_TOKEN> = true ; </a> 
<a> } else { </a> 
<a> break ; </a> 
<a> } </a> 
<a> } catch ( Throwable t ) { </a> 
<a> in . unsafe ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> if ( <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> = false ; </a> 
<a> ctx . fireInboundBufferUpdated ( ) ; </a> 
<a> } </a> 
<a> if ( t instanceof <RARE_TOKEN> ) { </a> 
<a> ctx . fireExceptionCaught ( t ) ; </a> 
<a> } else { </a> 
<a> ctx . fireExceptionCaught ( new <RARE_TOKEN> ( t ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> in . unsafe ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> if ( <RARE_TOKEN> ) { </a> 
<a> ctx . fireInboundBufferUpdated ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( String <RARE_TOKEN> , <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> if ( ! ctx . executor ( ) . inEventLoop ( ) ) { </a> 
<a> throw new IllegalStateException ( <RARE_TOKEN> in event <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> ctx . pipeline ( ) . <RARE_TOKEN> ( ctx . name ( ) , <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> ByteBuf in = ctx . <RARE_TOKEN> ( ) ; </a> 
<a> try { </a> 
<a> if ( in . readable ( ) ) { </a> 
<a> ctx . <RARE_TOKEN> ( ) . writeBytes ( ctx . <RARE_TOKEN> ( ) ) ; </a> 
<a> ctx . fireInboundBufferUpdated ( ) ; </a> 
<a> } </a> 
<a> } finally { </a> 
<a> ctx . pipeline ( ) . remove ( this ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public abstract <RARE_TOKEN> decode ( ChannelHandlerContext ctx , ByteBuf in ) throws Exception ; </a> 
<a> public <RARE_TOKEN> <RARE_TOKEN> ( ChannelHandlerContext ctx , ByteBuf in ) throws Exception { </a> 
<a> return decode ( ctx , in ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec ; </a> 
<a> import io . netty . buffer . ByteBuf ; </a> 
<a> import io . netty . channel . ChannelHandlerContext ; </a> 
<a> import io . netty . channel . <RARE_TOKEN> ; </a> 
<a> import io . netty . channel . <RARE_TOKEN> ; </a> 
<a> import io . netty . channel . <RARE_TOKEN> ; </a> 
<a> final class <RARE_TOKEN> { </a> 
<a> static boolean <RARE_TOKEN> ( </a> 
<a> ChannelHandlerContext ctx , Object msg , boolean <RARE_TOKEN> ) throws Exception { </a> 
<a> if ( msg == null ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> if ( msg instanceof Object [ ] ) { </a> 
<a> Object [ ] array = ( Object [ ] ) msg ; </a> 
<a> if ( array . length == 0 ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> boolean <RARE_TOKEN> = false ; </a> 
<a> for ( Object m : array ) { </a> 
<a> if ( m == null ) { </a> 
<a> break ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> ( ctx , m , <RARE_TOKEN> ) ) { </a> 
<a> <RARE_TOKEN> = true ; </a> 
<a> } </a> 
<a> } </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> ) { </a> 
<a> if ( ctx . <RARE_TOKEN> ( ) ) { </a> 
<a> ctx . <RARE_TOKEN> ( ) . add ( msg ) ; </a> 
<a> return true ; </a> 
<a> } </a> 
<a> if ( msg instanceof ByteBuf && ctx . <RARE_TOKEN> ( ) ) { </a> 
<a> ByteBuf <RARE_TOKEN> = ctx . <RARE_TOKEN> ( ) ; </a> 
<a> ByteBuf src = ( ByteBuf ) msg ; </a> 
<a> <RARE_TOKEN> . writeBytes ( src , src . readerIndex ( ) , src . readableBytes ( ) ) ; </a> 
<a> return true ; </a> 
<a> } </a> 
<a> } else { </a> 
<a> if ( ctx . <RARE_TOKEN> ( ) ) { </a> 
<a> ctx . <RARE_TOKEN> ( ) . add ( msg ) ; </a> 
<a> return true ; </a> 
<a> } </a> 
<a> if ( msg instanceof ByteBuf && ctx . <RARE_TOKEN> ( ) ) { </a> 
<a> ByteBuf <RARE_TOKEN> = ctx . <RARE_TOKEN> ( ) ; </a> 
<a> ByteBuf src = ( ByteBuf ) msg ; </a> 
<a> <RARE_TOKEN> . writeBytes ( src , src . readerIndex ( ) , src . readableBytes ( ) ) ; </a> 
<a> return true ; </a> 
<a> } </a> 
<a> } </a> 
<a> throw new <RARE_TOKEN> ( String . format ( </a> 
<a> <RARE_TOKEN> handler <RARE_TOKEN> <RARE_TOKEN> not <RARE_TOKEN> a <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> a <RARE_TOKEN> , </a> 
<a> ctx . name ( ) , </a> 
<a> <RARE_TOKEN> ? <RARE_TOKEN> . class . getSimpleName ( ) </a> 
<a> : <RARE_TOKEN> . class . getSimpleName ( ) , </a> 
<a> msg . getClass ( ) . getSimpleName ( ) ) ) ; </a> 
<a> } </a> 
<a> private <RARE_TOKEN> ( ) { </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> private static final long serialVersionUID = <RARE_TOKEN> ; </a> 
<a> public <RARE_TOKEN> ( ) { </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( String message , Throwable cause ) { </a> 
<a> super ( message , cause ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( String message ) { </a> 
<a> super ( message ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( Throwable cause ) { </a> 
<a> super ( cause ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> private static final long serialVersionUID = <RARE_TOKEN> ; </a> 
<a> public <RARE_TOKEN> ( ) { </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( String message , Throwable cause ) { </a> 
<a> super ( message , cause ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( String message ) { </a> 
<a> super ( message ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( Throwable cause ) { </a> 
<a> super ( cause ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec ; </a> 
<a> import io . netty . buffer . ByteBuf ; </a> 
<a> import io . netty . channel . ChannelHandlerContext ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> < Object > { </a> 
<a> private final ByteBuf [ ] <RARE_TOKEN> ; </a> 
<a> private final int maxFrameLength ; </a> 
<a> private final boolean <RARE_TOKEN> ; </a> 
<a> private final boolean <RARE_TOKEN> ; </a> 
<a> private boolean <RARE_TOKEN> ; </a> 
<a> private int <RARE_TOKEN> ; </a> 
<a> public <RARE_TOKEN> ( int maxFrameLength , ByteBuf <RARE_TOKEN> ) { </a> 
<a> this ( maxFrameLength , true , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( </a> 
<a> int maxFrameLength , boolean <RARE_TOKEN> , ByteBuf <RARE_TOKEN> ) { </a> 
<a> this ( maxFrameLength , <RARE_TOKEN> , true , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( </a> 
<a> int maxFrameLength , boolean <RARE_TOKEN> , boolean <RARE_TOKEN> , </a> 
<a> ByteBuf <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( maxFrameLength ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = new ByteBuf [ ] { </a> 
<a> <RARE_TOKEN> . slice ( </a> 
<a> <RARE_TOKEN> . readerIndex ( ) , <RARE_TOKEN> . readableBytes ( ) ) </a> 
<a> } ; </a> 
<a> this . maxFrameLength = maxFrameLength ; </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( int maxFrameLength , ByteBuf ... <RARE_TOKEN> ) { </a> 
<a> this ( maxFrameLength , true , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( </a> 
<a> int maxFrameLength , boolean <RARE_TOKEN> , ByteBuf ... <RARE_TOKEN> ) { </a> 
<a> this ( maxFrameLength , <RARE_TOKEN> , true , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( </a> 
<a> int maxFrameLength , boolean <RARE_TOKEN> , boolean <RARE_TOKEN> , ByteBuf ... <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( maxFrameLength ) ; </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> . length == 0 ) { </a> 
<a> throw new IllegalArgumentException ( <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> this . <RARE_TOKEN> = new ByteBuf [ <RARE_TOKEN> . length ] ; </a> 
<a> for ( int i = 0 ; i < <RARE_TOKEN> . length ; i ++ ) { </a> 
<a> ByteBuf d = <RARE_TOKEN> [ i ] ; </a> 
<a> <RARE_TOKEN> ( d ) ; </a> 
<a> this . <RARE_TOKEN> [ i ] = d . slice ( d . readerIndex ( ) , d . readableBytes ( ) ) ; </a> 
<a> } </a> 
<a> this . maxFrameLength = maxFrameLength ; </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public Object decode ( ChannelHandlerContext ctx , ByteBuf buffer ) throws Exception { </a> 
<a> int <RARE_TOKEN> = Integer . MAX_VALUE ; </a> 
<a> ByteBuf <RARE_TOKEN> = null ; </a> 
<a> for ( ByteBuf <RARE_TOKEN> : <RARE_TOKEN> ) { </a> 
<a> int <RARE_TOKEN> = indexOf ( buffer , <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> >= 0 && <RARE_TOKEN> < <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> . capacity ( ) ; </a> 
<a> ByteBuf frame ; </a> 
<a> if ( <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> = false ; </a> 
<a> buffer . skipBytes ( <RARE_TOKEN> + <RARE_TOKEN> ) ; </a> 
<a> int <RARE_TOKEN> = this . <RARE_TOKEN> ; </a> 
<a> this . <RARE_TOKEN> = 0 ; </a> 
<a> if ( ! <RARE_TOKEN> ) { </a> 
<a> fail ( ctx , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> return null ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> > maxFrameLength ) { </a> 
<a> buffer . skipBytes ( <RARE_TOKEN> + <RARE_TOKEN> ) ; </a> 
<a> fail ( ctx , <RARE_TOKEN> ) ; </a> 
<a> return null ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> ) { </a> 
<a> frame = buffer . readBytes ( <RARE_TOKEN> ) ; </a> 
<a> buffer . skipBytes ( <RARE_TOKEN> ) ; </a> 
<a> } else { </a> 
<a> frame = buffer . readBytes ( <RARE_TOKEN> + <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> return frame ; </a> 
<a> } else { </a> 
<a> if ( ! <RARE_TOKEN> ) { </a> 
<a> if ( buffer . readableBytes ( ) > maxFrameLength ) { </a> 
<a> <RARE_TOKEN> = buffer . readableBytes ( ) ; </a> 
<a> buffer . skipBytes ( buffer . readableBytes ( ) ) ; </a> 
<a> <RARE_TOKEN> = true ; </a> 
<a> if ( <RARE_TOKEN> ) { </a> 
<a> fail ( ctx , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> += buffer . readableBytes ( ) ; </a> 
<a> buffer . skipBytes ( buffer . readableBytes ( ) ) ; </a> 
<a> } </a> 
<a> return null ; </a> 
<a> } </a> 
<a> } </a> 
<a> private void fail ( ChannelHandlerContext ctx , long <RARE_TOKEN> ) { </a> 
<a> if ( <RARE_TOKEN> > 0 ) { </a> 
<a> ctx . fireExceptionCaught ( </a> 
<a> new TooLongFrameException ( </a> 
<a> <RARE_TOKEN> length <RARE_TOKEN> " + maxFrameLength + </a> 
<a> <RARE_TOKEN> " + <RARE_TOKEN> + " - <RARE_TOKEN> ) ) ; </a> 
<a> } else { </a> 
<a> ctx . fireExceptionCaught ( </a> 
<a> new TooLongFrameException ( </a> 
<a> <RARE_TOKEN> length <RARE_TOKEN> " + maxFrameLength + </a> 
<a> " - <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private static int indexOf ( ByteBuf <RARE_TOKEN> , ByteBuf <RARE_TOKEN> ) { </a> 
<a> for ( int i = <RARE_TOKEN> . readerIndex ( ) ; i < <RARE_TOKEN> . writerIndex ( ) ; i ++ ) { </a> 
<a> int <RARE_TOKEN> = i ; </a> 
<a> int <RARE_TOKEN> ; </a> 
<a> for ( <RARE_TOKEN> = 0 ; <RARE_TOKEN> < <RARE_TOKEN> . capacity ( ) ; <RARE_TOKEN> ++ ) { </a> 
<a> if ( <RARE_TOKEN> . getByte ( <RARE_TOKEN> ) != <RARE_TOKEN> . getByte ( <RARE_TOKEN> ) ) { </a> 
<a> break ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> ++ ; </a> 
<a> if ( <RARE_TOKEN> == <RARE_TOKEN> . writerIndex ( ) && </a> 
<a> <RARE_TOKEN> != <RARE_TOKEN> . capacity ( ) - 1 ) { </a> 
<a> return - 1 ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> == <RARE_TOKEN> . capacity ( ) ) { </a> 
<a> return i - <RARE_TOKEN> . readerIndex ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> return - 1 ; </a> 
<a> } </a> 
<a> private static void <RARE_TOKEN> ( ByteBuf <RARE_TOKEN> ) { </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( ! <RARE_TOKEN> . readable ( ) ) { </a> 
<a> throw new IllegalArgumentException ( <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private static void <RARE_TOKEN> ( int maxFrameLength ) { </a> 
<a> if ( maxFrameLength <= 0 ) { </a> 
<a> throw new IllegalArgumentException ( </a> 
<a> <RARE_TOKEN> must be a <RARE_TOKEN> <RARE_TOKEN> " + </a> 
<a> maxFrameLength ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec ; </a> 
<a> import io . netty . buffer . ByteBuf ; </a> 
<a> import io . netty . buffer . Unpooled ; </a> 
<a> public final class <RARE_TOKEN> { </a> 
<a> public static ByteBuf [ ] <RARE_TOKEN> ( ) { </a> 
<a> return new ByteBuf [ ] { </a> 
<a> Unpooled . wrappedBuffer ( new byte [ ] { 0 } ) } ; </a> 
<a> } </a> 
<a> public static ByteBuf [ ] <RARE_TOKEN> ( ) { </a> 
<a> return new ByteBuf [ ] { </a> 
<a> Unpooled . wrappedBuffer ( new byte [ ] { <RARE_TOKEN> , <RARE_TOKEN> } ) , </a> 
<a> Unpooled . wrappedBuffer ( new byte [ ] { <RARE_TOKEN> } ) , </a> 
<a> } ; </a> 
<a> } </a> 
<a> private <RARE_TOKEN> ( ) { </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> private static final long serialVersionUID = - <RARE_TOKEN> ; </a> 
<a> public <RARE_TOKEN> ( ) { </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( String message , Throwable cause ) { </a> 
<a> super ( message , cause ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( String message ) { </a> 
<a> super ( message ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( Throwable cause ) { </a> 
<a> super ( cause ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec ; </a> 
<a> import io . netty . buffer . ByteBuf ; </a> 
<a> import io . netty . channel . ChannelHandlerContext ; </a> 
<a> import io . netty . handler . codec . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> < Object > { </a> 
<a> private final int maxFrameLength ; </a> 
<a> private final int <RARE_TOKEN> ; </a> 
<a> private final int <RARE_TOKEN> ; </a> 
<a> private final int <RARE_TOKEN> ; </a> 
<a> private final int <RARE_TOKEN> ; </a> 
<a> private final int <RARE_TOKEN> ; </a> 
<a> private final boolean <RARE_TOKEN> ; </a> 
<a> private boolean <RARE_TOKEN> ; </a> 
<a> private long <RARE_TOKEN> ; </a> 
<a> private long <RARE_TOKEN> ; </a> 
<a> public <RARE_TOKEN> ( </a> 
<a> int maxFrameLength , </a> 
<a> int <RARE_TOKEN> , int <RARE_TOKEN> ) { </a> 
<a> this ( maxFrameLength , <RARE_TOKEN> , <RARE_TOKEN> , 0 , 0 ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( </a> 
<a> int maxFrameLength , </a> 
<a> int <RARE_TOKEN> , int <RARE_TOKEN> , </a> 
<a> int <RARE_TOKEN> , int <RARE_TOKEN> ) { </a> 
<a> this ( </a> 
<a> maxFrameLength , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , true ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( </a> 
<a> int maxFrameLength , </a> 
<a> int <RARE_TOKEN> , int <RARE_TOKEN> , </a> 
<a> int <RARE_TOKEN> , int <RARE_TOKEN> , boolean <RARE_TOKEN> ) { </a> 
<a> if ( maxFrameLength <= 0 ) { </a> 
<a> throw new IllegalArgumentException ( </a> 
<a> <RARE_TOKEN> must be a <RARE_TOKEN> <RARE_TOKEN> " + </a> 
<a> maxFrameLength ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> < 0 ) { </a> 
<a> throw new IllegalArgumentException ( </a> 
<a> <RARE_TOKEN> must be a <RARE_TOKEN> <RARE_TOKEN> " + </a> 
<a> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> < 0 ) { </a> 
<a> throw new IllegalArgumentException ( </a> 
<a> <RARE_TOKEN> must be a <RARE_TOKEN> <RARE_TOKEN> " + </a> 
<a> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> != 1 && <RARE_TOKEN> != 2 && </a> 
<a> <RARE_TOKEN> != 3 && <RARE_TOKEN> != 4 && </a> 
<a> <RARE_TOKEN> != 8 ) { </a> 
<a> throw new IllegalArgumentException ( </a> 
<a> <RARE_TOKEN> must be <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> or <RARE_TOKEN> " + </a> 
<a> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> > maxFrameLength - <RARE_TOKEN> ) { </a> 
<a> throw new IllegalArgumentException ( </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> + maxFrameLength + <RARE_TOKEN> " + </a> 
<a> <RARE_TOKEN> be <RARE_TOKEN> to or <RARE_TOKEN> <RARE_TOKEN> " + </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> + <RARE_TOKEN> + <RARE_TOKEN> + " + </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> + <RARE_TOKEN> + <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> this . maxFrameLength = maxFrameLength ; </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> + <RARE_TOKEN> ; </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public Object decode ( ChannelHandlerContext ctx , ByteBuf in ) throws Exception { </a> 
<a> if ( <RARE_TOKEN> ) { </a> 
<a> long <RARE_TOKEN> = this . <RARE_TOKEN> ; </a> 
<a> int <RARE_TOKEN> = ( int ) Math . min ( <RARE_TOKEN> , in . readableBytes ( ) ) ; </a> 
<a> in . skipBytes ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> -= <RARE_TOKEN> ; </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> ( ctx , false ) ; </a> 
<a> return null ; </a> 
<a> } </a> 
<a> if ( in . readableBytes ( ) < <RARE_TOKEN> ) { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> int <RARE_TOKEN> = in . readerIndex ( ) + <RARE_TOKEN> ; </a> 
<a> long <RARE_TOKEN> ; </a> 
<a> switch ( <RARE_TOKEN> ) { </a> 
<a> case 1 : </a> 
<a> <RARE_TOKEN> = in . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> break ; </a> 
<a> case 2 : </a> 
<a> <RARE_TOKEN> = in . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> break ; </a> 
<a> case 3 : </a> 
<a> <RARE_TOKEN> = in . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> break ; </a> 
<a> case 4 : </a> 
<a> <RARE_TOKEN> = in . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> break ; </a> 
<a> case 8 : </a> 
<a> <RARE_TOKEN> = in . getLong ( <RARE_TOKEN> ) ; </a> 
<a> break ; </a> 
<a> default : </a> 
<a> throw new Error ( <RARE_TOKEN> not <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> < 0 ) { </a> 
<a> in . skipBytes ( <RARE_TOKEN> ) ; </a> 
<a> throw new <RARE_TOKEN> ( </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> length <RARE_TOKEN> " + <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> += <RARE_TOKEN> + <RARE_TOKEN> ; </a> 
<a> if ( <RARE_TOKEN> < <RARE_TOKEN> ) { </a> 
<a> in . skipBytes ( <RARE_TOKEN> ) ; </a> 
<a> throw new <RARE_TOKEN> ( </a> 
<a> <RARE_TOKEN> frame length <RARE_TOKEN> + <RARE_TOKEN> + <RARE_TOKEN> is <RARE_TOKEN> " + </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> " + <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> > maxFrameLength ) { </a> 
<a> <RARE_TOKEN> = true ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> - in . readableBytes ( ) ; </a> 
<a> in . skipBytes ( in . readableBytes ( ) ) ; </a> 
<a> <RARE_TOKEN> ( ctx , true ) ; </a> 
<a> return null ; </a> 
<a> } </a> 
<a> int <RARE_TOKEN> = ( int ) <RARE_TOKEN> ; </a> 
<a> if ( in . readableBytes ( ) < <RARE_TOKEN> ) { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> > <RARE_TOKEN> ) { </a> 
<a> in . skipBytes ( <RARE_TOKEN> ) ; </a> 
<a> throw new <RARE_TOKEN> ( </a> 
<a> <RARE_TOKEN> frame length <RARE_TOKEN> + <RARE_TOKEN> + <RARE_TOKEN> is <RARE_TOKEN> " + </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> " + <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> in . skipBytes ( <RARE_TOKEN> ) ; </a> 
<a> int readerIndex = in . readerIndex ( ) ; </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> - <RARE_TOKEN> ; </a> 
<a> ByteBuf frame = <RARE_TOKEN> ( in , readerIndex , <RARE_TOKEN> ) ; </a> 
<a> in . readerIndex ( readerIndex + <RARE_TOKEN> ) ; </a> 
<a> return frame ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( ChannelHandlerContext ctx , boolean <RARE_TOKEN> ) { </a> 
<a> if ( <RARE_TOKEN> == 0 ) { </a> 
<a> long <RARE_TOKEN> = this . <RARE_TOKEN> ; </a> 
<a> this . <RARE_TOKEN> = 0 ; </a> 
<a> <RARE_TOKEN> = false ; </a> 
<a> if ( ! <RARE_TOKEN> || </a> 
<a> <RARE_TOKEN> && <RARE_TOKEN> ) { </a> 
<a> fail ( ctx , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } else { </a> 
<a> if ( <RARE_TOKEN> && <RARE_TOKEN> ) { </a> 
<a> fail ( ctx , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> protected ByteBuf <RARE_TOKEN> ( ByteBuf buffer , int index , int length ) { </a> 
<a> ByteBuf frame = buffer . unsafe ( ) . <RARE_TOKEN> ( length ) ; </a> 
<a> frame . writeBytes ( buffer , index , length ) ; </a> 
<a> return frame ; </a> 
<a> } </a> 
<a> private void fail ( ChannelHandlerContext ctx , long <RARE_TOKEN> ) { </a> 
<a> if ( <RARE_TOKEN> > 0 ) { </a> 
<a> ctx . fireExceptionCaught ( </a> 
<a> new TooLongFrameException ( </a> 
<a> <RARE_TOKEN> frame length <RARE_TOKEN> " + maxFrameLength + </a> 
<a> <RARE_TOKEN> " + <RARE_TOKEN> + " - <RARE_TOKEN> ) ) ; </a> 
<a> } else { </a> 
<a> ctx . fireExceptionCaught ( </a> 
<a> new TooLongFrameException ( </a> 
<a> <RARE_TOKEN> frame length <RARE_TOKEN> " + maxFrameLength + </a> 
<a> " - <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec ; </a> 
<a> import io . netty . buffer . ByteBuf ; </a> 
<a> import io . netty . channel . ChannelHandler . Sharable ; </a> 
<a> import io . netty . channel . ChannelHandlerContext ; </a> 
<a> import java . nio . ByteOrder ; </a> 
<a> @ Sharable </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> < ByteBuf > { </a> 
<a> private final int <RARE_TOKEN> ; </a> 
<a> private final boolean <RARE_TOKEN> ; </a> 
<a> public <RARE_TOKEN> ( int <RARE_TOKEN> ) { </a> 
<a> this ( <RARE_TOKEN> , false ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( </a> 
<a> int <RARE_TOKEN> , boolean <RARE_TOKEN> ) { </a> 
<a> if ( <RARE_TOKEN> != 1 && <RARE_TOKEN> != 2 && </a> 
<a> <RARE_TOKEN> != 3 && <RARE_TOKEN> != 4 && </a> 
<a> <RARE_TOKEN> != 8 ) { </a> 
<a> throw new IllegalArgumentException ( </a> 
<a> <RARE_TOKEN> must be <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> or <RARE_TOKEN> " + </a> 
<a> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( Object msg ) throws Exception { </a> 
<a> return msg instanceof ByteBuf ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void encode ( </a> 
<a> ChannelHandlerContext ctx , </a> 
<a> ByteBuf msg , ByteBuf out ) throws Exception { </a> 
<a> int length = <RARE_TOKEN> ? </a> 
<a> msg . readableBytes ( ) + <RARE_TOKEN> : msg . readableBytes ( ) ; </a> 
<a> switch ( <RARE_TOKEN> ) { </a> 
<a> case 1 : </a> 
<a> if ( length >= <RARE_TOKEN> ) { </a> 
<a> throw new IllegalArgumentException ( </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> not <RARE_TOKEN> <RARE_TOKEN> a <RARE_TOKEN> " + length ) ; </a> 
<a> } </a> 
<a> out . writeByte ( ( byte ) length ) ; </a> 
<a> break ; </a> 
<a> case 2 : </a> 
<a> if ( length >= <RARE_TOKEN> ) { </a> 
<a> throw new IllegalArgumentException ( </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> not <RARE_TOKEN> <RARE_TOKEN> a short <RARE_TOKEN> " + length ) ; </a> 
<a> } </a> 
<a> out . <RARE_TOKEN> ( ( short ) length ) ; </a> 
<a> break ; </a> 
<a> case 3 : </a> 
<a> if ( length >= <RARE_TOKEN> ) { </a> 
<a> throw new IllegalArgumentException ( </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> not <RARE_TOKEN> <RARE_TOKEN> a <RARE_TOKEN> <RARE_TOKEN> " + length ) ; </a> 
<a> } </a> 
<a> out . <RARE_TOKEN> ( length ) ; </a> 
<a> break ; </a> 
<a> case 4 : </a> 
<a> out . writeInt ( length ) ; </a> 
<a> break ; </a> 
<a> case 8 : </a> 
<a> out . <RARE_TOKEN> ( length ) ; </a> 
<a> break ; </a> 
<a> default : </a> 
<a> throw new Error ( <RARE_TOKEN> not <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> out . writeBytes ( msg , msg . readerIndex ( ) , msg . readableBytes ( ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec ; </a> 
<a> import io . netty . buffer . ByteBuf ; </a> 
<a> import io . netty . buffer . MessageBuf ; </a> 
<a> import io . netty . channel . ChannelFuture ; </a> 
<a> import io . netty . channel . ChannelHandlerContext ; </a> 
<a> import io . netty . channel . <RARE_TOKEN> ; </a> 
<a> public abstract class <RARE_TOKEN> < <RARE_TOKEN> > extends <RARE_TOKEN> < <RARE_TOKEN> > { </a> 
<a> @ Override </a> 
<a> public void flush ( ChannelHandlerContext ctx , ChannelFuture future ) throws Exception { </a> 
<a> MessageBuf < <RARE_TOKEN> > in = ctx . <RARE_TOKEN> ( ) ; </a> 
<a> ByteBuf out = ctx . <RARE_TOKEN> ( ) ; </a> 
<a> for ( ; ; ) { </a> 
<a> Object msg = in . poll ( ) ; </a> 
<a> if ( msg == null ) { </a> 
<a> break ; </a> 
<a> } </a> 
<a> if ( ! <RARE_TOKEN> ( msg ) ) { </a> 
<a> ctx . <RARE_TOKEN> ( ) . add ( msg ) ; </a> 
<a> continue ; </a> 
<a> } </a> 
<a> @ SuppressWarnings ( "unchecked" ) </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = ( <RARE_TOKEN> ) msg ; </a> 
<a> try { </a> 
<a> encode ( ctx , <RARE_TOKEN> , out ) ; </a> 
<a> } catch ( Throwable t ) { </a> 
<a> if ( t instanceof <RARE_TOKEN> ) { </a> 
<a> ctx . fireExceptionCaught ( t ) ; </a> 
<a> } else { </a> 
<a> ctx . fireExceptionCaught ( new <RARE_TOKEN> ( t ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> ctx . flush ( future ) ; </a> 
<a> } </a> 
<a> public boolean <RARE_TOKEN> ( Object msg ) throws Exception { </a> 
<a> return true ; </a> 
<a> } </a> 
<a> public abstract void encode ( ChannelHandlerContext ctx , <RARE_TOKEN> msg , ByteBuf out ) throws Exception ; </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec ; </a> 
<a> import io . netty . buffer . MessageBuf ; </a> 
<a> import io . netty . channel . ChannelFuture ; </a> 
<a> import io . netty . channel . <RARE_TOKEN> ; </a> 
<a> import io . netty . channel . ChannelHandlerContext ; </a> 
<a> import io . netty . channel . <RARE_TOKEN> ; </a> 
<a> import io . netty . channel . <RARE_TOKEN> ; </a> 
<a> public abstract class <RARE_TOKEN> < <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> > </a> 
<a> extends <RARE_TOKEN> </a> 
<a> implements <RARE_TOKEN> < <RARE_TOKEN> > , </a> 
<a> <RARE_TOKEN> < <RARE_TOKEN> > { </a> 
<a> private final <RARE_TOKEN> < <RARE_TOKEN> , <RARE_TOKEN> > <RARE_TOKEN> = </a> 
<a> new <RARE_TOKEN> < <RARE_TOKEN> , <RARE_TOKEN> > ( ) { </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( Object msg ) throws Exception { </a> 
<a> return <RARE_TOKEN> . this . <RARE_TOKEN> ( msg ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public <RARE_TOKEN> encode ( ChannelHandlerContext ctx , <RARE_TOKEN> msg ) throws Exception { </a> 
<a> return <RARE_TOKEN> . this . encode ( ctx , msg ) ; </a> 
<a> } </a> 
<a> } ; </a> 
<a> private final <RARE_TOKEN> < <RARE_TOKEN> , <RARE_TOKEN> > <RARE_TOKEN> = </a> 
<a> new <RARE_TOKEN> < <RARE_TOKEN> , <RARE_TOKEN> > ( ) { </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( Object msg ) throws Exception { </a> 
<a> return <RARE_TOKEN> . this . <RARE_TOKEN> ( msg ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public <RARE_TOKEN> decode ( ChannelHandlerContext ctx , <RARE_TOKEN> msg ) throws Exception { </a> 
<a> return <RARE_TOKEN> . this . decode ( ctx , msg ) ; </a> 
<a> } </a> 
<a> } ; </a> 
<a> @ Override </a> 
<a> public MessageBuf < <RARE_TOKEN> > <RARE_TOKEN> ( ChannelHandlerContext ctx ) throws Exception { </a> 
<a> return <RARE_TOKEN> . <RARE_TOKEN> ( ctx ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void inboundBufferUpdated ( </a> 
<a> ChannelHandlerContext ctx ) throws Exception { </a> 
<a> <RARE_TOKEN> . inboundBufferUpdated ( ctx ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public MessageBuf < <RARE_TOKEN> > <RARE_TOKEN> ( ChannelHandlerContext ctx ) throws Exception { </a> 
<a> return <RARE_TOKEN> . <RARE_TOKEN> ( ctx ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void flush ( ChannelHandlerContext ctx , ChannelFuture future ) throws Exception { </a> 
<a> <RARE_TOKEN> . flush ( ctx , future ) ; </a> 
<a> } </a> 
<a> public boolean <RARE_TOKEN> ( Object msg ) throws Exception { </a> 
<a> return true ; </a> 
<a> } </a> 
<a> public boolean <RARE_TOKEN> ( Object msg ) throws Exception { </a> 
<a> return true ; </a> 
<a> } </a> 
<a> public abstract <RARE_TOKEN> encode ( ChannelHandlerContext ctx , <RARE_TOKEN> msg ) throws Exception ; </a> 
<a> public abstract <RARE_TOKEN> decode ( ChannelHandlerContext ctx , <RARE_TOKEN> msg ) throws Exception ; </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec ; </a> 
<a> import io . netty . buffer . MessageBuf ; </a> 
<a> import io . netty . buffer . Unpooled ; </a> 
<a> import io . netty . channel . ChannelHandlerContext ; </a> 
<a> import io . netty . channel . <RARE_TOKEN> ; </a> 
<a> import io . netty . channel . <RARE_TOKEN> ; </a> 
<a> public abstract class <RARE_TOKEN> < <RARE_TOKEN> , <RARE_TOKEN> > </a> 
<a> extends <RARE_TOKEN> implements <RARE_TOKEN> < <RARE_TOKEN> > { </a> 
<a> @ Override </a> 
<a> public MessageBuf < <RARE_TOKEN> > <RARE_TOKEN> ( ChannelHandlerContext ctx ) throws Exception { </a> 
<a> return Unpooled . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void inboundBufferUpdated ( ChannelHandlerContext ctx ) </a> 
<a> throws Exception { </a> 
<a> MessageBuf < <RARE_TOKEN> > in = ctx . <RARE_TOKEN> ( ) ; </a> 
<a> boolean <RARE_TOKEN> = false ; </a> 
<a> for ( ; ; ) { </a> 
<a> try { </a> 
<a> Object msg = in . poll ( ) ; </a> 
<a> if ( msg == null ) { </a> 
<a> break ; </a> 
<a> } </a> 
<a> if ( ! <RARE_TOKEN> ( msg ) ) { </a> 
<a> ctx . <RARE_TOKEN> ( ) . add ( msg ) ; </a> 
<a> <RARE_TOKEN> = true ; </a> 
<a> continue ; </a> 
<a> } </a> 
<a> @ SuppressWarnings ( "unchecked" ) </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = ( <RARE_TOKEN> ) msg ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = decode ( ctx , <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> continue ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> . <RARE_TOKEN> ( ctx , <RARE_TOKEN> , true ) ) { </a> 
<a> <RARE_TOKEN> = true ; </a> 
<a> } </a> 
<a> } catch ( Throwable t ) { </a> 
<a> if ( t instanceof <RARE_TOKEN> ) { </a> 
<a> ctx . fireExceptionCaught ( t ) ; </a> 
<a> } else { </a> 
<a> ctx . fireExceptionCaught ( new <RARE_TOKEN> ( t ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> ) { </a> 
<a> ctx . fireInboundBufferUpdated ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public boolean <RARE_TOKEN> ( Object msg ) throws Exception { </a> 
<a> return true ; </a> 
<a> } </a> 
<a> public abstract <RARE_TOKEN> decode ( ChannelHandlerContext ctx , <RARE_TOKEN> msg ) throws Exception ; </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec ; </a> 
<a> import io . netty . buffer . MessageBuf ; </a> 
<a> import io . netty . channel . ChannelFuture ; </a> 
<a> import io . netty . channel . ChannelHandlerContext ; </a> 
<a> import io . netty . channel . <RARE_TOKEN> ; </a> 
<a> public abstract class <RARE_TOKEN> < <RARE_TOKEN> , <RARE_TOKEN> > extends <RARE_TOKEN> < <RARE_TOKEN> > { </a> 
<a> @ Override </a> 
<a> public void flush ( ChannelHandlerContext ctx , ChannelFuture future ) throws Exception { </a> 
<a> MessageBuf < <RARE_TOKEN> > in = ctx . <RARE_TOKEN> ( ) ; </a> 
<a> for ( ; ; ) { </a> 
<a> try { </a> 
<a> Object msg = in . poll ( ) ; </a> 
<a> if ( msg == null ) { </a> 
<a> break ; </a> 
<a> } </a> 
<a> if ( ! <RARE_TOKEN> ( msg ) ) { </a> 
<a> ctx . <RARE_TOKEN> ( ) . add ( msg ) ; </a> 
<a> continue ; </a> 
<a> } </a> 
<a> @ SuppressWarnings ( "unchecked" ) </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = ( <RARE_TOKEN> ) msg ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = encode ( ctx , <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> continue ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ctx , <RARE_TOKEN> , false ) ; </a> 
<a> } catch ( Throwable t ) { </a> 
<a> if ( t instanceof <RARE_TOKEN> ) { </a> 
<a> ctx . fireExceptionCaught ( t ) ; </a> 
<a> } else { </a> 
<a> ctx . fireExceptionCaught ( new <RARE_TOKEN> ( t ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> ctx . flush ( future ) ; </a> 
<a> } </a> 
<a> public boolean <RARE_TOKEN> ( Object msg ) throws Exception { </a> 
<a> return true ; </a> 
<a> } </a> 
<a> public abstract <RARE_TOKEN> encode ( ChannelHandlerContext ctx , <RARE_TOKEN> msg ) throws Exception ; </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec ; </a> 
<a> import io . netty . channel . Channel ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> private static final long serialVersionUID = <RARE_TOKEN> ; </a> 
<a> public <RARE_TOKEN> ( ) { } </a> 
<a> public <RARE_TOKEN> ( String message , Throwable cause ) { </a> 
<a> super ( message , cause ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( String message ) { </a> 
<a> super ( message ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( Throwable cause ) { </a> 
<a> super ( cause ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec ; </a> 
<a> import io . netty . buffer . ByteBuf ; </a> 
<a> import io . netty . buffer . Unpooled ; </a> 
<a> import io . netty . channel . Channel ; </a> 
<a> import io . netty . channel . ChannelHandler ; </a> 
<a> import io . netty . channel . ChannelHandlerContext ; </a> 
<a> import io . netty . channel . ChannelPipeline ; </a> 
<a> import io . netty . util . internal . <RARE_TOKEN> ; </a> 
<a> public abstract class <RARE_TOKEN> < <RARE_TOKEN> , <RARE_TOKEN> > extends <RARE_TOKEN> < <RARE_TOKEN> > { </a> 
<a> static final <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( <RARE_TOKEN> . class . getName ( ) + <RARE_TOKEN> ) ; </a> 
<a> private final ByteBuf <RARE_TOKEN> = Unpooled . buffer ( ) ; </a> 
<a> private final <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> private <RARE_TOKEN> state ; </a> 
<a> private int <RARE_TOKEN> = - 1 ; </a> 
<a> protected <RARE_TOKEN> ( ) { </a> 
<a> this ( null ) ; </a> 
<a> } </a> 
<a> protected <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> state = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> protected void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . readerIndex ( ) ; </a> 
<a> } </a> 
<a> protected void <RARE_TOKEN> ( <RARE_TOKEN> state ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> state ( state ) ; </a> 
<a> } </a> 
<a> protected <RARE_TOKEN> state ( ) { </a> 
<a> return state ; </a> 
<a> } </a> 
<a> protected <RARE_TOKEN> state ( <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = state ; </a> 
<a> state = <RARE_TOKEN> ; </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> protected int <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ( ) . readableBytes ( ) ; </a> 
<a> } </a> 
<a> protected ByteBuf <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ByteBuf <RARE_TOKEN> ( </a> 
<a> ChannelHandlerContext ctx ) throws Exception { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ChannelHandlerContext ctx ) throws Exception { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> ByteBuf in = <RARE_TOKEN> ; </a> 
<a> if ( in . readable ( ) ) { </a> 
<a> <RARE_TOKEN> ( ctx ) ; </a> 
<a> } </a> 
<a> try { </a> 
<a> if ( <RARE_TOKEN> . <RARE_TOKEN> ( ctx , <RARE_TOKEN> ( ctx , <RARE_TOKEN> ) , true ) ) { </a> 
<a> fireInboundBufferUpdated ( ctx , in ) ; </a> 
<a> } </a> 
<a> } catch ( <RARE_TOKEN> replay ) { </a> 
<a> replay . expect ( <RARE_TOKEN> ) ; </a> 
<a> } catch ( Throwable t ) { </a> 
<a> if ( t instanceof <RARE_TOKEN> ) { </a> 
<a> ctx . fireExceptionCaught ( t ) ; </a> 
<a> } else { </a> 
<a> ctx . fireExceptionCaught ( new <RARE_TOKEN> ( t ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> ctx . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( ChannelHandlerContext ctx ) { </a> 
<a> ByteBuf in = <RARE_TOKEN> ; </a> 
<a> boolean <RARE_TOKEN> = false ; </a> 
<a> while ( in . readable ( ) ) { </a> 
<a> try { </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> = in . readerIndex ( ) ; </a> 
<a> Object result = null ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = state ; </a> 
<a> try { </a> 
<a> result = decode ( ctx , <RARE_TOKEN> ) ; </a> 
<a> if ( result == null ) { </a> 
<a> if ( <RARE_TOKEN> == in . readerIndex ( ) && <RARE_TOKEN> == state ) { </a> 
<a> throw new IllegalStateException ( </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> be <RARE_TOKEN> if <RARE_TOKEN> data is <RARE_TOKEN> <RARE_TOKEN> state <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } else { </a> 
<a> continue ; </a> 
<a> } </a> 
<a> } </a> 
<a> } catch ( <RARE_TOKEN> replay ) { </a> 
<a> replay . expect ( <RARE_TOKEN> ) ; </a> 
<a> int <RARE_TOKEN> = this . <RARE_TOKEN> ; </a> 
<a> if ( <RARE_TOKEN> >= 0 ) { </a> 
<a> in . readerIndex ( <RARE_TOKEN> ) ; </a> 
<a> } else { </a> 
<a> } </a> 
<a> } </a> 
<a> if ( result == null ) { </a> 
<a> break ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> == in . readerIndex ( ) && <RARE_TOKEN> == state ) { </a> 
<a> throw new IllegalStateException ( </a> 
<a> <RARE_TOKEN> method must <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> one byte " + </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> a <RARE_TOKEN> message <RARE_TOKEN> <RARE_TOKEN> " + </a> 
<a> getClass ( ) + <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> . <RARE_TOKEN> ( ctx , result , true ) ) { </a> 
<a> <RARE_TOKEN> = true ; </a> 
<a> } </a> 
<a> } catch ( Throwable t ) { </a> 
<a> if ( <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> = false ; </a> 
<a> fireInboundBufferUpdated ( ctx , in ) ; </a> 
<a> } </a> 
<a> if ( t instanceof <RARE_TOKEN> ) { </a> 
<a> ctx . fireExceptionCaught ( t ) ; </a> 
<a> } else { </a> 
<a> ctx . fireExceptionCaught ( new <RARE_TOKEN> ( t ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> ) { </a> 
<a> fireInboundBufferUpdated ( ctx , in ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private void fireInboundBufferUpdated ( ChannelHandlerContext ctx , ByteBuf in ) { </a> 
<a> final int <RARE_TOKEN> = in . readerIndex ( ) ; </a> 
<a> in . unsafe ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> final int <RARE_TOKEN> = in . readerIndex ( ) ; </a> 
<a> <RARE_TOKEN> -= <RARE_TOKEN> - <RARE_TOKEN> ; </a> 
<a> ctx . fireInboundBufferUpdated ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec ; </a> 
<a> import io . netty . buffer . ByteBuf ; </a> 
<a> import io . netty . buffer . ByteBufIndexFinder ; </a> 
<a> import io . netty . buffer . ChannelBufType ; </a> 
<a> import io . netty . buffer . <RARE_TOKEN> ; </a> 
<a> import io . netty . buffer . Unpooled ; </a> 
<a> import io . netty . util . internal . <RARE_TOKEN> ; </a> 
<a> import java . io . IOException ; </a> 
<a> import java . io . InputStream ; </a> 
<a> import java . io . OutputStream ; </a> 
<a> import java . nio . ByteBuffer ; </a> 
<a> import java . nio . ByteOrder ; </a> 
<a> import java . nio . channels . <RARE_TOKEN> ; </a> 
<a> import java . nio . channels . <RARE_TOKEN> ; </a> 
<a> import java . nio . charset . Charset ; </a> 
<a> class <RARE_TOKEN> implements ByteBuf { </a> 
<a> private static final <RARE_TOKEN> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> private final ByteBuf buffer ; </a> 
<a> private final <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> private boolean <RARE_TOKEN> ; </a> 
<a> static final <RARE_TOKEN> EMPTY_BUFFER = new <RARE_TOKEN> ( Unpooled . EMPTY_BUFFER ) ; </a> 
<a> static { </a> 
<a> EMPTY_BUFFER . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( ByteBuf buffer ) { </a> 
<a> this . buffer = buffer ; </a> 
<a> <RARE_TOKEN> = new <RARE_TOKEN> ( this ) ; </a> 
<a> } </a> 
<a> void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> = true ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int capacity ( ) { </a> 
<a> if ( <RARE_TOKEN> ) { </a> 
<a> return buffer . capacity ( ) ; </a> 
<a> } else { </a> 
<a> return Integer . MAX_VALUE ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void capacity ( int newCapacity ) { </a> 
<a> throw new UnreplayableOperationException ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int maxCapacity ( ) { </a> 
<a> return capacity ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ChannelBufType type ( ) { </a> 
<a> return ChannelBufType . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return buffer . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public byte [ ] array ( ) { </a> 
<a> throw new UnsupportedOperationException ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int <RARE_TOKEN> ( ) { </a> 
<a> throw new UnsupportedOperationException ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void clear ( ) { </a> 
<a> throw new UnreplayableOperationException ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean equals ( Object obj ) { </a> 
<a> return this == obj ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int <RARE_TOKEN> ( ByteBuf buffer ) { </a> 
<a> throw new UnreplayableOperationException ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ByteBuf <RARE_TOKEN> ( ) { </a> 
<a> throw new UnreplayableOperationException ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ByteBuf <RARE_TOKEN> ( int index , int length ) { </a> 
<a> checkIndex ( index , length ) ; </a> 
<a> return buffer . <RARE_TOKEN> ( index , length ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> throw new UnreplayableOperationException ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( int <RARE_TOKEN> ) { </a> 
<a> throw new UnreplayableOperationException ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int <RARE_TOKEN> ( int <RARE_TOKEN> , boolean <RARE_TOKEN> ) { </a> 
<a> throw new UnreplayableOperationException ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ByteBuf <RARE_TOKEN> ( ) { </a> 
<a> throw new UnreplayableOperationException ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( int index ) { </a> 
<a> checkIndex ( index , 1 ) ; </a> 
<a> return buffer . <RARE_TOKEN> ( index ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public byte getByte ( int index ) { </a> 
<a> checkIndex ( index , 1 ) ; </a> 
<a> return buffer . getByte ( index ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public short <RARE_TOKEN> ( int index ) { </a> 
<a> checkIndex ( index , 1 ) ; </a> 
<a> return buffer . <RARE_TOKEN> ( index ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void getBytes ( int index , byte [ ] dst , int dstIndex , int length ) { </a> 
<a> checkIndex ( index , length ) ; </a> 
<a> buffer . getBytes ( index , dst , dstIndex , length ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void getBytes ( int index , byte [ ] dst ) { </a> 
<a> checkIndex ( index , dst . length ) ; </a> 
<a> buffer . getBytes ( index , dst ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void getBytes ( int index , ByteBuffer dst ) { </a> 
<a> throw new UnreplayableOperationException ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void getBytes ( int index , ByteBuf dst , int dstIndex , int length ) { </a> 
<a> checkIndex ( index , length ) ; </a> 
<a> buffer . getBytes ( index , dst , dstIndex , length ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void getBytes ( int index , ByteBuf dst , int length ) { </a> 
<a> throw new UnreplayableOperationException ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void getBytes ( int index , ByteBuf dst ) { </a> 
<a> throw new UnreplayableOperationException ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int getBytes ( int index , <RARE_TOKEN> out , int length ) </a> 
<a> throws IOException { </a> 
<a> throw new UnreplayableOperationException ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void getBytes ( int index , OutputStream out , int length ) </a> 
<a> throws IOException { </a> 
<a> throw new UnreplayableOperationException ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int getInt ( int index ) { </a> 
<a> checkIndex ( index , 4 ) ; </a> 
<a> return buffer . getInt ( index ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public long <RARE_TOKEN> ( int index ) { </a> 
<a> checkIndex ( index , 4 ) ; </a> 
<a> return buffer . <RARE_TOKEN> ( index ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public long getLong ( int index ) { </a> 
<a> checkIndex ( index , 8 ) ; </a> 
<a> return buffer . getLong ( index ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int <RARE_TOKEN> ( int index ) { </a> 
<a> checkIndex ( index , 3 ) ; </a> 
<a> return buffer . <RARE_TOKEN> ( index ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int <RARE_TOKEN> ( int index ) { </a> 
<a> checkIndex ( index , 3 ) ; </a> 
<a> return buffer . <RARE_TOKEN> ( index ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public short <RARE_TOKEN> ( int index ) { </a> 
<a> checkIndex ( index , 2 ) ; </a> 
<a> return buffer . <RARE_TOKEN> ( index ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int <RARE_TOKEN> ( int index ) { </a> 
<a> checkIndex ( index , 2 ) ; </a> 
<a> return buffer . <RARE_TOKEN> ( index ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public char <RARE_TOKEN> ( int index ) { </a> 
<a> checkIndex ( index , 2 ) ; </a> 
<a> return buffer . <RARE_TOKEN> ( index ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public float <RARE_TOKEN> ( int index ) { </a> 
<a> checkIndex ( index , 4 ) ; </a> 
<a> return buffer . <RARE_TOKEN> ( index ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public double <RARE_TOKEN> ( int index ) { </a> 
<a> checkIndex ( index , 8 ) ; </a> 
<a> return buffer . <RARE_TOKEN> ( index ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int hashCode ( ) { </a> 
<a> throw new UnreplayableOperationException ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int indexOf ( int fromIndex , int <RARE_TOKEN> , byte value ) { </a> 
<a> int <RARE_TOKEN> = buffer . indexOf ( fromIndex , <RARE_TOKEN> , value ) ; </a> 
<a> if ( <RARE_TOKEN> < 0 ) { </a> 
<a> throw <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int indexOf ( int fromIndex , int <RARE_TOKEN> , </a> 
<a> ByteBufIndexFinder <RARE_TOKEN> ) { </a> 
<a> int <RARE_TOKEN> = buffer . indexOf ( fromIndex , <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> < 0 ) { </a> 
<a> throw <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int bytesBefore ( byte value ) { </a> 
<a> int bytes = buffer . bytesBefore ( value ) ; </a> 
<a> if ( bytes < 0 ) { </a> 
<a> throw <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> return bytes ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int bytesBefore ( ByteBufIndexFinder <RARE_TOKEN> ) { </a> 
<a> int bytes = buffer . bytesBefore ( <RARE_TOKEN> ) ; </a> 
<a> if ( bytes < 0 ) { </a> 
<a> throw <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> return bytes ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int bytesBefore ( int length , byte value ) { </a> 
<a> <RARE_TOKEN> ( length ) ; </a> 
<a> int bytes = buffer . bytesBefore ( length , value ) ; </a> 
<a> if ( bytes < 0 ) { </a> 
<a> throw <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> return bytes ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int bytesBefore ( int length , ByteBufIndexFinder <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( length ) ; </a> 
<a> int bytes = buffer . bytesBefore ( length , <RARE_TOKEN> ) ; </a> 
<a> if ( bytes < 0 ) { </a> 
<a> throw <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> return bytes ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int bytesBefore ( int index , int length , byte value ) { </a> 
<a> int bytes = buffer . bytesBefore ( index , length , value ) ; </a> 
<a> if ( bytes < 0 ) { </a> 
<a> throw <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> return bytes ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int bytesBefore ( int index , int length , </a> 
<a> ByteBufIndexFinder <RARE_TOKEN> ) { </a> 
<a> int bytes = buffer . bytesBefore ( index , length , <RARE_TOKEN> ) ; </a> 
<a> if ( bytes < 0 ) { </a> 
<a> throw <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> return bytes ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> buffer . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> throw new UnreplayableOperationException ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ByteOrder order ( ) { </a> 
<a> return buffer . order ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ByteBuf order ( ByteOrder <RARE_TOKEN> ) { </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> == order ( ) ) { </a> 
<a> return this ; </a> 
<a> } </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean readable ( ) { </a> 
<a> return <RARE_TOKEN> ? buffer . readable ( ) : true ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int readableBytes ( ) { </a> 
<a> if ( <RARE_TOKEN> ) { </a> 
<a> return buffer . readableBytes ( ) ; </a> 
<a> } else { </a> 
<a> return Integer . MAX_VALUE - buffer . readerIndex ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> ( 1 ) ; </a> 
<a> return buffer . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public byte <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> ( 1 ) ; </a> 
<a> return buffer . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public short <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> ( 1 ) ; </a> 
<a> return buffer . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void readBytes ( byte [ ] dst , int dstIndex , int length ) { </a> 
<a> <RARE_TOKEN> ( length ) ; </a> 
<a> buffer . readBytes ( dst , dstIndex , length ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void readBytes ( byte [ ] dst ) { </a> 
<a> <RARE_TOKEN> ( dst . length ) ; </a> 
<a> buffer . readBytes ( dst ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void readBytes ( ByteBuffer dst ) { </a> 
<a> throw new UnreplayableOperationException ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void readBytes ( ByteBuf dst , int dstIndex , int length ) { </a> 
<a> <RARE_TOKEN> ( length ) ; </a> 
<a> buffer . readBytes ( dst , dstIndex , length ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void readBytes ( ByteBuf dst , int length ) { </a> 
<a> throw new UnreplayableOperationException ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void readBytes ( ByteBuf dst ) { </a> 
<a> throw new UnreplayableOperationException ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int readBytes ( <RARE_TOKEN> out , int length ) </a> 
<a> throws IOException { </a> 
<a> throw new UnreplayableOperationException ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ByteBuf readBytes ( int length ) { </a> 
<a> <RARE_TOKEN> ( length ) ; </a> 
<a> return buffer . readBytes ( length ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ByteBuf <RARE_TOKEN> ( int length ) { </a> 
<a> <RARE_TOKEN> ( length ) ; </a> 
<a> return buffer . <RARE_TOKEN> ( length ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void readBytes ( OutputStream out , int length ) throws IOException { </a> 
<a> throw new UnreplayableOperationException ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int readerIndex ( ) { </a> 
<a> return buffer . readerIndex ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void readerIndex ( int readerIndex ) { </a> 
<a> buffer . readerIndex ( readerIndex ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> ( 4 ) ; </a> 
<a> return buffer . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public long <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> ( 4 ) ; </a> 
<a> return buffer . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public long <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> ( 8 ) ; </a> 
<a> return buffer . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> ( 3 ) ; </a> 
<a> return buffer . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> ( 3 ) ; </a> 
<a> return buffer . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public short <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> ( 2 ) ; </a> 
<a> return buffer . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> ( 2 ) ; </a> 
<a> return buffer . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public char <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> ( 2 ) ; </a> 
<a> return buffer . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public float <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> ( 4 ) ; </a> 
<a> return buffer . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public double <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> ( 8 ) ; </a> 
<a> return buffer . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> buffer . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> throw new UnreplayableOperationException ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( int index , boolean value ) { </a> 
<a> throw new UnreplayableOperationException ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void setByte ( int index , int value ) { </a> 
<a> throw new UnreplayableOperationException ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void setBytes ( int index , byte [ ] src , int srcIndex , int length ) { </a> 
<a> throw new UnreplayableOperationException ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void setBytes ( int index , byte [ ] src ) { </a> 
<a> throw new UnreplayableOperationException ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void setBytes ( int index , ByteBuffer src ) { </a> 
<a> throw new UnreplayableOperationException ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void setBytes ( int index , ByteBuf src , int srcIndex , int length ) { </a> 
<a> throw new UnreplayableOperationException ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void setBytes ( int index , ByteBuf src , int length ) { </a> 
<a> throw new UnreplayableOperationException ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void setBytes ( int index , ByteBuf src ) { </a> 
<a> throw new UnreplayableOperationException ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int setBytes ( int index , InputStream in , int length ) </a> 
<a> throws IOException { </a> 
<a> throw new UnreplayableOperationException ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( int index , int length ) { </a> 
<a> throw new UnreplayableOperationException ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int setBytes ( int index , <RARE_TOKEN> in , int length ) </a> 
<a> throws IOException { </a> 
<a> throw new UnreplayableOperationException ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( int readerIndex , int writerIndex ) { </a> 
<a> throw new UnreplayableOperationException ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( int index , int value ) { </a> 
<a> throw new UnreplayableOperationException ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( int index , long value ) { </a> 
<a> throw new UnreplayableOperationException ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( int index , int value ) { </a> 
<a> throw new UnreplayableOperationException ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( int index , int value ) { </a> 
<a> throw new UnreplayableOperationException ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( int index , int value ) { </a> 
<a> throw new UnreplayableOperationException ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( int index , float value ) { </a> 
<a> throw new UnreplayableOperationException ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( int index , double value ) { </a> 
<a> throw new UnreplayableOperationException ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void skipBytes ( int length ) { </a> 
<a> <RARE_TOKEN> ( length ) ; </a> 
<a> buffer . skipBytes ( length ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ByteBuf slice ( ) { </a> 
<a> throw new UnreplayableOperationException ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ByteBuf slice ( int index , int length ) { </a> 
<a> checkIndex ( index , length ) ; </a> 
<a> return buffer . slice ( index , length ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return buffer . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ByteBuffer nioBuffer ( ) { </a> 
<a> throw new UnreplayableOperationException ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ByteBuffer nioBuffer ( int index , int length ) { </a> 
<a> checkIndex ( index , length ) ; </a> 
<a> return buffer . nioBuffer ( index , length ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return buffer . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ByteBuffer [ ] nioBuffers ( ) { </a> 
<a> throw new UnreplayableOperationException ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ByteBuffer [ ] nioBuffers ( int index , int length ) { </a> 
<a> checkIndex ( index , length ) ; </a> 
<a> return buffer . nioBuffers ( index , length ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public String toString ( int index , int length , Charset charset ) { </a> 
<a> checkIndex ( index , length ) ; </a> 
<a> return buffer . toString ( index , length , charset ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public String toString ( Charset <RARE_TOKEN> ) { </a> 
<a> throw new UnreplayableOperationException ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public String toString ( ) { </a> 
<a> return getClass ( ) . getSimpleName ( ) + <RARE_TOKEN> + </a> 
<a> <RARE_TOKEN> + </a> 
<a> readerIndex ( ) + </a> 
<a> ", " + </a> 
<a> <RARE_TOKEN> + </a> 
<a> writerIndex ( ) + </a> 
<a> <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int <RARE_TOKEN> ( ) { </a> 
<a> return 0 ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( boolean value ) { </a> 
<a> throw new UnreplayableOperationException ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void writeByte ( int value ) { </a> 
<a> throw new UnreplayableOperationException ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void writeBytes ( byte [ ] src , int srcIndex , int length ) { </a> 
<a> throw new UnreplayableOperationException ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void writeBytes ( byte [ ] src ) { </a> 
<a> throw new UnreplayableOperationException ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void writeBytes ( ByteBuffer src ) { </a> 
<a> throw new UnreplayableOperationException ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void writeBytes ( ByteBuf src , int srcIndex , int length ) { </a> 
<a> throw new UnreplayableOperationException ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void writeBytes ( ByteBuf src , int length ) { </a> 
<a> throw new UnreplayableOperationException ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void writeBytes ( ByteBuf src ) { </a> 
<a> throw new UnreplayableOperationException ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int writeBytes ( InputStream in , int length ) throws IOException { </a> 
<a> throw new UnreplayableOperationException ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int writeBytes ( <RARE_TOKEN> in , int length ) </a> 
<a> throws IOException { </a> 
<a> throw new UnreplayableOperationException ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void writeInt ( int value ) { </a> 
<a> throw new UnreplayableOperationException ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( long value ) { </a> 
<a> throw new UnreplayableOperationException ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( int value ) { </a> 
<a> throw new UnreplayableOperationException ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( int length ) { </a> 
<a> throw new UnreplayableOperationException ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int writerIndex ( ) { </a> 
<a> return buffer . writerIndex ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void writerIndex ( int writerIndex ) { </a> 
<a> throw new UnreplayableOperationException ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( int value ) { </a> 
<a> throw new UnreplayableOperationException ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( int value ) { </a> 
<a> throw new UnreplayableOperationException ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( float value ) { </a> 
<a> throw new UnreplayableOperationException ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( double value ) { </a> 
<a> throw new UnreplayableOperationException ( ) ; </a> 
<a> } </a> 
<a> private void checkIndex ( int index , int length ) { </a> 
<a> if ( index + length > buffer . writerIndex ( ) ) { </a> 
<a> throw <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( int readableBytes ) { </a> 
<a> if ( buffer . readableBytes ( ) < readableBytes ) { </a> 
<a> throw <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public <RARE_TOKEN> unsafe ( ) { </a> 
<a> throw new UnreplayableOperationException ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec ; </a> 
<a> public class TooLongFrameException extends <RARE_TOKEN> { </a> 
<a> private static final long serialVersionUID = - <RARE_TOKEN> ; </a> 
<a> public TooLongFrameException ( ) { </a> 
<a> } </a> 
<a> public TooLongFrameException ( String message , Throwable cause ) { </a> 
<a> super ( message , cause ) ; </a> 
<a> } </a> 
<a> public TooLongFrameException ( String message ) { </a> 
<a> super ( message ) ; </a> 
<a> } </a> 
<a> public TooLongFrameException ( Throwable cause ) { </a> 
<a> super ( cause ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec ; </a> 
<a> import io . netty . buffer . ByteBuf ; </a> 
<a> public class UnreplayableOperationException extends UnsupportedOperationException { </a> 
<a> private static final long serialVersionUID = <RARE_TOKEN> ; </a> 
<a> public UnreplayableOperationException ( ) { </a> 
<a> } </a> 
<a> public UnreplayableOperationException ( String message ) { </a> 
<a> super ( message ) ; </a> 
<a> } </a> 
<a> public UnreplayableOperationException ( Throwable cause ) { </a> 
<a> super ( cause ) ; </a> 
<a> } </a> 
<a> public UnreplayableOperationException ( String message , Throwable cause ) { </a> 
<a> super ( message , cause ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> private static final long serialVersionUID = <RARE_TOKEN> ; </a> 
<a> public <RARE_TOKEN> ( </a> 
<a> Object message , Class < ? > ... <RARE_TOKEN> ) { </a> 
<a> super ( message ( </a> 
<a> message == null ? <RARE_TOKEN> : message . getClass ( ) . getName ( ) , <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( ) { } </a> 
<a> public <RARE_TOKEN> ( String message , Throwable cause ) { </a> 
<a> super ( message , cause ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( String s ) { </a> 
<a> super ( s ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( Throwable cause ) { </a> 
<a> super ( cause ) ; </a> 
<a> } </a> 
<a> private static String message ( </a> 
<a> String <RARE_TOKEN> , Class < ? > ... <RARE_TOKEN> ) { </a> 
<a> StringBuilder buf = new StringBuilder ( <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> != null && <RARE_TOKEN> . length > 0 ) { </a> 
<a> buf . append ( " (expected: " ) . append ( <RARE_TOKEN> [ 0 ] . getName ( ) ) ; </a> 
<a> for ( int i = 1 ; i < <RARE_TOKEN> . length ; i ++ ) { </a> 
<a> Class < ? > t = <RARE_TOKEN> [ i ] ; </a> 
<a> if ( t == null ) { </a> 
<a> break ; </a> 
<a> } </a> 
<a> buf . append ( ", " ) . append ( t . getName ( ) ) ; </a> 
<a> } </a> 
<a> buf . append ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> return buf . toString ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . <RARE_TOKEN> ; </a> 
<a> import io . netty . buffer . ByteBuf ; </a> 
<a> public final class <RARE_TOKEN> { </a> 
<a> private static final int <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final byte <RARE_TOKEN> = ( byte ) <RARE_TOKEN> ; </a> 
<a> private static final byte <RARE_TOKEN> = ( byte ) <RARE_TOKEN> ; </a> 
<a> private static final byte <RARE_TOKEN> = - 5 ; </a> 
<a> private static final byte <RARE_TOKEN> = - 1 ; </a> 
<a> private static byte [ ] <RARE_TOKEN> ( <RARE_TOKEN> dialect ) { </a> 
<a> if ( dialect == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> return dialect . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> private static byte [ ] <RARE_TOKEN> ( <RARE_TOKEN> dialect ) { </a> 
<a> if ( dialect == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> return dialect . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> private static boolean <RARE_TOKEN> ( <RARE_TOKEN> dialect ) { </a> 
<a> if ( dialect == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> return dialect . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public static ByteBuf encode ( ByteBuf src ) { </a> 
<a> return encode ( src , <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public static ByteBuf encode ( ByteBuf src , <RARE_TOKEN> dialect ) { </a> 
<a> return encode ( src , <RARE_TOKEN> ( dialect ) , dialect ) ; </a> 
<a> } </a> 
<a> public static ByteBuf encode ( ByteBuf src , boolean <RARE_TOKEN> ) { </a> 
<a> return encode ( src , <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public static ByteBuf encode ( ByteBuf src , boolean <RARE_TOKEN> , <RARE_TOKEN> dialect ) { </a> 
<a> if ( src == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> ByteBuf <RARE_TOKEN> = encode ( src , src . readerIndex ( ) , src . readableBytes ( ) , <RARE_TOKEN> , dialect ) ; </a> 
<a> src . readerIndex ( src . writerIndex ( ) ) ; </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public static ByteBuf encode ( ByteBuf src , int off , int len ) { </a> 
<a> return encode ( src , off , len , <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public static ByteBuf encode ( ByteBuf src , int off , int len , <RARE_TOKEN> dialect ) { </a> 
<a> return encode ( src , off , len , <RARE_TOKEN> ( dialect ) , dialect ) ; </a> 
<a> } </a> 
<a> public static ByteBuf encode ( </a> 
<a> ByteBuf src , int off , int len , boolean <RARE_TOKEN> ) { </a> 
<a> return encode ( src , off , len , <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public static ByteBuf encode ( </a> 
<a> ByteBuf src , int off , int len , boolean <RARE_TOKEN> , <RARE_TOKEN> dialect ) { </a> 
<a> if ( src == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( dialect == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> int <RARE_TOKEN> = len * 4 / 3 ; </a> 
<a> ByteBuf <RARE_TOKEN> = src . unsafe ( ) . <RARE_TOKEN> ( </a> 
<a> <RARE_TOKEN> + </a> 
<a> ( len <RARE_TOKEN> 3 > 0 ? 4 : 0 ) + </a> 
<a> ( <RARE_TOKEN> ? <RARE_TOKEN> / <RARE_TOKEN> : 0 ) ) . order ( src . order ( ) ) ; </a> 
<a> int d = 0 ; </a> 
<a> int e = 0 ; </a> 
<a> int <RARE_TOKEN> = len - 2 ; </a> 
<a> int <RARE_TOKEN> = 0 ; </a> 
<a> for ( ; d < <RARE_TOKEN> ; d += 3 , e += 4 ) { </a> 
<a> <RARE_TOKEN> ( src , d + off , 3 , <RARE_TOKEN> , e , dialect ) ; </a> 
<a> <RARE_TOKEN> += 4 ; </a> 
<a> if ( <RARE_TOKEN> && <RARE_TOKEN> == <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> . setByte ( e + 4 , <RARE_TOKEN> ) ; </a> 
<a> e ++ ; </a> 
<a> <RARE_TOKEN> = 0 ; </a> 
<a> } </a> 
<a> } </a> 
<a> if ( d < len ) { </a> 
<a> <RARE_TOKEN> ( src , d + off , len - d , <RARE_TOKEN> , e , dialect ) ; </a> 
<a> e += 4 ; </a> 
<a> } </a> 
<a> return <RARE_TOKEN> . slice ( 0 , e ) ; </a> 
<a> } </a> 
<a> private static void <RARE_TOKEN> ( </a> 
<a> ByteBuf src , int <RARE_TOKEN> , int <RARE_TOKEN> , </a> 
<a> ByteBuf <RARE_TOKEN> , int <RARE_TOKEN> , <RARE_TOKEN> dialect ) { </a> 
<a> byte [ ] <RARE_TOKEN> = <RARE_TOKEN> ( dialect ) ; </a> 
<a> int <RARE_TOKEN> = </a> 
<a> ( <RARE_TOKEN> > 0 ? src . getByte ( <RARE_TOKEN> ) < < 24 > > > 8 : 0 ) | </a> 
<a> ( <RARE_TOKEN> > 1 ? src . getByte ( <RARE_TOKEN> + 1 ) < < 24 > > > 16 : 0 ) | </a> 
<a> ( <RARE_TOKEN> > 2 ? src . getByte ( <RARE_TOKEN> + 2 ) < < 24 > > > 24 : 0 ) ; </a> 
<a> switch ( <RARE_TOKEN> ) { </a> 
<a> case 3 : </a> 
<a> <RARE_TOKEN> . setByte ( <RARE_TOKEN> , <RARE_TOKEN> [ <RARE_TOKEN> > > > <RARE_TOKEN> ] ) ; </a> 
<a> <RARE_TOKEN> . setByte ( <RARE_TOKEN> + 1 , <RARE_TOKEN> [ <RARE_TOKEN> > > > 12 & <RARE_TOKEN> ] ) ; </a> 
<a> <RARE_TOKEN> . setByte ( <RARE_TOKEN> + 2 , <RARE_TOKEN> [ <RARE_TOKEN> > > > 6 & <RARE_TOKEN> ] ) ; </a> 
<a> <RARE_TOKEN> . setByte ( <RARE_TOKEN> + 3 , <RARE_TOKEN> [ <RARE_TOKEN> & <RARE_TOKEN> ] ) ; </a> 
<a> break ; </a> 
<a> case 2 : </a> 
<a> <RARE_TOKEN> . setByte ( <RARE_TOKEN> , <RARE_TOKEN> [ <RARE_TOKEN> > > > <RARE_TOKEN> ] ) ; </a> 
<a> <RARE_TOKEN> . setByte ( <RARE_TOKEN> + 1 , <RARE_TOKEN> [ <RARE_TOKEN> > > > 12 & <RARE_TOKEN> ] ) ; </a> 
<a> <RARE_TOKEN> . setByte ( <RARE_TOKEN> + 2 , <RARE_TOKEN> [ <RARE_TOKEN> > > > 6 & <RARE_TOKEN> ] ) ; </a> 
<a> <RARE_TOKEN> . setByte ( <RARE_TOKEN> + 3 , <RARE_TOKEN> ) ; </a> 
<a> break ; </a> 
<a> case 1 : </a> 
<a> <RARE_TOKEN> . setByte ( <RARE_TOKEN> , <RARE_TOKEN> [ <RARE_TOKEN> > > > <RARE_TOKEN> ] ) ; </a> 
<a> <RARE_TOKEN> . setByte ( <RARE_TOKEN> + 1 , <RARE_TOKEN> [ <RARE_TOKEN> > > > 12 & <RARE_TOKEN> ] ) ; </a> 
<a> <RARE_TOKEN> . setByte ( <RARE_TOKEN> + 2 , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . setByte ( <RARE_TOKEN> + 3 , <RARE_TOKEN> ) ; </a> 
<a> break ; </a> 
<a> } </a> 
<a> } </a> 
<a> public static ByteBuf decode ( ByteBuf src ) { </a> 
<a> return decode ( src , <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public static ByteBuf decode ( ByteBuf src , <RARE_TOKEN> dialect ) { </a> 
<a> if ( src == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> ByteBuf <RARE_TOKEN> = decode ( src , src . readerIndex ( ) , src . readableBytes ( ) , dialect ) ; </a> 
<a> src . readerIndex ( src . writerIndex ( ) ) ; </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public static ByteBuf decode ( </a> 
<a> ByteBuf src , int off , int len ) { </a> 
<a> return decode ( src , off , len , <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public static ByteBuf decode ( </a> 
<a> ByteBuf src , int off , int len , <RARE_TOKEN> dialect ) { </a> 
<a> if ( src == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( dialect == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> byte [ ] <RARE_TOKEN> = <RARE_TOKEN> ( dialect ) ; </a> 
<a> int <RARE_TOKEN> = len * 3 / 4 ; </a> 
<a> ByteBuf <RARE_TOKEN> = src . unsafe ( ) . <RARE_TOKEN> ( <RARE_TOKEN> ) . order ( src . order ( ) ) ; </a> 
<a> int <RARE_TOKEN> = 0 ; </a> 
<a> byte [ ] <RARE_TOKEN> = new byte [ 4 ] ; </a> 
<a> int <RARE_TOKEN> = 0 ; </a> 
<a> int i ; </a> 
<a> byte <RARE_TOKEN> ; </a> 
<a> byte <RARE_TOKEN> ; </a> 
<a> for ( i = off ; i < off + len ; i ++ ) { </a> 
<a> <RARE_TOKEN> = ( byte ) ( src . getByte ( i ) & <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> [ <RARE_TOKEN> ] ; </a> 
<a> if ( <RARE_TOKEN> >= <RARE_TOKEN> ) { </a> 
<a> if ( <RARE_TOKEN> >= <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> [ <RARE_TOKEN> ++ ] = <RARE_TOKEN> ; </a> 
<a> if ( <RARE_TOKEN> > 3 ) { </a> 
<a> <RARE_TOKEN> += <RARE_TOKEN> ( </a> 
<a> <RARE_TOKEN> , 0 , <RARE_TOKEN> , <RARE_TOKEN> , dialect ) ; </a> 
<a> <RARE_TOKEN> = 0 ; </a> 
<a> if ( <RARE_TOKEN> == <RARE_TOKEN> ) { </a> 
<a> break ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } else { </a> 
<a> throw new IllegalArgumentException ( </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> input <RARE_TOKEN> <RARE_TOKEN> " + i + <RARE_TOKEN> " + </a> 
<a> src . <RARE_TOKEN> ( i ) + " <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> return <RARE_TOKEN> . slice ( 0 , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> private static int <RARE_TOKEN> ( </a> 
<a> byte [ ] src , int <RARE_TOKEN> , </a> 
<a> ByteBuf <RARE_TOKEN> , int <RARE_TOKEN> , <RARE_TOKEN> dialect ) { </a> 
<a> byte [ ] <RARE_TOKEN> = <RARE_TOKEN> ( dialect ) ; </a> 
<a> if ( src [ <RARE_TOKEN> + 2 ] == <RARE_TOKEN> ) { </a> 
<a> int <RARE_TOKEN> = </a> 
<a> ( <RARE_TOKEN> [ src [ <RARE_TOKEN> ] ] & 0xFF ) < < <RARE_TOKEN> | </a> 
<a> ( <RARE_TOKEN> [ src [ <RARE_TOKEN> + 1 ] ] & 0xFF ) < < 12 ; </a> 
<a> <RARE_TOKEN> . setByte ( <RARE_TOKEN> , ( byte ) ( <RARE_TOKEN> > > > 16 ) ) ; </a> 
<a> return 1 ; </a> 
<a> } else if ( src [ <RARE_TOKEN> + 3 ] == <RARE_TOKEN> ) { </a> 
<a> int <RARE_TOKEN> = </a> 
<a> ( <RARE_TOKEN> [ src [ <RARE_TOKEN> ] ] & 0xFF ) < < <RARE_TOKEN> | </a> 
<a> ( <RARE_TOKEN> [ src [ <RARE_TOKEN> + 1 ] ] & 0xFF ) < < 12 | </a> 
<a> ( <RARE_TOKEN> [ src [ <RARE_TOKEN> + 2 ] ] & 0xFF ) < < 6 ; </a> 
<a> <RARE_TOKEN> . setByte ( <RARE_TOKEN> , ( byte ) ( <RARE_TOKEN> > > > 16 ) ) ; </a> 
<a> <RARE_TOKEN> . setByte ( <RARE_TOKEN> + 1 , ( byte ) ( <RARE_TOKEN> > > > 8 ) ) ; </a> 
<a> return 2 ; </a> 
<a> } else { </a> 
<a> int <RARE_TOKEN> ; </a> 
<a> try { </a> 
<a> <RARE_TOKEN> = </a> 
<a> ( <RARE_TOKEN> [ src [ <RARE_TOKEN> ] ] & 0xFF ) < < <RARE_TOKEN> | </a> 
<a> ( <RARE_TOKEN> [ src [ <RARE_TOKEN> + 1 ] ] & 0xFF ) < < 12 | </a> 
<a> ( <RARE_TOKEN> [ src [ <RARE_TOKEN> + 2 ] ] & 0xFF ) < < 6 | </a> 
<a> <RARE_TOKEN> [ src [ <RARE_TOKEN> + 3 ] ] & 0xFF ; </a> 
<a> } catch ( IndexOutOfBoundsException e ) { </a> 
<a> throw new IllegalArgumentException ( <RARE_TOKEN> <RARE_TOKEN> in <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> . setByte ( <RARE_TOKEN> , ( byte ) ( <RARE_TOKEN> > > 16 ) ) ; </a> 
<a> <RARE_TOKEN> . setByte ( <RARE_TOKEN> + 1 , ( byte ) ( <RARE_TOKEN> > > 8 ) ) ; </a> 
<a> <RARE_TOKEN> . setByte ( <RARE_TOKEN> + 2 , ( byte ) <RARE_TOKEN> ) ; </a> 
<a> return 3 ; </a> 
<a> } </a> 
<a> } </a> 
<a> private <RARE_TOKEN> ( ) { </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . <RARE_TOKEN> ; </a> 
<a> import io . netty . buffer . ByteBuf ; </a> 
<a> import io . netty . channel . ChannelHandler . Sharable ; </a> 
<a> import io . netty . channel . ChannelHandlerContext ; </a> 
<a> import io . netty . channel . ChannelPipeline ; </a> 
<a> import io . netty . handler . codec . <RARE_TOKEN> ; </a> 
<a> import io . netty . handler . codec . <RARE_TOKEN> ; </a> 
<a> import io . netty . handler . codec . <RARE_TOKEN> ; </a> 
<a> import io . netty . handler . codec . <RARE_TOKEN> ; </a> 
<a> @ Sharable </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> < ByteBuf , ByteBuf > { </a> 
<a> private final <RARE_TOKEN> dialect ; </a> 
<a> public <RARE_TOKEN> ( ) { </a> 
<a> this ( <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( <RARE_TOKEN> dialect ) { </a> 
<a> if ( dialect == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> this . dialect = dialect ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( Object msg ) throws Exception { </a> 
<a> return msg instanceof ByteBuf ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ByteBuf decode ( ChannelHandlerContext ctx , ByteBuf msg ) throws Exception { </a> 
<a> return <RARE_TOKEN> . decode ( msg , msg . readerIndex ( ) , msg . readableBytes ( ) , dialect ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . <RARE_TOKEN> ; </a> 
<a> public enum <RARE_TOKEN> { </a> 
<a> <RARE_TOKEN> ( new byte [ ] { </a> 
<a> ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , </a> 
<a> ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , </a> 
<a> ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , </a> 
<a> ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , </a> 
<a> ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , </a> 
<a> ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , </a> 
<a> ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , </a> 
<a> ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , </a> 
<a> ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , </a> 
<a> ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , </a> 
<a> ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , </a> 
<a> ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , </a> 
<a> ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> } , </a> 
<a> new byte [ ] { </a> 
<a> - 9 , - 9 , - 9 , - 9 , - 9 , - 9 , </a> 
<a> - 9 , - 9 , - 9 , </a> 
<a> - 5 , - 5 , </a> 
<a> - 9 , - 9 , </a> 
<a> - 5 , </a> 
<a> - 9 , - 9 , - 9 , - 9 , - 9 , - 9 , - 9 , - 9 , - 9 , - 9 , - 9 , - 9 , - 9 , </a> 
<a> - 9 , - 9 , - 9 , - 9 , - 9 , </a> 
<a> - 5 , </a> 
<a> - 9 , - 9 , - 9 , - 9 , - 9 , - 9 , - 9 , - 9 , - 9 , - 9 , </a> 
<a> <RARE_TOKEN> , </a> 
<a> - 9 , - 9 , - 9 , </a> 
<a> <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> - 9 , - 9 , - 9 , </a> 
<a> - 1 , </a> 
<a> - 9 , - 9 , - 9 , </a> 
<a> 0 , 1 , 2 , 3 , 4 , 5 , 6 , 7 , 8 , 9 , 10 , 11 , 12 , 13 , </a> 
<a> 14 , 15 , 16 , 17 , <RARE_TOKEN> , 19 , 20 , <RARE_TOKEN> , <RARE_TOKEN> , 23 , 24 , 25 , </a> 
<a> - 9 , - 9 , - 9 , - 9 , - 9 , - 9 , </a> 
<a> 26 , 27 , 28 , 29 , <RARE_TOKEN> , <RARE_TOKEN> , 32 , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> - 9 , - 9 , - 9 , - 9 , </a> 
<a> } , true ) , </a> 
<a> <RARE_TOKEN> ( new byte [ ] { </a> 
<a> ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , </a> 
<a> ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , </a> 
<a> ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , </a> 
<a> ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , </a> 
<a> ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , </a> 
<a> ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , </a> 
<a> ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , </a> 
<a> ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , </a> 
<a> ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , </a> 
<a> ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , </a> 
<a> ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , </a> 
<a> ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , </a> 
<a> ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> } , </a> 
<a> new byte [ ] { </a> 
<a> - 9 , - 9 , - 9 , - 9 , - 9 , - 9 , </a> 
<a> - 9 , - 9 , - 9 , </a> 
<a> - 5 , - 5 , </a> 
<a> - 9 , - 9 , </a> 
<a> - 5 , </a> 
<a> - 9 , - 9 , - 9 , - 9 , - 9 , - 9 , - 9 , - 9 , - 9 , - 9 , - 9 , - 9 , - 9 , </a> 
<a> - 9 , - 9 , - 9 , - 9 , - 9 , </a> 
<a> - 5 , </a> 
<a> - 9 , - 9 , - 9 , - 9 , - 9 , - 9 , - 9 , - 9 , - 9 , - 9 , </a> 
<a> - 9 , </a> 
<a> - 9 , </a> 
<a> <RARE_TOKEN> , </a> 
<a> - 9 , </a> 
<a> - 9 , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> - 9 , - 9 , - 9 , </a> 
<a> - 1 , </a> 
<a> - 9 , - 9 , - 9 , </a> 
<a> 0 , 1 , 2 , 3 , 4 , 5 , 6 , 7 , 8 , 9 , 10 , 11 , 12 , 13 , </a> 
<a> 14 , 15 , 16 , 17 , <RARE_TOKEN> , 19 , 20 , <RARE_TOKEN> , <RARE_TOKEN> , 23 , 24 , 25 , </a> 
<a> - 9 , - 9 , - 9 , - 9 , </a> 
<a> <RARE_TOKEN> , </a> 
<a> - 9 , </a> 
<a> 26 , 27 , 28 , 29 , <RARE_TOKEN> , <RARE_TOKEN> , 32 , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> - 9 , - 9 , - 9 , - 9 , </a> 
<a> } , false ) , </a> 
<a> <RARE_TOKEN> ( new byte [ ] { </a> 
<a> ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , </a> 
<a> ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , </a> 
<a> ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , </a> 
<a> ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , </a> 
<a> ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , </a> 
<a> ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , </a> 
<a> ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , </a> 
<a> ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , </a> 
<a> ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , </a> 
<a> ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , </a> 
<a> ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , </a> 
<a> ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , </a> 
<a> ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , ( byte ) <RARE_TOKEN> } , </a> 
<a> new byte [ ] { </a> 
<a> - 9 , - 9 , - 9 , - 9 , - 9 , - 9 , </a> 
<a> - 9 , - 9 , - 9 , </a> 
<a> - 5 , - 5 , </a> 
<a> - 9 , - 9 , </a> 
<a> - 5 , </a> 
<a> - 9 , - 9 , - 9 , - 9 , - 9 , - 9 , - 9 , - 9 , - 9 , - 9 , - 9 , - 9 , - 9 , </a> 
<a> - 9 , - 9 , - 9 , - 9 , - 9 , </a> 
<a> - 5 , </a> 
<a> - 9 , - 9 , - 9 , - 9 , - 9 , - 9 , - 9 , - 9 , - 9 , - 9 , </a> 
<a> - 9 , </a> 
<a> - 9 , </a> 
<a> 0 , </a> 
<a> - 9 , </a> 
<a> - 9 , </a> 
<a> 1 , 2 , 3 , 4 , 5 , 6 , 7 , 8 , 9 , 10 , </a> 
<a> - 9 , - 9 , - 9 , </a> 
<a> - 1 , </a> 
<a> - 9 , - 9 , - 9 , </a> 
<a> 11 , 12 , 13 , 14 , 15 , 16 , 17 , <RARE_TOKEN> , 19 , 20 , <RARE_TOKEN> , <RARE_TOKEN> , 23 , </a> 
<a> 24 , 25 , 26 , 27 , 28 , 29 , <RARE_TOKEN> , <RARE_TOKEN> , 32 , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> - 9 , - 9 , - 9 , - 9 , </a> 
<a> <RARE_TOKEN> , </a> 
<a> - 9 , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> - 9 , - 9 , - 9 , - 9 , </a> 
<a> } , true ) ; </a> 
<a> final byte [ ] <RARE_TOKEN> ; </a> 
<a> final byte [ ] <RARE_TOKEN> ; </a> 
<a> final boolean <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> ( byte [ ] <RARE_TOKEN> , byte [ ] <RARE_TOKEN> , boolean <RARE_TOKEN> ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . <RARE_TOKEN> ; </a> 
<a> import io . netty . buffer . ByteBuf ; </a> 
<a> import io . netty . channel . ChannelHandler . Sharable ; </a> 
<a> import io . netty . channel . ChannelHandlerContext ; </a> 
<a> import io . netty . channel . ChannelPipeline ; </a> 
<a> import io . netty . handler . codec . <RARE_TOKEN> ; </a> 
<a> import io . netty . handler . codec . <RARE_TOKEN> ; </a> 
<a> import io . netty . handler . codec . <RARE_TOKEN> ; </a> 
<a> @ Sharable </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> < ByteBuf , ByteBuf > { </a> 
<a> private final boolean <RARE_TOKEN> ; </a> 
<a> private final <RARE_TOKEN> dialect ; </a> 
<a> public <RARE_TOKEN> ( ) { </a> 
<a> this ( true ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( boolean <RARE_TOKEN> ) { </a> 
<a> this ( <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( boolean <RARE_TOKEN> , <RARE_TOKEN> dialect ) { </a> 
<a> if ( dialect == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> this . dialect = dialect ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( Object msg ) throws Exception { </a> 
<a> return msg instanceof ByteBuf ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ByteBuf encode ( ChannelHandlerContext ctx , </a> 
<a> ByteBuf msg ) throws Exception { </a> 
<a> return <RARE_TOKEN> . encode ( msg , msg . readerIndex ( ) , msg . readableBytes ( ) , <RARE_TOKEN> , dialect ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . bytes ; </a> 
<a> import io . netty . buffer . ByteBuf ; </a> 
<a> import io . netty . channel . ChannelHandlerContext ; </a> 
<a> import io . netty . channel . ChannelPipeline ; </a> 
<a> import io . netty . handler . codec . <RARE_TOKEN> ; </a> 
<a> import io . netty . handler . codec . <RARE_TOKEN> ; </a> 
<a> import io . netty . handler . codec . <RARE_TOKEN> ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> < ByteBuf , byte [ ] > { </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( Object msg ) throws Exception { </a> 
<a> return msg instanceof ByteBuf ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public byte [ ] decode ( ChannelHandlerContext ctx , ByteBuf msg ) throws Exception { </a> 
<a> byte [ ] array ; </a> 
<a> if ( msg . <RARE_TOKEN> ( ) ) { </a> 
<a> if ( msg . <RARE_TOKEN> ( ) == 0 && msg . readableBytes ( ) == msg . capacity ( ) ) { </a> 
<a> array = msg . array ( ) ; </a> 
<a> } else { </a> 
<a> array = new byte [ msg . readableBytes ( ) ] ; </a> 
<a> msg . getBytes ( 0 , array ) ; </a> 
<a> } </a> 
<a> } else { </a> 
<a> array = new byte [ msg . readableBytes ( ) ] ; </a> 
<a> msg . getBytes ( 0 , array ) ; </a> 
<a> } </a> 
<a> return array ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . <RARE_TOKEN> ; </a> 
<a> import io . netty . buffer . ByteBuf ; </a> 
<a> import io . netty . channel . ChannelHandlerContext ; </a> 
<a> import io . netty . util . internal . <RARE_TOKEN> . JZlib ; </a> 
<a> import io . netty . util . internal . <RARE_TOKEN> . ZStream ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> private final ZStream z = new ZStream ( ) ; </a> 
<a> private byte [ ] dictionary ; </a> 
<a> private volatile boolean <RARE_TOKEN> ; </a> 
<a> public <RARE_TOKEN> ( ) { </a> 
<a> this ( ZlibWrapper . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( ZlibWrapper wrapper ) { </a> 
<a> if ( wrapper == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> int resultCode = z . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ( wrapper ) ) ; </a> 
<a> if ( resultCode != JZlib . Z_OK ) { </a> 
<a> <RARE_TOKEN> . fail ( z , <RARE_TOKEN> <RARE_TOKEN> , resultCode ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( byte [ ] dictionary ) { </a> 
<a> if ( dictionary == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> this . dictionary = dictionary ; </a> 
<a> int resultCode ; </a> 
<a> resultCode = z . <RARE_TOKEN> ( JZlib . <RARE_TOKEN> ) ; </a> 
<a> if ( resultCode != JZlib . Z_OK ) { </a> 
<a> <RARE_TOKEN> . fail ( z , <RARE_TOKEN> <RARE_TOKEN> , resultCode ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void decode ( </a> 
<a> ChannelHandlerContext ctx , </a> 
<a> ByteBuf in , ByteBuf out ) throws Exception { </a> 
<a> if ( ! in . readable ( ) ) { </a> 
<a> return ; </a> 
<a> } </a> 
<a> try { </a> 
<a> int <RARE_TOKEN> = in . readableBytes ( ) ; </a> 
<a> boolean <RARE_TOKEN> = in . <RARE_TOKEN> ( ) ; </a> 
<a> z . avail_in = <RARE_TOKEN> ; </a> 
<a> if ( <RARE_TOKEN> ) { </a> 
<a> z . next_in = in . array ( ) ; </a> 
<a> z . next_in_index = in . <RARE_TOKEN> ( ) + in . readerIndex ( ) ; </a> 
<a> } else { </a> 
<a> byte [ ] array = new byte [ <RARE_TOKEN> ] ; </a> 
<a> in . readBytes ( array ) ; </a> 
<a> z . next_in = array ; </a> 
<a> z . next_in_index = 0 ; </a> 
<a> } </a> 
<a> int <RARE_TOKEN> = z . next_in_index ; </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> < < 1 ; </a> 
<a> boolean <RARE_TOKEN> = out . <RARE_TOKEN> ( ) ; </a> 
<a> if ( ! <RARE_TOKEN> ) { </a> 
<a> z . <RARE_TOKEN> = new byte [ <RARE_TOKEN> ] ; </a> 
<a> } </a> 
<a> try { </a> 
<a> loop : for ( ; ; ) { </a> 
<a> z . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> if ( <RARE_TOKEN> ) { </a> 
<a> out . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> z . <RARE_TOKEN> = out . array ( ) ; </a> 
<a> z . <RARE_TOKEN> = out . <RARE_TOKEN> ( ) + out . writerIndex ( ) ; </a> 
<a> } else { </a> 
<a> z . <RARE_TOKEN> = 0 ; </a> 
<a> } </a> 
<a> int <RARE_TOKEN> = z . <RARE_TOKEN> ; </a> 
<a> int resultCode = z . <RARE_TOKEN> ( JZlib . <RARE_TOKEN> ) ; </a> 
<a> int <RARE_TOKEN> = z . <RARE_TOKEN> - <RARE_TOKEN> ; </a> 
<a> if ( <RARE_TOKEN> > 0 ) { </a> 
<a> if ( <RARE_TOKEN> ) { </a> 
<a> out . writerIndex ( out . writerIndex ( ) + <RARE_TOKEN> ) ; </a> 
<a> } else { </a> 
<a> out . writeBytes ( z . <RARE_TOKEN> , 0 , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> switch ( resultCode ) { </a> 
<a> case JZlib . <RARE_TOKEN> : </a> 
<a> if ( dictionary == null ) { </a> 
<a> <RARE_TOKEN> . fail ( z , <RARE_TOKEN> <RARE_TOKEN> , resultCode ) ; </a> 
<a> } else { </a> 
<a> resultCode = z . <RARE_TOKEN> ( dictionary , dictionary . length ) ; </a> 
<a> if ( resultCode != JZlib . Z_OK ) { </a> 
<a> <RARE_TOKEN> . fail ( z , "failed to set the <RARE_TOKEN> , resultCode ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> break ; </a> 
<a> case JZlib . <RARE_TOKEN> : </a> 
<a> <RARE_TOKEN> = true ; </a> 
<a> z . <RARE_TOKEN> ( ) ; </a> 
<a> break loop ; </a> 
<a> case JZlib . Z_OK : </a> 
<a> break ; </a> 
<a> case JZlib . <RARE_TOKEN> : </a> 
<a> if ( z . avail_in <= 0 ) { </a> 
<a> break loop ; </a> 
<a> } </a> 
<a> break ; </a> 
<a> default : </a> 
<a> <RARE_TOKEN> . fail ( z , <RARE_TOKEN> <RARE_TOKEN> , resultCode ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } finally { </a> 
<a> if ( <RARE_TOKEN> ) { </a> 
<a> in . skipBytes ( z . next_in_index - <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } finally { </a> 
<a> z . next_in = null ; </a> 
<a> z . <RARE_TOKEN> = null ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . <RARE_TOKEN> ; </a> 
<a> import io . netty . buffer . ByteBuf ; </a> 
<a> import io . netty . buffer . Unpooled ; </a> 
<a> import io . netty . channel . ChannelFuture ; </a> 
<a> import io . netty . channel . ChannelFutureListener ; </a> 
<a> import io . netty . channel . ChannelHandlerContext ; </a> 
<a> import io . netty . util . internal . <RARE_TOKEN> . JZlib ; </a> 
<a> import io . netty . util . internal . <RARE_TOKEN> . ZStream ; </a> 
<a> import java . util . concurrent . TimeUnit ; </a> 
<a> import java . util . concurrent . atomic . AtomicBoolean ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> private static final byte [ ] <RARE_TOKEN> = new byte [ 0 ] ; </a> 
<a> private final ZStream z = new ZStream ( ) ; </a> 
<a> private final AtomicBoolean <RARE_TOKEN> = new AtomicBoolean ( ) ; </a> 
<a> private volatile ChannelHandlerContext ctx ; </a> 
<a> public <RARE_TOKEN> ( ) { </a> 
<a> this ( 6 ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( int compressionLevel ) { </a> 
<a> this ( ZlibWrapper . <RARE_TOKEN> , compressionLevel ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( ZlibWrapper wrapper ) { </a> 
<a> this ( wrapper , 6 ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( ZlibWrapper wrapper , int compressionLevel ) { </a> 
<a> this ( wrapper , compressionLevel , 15 , 8 ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( ZlibWrapper wrapper , int compressionLevel , int windowBits , int memLevel ) { </a> 
<a> if ( compressionLevel < 0 || compressionLevel > 9 ) { </a> 
<a> throw new IllegalArgumentException ( </a> 
<a> <RARE_TOKEN> " + compressionLevel + </a> 
<a> " (expected: <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( windowBits < 9 || windowBits > 15 ) { </a> 
<a> throw new IllegalArgumentException ( </a> 
<a> <RARE_TOKEN> " + windowBits + " (expected: <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( memLevel < 1 || memLevel > 9 ) { </a> 
<a> throw new IllegalArgumentException ( </a> 
<a> <RARE_TOKEN> " + memLevel + " (expected: <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( wrapper == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( wrapper == ZlibWrapper . <RARE_TOKEN> ) { </a> 
<a> throw new IllegalArgumentException ( </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> + ZlibWrapper . <RARE_TOKEN> + <RARE_TOKEN> is not " + </a> 
<a> <RARE_TOKEN> for <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> synchronized ( z ) { </a> 
<a> int resultCode = z . <RARE_TOKEN> ( </a> 
<a> compressionLevel , windowBits , memLevel , </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( wrapper ) ) ; </a> 
<a> if ( resultCode != JZlib . Z_OK ) { </a> 
<a> <RARE_TOKEN> . fail ( z , <RARE_TOKEN> <RARE_TOKEN> , resultCode ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( byte [ ] dictionary ) { </a> 
<a> this ( 6 , dictionary ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( int compressionLevel , byte [ ] dictionary ) { </a> 
<a> this ( compressionLevel , 15 , 8 , dictionary ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( int compressionLevel , int windowBits , int memLevel , byte [ ] dictionary ) { </a> 
<a> if ( compressionLevel < 0 || compressionLevel > 9 ) { </a> 
<a> throw new IllegalArgumentException ( <RARE_TOKEN> " + compressionLevel + " (expected: <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( windowBits < 9 || windowBits > 15 ) { </a> 
<a> throw new IllegalArgumentException ( </a> 
<a> <RARE_TOKEN> " + windowBits + " (expected: <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( memLevel < 1 || memLevel > 9 ) { </a> 
<a> throw new IllegalArgumentException ( </a> 
<a> <RARE_TOKEN> " + memLevel + " (expected: <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( dictionary == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> synchronized ( z ) { </a> 
<a> int resultCode ; </a> 
<a> resultCode = z . <RARE_TOKEN> ( </a> 
<a> compressionLevel , windowBits , memLevel , </a> 
<a> JZlib . <RARE_TOKEN> ) ; </a> 
<a> if ( resultCode != JZlib . Z_OK ) { </a> 
<a> <RARE_TOKEN> . fail ( z , <RARE_TOKEN> <RARE_TOKEN> , resultCode ) ; </a> 
<a> } else { </a> 
<a> resultCode = z . <RARE_TOKEN> ( dictionary , dictionary . length ) ; </a> 
<a> if ( resultCode != JZlib . Z_OK ) { </a> 
<a> <RARE_TOKEN> . fail ( z , "failed to set the <RARE_TOKEN> , resultCode ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ChannelFuture close ( ) { </a> 
<a> return close ( ctx ( ) . channel ( ) . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ChannelFuture close ( ChannelFuture future ) { </a> 
<a> return <RARE_TOKEN> ( ctx ( ) , future ) ; </a> 
<a> } </a> 
<a> private ChannelHandlerContext ctx ( ) { </a> 
<a> ChannelHandlerContext ctx = this . ctx ; </a> 
<a> if ( ctx == null ) { </a> 
<a> throw new IllegalStateException ( <RARE_TOKEN> <RARE_TOKEN> to a <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> return ctx ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> . get ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void encode ( ChannelHandlerContext ctx , </a> 
<a> ByteBuf in , ByteBuf out ) throws Exception { </a> 
<a> if ( <RARE_TOKEN> . get ( ) ) { </a> 
<a> return ; </a> 
<a> } </a> 
<a> synchronized ( z ) { </a> 
<a> try { </a> 
<a> int <RARE_TOKEN> = in . readableBytes ( ) ; </a> 
<a> boolean <RARE_TOKEN> = in . <RARE_TOKEN> ( ) ; </a> 
<a> z . avail_in = <RARE_TOKEN> ; </a> 
<a> if ( <RARE_TOKEN> ) { </a> 
<a> z . next_in = in . array ( ) ; </a> 
<a> z . next_in_index = in . <RARE_TOKEN> ( ) + in . readerIndex ( ) ; </a> 
<a> } else { </a> 
<a> byte [ ] array = new byte [ <RARE_TOKEN> ] ; </a> 
<a> in . readBytes ( array ) ; </a> 
<a> z . next_in = array ; </a> 
<a> z . next_in_index = 0 ; </a> 
<a> } </a> 
<a> int <RARE_TOKEN> = z . next_in_index ; </a> 
<a> int <RARE_TOKEN> = ( int ) Math . <RARE_TOKEN> ( <RARE_TOKEN> * <RARE_TOKEN> ) + 12 ; </a> 
<a> boolean <RARE_TOKEN> = out . <RARE_TOKEN> ( ) ; </a> 
<a> z . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> if ( <RARE_TOKEN> ) { </a> 
<a> out . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> z . <RARE_TOKEN> = out . array ( ) ; </a> 
<a> z . <RARE_TOKEN> = out . <RARE_TOKEN> ( ) + out . writerIndex ( ) ; </a> 
<a> } else { </a> 
<a> z . <RARE_TOKEN> = new byte [ <RARE_TOKEN> ] ; </a> 
<a> z . <RARE_TOKEN> = 0 ; </a> 
<a> } </a> 
<a> int <RARE_TOKEN> = z . <RARE_TOKEN> ; </a> 
<a> int resultCode ; </a> 
<a> try { </a> 
<a> resultCode = z . <RARE_TOKEN> ( JZlib . <RARE_TOKEN> ) ; </a> 
<a> } finally { </a> 
<a> if ( <RARE_TOKEN> ) { </a> 
<a> in . skipBytes ( z . next_in_index - <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> if ( resultCode != JZlib . Z_OK ) { </a> 
<a> <RARE_TOKEN> . fail ( z , <RARE_TOKEN> <RARE_TOKEN> , resultCode ) ; </a> 
<a> } </a> 
<a> int <RARE_TOKEN> = z . <RARE_TOKEN> - <RARE_TOKEN> ; </a> 
<a> if ( <RARE_TOKEN> > 0 ) { </a> 
<a> if ( <RARE_TOKEN> ) { </a> 
<a> out . writerIndex ( out . writerIndex ( ) + <RARE_TOKEN> ) ; </a> 
<a> } else { </a> 
<a> out . writeBytes ( z . <RARE_TOKEN> , 0 , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } finally { </a> 
<a> z . next_in = null ; </a> 
<a> z . <RARE_TOKEN> = null ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void close ( </a> 
<a> final ChannelHandlerContext ctx , </a> 
<a> final ChannelFuture future ) throws Exception { </a> 
<a> ChannelFuture f = <RARE_TOKEN> ( ctx , ctx . <RARE_TOKEN> ( ) ) ; </a> 
<a> f . addListener ( new ChannelFutureListener ( ) { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ChannelFuture f ) throws Exception { </a> 
<a> ctx . close ( future ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> if ( ! f . <RARE_TOKEN> ( ) ) { </a> 
<a> ctx . executor ( ) . schedule ( new Runnable ( ) { </a> 
<a> @ Override </a> 
<a> public void run ( ) { </a> 
<a> ctx . close ( future ) ; </a> 
<a> } </a> 
<a> } , 10 , TimeUnit . SECONDS ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private ChannelFuture <RARE_TOKEN> ( ChannelHandlerContext ctx , ChannelFuture future ) { </a> 
<a> if ( ! <RARE_TOKEN> . <RARE_TOKEN> ( false , true ) ) { </a> 
<a> future . <RARE_TOKEN> ( ) ; </a> 
<a> return future ; </a> 
<a> } </a> 
<a> ByteBuf <RARE_TOKEN> ; </a> 
<a> synchronized ( z ) { </a> 
<a> try { </a> 
<a> z . next_in = <RARE_TOKEN> ; </a> 
<a> z . next_in_index = 0 ; </a> 
<a> z . avail_in = 0 ; </a> 
<a> byte [ ] out = new byte [ 32 ] ; </a> 
<a> z . <RARE_TOKEN> = out ; </a> 
<a> z . <RARE_TOKEN> = 0 ; </a> 
<a> z . <RARE_TOKEN> = out . length ; </a> 
<a> int resultCode = z . <RARE_TOKEN> ( JZlib . <RARE_TOKEN> ) ; </a> 
<a> if ( resultCode != JZlib . Z_OK && resultCode != JZlib . <RARE_TOKEN> ) { </a> 
<a> future . setFailure ( <RARE_TOKEN> . exception ( z , <RARE_TOKEN> <RARE_TOKEN> , resultCode ) ) ; </a> 
<a> return future ; </a> 
<a> } else if ( z . <RARE_TOKEN> != 0 ) { </a> 
<a> <RARE_TOKEN> = Unpooled . wrappedBuffer ( out , 0 , z . <RARE_TOKEN> ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> = Unpooled . EMPTY_BUFFER ; </a> 
<a> } </a> 
<a> } finally { </a> 
<a> z . <RARE_TOKEN> ( ) ; </a> 
<a> z . next_in = null ; </a> 
<a> z . <RARE_TOKEN> = null ; </a> 
<a> } </a> 
<a> } </a> 
<a> ctx . write ( <RARE_TOKEN> , future ) ; </a> 
<a> return future ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ChannelHandlerContext ctx ) throws Exception { </a> 
<a> this . ctx = ctx ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . <RARE_TOKEN> ; </a> 
<a> import io . netty . buffer . ByteBuf ; </a> 
<a> import io . netty . buffer . Unpooled ; </a> 
<a> import io . netty . channel . ChannelFuture ; </a> 
<a> import io . netty . channel . ChannelFutureListener ; </a> 
<a> import io . netty . channel . ChannelHandlerContext ; </a> 
<a> import java . util . concurrent . TimeUnit ; </a> 
<a> import java . util . concurrent . atomic . AtomicBoolean ; </a> 
<a> import java . util . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import java . util . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> private final byte [ ] <RARE_TOKEN> = new byte [ <RARE_TOKEN> ] ; </a> 
<a> private final <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> private final AtomicBoolean <RARE_TOKEN> = new AtomicBoolean ( ) ; </a> 
<a> private volatile ChannelHandlerContext ctx ; </a> 
<a> private final boolean <RARE_TOKEN> ; </a> 
<a> private final <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( ) ; </a> 
<a> private static final byte [ ] <RARE_TOKEN> = { <RARE_TOKEN> , ( byte ) <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> , 0 , 0 , 0 , 0 , 0 , 0 , 0 } ; </a> 
<a> private boolean <RARE_TOKEN> = true ; </a> 
<a> public <RARE_TOKEN> ( ) { </a> 
<a> this ( 6 ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( int compressionLevel ) { </a> 
<a> this ( ZlibWrapper . <RARE_TOKEN> , compressionLevel ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( ZlibWrapper wrapper ) { </a> 
<a> this ( wrapper , 6 ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( ZlibWrapper wrapper , int compressionLevel ) { </a> 
<a> if ( compressionLevel < 0 || compressionLevel > 9 ) { </a> 
<a> throw new IllegalArgumentException ( </a> 
<a> <RARE_TOKEN> " + compressionLevel + " (expected: <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( wrapper == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( wrapper == ZlibWrapper . <RARE_TOKEN> ) { </a> 
<a> throw new IllegalArgumentException ( </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> + ZlibWrapper . <RARE_TOKEN> + <RARE_TOKEN> is not " + </a> 
<a> <RARE_TOKEN> for <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> = wrapper == ZlibWrapper . <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = new <RARE_TOKEN> ( compressionLevel , wrapper != ZlibWrapper . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( byte [ ] dictionary ) { </a> 
<a> this ( 6 , dictionary ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( int compressionLevel , byte [ ] dictionary ) { </a> 
<a> if ( compressionLevel < 0 || compressionLevel > 9 ) { </a> 
<a> throw new IllegalArgumentException ( </a> 
<a> <RARE_TOKEN> " + compressionLevel + " (expected: <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( dictionary == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> = false ; </a> 
<a> <RARE_TOKEN> = new <RARE_TOKEN> ( compressionLevel ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( dictionary ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ChannelFuture close ( ) { </a> 
<a> return close ( ctx ( ) . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ChannelFuture close ( ChannelFuture future ) { </a> 
<a> return <RARE_TOKEN> ( ctx ( ) , future ) ; </a> 
<a> } </a> 
<a> private ChannelHandlerContext ctx ( ) { </a> 
<a> ChannelHandlerContext ctx = this . ctx ; </a> 
<a> if ( ctx == null ) { </a> 
<a> throw new IllegalStateException ( <RARE_TOKEN> <RARE_TOKEN> to a <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> return ctx ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> . get ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void encode ( ChannelHandlerContext ctx , ByteBuf in , ByteBuf out ) throws Exception { </a> 
<a> if ( <RARE_TOKEN> . get ( ) ) { </a> 
<a> out . writeBytes ( in ) ; </a> 
<a> in . <RARE_TOKEN> ( ) ; </a> 
<a> return ; </a> 
<a> } </a> 
<a> ByteBuf <RARE_TOKEN> = in ; </a> 
<a> byte [ ] <RARE_TOKEN> = new byte [ <RARE_TOKEN> . readableBytes ( ) ] ; </a> 
<a> <RARE_TOKEN> . readBytes ( <RARE_TOKEN> ) ; </a> 
<a> int <RARE_TOKEN> = ( int ) Math . <RARE_TOKEN> ( <RARE_TOKEN> . length * <RARE_TOKEN> ) + 12 ; </a> 
<a> out . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> synchronized ( <RARE_TOKEN> ) { </a> 
<a> if ( <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> ) { </a> 
<a> out . writeBytes ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = false ; </a> 
<a> } </a> 
<a> } </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> while ( ! <RARE_TOKEN> . <RARE_TOKEN> ( ) ) { </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> , 0 , <RARE_TOKEN> . length , <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> out . writeBytes ( <RARE_TOKEN> , 0 , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void close ( final ChannelHandlerContext ctx , final ChannelFuture future ) throws Exception { </a> 
<a> ChannelFuture f = <RARE_TOKEN> ( ctx , ctx . <RARE_TOKEN> ( ) ) ; </a> 
<a> f . addListener ( new ChannelFutureListener ( ) { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ChannelFuture f ) throws Exception { </a> 
<a> ctx . close ( future ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> if ( ! f . <RARE_TOKEN> ( ) ) { </a> 
<a> ctx . executor ( ) . schedule ( new Runnable ( ) { </a> 
<a> @ Override </a> 
<a> public void run ( ) { </a> 
<a> ctx . close ( future ) ; </a> 
<a> } </a> 
<a> } , 10 , TimeUnit . SECONDS ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private ChannelFuture <RARE_TOKEN> ( final ChannelHandlerContext ctx , ChannelFuture future ) { </a> 
<a> if ( ! <RARE_TOKEN> . <RARE_TOKEN> ( false , true ) ) { </a> 
<a> future . <RARE_TOKEN> ( ) ; </a> 
<a> return future ; </a> 
<a> } </a> 
<a> ByteBuf <RARE_TOKEN> = Unpooled . buffer ( ) ; </a> 
<a> synchronized ( <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> while ( ! <RARE_TOKEN> . <RARE_TOKEN> ( ) ) { </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> , 0 , <RARE_TOKEN> . length ) ; </a> 
<a> <RARE_TOKEN> . writeBytes ( <RARE_TOKEN> , 0 , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> ) { </a> 
<a> int <RARE_TOKEN> = ( int ) <RARE_TOKEN> . getValue ( ) ; </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> . writeByte ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . writeByte ( <RARE_TOKEN> > > > 8 ) ; </a> 
<a> <RARE_TOKEN> . writeByte ( <RARE_TOKEN> > > > 16 ) ; </a> 
<a> <RARE_TOKEN> . writeByte ( <RARE_TOKEN> > > > 24 ) ; </a> 
<a> <RARE_TOKEN> . writeByte ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . writeByte ( <RARE_TOKEN> > > > 8 ) ; </a> 
<a> <RARE_TOKEN> . writeByte ( <RARE_TOKEN> > > > 16 ) ; </a> 
<a> <RARE_TOKEN> . writeByte ( <RARE_TOKEN> > > > 24 ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> . end ( ) ; </a> 
<a> } </a> 
<a> ctx . <RARE_TOKEN> ( ) . writeBytes ( <RARE_TOKEN> ) ; </a> 
<a> ctx . flush ( future ) ; </a> 
<a> return future ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ChannelHandlerContext ctx ) throws Exception { </a> 
<a> this . ctx = ctx ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . <RARE_TOKEN> ; </a> 
<a> import io . netty . util . internal . <RARE_TOKEN> ; </a> 
<a> public final class <RARE_TOKEN> { </a> 
<a> public static <RARE_TOKEN> <RARE_TOKEN> ( int compressionLevel ) { </a> 
<a> if ( <RARE_TOKEN> . <RARE_TOKEN> ( ) < 7 ) { </a> 
<a> return new <RARE_TOKEN> ( compressionLevel ) ; </a> 
<a> } else { </a> 
<a> return new <RARE_TOKEN> ( compressionLevel ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public static <RARE_TOKEN> <RARE_TOKEN> ( ZlibWrapper wrapper ) { </a> 
<a> if ( <RARE_TOKEN> . <RARE_TOKEN> ( ) < 7 ) { </a> 
<a> return new <RARE_TOKEN> ( wrapper ) ; </a> 
<a> } else { </a> 
<a> return new <RARE_TOKEN> ( wrapper ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public static <RARE_TOKEN> <RARE_TOKEN> ( ZlibWrapper wrapper , int compressionLevel ) { </a> 
<a> if ( <RARE_TOKEN> . <RARE_TOKEN> ( ) < 7 ) { </a> 
<a> return new <RARE_TOKEN> ( wrapper , compressionLevel ) ; </a> 
<a> } else { </a> 
<a> return new <RARE_TOKEN> ( wrapper , compressionLevel ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public static <RARE_TOKEN> <RARE_TOKEN> ( ZlibWrapper wrapper , int compressionLevel , int windowBits , int memLevel ) { </a> 
<a> if ( <RARE_TOKEN> . <RARE_TOKEN> ( ) < 7 ) { </a> 
<a> return new <RARE_TOKEN> ( wrapper , compressionLevel , windowBits , memLevel ) ; </a> 
<a> } else { </a> 
<a> return new <RARE_TOKEN> ( wrapper , compressionLevel ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public static <RARE_TOKEN> <RARE_TOKEN> ( byte [ ] dictionary ) { </a> 
<a> if ( <RARE_TOKEN> . <RARE_TOKEN> ( ) < 7 ) { </a> 
<a> return new <RARE_TOKEN> ( dictionary ) ; </a> 
<a> } else { </a> 
<a> return new <RARE_TOKEN> ( dictionary ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public static <RARE_TOKEN> <RARE_TOKEN> ( int compressionLevel , byte [ ] dictionary ) { </a> 
<a> if ( <RARE_TOKEN> . <RARE_TOKEN> ( ) < 7 ) { </a> 
<a> return new <RARE_TOKEN> ( compressionLevel , dictionary ) ; </a> 
<a> } else { </a> 
<a> return new <RARE_TOKEN> ( compressionLevel , dictionary ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public static <RARE_TOKEN> <RARE_TOKEN> ( int compressionLevel , int windowBits , int memLevel , byte [ ] dictionary ) { </a> 
<a> if ( <RARE_TOKEN> . <RARE_TOKEN> ( ) < 7 ) { </a> 
<a> return new <RARE_TOKEN> ( compressionLevel , windowBits , memLevel , dictionary ) ; </a> 
<a> } else { </a> 
<a> return new <RARE_TOKEN> ( compressionLevel , dictionary ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public static <RARE_TOKEN> <RARE_TOKEN> ( ) { </a> 
<a> return new <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> public static <RARE_TOKEN> <RARE_TOKEN> ( ZlibWrapper wrapper ) { </a> 
<a> return new <RARE_TOKEN> ( wrapper ) ; </a> 
<a> } </a> 
<a> public static <RARE_TOKEN> <RARE_TOKEN> ( byte [ ] dictionary ) { </a> 
<a> return new <RARE_TOKEN> ( dictionary ) ; </a> 
<a> } </a> 
<a> private <RARE_TOKEN> ( ) { </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . <RARE_TOKEN> ; </a> 
<a> import io . netty . buffer . ByteBuf ; </a> 
<a> import io . netty . handler . codec . <RARE_TOKEN> ; </a> 
<a> public abstract class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> public abstract boolean <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . <RARE_TOKEN> ; </a> 
<a> import io . netty . util . internal . <RARE_TOKEN> . JZlib ; </a> 
<a> import io . netty . util . internal . <RARE_TOKEN> . ZStream ; </a> 
<a> final class <RARE_TOKEN> { </a> 
<a> static void fail ( ZStream z , String message , int resultCode ) { </a> 
<a> throw exception ( z , message , resultCode ) ; </a> 
<a> } </a> 
<a> static <RARE_TOKEN> exception ( ZStream z , String message , int resultCode ) { </a> 
<a> return new <RARE_TOKEN> ( message + " <RARE_TOKEN> + resultCode + <RARE_TOKEN> + </a> 
<a> ( z . msg != null ? <RARE_TOKEN> " + z . msg : "" ) ) ; </a> 
<a> } </a> 
<a> static <RARE_TOKEN> < ? > <RARE_TOKEN> ( ZlibWrapper wrapper ) { </a> 
<a> <RARE_TOKEN> < ? > <RARE_TOKEN> ; </a> 
<a> switch ( wrapper ) { </a> 
<a> case <RARE_TOKEN> : </a> 
<a> <RARE_TOKEN> = JZlib . <RARE_TOKEN> ; </a> 
<a> break ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> <RARE_TOKEN> = JZlib . <RARE_TOKEN> ; </a> 
<a> break ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> <RARE_TOKEN> = JZlib . <RARE_TOKEN> ; </a> 
<a> break ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> <RARE_TOKEN> = JZlib . <RARE_TOKEN> ; </a> 
<a> break ; </a> 
<a> default : </a> 
<a> throw new Error ( ) ; </a> 
<a> } </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> private <RARE_TOKEN> ( ) { </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . <RARE_TOKEN> ; </a> 
<a> public enum ZlibWrapper { </a> 
<a> <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . <RARE_TOKEN> ; </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . marshalling ; </a> 
<a> import io . netty . buffer . ByteBuf ; </a> 
<a> import java . io . IOException ; </a> 
<a> import org . jboss . marshalling . <RARE_TOKEN> ; </a> 
<a> class <RARE_TOKEN> implements <RARE_TOKEN> { </a> 
<a> private final ByteBuf buffer ; </a> 
<a> public <RARE_TOKEN> ( ByteBuf buffer ) { </a> 
<a> this . buffer = buffer ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void close ( ) throws IOException { </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int <RARE_TOKEN> ( ) throws IOException { </a> 
<a> return buffer . readableBytes ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int read ( ) throws IOException { </a> 
<a> if ( buffer . readable ( ) ) { </a> 
<a> return buffer . <RARE_TOKEN> ( ) & 0xff ; </a> 
<a> } </a> 
<a> return - 1 ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int read ( byte [ ] array ) throws IOException { </a> 
<a> return read ( array , 0 , array . length ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int read ( byte [ ] dst , int dstIndex , int length ) throws IOException { </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> ( ) ; </a> 
<a> if ( <RARE_TOKEN> == 0 ) { </a> 
<a> return - 1 ; </a> 
<a> } </a> 
<a> length = Math . min ( <RARE_TOKEN> , length ) ; </a> 
<a> buffer . readBytes ( dst , dstIndex , length ) ; </a> 
<a> return length ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public long <RARE_TOKEN> ( long bytes ) throws IOException { </a> 
<a> int readable = buffer . readableBytes ( ) ; </a> 
<a> if ( readable < bytes ) { </a> 
<a> bytes = readable ; </a> 
<a> } </a> 
<a> buffer . readerIndex ( ( int ) ( buffer . readerIndex ( ) + bytes ) ) ; </a> 
<a> return bytes ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . marshalling ; </a> 
<a> import io . netty . buffer . ByteBuf ; </a> 
<a> import java . io . IOException ; </a> 
<a> import org . jboss . marshalling . <RARE_TOKEN> ; </a> 
<a> class <RARE_TOKEN> implements <RARE_TOKEN> { </a> 
<a> private final ByteBuf buffer ; </a> 
<a> public <RARE_TOKEN> ( ByteBuf buffer ) { </a> 
<a> this . buffer = buffer ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void close ( ) throws IOException { </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void flush ( ) throws IOException { </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void write ( int b ) throws IOException { </a> 
<a> buffer . writeByte ( b ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void write ( byte [ ] bytes ) throws IOException { </a> 
<a> buffer . writeBytes ( bytes ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void write ( byte [ ] bytes , int srcIndex , int length ) throws IOException { </a> 
<a> buffer . writeBytes ( bytes , srcIndex , length ) ; </a> 
<a> } </a> 
<a> public ByteBuf <RARE_TOKEN> ( ) { </a> 
<a> return buffer ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . marshalling ; </a> 
<a> import io . netty . buffer . ByteBuf ; </a> 
<a> import io . netty . channel . Channel ; </a> 
<a> import io . netty . channel . ChannelHandlerContext ; </a> 
<a> import io . netty . handler . codec . <RARE_TOKEN> ; </a> 
<a> import io . netty . handler . codec . TooLongFrameException ; </a> 
<a> import java . io . <RARE_TOKEN> ; </a> 
<a> import org . jboss . marshalling . <RARE_TOKEN> ; </a> 
<a> import org . jboss . marshalling . <RARE_TOKEN> ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> < Object , Void > { </a> 
<a> protected final <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> protected final int <RARE_TOKEN> ; </a> 
<a> public <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> , int <RARE_TOKEN> ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public Object decode ( ChannelHandlerContext ctx , ByteBuf buffer ) throws Exception { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( ctx ) ; </a> 
<a> <RARE_TOKEN> input = new <RARE_TOKEN> ( buffer ) ; </a> 
<a> if ( <RARE_TOKEN> != Integer . MAX_VALUE ) { </a> 
<a> input = new <RARE_TOKEN> ( input , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> try { </a> 
<a> <RARE_TOKEN> . start ( input ) ; </a> 
<a> Object obj = <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> return obj ; </a> 
<a> } catch ( <RARE_TOKEN> . <RARE_TOKEN> e ) { </a> 
<a> throw new TooLongFrameException ( <RARE_TOKEN> to <RARE_TOKEN> to <RARE_TOKEN> ) ; </a> 
<a> } finally { </a> 
<a> <RARE_TOKEN> . close ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public Object <RARE_TOKEN> ( ChannelHandlerContext ctx , ByteBuf buffer ) throws Exception { </a> 
<a> switch ( buffer . readableBytes ( ) ) { </a> 
<a> case 0 : </a> 
<a> return null ; </a> 
<a> case 1 : </a> 
<a> if ( buffer . getByte ( buffer . readerIndex ( ) ) == <RARE_TOKEN> . <RARE_TOKEN> ) { </a> 
<a> buffer . skipBytes ( 1 ) ; </a> 
<a> return null ; </a> 
<a> } </a> 
<a> } </a> 
<a> return decode ( ctx , buffer ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void exceptionCaught ( ChannelHandlerContext ctx , Throwable cause ) throws Exception { </a> 
<a> if ( cause instanceof TooLongFrameException ) { </a> 
<a> ctx . close ( ) ; </a> 
<a> } else { </a> 
<a> super . exceptionCaught ( ctx , cause ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . marshalling ; </a> 
<a> import io . netty . buffer . ByteBuf ; </a> 
<a> import io . netty . channel . Channel ; </a> 
<a> import io . netty . channel . ChannelHandler . Sharable ; </a> 
<a> import io . netty . channel . ChannelHandlerContext ; </a> 
<a> import io . netty . handler . codec . <RARE_TOKEN> ; </a> 
<a> import org . jboss . marshalling . <RARE_TOKEN> ; </a> 
<a> @ Sharable </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> < Object > { </a> 
<a> private final <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> public <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void encode ( ChannelHandlerContext ctx , Object msg , ByteBuf out ) throws Exception { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( ctx ) ; </a> 
<a> <RARE_TOKEN> . start ( new <RARE_TOKEN> ( out ) ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( msg ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> . close ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . marshalling ; </a> 
<a> import io . netty . channel . Channel ; </a> 
<a> import io . netty . channel . ChannelHandler ; </a> 
<a> import io . netty . channel . ChannelHandlerContext ; </a> 
<a> import io . netty . util . <RARE_TOKEN> ; </a> 
<a> import io . netty . util . <RARE_TOKEN> ; </a> 
<a> import org . jboss . marshalling . MarshallerFactory ; </a> 
<a> import org . jboss . marshalling . MarshallingConfiguration ; </a> 
<a> import org . jboss . marshalling . <RARE_TOKEN> ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> private static final <RARE_TOKEN> < <RARE_TOKEN> > <RARE_TOKEN> = new <RARE_TOKEN> < <RARE_TOKEN> > ( </a> 
<a> <RARE_TOKEN> . class . getName ( ) + <RARE_TOKEN> ) ; </a> 
<a> public <RARE_TOKEN> ( MarshallerFactory factory , MarshallingConfiguration config ) { </a> 
<a> super ( factory , config ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public <RARE_TOKEN> <RARE_TOKEN> ( ChannelHandlerContext ctx ) throws Exception { </a> 
<a> <RARE_TOKEN> < <RARE_TOKEN> > <RARE_TOKEN> = ctx . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = <RARE_TOKEN> . get ( ) ; </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> <RARE_TOKEN> = super . <RARE_TOKEN> ( ctx ) ; </a> 
<a> <RARE_TOKEN> . set ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . marshalling ; </a> 
<a> import io . netty . channel . ChannelHandlerContext ; </a> 
<a> import org . jboss . marshalling . MarshallerFactory ; </a> 
<a> import org . jboss . marshalling . MarshallingConfiguration ; </a> 
<a> import org . jboss . marshalling . <RARE_TOKEN> ; </a> 
<a> public class <RARE_TOKEN> implements <RARE_TOKEN> { </a> 
<a> private final MarshallerFactory factory ; </a> 
<a> private final MarshallingConfiguration config ; </a> 
<a> public <RARE_TOKEN> ( MarshallerFactory factory , MarshallingConfiguration config ) { </a> 
<a> this . factory = factory ; </a> 
<a> this . config = config ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public <RARE_TOKEN> <RARE_TOKEN> ( ChannelHandlerContext ctx ) throws Exception { </a> 
<a> return factory . <RARE_TOKEN> ( config ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . marshalling ; </a> 
<a> import java . io . IOException ; </a> 
<a> import org . jboss . marshalling . <RARE_TOKEN> ; </a> 
<a> class <RARE_TOKEN> implements <RARE_TOKEN> { </a> 
<a> private static final <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( ) ; </a> 
<a> private final <RARE_TOKEN> input ; </a> 
<a> private final long limit ; </a> 
<a> private long read ; </a> 
<a> public <RARE_TOKEN> ( <RARE_TOKEN> input , long limit ) { </a> 
<a> if ( limit <= 0 ) { </a> 
<a> throw new IllegalArgumentException ( <RARE_TOKEN> limit <RARE_TOKEN> be > <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> this . input = input ; </a> 
<a> this . limit = limit ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void close ( ) throws IOException { </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int <RARE_TOKEN> ( ) throws IOException { </a> 
<a> return readable ( input . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int read ( ) throws IOException { </a> 
<a> int readable = readable ( 1 ) ; </a> 
<a> if ( readable > 0 ) { </a> 
<a> int b = input . read ( ) ; </a> 
<a> read ++ ; </a> 
<a> return b ; </a> 
<a> } else { </a> 
<a> throw <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int read ( byte [ ] array ) throws IOException { </a> 
<a> return read ( array , 0 , array . length ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int read ( byte [ ] array , int offset , int length ) throws IOException { </a> 
<a> int readable = readable ( length ) ; </a> 
<a> if ( readable > 0 ) { </a> 
<a> int i = input . read ( array , offset , readable ) ; </a> 
<a> read += i ; </a> 
<a> return i ; </a> 
<a> } else { </a> 
<a> throw <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public long <RARE_TOKEN> ( long bytes ) throws IOException { </a> 
<a> int readable = readable ( ( int ) bytes ) ; </a> 
<a> if ( readable > 0 ) { </a> 
<a> long i = input . <RARE_TOKEN> ( readable ) ; </a> 
<a> read += i ; </a> 
<a> return i ; </a> 
<a> } else { </a> 
<a> throw <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<a> private int readable ( int length ) { </a> 
<a> return ( int ) Math . min ( length , limit - read ) ; </a> 
<a> } </a> 
<a> static final class <RARE_TOKEN> extends IOException { </a> 
<a> private static final long serialVersionUID = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . marshalling ; </a> 
<a> import io . netty . channel . ChannelHandlerContext ; </a> 
<a> import org . jboss . marshalling . <RARE_TOKEN> ; </a> 
<a> public interface <RARE_TOKEN> { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> ( ChannelHandlerContext ctx ) throws Exception ; </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . marshalling ; </a> 
<a> import io . netty . buffer . ByteBuf ; </a> 
<a> import io . netty . channel . ChannelHandler . Sharable ; </a> 
<a> import io . netty . channel . ChannelHandlerContext ; </a> 
<a> import io . netty . handler . codec . <RARE_TOKEN> ; </a> 
<a> import org . jboss . marshalling . <RARE_TOKEN> ; </a> 
<a> @ Sharable </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> < Object > { </a> 
<a> private static final byte [ ] <RARE_TOKEN> = new byte [ 4 ] ; </a> 
<a> private final <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> public <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void encode ( ChannelHandlerContext ctx , Object msg , ByteBuf out ) throws Exception { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( ctx ) ; </a> 
<a> int <RARE_TOKEN> = out . writerIndex ( ) ; </a> 
<a> out . writeBytes ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> output = new <RARE_TOKEN> ( out ) ; </a> 
<a> <RARE_TOKEN> . start ( output ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( msg ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> . close ( ) ; </a> 
<a> out . <RARE_TOKEN> ( <RARE_TOKEN> , out . writerIndex ( ) - <RARE_TOKEN> - 4 ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . marshalling ; </a> 
<a> import io . netty . channel . ChannelHandlerContext ; </a> 
<a> import org . jboss . marshalling . MarshallerFactory ; </a> 
<a> import org . jboss . marshalling . MarshallingConfiguration ; </a> 
<a> import org . jboss . marshalling . <RARE_TOKEN> ; </a> 
<a> public class <RARE_TOKEN> implements <RARE_TOKEN> { </a> 
<a> private final <RARE_TOKEN> < <RARE_TOKEN> > <RARE_TOKEN> = new <RARE_TOKEN> < <RARE_TOKEN> > ( ) ; </a> 
<a> private final MarshallerFactory factory ; </a> 
<a> private final MarshallingConfiguration config ; </a> 
<a> public <RARE_TOKEN> ( MarshallerFactory factory , MarshallingConfiguration config ) { </a> 
<a> this . factory = factory ; </a> 
<a> this . config = config ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public <RARE_TOKEN> <RARE_TOKEN> ( ChannelHandlerContext ctx ) throws Exception { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = <RARE_TOKEN> . get ( ) ; </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> <RARE_TOKEN> = factory . <RARE_TOKEN> ( config ) ; </a> 
<a> <RARE_TOKEN> . set ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . marshalling ; </a> 
<a> import io . netty . channel . ChannelHandlerContext ; </a> 
<a> import org . jboss . marshalling . <RARE_TOKEN> ; </a> 
<a> public interface <RARE_TOKEN> { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> ( ChannelHandlerContext ctx ) throws Exception ; </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . marshalling ; </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . protobuf ; </a> 
<a> import io . netty . buffer . ByteBuf ; </a> 
<a> import io . netty . buffer . <RARE_TOKEN> ; </a> 
<a> import io . netty . channel . ChannelHandler . Sharable ; </a> 
<a> import io . netty . channel . ChannelHandlerContext ; </a> 
<a> import io . netty . channel . ChannelPipeline ; </a> 
<a> import io . netty . handler . codec . <RARE_TOKEN> ; </a> 
<a> import io . netty . handler . codec . <RARE_TOKEN> ; </a> 
<a> import io . netty . handler . codec . <RARE_TOKEN> ; </a> 
<a> import com . google . protobuf . <RARE_TOKEN> ; </a> 
<a> import com . google . protobuf . <RARE_TOKEN> ; </a> 
<a> import com . google . protobuf . <RARE_TOKEN> ; </a> 
<a> @ Sharable </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> < ByteBuf , <RARE_TOKEN> > { </a> 
<a> private final <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> private final <RARE_TOKEN> extensionRegistry ; </a> 
<a> public <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> this ( <RARE_TOKEN> , null ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> , <RARE_TOKEN> extensionRegistry ) { </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> this . extensionRegistry = extensionRegistry ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( Object msg ) throws Exception { </a> 
<a> return msg instanceof ByteBuf ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public <RARE_TOKEN> decode ( ChannelHandlerContext ctx , ByteBuf msg ) throws Exception { </a> 
<a> if ( msg . <RARE_TOKEN> ( ) ) { </a> 
<a> final int offset = msg . readerIndex ( ) ; </a> 
<a> if ( extensionRegistry == null ) { </a> 
<a> return <RARE_TOKEN> . <RARE_TOKEN> ( ) . mergeFrom ( </a> 
<a> msg . array ( ) , msg . <RARE_TOKEN> ( ) + offset , msg . readableBytes ( ) ) . build ( ) ; </a> 
<a> } else { </a> 
<a> return <RARE_TOKEN> . <RARE_TOKEN> ( ) . mergeFrom ( </a> 
<a> msg . array ( ) , msg . <RARE_TOKEN> ( ) + offset , msg . readableBytes ( ) , extensionRegistry ) . build ( ) ; </a> 
<a> } </a> 
<a> } else { </a> 
<a> if ( extensionRegistry == null ) { </a> 
<a> return <RARE_TOKEN> . <RARE_TOKEN> ( ) . mergeFrom ( </a> 
<a> new <RARE_TOKEN> ( msg ) ) . build ( ) ; </a> 
<a> } else { </a> 
<a> return <RARE_TOKEN> . <RARE_TOKEN> ( ) . mergeFrom ( </a> 
<a> new <RARE_TOKEN> ( msg ) , extensionRegistry ) . build ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . protobuf ; </a> 
<a> import static io . netty . buffer . Unpooled . * ; </a> 
<a> import io . netty . buffer . ByteBuf ; </a> 
<a> import io . netty . channel . ChannelHandler . Sharable ; </a> 
<a> import io . netty . channel . ChannelHandlerContext ; </a> 
<a> import io . netty . channel . ChannelPipeline ; </a> 
<a> import io . netty . handler . codec . <RARE_TOKEN> ; </a> 
<a> import io . netty . handler . codec . <RARE_TOKEN> ; </a> 
<a> import io . netty . handler . codec . <RARE_TOKEN> ; </a> 
<a> import com . google . protobuf . <RARE_TOKEN> ; </a> 
<a> import com . google . protobuf . <RARE_TOKEN> ; </a> 
<a> @ Sharable </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> < Object , ByteBuf > { </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( Object msg ) throws Exception { </a> 
<a> return msg instanceof <RARE_TOKEN> || msg instanceof <RARE_TOKEN> . Builder ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ByteBuf encode ( ChannelHandlerContext ctx , Object msg ) throws Exception { </a> 
<a> if ( msg instanceof <RARE_TOKEN> ) { </a> 
<a> return wrappedBuffer ( ( ( <RARE_TOKEN> ) msg ) . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> if ( msg instanceof <RARE_TOKEN> . Builder ) { </a> 
<a> return wrappedBuffer ( ( ( <RARE_TOKEN> . Builder ) msg ) . build ( ) . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> return null ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . protobuf ; </a> 
<a> import io . netty . buffer . ByteBuf ; </a> 
<a> import io . netty . channel . ChannelHandlerContext ; </a> 
<a> import io . netty . handler . codec . <RARE_TOKEN> ; </a> 
<a> import io . netty . handler . codec . <RARE_TOKEN> ; </a> 
<a> import com . google . protobuf . <RARE_TOKEN> ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> < Object > { </a> 
<a> public <RARE_TOKEN> ( ) { </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public Object decode ( ChannelHandlerContext ctx , ByteBuf in ) throws Exception { </a> 
<a> in . <RARE_TOKEN> ( ) ; </a> 
<a> final byte [ ] buf = new byte [ 5 ] ; </a> 
<a> for ( int i = 0 ; i < buf . length ; i ++ ) { </a> 
<a> if ( ! in . readable ( ) ) { </a> 
<a> in . <RARE_TOKEN> ( ) ; </a> 
<a> return null ; </a> 
<a> } </a> 
<a> buf [ i ] = in . <RARE_TOKEN> ( ) ; </a> 
<a> if ( buf [ i ] >= 0 ) { </a> 
<a> int length = <RARE_TOKEN> . newInstance ( buf , 0 , i + 1 ) . <RARE_TOKEN> ( ) ; </a> 
<a> if ( length < 0 ) { </a> 
<a> throw new <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> " + length ) ; </a> 
<a> } </a> 
<a> if ( in . readableBytes ( ) < length ) { </a> 
<a> in . <RARE_TOKEN> ( ) ; </a> 
<a> return null ; </a> 
<a> } else { </a> 
<a> return in . readBytes ( length ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> throw new <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . protobuf ; </a> 
<a> import io . netty . buffer . ByteBuf ; </a> 
<a> import io . netty . buffer . <RARE_TOKEN> ; </a> 
<a> import io . netty . channel . ChannelHandler . Sharable ; </a> 
<a> import io . netty . channel . ChannelHandlerContext ; </a> 
<a> import io . netty . handler . codec . <RARE_TOKEN> ; </a> 
<a> import com . google . protobuf . <RARE_TOKEN> ; </a> 
<a> @ Sharable </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> < ByteBuf > { </a> 
<a> public <RARE_TOKEN> ( ) { </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( Object msg ) throws Exception { </a> 
<a> return msg instanceof ByteBuf ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void encode ( </a> 
<a> ChannelHandlerContext ctx , ByteBuf msg , ByteBuf out ) throws Exception { </a> 
<a> int <RARE_TOKEN> = msg . readableBytes ( ) ; </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> out . <RARE_TOKEN> ( <RARE_TOKEN> + <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = </a> 
<a> <RARE_TOKEN> . newInstance ( new <RARE_TOKEN> ( out ) ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . flush ( ) ; </a> 
<a> out . writeBytes ( msg , msg . readerIndex ( ) , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . protobuf ; </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . <RARE_TOKEN> ; </a> 
<a> import java . util . Map ; </a> 
<a> class <RARE_TOKEN> implements <RARE_TOKEN> { </a> 
<a> private final Map < String , Class < ? > > <RARE_TOKEN> ; </a> 
<a> private final <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> , Map < String , Class < ? > > <RARE_TOKEN> ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public Class < ? > <RARE_TOKEN> ( String <RARE_TOKEN> ) throws <RARE_TOKEN> { </a> 
<a> Class < ? > clazz ; </a> 
<a> clazz = <RARE_TOKEN> . get ( <RARE_TOKEN> ) ; </a> 
<a> if ( clazz != null ) { </a> 
<a> return clazz ; </a> 
<a> } </a> 
<a> clazz = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . put ( <RARE_TOKEN> , clazz ) ; </a> 
<a> return clazz ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . <RARE_TOKEN> ; </a> 
<a> class <RARE_TOKEN> implements <RARE_TOKEN> { </a> 
<a> private final <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public Class < ? > <RARE_TOKEN> ( String <RARE_TOKEN> ) throws <RARE_TOKEN> { </a> 
<a> try { </a> 
<a> return <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } catch ( <RARE_TOKEN> e ) { </a> 
<a> return Class . <RARE_TOKEN> ( <RARE_TOKEN> , false , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . <RARE_TOKEN> ; </a> 
<a> public interface <RARE_TOKEN> { </a> 
<a> Class < ? > <RARE_TOKEN> ( String <RARE_TOKEN> ) throws <RARE_TOKEN> ; </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . <RARE_TOKEN> ; </a> 
<a> import java . lang . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import java . util . HashMap ; </a> 
<a> import java . util . concurrent . ConcurrentHashMap ; </a> 
<a> public final class <RARE_TOKEN> { </a> 
<a> public static <RARE_TOKEN> <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> return new <RARE_TOKEN> ( <RARE_TOKEN> ( <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> public static <RARE_TOKEN> <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> return new <RARE_TOKEN> ( </a> 
<a> new <RARE_TOKEN> ( <RARE_TOKEN> ( <RARE_TOKEN> ) ) , </a> 
<a> new <RARE_TOKEN> < String , Class < ? > > ( new HashMap < String , <RARE_TOKEN> < Class < ? > > > ( ) ) ) ; </a> 
<a> } </a> 
<a> public static <RARE_TOKEN> <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> return new <RARE_TOKEN> ( </a> 
<a> new <RARE_TOKEN> ( <RARE_TOKEN> ( <RARE_TOKEN> ) ) , </a> 
<a> new <RARE_TOKEN> < String , Class < ? > > ( new HashMap < String , <RARE_TOKEN> < Class < ? > > > ( ) ) ) ; </a> 
<a> } </a> 
<a> public static <RARE_TOKEN> <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> return new <RARE_TOKEN> ( </a> 
<a> new <RARE_TOKEN> ( <RARE_TOKEN> ( <RARE_TOKEN> ) ) , </a> 
<a> new <RARE_TOKEN> < String , Class < ? > > ( new ConcurrentHashMap < String , <RARE_TOKEN> < Class < ? > > > ( ) ) ) ; </a> 
<a> } </a> 
<a> public static <RARE_TOKEN> <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> return new <RARE_TOKEN> ( </a> 
<a> new <RARE_TOKEN> ( <RARE_TOKEN> ( <RARE_TOKEN> ) ) , </a> 
<a> new <RARE_TOKEN> < String , Class < ? > > ( new ConcurrentHashMap < String , <RARE_TOKEN> < Class < ? > > > ( ) ) ) ; </a> 
<a> } </a> 
<a> static <RARE_TOKEN> <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> final <RARE_TOKEN> <RARE_TOKEN> = Thread . currentThread ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> return <RARE_TOKEN> . class . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> private <RARE_TOKEN> ( ) { </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . <RARE_TOKEN> ; </a> 
<a> import java . io . IOException ; </a> 
<a> import java . io . <RARE_TOKEN> ; </a> 
<a> import java . io . <RARE_TOKEN> ; </a> 
<a> import java . io . OutputStream ; </a> 
<a> class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> static final int <RARE_TOKEN> = 0 ; </a> 
<a> static final int <RARE_TOKEN> = 1 ; </a> 
<a> <RARE_TOKEN> ( OutputStream out ) throws IOException { </a> 
<a> super ( out ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( ) throws IOException { </a> 
<a> writeByte ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> ) throws IOException { </a> 
<a> Class < ? > clazz = <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> if ( clazz . <RARE_TOKEN> ( ) || clazz . <RARE_TOKEN> ( ) || clazz . <RARE_TOKEN> ( ) || </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) == 0 ) { </a> 
<a> write ( <RARE_TOKEN> ) ; </a> 
<a> super . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } else { </a> 
<a> write ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> . getName ( ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . <RARE_TOKEN> ; </a> 
<a> import io . netty . buffer . ByteBuf ; </a> 
<a> import io . netty . buffer . <RARE_TOKEN> ; </a> 
<a> import io . netty . channel . ChannelHandlerContext ; </a> 
<a> import io . netty . handler . codec . <RARE_TOKEN> ; </a> 
<a> import io . netty . util . <RARE_TOKEN> ; </a> 
<a> import io . netty . util . <RARE_TOKEN> ; </a> 
<a> import java . io . <RARE_TOKEN> ; </a> 
<a> import java . io . <RARE_TOKEN> ; </a> 
<a> import java . io . OutputStream ; </a> 
<a> import java . io . Serializable ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> < Object > { </a> 
<a> private static final <RARE_TOKEN> < <RARE_TOKEN> > <RARE_TOKEN> = </a> 
<a> new <RARE_TOKEN> < <RARE_TOKEN> > ( <RARE_TOKEN> . class . getName ( ) + <RARE_TOKEN> ) ; </a> 
<a> private final int <RARE_TOKEN> ; </a> 
<a> private int <RARE_TOKEN> ; </a> 
<a> public <RARE_TOKEN> ( ) { </a> 
<a> this ( 16 ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( int <RARE_TOKEN> ) { </a> 
<a> if ( <RARE_TOKEN> < 0 ) { </a> 
<a> throw new IllegalArgumentException ( </a> 
<a> <RARE_TOKEN> " + <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> protected <RARE_TOKEN> <RARE_TOKEN> ( OutputStream out ) throws Exception { </a> 
<a> return new <RARE_TOKEN> ( out ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( Object msg ) throws Exception { </a> 
<a> return msg instanceof Serializable ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void encode ( ChannelHandlerContext ctx , Object msg , ByteBuf out ) throws Exception { </a> 
<a> <RARE_TOKEN> < <RARE_TOKEN> > <RARE_TOKEN> = ctx . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = <RARE_TOKEN> . get ( ) ; </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ( new <RARE_TOKEN> ( out ) ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<a> synchronized ( <RARE_TOKEN> ) { </a> 
<a> if ( <RARE_TOKEN> != 0 ) { </a> 
<a> <RARE_TOKEN> ++ ; </a> 
<a> if ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> == 0 ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> out . unsafe ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( msg ) ; </a> 
<a> <RARE_TOKEN> . flush ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . <RARE_TOKEN> ; </a> 
<a> import java . io . <RARE_TOKEN> ; </a> 
<a> import java . io . <RARE_TOKEN> ; </a> 
<a> import java . io . IOException ; </a> 
<a> import java . io . InputStream ; </a> 
<a> import java . io . <RARE_TOKEN> ; </a> 
<a> import java . io . <RARE_TOKEN> ; </a> 
<a> public class <RARE_TOKEN> extends InputStream implements </a> 
<a> <RARE_TOKEN> { </a> 
<a> private final <RARE_TOKEN> in ; </a> 
<a> private final int <RARE_TOKEN> ; </a> 
<a> private final <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> public <RARE_TOKEN> ( InputStream in ) { </a> 
<a> this ( in , null ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( InputStream in , <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> this ( in , <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( InputStream in , int <RARE_TOKEN> ) { </a> 
<a> this ( in , null , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( InputStream in , <RARE_TOKEN> <RARE_TOKEN> , int <RARE_TOKEN> ) { </a> 
<a> if ( in == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> <= 0 ) { </a> 
<a> throw new IllegalArgumentException ( <RARE_TOKEN> " + <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( in instanceof <RARE_TOKEN> ) { </a> 
<a> this . in = ( <RARE_TOKEN> ) in ; </a> 
<a> } else { </a> 
<a> this . in = new <RARE_TOKEN> ( in ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public Object <RARE_TOKEN> ( ) throws <RARE_TOKEN> , IOException { </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> ( ) ; </a> 
<a> if ( <RARE_TOKEN> <= 0 ) { </a> 
<a> throw new <RARE_TOKEN> ( <RARE_TOKEN> data <RARE_TOKEN> " + <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> > <RARE_TOKEN> ) { </a> 
<a> throw new <RARE_TOKEN> ( </a> 
<a> <RARE_TOKEN> length <RARE_TOKEN> <RARE_TOKEN> " + <RARE_TOKEN> + " <RARE_TOKEN> " + <RARE_TOKEN> + <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> return new <RARE_TOKEN> ( in , <RARE_TOKEN> ) . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int <RARE_TOKEN> ( ) throws IOException { </a> 
<a> return in . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void close ( ) throws IOException { </a> 
<a> in . close ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( int <RARE_TOKEN> ) { </a> 
<a> in . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return in . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int read ( ) throws IOException { </a> 
<a> return in . read ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public final int read ( byte [ ] b , int off , int len ) throws IOException { </a> 
<a> return in . read ( b , off , len ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public final int read ( byte [ ] b ) throws IOException { </a> 
<a> return in . read ( b ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public final boolean <RARE_TOKEN> ( ) throws IOException { </a> 
<a> return in . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public final byte <RARE_TOKEN> ( ) throws IOException { </a> 
<a> return in . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public final char <RARE_TOKEN> ( ) throws IOException { </a> 
<a> return in . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public final double <RARE_TOKEN> ( ) throws IOException { </a> 
<a> return in . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public final float <RARE_TOKEN> ( ) throws IOException { </a> 
<a> return in . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public final void <RARE_TOKEN> ( byte [ ] b , int off , int len ) throws IOException { </a> 
<a> in . <RARE_TOKEN> ( b , off , len ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public final void <RARE_TOKEN> ( byte [ ] b ) throws IOException { </a> 
<a> in . <RARE_TOKEN> ( b ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public final int <RARE_TOKEN> ( ) throws IOException { </a> 
<a> return in . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> @ Deprecated </a> 
<a> public final String <RARE_TOKEN> ( ) throws IOException { </a> 
<a> return in . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public final long <RARE_TOKEN> ( ) throws IOException { </a> 
<a> return in . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public final short <RARE_TOKEN> ( ) throws IOException { </a> 
<a> return in . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public final int <RARE_TOKEN> ( ) throws IOException { </a> 
<a> return in . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public final int <RARE_TOKEN> ( ) throws IOException { </a> 
<a> return in . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public final String <RARE_TOKEN> ( ) throws IOException { </a> 
<a> return in . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ) throws IOException { </a> 
<a> in . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public long <RARE_TOKEN> ( long n ) throws IOException { </a> 
<a> return in . <RARE_TOKEN> ( n ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public final int skipBytes ( int n ) throws IOException { </a> 
<a> return in . skipBytes ( n ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . <RARE_TOKEN> ; </a> 
<a> import io . netty . buffer . ByteBuf ; </a> 
<a> import io . netty . buffer . <RARE_TOKEN> ; </a> 
<a> import io . netty . channel . ChannelHandler . Sharable ; </a> 
<a> import io . netty . channel . ChannelHandlerContext ; </a> 
<a> import io . netty . handler . codec . <RARE_TOKEN> ; </a> 
<a> import java . io . <RARE_TOKEN> ; </a> 
<a> import java . io . <RARE_TOKEN> ; </a> 
<a> import java . io . Serializable ; </a> 
<a> @ Sharable </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> < Object > { </a> 
<a> private static final byte [ ] <RARE_TOKEN> = new byte [ 4 ] ; </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( Object msg ) throws Exception { </a> 
<a> return msg instanceof Serializable ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void encode ( ChannelHandlerContext ctx , Object msg , ByteBuf out ) throws Exception { </a> 
<a> int <RARE_TOKEN> = out . writerIndex ( ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( out ) ; </a> 
<a> <RARE_TOKEN> . write ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( msg ) ; </a> 
<a> <RARE_TOKEN> . flush ( ) ; </a> 
<a> <RARE_TOKEN> . close ( ) ; </a> 
<a> int <RARE_TOKEN> = out . writerIndex ( ) ; </a> 
<a> out . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> - <RARE_TOKEN> - 4 ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . <RARE_TOKEN> ; </a> 
<a> import io . netty . buffer . ByteBuf ; </a> 
<a> import io . netty . buffer . <RARE_TOKEN> ; </a> 
<a> import io . netty . buffer . Unpooled ; </a> 
<a> import java . io . <RARE_TOKEN> ; </a> 
<a> import java . io . IOException ; </a> 
<a> import java . io . <RARE_TOKEN> ; </a> 
<a> import java . io . <RARE_TOKEN> ; </a> 
<a> import java . io . OutputStream ; </a> 
<a> public class <RARE_TOKEN> extends OutputStream implements </a> 
<a> <RARE_TOKEN> { </a> 
<a> private final <RARE_TOKEN> out ; </a> 
<a> private final int <RARE_TOKEN> ; </a> 
<a> public <RARE_TOKEN> ( OutputStream out ) { </a> 
<a> this ( out , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( OutputStream out , int <RARE_TOKEN> ) { </a> 
<a> if ( out == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> < 0 ) { </a> 
<a> throw new IllegalArgumentException ( <RARE_TOKEN> " + <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( out instanceof <RARE_TOKEN> ) { </a> 
<a> this . out = ( <RARE_TOKEN> ) out ; </a> 
<a> } else { </a> 
<a> this . out = new <RARE_TOKEN> ( out ) ; </a> 
<a> } </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( Object obj ) throws IOException { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( Unpooled . buffer ( <RARE_TOKEN> ) ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( obj ) ; </a> 
<a> <RARE_TOKEN> . flush ( ) ; </a> 
<a> <RARE_TOKEN> . close ( ) ; </a> 
<a> ByteBuf buffer = <RARE_TOKEN> . buffer ( ) ; </a> 
<a> int <RARE_TOKEN> = buffer . readableBytes ( ) ; </a> 
<a> writeInt ( <RARE_TOKEN> ) ; </a> 
<a> buffer . getBytes ( 0 , this , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void write ( int b ) throws IOException { </a> 
<a> out . write ( b ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void close ( ) throws IOException { </a> 
<a> out . close ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void flush ( ) throws IOException { </a> 
<a> out . flush ( ) ; </a> 
<a> } </a> 
<a> public final int size ( ) { </a> 
<a> return out . size ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void write ( byte [ ] b , int off , int len ) throws IOException { </a> 
<a> out . write ( b , off , len ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void write ( byte [ ] b ) throws IOException { </a> 
<a> out . write ( b ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public final void <RARE_TOKEN> ( boolean v ) throws IOException { </a> 
<a> out . <RARE_TOKEN> ( v ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public final void writeByte ( int v ) throws IOException { </a> 
<a> out . writeByte ( v ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public final void writeBytes ( String s ) throws IOException { </a> 
<a> out . writeBytes ( s ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public final void <RARE_TOKEN> ( int v ) throws IOException { </a> 
<a> out . <RARE_TOKEN> ( v ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public final void <RARE_TOKEN> ( String s ) throws IOException { </a> 
<a> out . <RARE_TOKEN> ( s ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public final void <RARE_TOKEN> ( double v ) throws IOException { </a> 
<a> out . <RARE_TOKEN> ( v ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public final void <RARE_TOKEN> ( float v ) throws IOException { </a> 
<a> out . <RARE_TOKEN> ( v ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public final void writeInt ( int v ) throws IOException { </a> 
<a> out . writeInt ( v ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public final void <RARE_TOKEN> ( long v ) throws IOException { </a> 
<a> out . <RARE_TOKEN> ( v ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public final void <RARE_TOKEN> ( int v ) throws IOException { </a> 
<a> out . <RARE_TOKEN> ( v ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public final void <RARE_TOKEN> ( String <RARE_TOKEN> ) throws IOException { </a> 
<a> out . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . <RARE_TOKEN> ; </a> 
<a> import java . lang . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import java . util . Collection ; </a> 
<a> import java . util . Map ; </a> 
<a> import java . util . Set ; </a> 
<a> abstract class <RARE_TOKEN> < <RARE_TOKEN> , V > implements Map < <RARE_TOKEN> , V > { </a> 
<a> private final Map < <RARE_TOKEN> , <RARE_TOKEN> < V > > <RARE_TOKEN> ; </a> 
<a> protected <RARE_TOKEN> ( Map < <RARE_TOKEN> , <RARE_TOKEN> < V > > <RARE_TOKEN> ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> abstract <RARE_TOKEN> < V > <RARE_TOKEN> ( V value ) ; </a> 
<a> private V <RARE_TOKEN> ( <RARE_TOKEN> < V > <RARE_TOKEN> ) { </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> return <RARE_TOKEN> . get ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int size ( ) { </a> 
<a> return <RARE_TOKEN> . size ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean isEmpty ( ) { </a> 
<a> return <RARE_TOKEN> . isEmpty ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean containsKey ( Object key ) { </a> 
<a> return <RARE_TOKEN> . containsKey ( key ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( Object value ) { </a> 
<a> throw new UnsupportedOperationException ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public V get ( Object key ) { </a> 
<a> return <RARE_TOKEN> ( <RARE_TOKEN> . get ( key ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public V put ( <RARE_TOKEN> key , V value ) { </a> 
<a> return <RARE_TOKEN> ( <RARE_TOKEN> . put ( key , <RARE_TOKEN> ( value ) ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public V remove ( Object key ) { </a> 
<a> return <RARE_TOKEN> ( <RARE_TOKEN> . remove ( key ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( Map < ? extends <RARE_TOKEN> , ? extends V > m ) { </a> 
<a> for ( Entry < ? extends <RARE_TOKEN> , ? extends V > entry : m . <RARE_TOKEN> ( ) ) { </a> 
<a> <RARE_TOKEN> . put ( entry . <RARE_TOKEN> ( ) , <RARE_TOKEN> ( entry . getValue ( ) ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void clear ( ) { </a> 
<a> <RARE_TOKEN> . clear ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public Set < <RARE_TOKEN> > <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public Collection < V > values ( ) { </a> 
<a> throw new UnsupportedOperationException ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public Set < Entry < <RARE_TOKEN> , V > > <RARE_TOKEN> ( ) { </a> 
<a> throw new UnsupportedOperationException ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . <RARE_TOKEN> ; </a> 
<a> import java . io . <RARE_TOKEN> ; </a> 
<a> import java . io . InputStream ; </a> 
<a> final class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> <RARE_TOKEN> ( ) { </a> 
<a> super ( null ) ; </a> 
<a> } </a> 
<a> void <RARE_TOKEN> ( InputStream in ) { </a> 
<a> this . in = in ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . <RARE_TOKEN> ; </a> 
<a> import java . lang . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import java . lang . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import java . util . Map ; </a> 
<a> public class <RARE_TOKEN> < <RARE_TOKEN> , V > extends <RARE_TOKEN> < <RARE_TOKEN> , V > { </a> 
<a> public <RARE_TOKEN> ( Map < <RARE_TOKEN> , <RARE_TOKEN> < V > > <RARE_TOKEN> ) { </a> 
<a> super ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> <RARE_TOKEN> < V > <RARE_TOKEN> ( V value ) { </a> 
<a> return new <RARE_TOKEN> < V > ( value ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . <RARE_TOKEN> ; </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . string ; </a> 
<a> import io . netty . buffer . ByteBuf ; </a> 
<a> import io . netty . channel . ChannelHandler . Sharable ; </a> 
<a> import io . netty . channel . ChannelHandlerContext ; </a> 
<a> import io . netty . channel . ChannelPipeline ; </a> 
<a> import io . netty . handler . codec . <RARE_TOKEN> ; </a> 
<a> import io . netty . handler . codec . <RARE_TOKEN> ; </a> 
<a> import io . netty . handler . codec . <RARE_TOKEN> ; </a> 
<a> import java . nio . charset . Charset ; </a> 
<a> @ Sharable </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> < ByteBuf , String > { </a> 
<a> private final Charset charset ; </a> 
<a> public <RARE_TOKEN> ( ) { </a> 
<a> this ( Charset . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( Charset charset ) { </a> 
<a> if ( charset == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> this . charset = charset ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( Object msg ) throws Exception { </a> 
<a> return msg instanceof ByteBuf ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public String decode ( ChannelHandlerContext ctx , ByteBuf msg ) throws Exception { </a> 
<a> return msg . toString ( charset ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . string ; </a> 
<a> import io . netty . buffer . ByteBuf ; </a> 
<a> import io . netty . buffer . Unpooled ; </a> 
<a> import io . netty . channel . ChannelHandler . Sharable ; </a> 
<a> import io . netty . channel . ChannelHandlerContext ; </a> 
<a> import io . netty . channel . ChannelPipeline ; </a> 
<a> import io . netty . handler . codec . <RARE_TOKEN> ; </a> 
<a> import io . netty . handler . codec . <RARE_TOKEN> ; </a> 
<a> import io . netty . handler . codec . <RARE_TOKEN> ; </a> 
<a> import java . nio . charset . Charset ; </a> 
<a> @ Sharable </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> < String , ByteBuf > { </a> 
<a> private final Charset charset ; </a> 
<a> public <RARE_TOKEN> ( ) { </a> 
<a> this ( Charset . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( Charset charset ) { </a> 
<a> if ( charset == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> this . charset = charset ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( Object msg ) throws Exception { </a> 
<a> return msg instanceof String ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ByteBuf encode ( ChannelHandlerContext ctx , String msg ) throws Exception { </a> 
<a> return Unpooled . copiedBuffer ( msg , charset ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec ; </a> 
<a> import static org . junit . Assert . * ; </a> 
<a> import io . netty . buffer . ByteBuf ; </a> 
<a> import io . netty . buffer . ByteBufIndexFinder ; </a> 
<a> import io . netty . buffer . Unpooled ; </a> 
<a> import io . netty . channel . ChannelHandlerContext ; </a> 
<a> import io . netty . channel . embedded . EmbeddedByteChannel ; </a> 
<a> import org . junit . Test ; </a> 
<a> public class <RARE_TOKEN> { </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> EmbeddedByteChannel ch = new EmbeddedByteChannel ( new <RARE_TOKEN> ( ) ) ; </a> 
<a> ch . writeInbound ( Unpooled . wrappedBuffer ( new byte [ ] { <RARE_TOKEN> } ) ) ; </a> 
<a> assertNull ( ch . <RARE_TOKEN> ( ) ) ; </a> 
<a> ch . writeInbound ( Unpooled . wrappedBuffer ( new byte [ ] { <RARE_TOKEN> } ) ) ; </a> 
<a> assertNull ( ch . <RARE_TOKEN> ( ) ) ; </a> 
<a> ch . writeInbound ( Unpooled . wrappedBuffer ( new byte [ ] { <RARE_TOKEN> } ) ) ; </a> 
<a> assertNull ( ch . <RARE_TOKEN> ( ) ) ; </a> 
<a> ch . writeInbound ( Unpooled . wrappedBuffer ( new byte [ ] { <RARE_TOKEN> } ) ) ; </a> 
<a> assertEquals ( Unpooled . wrappedBuffer ( new byte [ ] { <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> } ) , ch . <RARE_TOKEN> ( ) ) ; </a> 
<a> ch . writeInbound ( Unpooled . wrappedBuffer ( new byte [ ] { <RARE_TOKEN> } ) ) ; </a> 
<a> assertNull ( ch . <RARE_TOKEN> ( ) ) ; </a> 
<a> ch . close ( ) ; </a> 
<a> assertNull ( ch . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> private static final class <RARE_TOKEN> extends <RARE_TOKEN> < ByteBuf , Void > { </a> 
<a> <RARE_TOKEN> ( ) { </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ByteBuf decode ( ChannelHandlerContext ctx , ByteBuf in ) { </a> 
<a> ByteBuf msg = in . readBytes ( in . bytesBefore ( ByteBufIndexFinder . <RARE_TOKEN> ) ) ; </a> 
<a> in . skipBytes ( 1 ) ; </a> 
<a> return msg ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . bytes ; </a> 
<a> import static io . netty . buffer . Unpooled . * ; </a> 
<a> import static org . <RARE_TOKEN> . core . <RARE_TOKEN> . * ; </a> 
<a> import static org . junit . Assert . * ; </a> 
<a> import io . netty . channel . embedded . <RARE_TOKEN> ; </a> 
<a> import java . util . Random ; </a> 
<a> import org . junit . <RARE_TOKEN> ; </a> 
<a> import org . junit . Test ; </a> 
<a> public class <RARE_TOKEN> { </a> 
<a> private <RARE_TOKEN> ch ; </a> 
<a> @ <RARE_TOKEN> </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> ch = new <RARE_TOKEN> ( new <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> byte [ ] b = new byte [ <RARE_TOKEN> ] ; </a> 
<a> new Random ( ) . <RARE_TOKEN> ( b ) ; </a> 
<a> ch . writeInbound ( wrappedBuffer ( b ) ) ; </a> 
<a> <RARE_TOKEN> ( ( byte [ ] ) ch . <RARE_TOKEN> ( ) , is ( b ) ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> byte [ ] b = new byte [ 0 ] ; </a> 
<a> ch . writeInbound ( wrappedBuffer ( b ) ) ; </a> 
<a> <RARE_TOKEN> ( ( byte [ ] ) ch . <RARE_TOKEN> ( ) , is ( b ) ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> ch . writeInbound ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( ch . <RARE_TOKEN> ( ) , is ( ( Object ) <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . bytes ; </a> 
<a> import static io . netty . buffer . Unpooled . * ; </a> 
<a> import static org . <RARE_TOKEN> . core . <RARE_TOKEN> . * ; </a> 
<a> import static org . <RARE_TOKEN> . core . <RARE_TOKEN> . * ; </a> 
<a> import static org . junit . Assert . * ; </a> 
<a> import io . netty . buffer . ByteBuf ; </a> 
<a> import io . netty . channel . embedded . <RARE_TOKEN> ; </a> 
<a> import java . util . Random ; </a> 
<a> import org . junit . <RARE_TOKEN> ; </a> 
<a> import org . junit . Test ; </a> 
<a> public class <RARE_TOKEN> { </a> 
<a> private <RARE_TOKEN> ch ; </a> 
<a> @ <RARE_TOKEN> </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> ch = new <RARE_TOKEN> ( new <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> byte [ ] b = new byte [ <RARE_TOKEN> ] ; </a> 
<a> new Random ( ) . <RARE_TOKEN> ( b ) ; </a> 
<a> ch . <RARE_TOKEN> ( b ) ; </a> 
<a> <RARE_TOKEN> ( ( ByteBuf ) ch . readOutbound ( ) , is ( wrappedBuffer ( b ) ) ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> byte [ ] b = new byte [ 0 ] ; </a> 
<a> ch . <RARE_TOKEN> ( b ) ; </a> 
<a> <RARE_TOKEN> ( ch . readOutbound ( ) , <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> ch . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( ch . readOutbound ( ) , is ( ( Object ) <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . frame ; </a> 
<a> import static org . junit . Assert . * ; </a> 
<a> import io . netty . buffer . ByteBuf ; </a> 
<a> import io . netty . buffer . Unpooled ; </a> 
<a> import io . netty . channel . embedded . EmbeddedByteChannel ; </a> 
<a> import io . netty . handler . codec . <RARE_TOKEN> ; </a> 
<a> import io . netty . handler . codec . <RARE_TOKEN> ; </a> 
<a> import io . netty . handler . codec . <RARE_TOKEN> ; </a> 
<a> import io . netty . handler . codec . TooLongFrameException ; </a> 
<a> import io . netty . util . CharsetUtil ; </a> 
<a> import org . junit . Assert ; </a> 
<a> import org . junit . Test ; </a> 
<a> public class <RARE_TOKEN> { </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) throws Exception { </a> 
<a> EmbeddedByteChannel ch = new EmbeddedByteChannel ( </a> 
<a> new <RARE_TOKEN> ( 1 , true , false , <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ) ; </a> 
<a> for ( int i = 0 ; i < 2 ; i ++ ) { </a> 
<a> ch . writeInbound ( Unpooled . wrappedBuffer ( new byte [ ] { 1 , 2 } ) ) ; </a> 
<a> try { </a> 
<a> assertTrue ( ch . writeInbound ( Unpooled . wrappedBuffer ( new byte [ ] { 0 } ) ) ) ; </a> 
<a> Assert . fail ( <RARE_TOKEN> . class . getSimpleName ( ) + " must be <RARE_TOKEN> ) ; </a> 
<a> } catch ( TooLongFrameException e ) { </a> 
<a> } </a> 
<a> ch . writeInbound ( Unpooled . wrappedBuffer ( new byte [ ] { <RARE_TOKEN> , 0 } ) ) ; </a> 
<a> ByteBuf buf = ( ByteBuf ) ch . <RARE_TOKEN> ( ) ; </a> 
<a> Assert . assertEquals ( <RARE_TOKEN> , buf . toString ( CharsetUtil . <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) throws Exception { </a> 
<a> EmbeddedByteChannel ch = new EmbeddedByteChannel ( </a> 
<a> new <RARE_TOKEN> ( 1 , <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ) ; </a> 
<a> for ( int i = 0 ; i < 2 ; i ++ ) { </a> 
<a> try { </a> 
<a> assertTrue ( ch . writeInbound ( Unpooled . wrappedBuffer ( new byte [ ] { 1 , 2 } ) ) ) ; </a> 
<a> Assert . fail ( <RARE_TOKEN> . class . getSimpleName ( ) + " must be <RARE_TOKEN> ) ; </a> 
<a> } catch ( TooLongFrameException e ) { </a> 
<a> } </a> 
<a> ch . writeInbound ( Unpooled . wrappedBuffer ( new byte [ ] { 0 , <RARE_TOKEN> , 0 } ) ) ; </a> 
<a> ByteBuf buf = ( ByteBuf ) ch . <RARE_TOKEN> ( ) ; </a> 
<a> Assert . assertEquals ( <RARE_TOKEN> , buf . toString ( CharsetUtil . <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . frame ; </a> 
<a> import static org . junit . Assert . * ; </a> 
<a> import io . netty . buffer . ByteBuf ; </a> 
<a> import io . netty . buffer . Unpooled ; </a> 
<a> import io . netty . channel . embedded . EmbeddedByteChannel ; </a> 
<a> import io . netty . handler . codec . <RARE_TOKEN> ; </a> 
<a> import io . netty . handler . codec . <RARE_TOKEN> ; </a> 
<a> import io . netty . handler . codec . TooLongFrameException ; </a> 
<a> import io . netty . util . CharsetUtil ; </a> 
<a> import org . junit . Assert ; </a> 
<a> import org . junit . Test ; </a> 
<a> public class <RARE_TOKEN> { </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) throws Exception { </a> 
<a> EmbeddedByteChannel ch = new EmbeddedByteChannel ( </a> 
<a> new <RARE_TOKEN> ( 5 , 0 , 4 , 0 , 4 , false ) ) ; </a> 
<a> for ( int i = 0 ; i < 2 ; i ++ ) { </a> 
<a> assertFalse ( ch . writeInbound ( Unpooled . wrappedBuffer ( new byte [ ] { 0 , 0 , 0 , 2 } ) ) ) ; </a> 
<a> try { </a> 
<a> assertTrue ( ch . writeInbound ( Unpooled . wrappedBuffer ( new byte [ ] { 0 , 0 } ) ) ) ; </a> 
<a> Assert . fail ( <RARE_TOKEN> . class . getSimpleName ( ) + " must be <RARE_TOKEN> ) ; </a> 
<a> } catch ( TooLongFrameException e ) { </a> 
<a> } </a> 
<a> ch . writeInbound ( Unpooled . wrappedBuffer ( new byte [ ] { 0 , 0 , 0 , 1 , <RARE_TOKEN> } ) ) ; </a> 
<a> ByteBuf buf = ( ByteBuf ) ch . <RARE_TOKEN> ( ) ; </a> 
<a> Assert . assertEquals ( <RARE_TOKEN> , buf . toString ( CharsetUtil . <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) throws Exception { </a> 
<a> EmbeddedByteChannel ch = new EmbeddedByteChannel ( </a> 
<a> new <RARE_TOKEN> ( 5 , 0 , 4 , 0 , 4 ) ) ; </a> 
<a> for ( int i = 0 ; i < 2 ; i ++ ) { </a> 
<a> try { </a> 
<a> assertTrue ( ch . writeInbound ( Unpooled . wrappedBuffer ( new byte [ ] { 0 , 0 , 0 , 2 } ) ) ) ; </a> 
<a> Assert . fail ( <RARE_TOKEN> . class . getSimpleName ( ) + " must be <RARE_TOKEN> ) ; </a> 
<a> } catch ( TooLongFrameException e ) { </a> 
<a> } </a> 
<a> ch . writeInbound ( Unpooled . wrappedBuffer ( new byte [ ] { 0 , 0 , 0 , 0 , 0 , 1 , <RARE_TOKEN> } ) ) ; </a> 
<a> ByteBuf buf = ( ByteBuf ) ch . <RARE_TOKEN> ( ) ; </a> 
<a> Assert . assertEquals ( <RARE_TOKEN> , buf . toString ( CharsetUtil . <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . marshalling ; </a> 
<a> import static org . junit . Assert . * ; </a> 
<a> import io . netty . buffer . ByteBuf ; </a> 
<a> import io . netty . buffer . Unpooled ; </a> 
<a> import io . netty . channel . ChannelHandler ; </a> 
<a> import io . netty . channel . embedded . EmbeddedByteChannel ; </a> 
<a> import io . netty . handler . codec . <RARE_TOKEN> ; </a> 
<a> import io . netty . handler . codec . TooLongFrameException ; </a> 
<a> import java . io . <RARE_TOKEN> ; </a> 
<a> import java . io . IOException ; </a> 
<a> import junit . <RARE_TOKEN> . Assert ; </a> 
<a> import org . jboss . marshalling . <RARE_TOKEN> ; </a> 
<a> import org . jboss . marshalling . MarshallerFactory ; </a> 
<a> import org . jboss . marshalling . <RARE_TOKEN> ; </a> 
<a> import org . jboss . marshalling . MarshallingConfiguration ; </a> 
<a> import org . junit . Test ; </a> 
<a> public abstract class <RARE_TOKEN> { </a> 
<a> private final String <RARE_TOKEN> = new String ( <RARE_TOKEN> ) ; </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) throws IOException { </a> 
<a> MarshallerFactory <RARE_TOKEN> = <RARE_TOKEN> ( ) ; </a> 
<a> MarshallingConfiguration <RARE_TOKEN> = <RARE_TOKEN> ( ) ; </a> 
<a> EmbeddedByteChannel ch = new EmbeddedByteChannel ( <RARE_TOKEN> ( Integer . MAX_VALUE ) ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . start ( <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> . close ( ) ; </a> 
<a> byte [ ] <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> ch . writeInbound ( input ( <RARE_TOKEN> ) ) ; </a> 
<a> assertTrue ( ch . <RARE_TOKEN> ( ) ) ; </a> 
<a> String <RARE_TOKEN> = ( String ) ch . <RARE_TOKEN> ( ) ; </a> 
<a> Assert . assertEquals ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> Assert . assertNull ( ch . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> protected ByteBuf input ( byte [ ] input ) { </a> 
<a> return Unpooled . wrappedBuffer ( input ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) throws IOException { </a> 
<a> MarshallerFactory <RARE_TOKEN> = <RARE_TOKEN> ( ) ; </a> 
<a> MarshallingConfiguration <RARE_TOKEN> = <RARE_TOKEN> ( ) ; </a> 
<a> EmbeddedByteChannel ch = new EmbeddedByteChannel ( <RARE_TOKEN> ( Integer . MAX_VALUE ) ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . start ( <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> . close ( ) ; </a> 
<a> byte [ ] <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> ByteBuf buffer = input ( <RARE_TOKEN> ) ; </a> 
<a> ByteBuf slice = buffer . <RARE_TOKEN> ( 2 ) ; </a> 
<a> ch . writeInbound ( slice ) ; </a> 
<a> ch . writeInbound ( buffer ) ; </a> 
<a> assertTrue ( ch . <RARE_TOKEN> ( ) ) ; </a> 
<a> String <RARE_TOKEN> = ( String ) ch . <RARE_TOKEN> ( ) ; </a> 
<a> Assert . assertEquals ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> Assert . assertNull ( ch . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) throws IOException { </a> 
<a> MarshallerFactory <RARE_TOKEN> = <RARE_TOKEN> ( ) ; </a> 
<a> MarshallingConfiguration <RARE_TOKEN> = <RARE_TOKEN> ( ) ; </a> 
<a> ChannelHandler <RARE_TOKEN> = <RARE_TOKEN> ( 4 ) ; </a> 
<a> EmbeddedByteChannel ch = new EmbeddedByteChannel ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . start ( <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> . close ( ) ; </a> 
<a> byte [ ] <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> try { </a> 
<a> ch . writeInbound ( input ( <RARE_TOKEN> ) ) ; </a> 
<a> fail ( ) ; </a> 
<a> } catch ( <RARE_TOKEN> e ) { </a> 
<a> assertEquals ( TooLongFrameException . class , e . getClass ( ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> protected ChannelHandler <RARE_TOKEN> ( int <RARE_TOKEN> ) { </a> 
<a> return new <RARE_TOKEN> ( <RARE_TOKEN> ( <RARE_TOKEN> ( ) , <RARE_TOKEN> ( ) ) , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> protected <RARE_TOKEN> <RARE_TOKEN> ( MarshallerFactory factory , MarshallingConfiguration config ) { </a> 
<a> return new <RARE_TOKEN> ( factory , config ) ; </a> 
<a> } </a> 
<a> protected abstract MarshallerFactory <RARE_TOKEN> ( ) ; </a> 
<a> protected abstract MarshallingConfiguration <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . marshalling ; </a> 
<a> import org . jboss . marshalling . MarshallerFactory ; </a> 
<a> import org . jboss . marshalling . <RARE_TOKEN> ; </a> 
<a> import org . jboss . marshalling . MarshallingConfiguration ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> @ Override </a> 
<a> protected MarshallerFactory <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected MarshallingConfiguration <RARE_TOKEN> ( ) { </a> 
<a> final MarshallingConfiguration <RARE_TOKEN> = new MarshallingConfiguration ( ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( 3 ) ; </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . marshalling ; </a> 
<a> import org . jboss . marshalling . MarshallerFactory ; </a> 
<a> import org . jboss . marshalling . <RARE_TOKEN> ; </a> 
<a> import org . jboss . marshalling . MarshallingConfiguration ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> @ Override </a> 
<a> protected MarshallerFactory <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected MarshallingConfiguration <RARE_TOKEN> ( ) { </a> 
<a> final MarshallingConfiguration <RARE_TOKEN> = new MarshallingConfiguration ( ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( 3 ) ; </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . marshalling ; </a> 
<a> import org . jboss . marshalling . MarshallerFactory ; </a> 
<a> import org . jboss . marshalling . MarshallingConfiguration ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> @ Override </a> 
<a> protected <RARE_TOKEN> <RARE_TOKEN> ( MarshallerFactory factory , MarshallingConfiguration config ) { </a> 
<a> return new <RARE_TOKEN> ( factory , config ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . marshalling ; </a> 
<a> import org . jboss . marshalling . MarshallerFactory ; </a> 
<a> import org . jboss . marshalling . MarshallingConfiguration ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> @ Override </a> 
<a> protected <RARE_TOKEN> <RARE_TOKEN> ( MarshallerFactory factory , MarshallingConfiguration config ) { </a> 
<a> return new <RARE_TOKEN> ( factory , config ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . marshalling ; </a> 
<a> import io . netty . buffer . ByteBuf ; </a> 
<a> import io . netty . buffer . Unpooled ; </a> 
<a> import io . netty . channel . ChannelHandler ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> @ Override </a> 
<a> protected ByteBuf input ( byte [ ] input ) { </a> 
<a> ByteBuf length = Unpooled . buffer ( 4 ) ; </a> 
<a> length . writeInt ( input . length ) ; </a> 
<a> return Unpooled . wrappedBuffer ( length , Unpooled . wrappedBuffer ( input ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected ChannelHandler <RARE_TOKEN> ( int <RARE_TOKEN> ) { </a> 
<a> return new <RARE_TOKEN> ( <RARE_TOKEN> ( <RARE_TOKEN> ( ) , <RARE_TOKEN> ( ) ) , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . marshalling ; </a> 
<a> import io . netty . buffer . ByteBuf ; </a> 
<a> import io . netty . channel . ChannelHandler ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> @ Override </a> 
<a> protected ByteBuf <RARE_TOKEN> ( ByteBuf buf ) { </a> 
<a> buf . <RARE_TOKEN> ( ) ; </a> 
<a> return buf ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected ChannelHandler <RARE_TOKEN> ( ) { </a> 
<a> return new <RARE_TOKEN> ( <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . marshalling ; </a> 
<a> import org . jboss . marshalling . MarshallerFactory ; </a> 
<a> import org . jboss . marshalling . MarshallingConfiguration ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> @ Override </a> 
<a> protected <RARE_TOKEN> <RARE_TOKEN> ( MarshallerFactory factory , MarshallingConfiguration config ) { </a> 
<a> return new <RARE_TOKEN> ( factory , config ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . marshalling ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> @ Override </a> 
<a> protected <RARE_TOKEN> <RARE_TOKEN> ( ) { </a> 
<a> return new <RARE_TOKEN> ( <RARE_TOKEN> ( ) , <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . marshalling ; </a> 
<a> import org . jboss . marshalling . MarshallerFactory ; </a> 
<a> import org . jboss . marshalling . MarshallingConfiguration ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> @ Override </a> 
<a> protected <RARE_TOKEN> <RARE_TOKEN> ( MarshallerFactory factory , MarshallingConfiguration config ) { </a> 
<a> return new <RARE_TOKEN> ( factory , config ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . marshalling ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> @ Override </a> 
<a> protected <RARE_TOKEN> <RARE_TOKEN> ( ) { </a> 
<a> return new <RARE_TOKEN> ( <RARE_TOKEN> ( ) , <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . marshalling ; </a> 
<a> import org . jboss . marshalling . MarshallerFactory ; </a> 
<a> import org . jboss . marshalling . <RARE_TOKEN> ; </a> 
<a> import org . jboss . marshalling . MarshallingConfiguration ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> @ Override </a> 
<a> protected MarshallerFactory <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected MarshallingConfiguration <RARE_TOKEN> ( ) { </a> 
<a> final MarshallingConfiguration <RARE_TOKEN> = new MarshallingConfiguration ( ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( 5 ) ; </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . marshalling ; </a> 
<a> import org . jboss . marshalling . MarshallerFactory ; </a> 
<a> import org . jboss . marshalling . <RARE_TOKEN> ; </a> 
<a> import org . jboss . marshalling . MarshallingConfiguration ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> @ Override </a> 
<a> protected MarshallerFactory <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected MarshallingConfiguration <RARE_TOKEN> ( ) { </a> 
<a> final MarshallingConfiguration <RARE_TOKEN> = new MarshallingConfiguration ( ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( 5 ) ; </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . marshalling ; </a> 
<a> import org . jboss . marshalling . MarshallerFactory ; </a> 
<a> import org . jboss . marshalling . MarshallingConfiguration ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> @ Override </a> 
<a> protected <RARE_TOKEN> <RARE_TOKEN> ( MarshallerFactory factory , MarshallingConfiguration config ) { </a> 
<a> return new <RARE_TOKEN> ( factory , config ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . marshalling ; </a> 
<a> import org . jboss . marshalling . MarshallerFactory ; </a> 
<a> import org . jboss . marshalling . MarshallingConfiguration ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> @ Override </a> 
<a> protected <RARE_TOKEN> <RARE_TOKEN> ( MarshallerFactory factory , MarshallingConfiguration config ) { </a> 
<a> return new <RARE_TOKEN> ( factory , config ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . marshalling ; </a> 
<a> import io . netty . buffer . ByteBuf ; </a> 
<a> import io . netty . buffer . Unpooled ; </a> 
<a> import io . netty . channel . ChannelHandler ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> @ Override </a> 
<a> protected ByteBuf input ( byte [ ] input ) { </a> 
<a> ByteBuf length = Unpooled . buffer ( 4 ) ; </a> 
<a> length . writeInt ( input . length ) ; </a> 
<a> return Unpooled . wrappedBuffer ( length , Unpooled . wrappedBuffer ( input ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected ChannelHandler <RARE_TOKEN> ( int <RARE_TOKEN> ) { </a> 
<a> return new <RARE_TOKEN> ( <RARE_TOKEN> ( <RARE_TOKEN> ( ) , <RARE_TOKEN> ( ) ) , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . marshalling ; </a> 
<a> import io . netty . buffer . ByteBuf ; </a> 
<a> import io . netty . channel . ChannelHandler ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> @ Override </a> 
<a> protected ByteBuf <RARE_TOKEN> ( ByteBuf buf ) { </a> 
<a> buf . <RARE_TOKEN> ( ) ; </a> 
<a> return buf ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected ChannelHandler <RARE_TOKEN> ( ) { </a> 
<a> return new <RARE_TOKEN> ( <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . marshalling ; </a> 
<a> import org . jboss . marshalling . MarshallerFactory ; </a> 
<a> import org . jboss . marshalling . MarshallingConfiguration ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> @ Override </a> 
<a> protected <RARE_TOKEN> <RARE_TOKEN> ( MarshallerFactory factory , MarshallingConfiguration config ) { </a> 
<a> return new <RARE_TOKEN> ( factory , config ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . marshalling ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> @ Override </a> 
<a> protected <RARE_TOKEN> <RARE_TOKEN> ( ) { </a> 
<a> return new <RARE_TOKEN> ( <RARE_TOKEN> ( ) , <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . marshalling ; </a> 
<a> import org . jboss . marshalling . MarshallerFactory ; </a> 
<a> import org . jboss . marshalling . MarshallingConfiguration ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> @ Override </a> 
<a> protected <RARE_TOKEN> <RARE_TOKEN> ( MarshallerFactory factory , MarshallingConfiguration config ) { </a> 
<a> return new <RARE_TOKEN> ( factory , config ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . marshalling ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> @ Override </a> 
<a> protected <RARE_TOKEN> <RARE_TOKEN> ( ) { </a> 
<a> return new <RARE_TOKEN> ( <RARE_TOKEN> ( ) , <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . protobuf ; </a> 
<a> import static io . netty . buffer . Unpooled . * ; </a> 
<a> import static org . <RARE_TOKEN> . core . <RARE_TOKEN> . * ; </a> 
<a> import static org . <RARE_TOKEN> . core . <RARE_TOKEN> . * ; </a> 
<a> import static org . junit . Assert . * ; </a> 
<a> import io . netty . buffer . ByteBuf ; </a> 
<a> import io . netty . channel . embedded . EmbeddedByteChannel ; </a> 
<a> import org . junit . <RARE_TOKEN> ; </a> 
<a> import org . junit . Test ; </a> 
<a> public class <RARE_TOKEN> { </a> 
<a> private EmbeddedByteChannel ch ; </a> 
<a> @ <RARE_TOKEN> </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> ch = new EmbeddedByteChannel ( new <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> byte [ ] b = { 4 , 1 , 1 , 1 , 1 } ; </a> 
<a> ch . writeInbound ( wrappedBuffer ( b , 0 , 1 ) ) ; </a> 
<a> <RARE_TOKEN> ( ch . <RARE_TOKEN> ( ) , is ( <RARE_TOKEN> ( ) ) ) ; </a> 
<a> ch . writeInbound ( wrappedBuffer ( b , 1 , 2 ) ) ; </a> 
<a> <RARE_TOKEN> ( ch . <RARE_TOKEN> ( ) , is ( <RARE_TOKEN> ( ) ) ) ; </a> 
<a> ch . writeInbound ( wrappedBuffer ( b , 3 , b . length - 3 ) ) ; </a> 
<a> <RARE_TOKEN> ( </a> 
<a> ( ByteBuf ) ch . <RARE_TOKEN> ( ) , </a> 
<a> is ( wrappedBuffer ( new byte [ ] { 1 , 1 , 1 , 1 } ) ) ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> byte [ ] b = new byte [ <RARE_TOKEN> ] ; </a> 
<a> for ( int i = 2 ; i < <RARE_TOKEN> ; i ++ ) { </a> 
<a> b [ i ] = 1 ; </a> 
<a> } </a> 
<a> b [ 0 ] = - 2 ; </a> 
<a> b [ 1 ] = 15 ; </a> 
<a> ch . writeInbound ( wrappedBuffer ( b , 0 , <RARE_TOKEN> ) ) ; </a> 
<a> <RARE_TOKEN> ( ch . <RARE_TOKEN> ( ) , is ( <RARE_TOKEN> ( ) ) ) ; </a> 
<a> ch . writeInbound ( wrappedBuffer ( b , <RARE_TOKEN> , <RARE_TOKEN> ) ) ; </a> 
<a> <RARE_TOKEN> ( ch . <RARE_TOKEN> ( ) , is ( <RARE_TOKEN> ( ) ) ) ; </a> 
<a> ch . writeInbound ( wrappedBuffer ( b , <RARE_TOKEN> , b . length - <RARE_TOKEN> ) ) ; </a> 
<a> <RARE_TOKEN> ( ( ByteBuf ) ch . <RARE_TOKEN> ( ) , is ( wrappedBuffer ( b , 2 , b . length - 2 ) ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . protobuf ; </a> 
<a> import static io . netty . buffer . Unpooled . * ; </a> 
<a> import static org . <RARE_TOKEN> . core . <RARE_TOKEN> . * ; </a> 
<a> import static org . junit . Assert . * ; </a> 
<a> import io . netty . channel . embedded . EmbeddedByteChannel ; </a> 
<a> import org . junit . <RARE_TOKEN> ; </a> 
<a> import org . junit . Test ; </a> 
<a> public class <RARE_TOKEN> { </a> 
<a> private EmbeddedByteChannel ch ; </a> 
<a> @ <RARE_TOKEN> </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> ch = new EmbeddedByteChannel ( new <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> byte [ ] b = { 4 , 1 , 1 , 1 , 1 } ; </a> 
<a> ch . <RARE_TOKEN> ( wrappedBuffer ( b , 1 , b . length - 1 ) ) ; </a> 
<a> <RARE_TOKEN> ( ch . readOutbound ( ) , is ( wrappedBuffer ( b ) ) ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> byte [ ] b = new byte [ <RARE_TOKEN> ] ; </a> 
<a> for ( int i = 2 ; i < <RARE_TOKEN> ; i ++ ) { </a> 
<a> b [ i ] = 1 ; </a> 
<a> } </a> 
<a> b [ 0 ] = - 2 ; </a> 
<a> b [ 1 ] = 15 ; </a> 
<a> ch . <RARE_TOKEN> ( wrappedBuffer ( b , 2 , b . length - 2 ) ) ; </a> 
<a> <RARE_TOKEN> ( ch . readOutbound ( ) , is ( wrappedBuffer ( b ) ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . <RARE_TOKEN> ; </a> 
<a> import java . io . <RARE_TOKEN> ; </a> 
<a> import java . io . <RARE_TOKEN> ; </a> 
<a> import java . util . List ; </a> 
<a> import org . junit . Assert ; </a> 
<a> import org . junit . Test ; </a> 
<a> public class <RARE_TOKEN> { </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) throws Exception { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> out = new <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> in = new <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> ( null ) ) ; </a> 
<a> out . <RARE_TOKEN> ( List . class ) ; </a> 
<a> Assert . assertSame ( List . class , in . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . codec . <RARE_TOKEN> ; </a> 
<a> import static org . <RARE_TOKEN> . <RARE_TOKEN> . * ; </a> 
<a> import static org . junit . Assert . * ; </a> 
<a> import java . io . InputStream ; </a> 
<a> import org . junit . Test ; </a> 
<a> public class <RARE_TOKEN> { </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) throws Exception { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( ) ; </a> 
<a> InputStream <RARE_TOKEN> = createStrictMock ( InputStream . class ) ; </a> 
<a> InputStream <RARE_TOKEN> = createStrictMock ( InputStream . class ) ; </a> 
<a> expect ( <RARE_TOKEN> . read ( ) ) . andReturn ( 1 ) ; </a> 
<a> replay ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> assertEquals ( 1 , <RARE_TOKEN> . read ( ) ) ; </a> 
<a> verify ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> expect ( <RARE_TOKEN> . read ( ) ) . andReturn ( 2 ) ; </a> 
<a> replay ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> assertEquals ( 2 , <RARE_TOKEN> . read ( ) ) ; </a> 
<a> verify ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . logging ; </a> 
<a> public abstract class <RARE_TOKEN> implements InternalLogger { </a> 
<a> protected <RARE_TOKEN> ( ) { </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( <RARE_TOKEN> level ) { </a> 
<a> switch ( level ) { </a> 
<a> case <RARE_TOKEN> : </a> 
<a> return <RARE_TOKEN> ( ) ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> return isDebugEnabled ( ) ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> return <RARE_TOKEN> ( ) ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> return <RARE_TOKEN> ( ) ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> return <RARE_TOKEN> ( ) ; </a> 
<a> default : </a> 
<a> throw new Error ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void log ( <RARE_TOKEN> level , String msg , Throwable cause ) { </a> 
<a> switch ( level ) { </a> 
<a> case <RARE_TOKEN> : </a> 
<a> trace ( msg , cause ) ; </a> 
<a> break ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> debug ( msg , cause ) ; </a> 
<a> break ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> info ( msg , cause ) ; </a> 
<a> break ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> warn ( msg , cause ) ; </a> 
<a> break ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> error ( msg , cause ) ; </a> 
<a> break ; </a> 
<a> default : </a> 
<a> throw new Error ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void log ( <RARE_TOKEN> level , String msg ) { </a> 
<a> switch ( level ) { </a> 
<a> case <RARE_TOKEN> : </a> 
<a> trace ( msg ) ; </a> 
<a> break ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> debug ( msg ) ; </a> 
<a> break ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> info ( msg ) ; </a> 
<a> break ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> warn ( msg ) ; </a> 
<a> break ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> error ( msg ) ; </a> 
<a> break ; </a> 
<a> default : </a> 
<a> throw new Error ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . logging ; </a> 
<a> import org . apache . commons . logging . Log ; </a> 
<a> class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> private final Log logger ; </a> 
<a> private final String <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> ( Log logger , String <RARE_TOKEN> ) { </a> 
<a> this . logger = logger ; </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void trace ( String msg ) { </a> 
<a> logger . trace ( msg ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void trace ( String msg , Throwable cause ) { </a> 
<a> logger . trace ( msg , cause ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void debug ( String msg ) { </a> 
<a> logger . debug ( msg ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void debug ( String msg , Throwable cause ) { </a> 
<a> logger . debug ( msg , cause ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void error ( String msg ) { </a> 
<a> logger . error ( msg ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void error ( String msg , Throwable cause ) { </a> 
<a> logger . error ( msg , cause ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void info ( String msg ) { </a> 
<a> logger . info ( msg ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void info ( String msg , Throwable cause ) { </a> 
<a> logger . info ( msg , cause ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return logger . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean isDebugEnabled ( ) { </a> 
<a> return logger . isDebugEnabled ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return logger . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return logger . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return logger . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void warn ( String msg ) { </a> 
<a> logger . warn ( msg ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void warn ( String msg , Throwable cause ) { </a> 
<a> logger . warn ( msg , cause ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public String toString ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . logging ; </a> 
<a> import org . apache . commons . logging . <RARE_TOKEN> ; </a> 
<a> public class <RARE_TOKEN> extends InternalLoggerFactory { </a> 
<a> @ Override </a> 
<a> public InternalLogger newInstance ( String name ) { </a> 
<a> return new <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ( name ) , name ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . logging ; </a> 
<a> public interface InternalLogger { </a> 
<a> boolean <RARE_TOKEN> ( ) ; </a> 
<a> boolean isDebugEnabled ( ) ; </a> 
<a> boolean <RARE_TOKEN> ( ) ; </a> 
<a> boolean <RARE_TOKEN> ( ) ; </a> 
<a> boolean <RARE_TOKEN> ( ) ; </a> 
<a> boolean <RARE_TOKEN> ( <RARE_TOKEN> level ) ; </a> 
<a> void trace ( String msg ) ; </a> 
<a> void trace ( String msg , Throwable cause ) ; </a> 
<a> void debug ( String msg ) ; </a> 
<a> void debug ( String msg , Throwable cause ) ; </a> 
<a> void info ( String msg ) ; </a> 
<a> void info ( String msg , Throwable cause ) ; </a> 
<a> void warn ( String msg ) ; </a> 
<a> void warn ( String msg , Throwable cause ) ; </a> 
<a> void error ( String msg ) ; </a> 
<a> void error ( String msg , Throwable cause ) ; </a> 
<a> void log ( <RARE_TOKEN> level , String msg ) ; </a> 
<a> void log ( <RARE_TOKEN> level , String msg , Throwable cause ) ; </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . logging ; </a> 
<a> public abstract class InternalLoggerFactory { </a> 
<a> private static volatile InternalLoggerFactory <RARE_TOKEN> = new <RARE_TOKEN> ( ) ; </a> 
<a> public static InternalLoggerFactory <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public static void <RARE_TOKEN> ( InternalLoggerFactory <RARE_TOKEN> ) { </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> InternalLoggerFactory . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public static InternalLogger getInstance ( Class < ? > clazz ) { </a> 
<a> return getInstance ( clazz . getName ( ) ) ; </a> 
<a> } </a> 
<a> public static InternalLogger getInstance ( String name ) { </a> 
<a> final InternalLogger logger = <RARE_TOKEN> ( ) . newInstance ( name ) ; </a> 
<a> return new InternalLogger ( ) { </a> 
<a> @ Override </a> 
<a> public void trace ( String msg ) { </a> 
<a> logger . trace ( msg ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void trace ( String msg , Throwable cause ) { </a> 
<a> logger . trace ( msg , cause ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void debug ( String msg ) { </a> 
<a> logger . debug ( msg ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void debug ( String msg , Throwable cause ) { </a> 
<a> logger . debug ( msg , cause ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void error ( String msg ) { </a> 
<a> logger . error ( msg ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void error ( String msg , Throwable cause ) { </a> 
<a> logger . error ( msg , cause ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void info ( String msg ) { </a> 
<a> logger . info ( msg ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void info ( String msg , Throwable cause ) { </a> 
<a> logger . info ( msg , cause ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return logger . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean isDebugEnabled ( ) { </a> 
<a> return logger . isDebugEnabled ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return logger . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return logger . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return logger . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void warn ( String msg ) { </a> 
<a> logger . warn ( msg ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void warn ( String msg , Throwable cause ) { </a> 
<a> logger . warn ( msg , cause ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( <RARE_TOKEN> level ) { </a> 
<a> return logger . <RARE_TOKEN> ( level ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void log ( <RARE_TOKEN> level , String msg ) { </a> 
<a> logger . log ( level , msg ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void log ( <RARE_TOKEN> level , String msg , Throwable cause ) { </a> 
<a> logger . log ( level , msg , cause ) ; </a> 
<a> } </a> 
<a> } ; </a> 
<a> } </a> 
<a> public abstract InternalLogger newInstance ( String name ) ; </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . logging ; </a> 
<a> import org . jboss . logging . Logger ; </a> 
<a> class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> private final Logger logger ; </a> 
<a> <RARE_TOKEN> ( Logger logger ) { </a> 
<a> this . logger = logger ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void trace ( String msg ) { </a> 
<a> logger . trace ( msg ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void trace ( String msg , Throwable cause ) { </a> 
<a> logger . trace ( msg , cause ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void debug ( String msg ) { </a> 
<a> logger . debug ( msg ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void debug ( String msg , Throwable cause ) { </a> 
<a> logger . debug ( msg , cause ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void error ( String msg ) { </a> 
<a> logger . error ( msg ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void error ( String msg , Throwable cause ) { </a> 
<a> logger . error ( msg , cause ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void info ( String msg ) { </a> 
<a> logger . info ( msg ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void info ( String msg , Throwable cause ) { </a> 
<a> logger . info ( msg , cause ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return logger . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> @ SuppressWarnings ( <RARE_TOKEN> ) </a> 
<a> public boolean isDebugEnabled ( ) { </a> 
<a> return logger . isDebugEnabled ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return true ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> @ SuppressWarnings ( <RARE_TOKEN> ) </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return logger . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return true ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void warn ( String msg ) { </a> 
<a> logger . warn ( msg ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void warn ( String msg , Throwable cause ) { </a> 
<a> logger . warn ( msg , cause ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public String toString ( ) { </a> 
<a> return String . valueOf ( logger . getName ( ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . logging ; </a> 
<a> import java . util . logging . Level ; </a> 
<a> import java . util . logging . Logger ; </a> 
<a> class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> private final Logger logger ; </a> 
<a> private final String <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> ( Logger logger , String <RARE_TOKEN> ) { </a> 
<a> this . logger = logger ; </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void trace ( String msg ) { </a> 
<a> logger . <RARE_TOKEN> ( Level . <RARE_TOKEN> , <RARE_TOKEN> , null , msg ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void trace ( String msg , Throwable cause ) { </a> 
<a> logger . <RARE_TOKEN> ( Level . <RARE_TOKEN> , <RARE_TOKEN> , null , msg , cause ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void debug ( String msg ) { </a> 
<a> logger . <RARE_TOKEN> ( Level . <RARE_TOKEN> , <RARE_TOKEN> , null , msg ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void debug ( String msg , Throwable cause ) { </a> 
<a> logger . <RARE_TOKEN> ( Level . <RARE_TOKEN> , <RARE_TOKEN> , null , msg , cause ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void error ( String msg ) { </a> 
<a> logger . <RARE_TOKEN> ( Level . <RARE_TOKEN> , <RARE_TOKEN> , null , msg ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void error ( String msg , Throwable cause ) { </a> 
<a> logger . <RARE_TOKEN> ( Level . <RARE_TOKEN> , <RARE_TOKEN> , null , msg , cause ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void info ( String msg ) { </a> 
<a> logger . <RARE_TOKEN> ( Level . <RARE_TOKEN> , <RARE_TOKEN> , null , msg ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void info ( String msg , Throwable cause ) { </a> 
<a> logger . <RARE_TOKEN> ( Level . <RARE_TOKEN> , <RARE_TOKEN> , null , msg , cause ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return logger . <RARE_TOKEN> ( Level . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean isDebugEnabled ( ) { </a> 
<a> return logger . <RARE_TOKEN> ( Level . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return logger . <RARE_TOKEN> ( Level . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return logger . <RARE_TOKEN> ( Level . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return logger . <RARE_TOKEN> ( Level . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void warn ( String msg ) { </a> 
<a> logger . <RARE_TOKEN> ( Level . <RARE_TOKEN> , <RARE_TOKEN> , null , msg ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void warn ( String msg , Throwable cause ) { </a> 
<a> logger . <RARE_TOKEN> ( Level . <RARE_TOKEN> , <RARE_TOKEN> , null , msg , cause ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public String toString ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . logging ; </a> 
<a> public class <RARE_TOKEN> extends InternalLoggerFactory { </a> 
<a> @ Override </a> 
<a> public InternalLogger newInstance ( String name ) { </a> 
<a> final java . util . logging . Logger logger = </a> 
<a> java . util . logging . Logger . getLogger ( name ) ; </a> 
<a> return new <RARE_TOKEN> ( logger , name ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . logging ; </a> 
<a> import org . apache . <RARE_TOKEN> . Logger ; </a> 
<a> class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> private final Logger logger ; </a> 
<a> <RARE_TOKEN> ( Logger logger ) { </a> 
<a> this . logger = logger ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void trace ( String msg ) { </a> 
<a> logger . trace ( msg ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void trace ( String msg , Throwable cause ) { </a> 
<a> logger . trace ( msg , cause ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void debug ( String msg ) { </a> 
<a> logger . debug ( msg ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void debug ( String msg , Throwable cause ) { </a> 
<a> logger . debug ( msg , cause ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void error ( String msg ) { </a> 
<a> logger . error ( msg ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void error ( String msg , Throwable cause ) { </a> 
<a> logger . error ( msg , cause ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void info ( String msg ) { </a> 
<a> logger . info ( msg ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void info ( String msg , Throwable cause ) { </a> 
<a> logger . info ( msg , cause ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return logger . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean isDebugEnabled ( ) { </a> 
<a> return logger . isDebugEnabled ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return true ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return logger . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return true ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void warn ( String msg ) { </a> 
<a> logger . warn ( msg ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void warn ( String msg , Throwable cause ) { </a> 
<a> logger . warn ( msg , cause ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public String toString ( ) { </a> 
<a> return String . valueOf ( logger . getName ( ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . logging ; </a> 
<a> public class <RARE_TOKEN> extends InternalLoggerFactory { </a> 
<a> @ Override </a> 
<a> public InternalLogger newInstance ( String name ) { </a> 
<a> final org . apache . <RARE_TOKEN> . Logger logger = </a> 
<a> org . apache . <RARE_TOKEN> . Logger . getLogger ( name ) ; </a> 
<a> return new <RARE_TOKEN> ( logger ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . logging ; </a> 
<a> import org . <RARE_TOKEN> . service . log . <RARE_TOKEN> ; </a> 
<a> class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> private final <RARE_TOKEN> parent ; </a> 
<a> private final InternalLogger <RARE_TOKEN> ; </a> 
<a> private final String name ; </a> 
<a> private final String <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> parent , String name , InternalLogger <RARE_TOKEN> ) { </a> 
<a> this . parent = parent ; </a> 
<a> this . name = name ; </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> + name + <RARE_TOKEN> " ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void trace ( String msg ) { </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void trace ( String msg , Throwable cause ) { </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void debug ( String msg ) { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = parent . <RARE_TOKEN> ( ) ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> . log ( <RARE_TOKEN> . <RARE_TOKEN> , <RARE_TOKEN> + msg ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> . debug ( msg ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void debug ( String msg , Throwable cause ) { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = parent . <RARE_TOKEN> ( ) ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> . log ( <RARE_TOKEN> . <RARE_TOKEN> , <RARE_TOKEN> + msg , cause ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> . debug ( msg , cause ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void error ( String msg ) { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = parent . <RARE_TOKEN> ( ) ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> . log ( <RARE_TOKEN> . <RARE_TOKEN> , <RARE_TOKEN> + msg ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> . error ( msg ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void error ( String msg , Throwable cause ) { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = parent . <RARE_TOKEN> ( ) ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> . log ( <RARE_TOKEN> . <RARE_TOKEN> , <RARE_TOKEN> + msg , cause ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> . error ( msg , cause ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void info ( String msg ) { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = parent . <RARE_TOKEN> ( ) ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> . log ( <RARE_TOKEN> . <RARE_TOKEN> , <RARE_TOKEN> + msg ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> . info ( msg ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void info ( String msg , Throwable cause ) { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = parent . <RARE_TOKEN> ( ) ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> . log ( <RARE_TOKEN> . <RARE_TOKEN> , <RARE_TOKEN> + msg , cause ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> . info ( msg , cause ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean isDebugEnabled ( ) { </a> 
<a> return true ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return true ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return true ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return true ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void warn ( String msg ) { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = parent . <RARE_TOKEN> ( ) ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> . log ( <RARE_TOKEN> . <RARE_TOKEN> , <RARE_TOKEN> + msg ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> . warn ( msg ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void warn ( String msg , Throwable cause ) { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = parent . <RARE_TOKEN> ( ) ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> . log ( <RARE_TOKEN> . <RARE_TOKEN> , <RARE_TOKEN> + msg , cause ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> . warn ( msg , cause ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public String toString ( ) { </a> 
<a> return name ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . logging ; </a> 
<a> import org . <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import org . <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import org . <RARE_TOKEN> . service . log . <RARE_TOKEN> ; </a> 
<a> import org . <RARE_TOKEN> . util . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> public class <RARE_TOKEN> extends InternalLoggerFactory { </a> 
<a> private final <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> private final InternalLoggerFactory <RARE_TOKEN> ; </a> 
<a> volatile <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> public <RARE_TOKEN> ( <RARE_TOKEN> ctx ) { </a> 
<a> this ( ctx , null ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( <RARE_TOKEN> ctx , InternalLoggerFactory <RARE_TOKEN> ) { </a> 
<a> if ( ctx == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> <RARE_TOKEN> = InternalLoggerFactory . <RARE_TOKEN> ( ) ; </a> 
<a> if ( <RARE_TOKEN> instanceof <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> = new <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = new <RARE_TOKEN> ( </a> 
<a> ctx , <RARE_TOKEN> , null ) { </a> 
<a> @ Override </a> 
<a> public Object <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> service = ( <RARE_TOKEN> ) super . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = service ; </a> 
<a> return service ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> , </a> 
<a> Object service ) { </a> 
<a> <RARE_TOKEN> = null ; </a> 
<a> } </a> 
<a> } ; </a> 
<a> <RARE_TOKEN> . open ( ) ; </a> 
<a> } </a> 
<a> public InternalLoggerFactory <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public void destroy ( ) { </a> 
<a> <RARE_TOKEN> = null ; </a> 
<a> <RARE_TOKEN> . close ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public InternalLogger newInstance ( String name ) { </a> 
<a> return new <RARE_TOKEN> ( this , name , <RARE_TOKEN> . newInstance ( name ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . logging ; </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . util ; </a> 
<a> public interface <RARE_TOKEN> < T > { </a> 
<a> T get ( ) ; </a> 
<a> void set ( T value ) ; </a> 
<a> T <RARE_TOKEN> ( T value ) ; </a> 
<a> T <RARE_TOKEN> ( T value ) ; </a> 
<a> boolean <RARE_TOKEN> ( T <RARE_TOKEN> , T <RARE_TOKEN> ) ; </a> 
<a> void remove ( ) ; </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . util ; </a> 
<a> import java . util . concurrent . ConcurrentHashMap ; </a> 
<a> import java . util . concurrent . <RARE_TOKEN> ; </a> 
<a> public final class <RARE_TOKEN> < T > extends <RARE_TOKEN> { </a> 
<a> private static final <RARE_TOKEN> < String , Boolean > names = new ConcurrentHashMap < String , Boolean > ( ) ; </a> 
<a> public <RARE_TOKEN> ( String name ) { </a> 
<a> super ( names , name ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . util ; </a> 
<a> public interface <RARE_TOKEN> { </a> 
<a> < T > <RARE_TOKEN> < T > <RARE_TOKEN> ( <RARE_TOKEN> < T > key ) ; </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . util ; </a> 
<a> import java . nio . charset . Charset ; </a> 
<a> import java . nio . charset . <RARE_TOKEN> ; </a> 
<a> import java . nio . charset . <RARE_TOKEN> ; </a> 
<a> import java . nio . charset . <RARE_TOKEN> ; </a> 
<a> import java . util . <RARE_TOKEN> ; </a> 
<a> import java . util . Map ; </a> 
<a> public final class CharsetUtil { </a> 
<a> public static final Charset <RARE_TOKEN> = Charset . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> public static final Charset <RARE_TOKEN> = Charset . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> public static final Charset <RARE_TOKEN> = Charset . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> public static final Charset <RARE_TOKEN> = Charset . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> public static final Charset <RARE_TOKEN> = Charset . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> public static final Charset <RARE_TOKEN> = Charset . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> private static final <RARE_TOKEN> < Map < Charset , <RARE_TOKEN> > > <RARE_TOKEN> = </a> 
<a> new <RARE_TOKEN> < Map < Charset , <RARE_TOKEN> > > ( ) { </a> 
<a> @ Override </a> 
<a> protected Map < Charset , <RARE_TOKEN> > <RARE_TOKEN> ( ) { </a> 
<a> return new <RARE_TOKEN> < Charset , <RARE_TOKEN> > ( ) ; </a> 
<a> } </a> 
<a> } ; </a> 
<a> private static final <RARE_TOKEN> < Map < Charset , <RARE_TOKEN> > > <RARE_TOKEN> = </a> 
<a> new <RARE_TOKEN> < Map < Charset , <RARE_TOKEN> > > ( ) { </a> 
<a> @ Override </a> 
<a> protected Map < Charset , <RARE_TOKEN> > <RARE_TOKEN> ( ) { </a> 
<a> return new <RARE_TOKEN> < Charset , <RARE_TOKEN> > ( ) ; </a> 
<a> } </a> 
<a> } ; </a> 
<a> public static <RARE_TOKEN> <RARE_TOKEN> ( Charset charset ) { </a> 
<a> if ( charset == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> Map < Charset , <RARE_TOKEN> > map = <RARE_TOKEN> . get ( ) ; </a> 
<a> <RARE_TOKEN> e = map . get ( charset ) ; </a> 
<a> if ( e != null ) { </a> 
<a> e . <RARE_TOKEN> ( ) ; </a> 
<a> e . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> e . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> return e ; </a> 
<a> } </a> 
<a> e = charset . <RARE_TOKEN> ( ) ; </a> 
<a> e . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> e . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> map . put ( charset , e ) ; </a> 
<a> return e ; </a> 
<a> } </a> 
<a> public static <RARE_TOKEN> <RARE_TOKEN> ( Charset charset ) { </a> 
<a> if ( charset == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> Map < Charset , <RARE_TOKEN> > map = <RARE_TOKEN> . get ( ) ; </a> 
<a> <RARE_TOKEN> d = map . get ( charset ) ; </a> 
<a> if ( d != null ) { </a> 
<a> d . <RARE_TOKEN> ( ) ; </a> 
<a> d . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> d . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> return d ; </a> 
<a> } </a> 
<a> d = charset . <RARE_TOKEN> ( ) ; </a> 
<a> d . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> d . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> map . put ( charset , d ) ; </a> 
<a> return d ; </a> 
<a> } </a> 
<a> private CharsetUtil ( ) { </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . util ; </a> 
<a> import java . util . <RARE_TOKEN> ; </a> 
<a> import java . util . Map ; </a> 
<a> import java . util . concurrent . atomic . AtomicReference ; </a> 
<a> public class <RARE_TOKEN> implements <RARE_TOKEN> { </a> 
<a> private Map < <RARE_TOKEN> < ? > , <RARE_TOKEN> < ? > > map ; </a> 
<a> @ Override </a> 
<a> public synchronized < T > <RARE_TOKEN> < T > <RARE_TOKEN> ( <RARE_TOKEN> < T > key ) { </a> 
<a> Map < <RARE_TOKEN> < ? > , <RARE_TOKEN> < ? > > map = this . map ; </a> 
<a> if ( map == null ) { </a> 
<a> map = this . map = new <RARE_TOKEN> < <RARE_TOKEN> < ? > , <RARE_TOKEN> < ? > > ( 2 ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> < T > <RARE_TOKEN> = ( <RARE_TOKEN> < T > ) map . get ( key ) ; </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> <RARE_TOKEN> = new <RARE_TOKEN> < T > ( ) ; </a> 
<a> map . put ( key , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> private class <RARE_TOKEN> < T > extends AtomicReference < T > implements <RARE_TOKEN> < T > { </a> 
<a> private static final long serialVersionUID = - <RARE_TOKEN> ; </a> 
<a> @ Override </a> 
<a> public T <RARE_TOKEN> ( T value ) { </a> 
<a> if ( <RARE_TOKEN> ( null , value ) ) { </a> 
<a> return null ; </a> 
<a> } else { </a> 
<a> return get ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void remove ( ) { </a> 
<a> set ( null ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . util ; </a> 
<a> import io . netty . logging . InternalLogger ; </a> 
<a> import io . netty . logging . InternalLoggerFactory ; </a> 
<a> import io . netty . util . internal . <RARE_TOKEN> ; </a> 
<a> import io . netty . util . internal . <RARE_TOKEN> ; </a> 
<a> import java . util . ArrayList ; </a> 
<a> import java . util . Collections ; </a> 
<a> import java . util . HashSet ; </a> 
<a> import java . util . Iterator ; </a> 
<a> import java . util . List ; </a> 
<a> import java . util . Set ; </a> 
<a> import java . util . concurrent . ConcurrentHashMap ; </a> 
<a> import java . util . concurrent . <RARE_TOKEN> ; </a> 
<a> import java . util . concurrent . ThreadFactory ; </a> 
<a> import java . util . concurrent . TimeUnit ; </a> 
<a> import java . util . concurrent . atomic . AtomicBoolean ; </a> 
<a> import java . util . concurrent . atomic . AtomicInteger ; </a> 
<a> import java . util . concurrent . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import java . util . concurrent . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> public class <RARE_TOKEN> implements <RARE_TOKEN> { </a> 
<a> static final InternalLogger logger = </a> 
<a> InternalLoggerFactory . getInstance ( <RARE_TOKEN> . class ) ; </a> 
<a> private static final <RARE_TOKEN> <RARE_TOKEN> = </a> 
<a> new <RARE_TOKEN> ( <RARE_TOKEN> . class ) ; </a> 
<a> private final <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( ) ; </a> 
<a> final Thread <RARE_TOKEN> ; </a> 
<a> final AtomicBoolean shutdown = new AtomicBoolean ( ) ; </a> 
<a> private final long <RARE_TOKEN> ; </a> 
<a> final long <RARE_TOKEN> ; </a> 
<a> final Set < <RARE_TOKEN> > [ ] <RARE_TOKEN> ; </a> 
<a> final int <RARE_TOKEN> ; </a> 
<a> final <RARE_TOKEN> lock = new <RARE_TOKEN> ( ) ; </a> 
<a> volatile int <RARE_TOKEN> ; </a> 
<a> public <RARE_TOKEN> ( ) { </a> 
<a> this ( <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( long <RARE_TOKEN> , TimeUnit unit ) { </a> 
<a> this ( <RARE_TOKEN> . <RARE_TOKEN> ( ) , <RARE_TOKEN> , unit ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( long <RARE_TOKEN> , TimeUnit unit , int <RARE_TOKEN> ) { </a> 
<a> this ( <RARE_TOKEN> . <RARE_TOKEN> ( ) , <RARE_TOKEN> , unit , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( ThreadFactory threadFactory ) { </a> 
<a> this ( threadFactory , <RARE_TOKEN> , TimeUnit . MILLISECONDS ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( </a> 
<a> ThreadFactory threadFactory , long <RARE_TOKEN> , TimeUnit unit ) { </a> 
<a> this ( threadFactory , <RARE_TOKEN> , unit , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( </a> 
<a> ThreadFactory threadFactory , </a> 
<a> long <RARE_TOKEN> , TimeUnit unit , int <RARE_TOKEN> ) { </a> 
<a> if ( threadFactory == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( unit == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> <= 0 ) { </a> 
<a> throw new IllegalArgumentException ( </a> 
<a> <RARE_TOKEN> must be <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> " + <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> <= 0 ) { </a> 
<a> throw new IllegalArgumentException ( </a> 
<a> <RARE_TOKEN> must be <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> " + <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . length - 1 ; </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> = unit . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> == Long . MAX_VALUE || </a> 
<a> <RARE_TOKEN> >= Long . MAX_VALUE / <RARE_TOKEN> . length ) { </a> 
<a> throw new IllegalArgumentException ( </a> 
<a> <RARE_TOKEN> is <RARE_TOKEN> <RARE_TOKEN> " + </a> 
<a> <RARE_TOKEN> + ' ' + unit ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> * <RARE_TOKEN> . length ; </a> 
<a> <RARE_TOKEN> = threadFactory . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ SuppressWarnings ( "unchecked" ) </a> 
<a> private static Set < <RARE_TOKEN> > [ ] <RARE_TOKEN> ( int <RARE_TOKEN> ) { </a> 
<a> if ( <RARE_TOKEN> <= 0 ) { </a> 
<a> throw new IllegalArgumentException ( </a> 
<a> <RARE_TOKEN> must be <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> " + <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> > <RARE_TOKEN> ) { </a> 
<a> throw new IllegalArgumentException ( </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> not be <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> " + <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> Set < <RARE_TOKEN> > [ ] <RARE_TOKEN> = new Set [ <RARE_TOKEN> ] ; </a> 
<a> for ( int i = 0 ; i < <RARE_TOKEN> . length ; i ++ ) { </a> 
<a> <RARE_TOKEN> [ i ] = Collections . <RARE_TOKEN> ( </a> 
<a> new ConcurrentHashMap < <RARE_TOKEN> , Boolean > ( 16 , <RARE_TOKEN> , 4 ) ) ; </a> 
<a> } </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> private static int <RARE_TOKEN> ( int <RARE_TOKEN> ) { </a> 
<a> int <RARE_TOKEN> = 1 ; </a> 
<a> while ( <RARE_TOKEN> < <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> 1 ; </a> 
<a> } </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public synchronized void start ( ) { </a> 
<a> if ( shutdown . get ( ) ) { </a> 
<a> throw new IllegalStateException ( <RARE_TOKEN> be <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( ! <RARE_TOKEN> . <RARE_TOKEN> ( ) ) { </a> 
<a> <RARE_TOKEN> . start ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public synchronized Set < <RARE_TOKEN> > <RARE_TOKEN> ( ) { </a> 
<a> if ( Thread . currentThread ( ) == <RARE_TOKEN> ) { </a> 
<a> throw new IllegalStateException ( </a> 
<a> <RARE_TOKEN> . class . getSimpleName ( ) + </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> be <RARE_TOKEN> from " + </a> 
<a> <RARE_TOKEN> . class . getSimpleName ( ) ) ; </a> 
<a> } </a> 
<a> if ( ! shutdown . <RARE_TOKEN> ( false , true ) ) { </a> 
<a> return Collections . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> boolean <RARE_TOKEN> = false ; </a> 
<a> while ( <RARE_TOKEN> . <RARE_TOKEN> ( ) ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> try { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } catch ( InterruptedException e ) { </a> 
<a> <RARE_TOKEN> = true ; </a> 
<a> } </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> ) { </a> 
<a> Thread . currentThread ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> Set < <RARE_TOKEN> > <RARE_TOKEN> = new HashSet < <RARE_TOKEN> > ( ) ; </a> 
<a> for ( Set < <RARE_TOKEN> > <RARE_TOKEN> : <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . clear ( ) ; </a> 
<a> } </a> 
<a> return Collections . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public <RARE_TOKEN> <RARE_TOKEN> ( <RARE_TOKEN> task , long delay , TimeUnit unit ) { </a> 
<a> final long currentTime = System . currentTimeMillis ( ) ; </a> 
<a> if ( task == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( unit == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( ! <RARE_TOKEN> . <RARE_TOKEN> ( ) ) { </a> 
<a> start ( ) ; </a> 
<a> } </a> 
<a> delay = unit . <RARE_TOKEN> ( delay ) ; </a> 
<a> <RARE_TOKEN> timeout = new <RARE_TOKEN> ( task , currentTime + delay ) ; </a> 
<a> <RARE_TOKEN> ( timeout , delay ) ; </a> 
<a> return timeout ; </a> 
<a> } </a> 
<a> void <RARE_TOKEN> ( <RARE_TOKEN> timeout , long delay ) { </a> 
<a> if ( delay < <RARE_TOKEN> ) { </a> 
<a> delay = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> final long <RARE_TOKEN> = delay <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> final long <RARE_TOKEN> = delay <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> final long <RARE_TOKEN> = </a> 
<a> <RARE_TOKEN> / <RARE_TOKEN> + ( <RARE_TOKEN> != 0 ? 1 : 0 ) ; </a> 
<a> final long <RARE_TOKEN> = </a> 
<a> delay / <RARE_TOKEN> - ( delay <RARE_TOKEN> <RARE_TOKEN> == 0 ? 1 : 0 ) ; </a> 
<a> lock . <RARE_TOKEN> ( ) . lock ( ) ; </a> 
<a> try { </a> 
<a> int <RARE_TOKEN> = ( int ) ( <RARE_TOKEN> + <RARE_TOKEN> & <RARE_TOKEN> ) ; </a> 
<a> timeout . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> timeout . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> [ <RARE_TOKEN> ] . add ( timeout ) ; </a> 
<a> } finally { </a> 
<a> lock . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private final class <RARE_TOKEN> implements Runnable { </a> 
<a> private long <RARE_TOKEN> ; </a> 
<a> private long <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> ( ) { </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void run ( ) { </a> 
<a> List < <RARE_TOKEN> > <RARE_TOKEN> = </a> 
<a> new ArrayList < <RARE_TOKEN> > ( ) ; </a> 
<a> <RARE_TOKEN> = System . currentTimeMillis ( ) ; </a> 
<a> <RARE_TOKEN> = 1 ; </a> 
<a> while ( ! shutdown . get ( ) ) { </a> 
<a> final long <RARE_TOKEN> = <RARE_TOKEN> ( ) ; </a> 
<a> if ( <RARE_TOKEN> > 0 ) { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( </a> 
<a> List < <RARE_TOKEN> > <RARE_TOKEN> , long <RARE_TOKEN> ) { </a> 
<a> lock . <RARE_TOKEN> ( ) . lock ( ) ; </a> 
<a> try { </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> = <RARE_TOKEN> + 1 & <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> [ <RARE_TOKEN> ] . <RARE_TOKEN> ( ) , <RARE_TOKEN> ) ; </a> 
<a> } finally { </a> 
<a> lock . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( </a> 
<a> List < <RARE_TOKEN> > <RARE_TOKEN> , </a> 
<a> Iterator < <RARE_TOKEN> > i , long <RARE_TOKEN> ) { </a> 
<a> List < <RARE_TOKEN> > <RARE_TOKEN> = null ; </a> 
<a> while ( i . <RARE_TOKEN> ( ) ) { </a> 
<a> <RARE_TOKEN> timeout = i . next ( ) ; </a> 
<a> if ( timeout . <RARE_TOKEN> <= 0 ) { </a> 
<a> i . remove ( ) ; </a> 
<a> if ( timeout . <RARE_TOKEN> <= <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> . add ( timeout ) ; </a> 
<a> } else { </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> <RARE_TOKEN> = new ArrayList < <RARE_TOKEN> . <RARE_TOKEN> > ( ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> . add ( timeout ) ; </a> 
<a> } </a> 
<a> } else { </a> 
<a> timeout . <RARE_TOKEN> -- ; </a> 
<a> } </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> for ( <RARE_TOKEN> timeout : <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( timeout , timeout . <RARE_TOKEN> - <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( </a> 
<a> List < <RARE_TOKEN> > <RARE_TOKEN> ) { </a> 
<a> for ( int i = <RARE_TOKEN> . size ( ) - 1 ; i >= 0 ; i -- ) { </a> 
<a> <RARE_TOKEN> . get ( i ) . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> . clear ( ) ; </a> 
<a> } </a> 
<a> private long <RARE_TOKEN> ( ) { </a> 
<a> long <RARE_TOKEN> = <RARE_TOKEN> + <RARE_TOKEN> * <RARE_TOKEN> ; </a> 
<a> for ( ; ; ) { </a> 
<a> final long currentTime = System . currentTimeMillis ( ) ; </a> 
<a> long <RARE_TOKEN> = <RARE_TOKEN> * <RARE_TOKEN> - ( currentTime - <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> . <RARE_TOKEN> ( ) ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> / 10 * 10 ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> <= 0 ) { </a> 
<a> break ; </a> 
<a> } </a> 
<a> try { </a> 
<a> Thread . sleep ( <RARE_TOKEN> ) ; </a> 
<a> } catch ( InterruptedException e ) { </a> 
<a> if ( shutdown . get ( ) ) { </a> 
<a> return - 1 ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> <RARE_TOKEN> ++ ; </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<a> private final class <RARE_TOKEN> implements <RARE_TOKEN> { </a> 
<a> private static final int <RARE_TOKEN> = 0 ; </a> 
<a> private static final int <RARE_TOKEN> = 1 ; </a> 
<a> private static final int <RARE_TOKEN> = 2 ; </a> 
<a> private final <RARE_TOKEN> task ; </a> 
<a> final long <RARE_TOKEN> ; </a> 
<a> volatile int <RARE_TOKEN> ; </a> 
<a> volatile long <RARE_TOKEN> ; </a> 
<a> private final AtomicInteger state = new AtomicInteger ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> task , long <RARE_TOKEN> ) { </a> 
<a> this . task = task ; </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public <RARE_TOKEN> <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> . this ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public <RARE_TOKEN> <RARE_TOKEN> ( ) { </a> 
<a> return task ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean cancel ( ) { </a> 
<a> if ( ! state . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> [ <RARE_TOKEN> ] . remove ( this ) ; </a> 
<a> return true ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean isCancelled ( ) { </a> 
<a> return state . get ( ) == <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return state . get ( ) != <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> if ( ! state . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ) { </a> 
<a> return ; </a> 
<a> } </a> 
<a> try { </a> 
<a> task . run ( this ) ; </a> 
<a> } catch ( Throwable t ) { </a> 
<a> if ( logger . <RARE_TOKEN> ( ) ) { </a> 
<a> logger . warn ( </a> 
<a> <RARE_TOKEN> exception <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> " + </a> 
<a> <RARE_TOKEN> . class . getSimpleName ( ) + <RARE_TOKEN> , t ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public String toString ( ) { </a> 
<a> long currentTime = System . currentTimeMillis ( ) ; </a> 
<a> long <RARE_TOKEN> = <RARE_TOKEN> - currentTime ; </a> 
<a> StringBuilder buf = new StringBuilder ( <RARE_TOKEN> ) ; </a> 
<a> buf . append ( getClass ( ) . getSimpleName ( ) ) ; </a> 
<a> buf . append ( <RARE_TOKEN> ) ; </a> 
<a> buf . append ( <RARE_TOKEN> " ) ; </a> 
<a> if ( <RARE_TOKEN> > 0 ) { </a> 
<a> buf . append ( <RARE_TOKEN> ) ; </a> 
<a> buf . append ( " <RARE_TOKEN> <RARE_TOKEN> " ) ; </a> 
<a> } else if ( <RARE_TOKEN> < 0 ) { </a> 
<a> buf . append ( - <RARE_TOKEN> ) ; </a> 
<a> buf . append ( " <RARE_TOKEN> <RARE_TOKEN> " ) ; </a> 
<a> } else { </a> 
<a> buf . append ( <RARE_TOKEN> " ) ; </a> 
<a> } </a> 
<a> if ( isCancelled ( ) ) { </a> 
<a> buf . append ( ", <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> return buf . append ( <RARE_TOKEN> ) . toString ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . util ; </a> 
<a> import io . netty . logging . InternalLogger ; </a> 
<a> import io . netty . logging . InternalLoggerFactory ; </a> 
<a> import java . io . <RARE_TOKEN> ; </a> 
<a> import java . io . <RARE_TOKEN> ; </a> 
<a> import java . net . InetAddress ; </a> 
<a> import java . net . NetworkInterface ; </a> 
<a> import java . net . SocketException ; </a> 
<a> import java . net . <RARE_TOKEN> ; </a> 
<a> import java . util . <RARE_TOKEN> ; </a> 
<a> public final class <RARE_TOKEN> { </a> 
<a> public static final InetAddress <RARE_TOKEN> ; </a> 
<a> public static final NetworkInterface <RARE_TOKEN> ; </a> 
<a> public static final int <RARE_TOKEN> ; </a> 
<a> private static final InternalLogger logger = </a> 
<a> InternalLoggerFactory . getInstance ( <RARE_TOKEN> . class ) ; </a> 
<a> static { </a> 
<a> InetAddress <RARE_TOKEN> = null ; </a> 
<a> try { </a> 
<a> <RARE_TOKEN> = InetAddress . <RARE_TOKEN> ( ) ; </a> 
<a> } catch ( <RARE_TOKEN> e ) { </a> 
<a> try { </a> 
<a> <RARE_TOKEN> = InetAddress . <RARE_TOKEN> ( new byte [ ] { <RARE_TOKEN> , 0 , 0 , 1 } ) ; </a> 
<a> } catch ( <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> try { </a> 
<a> <RARE_TOKEN> = InetAddress . <RARE_TOKEN> ( </a> 
<a> new byte [ ] { 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 1 } ) ; </a> 
<a> } catch ( <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> logger . error ( "Failed to <RARE_TOKEN> <RARE_TOKEN> - <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> NetworkInterface <RARE_TOKEN> ; </a> 
<a> try { </a> 
<a> <RARE_TOKEN> = NetworkInterface . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } catch ( SocketException e ) { </a> 
<a> <RARE_TOKEN> = null ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> try { </a> 
<a> for ( <RARE_TOKEN> < NetworkInterface > <RARE_TOKEN> = NetworkInterface . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; ) { </a> 
<a> NetworkInterface networkInterface = <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> if ( networkInterface . <RARE_TOKEN> ( ) ) { </a> 
<a> <RARE_TOKEN> = networkInterface ; </a> 
<a> break ; </a> 
<a> } </a> 
<a> } </a> 
<a> } catch ( SocketException e ) { </a> 
<a> logger . error ( "Failed to <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> , e ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> in = null ; </a> 
<a> try { </a> 
<a> in = new <RARE_TOKEN> ( new <RARE_TOKEN> ( <RARE_TOKEN> ) ) ; </a> 
<a> <RARE_TOKEN> = Integer . parseInt ( in . <RARE_TOKEN> ( ) ) ; </a> 
<a> } catch ( Exception e ) { </a> 
<a> } finally { </a> 
<a> if ( in != null ) { </a> 
<a> try { </a> 
<a> in . close ( ) ; </a> 
<a> } catch ( Exception e ) { </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> private <RARE_TOKEN> ( ) { </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . util ; </a> 
<a> import java . util . Set ; </a> 
<a> import java . util . concurrent . TimeUnit ; </a> 
<a> public interface <RARE_TOKEN> { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> ( <RARE_TOKEN> task , long delay , TimeUnit unit ) ; </a> 
<a> Set < <RARE_TOKEN> > <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . util ; </a> 
<a> import java . util . concurrent . TimeUnit ; </a> 
<a> public interface <RARE_TOKEN> { </a> 
<a> void run ( <RARE_TOKEN> timeout ) throws Exception ; </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . util . internal ; </a> 
<a> import java . util . concurrent . atomic . <RARE_TOKEN> ; </a> 
<a> import java . util . concurrent . atomic . <RARE_TOKEN> ; </a> 
<a> final class <RARE_TOKEN> { </a> 
<a> private static final boolean <RARE_TOKEN> ; </a> 
<a> static final class <RARE_TOKEN> { </a> 
<a> volatile <RARE_TOKEN> next ; </a> 
<a> } </a> 
<a> static { </a> 
<a> boolean <RARE_TOKEN> = false ; </a> 
<a> try { </a> 
<a> <RARE_TOKEN> < <RARE_TOKEN> , <RARE_TOKEN> > <RARE_TOKEN> = </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( </a> 
<a> <RARE_TOKEN> . class , <RARE_TOKEN> . class , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> . set ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> . next != <RARE_TOKEN> ) { </a> 
<a> throw new Exception ( ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> = true ; </a> 
<a> } catch ( Throwable t ) { </a> 
<a> } </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> static < T , V > <RARE_TOKEN> < T , V > <RARE_TOKEN> ( Class < T > <RARE_TOKEN> , Class < V > <RARE_TOKEN> , String <RARE_TOKEN> ) { </a> 
<a> if ( <RARE_TOKEN> ) { </a> 
<a> return <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } else { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> } </a> 
<a> static < T > <RARE_TOKEN> < T > <RARE_TOKEN> ( Class < T > <RARE_TOKEN> , String <RARE_TOKEN> ) { </a> 
<a> if ( <RARE_TOKEN> ) { </a> 
<a> return <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } else { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> } </a> 
<a> static boolean <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> private <RARE_TOKEN> ( ) { </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . util . internal ; </a> 
<a> import java . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import java . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import java . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import java . util . concurrent . atomic . AtomicInteger ; </a> 
<a> import java . util . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> public final class <RARE_TOKEN> { </a> 
<a> private static final int <RARE_TOKEN> = <RARE_TOKEN> ( ) ; </a> 
<a> private static final boolean <RARE_TOKEN> = <RARE_TOKEN> ( AtomicInteger . class . <RARE_TOKEN> ( ) ) ; </a> 
<a> private static final boolean <RARE_TOKEN> ; </a> 
<a> static { </a> 
<a> String os = System . getProperty ( <RARE_TOKEN> ) . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> = os . contains ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public static boolean <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public static boolean <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public static int <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> private static boolean <RARE_TOKEN> ( <RARE_TOKEN> loader ) { </a> 
<a> String value = <RARE_TOKEN> . get ( <RARE_TOKEN> ) ; </a> 
<a> if ( value != null ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> value = <RARE_TOKEN> . get ( <RARE_TOKEN> ) ; </a> 
<a> if ( value == null ) { </a> 
<a> value = <RARE_TOKEN> . get ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( ! <RARE_TOKEN> . equalsIgnoreCase ( value ) ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> try { </a> 
<a> Class < ? > <RARE_TOKEN> = Class . <RARE_TOKEN> ( <RARE_TOKEN> , true , loader ) ; </a> 
<a> return <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } catch ( Exception e ) { </a> 
<a> } </a> 
<a> return false ; </a> 
<a> } </a> 
<a> private static boolean <RARE_TOKEN> ( final Class < ? > <RARE_TOKEN> ) throws <RARE_TOKEN> { </a> 
<a> return <RARE_TOKEN> . <RARE_TOKEN> ( new <RARE_TOKEN> < Boolean > ( ) { </a> 
<a> @ Override </a> 
<a> public Boolean run ( ) throws Exception { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> return true ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> } </a> 
<a> private static int <RARE_TOKEN> ( ) { </a> 
<a> try { </a> 
<a> Class . <RARE_TOKEN> ( <RARE_TOKEN> , false , <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> return 6 ; </a> 
<a> } catch ( Exception e ) { </a> 
<a> } </a> 
<a> try { </a> 
<a> <RARE_TOKEN> . class . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> return 7 ; </a> 
<a> } catch ( Exception e ) { </a> 
<a> } </a> 
<a> return 6 ; </a> 
<a> } </a> 
<a> private <RARE_TOKEN> ( ) { </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . util . internal ; </a> 
<a> import io . netty . logging . InternalLogger ; </a> 
<a> import io . netty . logging . InternalLoggerFactory ; </a> 
<a> import java . util . concurrent . atomic . AtomicBoolean ; </a> 
<a> import java . util . concurrent . atomic . <RARE_TOKEN> ; </a> 
<a> public class <RARE_TOKEN> { </a> 
<a> private static final int <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final InternalLogger logger = </a> 
<a> InternalLoggerFactory . getInstance ( <RARE_TOKEN> . class ) ; </a> 
<a> private final Class < ? > type ; </a> 
<a> private final <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( ) ; </a> 
<a> private final AtomicBoolean <RARE_TOKEN> = new AtomicBoolean ( ) ; </a> 
<a> public <RARE_TOKEN> ( Class < ? > type ) { </a> 
<a> if ( type == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> this . type = type ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> if ( <RARE_TOKEN> . <RARE_TOKEN> ( ) > <RARE_TOKEN> ) { </a> 
<a> if ( logger . <RARE_TOKEN> ( ) ) { </a> 
<a> if ( <RARE_TOKEN> . <RARE_TOKEN> ( false , true ) ) { </a> 
<a> logger . warn ( </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> " + type . getSimpleName ( ) + </a> 
<a> " <RARE_TOKEN> " + type . getSimpleName ( ) + </a> 
<a> " is a <RARE_TOKEN> resource that must be <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> + </a> 
<a> " <RARE_TOKEN> <RARE_TOKEN> that <RARE_TOKEN> a <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . util . internal ; </a> 
<a> import io . netty . util . <RARE_TOKEN> ; </a> 
<a> import java . util . concurrent . ConcurrentHashMap ; </a> 
<a> import java . util . concurrent . <RARE_TOKEN> ; </a> 
<a> public final class <RARE_TOKEN> extends Error { </a> 
<a> private static final long serialVersionUID = - <RARE_TOKEN> ; </a> 
<a> private static final <RARE_TOKEN> < String , Boolean > map = </a> 
<a> new ConcurrentHashMap < String , Boolean > ( ) ; </a> 
<a> private final <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> public <RARE_TOKEN> ( String name ) { </a> 
<a> super ( name ) ; </a> 
<a> <RARE_TOKEN> = new <RARE_TOKEN> ( map , name ) ; </a> 
<a> } </a> 
<a> public void expect ( <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> if ( this != <RARE_TOKEN> ) { </a> 
<a> throw new IllegalStateException ( <RARE_TOKEN> <RARE_TOKEN> " + <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public Throwable <RARE_TOKEN> ( Throwable cause ) { </a> 
<a> return this ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public Throwable <RARE_TOKEN> ( ) { </a> 
<a> return this ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public String toString ( ) { </a> 
<a> return <RARE_TOKEN> . name ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . util . internal ; </a> 
<a> import java . util . <RARE_TOKEN> ; </a> 
<a> public final class StringUtil { </a> 
<a> private StringUtil ( ) { </a> 
<a> } </a> 
<a> public static final String NEWLINE ; </a> 
<a> static { </a> 
<a> String <RARE_TOKEN> ; </a> 
<a> try { </a> 
<a> <RARE_TOKEN> = new <RARE_TOKEN> ( ) . format ( <RARE_TOKEN> ) . toString ( ) ; </a> 
<a> } catch ( Exception e ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> NEWLINE = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . util . internal ; </a> 
<a> import java . util . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> final class <RARE_TOKEN> { </a> 
<a> public static String get ( String key ) { </a> 
<a> try { </a> 
<a> return System . getProperty ( key ) ; </a> 
<a> } catch ( Exception e ) { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> } </a> 
<a> public static String get ( String key , String <RARE_TOKEN> ) { </a> 
<a> String value = get ( key ) ; </a> 
<a> if ( value == null ) { </a> 
<a> value = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> return value ; </a> 
<a> } </a> 
<a> public static int get ( String key , int <RARE_TOKEN> ) { </a> 
<a> String value = get ( key ) ; </a> 
<a> if ( value == null ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> , value ) ) { </a> 
<a> return Integer . parseInt ( value ) ; </a> 
<a> } else { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<a> private <RARE_TOKEN> ( ) { </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . util . internal . <RARE_TOKEN> ; </a> 
<a> final class <RARE_TOKEN> { </a> 
<a> private static final int [ ] <RARE_TOKEN> = { </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> } ; </a> 
<a> static int <RARE_TOKEN> ( int <RARE_TOKEN> , byte [ ] buf , int index , int len ) { </a> 
<a> final int <RARE_TOKEN> = index + len ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> for ( int i = index ; i < <RARE_TOKEN> ; i ++ ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> > > > 8 <RARE_TOKEN> <RARE_TOKEN> [ ( <RARE_TOKEN> <RARE_TOKEN> buf [ i ] ) & 0xff ] ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> private <RARE_TOKEN> ( ) { </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . util . internal . <RARE_TOKEN> ; </a> 
<a> import io . netty . util . internal . <RARE_TOKEN> . JZlib . <RARE_TOKEN> ; </a> 
<a> final class <RARE_TOKEN> { </a> 
<a> private static final class <RARE_TOKEN> { </a> 
<a> final int <RARE_TOKEN> ; </a> 
<a> final int <RARE_TOKEN> ; </a> 
<a> final int <RARE_TOKEN> ; </a> 
<a> final int <RARE_TOKEN> ; </a> 
<a> final int <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> ( int <RARE_TOKEN> , int <RARE_TOKEN> , int <RARE_TOKEN> , int <RARE_TOKEN> , </a> 
<a> int <RARE_TOKEN> ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<a> private static final int <RARE_TOKEN> = 0 ; </a> 
<a> private static final int <RARE_TOKEN> = 1 ; </a> 
<a> private static final int <RARE_TOKEN> = 2 ; </a> 
<a> private static final <RARE_TOKEN> [ ] <RARE_TOKEN> ; </a> 
<a> static { </a> 
<a> <RARE_TOKEN> = new <RARE_TOKEN> [ 10 ] ; </a> 
<a> <RARE_TOKEN> [ 0 ] = new <RARE_TOKEN> ( 0 , 0 , 0 , 0 , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> [ 1 ] = new <RARE_TOKEN> ( 4 , 4 , 8 , 4 , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> [ 2 ] = new <RARE_TOKEN> ( 4 , 5 , 16 , 8 , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> [ 3 ] = new <RARE_TOKEN> ( 4 , 6 , 32 , 32 , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> [ 4 ] = new <RARE_TOKEN> ( 4 , 4 , 16 , 16 , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> [ 5 ] = new <RARE_TOKEN> ( 8 , 16 , 32 , 32 , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> [ 6 ] = new <RARE_TOKEN> ( 8 , 16 , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> [ 7 ] = new <RARE_TOKEN> ( 8 , 32 , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> [ 8 ] = new <RARE_TOKEN> ( 32 , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> [ 9 ] = new <RARE_TOKEN> ( 32 , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> private static final String [ ] <RARE_TOKEN> = { <RARE_TOKEN> <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> , </a> 
<a> "" , </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> , </a> 
<a> "" } ; </a> 
<a> private static final int <RARE_TOKEN> = 0 ; </a> 
<a> private static final int <RARE_TOKEN> = 1 ; </a> 
<a> private static final int <RARE_TOKEN> = 2 ; </a> 
<a> private static final int <RARE_TOKEN> = 3 ; </a> 
<a> private static final int <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final int <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final int <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final int <RARE_TOKEN> = 0 ; </a> 
<a> private static final int <RARE_TOKEN> = 1 ; </a> 
<a> private static final int <RARE_TOKEN> = 2 ; </a> 
<a> private static final int <RARE_TOKEN> = 0 ; </a> 
<a> private static final int <RARE_TOKEN> = 1 ; </a> 
<a> private static final int <RARE_TOKEN> = 2 ; </a> 
<a> private static final int <RARE_TOKEN> = 8 * 2 ; </a> 
<a> private static final int <RARE_TOKEN> = 16 ; </a> 
<a> private static final int <RARE_TOKEN> = 17 ; </a> 
<a> private static final int <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final int <RARE_TOKEN> = 3 ; </a> 
<a> private static final int <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final int <RARE_TOKEN> = <RARE_TOKEN> + <RARE_TOKEN> + 1 ; </a> 
<a> private static final int <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> ZStream strm ; </a> 
<a> int status ; </a> 
<a> byte [ ] <RARE_TOKEN> ; </a> 
<a> int <RARE_TOKEN> ; </a> 
<a> int <RARE_TOKEN> ; </a> 
<a> int <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> private boolean <RARE_TOKEN> ; </a> 
<a> byte <RARE_TOKEN> ; </a> 
<a> int <RARE_TOKEN> ; </a> 
<a> int <RARE_TOKEN> ; </a> 
<a> int <RARE_TOKEN> ; </a> 
<a> int <RARE_TOKEN> ; </a> 
<a> byte [ ] window ; </a> 
<a> int <RARE_TOKEN> ; </a> 
<a> short [ ] prev ; </a> 
<a> short [ ] <RARE_TOKEN> ; </a> 
<a> int <RARE_TOKEN> ; </a> 
<a> int <RARE_TOKEN> ; </a> 
<a> int <RARE_TOKEN> ; </a> 
<a> int <RARE_TOKEN> ; </a> 
<a> int <RARE_TOKEN> ; </a> 
<a> int <RARE_TOKEN> ; </a> 
<a> int <RARE_TOKEN> ; </a> 
<a> int <RARE_TOKEN> ; </a> 
<a> int <RARE_TOKEN> ; </a> 
<a> int strstart ; </a> 
<a> int <RARE_TOKEN> ; </a> 
<a> int <RARE_TOKEN> ; </a> 
<a> int <RARE_TOKEN> ; </a> 
<a> int <RARE_TOKEN> ; </a> 
<a> int <RARE_TOKEN> ; </a> 
<a> int level ; </a> 
<a> int <RARE_TOKEN> ; </a> 
<a> int <RARE_TOKEN> ; </a> 
<a> int <RARE_TOKEN> ; </a> 
<a> short [ ] <RARE_TOKEN> ; </a> 
<a> short [ ] <RARE_TOKEN> ; </a> 
<a> short [ ] <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( ) ; </a> 
<a> short [ ] <RARE_TOKEN> = new short [ JZlib . <RARE_TOKEN> + 1 ] ; </a> 
<a> int [ ] <RARE_TOKEN> = new int [ 2 * JZlib . <RARE_TOKEN> + 1 ] ; </a> 
<a> int <RARE_TOKEN> ; </a> 
<a> int <RARE_TOKEN> ; </a> 
<a> byte [ ] <RARE_TOKEN> = new byte [ 2 * JZlib . <RARE_TOKEN> + 1 ] ; </a> 
<a> int <RARE_TOKEN> ; </a> 
<a> int <RARE_TOKEN> ; </a> 
<a> int <RARE_TOKEN> ; </a> 
<a> int <RARE_TOKEN> ; </a> 
<a> int <RARE_TOKEN> ; </a> 
<a> int <RARE_TOKEN> ; </a> 
<a> int <RARE_TOKEN> ; </a> 
<a> int <RARE_TOKEN> ; </a> 
<a> short <RARE_TOKEN> ; </a> 
<a> int <RARE_TOKEN> ; </a> 
<a> private int <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> = new short [ JZlib . <RARE_TOKEN> * 2 ] ; </a> 
<a> <RARE_TOKEN> = new short [ ( 2 * JZlib . <RARE_TOKEN> + 1 ) * 2 ] ; </a> 
<a> <RARE_TOKEN> = new short [ ( 2 * JZlib . <RARE_TOKEN> + 1 ) * 2 ] ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> = 2 * <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> [ level ] . <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> [ level ] . <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> [ level ] . <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> [ level ] . <RARE_TOKEN> ; </a> 
<a> strstart = 0 ; </a> 
<a> <RARE_TOKEN> = 0 ; </a> 
<a> <RARE_TOKEN> = 0 ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> = <RARE_TOKEN> - 1 ; </a> 
<a> <RARE_TOKEN> = 0 ; </a> 
<a> <RARE_TOKEN> = 0 ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = 0 ; </a> 
<a> <RARE_TOKEN> = 0 ; </a> 
<a> <RARE_TOKEN> = 8 ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( ) { </a> 
<a> for ( int i = 0 ; i < JZlib . <RARE_TOKEN> ; i ++ ) { </a> 
<a> <RARE_TOKEN> [ i * 2 ] = 0 ; </a> 
<a> } </a> 
<a> for ( int i = 0 ; i < JZlib . <RARE_TOKEN> ; i ++ ) { </a> 
<a> <RARE_TOKEN> [ i * 2 ] = 0 ; </a> 
<a> } </a> 
<a> for ( int i = 0 ; i < JZlib . <RARE_TOKEN> ; i ++ ) { </a> 
<a> <RARE_TOKEN> [ i * 2 ] = 0 ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> [ <RARE_TOKEN> * 2 ] = 1 ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> = 0 ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> = 0 ; </a> 
<a> } </a> 
<a> void <RARE_TOKEN> ( short [ ] tree , </a> 
<a> int k </a> 
<a> ) { </a> 
<a> int v = <RARE_TOKEN> [ k ] ; </a> 
<a> int j = k < < 1 ; </a> 
<a> while ( j <= <RARE_TOKEN> ) { </a> 
<a> if ( j < <RARE_TOKEN> && <RARE_TOKEN> ( tree , <RARE_TOKEN> [ j + 1 ] , <RARE_TOKEN> [ j ] , <RARE_TOKEN> ) ) { </a> 
<a> j ++ ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> ( tree , v , <RARE_TOKEN> [ j ] , <RARE_TOKEN> ) ) { </a> 
<a> break ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> [ k ] = <RARE_TOKEN> [ j ] ; </a> 
<a> k = j ; </a> 
<a> j <RARE_TOKEN> 1 ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> [ k ] = v ; </a> 
<a> } </a> 
<a> private static boolean <RARE_TOKEN> ( short [ ] tree , int n , int m , byte [ ] <RARE_TOKEN> ) { </a> 
<a> short <RARE_TOKEN> = tree [ n * 2 ] ; </a> 
<a> short <RARE_TOKEN> = tree [ m * 2 ] ; </a> 
<a> return <RARE_TOKEN> < <RARE_TOKEN> || <RARE_TOKEN> == <RARE_TOKEN> && <RARE_TOKEN> [ n ] <= <RARE_TOKEN> [ m ] ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( short [ ] tree , </a> 
<a> int <RARE_TOKEN> </a> 
<a> ) { </a> 
<a> int n ; </a> 
<a> int <RARE_TOKEN> = - 1 ; </a> 
<a> int <RARE_TOKEN> ; </a> 
<a> int <RARE_TOKEN> = tree [ 0 * 2 + 1 ] ; </a> 
<a> int count = 0 ; </a> 
<a> int <RARE_TOKEN> = 7 ; </a> 
<a> int <RARE_TOKEN> = 4 ; </a> 
<a> if ( <RARE_TOKEN> == 0 ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = 3 ; </a> 
<a> } </a> 
<a> tree [ ( <RARE_TOKEN> + 1 ) * 2 + 1 ] = ( short ) <RARE_TOKEN> ; </a> 
<a> for ( n = 0 ; n <= <RARE_TOKEN> ; n ++ ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = tree [ ( n + 1 ) * 2 + 1 ] ; </a> 
<a> if ( ++ count < <RARE_TOKEN> && <RARE_TOKEN> == <RARE_TOKEN> ) { </a> 
<a> continue ; </a> 
<a> } else if ( count < <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> [ <RARE_TOKEN> * 2 ] += count ; </a> 
<a> } else if ( <RARE_TOKEN> != 0 ) { </a> 
<a> if ( <RARE_TOKEN> != <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> [ <RARE_TOKEN> * 2 ] ++ ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> [ <RARE_TOKEN> * 2 ] ++ ; </a> 
<a> } else if ( count <= 10 ) { </a> 
<a> <RARE_TOKEN> [ <RARE_TOKEN> * 2 ] ++ ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> [ <RARE_TOKEN> * 2 ] ++ ; </a> 
<a> } </a> 
<a> count = 0 ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> if ( <RARE_TOKEN> == 0 ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = 3 ; </a> 
<a> } else if ( <RARE_TOKEN> == <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> = 6 ; </a> 
<a> <RARE_TOKEN> = 3 ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> = 7 ; </a> 
<a> <RARE_TOKEN> = 4 ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> private int <RARE_TOKEN> ( ) { </a> 
<a> int <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( this ) ; </a> 
<a> for ( <RARE_TOKEN> = JZlib . <RARE_TOKEN> - 1 ; <RARE_TOKEN> >= 3 ; <RARE_TOKEN> -- ) { </a> 
<a> if ( <RARE_TOKEN> [ <RARE_TOKEN> . <RARE_TOKEN> [ <RARE_TOKEN> ] * 2 + 1 ] != 0 ) { </a> 
<a> break ; </a> 
<a> } </a> 
<a> } </a> 
<a> <RARE_TOKEN> += 3 * ( <RARE_TOKEN> + 1 ) + 5 + 5 + 4 ; </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( int <RARE_TOKEN> , int <RARE_TOKEN> , int <RARE_TOKEN> ) { </a> 
<a> int <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> - <RARE_TOKEN> , 5 ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> - 1 , 5 ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> - 4 , 4 ) ; </a> 
<a> for ( <RARE_TOKEN> = 0 ; <RARE_TOKEN> < <RARE_TOKEN> ; <RARE_TOKEN> ++ ) { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> [ <RARE_TOKEN> . <RARE_TOKEN> [ <RARE_TOKEN> ] * 2 + 1 ] , 3 ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> - 1 ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> - 1 ) ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( short [ ] tree , </a> 
<a> int <RARE_TOKEN> </a> 
<a> ) { </a> 
<a> int n ; </a> 
<a> int <RARE_TOKEN> = - 1 ; </a> 
<a> int <RARE_TOKEN> ; </a> 
<a> int <RARE_TOKEN> = tree [ 0 * 2 + 1 ] ; </a> 
<a> int count = 0 ; </a> 
<a> int <RARE_TOKEN> = 7 ; </a> 
<a> int <RARE_TOKEN> = 4 ; </a> 
<a> if ( <RARE_TOKEN> == 0 ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = 3 ; </a> 
<a> } </a> 
<a> for ( n = 0 ; n <= <RARE_TOKEN> ; n ++ ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = tree [ ( n + 1 ) * 2 + 1 ] ; </a> 
<a> if ( ++ count < <RARE_TOKEN> && <RARE_TOKEN> == <RARE_TOKEN> ) { </a> 
<a> continue ; </a> 
<a> } else if ( count < <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } while ( -- count != 0 ) ; </a> 
<a> } else if ( <RARE_TOKEN> != 0 ) { </a> 
<a> if ( <RARE_TOKEN> != <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> count -- ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( count - 3 , 2 ) ; </a> 
<a> } else if ( count <= 10 ) { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( count - 3 , 3 ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( count - 11 , 7 ) ; </a> 
<a> } </a> 
<a> count = 0 ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> if ( <RARE_TOKEN> == 0 ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = 3 ; </a> 
<a> } else if ( <RARE_TOKEN> == <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> = 6 ; </a> 
<a> <RARE_TOKEN> = 3 ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> = 7 ; </a> 
<a> <RARE_TOKEN> = 4 ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( byte [ ] p , int start , int len ) { </a> 
<a> System . <RARE_TOKEN> ( p , start , <RARE_TOKEN> , <RARE_TOKEN> , len ) ; </a> 
<a> <RARE_TOKEN> += len ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( byte c ) { </a> 
<a> <RARE_TOKEN> [ <RARE_TOKEN> ++ ] = c ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( int w ) { </a> 
<a> <RARE_TOKEN> ( ( byte ) w ) ; </a> 
<a> <RARE_TOKEN> ( ( byte ) ( w > > > 8 ) ) ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( int b ) { </a> 
<a> <RARE_TOKEN> ( ( byte ) ( b > > 8 ) ) ; </a> 
<a> <RARE_TOKEN> ( ( byte ) b ) ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( int c , short [ ] tree ) { </a> 
<a> int <RARE_TOKEN> = c * 2 ; </a> 
<a> <RARE_TOKEN> ( tree [ <RARE_TOKEN> ] & <RARE_TOKEN> , tree [ <RARE_TOKEN> + 1 ] & <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( int value , int length ) { </a> 
<a> if ( <RARE_TOKEN> > <RARE_TOKEN> - length ) { </a> 
<a> <RARE_TOKEN> |= value < < <RARE_TOKEN> & <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = ( short ) ( value > > > <RARE_TOKEN> - <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> += length - <RARE_TOKEN> ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> |= value < < <RARE_TOKEN> & <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> += length ; </a> 
<a> } </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> < < 1 , 3 ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> if ( 1 + <RARE_TOKEN> + 10 - <RARE_TOKEN> < 9 ) { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> < < 1 , 3 ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> = 7 ; </a> 
<a> } </a> 
<a> private boolean <RARE_TOKEN> ( int dist , </a> 
<a> int <RARE_TOKEN> </a> 
<a> ) { </a> 
<a> <RARE_TOKEN> [ <RARE_TOKEN> + <RARE_TOKEN> * 2 ] = ( byte ) ( dist > > > 8 ) ; </a> 
<a> <RARE_TOKEN> [ <RARE_TOKEN> + <RARE_TOKEN> * 2 + 1 ] = ( byte ) dist ; </a> 
<a> <RARE_TOKEN> [ <RARE_TOKEN> + <RARE_TOKEN> ] = ( byte ) <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> ++ ; </a> 
<a> if ( dist == 0 ) { </a> 
<a> <RARE_TOKEN> [ <RARE_TOKEN> * 2 ] ++ ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> ++ ; </a> 
<a> dist -- ; </a> 
<a> <RARE_TOKEN> [ ( <RARE_TOKEN> . <RARE_TOKEN> [ <RARE_TOKEN> ] + JZlib . <RARE_TOKEN> + 1 ) * 2 ] ++ ; </a> 
<a> <RARE_TOKEN> [ <RARE_TOKEN> . <RARE_TOKEN> ( dist ) * 2 ] ++ ; </a> 
<a> } </a> 
<a> if ( ( <RARE_TOKEN> & <RARE_TOKEN> ) == 0 && level > 2 ) { </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> * 8 ; </a> 
<a> int <RARE_TOKEN> = strstart - <RARE_TOKEN> ; </a> 
<a> int <RARE_TOKEN> ; </a> 
<a> for ( <RARE_TOKEN> = 0 ; <RARE_TOKEN> < JZlib . <RARE_TOKEN> ; <RARE_TOKEN> ++ ) { </a> 
<a> <RARE_TOKEN> += <RARE_TOKEN> [ <RARE_TOKEN> * 2 ] * </a> 
<a> ( <RARE_TOKEN> + <RARE_TOKEN> . <RARE_TOKEN> [ <RARE_TOKEN> ] ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> 3 ; </a> 
<a> if ( <RARE_TOKEN> < <RARE_TOKEN> / 2 && <RARE_TOKEN> < <RARE_TOKEN> / 2 ) { </a> 
<a> return true ; </a> 
<a> } </a> 
<a> } </a> 
<a> return <RARE_TOKEN> == <RARE_TOKEN> - 1 ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( short [ ] <RARE_TOKEN> , short [ ] <RARE_TOKEN> ) { </a> 
<a> int dist ; </a> 
<a> int <RARE_TOKEN> ; </a> 
<a> int <RARE_TOKEN> = 0 ; </a> 
<a> int code ; </a> 
<a> int <RARE_TOKEN> ; </a> 
<a> if ( <RARE_TOKEN> != 0 ) { </a> 
<a> <RARE_TOKEN> { </a> 
<a> dist = <RARE_TOKEN> [ <RARE_TOKEN> + <RARE_TOKEN> * 2 ] < < 8 & <RARE_TOKEN> | </a> 
<a> <RARE_TOKEN> [ <RARE_TOKEN> + <RARE_TOKEN> * 2 + 1 ] & 0xff ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> [ <RARE_TOKEN> + <RARE_TOKEN> ] & 0xff ; </a> 
<a> <RARE_TOKEN> ++ ; </a> 
<a> if ( dist == 0 ) { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } else { </a> 
<a> code = <RARE_TOKEN> . <RARE_TOKEN> [ <RARE_TOKEN> ] ; </a> 
<a> <RARE_TOKEN> ( code + JZlib . <RARE_TOKEN> + 1 , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> [ code ] ; </a> 
<a> if ( <RARE_TOKEN> != 0 ) { </a> 
<a> <RARE_TOKEN> -= <RARE_TOKEN> . <RARE_TOKEN> [ code ] ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> dist -- ; </a> 
<a> code = <RARE_TOKEN> . <RARE_TOKEN> ( dist ) ; </a> 
<a> <RARE_TOKEN> ( code , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> [ code ] ; </a> 
<a> if ( <RARE_TOKEN> != 0 ) { </a> 
<a> dist -= <RARE_TOKEN> . <RARE_TOKEN> [ code ] ; </a> 
<a> <RARE_TOKEN> ( dist , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } while ( <RARE_TOKEN> < <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> [ <RARE_TOKEN> * 2 + 1 ] ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( ) { </a> 
<a> int n = 0 ; </a> 
<a> int <RARE_TOKEN> = 0 ; </a> 
<a> int <RARE_TOKEN> = 0 ; </a> 
<a> while ( n < 7 ) { </a> 
<a> <RARE_TOKEN> += <RARE_TOKEN> [ n * 2 ] ; </a> 
<a> n ++ ; </a> 
<a> } </a> 
<a> while ( n < <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> += <RARE_TOKEN> [ n * 2 ] ; </a> 
<a> n ++ ; </a> 
<a> } </a> 
<a> while ( n < JZlib . <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> += <RARE_TOKEN> [ n * 2 ] ; </a> 
<a> n ++ ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> = ( byte ) ( <RARE_TOKEN> > <RARE_TOKEN> > > > 2 ? <RARE_TOKEN> : <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( ) { </a> 
<a> if ( <RARE_TOKEN> == 16 ) { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = 0 ; </a> 
<a> <RARE_TOKEN> = 0 ; </a> 
<a> } else if ( <RARE_TOKEN> >= 8 ) { </a> 
<a> <RARE_TOKEN> ( ( byte ) <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> 8 ; </a> 
<a> <RARE_TOKEN> -= 8 ; </a> 
<a> } </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( ) { </a> 
<a> if ( <RARE_TOKEN> > 8 ) { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } else if ( <RARE_TOKEN> > 0 ) { </a> 
<a> <RARE_TOKEN> ( ( byte ) <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> = 0 ; </a> 
<a> <RARE_TOKEN> = 0 ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( int buf , </a> 
<a> int len , </a> 
<a> boolean header </a> 
<a> ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> = 8 ; </a> 
<a> if ( header ) { </a> 
<a> <RARE_TOKEN> ( ( short ) len ) ; </a> 
<a> <RARE_TOKEN> ( ( short ) ~ len ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( window , buf , len ) ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( boolean <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> >= 0 ? <RARE_TOKEN> : - 1 , strstart - </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = strstart ; </a> 
<a> strm . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> private int <RARE_TOKEN> ( int flush ) { </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> int <RARE_TOKEN> ; </a> 
<a> if ( <RARE_TOKEN> > <RARE_TOKEN> - 5 ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> - 5 ; </a> 
<a> } </a> 
<a> while ( true ) { </a> 
<a> if ( <RARE_TOKEN> <= 1 ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> if ( <RARE_TOKEN> == 0 && flush == JZlib . <RARE_TOKEN> ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> == 0 ) { </a> 
<a> break ; </a> 
<a> } </a> 
<a> } </a> 
<a> strstart += <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = 0 ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> + <RARE_TOKEN> ; </a> 
<a> if ( strstart == 0 || strstart >= <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> = strstart - <RARE_TOKEN> ; </a> 
<a> strstart = <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> ( false ) ; </a> 
<a> if ( strm . <RARE_TOKEN> == 0 ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<a> if ( strstart - <RARE_TOKEN> >= <RARE_TOKEN> - <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( false ) ; </a> 
<a> if ( strm . <RARE_TOKEN> == 0 ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( flush == JZlib . <RARE_TOKEN> ) ; </a> 
<a> if ( strm . <RARE_TOKEN> == 0 ) { </a> 
<a> return flush == JZlib . <RARE_TOKEN> ? <RARE_TOKEN> : <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> return flush == JZlib . <RARE_TOKEN> ? <RARE_TOKEN> : <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( int buf , </a> 
<a> int <RARE_TOKEN> , </a> 
<a> boolean <RARE_TOKEN> </a> 
<a> ) { </a> 
<a> <RARE_TOKEN> ( ( <RARE_TOKEN> < < 1 ) + ( <RARE_TOKEN> ? 1 : 0 ) , 3 ) ; </a> 
<a> <RARE_TOKEN> ( buf , <RARE_TOKEN> , true ) ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( int buf , </a> 
<a> int <RARE_TOKEN> , </a> 
<a> boolean <RARE_TOKEN> </a> 
<a> ) { </a> 
<a> int <RARE_TOKEN> , <RARE_TOKEN> ; </a> 
<a> int <RARE_TOKEN> = 0 ; </a> 
<a> if ( level > 0 ) { </a> 
<a> if ( <RARE_TOKEN> == <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( this ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( this ) ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> + 3 + 7 > > > 3 ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> + 3 + 7 > > > 3 ; </a> 
<a> if ( <RARE_TOKEN> <= <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> = <RARE_TOKEN> + 5 ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> + 4 <= <RARE_TOKEN> && buf != - 1 ) { </a> 
<a> <RARE_TOKEN> ( buf , <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } else if ( <RARE_TOKEN> == <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( ( <RARE_TOKEN> < < 1 ) + ( <RARE_TOKEN> ? 1 : 0 ) , 3 ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> ( ( <RARE_TOKEN> < < 1 ) + ( <RARE_TOKEN> ? 1 : 0 ) , 3 ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> + 1 , <RARE_TOKEN> . <RARE_TOKEN> + 1 , </a> 
<a> <RARE_TOKEN> + 1 ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> if ( <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( ) { </a> 
<a> int n , m ; </a> 
<a> int p ; </a> 
<a> int <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> - <RARE_TOKEN> - strstart ; </a> 
<a> if ( <RARE_TOKEN> == 0 && strstart == 0 && <RARE_TOKEN> == 0 ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } else if ( <RARE_TOKEN> == - 1 ) { </a> 
<a> <RARE_TOKEN> -- ; </a> 
<a> } else if ( strstart >= <RARE_TOKEN> + <RARE_TOKEN> - <RARE_TOKEN> ) { </a> 
<a> System . <RARE_TOKEN> ( window , <RARE_TOKEN> , window , 0 , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> -= <RARE_TOKEN> ; </a> 
<a> strstart -= <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> -= <RARE_TOKEN> ; </a> 
<a> n = <RARE_TOKEN> ; </a> 
<a> p = n ; </a> 
<a> <RARE_TOKEN> { </a> 
<a> m = <RARE_TOKEN> [ -- p ] & <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> [ p ] = m >= <RARE_TOKEN> ? ( short ) ( m - <RARE_TOKEN> ) : 0 ; </a> 
<a> } while ( -- n != 0 ) ; </a> 
<a> n = <RARE_TOKEN> ; </a> 
<a> p = n ; </a> 
<a> <RARE_TOKEN> { </a> 
<a> m = prev [ -- p ] & <RARE_TOKEN> ; </a> 
<a> prev [ p ] = m >= <RARE_TOKEN> ? ( short ) ( m - <RARE_TOKEN> ) : 0 ; </a> 
<a> } while ( -- n != 0 ) ; </a> 
<a> <RARE_TOKEN> += <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> if ( strm . avail_in == 0 ) { </a> 
<a> return ; </a> 
<a> } </a> 
<a> n = strm . <RARE_TOKEN> ( window , strstart + <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> += n ; </a> 
<a> if ( <RARE_TOKEN> >= <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> = window [ strstart ] & 0xff ; </a> 
<a> <RARE_TOKEN> = ( <RARE_TOKEN> < < <RARE_TOKEN> <RARE_TOKEN> window [ strstart + 1 ] & 0xff ) & </a> 
<a> <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } while ( <RARE_TOKEN> < <RARE_TOKEN> && strm . avail_in != 0 ) ; </a> 
<a> } </a> 
<a> private int <RARE_TOKEN> ( int flush ) { </a> 
<a> int <RARE_TOKEN> = 0 ; </a> 
<a> boolean <RARE_TOKEN> ; </a> 
<a> while ( true ) { </a> 
<a> if ( <RARE_TOKEN> < <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> if ( <RARE_TOKEN> < <RARE_TOKEN> && flush == JZlib . <RARE_TOKEN> ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> == 0 ) { </a> 
<a> break ; </a> 
<a> } </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> >= <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> = ( <RARE_TOKEN> < < <RARE_TOKEN> <RARE_TOKEN> window [ strstart + <RARE_TOKEN> - 1 ] & 0xff ) & </a> 
<a> <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> [ <RARE_TOKEN> ] & <RARE_TOKEN> ; </a> 
<a> prev [ strstart & <RARE_TOKEN> ] = <RARE_TOKEN> [ <RARE_TOKEN> ] ; </a> 
<a> <RARE_TOKEN> [ <RARE_TOKEN> ] = ( short ) strstart ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> != <RARE_TOKEN> && </a> 
<a> ( strstart - <RARE_TOKEN> & <RARE_TOKEN> ) <= <RARE_TOKEN> - <RARE_TOKEN> ) { </a> 
<a> if ( <RARE_TOKEN> != JZlib . <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> >= <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ( strstart - <RARE_TOKEN> , <RARE_TOKEN> - </a> 
<a> <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> -= <RARE_TOKEN> ; </a> 
<a> if ( <RARE_TOKEN> <= <RARE_TOKEN> && <RARE_TOKEN> >= <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> -- ; </a> 
<a> <RARE_TOKEN> { </a> 
<a> strstart ++ ; </a> 
<a> <RARE_TOKEN> = ( <RARE_TOKEN> < < <RARE_TOKEN> <RARE_TOKEN> window [ strstart + </a> 
<a> <RARE_TOKEN> - 1 ] & 0xff ) & </a> 
<a> <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> [ <RARE_TOKEN> ] & <RARE_TOKEN> ; </a> 
<a> prev [ strstart & <RARE_TOKEN> ] = <RARE_TOKEN> [ <RARE_TOKEN> ] ; </a> 
<a> <RARE_TOKEN> [ <RARE_TOKEN> ] = ( short ) strstart ; </a> 
<a> } while ( -- <RARE_TOKEN> != 0 ) ; </a> 
<a> strstart ++ ; </a> 
<a> } else { </a> 
<a> strstart += <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = 0 ; </a> 
<a> <RARE_TOKEN> = window [ strstart ] & 0xff ; </a> 
<a> <RARE_TOKEN> = ( <RARE_TOKEN> < < <RARE_TOKEN> <RARE_TOKEN> window [ strstart + 1 ] & 0xff ) & </a> 
<a> <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ( 0 , window [ strstart ] & 0xff ) ; </a> 
<a> <RARE_TOKEN> -- ; </a> 
<a> strstart ++ ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( false ) ; </a> 
<a> if ( strm . <RARE_TOKEN> == 0 ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( flush == JZlib . <RARE_TOKEN> ) ; </a> 
<a> if ( strm . <RARE_TOKEN> == 0 ) { </a> 
<a> if ( flush == JZlib . <RARE_TOKEN> ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } else { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<a> return flush == JZlib . <RARE_TOKEN> ? <RARE_TOKEN> : <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> private int <RARE_TOKEN> ( int flush ) { </a> 
<a> int <RARE_TOKEN> = 0 ; </a> 
<a> boolean <RARE_TOKEN> ; </a> 
<a> while ( true ) { </a> 
<a> if ( <RARE_TOKEN> < <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> if ( <RARE_TOKEN> < <RARE_TOKEN> && flush == JZlib . <RARE_TOKEN> ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> == 0 ) { </a> 
<a> break ; </a> 
<a> } </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> >= <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> = ( <RARE_TOKEN> < < <RARE_TOKEN> <RARE_TOKEN> window [ strstart + <RARE_TOKEN> - 1 ] & 0xff ) & </a> 
<a> <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> [ <RARE_TOKEN> ] & <RARE_TOKEN> ; </a> 
<a> prev [ strstart & <RARE_TOKEN> ] = <RARE_TOKEN> [ <RARE_TOKEN> ] ; </a> 
<a> <RARE_TOKEN> [ <RARE_TOKEN> ] = ( short ) strstart ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> - 1 ; </a> 
<a> if ( <RARE_TOKEN> != 0 && <RARE_TOKEN> < <RARE_TOKEN> && </a> 
<a> ( strstart - <RARE_TOKEN> & <RARE_TOKEN> ) <= <RARE_TOKEN> - <RARE_TOKEN> ) { </a> 
<a> if ( <RARE_TOKEN> != JZlib . <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> <= 5 && </a> 
<a> ( <RARE_TOKEN> == JZlib . <RARE_TOKEN> || <RARE_TOKEN> == <RARE_TOKEN> && </a> 
<a> strstart - <RARE_TOKEN> > <RARE_TOKEN> ) ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> - 1 ; </a> 
<a> } </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> >= <RARE_TOKEN> && <RARE_TOKEN> <= <RARE_TOKEN> ) { </a> 
<a> int <RARE_TOKEN> = strstart + <RARE_TOKEN> - <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ( strstart - 1 - <RARE_TOKEN> , <RARE_TOKEN> - </a> 
<a> <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> -= <RARE_TOKEN> - 1 ; </a> 
<a> <RARE_TOKEN> -= 2 ; </a> 
<a> <RARE_TOKEN> { </a> 
<a> if ( ++ strstart <= <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> = ( <RARE_TOKEN> < < <RARE_TOKEN> <RARE_TOKEN> window [ strstart + </a> 
<a> <RARE_TOKEN> - 1 ] & 0xff ) & </a> 
<a> <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> [ <RARE_TOKEN> ] & <RARE_TOKEN> ; </a> 
<a> prev [ strstart & <RARE_TOKEN> ] = <RARE_TOKEN> [ <RARE_TOKEN> ] ; </a> 
<a> <RARE_TOKEN> [ <RARE_TOKEN> ] = ( short ) strstart ; </a> 
<a> } </a> 
<a> } while ( -- <RARE_TOKEN> != 0 ) ; </a> 
<a> <RARE_TOKEN> = 0 ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> - 1 ; </a> 
<a> strstart ++ ; </a> 
<a> if ( <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( false ) ; </a> 
<a> if ( strm . <RARE_TOKEN> == 0 ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<a> } else if ( <RARE_TOKEN> != 0 ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ( 0 , window [ strstart - 1 ] & 0xff ) ; </a> 
<a> if ( <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( false ) ; </a> 
<a> } </a> 
<a> strstart ++ ; </a> 
<a> <RARE_TOKEN> -- ; </a> 
<a> if ( strm . <RARE_TOKEN> == 0 ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> = 1 ; </a> 
<a> strstart ++ ; </a> 
<a> <RARE_TOKEN> -- ; </a> 
<a> } </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> != 0 ) { </a> 
<a> <RARE_TOKEN> ( 0 , window [ strstart - 1 ] & 0xff ) ; </a> 
<a> <RARE_TOKEN> = 0 ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( flush == JZlib . <RARE_TOKEN> ) ; </a> 
<a> if ( strm . <RARE_TOKEN> == 0 ) { </a> 
<a> if ( flush == JZlib . <RARE_TOKEN> ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } else { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<a> return flush == JZlib . <RARE_TOKEN> ? <RARE_TOKEN> : <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> private int <RARE_TOKEN> ( int <RARE_TOKEN> ) { </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> int <RARE_TOKEN> = strstart ; </a> 
<a> int <RARE_TOKEN> ; </a> 
<a> int len ; </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> int limit = strstart > <RARE_TOKEN> - <RARE_TOKEN> ? strstart - </a> 
<a> ( <RARE_TOKEN> - <RARE_TOKEN> ) : 0 ; </a> 
<a> int <RARE_TOKEN> = this . <RARE_TOKEN> ; </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> int <RARE_TOKEN> = strstart + <RARE_TOKEN> ; </a> 
<a> byte <RARE_TOKEN> = window [ <RARE_TOKEN> + <RARE_TOKEN> - 1 ] ; </a> 
<a> byte <RARE_TOKEN> = window [ <RARE_TOKEN> + <RARE_TOKEN> ] ; </a> 
<a> if ( <RARE_TOKEN> >= <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> 2 ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> > <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> if ( window [ <RARE_TOKEN> + <RARE_TOKEN> ] != <RARE_TOKEN> || </a> 
<a> window [ <RARE_TOKEN> + <RARE_TOKEN> - 1 ] != <RARE_TOKEN> || </a> 
<a> window [ <RARE_TOKEN> ] != window [ <RARE_TOKEN> ] || </a> 
<a> window [ ++ <RARE_TOKEN> ] != window [ <RARE_TOKEN> + 1 ] ) { </a> 
<a> continue ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> += 2 ; </a> 
<a> <RARE_TOKEN> ++ ; </a> 
<a> while ( window [ ++ <RARE_TOKEN> ] == window [ ++ <RARE_TOKEN> ] && </a> 
<a> window [ ++ <RARE_TOKEN> ] == window [ ++ <RARE_TOKEN> ] && </a> 
<a> window [ ++ <RARE_TOKEN> ] == window [ ++ <RARE_TOKEN> ] && </a> 
<a> window [ ++ <RARE_TOKEN> ] == window [ ++ <RARE_TOKEN> ] && </a> 
<a> window [ ++ <RARE_TOKEN> ] == window [ ++ <RARE_TOKEN> ] && </a> 
<a> window [ ++ <RARE_TOKEN> ] == window [ ++ <RARE_TOKEN> ] && </a> 
<a> window [ ++ <RARE_TOKEN> ] == window [ ++ <RARE_TOKEN> ] && </a> 
<a> window [ ++ <RARE_TOKEN> ] == window [ ++ <RARE_TOKEN> ] && <RARE_TOKEN> < <RARE_TOKEN> ) { </a> 
<a> continue ; </a> 
<a> } </a> 
<a> len = <RARE_TOKEN> - ( <RARE_TOKEN> - <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> - <RARE_TOKEN> ; </a> 
<a> if ( len > <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = len ; </a> 
<a> if ( len >= <RARE_TOKEN> ) { </a> 
<a> break ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> = window [ <RARE_TOKEN> + <RARE_TOKEN> - 1 ] ; </a> 
<a> <RARE_TOKEN> = window [ <RARE_TOKEN> + <RARE_TOKEN> ] ; </a> 
<a> } </a> 
<a> } while ( ( <RARE_TOKEN> = prev [ <RARE_TOKEN> & <RARE_TOKEN> ] & <RARE_TOKEN> ) > limit && </a> 
<a> -- <RARE_TOKEN> != 0 ) ; </a> 
<a> if ( <RARE_TOKEN> <= <RARE_TOKEN> ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> int <RARE_TOKEN> ( ZStream strm , int level , int bits , int memLevel , <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> return <RARE_TOKEN> ( strm , level , JZlib . <RARE_TOKEN> , bits , </a> 
<a> memLevel , JZlib . <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> private int <RARE_TOKEN> ( ZStream strm , int level , int method , int windowBits , </a> 
<a> int memLevel , int <RARE_TOKEN> , <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> if ( <RARE_TOKEN> == <RARE_TOKEN> . <RARE_TOKEN> ) { </a> 
<a> throw new IllegalArgumentException ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> for <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> strm . msg = null ; </a> 
<a> if ( level == JZlib . <RARE_TOKEN> ) { </a> 
<a> level = 6 ; </a> 
<a> } </a> 
<a> if ( windowBits < 0 ) { </a> 
<a> throw new IllegalArgumentException ( <RARE_TOKEN> " + windowBits ) ; </a> 
<a> } </a> 
<a> if ( memLevel < 1 || memLevel > JZlib . <RARE_TOKEN> || </a> 
<a> method != JZlib . <RARE_TOKEN> || windowBits < 9 || </a> 
<a> windowBits > 15 || level < 0 || level > 9 || <RARE_TOKEN> < 0 || </a> 
<a> <RARE_TOKEN> > JZlib . <RARE_TOKEN> ) { </a> 
<a> return JZlib . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> strm . <RARE_TOKEN> = this ; </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = windowBits ; </a> 
<a> <RARE_TOKEN> = 1 < < <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> - 1 ; </a> 
<a> <RARE_TOKEN> = memLevel + 7 ; </a> 
<a> <RARE_TOKEN> = 1 < < <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> - 1 ; </a> 
<a> <RARE_TOKEN> = ( <RARE_TOKEN> + <RARE_TOKEN> - 1 ) / <RARE_TOKEN> ; </a> 
<a> window = new byte [ <RARE_TOKEN> * 2 ] ; </a> 
<a> prev = new short [ <RARE_TOKEN> ] ; </a> 
<a> <RARE_TOKEN> = new short [ <RARE_TOKEN> ] ; </a> 
<a> <RARE_TOKEN> = 1 < < memLevel + 6 ; </a> 
<a> <RARE_TOKEN> = new byte [ <RARE_TOKEN> * 4 ] ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> * 4 ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> / 2 ; </a> 
<a> <RARE_TOKEN> = ( 1 + 2 ) * <RARE_TOKEN> ; </a> 
<a> this . level = level ; </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> return <RARE_TOKEN> ( strm ) ; </a> 
<a> } </a> 
<a> private int <RARE_TOKEN> ( ZStream strm ) { </a> 
<a> strm . total_in = strm . <RARE_TOKEN> = 0 ; </a> 
<a> strm . msg = null ; </a> 
<a> <RARE_TOKEN> = 0 ; </a> 
<a> <RARE_TOKEN> = 0 ; </a> 
<a> <RARE_TOKEN> = false ; </a> 
<a> status = <RARE_TOKEN> == <RARE_TOKEN> . <RARE_TOKEN> ? <RARE_TOKEN> : <RARE_TOKEN> ; </a> 
<a> strm . <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( 0 , null , 0 , 0 ) ; </a> 
<a> strm . <RARE_TOKEN> = 0 ; </a> 
<a> <RARE_TOKEN> = 0 ; </a> 
<a> <RARE_TOKEN> = JZlib . <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> return JZlib . Z_OK ; </a> 
<a> } </a> 
<a> int <RARE_TOKEN> ( ) { </a> 
<a> if ( status != <RARE_TOKEN> && status != <RARE_TOKEN> && </a> 
<a> status != <RARE_TOKEN> ) { </a> 
<a> return JZlib . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> = null ; </a> 
<a> <RARE_TOKEN> = null ; </a> 
<a> prev = null ; </a> 
<a> window = null ; </a> 
<a> return status == <RARE_TOKEN> ? JZlib . <RARE_TOKEN> : JZlib . Z_OK ; </a> 
<a> } </a> 
<a> int <RARE_TOKEN> ( ZStream strm , int <RARE_TOKEN> , int <RARE_TOKEN> ) { </a> 
<a> int <RARE_TOKEN> = JZlib . Z_OK ; </a> 
<a> if ( <RARE_TOKEN> == JZlib . <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> = 6 ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> < 0 || <RARE_TOKEN> > 9 || <RARE_TOKEN> < 0 || </a> 
<a> <RARE_TOKEN> > JZlib . <RARE_TOKEN> ) { </a> 
<a> return JZlib . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> [ level ] . <RARE_TOKEN> != <RARE_TOKEN> [ <RARE_TOKEN> ] . <RARE_TOKEN> && </a> 
<a> strm . total_in != 0 ) { </a> 
<a> <RARE_TOKEN> = strm . <RARE_TOKEN> ( JZlib . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( level != <RARE_TOKEN> ) { </a> 
<a> level = <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> [ level ] . <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> [ level ] . <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> [ level ] . <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> [ level ] . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> int <RARE_TOKEN> ( ZStream strm , byte [ ] dictionary , int <RARE_TOKEN> ) { </a> 
<a> int length = <RARE_TOKEN> ; </a> 
<a> int index = 0 ; </a> 
<a> if ( dictionary == null || status != <RARE_TOKEN> ) { </a> 
<a> return JZlib . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> strm . <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( strm . <RARE_TOKEN> , dictionary , 0 , <RARE_TOKEN> ) ; </a> 
<a> if ( length < <RARE_TOKEN> ) { </a> 
<a> return JZlib . Z_OK ; </a> 
<a> } </a> 
<a> if ( length > <RARE_TOKEN> - <RARE_TOKEN> ) { </a> 
<a> length = <RARE_TOKEN> - <RARE_TOKEN> ; </a> 
<a> index = <RARE_TOKEN> - length ; </a> 
<a> } </a> 
<a> System . <RARE_TOKEN> ( dictionary , index , window , 0 , length ) ; </a> 
<a> strstart = length ; </a> 
<a> <RARE_TOKEN> = length ; </a> 
<a> <RARE_TOKEN> = window [ 0 ] & 0xff ; </a> 
<a> <RARE_TOKEN> = ( <RARE_TOKEN> < < <RARE_TOKEN> <RARE_TOKEN> window [ 1 ] & 0xff ) & <RARE_TOKEN> ; </a> 
<a> for ( int n = 0 ; n <= length - <RARE_TOKEN> ; n ++ ) { </a> 
<a> <RARE_TOKEN> = ( <RARE_TOKEN> < < <RARE_TOKEN> <RARE_TOKEN> window [ n + <RARE_TOKEN> - 1 ] & 0xff ) & </a> 
<a> <RARE_TOKEN> ; </a> 
<a> prev [ n & <RARE_TOKEN> ] = <RARE_TOKEN> [ <RARE_TOKEN> ] ; </a> 
<a> <RARE_TOKEN> [ <RARE_TOKEN> ] = ( short ) n ; </a> 
<a> } </a> 
<a> return JZlib . Z_OK ; </a> 
<a> } </a> 
<a> int <RARE_TOKEN> ( ZStream strm , int flush ) { </a> 
<a> int <RARE_TOKEN> ; </a> 
<a> if ( flush > JZlib . <RARE_TOKEN> || flush < 0 ) { </a> 
<a> return JZlib . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> if ( strm . <RARE_TOKEN> == null || strm . next_in == null && </a> 
<a> strm . avail_in != 0 || status == <RARE_TOKEN> && </a> 
<a> flush != JZlib . <RARE_TOKEN> ) { </a> 
<a> strm . msg = <RARE_TOKEN> [ JZlib . <RARE_TOKEN> - JZlib . <RARE_TOKEN> ] ; </a> 
<a> return JZlib . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> if ( strm . <RARE_TOKEN> == 0 ) { </a> 
<a> strm . msg = <RARE_TOKEN> [ JZlib . <RARE_TOKEN> - JZlib . <RARE_TOKEN> ] ; </a> 
<a> return JZlib . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> this . strm = strm ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = flush ; </a> 
<a> if ( status == <RARE_TOKEN> ) { </a> 
<a> switch ( <RARE_TOKEN> ) { </a> 
<a> case <RARE_TOKEN> : </a> 
<a> int header = JZlib . <RARE_TOKEN> + ( <RARE_TOKEN> - 8 < < 4 ) < < 8 ; </a> 
<a> int <RARE_TOKEN> = ( level - 1 & 0xff ) > > 1 ; </a> 
<a> if ( <RARE_TOKEN> > 3 ) { </a> 
<a> <RARE_TOKEN> = 3 ; </a> 
<a> } </a> 
<a> header |= <RARE_TOKEN> < < 6 ; </a> 
<a> if ( strstart != 0 ) { </a> 
<a> header |= JZlib . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> header += <RARE_TOKEN> - header <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> ( header ) ; </a> 
<a> if ( strstart != 0 ) { </a> 
<a> <RARE_TOKEN> ( ( int ) ( strm . <RARE_TOKEN> > > > 16 ) ) ; </a> 
<a> <RARE_TOKEN> ( ( int ) ( strm . <RARE_TOKEN> & <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> strm . <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( 0 , null , 0 , 0 ) ; </a> 
<a> break ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> <RARE_TOKEN> ( ( byte ) <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( ( byte ) <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( ( byte ) 8 ) ; </a> 
<a> <RARE_TOKEN> ( ( byte ) 0 ) ; </a> 
<a> <RARE_TOKEN> ( ( byte ) 0 ) ; </a> 
<a> <RARE_TOKEN> ( ( byte ) 0 ) ; </a> 
<a> <RARE_TOKEN> ( ( byte ) 0 ) ; </a> 
<a> <RARE_TOKEN> ( ( byte ) 0 ) ; </a> 
<a> switch ( <RARE_TOKEN> [ level ] . <RARE_TOKEN> ) { </a> 
<a> case <RARE_TOKEN> : </a> 
<a> <RARE_TOKEN> ( ( byte ) 4 ) ; </a> 
<a> break ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> <RARE_TOKEN> ( ( byte ) 2 ) ; </a> 
<a> break ; </a> 
<a> default : </a> 
<a> <RARE_TOKEN> ( ( byte ) 0 ) ; </a> 
<a> break ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( ( byte ) <RARE_TOKEN> ) ; </a> 
<a> strm . <RARE_TOKEN> = 0 ; </a> 
<a> break ; </a> 
<a> } </a> 
<a> status = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> != 0 ) { </a> 
<a> strm . <RARE_TOKEN> ( ) ; </a> 
<a> if ( strm . <RARE_TOKEN> == 0 ) { </a> 
<a> <RARE_TOKEN> = - 1 ; </a> 
<a> return JZlib . Z_OK ; </a> 
<a> } </a> 
<a> } else if ( strm . avail_in == 0 && flush <= <RARE_TOKEN> && </a> 
<a> flush != JZlib . <RARE_TOKEN> ) { </a> 
<a> strm . msg = <RARE_TOKEN> [ JZlib . <RARE_TOKEN> - JZlib . <RARE_TOKEN> ] ; </a> 
<a> return JZlib . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> if ( status == <RARE_TOKEN> && strm . avail_in != 0 ) { </a> 
<a> strm . msg = <RARE_TOKEN> [ JZlib . <RARE_TOKEN> - JZlib . <RARE_TOKEN> ] ; </a> 
<a> return JZlib . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> int <RARE_TOKEN> = strm . next_in_index ; </a> 
<a> try { </a> 
<a> if ( strm . avail_in != 0 || <RARE_TOKEN> != 0 || flush != JZlib . <RARE_TOKEN> && </a> 
<a> status != <RARE_TOKEN> ) { </a> 
<a> int <RARE_TOKEN> = - 1 ; </a> 
<a> switch ( <RARE_TOKEN> [ level ] . <RARE_TOKEN> ) { </a> 
<a> case <RARE_TOKEN> : </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ( flush ) ; </a> 
<a> break ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ( flush ) ; </a> 
<a> break ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ( flush ) ; </a> 
<a> break ; </a> 
<a> default : </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> == <RARE_TOKEN> || <RARE_TOKEN> == <RARE_TOKEN> ) { </a> 
<a> status = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> == <RARE_TOKEN> || <RARE_TOKEN> == <RARE_TOKEN> ) { </a> 
<a> if ( strm . <RARE_TOKEN> == 0 ) { </a> 
<a> <RARE_TOKEN> = - 1 ; </a> 
<a> } </a> 
<a> return JZlib . Z_OK ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> == <RARE_TOKEN> ) { </a> 
<a> if ( flush == JZlib . <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> ( 0 , 0 , false ) ; </a> 
<a> if ( flush == JZlib . <RARE_TOKEN> ) { </a> 
<a> for ( int i = 0 ; i < <RARE_TOKEN> ; i ++ ) { </a> 
<a> <RARE_TOKEN> [ i ] = 0 ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> strm . <RARE_TOKEN> ( ) ; </a> 
<a> if ( strm . <RARE_TOKEN> == 0 ) { </a> 
<a> <RARE_TOKEN> = - 1 ; </a> 
<a> return JZlib . Z_OK ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } finally { </a> 
<a> <RARE_TOKEN> += strm . next_in_index - <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> if ( flush != JZlib . <RARE_TOKEN> ) { </a> 
<a> return JZlib . Z_OK ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> == <RARE_TOKEN> . <RARE_TOKEN> || <RARE_TOKEN> ) { </a> 
<a> return JZlib . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> switch ( <RARE_TOKEN> ) { </a> 
<a> case <RARE_TOKEN> : </a> 
<a> <RARE_TOKEN> ( ( int ) ( strm . <RARE_TOKEN> > > > 16 ) ) ; </a> 
<a> <RARE_TOKEN> ( ( int ) ( strm . <RARE_TOKEN> & <RARE_TOKEN> ) ) ; </a> 
<a> break ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> <RARE_TOKEN> ( ( byte ) ( strm . <RARE_TOKEN> & 0xFF ) ) ; </a> 
<a> <RARE_TOKEN> ( ( byte ) ( strm . <RARE_TOKEN> > > > 8 & 0xFF ) ) ; </a> 
<a> <RARE_TOKEN> ( ( byte ) ( strm . <RARE_TOKEN> > > > 16 & 0xFF ) ) ; </a> 
<a> <RARE_TOKEN> ( ( byte ) ( strm . <RARE_TOKEN> > > > 24 & 0xFF ) ) ; </a> 
<a> <RARE_TOKEN> ( ( byte ) ( <RARE_TOKEN> & 0xFF ) ) ; </a> 
<a> <RARE_TOKEN> ( ( byte ) ( <RARE_TOKEN> > > > 8 & 0xFF ) ) ; </a> 
<a> <RARE_TOKEN> ( ( byte ) ( <RARE_TOKEN> > > > 16 & 0xFF ) ) ; </a> 
<a> <RARE_TOKEN> ( ( byte ) ( <RARE_TOKEN> > > > 24 & 0xFF ) ) ; </a> 
<a> break ; </a> 
<a> } </a> 
<a> strm . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> = true ; </a> 
<a> return <RARE_TOKEN> != 0 ? JZlib . Z_OK : JZlib . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . util . internal . <RARE_TOKEN> ; </a> 
<a> final class <RARE_TOKEN> { </a> 
<a> private static final int [ ] <RARE_TOKEN> = { <RARE_TOKEN> , 0x00000001 , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> } ; </a> 
<a> private static final int [ ] <RARE_TOKEN> = { </a> 
<a> 16 , 17 , <RARE_TOKEN> , 0 , 8 , 7 , 9 , 6 , 10 , 5 , 11 , 4 , 12 , 3 , 13 , 2 , 14 , 1 , 15 } ; </a> 
<a> private static final int TYPE = 0 ; </a> 
<a> private static final int <RARE_TOKEN> = 1 ; </a> 
<a> private static final int <RARE_TOKEN> = 2 ; </a> 
<a> private static final int <RARE_TOKEN> = 3 ; </a> 
<a> private static final int <RARE_TOKEN> = 4 ; </a> 
<a> private static final int <RARE_TOKEN> = 5 ; </a> 
<a> private static final int <RARE_TOKEN> = 6 ; </a> 
<a> private static final int <RARE_TOKEN> = 7 ; </a> 
<a> private static final int <RARE_TOKEN> = 8 ; </a> 
<a> private static final int <RARE_TOKEN> = 9 ; </a> 
<a> private int mode ; </a> 
<a> private int <RARE_TOKEN> ; </a> 
<a> private int <RARE_TOKEN> ; </a> 
<a> private int index ; </a> 
<a> private int [ ] <RARE_TOKEN> ; </a> 
<a> private final int [ ] <RARE_TOKEN> = new int [ 1 ] ; </a> 
<a> private final int [ ] <RARE_TOKEN> = new int [ 1 ] ; </a> 
<a> private final <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( ) ; </a> 
<a> private int last ; </a> 
<a> int bitk ; </a> 
<a> int bitb ; </a> 
<a> private int [ ] <RARE_TOKEN> ; </a> 
<a> byte [ ] window ; </a> 
<a> final int end ; </a> 
<a> int read ; </a> 
<a> int write ; </a> 
<a> private final Object <RARE_TOKEN> ; </a> 
<a> private long <RARE_TOKEN> ; </a> 
<a> private final <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> ( ZStream z , Object <RARE_TOKEN> , int w ) { </a> 
<a> <RARE_TOKEN> = new int [ JZlib . <RARE_TOKEN> * 3 ] ; </a> 
<a> window = new byte [ w ] ; </a> 
<a> end = w ; </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> mode = TYPE ; </a> 
<a> <RARE_TOKEN> ( z , null ) ; </a> 
<a> } </a> 
<a> void <RARE_TOKEN> ( ZStream z , long [ ] c ) { </a> 
<a> if ( c != null ) { </a> 
<a> c [ 0 ] = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> mode = TYPE ; </a> 
<a> bitk = 0 ; </a> 
<a> bitb = 0 ; </a> 
<a> read = write = 0 ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> z . <RARE_TOKEN> = <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> , null , 0 , 0 ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> int <RARE_TOKEN> ( ZStream z , int r ) { </a> 
<a> int t ; </a> 
<a> int b ; </a> 
<a> int k ; </a> 
<a> int p ; </a> 
<a> int n ; </a> 
<a> int q ; </a> 
<a> int m ; </a> 
<a> { </a> 
<a> p = z . next_in_index ; </a> 
<a> n = z . avail_in ; </a> 
<a> b = bitb ; </a> 
<a> k = bitk ; </a> 
<a> } </a> 
<a> { </a> 
<a> q = write ; </a> 
<a> m = q < read ? read - q - 1 : end - q ; </a> 
<a> } </a> 
<a> while ( true ) { </a> 
<a> switch ( mode ) { </a> 
<a> case TYPE : </a> 
<a> while ( k < 3 ) { </a> 
<a> if ( n != 0 ) { </a> 
<a> r = JZlib . Z_OK ; </a> 
<a> } else { </a> 
<a> bitb = b ; </a> 
<a> bitk = k ; </a> 
<a> z . avail_in = n ; </a> 
<a> z . total_in += p - z . next_in_index ; </a> 
<a> z . next_in_index = p ; </a> 
<a> write = q ; </a> 
<a> return inflate_flush ( z , r ) ; </a> 
<a> } </a> 
<a> n -- ; </a> 
<a> b |= ( z . next_in [ p ++ ] & 0xff ) < < k ; </a> 
<a> k += 8 ; </a> 
<a> } </a> 
<a> t = b & 7 ; </a> 
<a> last = t & 1 ; </a> 
<a> switch ( t > > > 1 ) { </a> 
<a> case 0 : </a> 
<a> { </a> 
<a> b <RARE_TOKEN> 3 ; </a> 
<a> k -= 3 ; </a> 
<a> } </a> 
<a> t = k & 7 ; </a> 
<a> { </a> 
<a> b <RARE_TOKEN> t ; </a> 
<a> k -= t ; </a> 
<a> } </a> 
<a> mode = <RARE_TOKEN> ; </a> 
<a> break ; </a> 
<a> case 1 : </a> 
<a> { </a> 
<a> int [ ] <RARE_TOKEN> = new int [ 1 ] ; </a> 
<a> int [ ] <RARE_TOKEN> = new int [ 1 ] ; </a> 
<a> int [ ] [ ] <RARE_TOKEN> = new int [ 1 ] [ ] ; </a> 
<a> int [ ] [ ] <RARE_TOKEN> = new int [ 1 ] [ ] ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . init ( <RARE_TOKEN> [ 0 ] , <RARE_TOKEN> [ 0 ] , <RARE_TOKEN> [ 0 ] , 0 , <RARE_TOKEN> [ 0 ] , 0 ) ; </a> 
<a> } </a> 
<a> { </a> 
<a> b <RARE_TOKEN> 3 ; </a> 
<a> k -= 3 ; </a> 
<a> } </a> 
<a> mode = <RARE_TOKEN> ; </a> 
<a> break ; </a> 
<a> case 2 : </a> 
<a> { </a> 
<a> b <RARE_TOKEN> 3 ; </a> 
<a> k -= 3 ; </a> 
<a> } </a> 
<a> mode = <RARE_TOKEN> ; </a> 
<a> break ; </a> 
<a> case 3 : </a> 
<a> { </a> 
<a> b <RARE_TOKEN> 3 ; </a> 
<a> k -= 3 ; </a> 
<a> } </a> 
<a> mode = <RARE_TOKEN> ; </a> 
<a> z . msg = <RARE_TOKEN> block <RARE_TOKEN> ; </a> 
<a> r = JZlib . <RARE_TOKEN> ; </a> 
<a> bitb = b ; </a> 
<a> bitk = k ; </a> 
<a> z . avail_in = n ; </a> 
<a> z . total_in += p - z . next_in_index ; </a> 
<a> z . next_in_index = p ; </a> 
<a> write = q ; </a> 
<a> return inflate_flush ( z , r ) ; </a> 
<a> } </a> 
<a> break ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> while ( k < 32 ) { </a> 
<a> if ( n != 0 ) { </a> 
<a> r = JZlib . Z_OK ; </a> 
<a> } else { </a> 
<a> bitb = b ; </a> 
<a> bitk = k ; </a> 
<a> z . avail_in = n ; </a> 
<a> z . total_in += p - z . next_in_index ; </a> 
<a> z . next_in_index = p ; </a> 
<a> write = q ; </a> 
<a> return inflate_flush ( z , r ) ; </a> 
<a> } </a> 
<a> n -- ; </a> 
<a> b |= ( z . next_in [ p ++ ] & 0xff ) < < k ; </a> 
<a> k += 8 ; </a> 
<a> } </a> 
<a> if ( ( ~ b > > > 16 & <RARE_TOKEN> ) != ( b & <RARE_TOKEN> ) ) { </a> 
<a> mode = <RARE_TOKEN> ; </a> 
<a> z . msg = <RARE_TOKEN> <RARE_TOKEN> block <RARE_TOKEN> ; </a> 
<a> r = JZlib . <RARE_TOKEN> ; </a> 
<a> bitb = b ; </a> 
<a> bitk = k ; </a> 
<a> z . avail_in = n ; </a> 
<a> z . total_in += p - z . next_in_index ; </a> 
<a> z . next_in_index = p ; </a> 
<a> write = q ; </a> 
<a> return inflate_flush ( z , r ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> = b & <RARE_TOKEN> ; </a> 
<a> b = k = 0 ; </a> 
<a> mode = <RARE_TOKEN> != 0 ? <RARE_TOKEN> : last != 0 ? <RARE_TOKEN> : TYPE ; </a> 
<a> break ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> if ( n == 0 ) { </a> 
<a> bitb = b ; </a> 
<a> bitk = k ; </a> 
<a> z . avail_in = n ; </a> 
<a> z . total_in += p - z . next_in_index ; </a> 
<a> z . next_in_index = p ; </a> 
<a> write = q ; </a> 
<a> return inflate_flush ( z , r ) ; </a> 
<a> } </a> 
<a> if ( m == 0 ) { </a> 
<a> if ( q == end && read != 0 ) { </a> 
<a> q = 0 ; </a> 
<a> m = q < read ? read - q - 1 : end - q ; </a> 
<a> } </a> 
<a> if ( m == 0 ) { </a> 
<a> write = q ; </a> 
<a> r = inflate_flush ( z , r ) ; </a> 
<a> q = write ; </a> 
<a> m = q < read ? read - q - 1 : end - q ; </a> 
<a> if ( q == end && read != 0 ) { </a> 
<a> q = 0 ; </a> 
<a> m = q < read ? read - q - 1 : end - q ; </a> 
<a> } </a> 
<a> if ( m == 0 ) { </a> 
<a> bitb = b ; </a> 
<a> bitk = k ; </a> 
<a> z . avail_in = n ; </a> 
<a> z . total_in += p - z . next_in_index ; </a> 
<a> z . next_in_index = p ; </a> 
<a> write = q ; </a> 
<a> return inflate_flush ( z , r ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> r = JZlib . Z_OK ; </a> 
<a> t = <RARE_TOKEN> ; </a> 
<a> if ( t > n ) { </a> 
<a> t = n ; </a> 
<a> } </a> 
<a> if ( t > m ) { </a> 
<a> t = m ; </a> 
<a> } </a> 
<a> System . <RARE_TOKEN> ( z . next_in , p , window , q , t ) ; </a> 
<a> p += t ; </a> 
<a> n -= t ; </a> 
<a> q += t ; </a> 
<a> m -= t ; </a> 
<a> if ( ( <RARE_TOKEN> -= t ) != 0 ) { </a> 
<a> break ; </a> 
<a> } </a> 
<a> mode = last != 0 ? <RARE_TOKEN> : TYPE ; </a> 
<a> break ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> while ( k < 14 ) { </a> 
<a> if ( n != 0 ) { </a> 
<a> r = JZlib . Z_OK ; </a> 
<a> } else { </a> 
<a> bitb = b ; </a> 
<a> bitk = k ; </a> 
<a> z . avail_in = n ; </a> 
<a> z . total_in += p - z . next_in_index ; </a> 
<a> z . next_in_index = p ; </a> 
<a> write = q ; </a> 
<a> return inflate_flush ( z , r ) ; </a> 
<a> } </a> 
<a> n -- ; </a> 
<a> b |= ( z . next_in [ p ++ ] & 0xff ) < < k ; </a> 
<a> k += 8 ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> = t = b & <RARE_TOKEN> ; </a> 
<a> if ( ( t & <RARE_TOKEN> ) > 29 || ( t > > 5 & <RARE_TOKEN> ) > 29 ) { </a> 
<a> mode = <RARE_TOKEN> ; </a> 
<a> z . msg = <RARE_TOKEN> <RARE_TOKEN> length or <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> r = JZlib . <RARE_TOKEN> ; </a> 
<a> bitb = b ; </a> 
<a> bitk = k ; </a> 
<a> z . avail_in = n ; </a> 
<a> z . total_in += p - z . next_in_index ; </a> 
<a> z . next_in_index = p ; </a> 
<a> write = q ; </a> 
<a> return inflate_flush ( z , r ) ; </a> 
<a> } </a> 
<a> t = <RARE_TOKEN> + ( t & <RARE_TOKEN> ) + ( t > > 5 & <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> == null || <RARE_TOKEN> . length < t ) { </a> 
<a> <RARE_TOKEN> = new int [ t ] ; </a> 
<a> } else { </a> 
<a> for ( int i = 0 ; i < t ; i ++ ) { </a> 
<a> <RARE_TOKEN> [ i ] = 0 ; </a> 
<a> } </a> 
<a> } </a> 
<a> { </a> 
<a> b <RARE_TOKEN> 14 ; </a> 
<a> k -= 14 ; </a> 
<a> } </a> 
<a> index = 0 ; </a> 
<a> mode = <RARE_TOKEN> ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> while ( index < 4 + ( <RARE_TOKEN> > > > 10 ) ) { </a> 
<a> while ( k < 3 ) { </a> 
<a> if ( n != 0 ) { </a> 
<a> r = JZlib . Z_OK ; </a> 
<a> } else { </a> 
<a> bitb = b ; </a> 
<a> bitk = k ; </a> 
<a> z . avail_in = n ; </a> 
<a> z . total_in += p - z . next_in_index ; </a> 
<a> z . next_in_index = p ; </a> 
<a> write = q ; </a> 
<a> return inflate_flush ( z , r ) ; </a> 
<a> } </a> 
<a> n -- ; </a> 
<a> b |= ( z . next_in [ p ++ ] & 0xff ) < < k ; </a> 
<a> k += 8 ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> [ <RARE_TOKEN> [ index ++ ] ] = b & 7 ; </a> 
<a> { </a> 
<a> b <RARE_TOKEN> 3 ; </a> 
<a> k -= 3 ; </a> 
<a> } </a> 
<a> } </a> 
<a> while ( index < 19 ) { </a> 
<a> <RARE_TOKEN> [ <RARE_TOKEN> [ index ++ ] ] = 0 ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> [ 0 ] = 7 ; </a> 
<a> t = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , z ) ; </a> 
<a> if ( t != JZlib . Z_OK ) { </a> 
<a> r = t ; </a> 
<a> if ( r == JZlib . <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> = null ; </a> 
<a> mode = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> bitb = b ; </a> 
<a> bitk = k ; </a> 
<a> z . avail_in = n ; </a> 
<a> z . total_in += p - z . next_in_index ; </a> 
<a> z . next_in_index = p ; </a> 
<a> write = q ; </a> 
<a> return inflate_flush ( z , r ) ; </a> 
<a> } </a> 
<a> index = 0 ; </a> 
<a> mode = <RARE_TOKEN> ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> while ( true ) { </a> 
<a> t = <RARE_TOKEN> ; </a> 
<a> if ( ! ( index < <RARE_TOKEN> + ( t & <RARE_TOKEN> ) + ( t > > 5 & <RARE_TOKEN> ) ) ) { </a> 
<a> break ; </a> 
<a> } </a> 
<a> int i , j , c ; </a> 
<a> t = <RARE_TOKEN> [ 0 ] ; </a> 
<a> while ( k < t ) { </a> 
<a> if ( n != 0 ) { </a> 
<a> r = JZlib . Z_OK ; </a> 
<a> } else { </a> 
<a> bitb = b ; </a> 
<a> bitk = k ; </a> 
<a> z . avail_in = n ; </a> 
<a> z . total_in += p - z . next_in_index ; </a> 
<a> z . next_in_index = p ; </a> 
<a> write = q ; </a> 
<a> return inflate_flush ( z , r ) ; </a> 
<a> } </a> 
<a> n -- ; </a> 
<a> b |= ( z . next_in [ p ++ ] & 0xff ) < < k ; </a> 
<a> k += 8 ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> [ 0 ] == - 1 ) { </a> 
<a> } </a> 
<a> t = <RARE_TOKEN> [ ( <RARE_TOKEN> [ 0 ] + ( b & <RARE_TOKEN> [ t ] ) ) * 3 + 1 ] ; </a> 
<a> c = <RARE_TOKEN> [ ( <RARE_TOKEN> [ 0 ] + ( b & <RARE_TOKEN> [ t ] ) ) * 3 + 2 ] ; </a> 
<a> if ( c < 16 ) { </a> 
<a> b <RARE_TOKEN> t ; </a> 
<a> k -= t ; </a> 
<a> <RARE_TOKEN> [ index ++ ] = c ; </a> 
<a> } else { </a> 
<a> i = c == <RARE_TOKEN> ? 7 : c - 14 ; </a> 
<a> j = c == <RARE_TOKEN> ? 11 : 3 ; </a> 
<a> while ( k < t + i ) { </a> 
<a> if ( n != 0 ) { </a> 
<a> r = JZlib . Z_OK ; </a> 
<a> } else { </a> 
<a> bitb = b ; </a> 
<a> bitk = k ; </a> 
<a> z . avail_in = n ; </a> 
<a> z . total_in += p - z . next_in_index ; </a> 
<a> z . next_in_index = p ; </a> 
<a> write = q ; </a> 
<a> return inflate_flush ( z , r ) ; </a> 
<a> } </a> 
<a> n -- ; </a> 
<a> b |= ( z . next_in [ p ++ ] & 0xff ) < < k ; </a> 
<a> k += 8 ; </a> 
<a> } </a> 
<a> b <RARE_TOKEN> t ; </a> 
<a> k -= t ; </a> 
<a> j += b & <RARE_TOKEN> [ i ] ; </a> 
<a> b <RARE_TOKEN> i ; </a> 
<a> k -= i ; </a> 
<a> i = index ; </a> 
<a> t = <RARE_TOKEN> ; </a> 
<a> if ( i + j > <RARE_TOKEN> + ( t & <RARE_TOKEN> ) + ( t > > 5 & <RARE_TOKEN> ) || </a> 
<a> c == 16 && i < 1 ) { </a> 
<a> <RARE_TOKEN> = null ; </a> 
<a> mode = <RARE_TOKEN> ; </a> 
<a> z . msg = <RARE_TOKEN> <RARE_TOKEN> length <RARE_TOKEN> ; </a> 
<a> r = JZlib . <RARE_TOKEN> ; </a> 
<a> bitb = b ; </a> 
<a> bitk = k ; </a> 
<a> z . avail_in = n ; </a> 
<a> z . total_in += p - z . next_in_index ; </a> 
<a> z . next_in_index = p ; </a> 
<a> write = q ; </a> 
<a> return inflate_flush ( z , r ) ; </a> 
<a> } </a> 
<a> c = c == 16 ? <RARE_TOKEN> [ i - 1 ] : 0 ; </a> 
<a> <RARE_TOKEN> { </a> 
<a> <RARE_TOKEN> [ i ++ ] = c ; </a> 
<a> } while ( -- j != 0 ) ; </a> 
<a> index = i ; </a> 
<a> } </a> 
<a> } </a> 
<a> <RARE_TOKEN> [ 0 ] = - 1 ; </a> 
<a> { </a> 
<a> int [ ] <RARE_TOKEN> = new int [ 1 ] ; </a> 
<a> int [ ] <RARE_TOKEN> = new int [ 1 ] ; </a> 
<a> int [ ] <RARE_TOKEN> = new int [ 1 ] ; </a> 
<a> int [ ] <RARE_TOKEN> = new int [ 1 ] ; </a> 
<a> <RARE_TOKEN> [ 0 ] = 9 ; </a> 
<a> <RARE_TOKEN> [ 0 ] = 6 ; </a> 
<a> t = <RARE_TOKEN> ; </a> 
<a> t = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> + ( t & <RARE_TOKEN> ) , </a> 
<a> 1 + ( t > > 5 & <RARE_TOKEN> ) , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> z ) ; </a> 
<a> if ( t != JZlib . Z_OK ) { </a> 
<a> if ( t == JZlib . <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> = null ; </a> 
<a> mode = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> r = t ; </a> 
<a> bitb = b ; </a> 
<a> bitk = k ; </a> 
<a> z . avail_in = n ; </a> 
<a> z . total_in += p - z . next_in_index ; </a> 
<a> z . next_in_index = p ; </a> 
<a> write = q ; </a> 
<a> return inflate_flush ( z , r ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> . init ( <RARE_TOKEN> [ 0 ] , <RARE_TOKEN> [ 0 ] , <RARE_TOKEN> , <RARE_TOKEN> [ 0 ] , <RARE_TOKEN> , <RARE_TOKEN> [ 0 ] ) ; </a> 
<a> } </a> 
<a> mode = <RARE_TOKEN> ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> bitb = b ; </a> 
<a> bitk = k ; </a> 
<a> z . avail_in = n ; </a> 
<a> z . total_in += p - z . next_in_index ; </a> 
<a> z . next_in_index = p ; </a> 
<a> write = q ; </a> 
<a> if ( ( r = <RARE_TOKEN> . <RARE_TOKEN> ( this , z , r ) ) != JZlib . <RARE_TOKEN> ) { </a> 
<a> return inflate_flush ( z , r ) ; </a> 
<a> } </a> 
<a> r = JZlib . Z_OK ; </a> 
<a> p = z . next_in_index ; </a> 
<a> n = z . avail_in ; </a> 
<a> b = bitb ; </a> 
<a> k = bitk ; </a> 
<a> q = write ; </a> 
<a> m = q < read ? read - q - 1 : end - q ; </a> 
<a> if ( last == 0 ) { </a> 
<a> mode = TYPE ; </a> 
<a> break ; </a> 
<a> } </a> 
<a> mode = <RARE_TOKEN> ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> write = q ; </a> 
<a> r = inflate_flush ( z , r ) ; </a> 
<a> q = write ; </a> 
<a> if ( read != write ) { </a> 
<a> bitb = b ; </a> 
<a> bitk = k ; </a> 
<a> z . avail_in = n ; </a> 
<a> z . total_in += p - z . next_in_index ; </a> 
<a> z . next_in_index = p ; </a> 
<a> write = q ; </a> 
<a> return inflate_flush ( z , r ) ; </a> 
<a> } </a> 
<a> mode = <RARE_TOKEN> ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> r = JZlib . <RARE_TOKEN> ; </a> 
<a> bitb = b ; </a> 
<a> bitk = k ; </a> 
<a> z . avail_in = n ; </a> 
<a> z . total_in += p - z . next_in_index ; </a> 
<a> z . next_in_index = p ; </a> 
<a> write = q ; </a> 
<a> return inflate_flush ( z , r ) ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> r = JZlib . <RARE_TOKEN> ; </a> 
<a> bitb = b ; </a> 
<a> bitk = k ; </a> 
<a> z . avail_in = n ; </a> 
<a> z . total_in += p - z . next_in_index ; </a> 
<a> z . next_in_index = p ; </a> 
<a> write = q ; </a> 
<a> return inflate_flush ( z , r ) ; </a> 
<a> default : </a> 
<a> r = JZlib . <RARE_TOKEN> ; </a> 
<a> bitb = b ; </a> 
<a> bitk = k ; </a> 
<a> z . avail_in = n ; </a> 
<a> z . total_in += p - z . next_in_index ; </a> 
<a> z . next_in_index = p ; </a> 
<a> write = q ; </a> 
<a> return inflate_flush ( z , r ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> void <RARE_TOKEN> ( ZStream z ) { </a> 
<a> <RARE_TOKEN> ( z , null ) ; </a> 
<a> window = null ; </a> 
<a> <RARE_TOKEN> = null ; </a> 
<a> } </a> 
<a> void <RARE_TOKEN> ( byte [ ] d , int start , int n ) { </a> 
<a> System . <RARE_TOKEN> ( d , start , window , 0 , n ) ; </a> 
<a> read = write = n ; </a> 
<a> } </a> 
<a> int <RARE_TOKEN> ( ) { </a> 
<a> return mode == <RARE_TOKEN> ? 1 : 0 ; </a> 
<a> } </a> 
<a> int inflate_flush ( ZStream z , int r ) { </a> 
<a> int n ; </a> 
<a> int p ; </a> 
<a> int q ; </a> 
<a> p = z . <RARE_TOKEN> ; </a> 
<a> q = read ; </a> 
<a> n = ( q <= write ? write : end ) - q ; </a> 
<a> if ( n > z . <RARE_TOKEN> ) { </a> 
<a> n = z . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> if ( n != 0 && r == JZlib . <RARE_TOKEN> ) { </a> 
<a> r = JZlib . Z_OK ; </a> 
<a> } </a> 
<a> z . <RARE_TOKEN> -= n ; </a> 
<a> z . <RARE_TOKEN> += n ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> z . <RARE_TOKEN> = <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> , window , q , n ) ; </a> 
<a> } </a> 
<a> System . <RARE_TOKEN> ( window , q , z . <RARE_TOKEN> , p , n ) ; </a> 
<a> p += n ; </a> 
<a> q += n ; </a> 
<a> if ( q == end ) { </a> 
<a> q = 0 ; </a> 
<a> if ( write == end ) { </a> 
<a> write = 0 ; </a> 
<a> } </a> 
<a> n = write - q ; </a> 
<a> if ( n > z . <RARE_TOKEN> ) { </a> 
<a> n = z . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> if ( n != 0 && r == JZlib . <RARE_TOKEN> ) { </a> 
<a> r = JZlib . Z_OK ; </a> 
<a> } </a> 
<a> z . <RARE_TOKEN> -= n ; </a> 
<a> z . <RARE_TOKEN> += n ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> z . <RARE_TOKEN> = <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> , window , q , n ) ; </a> 
<a> } </a> 
<a> System . <RARE_TOKEN> ( window , q , z . <RARE_TOKEN> , p , n ) ; </a> 
<a> p += n ; </a> 
<a> q += n ; </a> 
<a> } </a> 
<a> z . <RARE_TOKEN> = p ; </a> 
<a> read = q ; </a> 
<a> return r ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . util . internal . <RARE_TOKEN> ; </a> 
<a> final class <RARE_TOKEN> { </a> 
<a> private static final int [ ] <RARE_TOKEN> = { <RARE_TOKEN> , 0x00000001 , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> } ; </a> 
<a> private static final int <RARE_TOKEN> = 0 ; </a> 
<a> private static final int <RARE_TOKEN> = 1 ; </a> 
<a> private static final int <RARE_TOKEN> = 2 ; </a> 
<a> private static final int <RARE_TOKEN> = 3 ; </a> 
<a> private static final int <RARE_TOKEN> = 4 ; </a> 
<a> private static final int <RARE_TOKEN> = 5 ; </a> 
<a> private static final int <RARE_TOKEN> = 6 ; </a> 
<a> private static final int <RARE_TOKEN> = 7 ; </a> 
<a> private static final int <RARE_TOKEN> = 8 ; </a> 
<a> private static final int <RARE_TOKEN> = 9 ; </a> 
<a> private int mode ; </a> 
<a> private int len ; </a> 
<a> private int [ ] tree ; </a> 
<a> private int <RARE_TOKEN> ; </a> 
<a> private int <RARE_TOKEN> ; </a> 
<a> private int <RARE_TOKEN> ; </a> 
<a> private int get ; </a> 
<a> private int dist ; </a> 
<a> private byte <RARE_TOKEN> ; </a> 
<a> private byte <RARE_TOKEN> ; </a> 
<a> private int [ ] <RARE_TOKEN> ; </a> 
<a> private int <RARE_TOKEN> ; </a> 
<a> private int [ ] <RARE_TOKEN> ; </a> 
<a> private int <RARE_TOKEN> ; </a> 
<a> void init ( int <RARE_TOKEN> , int <RARE_TOKEN> , int [ ] <RARE_TOKEN> , int <RARE_TOKEN> , int [ ] <RARE_TOKEN> , int <RARE_TOKEN> ) { </a> 
<a> mode = <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = ( byte ) <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = ( byte ) <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> tree = null ; </a> 
<a> } </a> 
<a> int <RARE_TOKEN> ( <RARE_TOKEN> s , ZStream z , int r ) { </a> 
<a> int j ; </a> 
<a> int <RARE_TOKEN> ; </a> 
<a> int e ; </a> 
<a> int b = 0 ; </a> 
<a> int k = 0 ; </a> 
<a> int p = 0 ; </a> 
<a> int n ; </a> 
<a> int q ; </a> 
<a> int m ; </a> 
<a> int f ; </a> 
<a> p = z . next_in_index ; </a> 
<a> n = z . avail_in ; </a> 
<a> b = s . bitb ; </a> 
<a> k = s . bitk ; </a> 
<a> q = s . write ; </a> 
<a> m = q < s . read ? s . read - q - 1 : s . end - q ; </a> 
<a> while ( true ) { </a> 
<a> switch ( mode ) { </a> 
<a> case <RARE_TOKEN> : </a> 
<a> if ( m >= <RARE_TOKEN> && n >= 10 ) { </a> 
<a> s . bitb = b ; </a> 
<a> s . bitk = k ; </a> 
<a> z . avail_in = n ; </a> 
<a> z . total_in += p - z . next_in_index ; </a> 
<a> z . next_in_index = p ; </a> 
<a> s . write = q ; </a> 
<a> r = <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , s , z ) ; </a> 
<a> p = z . next_in_index ; </a> 
<a> n = z . avail_in ; </a> 
<a> b = s . bitb ; </a> 
<a> k = s . bitk ; </a> 
<a> q = s . write ; </a> 
<a> m = q < s . read ? s . read - q - 1 : s . end - q ; </a> 
<a> if ( r != JZlib . Z_OK ) { </a> 
<a> mode = r == JZlib . <RARE_TOKEN> ? <RARE_TOKEN> : <RARE_TOKEN> ; </a> 
<a> break ; </a> 
<a> } </a> 
<a> } </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> tree = <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> mode = <RARE_TOKEN> ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> j = <RARE_TOKEN> ; </a> 
<a> while ( k < j ) { </a> 
<a> if ( n != 0 ) { </a> 
<a> r = JZlib . Z_OK ; </a> 
<a> } else { </a> 
<a> s . bitb = b ; </a> 
<a> s . bitk = k ; </a> 
<a> z . avail_in = n ; </a> 
<a> z . total_in += p - z . next_in_index ; </a> 
<a> z . next_in_index = p ; </a> 
<a> s . write = q ; </a> 
<a> return s . inflate_flush ( z , r ) ; </a> 
<a> } </a> 
<a> n -- ; </a> 
<a> b |= ( z . next_in [ p ++ ] & 0xff ) < < k ; </a> 
<a> k += 8 ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> = ( <RARE_TOKEN> + ( b & <RARE_TOKEN> [ j ] ) ) * 3 ; </a> 
<a> b <RARE_TOKEN> tree [ <RARE_TOKEN> + 1 ] ; </a> 
<a> k -= tree [ <RARE_TOKEN> + 1 ] ; </a> 
<a> e = tree [ <RARE_TOKEN> ] ; </a> 
<a> if ( e == 0 ) { </a> 
<a> <RARE_TOKEN> = tree [ <RARE_TOKEN> + 2 ] ; </a> 
<a> mode = <RARE_TOKEN> ; </a> 
<a> break ; </a> 
<a> } </a> 
<a> if ( ( e & 16 ) != 0 ) { </a> 
<a> get = e & 15 ; </a> 
<a> len = tree [ <RARE_TOKEN> + 2 ] ; </a> 
<a> mode = <RARE_TOKEN> ; </a> 
<a> break ; </a> 
<a> } </a> 
<a> if ( ( e & <RARE_TOKEN> ) == 0 ) { </a> 
<a> <RARE_TOKEN> = e ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> / 3 + tree [ <RARE_TOKEN> + 2 ] ; </a> 
<a> break ; </a> 
<a> } </a> 
<a> if ( ( e & 32 ) != 0 ) { </a> 
<a> mode = <RARE_TOKEN> ; </a> 
<a> break ; </a> 
<a> } </a> 
<a> mode = <RARE_TOKEN> ; </a> 
<a> z . msg = <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> r = JZlib . <RARE_TOKEN> ; </a> 
<a> s . bitb = b ; </a> 
<a> s . bitk = k ; </a> 
<a> z . avail_in = n ; </a> 
<a> z . total_in += p - z . next_in_index ; </a> 
<a> z . next_in_index = p ; </a> 
<a> s . write = q ; </a> 
<a> return s . inflate_flush ( z , r ) ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> j = get ; </a> 
<a> while ( k < j ) { </a> 
<a> if ( n != 0 ) { </a> 
<a> r = JZlib . Z_OK ; </a> 
<a> } else { </a> 
<a> s . bitb = b ; </a> 
<a> s . bitk = k ; </a> 
<a> z . avail_in = n ; </a> 
<a> z . total_in += p - z . next_in_index ; </a> 
<a> z . next_in_index = p ; </a> 
<a> s . write = q ; </a> 
<a> return s . inflate_flush ( z , r ) ; </a> 
<a> } </a> 
<a> n -- ; </a> 
<a> b |= ( z . next_in [ p ++ ] & 0xff ) < < k ; </a> 
<a> k += 8 ; </a> 
<a> } </a> 
<a> len += b & <RARE_TOKEN> [ j ] ; </a> 
<a> b <RARE_TOKEN> j ; </a> 
<a> k -= j ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> tree = <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> mode = <RARE_TOKEN> ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> j = <RARE_TOKEN> ; </a> 
<a> while ( k < j ) { </a> 
<a> if ( n != 0 ) { </a> 
<a> r = JZlib . Z_OK ; </a> 
<a> } else { </a> 
<a> s . bitb = b ; </a> 
<a> s . bitk = k ; </a> 
<a> z . avail_in = n ; </a> 
<a> z . total_in += p - z . next_in_index ; </a> 
<a> z . next_in_index = p ; </a> 
<a> s . write = q ; </a> 
<a> return s . inflate_flush ( z , r ) ; </a> 
<a> } </a> 
<a> n -- ; </a> 
<a> b |= ( z . next_in [ p ++ ] & 0xff ) < < k ; </a> 
<a> k += 8 ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> = ( <RARE_TOKEN> + ( b & <RARE_TOKEN> [ j ] ) ) * 3 ; </a> 
<a> b <RARE_TOKEN> tree [ <RARE_TOKEN> + 1 ] ; </a> 
<a> k -= tree [ <RARE_TOKEN> + 1 ] ; </a> 
<a> e = tree [ <RARE_TOKEN> ] ; </a> 
<a> if ( ( e & 16 ) != 0 ) { </a> 
<a> get = e & 15 ; </a> 
<a> dist = tree [ <RARE_TOKEN> + 2 ] ; </a> 
<a> mode = <RARE_TOKEN> ; </a> 
<a> break ; </a> 
<a> } </a> 
<a> if ( ( e & <RARE_TOKEN> ) == 0 ) { </a> 
<a> <RARE_TOKEN> = e ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> / 3 + tree [ <RARE_TOKEN> + 2 ] ; </a> 
<a> break ; </a> 
<a> } </a> 
<a> mode = <RARE_TOKEN> ; </a> 
<a> z . msg = <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> r = JZlib . <RARE_TOKEN> ; </a> 
<a> s . bitb = b ; </a> 
<a> s . bitk = k ; </a> 
<a> z . avail_in = n ; </a> 
<a> z . total_in += p - z . next_in_index ; </a> 
<a> z . next_in_index = p ; </a> 
<a> s . write = q ; </a> 
<a> return s . inflate_flush ( z , r ) ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> j = get ; </a> 
<a> while ( k < j ) { </a> 
<a> if ( n != 0 ) { </a> 
<a> r = JZlib . Z_OK ; </a> 
<a> } else { </a> 
<a> s . bitb = b ; </a> 
<a> s . bitk = k ; </a> 
<a> z . avail_in = n ; </a> 
<a> z . total_in += p - z . next_in_index ; </a> 
<a> z . next_in_index = p ; </a> 
<a> s . write = q ; </a> 
<a> return s . inflate_flush ( z , r ) ; </a> 
<a> } </a> 
<a> n -- ; </a> 
<a> b |= ( z . next_in [ p ++ ] & 0xff ) < < k ; </a> 
<a> k += 8 ; </a> 
<a> } </a> 
<a> dist += b & <RARE_TOKEN> [ j ] ; </a> 
<a> b <RARE_TOKEN> j ; </a> 
<a> k -= j ; </a> 
<a> mode = <RARE_TOKEN> ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> f = q - dist ; </a> 
<a> while ( f < 0 ) { </a> 
<a> f += s . end ; </a> 
<a> } </a> 
<a> while ( len != 0 ) { </a> 
<a> if ( m == 0 ) { </a> 
<a> if ( q == s . end && s . read != 0 ) { </a> 
<a> q = 0 ; </a> 
<a> m = q < s . read ? s . read - q - 1 : s . end - q ; </a> 
<a> } </a> 
<a> if ( m == 0 ) { </a> 
<a> s . write = q ; </a> 
<a> r = s . inflate_flush ( z , r ) ; </a> 
<a> q = s . write ; </a> 
<a> m = q < s . read ? s . read - q - 1 : s . end - q ; </a> 
<a> if ( q == s . end && s . read != 0 ) { </a> 
<a> q = 0 ; </a> 
<a> m = q < s . read ? s . read - q - 1 : s . end - q ; </a> 
<a> } </a> 
<a> if ( m == 0 ) { </a> 
<a> s . bitb = b ; </a> 
<a> s . bitk = k ; </a> 
<a> z . avail_in = n ; </a> 
<a> z . total_in += p - z . next_in_index ; </a> 
<a> z . next_in_index = p ; </a> 
<a> s . write = q ; </a> 
<a> return s . inflate_flush ( z , r ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> s . window [ q ++ ] = s . window [ f ++ ] ; </a> 
<a> m -- ; </a> 
<a> if ( f == s . end ) { </a> 
<a> f = 0 ; </a> 
<a> } </a> 
<a> len -- ; </a> 
<a> } </a> 
<a> mode = <RARE_TOKEN> ; </a> 
<a> break ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> if ( m == 0 ) { </a> 
<a> if ( q == s . end && s . read != 0 ) { </a> 
<a> q = 0 ; </a> 
<a> m = q < s . read ? s . read - q - 1 : s . end - q ; </a> 
<a> } </a> 
<a> if ( m == 0 ) { </a> 
<a> s . write = q ; </a> 
<a> r = s . inflate_flush ( z , r ) ; </a> 
<a> q = s . write ; </a> 
<a> m = q < s . read ? s . read - q - 1 : s . end - q ; </a> 
<a> if ( q == s . end && s . read != 0 ) { </a> 
<a> q = 0 ; </a> 
<a> m = q < s . read ? s . read - q - 1 : s . end - q ; </a> 
<a> } </a> 
<a> if ( m == 0 ) { </a> 
<a> s . bitb = b ; </a> 
<a> s . bitk = k ; </a> 
<a> z . avail_in = n ; </a> 
<a> z . total_in += p - z . next_in_index ; </a> 
<a> z . next_in_index = p ; </a> 
<a> s . write = q ; </a> 
<a> return s . inflate_flush ( z , r ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> r = JZlib . Z_OK ; </a> 
<a> s . window [ q ++ ] = ( byte ) <RARE_TOKEN> ; </a> 
<a> m -- ; </a> 
<a> mode = <RARE_TOKEN> ; </a> 
<a> break ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> if ( k > 7 ) { </a> 
<a> k -= 8 ; </a> 
<a> n ++ ; </a> 
<a> p -- ; </a> 
<a> } </a> 
<a> s . write = q ; </a> 
<a> r = s . inflate_flush ( z , r ) ; </a> 
<a> q = s . write ; </a> 
<a> if ( s . read != s . write ) { </a> 
<a> s . bitb = b ; </a> 
<a> s . bitk = k ; </a> 
<a> z . avail_in = n ; </a> 
<a> z . total_in += p - z . next_in_index ; </a> 
<a> z . next_in_index = p ; </a> 
<a> s . write = q ; </a> 
<a> return s . inflate_flush ( z , r ) ; </a> 
<a> } </a> 
<a> mode = <RARE_TOKEN> ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> r = JZlib . <RARE_TOKEN> ; </a> 
<a> s . bitb = b ; </a> 
<a> s . bitk = k ; </a> 
<a> z . avail_in = n ; </a> 
<a> z . total_in += p - z . next_in_index ; </a> 
<a> z . next_in_index = p ; </a> 
<a> s . write = q ; </a> 
<a> return s . inflate_flush ( z , r ) ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> r = JZlib . <RARE_TOKEN> ; </a> 
<a> s . bitb = b ; </a> 
<a> s . bitk = k ; </a> 
<a> z . avail_in = n ; </a> 
<a> z . total_in += p - z . next_in_index ; </a> 
<a> z . next_in_index = p ; </a> 
<a> s . write = q ; </a> 
<a> return s . inflate_flush ( z , r ) ; </a> 
<a> default : </a> 
<a> r = JZlib . <RARE_TOKEN> ; </a> 
<a> s . bitb = b ; </a> 
<a> s . bitk = k ; </a> 
<a> z . avail_in = n ; </a> 
<a> z . total_in += p - z . next_in_index ; </a> 
<a> z . next_in_index = p ; </a> 
<a> s . write = q ; </a> 
<a> return s . inflate_flush ( z , r ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> static int <RARE_TOKEN> ( int <RARE_TOKEN> , int <RARE_TOKEN> , int [ ] <RARE_TOKEN> , int <RARE_TOKEN> , int [ ] <RARE_TOKEN> , </a> 
<a> int <RARE_TOKEN> , <RARE_TOKEN> s , ZStream z ) { </a> 
<a> int t ; </a> 
<a> int [ ] <RARE_TOKEN> ; </a> 
<a> int <RARE_TOKEN> ; </a> 
<a> int e ; </a> 
<a> int b ; </a> 
<a> int k ; </a> 
<a> int p ; </a> 
<a> int n ; </a> 
<a> int q ; </a> 
<a> int m ; </a> 
<a> int <RARE_TOKEN> ; </a> 
<a> int <RARE_TOKEN> ; </a> 
<a> int c ; </a> 
<a> int d ; </a> 
<a> int r ; </a> 
<a> int <RARE_TOKEN> ; </a> 
<a> p = z . next_in_index ; </a> 
<a> n = z . avail_in ; </a> 
<a> b = s . bitb ; </a> 
<a> k = s . bitk ; </a> 
<a> q = s . write ; </a> 
<a> m = q < s . read ? s . read - q - 1 : s . end - q ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> [ <RARE_TOKEN> ] ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> [ <RARE_TOKEN> ] ; </a> 
<a> <RARE_TOKEN> { </a> 
<a> while ( k < 20 ) { </a> 
<a> n -- ; </a> 
<a> b |= ( z . next_in [ p ++ ] & 0xff ) < < k ; </a> 
<a> k += 8 ; </a> 
<a> } </a> 
<a> t = b & <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = ( <RARE_TOKEN> + t ) * 3 ; </a> 
<a> if ( ( e = <RARE_TOKEN> [ <RARE_TOKEN> ] ) == 0 ) { </a> 
<a> b <RARE_TOKEN> <RARE_TOKEN> [ <RARE_TOKEN> + 1 ] ; </a> 
<a> k -= <RARE_TOKEN> [ <RARE_TOKEN> + 1 ] ; </a> 
<a> s . window [ q ++ ] = ( byte ) <RARE_TOKEN> [ <RARE_TOKEN> + 2 ] ; </a> 
<a> m -- ; </a> 
<a> continue ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> { </a> 
<a> b <RARE_TOKEN> <RARE_TOKEN> [ <RARE_TOKEN> + 1 ] ; </a> 
<a> k -= <RARE_TOKEN> [ <RARE_TOKEN> + 1 ] ; </a> 
<a> if ( ( e & 16 ) != 0 ) { </a> 
<a> e <RARE_TOKEN> 15 ; </a> 
<a> c = <RARE_TOKEN> [ <RARE_TOKEN> + 2 ] + ( b & <RARE_TOKEN> [ e ] ) ; </a> 
<a> b <RARE_TOKEN> e ; </a> 
<a> k -= e ; </a> 
<a> while ( k < 15 ) { </a> 
<a> n -- ; </a> 
<a> b |= ( z . next_in [ p ++ ] & 0xff ) < < k ; </a> 
<a> k += 8 ; </a> 
<a> } </a> 
<a> t = b & <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = ( <RARE_TOKEN> + t ) * 3 ; </a> 
<a> e = <RARE_TOKEN> [ <RARE_TOKEN> ] ; </a> 
<a> <RARE_TOKEN> { </a> 
<a> b <RARE_TOKEN> <RARE_TOKEN> [ <RARE_TOKEN> + 1 ] ; </a> 
<a> k -= <RARE_TOKEN> [ <RARE_TOKEN> + 1 ] ; </a> 
<a> if ( ( e & 16 ) != 0 ) { </a> 
<a> e <RARE_TOKEN> 15 ; </a> 
<a> while ( k < e ) { </a> 
<a> n -- ; </a> 
<a> b |= ( z . next_in [ p ++ ] & 0xff ) < < k ; </a> 
<a> k += 8 ; </a> 
<a> } </a> 
<a> d = <RARE_TOKEN> [ <RARE_TOKEN> + 2 ] + ( b & <RARE_TOKEN> [ e ] ) ; </a> 
<a> b <RARE_TOKEN> e ; </a> 
<a> k -= e ; </a> 
<a> m -= c ; </a> 
<a> if ( q >= d ) { </a> 
<a> r = q - d ; </a> 
<a> if ( q - r > 0 && 2 > q - r ) { </a> 
<a> s . window [ q ++ ] = s . window [ r ++ ] ; </a> 
<a> s . window [ q ++ ] = s . window [ r ++ ] ; </a> 
<a> c -= 2 ; </a> 
<a> } else { </a> 
<a> System . <RARE_TOKEN> ( s . window , r , s . window , q , </a> 
<a> 2 ) ; </a> 
<a> q += 2 ; </a> 
<a> r += 2 ; </a> 
<a> c -= 2 ; </a> 
<a> } </a> 
<a> } else { </a> 
<a> r = q - d ; </a> 
<a> <RARE_TOKEN> { </a> 
<a> r += s . end ; </a> 
<a> } while ( r < 0 ) ; </a> 
<a> e = s . end - r ; </a> 
<a> if ( c > e ) { </a> 
<a> c -= e ; </a> 
<a> if ( q - r > 0 && e > q - r ) { </a> 
<a> <RARE_TOKEN> { </a> 
<a> s . window [ q ++ ] = s . window [ r ++ ] ; </a> 
<a> } while ( -- e != 0 ) ; </a> 
<a> } else { </a> 
<a> System . <RARE_TOKEN> ( s . window , r , s . window , </a> 
<a> q , e ) ; </a> 
<a> q += e ; </a> 
<a> r += e ; </a> 
<a> e = 0 ; </a> 
<a> } </a> 
<a> r = 0 ; </a> 
<a> } </a> 
<a> } </a> 
<a> if ( q - r > 0 && c > q - r ) { </a> 
<a> <RARE_TOKEN> { </a> 
<a> s . window [ q ++ ] = s . window [ r ++ ] ; </a> 
<a> } while ( -- c != 0 ) ; </a> 
<a> } else { </a> 
<a> System . <RARE_TOKEN> ( s . window , r , s . window , q , c ) ; </a> 
<a> q += c ; </a> 
<a> r += c ; </a> 
<a> c = 0 ; </a> 
<a> } </a> 
<a> break ; </a> 
<a> } else if ( ( e & <RARE_TOKEN> ) == 0 ) { </a> 
<a> t += <RARE_TOKEN> [ <RARE_TOKEN> + 2 ] ; </a> 
<a> t += b & <RARE_TOKEN> [ e ] ; </a> 
<a> <RARE_TOKEN> = ( <RARE_TOKEN> + t ) * 3 ; </a> 
<a> e = <RARE_TOKEN> [ <RARE_TOKEN> ] ; </a> 
<a> } else { </a> 
<a> z . msg = <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> c = z . avail_in - n ; </a> 
<a> c = k > > 3 < c ? k > > 3 : c ; </a> 
<a> n += c ; </a> 
<a> p -= c ; </a> 
<a> k -= c < < 3 ; </a> 
<a> s . bitb = b ; </a> 
<a> s . bitk = k ; </a> 
<a> z . avail_in = n ; </a> 
<a> z . total_in += p - z . next_in_index ; </a> 
<a> z . next_in_index = p ; </a> 
<a> s . write = q ; </a> 
<a> return JZlib . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } while ( true ) ; </a> 
<a> break ; </a> 
<a> } </a> 
<a> if ( ( e & <RARE_TOKEN> ) == 0 ) { </a> 
<a> t += <RARE_TOKEN> [ <RARE_TOKEN> + 2 ] ; </a> 
<a> t += b & <RARE_TOKEN> [ e ] ; </a> 
<a> <RARE_TOKEN> = ( <RARE_TOKEN> + t ) * 3 ; </a> 
<a> if ( ( e = <RARE_TOKEN> [ <RARE_TOKEN> ] ) == 0 ) { </a> 
<a> b <RARE_TOKEN> <RARE_TOKEN> [ <RARE_TOKEN> + 1 ] ; </a> 
<a> k -= <RARE_TOKEN> [ <RARE_TOKEN> + 1 ] ; </a> 
<a> s . window [ q ++ ] = ( byte ) <RARE_TOKEN> [ <RARE_TOKEN> + 2 ] ; </a> 
<a> m -- ; </a> 
<a> break ; </a> 
<a> } </a> 
<a> } else if ( ( e & 32 ) != 0 ) { </a> 
<a> c = z . avail_in - n ; </a> 
<a> c = k > > 3 < c ? k > > 3 : c ; </a> 
<a> n += c ; </a> 
<a> p -= c ; </a> 
<a> k -= c < < 3 ; </a> 
<a> s . bitb = b ; </a> 
<a> s . bitk = k ; </a> 
<a> z . avail_in = n ; </a> 
<a> z . total_in += p - z . next_in_index ; </a> 
<a> z . next_in_index = p ; </a> 
<a> s . write = q ; </a> 
<a> return JZlib . <RARE_TOKEN> ; </a> 
<a> } else { </a> 
<a> z . msg = <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> c = z . avail_in - n ; </a> 
<a> c = k > > 3 < c ? k > > 3 : c ; </a> 
<a> n += c ; </a> 
<a> p -= c ; </a> 
<a> k -= c < < 3 ; </a> 
<a> s . bitb = b ; </a> 
<a> s . bitk = k ; </a> 
<a> z . avail_in = n ; </a> 
<a> z . total_in += p - z . next_in_index ; </a> 
<a> z . next_in_index = p ; </a> 
<a> s . write = q ; </a> 
<a> return JZlib . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } while ( true ) ; </a> 
<a> } while ( m >= <RARE_TOKEN> && n >= 10 ) ; </a> 
<a> c = z . avail_in - n ; </a> 
<a> c = k > > 3 < c ? k > > 3 : c ; </a> 
<a> n += c ; </a> 
<a> p -= c ; </a> 
<a> k -= c < < 3 ; </a> 
<a> s . bitb = b ; </a> 
<a> s . bitk = k ; </a> 
<a> z . avail_in = n ; </a> 
<a> z . total_in += p - z . next_in_index ; </a> 
<a> z . next_in_index = p ; </a> 
<a> s . write = q ; </a> 
<a> return JZlib . Z_OK ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . util . internal . <RARE_TOKEN> ; </a> 
<a> final class <RARE_TOKEN> { </a> 
<a> static final int <RARE_TOKEN> = 9 ; </a> 
<a> static final int <RARE_TOKEN> = 5 ; </a> 
<a> static final int [ ] <RARE_TOKEN> = { <RARE_TOKEN> , 7 , <RARE_TOKEN> , 0 , 8 , 80 , 0 , 8 , 16 , <RARE_TOKEN> , 8 , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , 7 , <RARE_TOKEN> , 0 , 8 , <RARE_TOKEN> , 0 , 8 , <RARE_TOKEN> , 0 , 9 , <RARE_TOKEN> , 80 , 7 , 10 , 0 , 8 , <RARE_TOKEN> , 0 , </a> 
<a> 8 , 32 , 0 , 9 , <RARE_TOKEN> , 0 , 8 , 0 , 0 , 8 , <RARE_TOKEN> , 0 , 8 , <RARE_TOKEN> , 0 , 9 , <RARE_TOKEN> , 80 , 7 , </a> 
<a> 6 , 0 , 8 , <RARE_TOKEN> , 0 , 8 , 24 , 0 , 9 , <RARE_TOKEN> , <RARE_TOKEN> , 7 , <RARE_TOKEN> , 0 , 8 , <RARE_TOKEN> , 0 , 8 , <RARE_TOKEN> , </a> 
<a> 0 , 9 , <RARE_TOKEN> , <RARE_TOKEN> , 7 , 17 , 0 , 8 , <RARE_TOKEN> , 0 , 8 , <RARE_TOKEN> , 0 , 9 , <RARE_TOKEN> , 0 , 8 , 8 , 0 , </a> 
<a> 8 , <RARE_TOKEN> , 0 , 8 , <RARE_TOKEN> , 0 , 9 , <RARE_TOKEN> , 80 , 7 , 4 , 0 , 8 , <RARE_TOKEN> , 0 , 8 , 20 , <RARE_TOKEN> , 8 , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , 7 , <RARE_TOKEN> , 0 , 8 , <RARE_TOKEN> , 0 , 8 , <RARE_TOKEN> , 0 , 9 , 200 , <RARE_TOKEN> , 7 , 13 , 0 , 8 , </a> 
<a> <RARE_TOKEN> , 0 , 8 , <RARE_TOKEN> , 0 , 9 , <RARE_TOKEN> , 0 , 8 , 4 , 0 , 8 , <RARE_TOKEN> , 0 , 8 , <RARE_TOKEN> , 0 , 9 , <RARE_TOKEN> , </a> 
<a> 80 , 7 , 8 , 0 , 8 , <RARE_TOKEN> , 0 , 8 , 28 , 0 , 9 , <RARE_TOKEN> , <RARE_TOKEN> , 7 , <RARE_TOKEN> , 0 , 8 , <RARE_TOKEN> , 0 , </a> 
<a> 8 , <RARE_TOKEN> , 0 , 9 , <RARE_TOKEN> , <RARE_TOKEN> , 7 , 23 , 0 , 8 , <RARE_TOKEN> , 0 , 8 , <RARE_TOKEN> , 0 , 9 , <RARE_TOKEN> , 0 , 8 , </a> 
<a> 12 , 0 , 8 , <RARE_TOKEN> , 0 , 8 , <RARE_TOKEN> , 0 , 9 , <RARE_TOKEN> , 80 , 7 , 3 , 0 , 8 , <RARE_TOKEN> , 0 , 8 , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , 8 , <RARE_TOKEN> , <RARE_TOKEN> , 7 , <RARE_TOKEN> , 0 , 8 , <RARE_TOKEN> , 0 , 8 , <RARE_TOKEN> , 0 , 9 , <RARE_TOKEN> , <RARE_TOKEN> , 7 , 11 , </a> 
<a> 0 , 8 , <RARE_TOKEN> , 0 , 8 , <RARE_TOKEN> , 0 , 9 , <RARE_TOKEN> , 0 , 8 , 2 , 0 , 8 , <RARE_TOKEN> , 0 , 8 , <RARE_TOKEN> , 0 , 9 , </a> 
<a> <RARE_TOKEN> , 80 , 7 , 7 , 0 , 8 , <RARE_TOKEN> , 0 , 8 , 26 , 0 , 9 , <RARE_TOKEN> , <RARE_TOKEN> , 7 , <RARE_TOKEN> , 0 , 8 , <RARE_TOKEN> , </a> 
<a> 0 , 8 , <RARE_TOKEN> , 0 , 9 , <RARE_TOKEN> , <RARE_TOKEN> , 7 , 19 , 0 , 8 , <RARE_TOKEN> , 0 , 8 , <RARE_TOKEN> , 0 , 9 , <RARE_TOKEN> , 0 , </a> 
<a> 8 , 10 , 0 , 8 , <RARE_TOKEN> , 0 , 8 , <RARE_TOKEN> , 0 , 9 , <RARE_TOKEN> , 80 , 7 , 5 , 0 , 8 , <RARE_TOKEN> , 0 , 8 , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , 8 , 0 , <RARE_TOKEN> , 7 , <RARE_TOKEN> , 0 , 8 , <RARE_TOKEN> , 0 , 8 , <RARE_TOKEN> , 0 , 9 , <RARE_TOKEN> , <RARE_TOKEN> , 7 , </a> 
<a> 15 , 0 , 8 , <RARE_TOKEN> , 0 , 8 , <RARE_TOKEN> , 0 , 9 , <RARE_TOKEN> , 0 , 8 , 6 , 0 , 8 , <RARE_TOKEN> , 0 , 8 , <RARE_TOKEN> , </a> 
<a> 0 , 9 , <RARE_TOKEN> , 80 , 7 , 9 , 0 , 8 , <RARE_TOKEN> , 0 , 8 , <RARE_TOKEN> , 0 , 9 , <RARE_TOKEN> , <RARE_TOKEN> , 7 , <RARE_TOKEN> , 0 , </a> 
<a> 8 , <RARE_TOKEN> , 0 , 8 , <RARE_TOKEN> , 0 , 9 , <RARE_TOKEN> , <RARE_TOKEN> , 7 , 27 , 0 , 8 , <RARE_TOKEN> , 0 , 8 , <RARE_TOKEN> , 0 , 9 , </a> 
<a> <RARE_TOKEN> , 0 , 8 , 14 , 0 , 8 , <RARE_TOKEN> , 0 , 8 , <RARE_TOKEN> , 0 , 9 , <RARE_TOKEN> , <RARE_TOKEN> , 7 , <RARE_TOKEN> , 0 , 8 , </a> 
<a> <RARE_TOKEN> , 0 , 8 , 17 , <RARE_TOKEN> , 8 , <RARE_TOKEN> , <RARE_TOKEN> , 7 , <RARE_TOKEN> , 0 , 8 , <RARE_TOKEN> , 0 , 8 , <RARE_TOKEN> , 0 , 9 , </a> 
<a> <RARE_TOKEN> , 80 , 7 , 10 , 0 , 8 , <RARE_TOKEN> , 0 , 8 , <RARE_TOKEN> , 0 , 9 , <RARE_TOKEN> , 0 , 8 , 1 , 0 , 8 , <RARE_TOKEN> , </a> 
<a> 0 , 8 , <RARE_TOKEN> , 0 , 9 , <RARE_TOKEN> , 80 , 7 , 6 , 0 , 8 , <RARE_TOKEN> , 0 , 8 , 25 , 0 , 9 , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> 7 , <RARE_TOKEN> , 0 , 8 , <RARE_TOKEN> , 0 , 8 , <RARE_TOKEN> , 0 , 9 , <RARE_TOKEN> , <RARE_TOKEN> , 7 , 17 , 0 , 8 , <RARE_TOKEN> , 0 , 8 , </a> 
<a> <RARE_TOKEN> , 0 , 9 , <RARE_TOKEN> , 0 , 8 , 9 , 0 , 8 , <RARE_TOKEN> , 0 , 8 , <RARE_TOKEN> , 0 , 9 , <RARE_TOKEN> , 80 , 7 , 4 , </a> 
<a> 0 , 8 , <RARE_TOKEN> , 0 , 8 , <RARE_TOKEN> , 80 , 8 , <RARE_TOKEN> , <RARE_TOKEN> , 7 , <RARE_TOKEN> , 0 , 8 , <RARE_TOKEN> , 0 , 8 , <RARE_TOKEN> , 0 , </a> 
<a> 9 , <RARE_TOKEN> , <RARE_TOKEN> , 7 , 13 , 0 , 8 , <RARE_TOKEN> , 0 , 8 , <RARE_TOKEN> , 0 , 9 , <RARE_TOKEN> , 0 , 8 , 5 , 0 , 8 , </a> 
<a> <RARE_TOKEN> , 0 , 8 , <RARE_TOKEN> , 0 , 9 , <RARE_TOKEN> , 80 , 7 , 8 , 0 , 8 , <RARE_TOKEN> , 0 , 8 , 29 , 0 , 9 , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , 7 , <RARE_TOKEN> , 0 , 8 , <RARE_TOKEN> , 0 , 8 , <RARE_TOKEN> , 0 , 9 , <RARE_TOKEN> , <RARE_TOKEN> , 7 , 23 , 0 , 8 , <RARE_TOKEN> , 0 , </a> 
<a> 8 , <RARE_TOKEN> , 0 , 9 , <RARE_TOKEN> , 0 , 8 , 13 , 0 , 8 , <RARE_TOKEN> , 0 , 8 , <RARE_TOKEN> , 0 , 9 , <RARE_TOKEN> , 80 , 7 , </a> 
<a> 3 , 0 , 8 , <RARE_TOKEN> , 0 , 8 , 19 , <RARE_TOKEN> , 8 , <RARE_TOKEN> , <RARE_TOKEN> , 7 , <RARE_TOKEN> , 0 , 8 , <RARE_TOKEN> , 0 , 8 , <RARE_TOKEN> , </a> 
<a> 0 , 9 , <RARE_TOKEN> , <RARE_TOKEN> , 7 , 11 , 0 , 8 , <RARE_TOKEN> , 0 , 8 , <RARE_TOKEN> , 0 , 9 , <RARE_TOKEN> , 0 , 8 , 3 , 0 , 8 , </a> 
<a> <RARE_TOKEN> , 0 , 8 , <RARE_TOKEN> , 0 , 9 , <RARE_TOKEN> , 80 , 7 , 7 , 0 , 8 , <RARE_TOKEN> , 0 , 8 , 27 , 0 , 9 , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , 7 , <RARE_TOKEN> , 0 , 8 , <RARE_TOKEN> , 0 , 8 , <RARE_TOKEN> , 0 , 9 , <RARE_TOKEN> , <RARE_TOKEN> , 7 , 19 , 0 , 8 , <RARE_TOKEN> , 0 , </a> 
<a> 8 , <RARE_TOKEN> , 0 , 9 , <RARE_TOKEN> , 0 , 8 , 11 , 0 , 8 , <RARE_TOKEN> , 0 , 8 , <RARE_TOKEN> , 0 , 9 , <RARE_TOKEN> , 80 , 7 , </a> 
<a> 5 , 0 , 8 , <RARE_TOKEN> , 0 , 8 , 23 , <RARE_TOKEN> , 8 , 0 , <RARE_TOKEN> , 7 , <RARE_TOKEN> , 0 , 8 , <RARE_TOKEN> , 0 , 8 , <RARE_TOKEN> , </a> 
<a> 0 , 9 , <RARE_TOKEN> , <RARE_TOKEN> , 7 , 15 , 0 , 8 , <RARE_TOKEN> , 0 , 8 , <RARE_TOKEN> , 0 , 9 , <RARE_TOKEN> , 0 , 8 , 7 , 0 , </a> 
<a> 8 , <RARE_TOKEN> , 0 , 8 , <RARE_TOKEN> , 0 , 9 , <RARE_TOKEN> , 80 , 7 , 9 , 0 , 8 , <RARE_TOKEN> , 0 , 8 , <RARE_TOKEN> , 0 , 9 , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , 7 , <RARE_TOKEN> , 0 , 8 , <RARE_TOKEN> , 0 , 8 , <RARE_TOKEN> , 0 , 9 , <RARE_TOKEN> , <RARE_TOKEN> , 7 , 27 , 0 , 8 , </a> 
<a> <RARE_TOKEN> , 0 , 8 , <RARE_TOKEN> , 0 , 9 , <RARE_TOKEN> , 0 , 8 , 15 , 0 , 8 , <RARE_TOKEN> , 0 , 8 , <RARE_TOKEN> , 0 , 9 , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , 7 , <RARE_TOKEN> , 0 , 8 , 80 , 0 , 8 , 16 , <RARE_TOKEN> , 8 , <RARE_TOKEN> , <RARE_TOKEN> , 7 , <RARE_TOKEN> , 0 , 8 , <RARE_TOKEN> , </a> 
<a> 0 , 8 , <RARE_TOKEN> , 0 , 9 , <RARE_TOKEN> , </a> 
<a> 80 , 7 , 10 , 0 , 8 , <RARE_TOKEN> , 0 , 8 , 32 , 0 , 9 , <RARE_TOKEN> , 0 , 8 , 0 , 0 , 8 , <RARE_TOKEN> , 0 , 8 , </a> 
<a> <RARE_TOKEN> , 0 , 9 , <RARE_TOKEN> , 80 , 7 , 6 , 0 , 8 , <RARE_TOKEN> , 0 , 8 , 24 , 0 , 9 , <RARE_TOKEN> , <RARE_TOKEN> , 7 , <RARE_TOKEN> , </a> 
<a> 0 , 8 , <RARE_TOKEN> , 0 , 8 , <RARE_TOKEN> , 0 , 9 , <RARE_TOKEN> , <RARE_TOKEN> , 7 , 17 , 0 , 8 , <RARE_TOKEN> , 0 , 8 , <RARE_TOKEN> , 0 , </a> 
<a> 9 , <RARE_TOKEN> , 0 , 8 , 8 , 0 , 8 , <RARE_TOKEN> , 0 , 8 , <RARE_TOKEN> , 0 , 9 , <RARE_TOKEN> , 80 , 7 , 4 , 0 , 8 , </a> 
<a> <RARE_TOKEN> , 0 , 8 , 20 , <RARE_TOKEN> , 8 , <RARE_TOKEN> , <RARE_TOKEN> , 7 , <RARE_TOKEN> , 0 , 8 , <RARE_TOKEN> , 0 , 8 , <RARE_TOKEN> , 0 , 9 , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , 7 , 13 , 0 , 8 , <RARE_TOKEN> , 0 , 8 , <RARE_TOKEN> , 0 , 9 , <RARE_TOKEN> , 0 , 8 , 4 , 0 , 8 , <RARE_TOKEN> , </a> 
<a> 0 , 8 , <RARE_TOKEN> , 0 , 9 , <RARE_TOKEN> , 80 , 7 , 8 , 0 , 8 , <RARE_TOKEN> , 0 , 8 , 28 , 0 , 9 , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> 7 , <RARE_TOKEN> , 0 , 8 , <RARE_TOKEN> , 0 , 8 , <RARE_TOKEN> , 0 , 9 , <RARE_TOKEN> , <RARE_TOKEN> , 7 , 23 , 0 , 8 , <RARE_TOKEN> , 0 , 8 , </a> 
<a> <RARE_TOKEN> , 0 , 9 , <RARE_TOKEN> , 0 , 8 , 12 , 0 , 8 , <RARE_TOKEN> , 0 , 8 , <RARE_TOKEN> , 0 , 9 , <RARE_TOKEN> , 80 , 7 , 3 , </a> 
<a> 0 , 8 , <RARE_TOKEN> , 0 , 8 , <RARE_TOKEN> , <RARE_TOKEN> , 8 , <RARE_TOKEN> , <RARE_TOKEN> , 7 , <RARE_TOKEN> , 0 , 8 , <RARE_TOKEN> , 0 , 8 , <RARE_TOKEN> , 0 , </a> 
<a> 9 , <RARE_TOKEN> , <RARE_TOKEN> , 7 , 11 , 0 , 8 , <RARE_TOKEN> , 0 , 8 , <RARE_TOKEN> , 0 , 9 , <RARE_TOKEN> , 0 , 8 , 2 , 0 , 8 , </a> 
<a> <RARE_TOKEN> , 0 , 8 , <RARE_TOKEN> , 0 , 9 , <RARE_TOKEN> , 80 , 7 , 7 , 0 , 8 , <RARE_TOKEN> , 0 , 8 , 26 , 0 , 9 , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , 7 , <RARE_TOKEN> , 0 , 8 , <RARE_TOKEN> , 0 , 8 , <RARE_TOKEN> , 0 , 9 , <RARE_TOKEN> , <RARE_TOKEN> , 7 , 19 , 0 , 8 , <RARE_TOKEN> , 0 , </a> 
<a> 8 , <RARE_TOKEN> , 0 , 9 , <RARE_TOKEN> , 0 , 8 , 10 , 0 , 8 , <RARE_TOKEN> , 0 , 8 , <RARE_TOKEN> , 0 , 9 , <RARE_TOKEN> , 80 , 7 , </a> 
<a> 5 , 0 , 8 , <RARE_TOKEN> , 0 , 8 , <RARE_TOKEN> , <RARE_TOKEN> , 8 , 0 , <RARE_TOKEN> , 7 , <RARE_TOKEN> , 0 , 8 , <RARE_TOKEN> , 0 , 8 , <RARE_TOKEN> , </a> 
<a> 0 , 9 , <RARE_TOKEN> , <RARE_TOKEN> , 7 , 15 , 0 , 8 , <RARE_TOKEN> , 0 , 8 , <RARE_TOKEN> , 0 , 9 , <RARE_TOKEN> , 0 , 8 , 6 , 0 , </a> 
<a> 8 , <RARE_TOKEN> , 0 , 8 , <RARE_TOKEN> , 0 , 9 , <RARE_TOKEN> , 80 , 7 , 9 , 0 , 8 , <RARE_TOKEN> , 0 , 8 , <RARE_TOKEN> , 0 , 9 , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , 7 , <RARE_TOKEN> , 0 , 8 , <RARE_TOKEN> , 0 , 8 , <RARE_TOKEN> , 0 , 9 , <RARE_TOKEN> , <RARE_TOKEN> , 7 , 27 , 0 , 8 , </a> 
<a> <RARE_TOKEN> , 0 , 8 , <RARE_TOKEN> , 0 , 9 , <RARE_TOKEN> , 0 , 8 , 14 , 0 , 8 , <RARE_TOKEN> , 0 , 8 , <RARE_TOKEN> , 0 , 9 , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , 7 , <RARE_TOKEN> , 0 , 8 , <RARE_TOKEN> , 0 , 8 , 17 , <RARE_TOKEN> , 8 , <RARE_TOKEN> , <RARE_TOKEN> , 7 , <RARE_TOKEN> , 0 , 8 , <RARE_TOKEN> , </a> 
<a> 0 , 8 , <RARE_TOKEN> , 0 , 9 , <RARE_TOKEN> , 80 , 7 , 10 , 0 , 8 , <RARE_TOKEN> , 0 , 8 , <RARE_TOKEN> , 0 , 9 , <RARE_TOKEN> , 0 , </a> 
<a> 8 , 1 , 0 , 8 , <RARE_TOKEN> , 0 , 8 , <RARE_TOKEN> , 0 , 9 , <RARE_TOKEN> , 80 , 7 , 6 , 0 , 8 , <RARE_TOKEN> , 0 , 8 , 25 , </a> 
<a> 0 , 9 , <RARE_TOKEN> , <RARE_TOKEN> , 7 , <RARE_TOKEN> , 0 , 8 , <RARE_TOKEN> , 0 , 8 , <RARE_TOKEN> , 0 , 9 , <RARE_TOKEN> , <RARE_TOKEN> , 7 , 17 , 0 , </a> 
<a> 8 , <RARE_TOKEN> , 0 , 8 , <RARE_TOKEN> , 0 , 9 , <RARE_TOKEN> , 0 , 8 , 9 , 0 , 8 , <RARE_TOKEN> , 0 , 8 , <RARE_TOKEN> , 0 , 9 , </a> 
<a> <RARE_TOKEN> , 80 , 7 , 4 , 0 , 8 , <RARE_TOKEN> , 0 , 8 , <RARE_TOKEN> , 80 , 8 , <RARE_TOKEN> , <RARE_TOKEN> , 7 , <RARE_TOKEN> , 0 , 8 , </a> 
<a> <RARE_TOKEN> , 0 , 8 , <RARE_TOKEN> , 0 , 9 , <RARE_TOKEN> , <RARE_TOKEN> , 7 , 13 , 0 , 8 , <RARE_TOKEN> , 0 , 8 , <RARE_TOKEN> , 0 , 9 , </a> 
<a> <RARE_TOKEN> , 0 , 8 , 5 , 0 , 8 , <RARE_TOKEN> , 0 , 8 , <RARE_TOKEN> , 0 , 9 , <RARE_TOKEN> , 80 , 7 , 8 , 0 , 8 , <RARE_TOKEN> , </a> 
<a> 0 , 8 , 29 , 0 , 9 , <RARE_TOKEN> , <RARE_TOKEN> , 7 , <RARE_TOKEN> , 0 , 8 , <RARE_TOKEN> , 0 , 8 , <RARE_TOKEN> , 0 , 9 , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> 7 , 23 , 0 , 8 , <RARE_TOKEN> , 0 , 8 , <RARE_TOKEN> , 0 , 9 , <RARE_TOKEN> , 0 , 8 , 13 , 0 , 8 , <RARE_TOKEN> , 0 , 8 , </a> 
<a> <RARE_TOKEN> , 0 , 9 , <RARE_TOKEN> , 80 , 7 , 3 , 0 , 8 , <RARE_TOKEN> , 0 , 8 , 19 , <RARE_TOKEN> , 8 , <RARE_TOKEN> , <RARE_TOKEN> , 7 , <RARE_TOKEN> , </a> 
<a> 0 , 8 , <RARE_TOKEN> , 0 , 8 , <RARE_TOKEN> , 0 , 9 , <RARE_TOKEN> , <RARE_TOKEN> , 7 , 11 , 0 , 8 , <RARE_TOKEN> , 0 , 8 , <RARE_TOKEN> , 0 , </a> 
<a> 9 , <RARE_TOKEN> , 0 , 8 , 3 , 0 , 8 , <RARE_TOKEN> , 0 , 8 , <RARE_TOKEN> , 0 , 9 , <RARE_TOKEN> , 80 , 7 , 7 , 0 , 8 , </a> 
<a> <RARE_TOKEN> , 0 , 8 , 27 , 0 , 9 , <RARE_TOKEN> , <RARE_TOKEN> , 7 , <RARE_TOKEN> , 0 , 8 , <RARE_TOKEN> , 0 , 8 , <RARE_TOKEN> , 0 , 9 , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , 7 , 19 , 0 , 8 , <RARE_TOKEN> , 0 , 8 , <RARE_TOKEN> , 0 , 9 , <RARE_TOKEN> , 0 , 8 , 11 , 0 , 8 , <RARE_TOKEN> , 0 , </a> 
<a> 8 , <RARE_TOKEN> , 0 , 9 , <RARE_TOKEN> , 80 , 7 , 5 , 0 , 8 , <RARE_TOKEN> , 0 , 8 , 23 , <RARE_TOKEN> , 8 , 0 , <RARE_TOKEN> , 7 , </a> 
<a> <RARE_TOKEN> , 0 , 8 , <RARE_TOKEN> , 0 , 8 , <RARE_TOKEN> , 0 , 9 , <RARE_TOKEN> , <RARE_TOKEN> , 7 , 15 , 0 , 8 , <RARE_TOKEN> , 0 , 8 , <RARE_TOKEN> , </a> 
<a> 0 , 9 , <RARE_TOKEN> , 0 , 8 , 7 , 0 , 8 , <RARE_TOKEN> , 0 , 8 , <RARE_TOKEN> , 0 , 9 , <RARE_TOKEN> , 80 , 7 , 9 , 0 , 8 , </a> 
<a> <RARE_TOKEN> , 0 , 8 , <RARE_TOKEN> , 0 , 9 , <RARE_TOKEN> , <RARE_TOKEN> , 7 , <RARE_TOKEN> , 0 , 8 , <RARE_TOKEN> , 0 , 8 , <RARE_TOKEN> , 0 , 9 , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , 7 , 27 , 0 , 8 , <RARE_TOKEN> , 0 , 8 , <RARE_TOKEN> , 0 , 9 , <RARE_TOKEN> , 0 , 8 , 15 , 0 , 8 , <RARE_TOKEN> , 0 , </a> 
<a> 8 , <RARE_TOKEN> , 0 , 9 , <RARE_TOKEN> } ; </a> 
<a> static final int [ ] <RARE_TOKEN> = { 80 , 5 , 1 , <RARE_TOKEN> , 5 , <RARE_TOKEN> , <RARE_TOKEN> , 5 , 17 , <RARE_TOKEN> , 5 , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , 5 , 5 , <RARE_TOKEN> , 5 , <RARE_TOKEN> , <RARE_TOKEN> , 5 , <RARE_TOKEN> , <RARE_TOKEN> , 5 , <RARE_TOKEN> , 80 , 5 , 3 , <RARE_TOKEN> , </a> 
<a> 5 , <RARE_TOKEN> , <RARE_TOKEN> , 5 , <RARE_TOKEN> , <RARE_TOKEN> , 5 , <RARE_TOKEN> , <RARE_TOKEN> , 5 , 9 , <RARE_TOKEN> , 5 , <RARE_TOKEN> , <RARE_TOKEN> , 5 , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , 5 , <RARE_TOKEN> , 80 , 5 , 2 , <RARE_TOKEN> , 5 , <RARE_TOKEN> , <RARE_TOKEN> , 5 , 25 , <RARE_TOKEN> , 5 , <RARE_TOKEN> , <RARE_TOKEN> , 5 , </a> 
<a> 7 , <RARE_TOKEN> , 5 , <RARE_TOKEN> , <RARE_TOKEN> , 5 , <RARE_TOKEN> , <RARE_TOKEN> , 5 , <RARE_TOKEN> , 80 , 5 , 4 , <RARE_TOKEN> , 5 , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> 5 , <RARE_TOKEN> , <RARE_TOKEN> , 5 , <RARE_TOKEN> , <RARE_TOKEN> , 5 , 13 , <RARE_TOKEN> , 5 , <RARE_TOKEN> , <RARE_TOKEN> , 5 , <RARE_TOKEN> , <RARE_TOKEN> , 5 , </a> 
<a> <RARE_TOKEN> } ; </a> 
<a> static final int [ ] <RARE_TOKEN> = { </a> 
<a> 3 , 4 , 5 , 6 , 7 , 8 , 9 , 10 , 11 , 13 , 15 , 17 , 19 , 23 , 27 , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , 0 , 0 } ; </a> 
<a> static final int [ ] <RARE_TOKEN> = { </a> 
<a> 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 1 , 1 , 1 , 1 , 2 , 2 , 2 , 2 , 3 , 3 , 3 , 3 , 4 , 4 , 4 , 4 , 5 , </a> 
<a> 5 , 5 , 5 , 0 , <RARE_TOKEN> , <RARE_TOKEN> </a> 
<a> } ; </a> 
<a> static final int [ ] <RARE_TOKEN> = { </a> 
<a> 1 , 2 , 3 , 4 , 5 , 7 , 9 , 13 , 17 , 25 , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> } ; </a> 
<a> static final int [ ] <RARE_TOKEN> = { </a> 
<a> 0 , 0 , 0 , 0 , 1 , 1 , 2 , 2 , 3 , 3 , 4 , 4 , 5 , 5 , 6 , 6 , 7 , 7 , 8 , 8 , 9 , 9 , 10 , 10 , </a> 
<a> 11 , 11 , 12 , 12 , 13 , 13 } ; </a> 
<a> static final int <RARE_TOKEN> = 15 ; </a> 
<a> private int [ ] <RARE_TOKEN> ; </a> 
<a> private int [ ] v ; </a> 
<a> private int [ ] c ; </a> 
<a> private int [ ] r ; </a> 
<a> private int [ ] <RARE_TOKEN> ; </a> 
<a> private int [ ] <RARE_TOKEN> ; </a> 
<a> private int <RARE_TOKEN> ( int [ ] b , </a> 
<a> int <RARE_TOKEN> , int n , </a> 
<a> int s , </a> 
<a> int [ ] d , </a> 
<a> int [ ] e , </a> 
<a> int [ ] t , </a> 
<a> int [ ] m , </a> 
<a> int [ ] <RARE_TOKEN> , </a> 
<a> int [ ] <RARE_TOKEN> , </a> 
<a> int [ ] v </a> 
<a> ) { </a> 
<a> int a ; </a> 
<a> int f ; </a> 
<a> int <RARE_TOKEN> ; </a> 
<a> int h ; </a> 
<a> int i ; </a> 
<a> int j ; </a> 
<a> int k ; </a> 
<a> int l ; </a> 
<a> int <RARE_TOKEN> ; </a> 
<a> int p ; </a> 
<a> int q ; </a> 
<a> int w ; </a> 
<a> int <RARE_TOKEN> ; </a> 
<a> int <RARE_TOKEN> ; </a> 
<a> int z ; </a> 
<a> p = 0 ; </a> 
<a> i = n ; </a> 
<a> <RARE_TOKEN> { </a> 
<a> c [ b [ <RARE_TOKEN> + p ] ] ++ ; </a> 
<a> p ++ ; </a> 
<a> i -- ; </a> 
<a> } while ( i != 0 ) ; </a> 
<a> if ( c [ 0 ] == n ) { </a> 
<a> t [ 0 ] = - 1 ; </a> 
<a> m [ 0 ] = 0 ; </a> 
<a> return JZlib . Z_OK ; </a> 
<a> } </a> 
<a> l = m [ 0 ] ; </a> 
<a> for ( j = 1 ; j <= <RARE_TOKEN> ; j ++ ) { </a> 
<a> if ( c [ j ] != 0 ) { </a> 
<a> break ; </a> 
<a> } </a> 
<a> } </a> 
<a> k = j ; </a> 
<a> if ( l < j ) { </a> 
<a> l = j ; </a> 
<a> } </a> 
<a> for ( i = <RARE_TOKEN> ; i != 0 ; i -- ) { </a> 
<a> if ( c [ i ] != 0 ) { </a> 
<a> break ; </a> 
<a> } </a> 
<a> } </a> 
<a> <RARE_TOKEN> = i ; </a> 
<a> if ( l > i ) { </a> 
<a> l = i ; </a> 
<a> } </a> 
<a> m [ 0 ] = l ; </a> 
<a> for ( <RARE_TOKEN> = 1 < < j ; j < i ; j ++ , <RARE_TOKEN> <RARE_TOKEN> 1 ) { </a> 
<a> if ( ( <RARE_TOKEN> -= c [ j ] ) < 0 ) { </a> 
<a> return JZlib . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<a> if ( ( <RARE_TOKEN> -= c [ i ] ) < 0 ) { </a> 
<a> return JZlib . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> c [ i ] += <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> [ 1 ] = j = 0 ; </a> 
<a> p = 1 ; </a> 
<a> <RARE_TOKEN> = 2 ; </a> 
<a> while ( -- i != 0 ) { </a> 
<a> <RARE_TOKEN> [ <RARE_TOKEN> ] = j += c [ p ] ; </a> 
<a> <RARE_TOKEN> ++ ; </a> 
<a> p ++ ; </a> 
<a> } </a> 
<a> i = 0 ; </a> 
<a> p = 0 ; </a> 
<a> <RARE_TOKEN> { </a> 
<a> if ( ( j = b [ <RARE_TOKEN> + p ] ) != 0 ) { </a> 
<a> v [ <RARE_TOKEN> [ j ] ++ ] = i ; </a> 
<a> } </a> 
<a> p ++ ; </a> 
<a> } while ( ++ i < n ) ; </a> 
<a> n = <RARE_TOKEN> [ <RARE_TOKEN> ] ; </a> 
<a> <RARE_TOKEN> [ 0 ] = i = 0 ; </a> 
<a> p = 0 ; </a> 
<a> h = - 1 ; </a> 
<a> w = - l ; </a> 
<a> <RARE_TOKEN> [ 0 ] = 0 ; </a> 
<a> q = 0 ; </a> 
<a> z = 0 ; </a> 
<a> for ( ; k <= <RARE_TOKEN> ; k ++ ) { </a> 
<a> a = c [ k ] ; </a> 
<a> while ( a -- != 0 ) { </a> 
<a> while ( k > w + l ) { </a> 
<a> h ++ ; </a> 
<a> w += l ; </a> 
<a> z = <RARE_TOKEN> - w ; </a> 
<a> z = z > l ? l : z ; </a> 
<a> if ( ( f = 1 < < ( j = k - w ) ) > a + 1 ) { </a> 
<a> f -= a + 1 ; </a> 
<a> <RARE_TOKEN> = k ; </a> 
<a> if ( j < z ) { </a> 
<a> while ( ++ j < z ) { </a> 
<a> if ( ( f <RARE_TOKEN> 1 ) <= c [ ++ <RARE_TOKEN> ] ) { </a> 
<a> break ; </a> 
<a> } </a> 
<a> f -= c [ <RARE_TOKEN> ] ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> z = 1 < < j ; </a> 
<a> if ( <RARE_TOKEN> [ 0 ] + z > JZlib . <RARE_TOKEN> ) { </a> 
<a> return JZlib . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> [ h ] = q = <RARE_TOKEN> [ 0 ] ; </a> 
<a> <RARE_TOKEN> [ 0 ] += z ; </a> 
<a> if ( h != 0 ) { </a> 
<a> <RARE_TOKEN> [ h ] = i ; </a> 
<a> r [ 0 ] = ( byte ) j ; </a> 
<a> r [ 1 ] = ( byte ) l ; </a> 
<a> j = i > > > w - l ; </a> 
<a> r [ 2 ] = q - <RARE_TOKEN> [ h - 1 ] - j ; </a> 
<a> System . <RARE_TOKEN> ( r , 0 , <RARE_TOKEN> , ( <RARE_TOKEN> [ h - 1 ] + j ) * 3 , 3 ) ; </a> 
<a> } else { </a> 
<a> t [ 0 ] = q ; </a> 
<a> } </a> 
<a> } </a> 
<a> r [ 1 ] = ( byte ) ( k - w ) ; </a> 
<a> if ( p >= n ) { </a> 
<a> r [ 0 ] = <RARE_TOKEN> + <RARE_TOKEN> ; </a> 
<a> } else if ( v [ p ] < s ) { </a> 
<a> r [ 0 ] = ( byte ) ( v [ p ] < <RARE_TOKEN> ? 0 : 32 + <RARE_TOKEN> ) ; </a> 
<a> r [ 2 ] = v [ p ++ ] ; </a> 
<a> } else { </a> 
<a> r [ 0 ] = ( byte ) ( e [ v [ p ] - s ] + 16 + <RARE_TOKEN> ) ; </a> 
<a> r [ 2 ] = d [ v [ p ++ ] - s ] ; </a> 
<a> } </a> 
<a> f = 1 < < k - w ; </a> 
<a> for ( j = i > > > w ; j < z ; j += f ) { </a> 
<a> System . <RARE_TOKEN> ( r , 0 , <RARE_TOKEN> , ( q + j ) * 3 , 3 ) ; </a> 
<a> } </a> 
<a> for ( j = 1 < < k - 1 ; ( i & j ) != 0 ; j <RARE_TOKEN> 1 ) { </a> 
<a> i <RARE_TOKEN> j ; </a> 
<a> } </a> 
<a> i <RARE_TOKEN> j ; </a> 
<a> <RARE_TOKEN> = ( 1 < < w ) - 1 ; </a> 
<a> while ( ( i & <RARE_TOKEN> ) != <RARE_TOKEN> [ h ] ) { </a> 
<a> h -- ; </a> 
<a> w -= l ; </a> 
<a> <RARE_TOKEN> = ( 1 < < w ) - 1 ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> return <RARE_TOKEN> != 0 && <RARE_TOKEN> != 1 ? JZlib . <RARE_TOKEN> : JZlib . Z_OK ; </a> 
<a> } </a> 
<a> int <RARE_TOKEN> ( int [ ] c , </a> 
<a> int [ ] <RARE_TOKEN> , </a> 
<a> int [ ] <RARE_TOKEN> , </a> 
<a> int [ ] <RARE_TOKEN> , </a> 
<a> ZStream z </a> 
<a> ) { </a> 
<a> int result ; </a> 
<a> <RARE_TOKEN> ( 19 ) ; </a> 
<a> <RARE_TOKEN> [ 0 ] = 0 ; </a> 
<a> result = <RARE_TOKEN> ( c , 0 , 19 , 19 , null , null , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , v ) ; </a> 
<a> if ( result == JZlib . <RARE_TOKEN> ) { </a> 
<a> z . msg = <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> } else if ( result == JZlib . <RARE_TOKEN> || <RARE_TOKEN> [ 0 ] == 0 ) { </a> 
<a> z . msg = <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> result = JZlib . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> return result ; </a> 
<a> } </a> 
<a> int <RARE_TOKEN> ( int <RARE_TOKEN> , </a> 
<a> int <RARE_TOKEN> , </a> 
<a> int [ ] c , </a> 
<a> int [ ] <RARE_TOKEN> , </a> 
<a> int [ ] <RARE_TOKEN> , </a> 
<a> int [ ] <RARE_TOKEN> , </a> 
<a> int [ ] <RARE_TOKEN> , </a> 
<a> int [ ] <RARE_TOKEN> , </a> 
<a> ZStream z </a> 
<a> ) { </a> 
<a> int result ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> [ 0 ] = 0 ; </a> 
<a> result = <RARE_TOKEN> ( c , 0 , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , v ) ; </a> 
<a> if ( result != JZlib . Z_OK || <RARE_TOKEN> [ 0 ] == 0 ) { </a> 
<a> if ( result == JZlib . <RARE_TOKEN> ) { </a> 
<a> z . msg = <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> } else if ( result != JZlib . <RARE_TOKEN> ) { </a> 
<a> z . msg = <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> result = JZlib . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> return result ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> result = <RARE_TOKEN> ( c , <RARE_TOKEN> , <RARE_TOKEN> , 0 , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , v ) ; </a> 
<a> if ( result != JZlib . Z_OK || <RARE_TOKEN> [ 0 ] == 0 && <RARE_TOKEN> > <RARE_TOKEN> ) { </a> 
<a> if ( result == JZlib . <RARE_TOKEN> ) { </a> 
<a> z . msg = <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> } else if ( result == JZlib . <RARE_TOKEN> ) { </a> 
<a> z . msg = <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> result = JZlib . <RARE_TOKEN> ; </a> 
<a> } else if ( result != JZlib . <RARE_TOKEN> ) { </a> 
<a> z . msg = <RARE_TOKEN> <RARE_TOKEN> tree <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> result = JZlib . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> return result ; </a> 
<a> } </a> 
<a> return JZlib . Z_OK ; </a> 
<a> } </a> 
<a> static int <RARE_TOKEN> ( int [ ] <RARE_TOKEN> , </a> 
<a> int [ ] <RARE_TOKEN> , </a> 
<a> int [ ] [ ] <RARE_TOKEN> , </a> 
<a> int [ ] [ ] <RARE_TOKEN> </a> 
<a> ) { </a> 
<a> <RARE_TOKEN> [ 0 ] = <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> [ 0 ] = <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> [ 0 ] = <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> [ 0 ] = <RARE_TOKEN> ; </a> 
<a> return JZlib . Z_OK ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( int <RARE_TOKEN> ) { </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> <RARE_TOKEN> = new int [ 1 ] ; </a> 
<a> v = new int [ <RARE_TOKEN> ] ; </a> 
<a> c = new int [ <RARE_TOKEN> + 1 ] ; </a> 
<a> r = new int [ 3 ] ; </a> 
<a> <RARE_TOKEN> = new int [ <RARE_TOKEN> ] ; </a> 
<a> <RARE_TOKEN> = new int [ <RARE_TOKEN> + 1 ] ; </a> 
<a> } else { </a> 
<a> if ( v . length < <RARE_TOKEN> ) { </a> 
<a> v = new int [ <RARE_TOKEN> ] ; </a> 
<a> } else { </a> 
<a> for ( int i = 0 ; i < <RARE_TOKEN> ; i ++ ) { </a> 
<a> v [ i ] = 0 ; </a> 
<a> } </a> 
<a> } </a> 
<a> for ( int i = 0 ; i < <RARE_TOKEN> + 1 ; i ++ ) { </a> 
<a> c [ i ] = 0 ; </a> 
<a> } </a> 
<a> for ( int i = 0 ; i < 3 ; i ++ ) { </a> 
<a> r [ i ] = 0 ; </a> 
<a> } </a> 
<a> System . <RARE_TOKEN> ( c , 0 , <RARE_TOKEN> , 0 , <RARE_TOKEN> ) ; </a> 
<a> System . <RARE_TOKEN> ( c , 0 , <RARE_TOKEN> , 0 , <RARE_TOKEN> + 1 ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . util . internal . <RARE_TOKEN> ; </a> 
<a> import io . netty . util . internal . <RARE_TOKEN> . JZlib . <RARE_TOKEN> ; </a> 
<a> final class <RARE_TOKEN> { </a> 
<a> private static final int <RARE_TOKEN> = 0 ; </a> 
<a> private static final int <RARE_TOKEN> = 1 ; </a> 
<a> private static final int <RARE_TOKEN> = 2 ; </a> 
<a> private static final int <RARE_TOKEN> = 3 ; </a> 
<a> private static final int <RARE_TOKEN> = 4 ; </a> 
<a> private static final int <RARE_TOKEN> = 5 ; </a> 
<a> private static final int <RARE_TOKEN> = 6 ; </a> 
<a> private static final int <RARE_TOKEN> = 7 ; </a> 
<a> private static final int <RARE_TOKEN> = 8 ; </a> 
<a> private static final int <RARE_TOKEN> = 9 ; </a> 
<a> private static final int <RARE_TOKEN> = 10 ; </a> 
<a> private static final int <RARE_TOKEN> = 11 ; </a> 
<a> private static final int <RARE_TOKEN> = 12 ; </a> 
<a> private static final int <RARE_TOKEN> = 13 ; </a> 
<a> private static final int <RARE_TOKEN> = 14 ; </a> 
<a> private static final int <RARE_TOKEN> = 15 ; </a> 
<a> private static final int <RARE_TOKEN> = 16 ; </a> 
<a> private static final int <RARE_TOKEN> = 17 ; </a> 
<a> private static final int <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final int <RARE_TOKEN> = 19 ; </a> 
<a> private static final int <RARE_TOKEN> = 20 ; </a> 
<a> private static final int <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final int <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final int <RARE_TOKEN> = 23 ; </a> 
<a> private static final int <RARE_TOKEN> = 24 ; </a> 
<a> private static final int <RARE_TOKEN> = 25 ; </a> 
<a> private int mode ; </a> 
<a> private int method ; </a> 
<a> private final long [ ] <RARE_TOKEN> = new long [ 1 ] ; </a> 
<a> private long <RARE_TOKEN> ; </a> 
<a> private int <RARE_TOKEN> ; </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> private int <RARE_TOKEN> ; </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> private int <RARE_TOKEN> ; </a> 
<a> private int <RARE_TOKEN> ; </a> 
<a> private int <RARE_TOKEN> ; </a> 
<a> private int <RARE_TOKEN> ; </a> 
<a> private int <RARE_TOKEN> ; </a> 
<a> private int <RARE_TOKEN> ; </a> 
<a> private int <RARE_TOKEN> ( ZStream z ) { </a> 
<a> if ( z == null || z . istate == null ) { </a> 
<a> return JZlib . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> z . total_in = z . <RARE_TOKEN> = 0 ; </a> 
<a> z . msg = null ; </a> 
<a> switch ( <RARE_TOKEN> ) { </a> 
<a> case <RARE_TOKEN> : </a> 
<a> z . istate . mode = <RARE_TOKEN> ; </a> 
<a> break ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> case <RARE_TOKEN> : </a> 
<a> z . istate . mode = <RARE_TOKEN> ; </a> 
<a> break ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> z . istate . mode = <RARE_TOKEN> ; </a> 
<a> break ; </a> 
<a> } </a> 
<a> z . istate . <RARE_TOKEN> . <RARE_TOKEN> ( z , null ) ; </a> 
<a> <RARE_TOKEN> = 0 ; </a> 
<a> return JZlib . Z_OK ; </a> 
<a> } </a> 
<a> int <RARE_TOKEN> ( ZStream z ) { </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( z ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> = null ; </a> 
<a> return JZlib . Z_OK ; </a> 
<a> } </a> 
<a> int <RARE_TOKEN> ( ZStream z , int w , <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> z . msg = null ; </a> 
<a> <RARE_TOKEN> = null ; </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> if ( w < 0 ) { </a> 
<a> throw new IllegalArgumentException ( <RARE_TOKEN> " + w ) ; </a> 
<a> } </a> 
<a> if ( w < 8 || w > 15 ) { </a> 
<a> <RARE_TOKEN> ( z ) ; </a> 
<a> return JZlib . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> = w ; </a> 
<a> z . istate . <RARE_TOKEN> = new <RARE_TOKEN> ( </a> 
<a> z , z . istate . <RARE_TOKEN> == <RARE_TOKEN> . <RARE_TOKEN> ? null : this , </a> 
<a> 1 < < w ) ; </a> 
<a> <RARE_TOKEN> ( z ) ; </a> 
<a> return JZlib . Z_OK ; </a> 
<a> } </a> 
<a> int <RARE_TOKEN> ( ZStream z , int f ) { </a> 
<a> int r ; </a> 
<a> int b ; </a> 
<a> if ( z == null || z . istate == null || z . next_in == null ) { </a> 
<a> return JZlib . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> f = f == JZlib . <RARE_TOKEN> ? JZlib . <RARE_TOKEN> : JZlib . Z_OK ; </a> 
<a> r = JZlib . <RARE_TOKEN> ; </a> 
<a> while ( true ) { </a> 
<a> switch ( z . istate . mode ) { </a> 
<a> case <RARE_TOKEN> : </a> 
<a> if ( z . avail_in == 0 ) { </a> 
<a> return r ; </a> 
<a> } </a> 
<a> if ( z . istate . <RARE_TOKEN> == <RARE_TOKEN> . <RARE_TOKEN> ) { </a> 
<a> if ( ( z . next_in [ z . next_in_index ] & <RARE_TOKEN> ) != JZlib . <RARE_TOKEN> || </a> 
<a> ( z . next_in [ z . next_in_index ] > > 4 ) + 8 > z . istate . <RARE_TOKEN> ) { </a> 
<a> z . istate . <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> z . istate . mode = <RARE_TOKEN> ; </a> 
<a> break ; </a> 
<a> } else { </a> 
<a> z . istate . <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<a> r = f ; </a> 
<a> z . avail_in -- ; </a> 
<a> z . total_in ++ ; </a> 
<a> if ( ( ( z . istate . method = z . next_in [ z . next_in_index ++ ] ) & <RARE_TOKEN> ) != JZlib . <RARE_TOKEN> ) { </a> 
<a> z . istate . mode = <RARE_TOKEN> ; </a> 
<a> z . msg = <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> z . istate . <RARE_TOKEN> = 5 ; </a> 
<a> break ; </a> 
<a> } </a> 
<a> if ( ( z . istate . method > > 4 ) + 8 > z . istate . <RARE_TOKEN> ) { </a> 
<a> z . istate . mode = <RARE_TOKEN> ; </a> 
<a> z . msg = <RARE_TOKEN> window <RARE_TOKEN> ; </a> 
<a> z . istate . <RARE_TOKEN> = 5 ; </a> 
<a> break ; </a> 
<a> } </a> 
<a> z . istate . mode = <RARE_TOKEN> ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> if ( z . avail_in == 0 ) { </a> 
<a> return r ; </a> 
<a> } </a> 
<a> r = f ; </a> 
<a> z . avail_in -- ; </a> 
<a> z . total_in ++ ; </a> 
<a> b = z . next_in [ z . next_in_index ++ ] & 0xff ; </a> 
<a> if ( ( ( z . istate . method < < 8 ) + b ) <RARE_TOKEN> <RARE_TOKEN> != 0 ) { </a> 
<a> z . istate . mode = <RARE_TOKEN> ; </a> 
<a> z . msg = <RARE_TOKEN> header <RARE_TOKEN> ; </a> 
<a> z . istate . <RARE_TOKEN> = 5 ; </a> 
<a> break ; </a> 
<a> } </a> 
<a> if ( ( b & JZlib . <RARE_TOKEN> ) == 0 ) { </a> 
<a> z . istate . mode = <RARE_TOKEN> ; </a> 
<a> break ; </a> 
<a> } </a> 
<a> z . istate . mode = <RARE_TOKEN> ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> if ( z . avail_in == 0 ) { </a> 
<a> return r ; </a> 
<a> } </a> 
<a> r = f ; </a> 
<a> z . avail_in -- ; </a> 
<a> z . total_in ++ ; </a> 
<a> z . istate . <RARE_TOKEN> = ( z . next_in [ z . next_in_index ++ ] & 0xff ) < < 24 & <RARE_TOKEN> ; </a> 
<a> z . istate . mode = <RARE_TOKEN> ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> if ( z . avail_in == 0 ) { </a> 
<a> return r ; </a> 
<a> } </a> 
<a> r = f ; </a> 
<a> z . avail_in -- ; </a> 
<a> z . total_in ++ ; </a> 
<a> z . istate . <RARE_TOKEN> += ( z . next_in [ z . next_in_index ++ ] & 0xff ) < < 16 & <RARE_TOKEN> ; </a> 
<a> z . istate . mode = <RARE_TOKEN> ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> if ( z . avail_in == 0 ) { </a> 
<a> return r ; </a> 
<a> } </a> 
<a> r = f ; </a> 
<a> z . avail_in -- ; </a> 
<a> z . total_in ++ ; </a> 
<a> z . istate . <RARE_TOKEN> += ( z . next_in [ z . next_in_index ++ ] & 0xff ) < < 8 & <RARE_TOKEN> ; </a> 
<a> z . istate . mode = <RARE_TOKEN> ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> if ( z . avail_in == 0 ) { </a> 
<a> return r ; </a> 
<a> } </a> 
<a> z . avail_in -- ; </a> 
<a> z . total_in ++ ; </a> 
<a> z . istate . <RARE_TOKEN> += z . next_in [ z . next_in_index ++ ] & <RARE_TOKEN> ; </a> 
<a> z . <RARE_TOKEN> = z . istate . <RARE_TOKEN> ; </a> 
<a> z . istate . mode = <RARE_TOKEN> ; </a> 
<a> return JZlib . <RARE_TOKEN> ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> z . istate . mode = <RARE_TOKEN> ; </a> 
<a> z . msg = <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> z . istate . <RARE_TOKEN> = 0 ; </a> 
<a> return JZlib . <RARE_TOKEN> ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> int <RARE_TOKEN> = z . <RARE_TOKEN> ; </a> 
<a> try { </a> 
<a> r = z . istate . <RARE_TOKEN> . <RARE_TOKEN> ( z , r ) ; </a> 
<a> if ( r == JZlib . <RARE_TOKEN> ) { </a> 
<a> z . istate . mode = <RARE_TOKEN> ; </a> 
<a> z . istate . <RARE_TOKEN> = 0 ; </a> 
<a> break ; </a> 
<a> } </a> 
<a> if ( r == JZlib . Z_OK ) { </a> 
<a> r = f ; </a> 
<a> } </a> 
<a> if ( r != JZlib . <RARE_TOKEN> ) { </a> 
<a> return r ; </a> 
<a> } </a> 
<a> r = f ; </a> 
<a> z . istate . <RARE_TOKEN> . <RARE_TOKEN> ( z , z . istate . <RARE_TOKEN> ) ; </a> 
<a> } finally { </a> 
<a> int <RARE_TOKEN> = z . <RARE_TOKEN> - <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> += <RARE_TOKEN> ; </a> 
<a> z . <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( z . <RARE_TOKEN> , z . <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( z . istate . <RARE_TOKEN> == <RARE_TOKEN> . <RARE_TOKEN> ) { </a> 
<a> z . istate . mode = <RARE_TOKEN> ; </a> 
<a> break ; </a> 
<a> } else if ( z . istate . <RARE_TOKEN> == <RARE_TOKEN> . <RARE_TOKEN> ) { </a> 
<a> z . istate . mode = <RARE_TOKEN> ; </a> 
<a> } else if ( z . istate . <RARE_TOKEN> == <RARE_TOKEN> . <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> = 0 ; </a> 
<a> <RARE_TOKEN> = 0 ; </a> 
<a> <RARE_TOKEN> = 4 ; </a> 
<a> z . istate . mode = <RARE_TOKEN> ; </a> 
<a> break ; </a> 
<a> } else { </a> 
<a> z . istate . mode = <RARE_TOKEN> ; </a> 
<a> z . msg = <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> z . istate . <RARE_TOKEN> = 0 ; </a> 
<a> break ; </a> 
<a> } </a> 
<a> case <RARE_TOKEN> : </a> 
<a> if ( z . avail_in == 0 ) { </a> 
<a> return r ; </a> 
<a> } </a> 
<a> r = f ; </a> 
<a> z . avail_in -- ; </a> 
<a> z . total_in ++ ; </a> 
<a> z . istate . <RARE_TOKEN> = ( z . next_in [ z . next_in_index ++ ] & 0xff ) < < 24 & <RARE_TOKEN> ; </a> 
<a> z . istate . mode = <RARE_TOKEN> ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> if ( z . avail_in == 0 ) { </a> 
<a> return r ; </a> 
<a> } </a> 
<a> r = f ; </a> 
<a> z . avail_in -- ; </a> 
<a> z . total_in ++ ; </a> 
<a> z . istate . <RARE_TOKEN> += ( z . next_in [ z . next_in_index ++ ] & 0xff ) < < 16 & <RARE_TOKEN> ; </a> 
<a> z . istate . mode = <RARE_TOKEN> ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> if ( z . avail_in == 0 ) { </a> 
<a> return r ; </a> 
<a> } </a> 
<a> r = f ; </a> 
<a> z . avail_in -- ; </a> 
<a> z . total_in ++ ; </a> 
<a> z . istate . <RARE_TOKEN> += ( z . next_in [ z . next_in_index ++ ] & 0xff ) < < 8 & <RARE_TOKEN> ; </a> 
<a> z . istate . mode = <RARE_TOKEN> ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> if ( z . avail_in == 0 ) { </a> 
<a> return r ; </a> 
<a> } </a> 
<a> r = f ; </a> 
<a> z . avail_in -- ; </a> 
<a> z . total_in ++ ; </a> 
<a> z . istate . <RARE_TOKEN> += z . next_in [ z . next_in_index ++ ] & <RARE_TOKEN> ; </a> 
<a> if ( ( int ) z . istate . <RARE_TOKEN> [ 0 ] != ( int ) z . istate . <RARE_TOKEN> ) { </a> 
<a> z . istate . mode = <RARE_TOKEN> ; </a> 
<a> z . msg = <RARE_TOKEN> data <RARE_TOKEN> ; </a> 
<a> z . istate . <RARE_TOKEN> = 5 ; </a> 
<a> break ; </a> 
<a> } </a> 
<a> z . istate . mode = <RARE_TOKEN> ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> return JZlib . <RARE_TOKEN> ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> return JZlib . <RARE_TOKEN> ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> if ( z . avail_in == 0 ) { </a> 
<a> return r ; </a> 
<a> } </a> 
<a> r = f ; </a> 
<a> z . avail_in -- ; </a> 
<a> z . total_in ++ ; </a> 
<a> if ( ( z . next_in [ z . next_in_index ++ ] & 0xff ) != <RARE_TOKEN> ) { </a> 
<a> z . istate . mode = <RARE_TOKEN> ; </a> 
<a> z . msg = <RARE_TOKEN> a <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> z . istate . <RARE_TOKEN> = 5 ; </a> 
<a> break ; </a> 
<a> } </a> 
<a> z . istate . mode = <RARE_TOKEN> ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> if ( z . avail_in == 0 ) { </a> 
<a> return r ; </a> 
<a> } </a> 
<a> r = f ; </a> 
<a> z . avail_in -- ; </a> 
<a> z . total_in ++ ; </a> 
<a> if ( ( z . next_in [ z . next_in_index ++ ] & 0xff ) != <RARE_TOKEN> ) { </a> 
<a> z . istate . mode = <RARE_TOKEN> ; </a> 
<a> z . msg = <RARE_TOKEN> a <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> z . istate . <RARE_TOKEN> = 5 ; </a> 
<a> break ; </a> 
<a> } </a> 
<a> z . istate . mode = <RARE_TOKEN> ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> if ( z . avail_in == 0 ) { </a> 
<a> return r ; </a> 
<a> } </a> 
<a> r = f ; </a> 
<a> z . avail_in -- ; </a> 
<a> z . total_in ++ ; </a> 
<a> if ( ( z . next_in [ z . next_in_index ++ ] & 0xff ) != JZlib . <RARE_TOKEN> ) { </a> 
<a> z . istate . mode = <RARE_TOKEN> ; </a> 
<a> z . msg = <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> z . istate . <RARE_TOKEN> = 5 ; </a> 
<a> break ; </a> 
<a> } </a> 
<a> z . istate . mode = <RARE_TOKEN> ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> if ( z . avail_in == 0 ) { </a> 
<a> return r ; </a> 
<a> } </a> 
<a> r = f ; </a> 
<a> z . avail_in -- ; </a> 
<a> z . total_in ++ ; </a> 
<a> <RARE_TOKEN> = z . next_in [ z . next_in_index ++ ] & 0xff ; </a> 
<a> if ( ( <RARE_TOKEN> & <RARE_TOKEN> ) != 0 ) { </a> 
<a> z . istate . mode = <RARE_TOKEN> ; </a> 
<a> z . msg = <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> z . istate . <RARE_TOKEN> = 5 ; </a> 
<a> break ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> = 6 ; </a> 
<a> z . istate . mode = <RARE_TOKEN> ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> while ( <RARE_TOKEN> > 0 ) { </a> 
<a> if ( z . avail_in == 0 ) { </a> 
<a> return r ; </a> 
<a> } </a> 
<a> r = f ; </a> 
<a> z . avail_in -- ; </a> 
<a> z . total_in ++ ; </a> 
<a> z . next_in_index ++ ; </a> 
<a> <RARE_TOKEN> -- ; </a> 
<a> } </a> 
<a> z . istate . mode = <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = 0 ; </a> 
<a> <RARE_TOKEN> = 2 ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> if ( ( <RARE_TOKEN> & 4 ) != 0 ) { </a> 
<a> while ( <RARE_TOKEN> > 0 ) { </a> 
<a> if ( z . avail_in == 0 ) { </a> 
<a> return r ; </a> 
<a> } </a> 
<a> r = f ; </a> 
<a> z . avail_in -- ; </a> 
<a> z . total_in ++ ; </a> 
<a> <RARE_TOKEN> |= ( z . next_in [ z . next_in_index ++ ] & 0xff ) < < ( 1 - <RARE_TOKEN> ) * 8 ; </a> 
<a> <RARE_TOKEN> -- ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> z . istate . mode = <RARE_TOKEN> ; </a> 
<a> } else { </a> 
<a> z . istate . mode = <RARE_TOKEN> ; </a> 
<a> break ; </a> 
<a> } </a> 
<a> case <RARE_TOKEN> : </a> 
<a> while ( <RARE_TOKEN> > 0 ) { </a> 
<a> if ( z . avail_in == 0 ) { </a> 
<a> return r ; </a> 
<a> } </a> 
<a> r = f ; </a> 
<a> z . avail_in -- ; </a> 
<a> z . total_in ++ ; </a> 
<a> z . next_in_index ++ ; </a> 
<a> <RARE_TOKEN> -- ; </a> 
<a> } </a> 
<a> z . istate . mode = <RARE_TOKEN> ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> if ( ( <RARE_TOKEN> & 8 ) != 0 ) { </a> 
<a> <RARE_TOKEN> { </a> 
<a> if ( z . avail_in == 0 ) { </a> 
<a> return r ; </a> 
<a> } </a> 
<a> r = f ; </a> 
<a> z . avail_in -- ; </a> 
<a> z . total_in ++ ; </a> 
<a> } while ( z . next_in [ z . next_in_index ++ ] != 0 ) ; </a> 
<a> } </a> 
<a> z . istate . mode = <RARE_TOKEN> ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> if ( ( <RARE_TOKEN> & 16 ) != 0 ) { </a> 
<a> <RARE_TOKEN> { </a> 
<a> if ( z . avail_in == 0 ) { </a> 
<a> return r ; </a> 
<a> } </a> 
<a> r = f ; </a> 
<a> z . avail_in -- ; </a> 
<a> z . total_in ++ ; </a> 
<a> } while ( z . next_in [ z . next_in_index ++ ] != 0 ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> = 2 ; </a> 
<a> z . istate . mode = <RARE_TOKEN> ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> if ( ( <RARE_TOKEN> & 2 ) != 0 ) { </a> 
<a> while ( <RARE_TOKEN> > 0 ) { </a> 
<a> if ( z . avail_in == 0 ) { </a> 
<a> return r ; </a> 
<a> } </a> 
<a> r = f ; </a> 
<a> z . avail_in -- ; </a> 
<a> z . total_in ++ ; </a> 
<a> z . next_in_index ++ ; </a> 
<a> <RARE_TOKEN> -- ; </a> 
<a> } </a> 
<a> } </a> 
<a> z . istate . mode = <RARE_TOKEN> ; </a> 
<a> break ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> while ( <RARE_TOKEN> > 0 ) { </a> 
<a> if ( z . avail_in == 0 ) { </a> 
<a> return r ; </a> 
<a> } </a> 
<a> r = f ; </a> 
<a> z . avail_in -- ; </a> 
<a> z . total_in ++ ; </a> 
<a> <RARE_TOKEN> -- ; </a> 
<a> z . istate . <RARE_TOKEN> |= ( z . next_in [ z . next_in_index ++ ] & 0xff ) < < ( 3 - <RARE_TOKEN> ) * 8 ; </a> 
<a> } </a> 
<a> if ( z . <RARE_TOKEN> != z . istate . <RARE_TOKEN> ) { </a> 
<a> z . istate . mode = <RARE_TOKEN> ; </a> 
<a> z . msg = <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> z . istate . <RARE_TOKEN> = 5 ; </a> 
<a> break ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> = 4 ; </a> 
<a> z . istate . mode = <RARE_TOKEN> ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> while ( <RARE_TOKEN> > 0 ) { </a> 
<a> if ( z . avail_in == 0 ) { </a> 
<a> return r ; </a> 
<a> } </a> 
<a> r = f ; </a> 
<a> z . avail_in -- ; </a> 
<a> z . total_in ++ ; </a> 
<a> <RARE_TOKEN> -- ; </a> 
<a> z . istate . <RARE_TOKEN> |= ( z . next_in [ z . next_in_index ++ ] & 0xff ) < < ( 3 - <RARE_TOKEN> ) * 8 ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> != z . istate . <RARE_TOKEN> ) { </a> 
<a> z . istate . mode = <RARE_TOKEN> ; </a> 
<a> z . msg = <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> z . istate . <RARE_TOKEN> = 5 ; </a> 
<a> break ; </a> 
<a> } </a> 
<a> z . istate . mode = <RARE_TOKEN> ; </a> 
<a> break ; </a> 
<a> default : </a> 
<a> return JZlib . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> static int <RARE_TOKEN> ( ZStream z , byte [ ] dictionary , int <RARE_TOKEN> ) { </a> 
<a> int index = 0 ; </a> 
<a> int length = <RARE_TOKEN> ; </a> 
<a> if ( z == null || z . istate == null || z . istate . mode != <RARE_TOKEN> ) { </a> 
<a> return JZlib . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> , dictionary , 0 , <RARE_TOKEN> ) != z . <RARE_TOKEN> ) { </a> 
<a> return JZlib . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> z . <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( 0 , null , 0 , 0 ) ; </a> 
<a> if ( length >= 1 < < z . istate . <RARE_TOKEN> ) { </a> 
<a> length = ( 1 < < z . istate . <RARE_TOKEN> ) - 1 ; </a> 
<a> index = <RARE_TOKEN> - length ; </a> 
<a> } </a> 
<a> z . istate . <RARE_TOKEN> . <RARE_TOKEN> ( dictionary , index , length ) ; </a> 
<a> z . istate . mode = <RARE_TOKEN> ; </a> 
<a> return JZlib . Z_OK ; </a> 
<a> } </a> 
<a> private static final byte [ ] <RARE_TOKEN> = { ( byte ) 0 , ( byte ) 0 , ( byte ) 0xff , ( byte ) 0xff } ; </a> 
<a> int <RARE_TOKEN> ( ZStream z ) { </a> 
<a> int n ; </a> 
<a> int p ; </a> 
<a> int m ; </a> 
<a> long r , w ; </a> 
<a> if ( z == null || z . istate == null ) { </a> 
<a> return JZlib . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> if ( z . istate . mode != <RARE_TOKEN> ) { </a> 
<a> z . istate . mode = <RARE_TOKEN> ; </a> 
<a> z . istate . <RARE_TOKEN> = 0 ; </a> 
<a> } </a> 
<a> if ( ( n = z . avail_in ) == 0 ) { </a> 
<a> return JZlib . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> p = z . next_in_index ; </a> 
<a> m = z . istate . <RARE_TOKEN> ; </a> 
<a> while ( n != 0 && m < 4 ) { </a> 
<a> if ( z . next_in [ p ] == <RARE_TOKEN> [ m ] ) { </a> 
<a> m ++ ; </a> 
<a> } else if ( z . next_in [ p ] != 0 ) { </a> 
<a> m = 0 ; </a> 
<a> } else { </a> 
<a> m = 4 - m ; </a> 
<a> } </a> 
<a> p ++ ; </a> 
<a> n -- ; </a> 
<a> } </a> 
<a> z . total_in += p - z . next_in_index ; </a> 
<a> z . next_in_index = p ; </a> 
<a> z . avail_in = n ; </a> 
<a> z . istate . <RARE_TOKEN> = m ; </a> 
<a> if ( m != 4 ) { </a> 
<a> return JZlib . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> r = z . total_in ; </a> 
<a> w = z . <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> ( z ) ; </a> 
<a> z . total_in = r ; </a> 
<a> z . <RARE_TOKEN> = w ; </a> 
<a> z . istate . mode = <RARE_TOKEN> ; </a> 
<a> return JZlib . Z_OK ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . util . internal . <RARE_TOKEN> ; </a> 
<a> public final class JZlib { </a> 
<a> public static final <RARE_TOKEN> < ? > <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> public static final <RARE_TOKEN> < ? > <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> public static final <RARE_TOKEN> < ? > <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> public static final <RARE_TOKEN> < ? > <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> public static final int <RARE_TOKEN> = 0 ; </a> 
<a> public static final int <RARE_TOKEN> = 1 ; </a> 
<a> public static final int <RARE_TOKEN> = 9 ; </a> 
<a> public static final int <RARE_TOKEN> = - 1 ; </a> 
<a> public static final int <RARE_TOKEN> = 1 ; </a> 
<a> public static final int <RARE_TOKEN> = 2 ; </a> 
<a> public static final int <RARE_TOKEN> = 0 ; </a> 
<a> public static final int <RARE_TOKEN> = 0 ; </a> 
<a> public static final int <RARE_TOKEN> = 1 ; </a> 
<a> public static final int <RARE_TOKEN> = 2 ; </a> 
<a> public static final int <RARE_TOKEN> = 3 ; </a> 
<a> public static final int <RARE_TOKEN> = 4 ; </a> 
<a> public static final int Z_OK = 0 ; </a> 
<a> public static final int <RARE_TOKEN> = 1 ; </a> 
<a> public static final int <RARE_TOKEN> = 2 ; </a> 
<a> public static final int <RARE_TOKEN> = - 1 ; </a> 
<a> public static final int <RARE_TOKEN> = - 2 ; </a> 
<a> public static final int <RARE_TOKEN> = - 3 ; </a> 
<a> public static final int <RARE_TOKEN> = - 4 ; </a> 
<a> public static final int <RARE_TOKEN> = - 5 ; </a> 
<a> public static final int <RARE_TOKEN> = - 6 ; </a> 
<a> static final int <RARE_TOKEN> = 8 ; </a> 
<a> static final int <RARE_TOKEN> = 9 ; </a> 
<a> static final int <RARE_TOKEN> = 8 ; </a> 
<a> static final int <RARE_TOKEN> = 15 ; </a> 
<a> static final int <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> static final int <RARE_TOKEN> = 15 ; </a> 
<a> static final int <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> static final int <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> static final int <RARE_TOKEN> = 19 ; </a> 
<a> static final int <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> static final int <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> static final int <RARE_TOKEN> = 29 ; </a> 
<a> static final int <RARE_TOKEN> = <RARE_TOKEN> + 1 + <RARE_TOKEN> ; </a> 
<a> static final int <RARE_TOKEN> = 2 * <RARE_TOKEN> + 1 ; </a> 
<a> static final int <RARE_TOKEN> = 7 ; </a> 
<a> enum <RARE_TOKEN> { </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> </a> 
<a> } </a> 
<a> private JZlib ( ) { </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . util . internal . <RARE_TOKEN> ; </a> 
<a> final class <RARE_TOKEN> { </a> 
<a> static final int [ ] <RARE_TOKEN> = { 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 1 , 1 , 1 , 1 , 2 , </a> 
<a> 2 , 2 , 2 , 3 , 3 , 3 , 3 , 4 , 4 , 4 , 4 , 5 , 5 , 5 , 5 , 0 } ; </a> 
<a> static final int [ ] <RARE_TOKEN> = { 0 , 0 , 0 , 0 , 1 , 1 , 2 , 2 , 3 , 3 , 4 , 4 , 5 , </a> 
<a> 5 , 6 , 6 , 7 , 7 , 8 , 8 , 9 , 9 , 10 , 10 , 11 , 11 , 12 , 12 , 13 , 13 } ; </a> 
<a> static final int [ ] <RARE_TOKEN> = { 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , </a> 
<a> 0 , 0 , 0 , 2 , 3 , 7 } ; </a> 
<a> static final byte [ ] <RARE_TOKEN> = { 16 , 17 , <RARE_TOKEN> , 0 , 8 , 7 , 9 , 6 , 10 , 5 , 11 , 4 , </a> 
<a> 12 , 3 , 13 , 2 , 14 , 1 , 15 } ; </a> 
<a> static final byte [ ] <RARE_TOKEN> = { 0 , 1 , 2 , 3 , 4 , 4 , 5 , 5 , 6 , 6 , 6 , 6 , 7 , </a> 
<a> 7 , 7 , 7 , 8 , 8 , 8 , 8 , 8 , 8 , 8 , 8 , 9 , 9 , 9 , 9 , 9 , 9 , 9 , 9 , 10 , 10 , </a> 
<a> 10 , 10 , 10 , 10 , 10 , 10 , 10 , 10 , 10 , 10 , 10 , 10 , 10 , 10 , 11 , 11 , 11 , </a> 
<a> 11 , 11 , 11 , 11 , 11 , 11 , 11 , 11 , 11 , 11 , 11 , 11 , 11 , 12 , 12 , 12 , 12 , </a> 
<a> 12 , 12 , 12 , 12 , 12 , 12 , 12 , 12 , 12 , 12 , 12 , 12 , 12 , 12 , 12 , 12 , 12 , </a> 
<a> 12 , 12 , 12 , 12 , 12 , 12 , 12 , 12 , 12 , 12 , 12 , 13 , 13 , 13 , 13 , 13 , 13 , </a> 
<a> 13 , 13 , 13 , 13 , 13 , 13 , 13 , 13 , 13 , 13 , 13 , 13 , 13 , 13 , 13 , 13 , 13 , </a> 
<a> 13 , 13 , 13 , 13 , 13 , 13 , 13 , 13 , 13 , 14 , 14 , 14 , 14 , 14 , 14 , 14 , 14 , </a> 
<a> 14 , 14 , 14 , 14 , 14 , 14 , 14 , 14 , 14 , 14 , 14 , 14 , 14 , 14 , 14 , 14 , 14 , </a> 
<a> 14 , 14 , 14 , 14 , 14 , 14 , 14 , 14 , 14 , 14 , 14 , 14 , 14 , 14 , 14 , 14 , 14 , </a> 
<a> 14 , 14 , 14 , 14 , 14 , 14 , 14 , 14 , 14 , 14 , 14 , 14 , 14 , 14 , 14 , 14 , 14 , </a> 
<a> 14 , 14 , 14 , 14 , 14 , 15 , 15 , 15 , 15 , 15 , 15 , 15 , 15 , 15 , 15 , 15 , 15 , </a> 
<a> 15 , 15 , 15 , 15 , 15 , 15 , 15 , 15 , 15 , 15 , 15 , 15 , 15 , 15 , 15 , 15 , 15 , </a> 
<a> 15 , 15 , 15 , 15 , 15 , 15 , 15 , 15 , 15 , 15 , 15 , 15 , 15 , 15 , 15 , 15 , 15 , </a> 
<a> 15 , 15 , 15 , 15 , 15 , 15 , 15 , 15 , 15 , 15 , 15 , 15 , 15 , 15 , 15 , 15 , 15 , </a> 
<a> 15 , 0 , 0 , 16 , 17 , <RARE_TOKEN> , <RARE_TOKEN> , 19 , 19 , 20 , 20 , 20 , 20 , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , 23 , 23 , 23 , 23 , 23 , 23 , 23 , 23 , 24 , </a> 
<a> 24 , 24 , 24 , 24 , 24 , 24 , 24 , 24 , 24 , 24 , 24 , 24 , 24 , 24 , 24 , 25 , 25 , </a> 
<a> 25 , 25 , 25 , 25 , 25 , 25 , 25 , 25 , 25 , 25 , 25 , 25 , 25 , 25 , 26 , 26 , 26 , </a> 
<a> 26 , 26 , 26 , 26 , 26 , 26 , 26 , 26 , 26 , 26 , 26 , 26 , 26 , 26 , 26 , 26 , 26 , </a> 
<a> 26 , 26 , 26 , 26 , 26 , 26 , 26 , 26 , 26 , 26 , 26 , 26 , 27 , 27 , 27 , 27 , 27 , </a> 
<a> 27 , 27 , 27 , 27 , 27 , 27 , 27 , 27 , 27 , 27 , 27 , 27 , 27 , 27 , 27 , 27 , 27 , </a> 
<a> 27 , 27 , 27 , 27 , 27 , 27 , 27 , 27 , 27 , 27 , 28 , 28 , 28 , 28 , 28 , 28 , 28 , </a> 
<a> 28 , 28 , 28 , 28 , 28 , 28 , 28 , 28 , 28 , 28 , 28 , 28 , 28 , 28 , 28 , 28 , 28 , </a> 
<a> 28 , 28 , 28 , 28 , 28 , 28 , 28 , 28 , 28 , 28 , 28 , 28 , 28 , 28 , 28 , 28 , 28 , </a> 
<a> 28 , 28 , 28 , 28 , 28 , 28 , 28 , 28 , 28 , 28 , 28 , 28 , 28 , 28 , 28 , 28 , 28 , </a> 
<a> 28 , 28 , 28 , 28 , 28 , 28 , 29 , 29 , 29 , 29 , 29 , 29 , 29 , 29 , 29 , 29 , 29 , </a> 
<a> 29 , 29 , 29 , 29 , 29 , 29 , 29 , 29 , 29 , 29 , 29 , 29 , 29 , 29 , 29 , 29 , 29 , </a> 
<a> 29 , 29 , 29 , 29 , 29 , 29 , 29 , 29 , 29 , 29 , 29 , 29 , 29 , 29 , 29 , 29 , 29 , </a> 
<a> 29 , 29 , 29 , 29 , 29 , 29 , 29 , 29 , 29 , 29 , 29 , 29 , 29 , 29 , 29 , 29 , 29 , </a> 
<a> 29 , 29 } ; </a> 
<a> static final byte [ ] <RARE_TOKEN> = { 0 , 1 , 2 , 3 , 4 , 5 , 6 , 7 , 8 , 8 , 9 , 9 , </a> 
<a> 10 , 10 , 11 , 11 , 12 , 12 , 12 , 12 , 13 , 13 , 13 , 13 , 14 , 14 , 14 , 14 , 15 , </a> 
<a> 15 , 15 , 15 , 16 , 16 , 16 , 16 , 16 , 16 , 16 , 16 , 17 , 17 , 17 , 17 , 17 , 17 , </a> 
<a> 17 , 17 , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , 19 , 19 , 19 , 19 , 19 , 19 , 19 , </a> 
<a> 19 , 20 , 20 , 20 , 20 , 20 , 20 , 20 , 20 , 20 , 20 , 20 , 20 , 20 , 20 , 20 , 20 , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , 23 , 23 , </a> 
<a> 23 , 23 , 23 , 23 , 23 , 23 , 23 , 23 , 23 , 23 , 23 , 23 , 23 , 23 , 24 , 24 , 24 , </a> 
<a> 24 , 24 , 24 , 24 , 24 , 24 , 24 , 24 , 24 , 24 , 24 , 24 , 24 , 24 , 24 , 24 , 24 , </a> 
<a> 24 , 24 , 24 , 24 , 24 , 24 , 24 , 24 , 24 , 24 , 24 , 24 , 25 , 25 , 25 , 25 , 25 , </a> 
<a> 25 , 25 , 25 , 25 , 25 , 25 , 25 , 25 , 25 , 25 , 25 , 25 , 25 , 25 , 25 , 25 , 25 , </a> 
<a> 25 , 25 , 25 , 25 , 25 , 25 , 25 , 25 , 25 , 25 , 26 , 26 , 26 , 26 , 26 , 26 , 26 , </a> 
<a> 26 , 26 , 26 , 26 , 26 , 26 , 26 , 26 , 26 , 26 , 26 , 26 , 26 , 26 , 26 , 26 , 26 , </a> 
<a> 26 , 26 , 26 , 26 , 26 , 26 , 26 , 26 , 27 , 27 , 27 , 27 , 27 , 27 , 27 , 27 , 27 , </a> 
<a> 27 , 27 , 27 , 27 , 27 , 27 , 27 , 27 , 27 , 27 , 27 , 27 , 27 , 27 , 27 , 27 , 27 , </a> 
<a> 27 , 27 , 27 , 27 , 27 , 28 } ; </a> 
<a> static final int [ ] <RARE_TOKEN> = { 0 , 1 , 2 , 3 , 4 , 5 , 6 , 7 , 8 , 10 , 12 , 14 , </a> 
<a> 16 , 20 , 24 , 28 , 32 , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , 80 , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , 0 } ; </a> 
<a> static final int [ ] <RARE_TOKEN> = { 0 , 1 , 2 , 3 , 4 , 6 , 8 , 12 , 16 , 24 , 32 , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> } ; </a> 
<a> static int <RARE_TOKEN> ( int dist ) { </a> 
<a> return dist < <RARE_TOKEN> ? <RARE_TOKEN> [ dist ] : <RARE_TOKEN> [ <RARE_TOKEN> + ( dist > > > 7 ) ] ; </a> 
<a> } </a> 
<a> short [ ] <RARE_TOKEN> ; </a> 
<a> int <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> private void <RARE_TOKEN> ( <RARE_TOKEN> s ) { </a> 
<a> short [ ] tree = <RARE_TOKEN> ; </a> 
<a> short [ ] <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> int [ ] <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> int h ; </a> 
<a> int n , m ; </a> 
<a> int bits ; </a> 
<a> int <RARE_TOKEN> ; </a> 
<a> short f ; </a> 
<a> int <RARE_TOKEN> = 0 ; </a> 
<a> for ( bits = 0 ; bits <= JZlib . <RARE_TOKEN> ; bits ++ ) { </a> 
<a> s . <RARE_TOKEN> [ bits ] = 0 ; </a> 
<a> } </a> 
<a> tree [ s . <RARE_TOKEN> [ s . <RARE_TOKEN> ] * 2 + 1 ] = 0 ; </a> 
<a> for ( h = s . <RARE_TOKEN> + 1 ; h < JZlib . <RARE_TOKEN> ; h ++ ) { </a> 
<a> n = s . <RARE_TOKEN> [ h ] ; </a> 
<a> bits = tree [ tree [ n * 2 + 1 ] * 2 + 1 ] + 1 ; </a> 
<a> if ( bits > <RARE_TOKEN> ) { </a> 
<a> bits = <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> ++ ; </a> 
<a> } </a> 
<a> tree [ n * 2 + 1 ] = ( short ) bits ; </a> 
<a> if ( n > <RARE_TOKEN> ) { </a> 
<a> continue ; </a> 
<a> } </a> 
<a> s . <RARE_TOKEN> [ bits ] ++ ; </a> 
<a> <RARE_TOKEN> = 0 ; </a> 
<a> if ( n >= <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> [ n - <RARE_TOKEN> ] ; </a> 
<a> } </a> 
<a> f = tree [ n * 2 ] ; </a> 
<a> s . <RARE_TOKEN> += f * ( bits + <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> s . <RARE_TOKEN> += f * ( <RARE_TOKEN> [ n * 2 + 1 ] + <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> == 0 ) { </a> 
<a> return ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> { </a> 
<a> bits = <RARE_TOKEN> - 1 ; </a> 
<a> while ( s . <RARE_TOKEN> [ bits ] == 0 ) { </a> 
<a> bits -- ; </a> 
<a> } </a> 
<a> s . <RARE_TOKEN> [ bits ] -- ; </a> 
<a> s . <RARE_TOKEN> [ bits + 1 ] += 2 ; </a> 
<a> s . <RARE_TOKEN> [ <RARE_TOKEN> ] -- ; </a> 
<a> <RARE_TOKEN> -= 2 ; </a> 
<a> } while ( <RARE_TOKEN> > 0 ) ; </a> 
<a> for ( bits = <RARE_TOKEN> ; bits != 0 ; bits -- ) { </a> 
<a> n = s . <RARE_TOKEN> [ bits ] ; </a> 
<a> while ( n != 0 ) { </a> 
<a> m = s . <RARE_TOKEN> [ -- h ] ; </a> 
<a> if ( m > <RARE_TOKEN> ) { </a> 
<a> continue ; </a> 
<a> } </a> 
<a> if ( tree [ m * 2 + 1 ] != bits ) { </a> 
<a> s . <RARE_TOKEN> += ( ( long ) bits - ( long ) tree [ m * 2 + 1 ] ) * </a> 
<a> tree [ m * 2 ] ; </a> 
<a> tree [ m * 2 + 1 ] = ( short ) bits ; </a> 
<a> } </a> 
<a> n -- ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> void <RARE_TOKEN> ( <RARE_TOKEN> s ) { </a> 
<a> short [ ] tree = <RARE_TOKEN> ; </a> 
<a> short [ ] <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> int n , m ; </a> 
<a> int <RARE_TOKEN> = - 1 ; </a> 
<a> int <RARE_TOKEN> ; </a> 
<a> s . <RARE_TOKEN> = 0 ; </a> 
<a> s . <RARE_TOKEN> = JZlib . <RARE_TOKEN> ; </a> 
<a> for ( n = 0 ; n < <RARE_TOKEN> ; n ++ ) { </a> 
<a> if ( tree [ n * 2 ] != 0 ) { </a> 
<a> s . <RARE_TOKEN> [ ++ s . <RARE_TOKEN> ] = <RARE_TOKEN> = n ; </a> 
<a> s . <RARE_TOKEN> [ n ] = 0 ; </a> 
<a> } else { </a> 
<a> tree [ n * 2 + 1 ] = 0 ; </a> 
<a> } </a> 
<a> } </a> 
<a> while ( s . <RARE_TOKEN> < 2 ) { </a> 
<a> <RARE_TOKEN> = s . <RARE_TOKEN> [ ++ s . <RARE_TOKEN> ] = <RARE_TOKEN> < 2 ? ++ <RARE_TOKEN> : 0 ; </a> 
<a> tree [ <RARE_TOKEN> * 2 ] = 1 ; </a> 
<a> s . <RARE_TOKEN> [ <RARE_TOKEN> ] = 0 ; </a> 
<a> s . <RARE_TOKEN> -- ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> s . <RARE_TOKEN> -= <RARE_TOKEN> [ <RARE_TOKEN> * 2 + 1 ] ; </a> 
<a> } </a> 
<a> } </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> for ( n = s . <RARE_TOKEN> / 2 ; n >= 1 ; n -- ) { </a> 
<a> s . <RARE_TOKEN> ( tree , n ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> { </a> 
<a> n = s . <RARE_TOKEN> [ 1 ] ; </a> 
<a> s . <RARE_TOKEN> [ 1 ] = s . <RARE_TOKEN> [ s . <RARE_TOKEN> -- ] ; </a> 
<a> s . <RARE_TOKEN> ( tree , 1 ) ; </a> 
<a> m = s . <RARE_TOKEN> [ 1 ] ; </a> 
<a> s . <RARE_TOKEN> [ -- s . <RARE_TOKEN> ] = n ; </a> 
<a> s . <RARE_TOKEN> [ -- s . <RARE_TOKEN> ] = m ; </a> 
<a> tree [ <RARE_TOKEN> * 2 ] = ( short ) ( tree [ n * 2 ] + tree [ m * 2 ] ) ; </a> 
<a> s . <RARE_TOKEN> [ <RARE_TOKEN> ] = ( byte ) ( Math . <RARE_TOKEN> ( s . <RARE_TOKEN> [ n ] , s . <RARE_TOKEN> [ m ] ) + 1 ) ; </a> 
<a> tree [ n * 2 + 1 ] = tree [ m * 2 + 1 ] = ( short ) <RARE_TOKEN> ; </a> 
<a> s . <RARE_TOKEN> [ 1 ] = <RARE_TOKEN> ++ ; </a> 
<a> s . <RARE_TOKEN> ( tree , 1 ) ; </a> 
<a> } while ( s . <RARE_TOKEN> >= 2 ) ; </a> 
<a> s . <RARE_TOKEN> [ -- s . <RARE_TOKEN> ] = s . <RARE_TOKEN> [ 1 ] ; </a> 
<a> <RARE_TOKEN> ( s ) ; </a> 
<a> <RARE_TOKEN> ( tree , <RARE_TOKEN> , s . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> private static void <RARE_TOKEN> ( short [ ] tree , </a> 
<a> int <RARE_TOKEN> , </a> 
<a> short [ ] <RARE_TOKEN> </a> 
<a> ) { </a> 
<a> short [ ] <RARE_TOKEN> = new short [ JZlib . <RARE_TOKEN> + 1 ] ; </a> 
<a> short code = 0 ; </a> 
<a> int bits ; </a> 
<a> int n ; </a> 
<a> for ( bits = 1 ; bits <= JZlib . <RARE_TOKEN> ; bits ++ ) { </a> 
<a> <RARE_TOKEN> [ bits ] = code = ( short ) ( code + <RARE_TOKEN> [ bits - 1 ] < < 1 ) ; </a> 
<a> } </a> 
<a> for ( n = 0 ; n <= <RARE_TOKEN> ; n ++ ) { </a> 
<a> int len = tree [ n * 2 + 1 ] ; </a> 
<a> if ( len == 0 ) { </a> 
<a> continue ; </a> 
<a> } </a> 
<a> tree [ n * 2 ] = ( short ) <RARE_TOKEN> ( <RARE_TOKEN> [ len ] ++ , len ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private static int <RARE_TOKEN> ( int code , </a> 
<a> int len </a> 
<a> ) { </a> 
<a> int res = 0 ; </a> 
<a> <RARE_TOKEN> { </a> 
<a> res |= code & 1 ; </a> 
<a> code <RARE_TOKEN> 1 ; </a> 
<a> res <RARE_TOKEN> 1 ; </a> 
<a> } while ( -- len > 0 ) ; </a> 
<a> return res > > > 1 ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . util . internal . <RARE_TOKEN> ; </a> 
<a> import io . netty . logging . InternalLogger ; </a> 
<a> import io . netty . logging . InternalLoggerFactory ; </a> 
<a> import io . netty . util . internal . <RARE_TOKEN> . JZlib . <RARE_TOKEN> ; </a> 
<a> public final class ZStream { </a> 
<a> private static final InternalLogger logger = </a> 
<a> InternalLoggerFactory . getInstance ( ZStream . class ) ; </a> 
<a> public byte [ ] next_in ; </a> 
<a> public int next_in_index ; </a> 
<a> public int avail_in ; </a> 
<a> public long total_in ; </a> 
<a> public byte [ ] <RARE_TOKEN> ; </a> 
<a> public int <RARE_TOKEN> ; </a> 
<a> public int <RARE_TOKEN> ; </a> 
<a> public long <RARE_TOKEN> ; </a> 
<a> public String msg ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> istate ; </a> 
<a> long <RARE_TOKEN> ; </a> 
<a> int <RARE_TOKEN> ; </a> 
<a> public int <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ( JZlib . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public int <RARE_TOKEN> ( <RARE_TOKEN> < ? > <RARE_TOKEN> ) { </a> 
<a> return <RARE_TOKEN> ( JZlib . <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public int <RARE_TOKEN> ( int w ) { </a> 
<a> return <RARE_TOKEN> ( w , <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public int <RARE_TOKEN> ( int w , @ SuppressWarnings ( <RARE_TOKEN> ) <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> istate = new <RARE_TOKEN> ( ) ; </a> 
<a> return istate . <RARE_TOKEN> ( this , w , ( <RARE_TOKEN> ) <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public int <RARE_TOKEN> ( int f ) { </a> 
<a> if ( istate == null ) { </a> 
<a> return JZlib . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> return istate . <RARE_TOKEN> ( this , f ) ; </a> 
<a> } </a> 
<a> public int <RARE_TOKEN> ( ) { </a> 
<a> if ( istate == null ) { </a> 
<a> return JZlib . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> int <RARE_TOKEN> = istate . <RARE_TOKEN> ( this ) ; </a> 
<a> istate = null ; </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public int <RARE_TOKEN> ( ) { </a> 
<a> if ( istate == null ) { </a> 
<a> return JZlib . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> return istate . <RARE_TOKEN> ( this ) ; </a> 
<a> } </a> 
<a> public int <RARE_TOKEN> ( byte [ ] dictionary , int <RARE_TOKEN> ) { </a> 
<a> if ( istate == null ) { </a> 
<a> return JZlib . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> return <RARE_TOKEN> . <RARE_TOKEN> ( this , dictionary , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public int <RARE_TOKEN> ( int level ) { </a> 
<a> return <RARE_TOKEN> ( level , JZlib . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public int <RARE_TOKEN> ( int level , <RARE_TOKEN> < ? > <RARE_TOKEN> ) { </a> 
<a> return <RARE_TOKEN> ( level , JZlib . <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public int <RARE_TOKEN> ( int level , int bits ) { </a> 
<a> return <RARE_TOKEN> ( level , bits , <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public int <RARE_TOKEN> ( int level , int bits , <RARE_TOKEN> < ? > <RARE_TOKEN> ) { </a> 
<a> return <RARE_TOKEN> ( level , bits , JZlib . <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public int <RARE_TOKEN> ( int level , int bits , int memLevel , @ SuppressWarnings ( <RARE_TOKEN> ) <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> = new <RARE_TOKEN> ( ) ; </a> 
<a> return <RARE_TOKEN> . <RARE_TOKEN> ( this , level , bits , memLevel , ( <RARE_TOKEN> ) <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public int <RARE_TOKEN> ( int flush ) { </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> return JZlib . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> return <RARE_TOKEN> . <RARE_TOKEN> ( this , flush ) ; </a> 
<a> } </a> 
<a> public int <RARE_TOKEN> ( ) { </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> return JZlib . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> = null ; </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public int <RARE_TOKEN> ( int level , int <RARE_TOKEN> ) { </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> return JZlib . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> return <RARE_TOKEN> . <RARE_TOKEN> ( this , level , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public int <RARE_TOKEN> ( byte [ ] dictionary , int <RARE_TOKEN> ) { </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> return JZlib . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> return <RARE_TOKEN> . <RARE_TOKEN> ( this , dictionary , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> void <RARE_TOKEN> ( ) { </a> 
<a> int len = <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> if ( len > <RARE_TOKEN> ) { </a> 
<a> len = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> if ( len == 0 ) { </a> 
<a> return ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> . <RARE_TOKEN> . length <= <RARE_TOKEN> . <RARE_TOKEN> || </a> 
<a> <RARE_TOKEN> . length <= <RARE_TOKEN> || </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> . length < <RARE_TOKEN> . <RARE_TOKEN> + len || </a> 
<a> <RARE_TOKEN> . length < <RARE_TOKEN> + len ) { </a> 
<a> logger . debug ( <RARE_TOKEN> . <RARE_TOKEN> . length + ", " + </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> + ", " + <RARE_TOKEN> . length + ", " + </a> 
<a> <RARE_TOKEN> + ", " + len ) ; </a> 
<a> logger . debug ( <RARE_TOKEN> + <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> System . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , len ) ; </a> 
<a> <RARE_TOKEN> += len ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> += len ; </a> 
<a> <RARE_TOKEN> += len ; </a> 
<a> <RARE_TOKEN> -= len ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> -= len ; </a> 
<a> if ( <RARE_TOKEN> . <RARE_TOKEN> == 0 ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> = 0 ; </a> 
<a> } </a> 
<a> } </a> 
<a> int <RARE_TOKEN> ( byte [ ] buf , int start , int size ) { </a> 
<a> int len = avail_in ; </a> 
<a> if ( len > size ) { </a> 
<a> len = size ; </a> 
<a> } </a> 
<a> if ( len == 0 ) { </a> 
<a> return 0 ; </a> 
<a> } </a> 
<a> avail_in -= len ; </a> 
<a> switch ( <RARE_TOKEN> . <RARE_TOKEN> ) { </a> 
<a> case <RARE_TOKEN> : </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> , next_in , next_in_index , len ) ; </a> 
<a> break ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> , next_in , next_in_index , len ) ; </a> 
<a> break ; </a> 
<a> } </a> 
<a> System . <RARE_TOKEN> ( next_in , next_in_index , buf , start , len ) ; </a> 
<a> next_in_index += len ; </a> 
<a> total_in += len ; </a> 
<a> return len ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> next_in = null ; </a> 
<a> <RARE_TOKEN> = null ; </a> 
<a> msg = null ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . util . internal . <RARE_TOKEN> ; </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . util . internal ; </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . util ; </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . logging ; </a> 
<a> import static org . <RARE_TOKEN> . <RARE_TOKEN> . * ; </a> 
<a> import static org . junit . Assert . * ; </a> 
<a> import org . junit . Test ; </a> 
<a> public class <RARE_TOKEN> { </a> 
<a> private static final Exception e = new Exception ( ) ; </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> org . apache . commons . logging . Log mock = </a> 
<a> createStrictMock ( org . apache . commons . logging . Log . class ) ; </a> 
<a> expect ( mock . <RARE_TOKEN> ( ) ) . andReturn ( true ) ; </a> 
<a> replay ( mock ) ; </a> 
<a> InternalLogger logger = new <RARE_TOKEN> ( mock , "foo" ) ; </a> 
<a> assertTrue ( logger . <RARE_TOKEN> ( ) ) ; </a> 
<a> verify ( mock ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> org . apache . commons . logging . Log mock = </a> 
<a> createStrictMock ( org . apache . commons . logging . Log . class ) ; </a> 
<a> expect ( mock . isDebugEnabled ( ) ) . andReturn ( true ) ; </a> 
<a> replay ( mock ) ; </a> 
<a> InternalLogger logger = new <RARE_TOKEN> ( mock , "foo" ) ; </a> 
<a> assertTrue ( logger . isDebugEnabled ( ) ) ; </a> 
<a> verify ( mock ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> org . apache . commons . logging . Log mock = </a> 
<a> createStrictMock ( org . apache . commons . logging . Log . class ) ; </a> 
<a> expect ( mock . <RARE_TOKEN> ( ) ) . andReturn ( true ) ; </a> 
<a> replay ( mock ) ; </a> 
<a> InternalLogger logger = new <RARE_TOKEN> ( mock , "foo" ) ; </a> 
<a> assertTrue ( logger . <RARE_TOKEN> ( ) ) ; </a> 
<a> verify ( mock ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> org . apache . commons . logging . Log mock = </a> 
<a> createStrictMock ( org . apache . commons . logging . Log . class ) ; </a> 
<a> expect ( mock . <RARE_TOKEN> ( ) ) . andReturn ( true ) ; </a> 
<a> replay ( mock ) ; </a> 
<a> InternalLogger logger = new <RARE_TOKEN> ( mock , "foo" ) ; </a> 
<a> assertTrue ( logger . <RARE_TOKEN> ( ) ) ; </a> 
<a> verify ( mock ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> org . apache . commons . logging . Log mock = </a> 
<a> createStrictMock ( org . apache . commons . logging . Log . class ) ; </a> 
<a> expect ( mock . <RARE_TOKEN> ( ) ) . andReturn ( true ) ; </a> 
<a> replay ( mock ) ; </a> 
<a> InternalLogger logger = new <RARE_TOKEN> ( mock , "foo" ) ; </a> 
<a> assertTrue ( logger . <RARE_TOKEN> ( ) ) ; </a> 
<a> verify ( mock ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> org . apache . commons . logging . Log mock = </a> 
<a> createStrictMock ( org . apache . commons . logging . Log . class ) ; </a> 
<a> mock . trace ( "a" ) ; </a> 
<a> replay ( mock ) ; </a> 
<a> InternalLogger logger = new <RARE_TOKEN> ( mock , "foo" ) ; </a> 
<a> logger . trace ( "a" ) ; </a> 
<a> verify ( mock ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> org . apache . commons . logging . Log mock = </a> 
<a> createStrictMock ( org . apache . commons . logging . Log . class ) ; </a> 
<a> mock . trace ( "a" , e ) ; </a> 
<a> replay ( mock ) ; </a> 
<a> InternalLogger logger = new <RARE_TOKEN> ( mock , "foo" ) ; </a> 
<a> logger . trace ( "a" , e ) ; </a> 
<a> verify ( mock ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> org . apache . commons . logging . Log mock = </a> 
<a> createStrictMock ( org . apache . commons . logging . Log . class ) ; </a> 
<a> mock . debug ( "a" ) ; </a> 
<a> replay ( mock ) ; </a> 
<a> InternalLogger logger = new <RARE_TOKEN> ( mock , "foo" ) ; </a> 
<a> logger . debug ( "a" ) ; </a> 
<a> verify ( mock ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> org . apache . commons . logging . Log mock = </a> 
<a> createStrictMock ( org . apache . commons . logging . Log . class ) ; </a> 
<a> mock . debug ( "a" , e ) ; </a> 
<a> replay ( mock ) ; </a> 
<a> InternalLogger logger = new <RARE_TOKEN> ( mock , "foo" ) ; </a> 
<a> logger . debug ( "a" , e ) ; </a> 
<a> verify ( mock ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> org . apache . commons . logging . Log mock = </a> 
<a> createStrictMock ( org . apache . commons . logging . Log . class ) ; </a> 
<a> mock . info ( "a" ) ; </a> 
<a> replay ( mock ) ; </a> 
<a> InternalLogger logger = new <RARE_TOKEN> ( mock , "foo" ) ; </a> 
<a> logger . info ( "a" ) ; </a> 
<a> verify ( mock ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> org . apache . commons . logging . Log mock = </a> 
<a> createStrictMock ( org . apache . commons . logging . Log . class ) ; </a> 
<a> mock . info ( "a" , e ) ; </a> 
<a> replay ( mock ) ; </a> 
<a> InternalLogger logger = new <RARE_TOKEN> ( mock , "foo" ) ; </a> 
<a> logger . info ( "a" , e ) ; </a> 
<a> verify ( mock ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> org . apache . commons . logging . Log mock = </a> 
<a> createStrictMock ( org . apache . commons . logging . Log . class ) ; </a> 
<a> mock . warn ( "a" ) ; </a> 
<a> replay ( mock ) ; </a> 
<a> InternalLogger logger = new <RARE_TOKEN> ( mock , "foo" ) ; </a> 
<a> logger . warn ( "a" ) ; </a> 
<a> verify ( mock ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> org . apache . commons . logging . Log mock = </a> 
<a> createStrictMock ( org . apache . commons . logging . Log . class ) ; </a> 
<a> mock . warn ( "a" , e ) ; </a> 
<a> replay ( mock ) ; </a> 
<a> InternalLogger logger = new <RARE_TOKEN> ( mock , "foo" ) ; </a> 
<a> logger . warn ( "a" , e ) ; </a> 
<a> verify ( mock ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> org . apache . commons . logging . Log mock = </a> 
<a> createStrictMock ( org . apache . commons . logging . Log . class ) ; </a> 
<a> mock . error ( "a" ) ; </a> 
<a> replay ( mock ) ; </a> 
<a> InternalLogger logger = new <RARE_TOKEN> ( mock , "foo" ) ; </a> 
<a> logger . error ( "a" ) ; </a> 
<a> verify ( mock ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> org . apache . commons . logging . Log mock = </a> 
<a> createStrictMock ( org . apache . commons . logging . Log . class ) ; </a> 
<a> mock . error ( "a" , e ) ; </a> 
<a> replay ( mock ) ; </a> 
<a> InternalLogger logger = new <RARE_TOKEN> ( mock , "foo" ) ; </a> 
<a> logger . error ( "a" , e ) ; </a> 
<a> verify ( mock ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . logging ; </a> 
<a> import static org . <RARE_TOKEN> . <RARE_TOKEN> . * ; </a> 
<a> import static org . junit . Assert . * ; </a> 
<a> import org . junit . <RARE_TOKEN> ; </a> 
<a> import org . junit . <RARE_TOKEN> ; </a> 
<a> import org . junit . Test ; </a> 
<a> public class <RARE_TOKEN> { </a> 
<a> private static final Exception e = new Exception ( ) ; </a> 
<a> private InternalLoggerFactory <RARE_TOKEN> ; </a> 
<a> private InternalLogger mock ; </a> 
<a> @ <RARE_TOKEN> </a> 
<a> public void init ( ) { </a> 
<a> <RARE_TOKEN> = InternalLoggerFactory . <RARE_TOKEN> ( ) ; </a> 
<a> InternalLoggerFactory <RARE_TOKEN> = <RARE_TOKEN> ( InternalLoggerFactory . class ) ; </a> 
<a> mock = createStrictMock ( InternalLogger . class ) ; </a> 
<a> expect ( <RARE_TOKEN> . newInstance ( <RARE_TOKEN> ) ) . andReturn ( mock ) . <RARE_TOKEN> ( ) ; </a> 
<a> replay ( <RARE_TOKEN> ) ; </a> 
<a> InternalLoggerFactory . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ <RARE_TOKEN> </a> 
<a> public void destroy ( ) { </a> 
<a> <RARE_TOKEN> ( mock ) ; </a> 
<a> InternalLoggerFactory . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Test ( expected = NullPointerException . class ) </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> InternalLoggerFactory . <RARE_TOKEN> ( null ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> ( mock , InternalLoggerFactory . getInstance ( <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> InternalLoggerFactory . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> String <RARE_TOKEN> = <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> InternalLogger one = InternalLoggerFactory . getInstance ( <RARE_TOKEN> ) ; </a> 
<a> InternalLogger <RARE_TOKEN> = InternalLoggerFactory . getInstance ( <RARE_TOKEN> . getClass ( ) ) ; </a> 
<a> assertNotNull ( one ) ; </a> 
<a> assertNotNull ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( one , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> expect ( mock . <RARE_TOKEN> ( ) ) . andReturn ( true ) ; </a> 
<a> replay ( mock ) ; </a> 
<a> InternalLogger logger = InternalLoggerFactory . getInstance ( <RARE_TOKEN> ) ; </a> 
<a> assertTrue ( logger . <RARE_TOKEN> ( ) ) ; </a> 
<a> verify ( mock ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> expect ( mock . isDebugEnabled ( ) ) . andReturn ( true ) ; </a> 
<a> replay ( mock ) ; </a> 
<a> InternalLogger logger = InternalLoggerFactory . getInstance ( <RARE_TOKEN> ) ; </a> 
<a> assertTrue ( logger . isDebugEnabled ( ) ) ; </a> 
<a> verify ( mock ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> expect ( mock . <RARE_TOKEN> ( ) ) . andReturn ( true ) ; </a> 
<a> replay ( mock ) ; </a> 
<a> InternalLogger logger = InternalLoggerFactory . getInstance ( <RARE_TOKEN> ) ; </a> 
<a> assertTrue ( logger . <RARE_TOKEN> ( ) ) ; </a> 
<a> verify ( mock ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> expect ( mock . <RARE_TOKEN> ( ) ) . andReturn ( true ) ; </a> 
<a> replay ( mock ) ; </a> 
<a> InternalLogger logger = InternalLoggerFactory . getInstance ( <RARE_TOKEN> ) ; </a> 
<a> assertTrue ( logger . <RARE_TOKEN> ( ) ) ; </a> 
<a> verify ( mock ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> expect ( mock . <RARE_TOKEN> ( ) ) . andReturn ( true ) ; </a> 
<a> replay ( mock ) ; </a> 
<a> InternalLogger logger = InternalLoggerFactory . getInstance ( <RARE_TOKEN> ) ; </a> 
<a> assertTrue ( logger . <RARE_TOKEN> ( ) ) ; </a> 
<a> verify ( mock ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> mock . trace ( "a" ) ; </a> 
<a> replay ( mock ) ; </a> 
<a> InternalLogger logger = InternalLoggerFactory . getInstance ( <RARE_TOKEN> ) ; </a> 
<a> logger . trace ( "a" ) ; </a> 
<a> verify ( mock ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> mock . trace ( "a" , e ) ; </a> 
<a> replay ( mock ) ; </a> 
<a> InternalLogger logger = InternalLoggerFactory . getInstance ( <RARE_TOKEN> ) ; </a> 
<a> logger . trace ( "a" , e ) ; </a> 
<a> verify ( mock ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> mock . debug ( "a" ) ; </a> 
<a> replay ( mock ) ; </a> 
<a> InternalLogger logger = InternalLoggerFactory . getInstance ( <RARE_TOKEN> ) ; </a> 
<a> logger . debug ( "a" ) ; </a> 
<a> verify ( mock ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> mock . debug ( "a" , e ) ; </a> 
<a> replay ( mock ) ; </a> 
<a> InternalLogger logger = InternalLoggerFactory . getInstance ( <RARE_TOKEN> ) ; </a> 
<a> logger . debug ( "a" , e ) ; </a> 
<a> verify ( mock ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> mock . info ( "a" ) ; </a> 
<a> replay ( mock ) ; </a> 
<a> InternalLogger logger = InternalLoggerFactory . getInstance ( <RARE_TOKEN> ) ; </a> 
<a> logger . info ( "a" ) ; </a> 
<a> verify ( mock ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> mock . info ( "a" , e ) ; </a> 
<a> replay ( mock ) ; </a> 
<a> InternalLogger logger = InternalLoggerFactory . getInstance ( <RARE_TOKEN> ) ; </a> 
<a> logger . info ( "a" , e ) ; </a> 
<a> verify ( mock ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> mock . warn ( "a" ) ; </a> 
<a> replay ( mock ) ; </a> 
<a> InternalLogger logger = InternalLoggerFactory . getInstance ( <RARE_TOKEN> ) ; </a> 
<a> logger . warn ( "a" ) ; </a> 
<a> verify ( mock ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> mock . warn ( "a" , e ) ; </a> 
<a> replay ( mock ) ; </a> 
<a> InternalLogger logger = InternalLoggerFactory . getInstance ( <RARE_TOKEN> ) ; </a> 
<a> logger . warn ( "a" , e ) ; </a> 
<a> verify ( mock ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> mock . error ( "a" ) ; </a> 
<a> replay ( mock ) ; </a> 
<a> InternalLogger logger = InternalLoggerFactory . getInstance ( <RARE_TOKEN> ) ; </a> 
<a> logger . error ( "a" ) ; </a> 
<a> verify ( mock ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> mock . error ( "a" , e ) ; </a> 
<a> replay ( mock ) ; </a> 
<a> InternalLogger logger = InternalLoggerFactory . getInstance ( <RARE_TOKEN> ) ; </a> 
<a> logger . error ( "a" , e ) ; </a> 
<a> verify ( mock ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . logging ; </a> 
<a> import static org . junit . Assert . * ; </a> 
<a> import org . junit . Test ; </a> 
<a> public class <RARE_TOKEN> { </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> InternalLogger logger = new <RARE_TOKEN> ( ) . newInstance ( "foo" ) ; </a> 
<a> assertTrue ( logger instanceof <RARE_TOKEN> ) ; </a> 
<a> assertEquals ( "foo" , logger . toString ( ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . logging ; </a> 
<a> import static org . <RARE_TOKEN> . <RARE_TOKEN> . * ; </a> 
<a> import static org . junit . Assert . * ; </a> 
<a> import org . junit . Test ; </a> 
<a> public class <RARE_TOKEN> { </a> 
<a> private static final Exception e = new Exception ( ) ; </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> org . jboss . logging . Logger mock = </a> 
<a> createStrictMock ( org . jboss . logging . Logger . class ) ; </a> 
<a> expect ( mock . <RARE_TOKEN> ( ) ) . andReturn ( true ) ; </a> 
<a> replay ( mock ) ; </a> 
<a> InternalLogger logger = new <RARE_TOKEN> ( mock ) ; </a> 
<a> assertTrue ( logger . <RARE_TOKEN> ( ) ) ; </a> 
<a> verify ( mock ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> @ SuppressWarnings ( <RARE_TOKEN> ) </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> org . jboss . logging . Logger mock = </a> 
<a> createStrictMock ( org . jboss . logging . Logger . class ) ; </a> 
<a> expect ( mock . isDebugEnabled ( ) ) . andReturn ( true ) ; </a> 
<a> replay ( mock ) ; </a> 
<a> InternalLogger logger = new <RARE_TOKEN> ( mock ) ; </a> 
<a> assertTrue ( logger . isDebugEnabled ( ) ) ; </a> 
<a> verify ( mock ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> @ SuppressWarnings ( <RARE_TOKEN> ) </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> org . jboss . logging . Logger mock = </a> 
<a> createStrictMock ( org . jboss . logging . Logger . class ) ; </a> 
<a> expect ( mock . <RARE_TOKEN> ( ) ) . andReturn ( true ) ; </a> 
<a> replay ( mock ) ; </a> 
<a> InternalLogger logger = new <RARE_TOKEN> ( mock ) ; </a> 
<a> assertTrue ( logger . <RARE_TOKEN> ( ) ) ; </a> 
<a> verify ( mock ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> org . jboss . logging . Logger mock = </a> 
<a> createStrictMock ( org . jboss . logging . Logger . class ) ; </a> 
<a> replay ( mock ) ; </a> 
<a> InternalLogger logger = new <RARE_TOKEN> ( mock ) ; </a> 
<a> assertTrue ( logger . <RARE_TOKEN> ( ) ) ; </a> 
<a> verify ( mock ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> org . jboss . logging . Logger mock = </a> 
<a> createStrictMock ( org . jboss . logging . Logger . class ) ; </a> 
<a> replay ( mock ) ; </a> 
<a> InternalLogger logger = new <RARE_TOKEN> ( mock ) ; </a> 
<a> assertTrue ( logger . <RARE_TOKEN> ( ) ) ; </a> 
<a> verify ( mock ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> org . jboss . logging . Logger mock = </a> 
<a> createStrictMock ( org . jboss . logging . Logger . class ) ; </a> 
<a> mock . trace ( "a" ) ; </a> 
<a> replay ( mock ) ; </a> 
<a> InternalLogger logger = new <RARE_TOKEN> ( mock ) ; </a> 
<a> logger . trace ( "a" ) ; </a> 
<a> verify ( mock ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> org . jboss . logging . Logger mock = </a> 
<a> createStrictMock ( org . jboss . logging . Logger . class ) ; </a> 
<a> mock . trace ( "a" , e ) ; </a> 
<a> replay ( mock ) ; </a> 
<a> InternalLogger logger = new <RARE_TOKEN> ( mock ) ; </a> 
<a> logger . trace ( "a" , e ) ; </a> 
<a> verify ( mock ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> org . jboss . logging . Logger mock = </a> 
<a> createStrictMock ( org . jboss . logging . Logger . class ) ; </a> 
<a> mock . debug ( "a" ) ; </a> 
<a> replay ( mock ) ; </a> 
<a> InternalLogger logger = new <RARE_TOKEN> ( mock ) ; </a> 
<a> logger . debug ( "a" ) ; </a> 
<a> verify ( mock ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> org . jboss . logging . Logger mock = </a> 
<a> createStrictMock ( org . jboss . logging . Logger . class ) ; </a> 
<a> mock . debug ( "a" , e ) ; </a> 
<a> replay ( mock ) ; </a> 
<a> InternalLogger logger = new <RARE_TOKEN> ( mock ) ; </a> 
<a> logger . debug ( "a" , e ) ; </a> 
<a> verify ( mock ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> org . jboss . logging . Logger mock = </a> 
<a> createStrictMock ( org . jboss . logging . Logger . class ) ; </a> 
<a> mock . info ( "a" ) ; </a> 
<a> replay ( mock ) ; </a> 
<a> InternalLogger logger = new <RARE_TOKEN> ( mock ) ; </a> 
<a> logger . info ( "a" ) ; </a> 
<a> verify ( mock ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> org . jboss . logging . Logger mock = </a> 
<a> createStrictMock ( org . jboss . logging . Logger . class ) ; </a> 
<a> mock . info ( "a" , e ) ; </a> 
<a> replay ( mock ) ; </a> 
<a> InternalLogger logger = new <RARE_TOKEN> ( mock ) ; </a> 
<a> logger . info ( "a" , e ) ; </a> 
<a> verify ( mock ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> org . jboss . logging . Logger mock = </a> 
<a> createStrictMock ( org . jboss . logging . Logger . class ) ; </a> 
<a> mock . warn ( "a" ) ; </a> 
<a> replay ( mock ) ; </a> 
<a> InternalLogger logger = new <RARE_TOKEN> ( mock ) ; </a> 
<a> logger . warn ( "a" ) ; </a> 
<a> verify ( mock ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> org . jboss . logging . Logger mock = </a> 
<a> createStrictMock ( org . jboss . logging . Logger . class ) ; </a> 
<a> mock . warn ( "a" , e ) ; </a> 
<a> replay ( mock ) ; </a> 
<a> InternalLogger logger = new <RARE_TOKEN> ( mock ) ; </a> 
<a> logger . warn ( "a" , e ) ; </a> 
<a> verify ( mock ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> org . jboss . logging . Logger mock = </a> 
<a> createStrictMock ( org . jboss . logging . Logger . class ) ; </a> 
<a> mock . error ( "a" ) ; </a> 
<a> replay ( mock ) ; </a> 
<a> InternalLogger logger = new <RARE_TOKEN> ( mock ) ; </a> 
<a> logger . error ( "a" ) ; </a> 
<a> verify ( mock ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> org . jboss . logging . Logger mock = </a> 
<a> createStrictMock ( org . jboss . logging . Logger . class ) ; </a> 
<a> mock . error ( "a" , e ) ; </a> 
<a> replay ( mock ) ; </a> 
<a> InternalLogger logger = new <RARE_TOKEN> ( mock ) ; </a> 
<a> logger . error ( "a" , e ) ; </a> 
<a> verify ( mock ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . logging ; </a> 
<a> import static org . junit . Assert . * ; </a> 
<a> import org . junit . Test ; </a> 
<a> public class <RARE_TOKEN> { </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> InternalLogger logger = new <RARE_TOKEN> ( ) . newInstance ( "foo" ) ; </a> 
<a> assertTrue ( logger instanceof <RARE_TOKEN> ) ; </a> 
<a> assertEquals ( "foo" , logger . toString ( ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . logging ; </a> 
<a> import static org . <RARE_TOKEN> . <RARE_TOKEN> . * ; </a> 
<a> import static org . junit . Assert . * ; </a> 
<a> import java . util . logging . Level ; </a> 
<a> import org . junit . Test ; </a> 
<a> public class <RARE_TOKEN> { </a> 
<a> private static final Exception e = new Exception ( ) ; </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> java . util . logging . Logger mock = </a> 
<a> createStrictMock ( java . util . logging . Logger . class ) ; </a> 
<a> expect ( mock . <RARE_TOKEN> ( Level . <RARE_TOKEN> ) ) . andReturn ( true ) ; </a> 
<a> replay ( mock ) ; </a> 
<a> InternalLogger logger = new <RARE_TOKEN> ( mock , "foo" ) ; </a> 
<a> assertTrue ( logger . <RARE_TOKEN> ( ) ) ; </a> 
<a> verify ( mock ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> java . util . logging . Logger mock = </a> 
<a> createStrictMock ( java . util . logging . Logger . class ) ; </a> 
<a> expect ( mock . <RARE_TOKEN> ( Level . <RARE_TOKEN> ) ) . andReturn ( true ) ; </a> 
<a> replay ( mock ) ; </a> 
<a> InternalLogger logger = new <RARE_TOKEN> ( mock , "foo" ) ; </a> 
<a> assertTrue ( logger . isDebugEnabled ( ) ) ; </a> 
<a> verify ( mock ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> java . util . logging . Logger mock = </a> 
<a> createStrictMock ( java . util . logging . Logger . class ) ; </a> 
<a> expect ( mock . <RARE_TOKEN> ( Level . <RARE_TOKEN> ) ) . andReturn ( true ) ; </a> 
<a> replay ( mock ) ; </a> 
<a> InternalLogger logger = new <RARE_TOKEN> ( mock , "foo" ) ; </a> 
<a> assertTrue ( logger . <RARE_TOKEN> ( ) ) ; </a> 
<a> verify ( mock ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> java . util . logging . Logger mock = </a> 
<a> createStrictMock ( java . util . logging . Logger . class ) ; </a> 
<a> expect ( mock . <RARE_TOKEN> ( Level . <RARE_TOKEN> ) ) . andReturn ( true ) ; </a> 
<a> replay ( mock ) ; </a> 
<a> InternalLogger logger = new <RARE_TOKEN> ( mock , "foo" ) ; </a> 
<a> assertTrue ( logger . <RARE_TOKEN> ( ) ) ; </a> 
<a> verify ( mock ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> java . util . logging . Logger mock = </a> 
<a> createStrictMock ( java . util . logging . Logger . class ) ; </a> 
<a> expect ( mock . <RARE_TOKEN> ( Level . <RARE_TOKEN> ) ) . andReturn ( true ) ; </a> 
<a> replay ( mock ) ; </a> 
<a> InternalLogger logger = new <RARE_TOKEN> ( mock , "foo" ) ; </a> 
<a> assertTrue ( logger . <RARE_TOKEN> ( ) ) ; </a> 
<a> verify ( mock ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> java . util . logging . Logger mock = </a> 
<a> createStrictMock ( java . util . logging . Logger . class ) ; </a> 
<a> mock . <RARE_TOKEN> ( Level . <RARE_TOKEN> , "foo" , null , "a" ) ; </a> 
<a> replay ( mock ) ; </a> 
<a> InternalLogger logger = new <RARE_TOKEN> ( mock , "foo" ) ; </a> 
<a> logger . trace ( "a" ) ; </a> 
<a> verify ( mock ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> java . util . logging . Logger mock = </a> 
<a> createStrictMock ( java . util . logging . Logger . class ) ; </a> 
<a> mock . <RARE_TOKEN> ( Level . <RARE_TOKEN> , "foo" , null , "a" , e ) ; </a> 
<a> replay ( mock ) ; </a> 
<a> InternalLogger logger = new <RARE_TOKEN> ( mock , "foo" ) ; </a> 
<a> logger . trace ( "a" , e ) ; </a> 
<a> verify ( mock ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> java . util . logging . Logger mock = </a> 
<a> createStrictMock ( java . util . logging . Logger . class ) ; </a> 
<a> mock . <RARE_TOKEN> ( Level . <RARE_TOKEN> , "foo" , null , "a" ) ; </a> 
<a> replay ( mock ) ; </a> 
<a> InternalLogger logger = new <RARE_TOKEN> ( mock , "foo" ) ; </a> 
<a> logger . debug ( "a" ) ; </a> 
<a> verify ( mock ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> java . util . logging . Logger mock = </a> 
<a> createStrictMock ( java . util . logging . Logger . class ) ; </a> 
<a> mock . <RARE_TOKEN> ( Level . <RARE_TOKEN> , "foo" , null , "a" , e ) ; </a> 
<a> replay ( mock ) ; </a> 
<a> InternalLogger logger = new <RARE_TOKEN> ( mock , "foo" ) ; </a> 
<a> logger . debug ( "a" , e ) ; </a> 
<a> verify ( mock ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> java . util . logging . Logger mock = </a> 
<a> createStrictMock ( java . util . logging . Logger . class ) ; </a> 
<a> mock . <RARE_TOKEN> ( Level . <RARE_TOKEN> , "foo" , null , "a" ) ; </a> 
<a> replay ( mock ) ; </a> 
<a> InternalLogger logger = new <RARE_TOKEN> ( mock , "foo" ) ; </a> 
<a> logger . info ( "a" ) ; </a> 
<a> verify ( mock ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> java . util . logging . Logger mock = </a> 
<a> createStrictMock ( java . util . logging . Logger . class ) ; </a> 
<a> mock . <RARE_TOKEN> ( Level . <RARE_TOKEN> , "foo" , null , "a" , e ) ; </a> 
<a> replay ( mock ) ; </a> 
<a> InternalLogger logger = new <RARE_TOKEN> ( mock , "foo" ) ; </a> 
<a> logger . info ( "a" , e ) ; </a> 
<a> verify ( mock ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> java . util . logging . Logger mock = </a> 
<a> createStrictMock ( java . util . logging . Logger . class ) ; </a> 
<a> mock . <RARE_TOKEN> ( Level . <RARE_TOKEN> , "foo" , null , "a" ) ; </a> 
<a> replay ( mock ) ; </a> 
<a> InternalLogger logger = new <RARE_TOKEN> ( mock , "foo" ) ; </a> 
<a> logger . warn ( "a" ) ; </a> 
<a> verify ( mock ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> java . util . logging . Logger mock = </a> 
<a> createStrictMock ( java . util . logging . Logger . class ) ; </a> 
<a> mock . <RARE_TOKEN> ( Level . <RARE_TOKEN> , "foo" , null , "a" , e ) ; </a> 
<a> replay ( mock ) ; </a> 
<a> InternalLogger logger = new <RARE_TOKEN> ( mock , "foo" ) ; </a> 
<a> logger . warn ( "a" , e ) ; </a> 
<a> verify ( mock ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> java . util . logging . Logger mock = </a> 
<a> createStrictMock ( java . util . logging . Logger . class ) ; </a> 
<a> mock . <RARE_TOKEN> ( Level . <RARE_TOKEN> , "foo" , null , "a" ) ; </a> 
<a> replay ( mock ) ; </a> 
<a> InternalLogger logger = new <RARE_TOKEN> ( mock , "foo" ) ; </a> 
<a> logger . error ( "a" ) ; </a> 
<a> verify ( mock ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> java . util . logging . Logger mock = </a> 
<a> createStrictMock ( java . util . logging . Logger . class ) ; </a> 
<a> mock . <RARE_TOKEN> ( Level . <RARE_TOKEN> , "foo" , null , "a" , e ) ; </a> 
<a> replay ( mock ) ; </a> 
<a> InternalLogger logger = new <RARE_TOKEN> ( mock , "foo" ) ; </a> 
<a> logger . error ( "a" , e ) ; </a> 
<a> verify ( mock ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . logging ; </a> 
<a> import static org . junit . Assert . * ; </a> 
<a> import org . junit . Test ; </a> 
<a> public class <RARE_TOKEN> { </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> InternalLogger logger = new <RARE_TOKEN> ( ) . newInstance ( "foo" ) ; </a> 
<a> assertTrue ( logger instanceof <RARE_TOKEN> ) ; </a> 
<a> assertEquals ( "foo" , logger . toString ( ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . logging ; </a> 
<a> import static org . <RARE_TOKEN> . <RARE_TOKEN> . * ; </a> 
<a> import static org . junit . Assert . * ; </a> 
<a> import org . junit . Test ; </a> 
<a> public class <RARE_TOKEN> { </a> 
<a> private static final Exception e = new Exception ( ) ; </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> org . apache . <RARE_TOKEN> . Logger mock = </a> 
<a> createStrictMock ( org . apache . <RARE_TOKEN> . Logger . class ) ; </a> 
<a> expect ( mock . <RARE_TOKEN> ( ) ) . andReturn ( true ) ; </a> 
<a> replay ( mock ) ; </a> 
<a> InternalLogger logger = new <RARE_TOKEN> ( mock ) ; </a> 
<a> assertTrue ( logger . <RARE_TOKEN> ( ) ) ; </a> 
<a> verify ( mock ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> org . apache . <RARE_TOKEN> . Logger mock = </a> 
<a> createStrictMock ( org . apache . <RARE_TOKEN> . Logger . class ) ; </a> 
<a> expect ( mock . isDebugEnabled ( ) ) . andReturn ( true ) ; </a> 
<a> replay ( mock ) ; </a> 
<a> InternalLogger logger = new <RARE_TOKEN> ( mock ) ; </a> 
<a> assertTrue ( logger . isDebugEnabled ( ) ) ; </a> 
<a> verify ( mock ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> org . apache . <RARE_TOKEN> . Logger mock = </a> 
<a> createStrictMock ( org . apache . <RARE_TOKEN> . Logger . class ) ; </a> 
<a> expect ( mock . <RARE_TOKEN> ( ) ) . andReturn ( true ) ; </a> 
<a> replay ( mock ) ; </a> 
<a> InternalLogger logger = new <RARE_TOKEN> ( mock ) ; </a> 
<a> assertTrue ( logger . <RARE_TOKEN> ( ) ) ; </a> 
<a> verify ( mock ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> org . apache . <RARE_TOKEN> . Logger mock = </a> 
<a> createStrictMock ( org . apache . <RARE_TOKEN> . Logger . class ) ; </a> 
<a> replay ( mock ) ; </a> 
<a> InternalLogger logger = new <RARE_TOKEN> ( mock ) ; </a> 
<a> assertTrue ( logger . <RARE_TOKEN> ( ) ) ; </a> 
<a> verify ( mock ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> org . apache . <RARE_TOKEN> . Logger mock = </a> 
<a> createStrictMock ( org . apache . <RARE_TOKEN> . Logger . class ) ; </a> 
<a> replay ( mock ) ; </a> 
<a> InternalLogger logger = new <RARE_TOKEN> ( mock ) ; </a> 
<a> assertTrue ( logger . <RARE_TOKEN> ( ) ) ; </a> 
<a> verify ( mock ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> org . apache . <RARE_TOKEN> . Logger mock = </a> 
<a> createStrictMock ( org . apache . <RARE_TOKEN> . Logger . class ) ; </a> 
<a> mock . trace ( "a" ) ; </a> 
<a> replay ( mock ) ; </a> 
<a> InternalLogger logger = new <RARE_TOKEN> ( mock ) ; </a> 
<a> logger . trace ( "a" ) ; </a> 
<a> verify ( mock ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> org . apache . <RARE_TOKEN> . Logger mock = </a> 
<a> createStrictMock ( org . apache . <RARE_TOKEN> . Logger . class ) ; </a> 
<a> mock . trace ( "a" , e ) ; </a> 
<a> replay ( mock ) ; </a> 
<a> InternalLogger logger = new <RARE_TOKEN> ( mock ) ; </a> 
<a> logger . trace ( "a" , e ) ; </a> 
<a> verify ( mock ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> org . apache . <RARE_TOKEN> . Logger mock = </a> 
<a> createStrictMock ( org . apache . <RARE_TOKEN> . Logger . class ) ; </a> 
<a> mock . debug ( "a" ) ; </a> 
<a> replay ( mock ) ; </a> 
<a> InternalLogger logger = new <RARE_TOKEN> ( mock ) ; </a> 
<a> logger . debug ( "a" ) ; </a> 
<a> verify ( mock ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> org . apache . <RARE_TOKEN> . Logger mock = </a> 
<a> createStrictMock ( org . apache . <RARE_TOKEN> . Logger . class ) ; </a> 
<a> mock . debug ( "a" , e ) ; </a> 
<a> replay ( mock ) ; </a> 
<a> InternalLogger logger = new <RARE_TOKEN> ( mock ) ; </a> 
<a> logger . debug ( "a" , e ) ; </a> 
<a> verify ( mock ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> org . apache . <RARE_TOKEN> . Logger mock = </a> 
<a> createStrictMock ( org . apache . <RARE_TOKEN> . Logger . class ) ; </a> 
<a> mock . info ( "a" ) ; </a> 
<a> replay ( mock ) ; </a> 
<a> InternalLogger logger = new <RARE_TOKEN> ( mock ) ; </a> 
<a> logger . info ( "a" ) ; </a> 
<a> verify ( mock ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> org . apache . <RARE_TOKEN> . Logger mock = </a> 
<a> createStrictMock ( org . apache . <RARE_TOKEN> . Logger . class ) ; </a> 
<a> mock . info ( "a" , e ) ; </a> 
<a> replay ( mock ) ; </a> 
<a> InternalLogger logger = new <RARE_TOKEN> ( mock ) ; </a> 
<a> logger . info ( "a" , e ) ; </a> 
<a> verify ( mock ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> org . apache . <RARE_TOKEN> . Logger mock = </a> 
<a> createStrictMock ( org . apache . <RARE_TOKEN> . Logger . class ) ; </a> 
<a> mock . warn ( "a" ) ; </a> 
<a> replay ( mock ) ; </a> 
<a> InternalLogger logger = new <RARE_TOKEN> ( mock ) ; </a> 
<a> logger . warn ( "a" ) ; </a> 
<a> verify ( mock ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> org . apache . <RARE_TOKEN> . Logger mock = </a> 
<a> createStrictMock ( org . apache . <RARE_TOKEN> . Logger . class ) ; </a> 
<a> mock . warn ( "a" , e ) ; </a> 
<a> replay ( mock ) ; </a> 
<a> InternalLogger logger = new <RARE_TOKEN> ( mock ) ; </a> 
<a> logger . warn ( "a" , e ) ; </a> 
<a> verify ( mock ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> org . apache . <RARE_TOKEN> . Logger mock = </a> 
<a> createStrictMock ( org . apache . <RARE_TOKEN> . Logger . class ) ; </a> 
<a> mock . error ( "a" ) ; </a> 
<a> replay ( mock ) ; </a> 
<a> InternalLogger logger = new <RARE_TOKEN> ( mock ) ; </a> 
<a> logger . error ( "a" ) ; </a> 
<a> verify ( mock ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> org . apache . <RARE_TOKEN> . Logger mock = </a> 
<a> createStrictMock ( org . apache . <RARE_TOKEN> . Logger . class ) ; </a> 
<a> mock . error ( "a" , e ) ; </a> 
<a> replay ( mock ) ; </a> 
<a> InternalLogger logger = new <RARE_TOKEN> ( mock ) ; </a> 
<a> logger . error ( "a" , e ) ; </a> 
<a> verify ( mock ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . logging ; </a> 
<a> import static org . junit . Assert . * ; </a> 
<a> import org . junit . Test ; </a> 
<a> public class <RARE_TOKEN> { </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> InternalLogger logger = new <RARE_TOKEN> ( ) . newInstance ( "foo" ) ; </a> 
<a> assertTrue ( logger instanceof <RARE_TOKEN> ) ; </a> 
<a> assertEquals ( "foo" , logger . toString ( ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . logging ; </a> 
<a> import static org . <RARE_TOKEN> . <RARE_TOKEN> . * ; </a> 
<a> import static org . junit . Assert . * ; </a> 
<a> import org . junit . Test ; </a> 
<a> public class <RARE_TOKEN> { </a> 
<a> private static final Exception e = new Exception ( ) ; </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> org . slf4j . Logger mock = </a> 
<a> createStrictMock ( org . slf4j . Logger . class ) ; </a> 
<a> expect ( mock . <RARE_TOKEN> ( ) ) . andReturn ( true ) ; </a> 
<a> replay ( mock ) ; </a> 
<a> InternalLogger logger = new <RARE_TOKEN> ( mock ) ; </a> 
<a> assertTrue ( logger . <RARE_TOKEN> ( ) ) ; </a> 
<a> verify ( mock ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> org . slf4j . Logger mock = </a> 
<a> createStrictMock ( org . slf4j . Logger . class ) ; </a> 
<a> expect ( mock . isDebugEnabled ( ) ) . andReturn ( true ) ; </a> 
<a> replay ( mock ) ; </a> 
<a> InternalLogger logger = new <RARE_TOKEN> ( mock ) ; </a> 
<a> assertTrue ( logger . isDebugEnabled ( ) ) ; </a> 
<a> verify ( mock ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> org . slf4j . Logger mock = </a> 
<a> createStrictMock ( org . slf4j . Logger . class ) ; </a> 
<a> expect ( mock . <RARE_TOKEN> ( ) ) . andReturn ( true ) ; </a> 
<a> replay ( mock ) ; </a> 
<a> InternalLogger logger = new <RARE_TOKEN> ( mock ) ; </a> 
<a> assertTrue ( logger . <RARE_TOKEN> ( ) ) ; </a> 
<a> verify ( mock ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> org . slf4j . Logger mock = </a> 
<a> createStrictMock ( org . slf4j . Logger . class ) ; </a> 
<a> expect ( mock . <RARE_TOKEN> ( ) ) . andReturn ( true ) ; </a> 
<a> replay ( mock ) ; </a> 
<a> InternalLogger logger = new <RARE_TOKEN> ( mock ) ; </a> 
<a> assertTrue ( logger . <RARE_TOKEN> ( ) ) ; </a> 
<a> verify ( mock ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> org . slf4j . Logger mock = </a> 
<a> createStrictMock ( org . slf4j . Logger . class ) ; </a> 
<a> expect ( mock . <RARE_TOKEN> ( ) ) . andReturn ( true ) ; </a> 
<a> replay ( mock ) ; </a> 
<a> InternalLogger logger = new <RARE_TOKEN> ( mock ) ; </a> 
<a> assertTrue ( logger . <RARE_TOKEN> ( ) ) ; </a> 
<a> verify ( mock ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> org . slf4j . Logger mock = </a> 
<a> createStrictMock ( org . slf4j . Logger . class ) ; </a> 
<a> mock . trace ( "a" ) ; </a> 
<a> replay ( mock ) ; </a> 
<a> InternalLogger logger = new <RARE_TOKEN> ( mock ) ; </a> 
<a> logger . trace ( "a" ) ; </a> 
<a> verify ( mock ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> org . slf4j . Logger mock = </a> 
<a> createStrictMock ( org . slf4j . Logger . class ) ; </a> 
<a> mock . trace ( "a" , e ) ; </a> 
<a> replay ( mock ) ; </a> 
<a> InternalLogger logger = new <RARE_TOKEN> ( mock ) ; </a> 
<a> logger . trace ( "a" , e ) ; </a> 
<a> verify ( mock ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> org . slf4j . Logger mock = </a> 
<a> createStrictMock ( org . slf4j . Logger . class ) ; </a> 
<a> mock . debug ( "a" ) ; </a> 
<a> replay ( mock ) ; </a> 
<a> InternalLogger logger = new <RARE_TOKEN> ( mock ) ; </a> 
<a> logger . debug ( "a" ) ; </a> 
<a> verify ( mock ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> org . slf4j . Logger mock = </a> 
<a> createStrictMock ( org . slf4j . Logger . class ) ; </a> 
<a> mock . debug ( "a" , e ) ; </a> 
<a> replay ( mock ) ; </a> 
<a> InternalLogger logger = new <RARE_TOKEN> ( mock ) ; </a> 
<a> logger . debug ( "a" , e ) ; </a> 
<a> verify ( mock ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> org . slf4j . Logger mock = </a> 
<a> createStrictMock ( org . slf4j . Logger . class ) ; </a> 
<a> mock . info ( "a" ) ; </a> 
<a> replay ( mock ) ; </a> 
<a> InternalLogger logger = new <RARE_TOKEN> ( mock ) ; </a> 
<a> logger . info ( "a" ) ; </a> 
<a> verify ( mock ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> org . slf4j . Logger mock = </a> 
<a> createStrictMock ( org . slf4j . Logger . class ) ; </a> 
<a> mock . info ( "a" , e ) ; </a> 
<a> replay ( mock ) ; </a> 
<a> InternalLogger logger = new <RARE_TOKEN> ( mock ) ; </a> 
<a> logger . info ( "a" , e ) ; </a> 
<a> verify ( mock ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> org . slf4j . Logger mock = </a> 
<a> createStrictMock ( org . slf4j . Logger . class ) ; </a> 
<a> mock . warn ( "a" ) ; </a> 
<a> replay ( mock ) ; </a> 
<a> InternalLogger logger = new <RARE_TOKEN> ( mock ) ; </a> 
<a> logger . warn ( "a" ) ; </a> 
<a> verify ( mock ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> org . slf4j . Logger mock = </a> 
<a> createStrictMock ( org . slf4j . Logger . class ) ; </a> 
<a> mock . warn ( "a" , e ) ; </a> 
<a> replay ( mock ) ; </a> 
<a> InternalLogger logger = new <RARE_TOKEN> ( mock ) ; </a> 
<a> logger . warn ( "a" , e ) ; </a> 
<a> verify ( mock ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> org . slf4j . Logger mock = </a> 
<a> createStrictMock ( org . slf4j . Logger . class ) ; </a> 
<a> mock . error ( "a" ) ; </a> 
<a> replay ( mock ) ; </a> 
<a> InternalLogger logger = new <RARE_TOKEN> ( mock ) ; </a> 
<a> logger . error ( "a" ) ; </a> 
<a> verify ( mock ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> org . slf4j . Logger mock = </a> 
<a> createStrictMock ( org . slf4j . Logger . class ) ; </a> 
<a> mock . error ( "a" , e ) ; </a> 
<a> replay ( mock ) ; </a> 
<a> InternalLogger logger = new <RARE_TOKEN> ( mock ) ; </a> 
<a> logger . error ( "a" , e ) ; </a> 
<a> verify ( mock ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . util ; </a> 
<a> import static org . junit . Assert . assertEquals ; </a> 
<a> import static org . junit . Assert . assertNotNull ; </a> 
<a> import static org . junit . Assert . <RARE_TOKEN> ; </a> 
<a> import static org . junit . Assert . assertNull ; </a> 
<a> import static org . junit . Assert . assertSame ; </a> 
<a> import org . junit . <RARE_TOKEN> ; </a> 
<a> import org . junit . Test ; </a> 
<a> public class <RARE_TOKEN> { </a> 
<a> private <RARE_TOKEN> map ; </a> 
<a> @ <RARE_TOKEN> </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> this . map = new <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> assertNotNull ( this . map ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> < String > key = new <RARE_TOKEN> < String > ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> one = this . map . <RARE_TOKEN> ( key ) ; </a> 
<a> assertSame ( one , this . map . <RARE_TOKEN> ( key ) ) ; </a> 
<a> one . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> assertSame ( one . get ( ) , <RARE_TOKEN> ) ; </a> 
<a> one . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( one . get ( ) , <RARE_TOKEN> ) ; </a> 
<a> one . remove ( ) ; </a> 
<a> assertNull ( one . get ( ) ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> < Integer > key = new <RARE_TOKEN> < Integer > ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> one = this . map . <RARE_TOKEN> ( key ) ; </a> 
<a> assertSame ( one , this . map . <RARE_TOKEN> ( key ) ) ; </a> 
<a> one . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> assertEquals ( one . get ( ) , <RARE_TOKEN> ) ; </a> 
<a> one . <RARE_TOKEN> ( 1 ) ; </a> 
<a> <RARE_TOKEN> ( one . get ( ) , 1 ) ; </a> 
<a> one . remove ( ) ; </a> 
<a> assertNull ( one . get ( ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . util ; </a> 
<a> import java . util . ArrayList ; </a> 
<a> import java . util . concurrent . ConcurrentHashMap ; </a> 
<a> import static org . junit . Assert . assertFalse ; </a> 
<a> import static org . junit . Assert . <RARE_TOKEN> ; </a> 
<a> import static org . junit . Assert . assertTrue ; </a> 
<a> import static org . junit . Assert . assertSame ; </a> 
<a> import org . junit . <RARE_TOKEN> ; </a> 
<a> import org . junit . Test ; </a> 
<a> public class <RARE_TOKEN> { </a> 
<a> private ConcurrentHashMap < String , Boolean > names ; </a> 
<a> public <RARE_TOKEN> <RARE_TOKEN> ( String name ) { </a> 
<a> return new <RARE_TOKEN> ( names , name ) ; </a> 
<a> } </a> 
<a> @ <RARE_TOKEN> </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> this . names = new ConcurrentHashMap < String , Boolean > ( ) ; </a> 
<a> } </a> 
<a> @ Test ( expected = NullPointerException . class ) </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( null , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Test ( expected = NullPointerException . class ) </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( this . names , null ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( this . names , <RARE_TOKEN> <RARE_TOKEN> , 2 , 5 , new Object ( ) ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> assertTrue ( this . names . get ( <RARE_TOKEN> ) ) ; </a> 
<a> assertTrue ( this . names . get ( <RARE_TOKEN> ) == null ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> boolean <RARE_TOKEN> = false ; </a> 
<a> try { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } catch ( IllegalArgumentException ex ) { </a> 
<a> <RARE_TOKEN> = true ; </a> 
<a> } </a> 
<a> assertTrue ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> one = <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( one . id ( ) , <RARE_TOKEN> . id ( ) ) ; </a> 
<a> ArrayList < <RARE_TOKEN> > <RARE_TOKEN> = new ArrayList < <RARE_TOKEN> > ( ) ; </a> 
<a> for ( int index = 0 ; index < <RARE_TOKEN> ; index ++ ) { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = <RARE_TOKEN> ( <RARE_TOKEN> + index ) ; </a> 
<a> <RARE_TOKEN> . add ( <RARE_TOKEN> ) ; </a> 
<a> for ( <RARE_TOKEN> <RARE_TOKEN> : <RARE_TOKEN> ) { </a> 
<a> if ( ! <RARE_TOKEN> . name ( ) . equals ( <RARE_TOKEN> . name ( ) ) ) { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> . hashCode ( ) , <RARE_TOKEN> . hashCode ( ) ) ; </a> 
<a> assertFalse ( <RARE_TOKEN> . equals ( <RARE_TOKEN> ) ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> . toString ( ) , <RARE_TOKEN> . toString ( ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> one = <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> ConcurrentHashMap < String , Boolean > <RARE_TOKEN> = new ConcurrentHashMap < String , Boolean > ( ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> assertSame ( one . <RARE_TOKEN> ( one ) , 0 ) ; </a> 
<a> assertSame ( one . <RARE_TOKEN> ( <RARE_TOKEN> ) , - 5 ) ; </a> 
<a> assertSame ( one . <RARE_TOKEN> ( <RARE_TOKEN> ) , - 1 ) ; </a> 
<a> assertSame ( <RARE_TOKEN> . <RARE_TOKEN> ( one ) , 1 ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . util . internal ; </a> 
<a> import static org . junit . Assert . assertNotNull ; </a> 
<a> import org . junit . Test ; </a> 
<a> public class <RARE_TOKEN> { </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> assertNotNull ( StringUtil . NEWLINE ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . example . <RARE_TOKEN> ; </a> 
<a> import io . netty . bootstrap . ServerBootstrap ; </a> 
<a> import io . netty . channel . ChannelFuture ; </a> 
<a> import io . netty . channel . ChannelInitializer ; </a> 
<a> import io . netty . channel . socket . SocketChannel ; </a> 
<a> import io . netty . channel . socket . nio . NioEventLoopGroup ; </a> 
<a> import io . netty . channel . socket . nio . <RARE_TOKEN> ; </a> 
<a> public class <RARE_TOKEN> { </a> 
<a> private final int port ; </a> 
<a> public <RARE_TOKEN> ( int port ) { </a> 
<a> this . port = port ; </a> 
<a> } </a> 
<a> public void run ( ) throws Exception { </a> 
<a> ServerBootstrap b = new ServerBootstrap ( ) ; </a> 
<a> try { </a> 
<a> b . group ( new NioEventLoopGroup ( ) , new NioEventLoopGroup ( ) ) </a> 
<a> . channel ( new <RARE_TOKEN> ( ) ) </a> 
<a> . localAddress ( port ) </a> 
<a> . <RARE_TOKEN> ( new ChannelInitializer < SocketChannel > ( ) { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( SocketChannel ch ) throws Exception { </a> 
<a> ch . pipeline ( ) . addLast ( new <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> ChannelFuture f = b . bind ( ) . sync ( ) ; </a> 
<a> f . channel ( ) . <RARE_TOKEN> ( ) . sync ( ) ; </a> 
<a> } finally { </a> 
<a> b . shutdown ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public static void <RARE_TOKEN> ( String [ ] args ) throws Exception { </a> 
<a> int port ; </a> 
<a> if ( args . length > 0 ) { </a> 
<a> port = Integer . parseInt ( args [ 0 ] ) ; </a> 
<a> } else { </a> 
<a> port = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> new <RARE_TOKEN> ( port ) . run ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . example . <RARE_TOKEN> ; </a> 
<a> import io . netty . buffer . ByteBuf ; </a> 
<a> import io . netty . channel . ChannelHandlerContext ; </a> 
<a> import io . netty . channel . <RARE_TOKEN> ; </a> 
<a> import java . util . logging . Level ; </a> 
<a> import java . util . logging . Logger ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> private static final Logger logger = Logger . getLogger ( </a> 
<a> <RARE_TOKEN> . class . getName ( ) ) ; </a> 
<a> @ Override </a> 
<a> public void inboundBufferUpdated ( ChannelHandlerContext ctx , ByteBuf in ) </a> 
<a> throws Exception { </a> 
<a> in . clear ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void exceptionCaught ( ChannelHandlerContext ctx , </a> 
<a> Throwable cause ) throws Exception { </a> 
<a> logger . log ( </a> 
<a> Level . <RARE_TOKEN> , </a> 
<a> "Unexpected exception from <RARE_TOKEN> , </a> 
<a> cause ) ; </a> 
<a> ctx . close ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . example . <RARE_TOKEN> ; </a> 
<a> import io . netty . buffer . ByteBuf ; </a> 
<a> import io . netty . buffer . Unpooled ; </a> 
<a> import io . netty . channel . ChannelHandlerContext ; </a> 
<a> import io . netty . channel . <RARE_TOKEN> ; </a> 
<a> import java . util . logging . Level ; </a> 
<a> import java . util . logging . Logger ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> private static final Logger logger = Logger . getLogger ( </a> 
<a> <RARE_TOKEN> . class . getName ( ) ) ; </a> 
<a> private final ByteBuf <RARE_TOKEN> ; </a> 
<a> public <RARE_TOKEN> ( int <RARE_TOKEN> ) { </a> 
<a> if ( <RARE_TOKEN> <= 0 ) { </a> 
<a> throw new IllegalArgumentException ( <RARE_TOKEN> " + <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> = Unpooled . buffer ( <RARE_TOKEN> ) ; </a> 
<a> for ( int i = 0 ; i < <RARE_TOKEN> . capacity ( ) ; i ++ ) { </a> 
<a> <RARE_TOKEN> . writeByte ( ( byte ) i ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ChannelHandlerContext ctx ) { </a> 
<a> ctx . write ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void inboundBufferUpdated ( ChannelHandlerContext ctx , ByteBuf in ) { </a> 
<a> ByteBuf out = ctx . <RARE_TOKEN> ( ) ; </a> 
<a> out . <RARE_TOKEN> ( ) ; </a> 
<a> out . writeBytes ( in ) ; </a> 
<a> ctx . flush ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void exceptionCaught ( ChannelHandlerContext ctx , Throwable cause ) { </a> 
<a> logger . log ( Level . <RARE_TOKEN> , "Unexpected exception from <RARE_TOKEN> , cause ) ; </a> 
<a> ctx . close ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . example . <RARE_TOKEN> ; </a> 
<a> import io . netty . bootstrap . ServerBootstrap ; </a> 
<a> import io . netty . channel . ChannelFuture ; </a> 
<a> import io . netty . channel . ChannelInitializer ; </a> 
<a> import io . netty . channel . ChannelOption ; </a> 
<a> import io . netty . channel . socket . SocketChannel ; </a> 
<a> import io . netty . channel . socket . nio . NioEventLoopGroup ; </a> 
<a> import io . netty . channel . socket . nio . <RARE_TOKEN> ; </a> 
<a> import io . netty . handler . logging . <RARE_TOKEN> ; </a> 
<a> import io . netty . handler . logging . <RARE_TOKEN> ; </a> 
<a> import java . net . InetSocketAddress ; </a> 
<a> public class <RARE_TOKEN> { </a> 
<a> private final int port ; </a> 
<a> public <RARE_TOKEN> ( int port ) { </a> 
<a> this . port = port ; </a> 
<a> } </a> 
<a> public void run ( ) throws Exception { </a> 
<a> ServerBootstrap b = new ServerBootstrap ( ) ; </a> 
<a> try { </a> 
<a> b . group ( new NioEventLoopGroup ( ) , new NioEventLoopGroup ( ) ) </a> 
<a> . channel ( new <RARE_TOKEN> ( ) ) </a> 
<a> . option ( ChannelOption . <RARE_TOKEN> , <RARE_TOKEN> ) </a> 
<a> . localAddress ( new InetSocketAddress ( port ) ) </a> 
<a> . <RARE_TOKEN> ( ChannelOption . <RARE_TOKEN> , true ) </a> 
<a> . handler ( new <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ) ) </a> 
<a> . <RARE_TOKEN> ( new ChannelInitializer < SocketChannel > ( ) { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( SocketChannel ch ) throws Exception { </a> 
<a> ch . pipeline ( ) . addLast ( </a> 
<a> new <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ) , </a> 
<a> new <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> ChannelFuture f = b . bind ( ) . sync ( ) ; </a> 
<a> f . channel ( ) . <RARE_TOKEN> ( ) . sync ( ) ; </a> 
<a> } finally { </a> 
<a> b . shutdown ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public static void <RARE_TOKEN> ( String [ ] args ) throws Exception { </a> 
<a> int port ; </a> 
<a> if ( args . length > 0 ) { </a> 
<a> port = Integer . parseInt ( args [ 0 ] ) ; </a> 
<a> } else { </a> 
<a> port = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> new <RARE_TOKEN> ( port ) . run ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . example . <RARE_TOKEN> ; </a> 
<a> import io . netty . buffer . ByteBuf ; </a> 
<a> import io . netty . channel . ChannelHandler . Sharable ; </a> 
<a> import io . netty . channel . ChannelHandlerContext ; </a> 
<a> import io . netty . channel . <RARE_TOKEN> ; </a> 
<a> import java . util . logging . Level ; </a> 
<a> import java . util . logging . Logger ; </a> 
<a> @ Sharable </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> private static final Logger logger = Logger . getLogger ( </a> 
<a> <RARE_TOKEN> . class . getName ( ) ) ; </a> 
<a> @ Override </a> 
<a> public void inboundBufferUpdated ( ChannelHandlerContext ctx , ByteBuf in ) { </a> 
<a> ByteBuf out = ctx . <RARE_TOKEN> ( ) ; </a> 
<a> out . <RARE_TOKEN> ( ) ; </a> 
<a> out . writeBytes ( in ) ; </a> 
<a> ctx . flush ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void exceptionCaught ( ChannelHandlerContext ctx , Throwable cause ) { </a> 
<a> logger . log ( Level . <RARE_TOKEN> , "Unexpected exception from <RARE_TOKEN> , cause ) ; </a> 
<a> ctx . close ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . example . <RARE_TOKEN> ; </a> 
<a> import io . netty . bootstrap . Bootstrap ; </a> 
<a> import io . netty . channel . ChannelFuture ; </a> 
<a> import io . netty . channel . socket . nio . NioEventLoopGroup ; </a> 
<a> import io . netty . channel . socket . nio . <RARE_TOKEN> ; </a> 
<a> public class <RARE_TOKEN> { </a> 
<a> private final String host ; </a> 
<a> private final int port ; </a> 
<a> private final int count ; </a> 
<a> public <RARE_TOKEN> ( String host , int port , int count ) { </a> 
<a> this . host = host ; </a> 
<a> this . port = port ; </a> 
<a> this . count = count ; </a> 
<a> } </a> 
<a> public void run ( ) throws Exception { </a> 
<a> Bootstrap b = new Bootstrap ( ) ; </a> 
<a> try { </a> 
<a> b . group ( new NioEventLoopGroup ( ) ) </a> 
<a> . channel ( new <RARE_TOKEN> ( ) ) </a> 
<a> . remoteAddress ( host , port ) </a> 
<a> . handler ( new <RARE_TOKEN> ( count ) ) ; </a> 
<a> ChannelFuture f = b . connect ( ) . sync ( ) ; </a> 
<a> <RARE_TOKEN> handler = </a> 
<a> ( <RARE_TOKEN> ) f . channel ( ) . pipeline ( ) . last ( ) ; </a> 
<a> System . <RARE_TOKEN> . format ( </a> 
<a> <RARE_TOKEN> of <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> , count , handler . <RARE_TOKEN> ( ) ) ; </a> 
<a> } finally { </a> 
<a> b . shutdown ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public static void <RARE_TOKEN> ( String [ ] args ) throws Exception { </a> 
<a> if ( args . length != 3 ) { </a> 
<a> System . <RARE_TOKEN> . println ( </a> 
<a> <RARE_TOKEN> " + <RARE_TOKEN> . class . getSimpleName ( ) + </a> 
<a> " <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> return ; </a> 
<a> } </a> 
<a> String host = args [ 0 ] ; </a> 
<a> int port = Integer . parseInt ( args [ 1 ] ) ; </a> 
<a> int count = Integer . parseInt ( args [ 2 ] ) ; </a> 
<a> if ( count <= 0 ) { </a> 
<a> throw new IllegalArgumentException ( <RARE_TOKEN> must be a <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> new <RARE_TOKEN> ( host , port , count ) . run ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . example . <RARE_TOKEN> ; </a> 
<a> import io . netty . channel . ChannelInitializer ; </a> 
<a> import io . netty . channel . ChannelPipeline ; </a> 
<a> import io . netty . channel . socket . SocketChannel ; </a> 
<a> import io . netty . handler . codec . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import io . netty . handler . codec . <RARE_TOKEN> . ZlibWrapper ; </a> 
<a> public class <RARE_TOKEN> extends ChannelInitializer < SocketChannel > { </a> 
<a> private final int count ; </a> 
<a> public <RARE_TOKEN> ( int count ) { </a> 
<a> this . count = count ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( SocketChannel ch ) throws Exception { </a> 
<a> ChannelPipeline pipeline = ch . pipeline ( ) ; </a> 
<a> pipeline . addLast ( <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> ( ZlibWrapper . <RARE_TOKEN> ) ) ; </a> 
<a> pipeline . addLast ( <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> ( ZlibWrapper . <RARE_TOKEN> ) ) ; </a> 
<a> pipeline . addLast ( <RARE_TOKEN> , new <RARE_TOKEN> ( ) ) ; </a> 
<a> pipeline . addLast ( <RARE_TOKEN> , new <RARE_TOKEN> ( ) ) ; </a> 
<a> pipeline . addLast ( <RARE_TOKEN> , new <RARE_TOKEN> ( count ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . example . <RARE_TOKEN> ; </a> 
<a> import io . netty . bootstrap . ServerBootstrap ; </a> 
<a> import io . netty . channel . socket . nio . NioEventLoopGroup ; </a> 
<a> import io . netty . channel . socket . nio . <RARE_TOKEN> ; </a> 
<a> public class <RARE_TOKEN> { </a> 
<a> private final int port ; </a> 
<a> public <RARE_TOKEN> ( int port ) { </a> 
<a> this . port = port ; </a> 
<a> } </a> 
<a> public void run ( ) throws Exception { </a> 
<a> ServerBootstrap b = new ServerBootstrap ( ) ; </a> 
<a> try { </a> 
<a> b . group ( new NioEventLoopGroup ( ) , new NioEventLoopGroup ( ) ) </a> 
<a> . channel ( new <RARE_TOKEN> ( ) ) </a> 
<a> . localAddress ( port ) </a> 
<a> . <RARE_TOKEN> ( new <RARE_TOKEN> ( ) ) ; </a> 
<a> b . bind ( ) . sync ( ) . channel ( ) . <RARE_TOKEN> ( ) . sync ( ) ; </a> 
<a> } finally { </a> 
<a> b . shutdown ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public static void <RARE_TOKEN> ( String [ ] args ) throws Exception { </a> 
<a> int port ; </a> 
<a> if ( args . length > 0 ) { </a> 
<a> port = Integer . parseInt ( args [ 0 ] ) ; </a> 
<a> } else { </a> 
<a> port = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> new <RARE_TOKEN> ( port ) . run ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . example . <RARE_TOKEN> ; </a> 
<a> import io . netty . channel . ChannelHandlerContext ; </a> 
<a> import io . netty . channel . ChannelInboundMessageHandlerAdapter ; </a> 
<a> import java . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import java . util . <RARE_TOKEN> ; </a> 
<a> import java . util . logging . Level ; </a> 
<a> import java . util . logging . Logger ; </a> 
<a> public class <RARE_TOKEN> extends ChannelInboundMessageHandlerAdapter < <RARE_TOKEN> > { </a> 
<a> private static final Logger logger = Logger . getLogger ( </a> 
<a> <RARE_TOKEN> . class . getName ( ) ) ; </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( </a> 
<a> ChannelHandlerContext ctx , <RARE_TOKEN> msg ) throws Exception { </a> 
<a> <RARE_TOKEN> = msg ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( msg ) ; </a> 
<a> ctx . write ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( </a> 
<a> ChannelHandlerContext ctx ) throws Exception { </a> 
<a> logger . info ( new <RARE_TOKEN> ( ) . format ( </a> 
<a> <RARE_TOKEN> of <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> ) . toString ( ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void exceptionCaught ( </a> 
<a> ChannelHandlerContext ctx , Throwable cause ) throws Exception { </a> 
<a> logger . log ( </a> 
<a> Level . <RARE_TOKEN> , </a> 
<a> "Unexpected exception from <RARE_TOKEN> , cause ) ; </a> 
<a> ctx . close ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . example . <RARE_TOKEN> ; </a> 
<a> import io . netty . channel . ChannelInitializer ; </a> 
<a> import io . netty . channel . ChannelPipeline ; </a> 
<a> import io . netty . channel . socket . SocketChannel ; </a> 
<a> import io . netty . handler . codec . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import io . netty . handler . codec . <RARE_TOKEN> . ZlibWrapper ; </a> 
<a> public class <RARE_TOKEN> extends ChannelInitializer < SocketChannel > { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( SocketChannel ch ) throws Exception { </a> 
<a> ChannelPipeline pipeline = ch . pipeline ( ) ; </a> 
<a> pipeline . addLast ( <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> ( ZlibWrapper . <RARE_TOKEN> ) ) ; </a> 
<a> pipeline . addLast ( <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> ( ZlibWrapper . <RARE_TOKEN> ) ) ; </a> 
<a> pipeline . addLast ( <RARE_TOKEN> , new <RARE_TOKEN> ( ) ) ; </a> 
<a> pipeline . addLast ( <RARE_TOKEN> , new <RARE_TOKEN> ( ) ) ; </a> 
<a> pipeline . addLast ( <RARE_TOKEN> , new <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . example . http . file ; </a> 
<a> import static io . netty . handler . codec . http . HttpHeaders . * ; </a> 
<a> import static io . netty . handler . codec . http . HttpHeaders . Names . * ; </a> 
<a> import static io . netty . handler . codec . http . HttpMethod . * ; </a> 
<a> import static io . netty . handler . codec . http . HttpResponseStatus . * ; </a> 
<a> import static io . netty . handler . codec . http . HttpVersion . * ; </a> 
<a> import io . netty . buffer . Unpooled ; </a> 
<a> import io . netty . channel . ChannelFuture ; </a> 
<a> import io . netty . channel . ChannelFutureListener ; </a> 
<a> import io . netty . channel . ChannelHandlerContext ; </a> 
<a> import io . netty . channel . ChannelInboundMessageHandlerAdapter ; </a> 
<a> import io . netty . handler . codec . TooLongFrameException ; </a> 
<a> import io . netty . handler . codec . http . <RARE_TOKEN> ; </a> 
<a> import io . netty . handler . codec . http . HttpHeaders ; </a> 
<a> import io . netty . handler . codec . http . HttpRequest ; </a> 
<a> import io . netty . handler . codec . http . HttpResponse ; </a> 
<a> import io . netty . handler . codec . http . HttpResponseStatus ; </a> 
<a> import io . netty . handler . stream . <RARE_TOKEN> ; </a> 
<a> import io . netty . util . CharsetUtil ; </a> 
<a> import java . io . File ; </a> 
<a> import java . io . <RARE_TOKEN> ; </a> 
<a> import java . io . <RARE_TOKEN> ; </a> 
<a> import java . io . <RARE_TOKEN> ; </a> 
<a> import java . net . <RARE_TOKEN> ; </a> 
<a> import java . text . <RARE_TOKEN> ; </a> 
<a> import java . util . <RARE_TOKEN> ; </a> 
<a> import java . util . Date ; </a> 
<a> import java . util . <RARE_TOKEN> ; </a> 
<a> import java . util . <RARE_TOKEN> ; </a> 
<a> import java . util . <RARE_TOKEN> ; </a> 
<a> import javax . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> public class <RARE_TOKEN> extends ChannelInboundMessageHandlerAdapter < HttpRequest > { </a> 
<a> public static final String <RARE_TOKEN> = <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> public static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> public static final int <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( </a> 
<a> ChannelHandlerContext ctx , HttpRequest request ) throws Exception { </a> 
<a> if ( request . <RARE_TOKEN> ( ) != GET ) { </a> 
<a> <RARE_TOKEN> ( ctx , <RARE_TOKEN> ) ; </a> 
<a> return ; </a> 
<a> } </a> 
<a> final String path = <RARE_TOKEN> ( request . <RARE_TOKEN> ( ) ) ; </a> 
<a> if ( path == null ) { </a> 
<a> <RARE_TOKEN> ( ctx , <RARE_TOKEN> ) ; </a> 
<a> return ; </a> 
<a> } </a> 
<a> File file = new File ( path ) ; </a> 
<a> if ( file . <RARE_TOKEN> ( ) || ! file . <RARE_TOKEN> ( ) ) { </a> 
<a> <RARE_TOKEN> ( ctx , <RARE_TOKEN> ) ; </a> 
<a> return ; </a> 
<a> } </a> 
<a> if ( ! file . <RARE_TOKEN> ( ) ) { </a> 
<a> <RARE_TOKEN> ( ctx , <RARE_TOKEN> ) ; </a> 
<a> return ; </a> 
<a> } </a> 
<a> String <RARE_TOKEN> = request . getHeader ( HttpHeaders . Names . <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> != null && ! <RARE_TOKEN> . equals ( "" ) ) { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> Date <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> long <RARE_TOKEN> = <RARE_TOKEN> . getTime ( ) / 1000 ; </a> 
<a> long <RARE_TOKEN> = file . <RARE_TOKEN> ( ) / 1000 ; </a> 
<a> if ( <RARE_TOKEN> == <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( ctx ) ; </a> 
<a> return ; </a> 
<a> } </a> 
<a> } </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> try { </a> 
<a> <RARE_TOKEN> = new <RARE_TOKEN> ( file , <RARE_TOKEN> ) ; </a> 
<a> } catch ( <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( ctx , <RARE_TOKEN> ) ; </a> 
<a> return ; </a> 
<a> } </a> 
<a> long <RARE_TOKEN> = <RARE_TOKEN> . length ( ) ; </a> 
<a> HttpResponse response = new <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( response , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( response , file ) ; </a> 
<a> <RARE_TOKEN> ( response , file ) ; </a> 
<a> if ( <RARE_TOKEN> ( request ) ) { </a> 
<a> response . setHeader ( <RARE_TOKEN> , HttpHeaders . Values . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> ctx . write ( response ) ; </a> 
<a> ChannelFuture <RARE_TOKEN> = ctx . write ( new <RARE_TOKEN> ( <RARE_TOKEN> , 0 , <RARE_TOKEN> , <RARE_TOKEN> ) ) ; </a> 
<a> if ( ! <RARE_TOKEN> ( request ) ) { </a> 
<a> <RARE_TOKEN> . addListener ( ChannelFutureListener . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void exceptionCaught ( </a> 
<a> ChannelHandlerContext ctx , Throwable cause ) throws Exception { </a> 
<a> if ( cause instanceof TooLongFrameException ) { </a> 
<a> <RARE_TOKEN> ( ctx , <RARE_TOKEN> ) ; </a> 
<a> return ; </a> 
<a> } </a> 
<a> cause . printStackTrace ( ) ; </a> 
<a> if ( ctx . channel ( ) . isActive ( ) ) { </a> 
<a> <RARE_TOKEN> ( ctx , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private static String <RARE_TOKEN> ( String uri ) { </a> 
<a> try { </a> 
<a> uri = <RARE_TOKEN> . decode ( uri , <RARE_TOKEN> ) ; </a> 
<a> } catch ( <RARE_TOKEN> e ) { </a> 
<a> try { </a> 
<a> uri = <RARE_TOKEN> . decode ( uri , <RARE_TOKEN> ) ; </a> 
<a> } catch ( <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> throw new Error ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> uri = uri . <RARE_TOKEN> ( <RARE_TOKEN> , File . <RARE_TOKEN> ) ; </a> 
<a> if ( uri . contains ( File . <RARE_TOKEN> + <RARE_TOKEN> ) || </a> 
<a> uri . contains ( <RARE_TOKEN> + File . <RARE_TOKEN> ) || </a> 
<a> uri . startsWith ( <RARE_TOKEN> ) || uri . <RARE_TOKEN> ( <RARE_TOKEN> ) ) { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> return System . getProperty ( <RARE_TOKEN> ) + File . <RARE_TOKEN> + uri ; </a> 
<a> } </a> 
<a> private static void <RARE_TOKEN> ( ChannelHandlerContext ctx , HttpResponseStatus status ) { </a> 
<a> HttpResponse response = new <RARE_TOKEN> ( <RARE_TOKEN> , status ) ; </a> 
<a> response . setHeader ( <RARE_TOKEN> , <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> response . <RARE_TOKEN> ( Unpooled . copiedBuffer ( </a> 
<a> <RARE_TOKEN> " + status . toString ( ) + <RARE_TOKEN> , </a> 
<a> CharsetUtil . <RARE_TOKEN> ) ) ; </a> 
<a> ctx . write ( response ) . addListener ( ChannelFutureListener . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> private static void <RARE_TOKEN> ( ChannelHandlerContext ctx ) { </a> 
<a> HttpResponse response = new <RARE_TOKEN> ( <RARE_TOKEN> , HttpResponseStatus . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( response ) ; </a> 
<a> ctx . write ( response ) . addListener ( ChannelFutureListener . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> private static void <RARE_TOKEN> ( HttpResponse response ) { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ) ; </a> 
<a> <RARE_TOKEN> time = new <RARE_TOKEN> ( ) ; </a> 
<a> response . setHeader ( HttpHeaders . Names . <RARE_TOKEN> , <RARE_TOKEN> . format ( time . getTime ( ) ) ) ; </a> 
<a> } </a> 
<a> private static void <RARE_TOKEN> ( HttpResponse response , File <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ) ; </a> 
<a> <RARE_TOKEN> time = new <RARE_TOKEN> ( ) ; </a> 
<a> response . setHeader ( HttpHeaders . Names . <RARE_TOKEN> , <RARE_TOKEN> . format ( time . getTime ( ) ) ) ; </a> 
<a> time . add ( <RARE_TOKEN> . <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> response . setHeader ( HttpHeaders . Names . <RARE_TOKEN> , <RARE_TOKEN> . format ( time . getTime ( ) ) ) ; </a> 
<a> response . setHeader ( HttpHeaders . Names . <RARE_TOKEN> , <RARE_TOKEN> <RARE_TOKEN> + <RARE_TOKEN> ) ; </a> 
<a> response . setHeader ( </a> 
<a> HttpHeaders . Names . <RARE_TOKEN> , <RARE_TOKEN> . format ( new Date ( <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ) ) ; </a> 
<a> } </a> 
<a> private static void <RARE_TOKEN> ( HttpResponse response , File file ) { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( ) ; </a> 
<a> response . setHeader ( HttpHeaders . Names . <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> ( file . getPath ( ) ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . example . http . file ; </a> 
<a> import io . netty . channel . ChannelInitializer ; </a> 
<a> import io . netty . channel . ChannelPipeline ; </a> 
<a> import io . netty . channel . socket . SocketChannel ; </a> 
<a> import io . netty . handler . codec . http . <RARE_TOKEN> ; </a> 
<a> import io . netty . handler . codec . http . <RARE_TOKEN> ; </a> 
<a> import io . netty . handler . codec . http . <RARE_TOKEN> ; </a> 
<a> import io . netty . handler . stream . <RARE_TOKEN> ; </a> 
<a> public class <RARE_TOKEN> extends ChannelInitializer < SocketChannel > { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( SocketChannel ch ) throws Exception { </a> 
<a> ChannelPipeline pipeline = ch . pipeline ( ) ; </a> 
<a> pipeline . addLast ( <RARE_TOKEN> , new <RARE_TOKEN> ( ) ) ; </a> 
<a> pipeline . addLast ( <RARE_TOKEN> , new <RARE_TOKEN> ( <RARE_TOKEN> ) ) ; </a> 
<a> pipeline . addLast ( <RARE_TOKEN> , new <RARE_TOKEN> ( ) ) ; </a> 
<a> pipeline . addLast ( <RARE_TOKEN> , new <RARE_TOKEN> ( ) ) ; </a> 
<a> pipeline . addLast ( <RARE_TOKEN> , new <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . example . http . <RARE_TOKEN> ; </a> 
<a> import io . netty . bootstrap . Bootstrap ; </a> 
<a> import io . netty . channel . Channel ; </a> 
<a> import io . netty . channel . socket . nio . NioEventLoopGroup ; </a> 
<a> import io . netty . channel . socket . nio . <RARE_TOKEN> ; </a> 
<a> import io . netty . handler . codec . http . <RARE_TOKEN> ; </a> 
<a> import io . netty . handler . codec . http . <RARE_TOKEN> ; </a> 
<a> import io . netty . handler . codec . http . <RARE_TOKEN> ; </a> 
<a> import io . netty . handler . codec . http . HttpHeaders ; </a> 
<a> import io . netty . handler . codec . http . HttpMethod ; </a> 
<a> import io . netty . handler . codec . http . HttpRequest ; </a> 
<a> import io . netty . handler . codec . http . HttpVersion ; </a> 
<a> import java . net . InetSocketAddress ; </a> 
<a> import java . net . URI ; </a> 
<a> public class <RARE_TOKEN> { </a> 
<a> private final URI uri ; </a> 
<a> public <RARE_TOKEN> ( URI uri ) { </a> 
<a> this . uri = uri ; </a> 
<a> } </a> 
<a> public void run ( ) throws Exception { </a> 
<a> String <RARE_TOKEN> = uri . <RARE_TOKEN> ( ) == null ? <RARE_TOKEN> : uri . <RARE_TOKEN> ( ) ; </a> 
<a> String host = uri . <RARE_TOKEN> ( ) == null ? <RARE_TOKEN> : uri . <RARE_TOKEN> ( ) ; </a> 
<a> int port = uri . <RARE_TOKEN> ( ) ; </a> 
<a> if ( port == - 1 ) { </a> 
<a> if ( <RARE_TOKEN> . equalsIgnoreCase ( <RARE_TOKEN> ) ) { </a> 
<a> port = 80 ; </a> 
<a> } else if ( <RARE_TOKEN> . equalsIgnoreCase ( <RARE_TOKEN> ) ) { </a> 
<a> port = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<a> if ( ! <RARE_TOKEN> . equalsIgnoreCase ( <RARE_TOKEN> ) && ! <RARE_TOKEN> . equalsIgnoreCase ( <RARE_TOKEN> ) ) { </a> 
<a> System . <RARE_TOKEN> . println ( <RARE_TOKEN> <RARE_TOKEN> is <RARE_TOKEN> ) ; </a> 
<a> return ; </a> 
<a> } </a> 
<a> boolean <RARE_TOKEN> = <RARE_TOKEN> . equalsIgnoreCase ( <RARE_TOKEN> ) ; </a> 
<a> Bootstrap b = new Bootstrap ( ) ; </a> 
<a> try { </a> 
<a> b . group ( new NioEventLoopGroup ( ) ) </a> 
<a> . channel ( new <RARE_TOKEN> ( ) ) </a> 
<a> . handler ( new <RARE_TOKEN> ( <RARE_TOKEN> ) ) </a> 
<a> . remoteAddress ( new InetSocketAddress ( host , port ) ) ; </a> 
<a> Channel ch = b . connect ( ) . sync ( ) . channel ( ) ; </a> 
<a> HttpRequest request = new <RARE_TOKEN> ( </a> 
<a> HttpVersion . <RARE_TOKEN> , HttpMethod . GET , uri . <RARE_TOKEN> ( ) ) ; </a> 
<a> request . setHeader ( HttpHeaders . Names . <RARE_TOKEN> , host ) ; </a> 
<a> request . setHeader ( HttpHeaders . Names . <RARE_TOKEN> , HttpHeaders . Values . <RARE_TOKEN> ) ; </a> 
<a> request . setHeader ( HttpHeaders . Names . <RARE_TOKEN> , HttpHeaders . Values . <RARE_TOKEN> ) ; </a> 
<a> request . setHeader ( </a> 
<a> HttpHeaders . Names . <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> . encode ( </a> 
<a> new <RARE_TOKEN> ( <RARE_TOKEN> , "foo" ) , </a> 
<a> new <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ) ) ; </a> 
<a> ch . write ( request ) ; </a> 
<a> ch . <RARE_TOKEN> ( ) . sync ( ) ; </a> 
<a> } finally { </a> 
<a> b . shutdown ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public static void <RARE_TOKEN> ( String [ ] args ) throws Exception { </a> 
<a> if ( args . length != 1 ) { </a> 
<a> System . <RARE_TOKEN> . println ( </a> 
<a> <RARE_TOKEN> " + <RARE_TOKEN> . class . getSimpleName ( ) + </a> 
<a> " <RARE_TOKEN> ) ; </a> 
<a> return ; </a> 
<a> } </a> 
<a> URI uri = new URI ( args [ 0 ] ) ; </a> 
<a> new <RARE_TOKEN> ( uri ) . run ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . example . http . <RARE_TOKEN> ; </a> 
<a> import io . netty . buffer . ByteBuf ; </a> 
<a> import io . netty . channel . ChannelHandlerContext ; </a> 
<a> import io . netty . channel . ChannelInboundMessageHandlerAdapter ; </a> 
<a> import io . netty . handler . codec . http . HttpChunk ; </a> 
<a> import io . netty . handler . codec . http . HttpResponse ; </a> 
<a> import io . netty . util . CharsetUtil ; </a> 
<a> public class <RARE_TOKEN> extends ChannelInboundMessageHandlerAdapter < Object > { </a> 
<a> private boolean <RARE_TOKEN> ; </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ChannelHandlerContext ctx , Object msg ) throws Exception { </a> 
<a> if ( ! <RARE_TOKEN> ) { </a> 
<a> HttpResponse response = ( HttpResponse ) msg ; </a> 
<a> System . out . println ( <RARE_TOKEN> " + response . getStatus ( ) ) ; </a> 
<a> System . out . println ( <RARE_TOKEN> " + response . <RARE_TOKEN> ( ) ) ; </a> 
<a> System . out . println ( ) ; </a> 
<a> if ( ! response . <RARE_TOKEN> ( ) . isEmpty ( ) ) { </a> 
<a> for ( String name : response . <RARE_TOKEN> ( ) ) { </a> 
<a> for ( String value : response . getHeaders ( name ) ) { </a> 
<a> System . out . println ( <RARE_TOKEN> " + name + " = " + value ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> System . out . println ( ) ; </a> 
<a> } </a> 
<a> if ( response . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( ) ) { </a> 
<a> <RARE_TOKEN> = true ; </a> 
<a> System . out . println ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } else { </a> 
<a> ByteBuf content = response . getContent ( ) ; </a> 
<a> if ( content . readable ( ) ) { </a> 
<a> System . out . println ( <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> System . out . println ( content . toString ( CharsetUtil . <RARE_TOKEN> ) ) ; </a> 
<a> System . out . println ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } else { </a> 
<a> HttpChunk chunk = ( HttpChunk ) msg ; </a> 
<a> if ( chunk . isLast ( ) ) { </a> 
<a> <RARE_TOKEN> = false ; </a> 
<a> System . out . println ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } else { </a> 
<a> System . out . print ( chunk . getContent ( ) . toString ( CharsetUtil . <RARE_TOKEN> ) ) ; </a> 
<a> System . out . flush ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void exceptionCaught ( </a> 
<a> ChannelHandlerContext ctx , Throwable cause ) throws Exception { </a> 
<a> cause . printStackTrace ( ) ; </a> 
<a> ctx . close ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . example . http . <RARE_TOKEN> ; </a> 
<a> import static io . netty . handler . codec . http . HttpHeaders . * ; </a> 
<a> import static io . netty . handler . codec . http . HttpHeaders . Names . * ; </a> 
<a> import static io . netty . handler . codec . http . HttpResponseStatus . * ; </a> 
<a> import static io . netty . handler . codec . http . HttpVersion . * ; </a> 
<a> import io . netty . buffer . ByteBuf ; </a> 
<a> import io . netty . buffer . Unpooled ; </a> 
<a> import io . netty . channel . ChannelFuture ; </a> 
<a> import io . netty . channel . ChannelFutureListener ; </a> 
<a> import io . netty . channel . ChannelHandlerContext ; </a> 
<a> import io . netty . channel . ChannelInboundMessageHandlerAdapter ; </a> 
<a> import io . netty . handler . codec . http . Cookie ; </a> 
<a> import io . netty . handler . codec . http . <RARE_TOKEN> ; </a> 
<a> import io . netty . handler . codec . http . <RARE_TOKEN> ; </a> 
<a> import io . netty . handler . codec . http . HttpChunk ; </a> 
<a> import io . netty . handler . codec . http . <RARE_TOKEN> ; </a> 
<a> import io . netty . handler . codec . http . HttpHeaders ; </a> 
<a> import io . netty . handler . codec . http . HttpRequest ; </a> 
<a> import io . netty . handler . codec . http . HttpResponse ; </a> 
<a> import io . netty . handler . codec . http . <RARE_TOKEN> ; </a> 
<a> import io . netty . handler . codec . http . <RARE_TOKEN> ; </a> 
<a> import io . netty . util . CharsetUtil ; </a> 
<a> import java . util . List ; </a> 
<a> import java . util . Map ; </a> 
<a> import java . util . Map . Entry ; </a> 
<a> import java . util . Set ; </a> 
<a> public class <RARE_TOKEN> extends ChannelInboundMessageHandlerAdapter < Object > { </a> 
<a> private HttpRequest request ; </a> 
<a> private boolean <RARE_TOKEN> ; </a> 
<a> private final StringBuilder buf = new StringBuilder ( ) ; </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ChannelHandlerContext ctx , Object msg ) throws Exception { </a> 
<a> if ( ! <RARE_TOKEN> ) { </a> 
<a> HttpRequest request = this . request = ( HttpRequest ) msg ; </a> 
<a> if ( <RARE_TOKEN> ( request ) ) { </a> 
<a> <RARE_TOKEN> ( ctx ) ; </a> 
<a> } </a> 
<a> buf . <RARE_TOKEN> ( 0 ) ; </a> 
<a> buf . append ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> buf . append ( <RARE_TOKEN> ) ; </a> 
<a> buf . append ( <RARE_TOKEN> " + request . <RARE_TOKEN> ( ) + <RARE_TOKEN> ) ; </a> 
<a> buf . append ( <RARE_TOKEN> " + <RARE_TOKEN> ( request , <RARE_TOKEN> ) + <RARE_TOKEN> ) ; </a> 
<a> buf . append ( <RARE_TOKEN> " + request . <RARE_TOKEN> ( ) + <RARE_TOKEN> ) ; </a> 
<a> for ( Map . Entry < String , String > h : request . getHeaders ( ) ) { </a> 
<a> buf . append ( <RARE_TOKEN> " + h . <RARE_TOKEN> ( ) + " = " + h . getValue ( ) + <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> buf . append ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( request . <RARE_TOKEN> ( ) ) ; </a> 
<a> Map < String , List < String > > params = <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> if ( ! params . isEmpty ( ) ) { </a> 
<a> for ( Entry < String , List < String > > p : params . <RARE_TOKEN> ( ) ) { </a> 
<a> String key = p . <RARE_TOKEN> ( ) ; </a> 
<a> List < String > <RARE_TOKEN> = p . getValue ( ) ; </a> 
<a> for ( String val : <RARE_TOKEN> ) { </a> 
<a> buf . append ( <RARE_TOKEN> " + key + " = " + val + <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> buf . append ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( request . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( ) ) { </a> 
<a> <RARE_TOKEN> = true ; </a> 
<a> } else { </a> 
<a> ByteBuf content = request . getContent ( ) ; </a> 
<a> if ( content . readable ( ) ) { </a> 
<a> buf . append ( <RARE_TOKEN> " + content . toString ( CharsetUtil . <RARE_TOKEN> ) + <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( ctx ) ; </a> 
<a> } </a> 
<a> } else { </a> 
<a> HttpChunk chunk = ( HttpChunk ) msg ; </a> 
<a> if ( chunk . isLast ( ) ) { </a> 
<a> <RARE_TOKEN> = false ; </a> 
<a> buf . append ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = ( <RARE_TOKEN> ) chunk ; </a> 
<a> if ( ! <RARE_TOKEN> . <RARE_TOKEN> ( ) . isEmpty ( ) ) { </a> 
<a> buf . append ( <RARE_TOKEN> ) ; </a> 
<a> for ( String name : <RARE_TOKEN> . <RARE_TOKEN> ( ) ) { </a> 
<a> for ( String value : <RARE_TOKEN> . getHeaders ( name ) ) { </a> 
<a> buf . append ( <RARE_TOKEN> <RARE_TOKEN> " + name + " = " + value + <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> buf . append ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( ctx ) ; </a> 
<a> } else { </a> 
<a> buf . append ( <RARE_TOKEN> " + chunk . getContent ( ) . toString ( CharsetUtil . <RARE_TOKEN> ) + <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( ChannelHandlerContext ctx ) { </a> 
<a> boolean <RARE_TOKEN> = <RARE_TOKEN> ( request ) ; </a> 
<a> HttpResponse response = new <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> response . <RARE_TOKEN> ( Unpooled . copiedBuffer ( buf . toString ( ) , CharsetUtil . <RARE_TOKEN> ) ) ; </a> 
<a> response . setHeader ( <RARE_TOKEN> , <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> ) { </a> 
<a> response . setHeader ( <RARE_TOKEN> , response . getContent ( ) . readableBytes ( ) ) ; </a> 
<a> response . setHeader ( <RARE_TOKEN> , HttpHeaders . Values . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> String <RARE_TOKEN> = request . getHeader ( <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> Set < Cookie > <RARE_TOKEN> = <RARE_TOKEN> . decode ( <RARE_TOKEN> ) ; </a> 
<a> if ( ! <RARE_TOKEN> . isEmpty ( ) ) { </a> 
<a> for ( Cookie cookie : <RARE_TOKEN> ) { </a> 
<a> response . addHeader ( <RARE_TOKEN> , <RARE_TOKEN> . encode ( cookie ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } else { </a> 
<a> response . addHeader ( <RARE_TOKEN> , <RARE_TOKEN> . encode ( <RARE_TOKEN> , <RARE_TOKEN> ) ) ; </a> 
<a> response . addHeader ( <RARE_TOKEN> , <RARE_TOKEN> . encode ( <RARE_TOKEN> , <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> ChannelFuture future = ctx . write ( response ) ; </a> 
<a> if ( ! <RARE_TOKEN> ) { </a> 
<a> future . addListener ( ChannelFutureListener . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private static void <RARE_TOKEN> ( ChannelHandlerContext ctx ) { </a> 
<a> HttpResponse response = new <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> ctx . write ( response ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void exceptionCaught ( </a> 
<a> ChannelHandlerContext ctx , Throwable cause ) throws Exception { </a> 
<a> cause . printStackTrace ( ) ; </a> 
<a> ctx . close ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . example . http . <RARE_TOKEN> ; </a> 
<a> import io . netty . channel . ChannelInitializer ; </a> 
<a> import io . netty . channel . ChannelPipeline ; </a> 
<a> import io . netty . channel . socket . SocketChannel ; </a> 
<a> import io . netty . handler . codec . http . <RARE_TOKEN> ; </a> 
<a> import io . netty . handler . codec . http . <RARE_TOKEN> ; </a> 
<a> import io . netty . handler . codec . http . <RARE_TOKEN> ; </a> 
<a> public class <RARE_TOKEN> extends ChannelInitializer < SocketChannel > { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( SocketChannel ch ) throws Exception { </a> 
<a> ChannelPipeline p = ch . pipeline ( ) ; </a> 
<a> p . addLast ( <RARE_TOKEN> , new <RARE_TOKEN> ( ) ) ; </a> 
<a> p . addLast ( <RARE_TOKEN> , new <RARE_TOKEN> ( ) ) ; </a> 
<a> p . addLast ( <RARE_TOKEN> , new <RARE_TOKEN> ( ) ) ; </a> 
<a> p . addLast ( <RARE_TOKEN> , new <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . example . http . websocketx . <RARE_TOKEN> ; </a> 
<a> import io . netty . bootstrap . ServerBootstrap ; </a> 
<a> import io . netty . channel . ChannelFuture ; </a> 
<a> import io . netty . channel . socket . nio . NioEventLoopGroup ; </a> 
<a> import io . netty . channel . socket . nio . <RARE_TOKEN> ; </a> 
<a> public class <RARE_TOKEN> { </a> 
<a> private final int port ; </a> 
<a> public <RARE_TOKEN> ( int port ) { </a> 
<a> this . port = port ; </a> 
<a> } </a> 
<a> public void run ( ) throws Exception { </a> 
<a> ServerBootstrap b = new ServerBootstrap ( ) ; </a> 
<a> try { </a> 
<a> b . group ( new NioEventLoopGroup ( ) , new NioEventLoopGroup ( ) ) </a> 
<a> . channel ( new <RARE_TOKEN> ( ) ) </a> 
<a> . localAddress ( port ) </a> 
<a> . <RARE_TOKEN> ( new <RARE_TOKEN> ( ) ) ; </a> 
<a> ChannelFuture f = b . bind ( ) . sync ( ) ; </a> 
<a> System . out . println ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> port " + port ) ; </a> 
<a> f . channel ( ) . <RARE_TOKEN> ( ) . sync ( ) ; </a> 
<a> } finally { </a> 
<a> b . shutdown ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public static void <RARE_TOKEN> ( String [ ] args ) throws Exception { </a> 
<a> int port ; </a> 
<a> if ( args . length > 0 ) { </a> 
<a> port = Integer . parseInt ( args [ 0 ] ) ; </a> 
<a> } else { </a> 
<a> port = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> new <RARE_TOKEN> ( port ) . run ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . example . http . websocketx . <RARE_TOKEN> ; </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . example . http . websocketx . client ; </a> 
<a> import io . netty . bootstrap . Bootstrap ; </a> 
<a> import io . netty . buffer . Unpooled ; </a> 
<a> import io . netty . channel . Channel ; </a> 
<a> import io . netty . channel . ChannelInitializer ; </a> 
<a> import io . netty . channel . ChannelPipeline ; </a> 
<a> import io . netty . channel . socket . SocketChannel ; </a> 
<a> import io . netty . channel . socket . nio . NioEventLoopGroup ; </a> 
<a> import io . netty . channel . socket . nio . <RARE_TOKEN> ; </a> 
<a> import io . netty . handler . codec . http . <RARE_TOKEN> ; </a> 
<a> import io . netty . handler . codec . http . <RARE_TOKEN> ; </a> 
<a> import io . netty . handler . codec . http . websocketx . <RARE_TOKEN> ; </a> 
<a> import io . netty . handler . codec . http . websocketx . <RARE_TOKEN> ; </a> 
<a> import io . netty . handler . codec . http . websocketx . <RARE_TOKEN> ; </a> 
<a> import io . netty . handler . codec . http . websocketx . <RARE_TOKEN> ; </a> 
<a> import io . netty . handler . codec . http . websocketx . <RARE_TOKEN> ; </a> 
<a> import io . netty . handler . codec . http . websocketx . <RARE_TOKEN> ; </a> 
<a> import java . net . URI ; </a> 
<a> import java . util . HashMap ; </a> 
<a> public class <RARE_TOKEN> { </a> 
<a> private final URI uri ; </a> 
<a> public <RARE_TOKEN> ( URI uri ) { </a> 
<a> this . uri = uri ; </a> 
<a> } </a> 
<a> public void run ( ) throws Exception { </a> 
<a> Bootstrap b = new Bootstrap ( ) ; </a> 
<a> try { </a> 
<a> String <RARE_TOKEN> = uri . <RARE_TOKEN> ( ) ; </a> 
<a> if ( ! <RARE_TOKEN> . equals ( <RARE_TOKEN> ) ) { </a> 
<a> throw new IllegalArgumentException ( <RARE_TOKEN> <RARE_TOKEN> " + <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> HashMap < String , String > <RARE_TOKEN> = new HashMap < String , String > ( ) ; </a> 
<a> <RARE_TOKEN> . put ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> final <RARE_TOKEN> <RARE_TOKEN> = </a> 
<a> new <RARE_TOKEN> ( ) . <RARE_TOKEN> ( </a> 
<a> uri , <RARE_TOKEN> . <RARE_TOKEN> , null , false , <RARE_TOKEN> ) ; </a> 
<a> b . group ( new NioEventLoopGroup ( ) ) </a> 
<a> . channel ( new <RARE_TOKEN> ( ) ) </a> 
<a> . remoteAddress ( uri . <RARE_TOKEN> ( ) , uri . <RARE_TOKEN> ( ) ) </a> 
<a> . handler ( new ChannelInitializer < SocketChannel > ( ) { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( SocketChannel ch ) throws Exception { </a> 
<a> ChannelPipeline pipeline = ch . pipeline ( ) ; </a> 
<a> pipeline . addLast ( <RARE_TOKEN> , new <RARE_TOKEN> ( ) ) ; </a> 
<a> pipeline . addLast ( <RARE_TOKEN> , new <RARE_TOKEN> ( ) ) ; </a> 
<a> pipeline . addLast ( <RARE_TOKEN> , new <RARE_TOKEN> ( <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> System . out . println ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> Channel ch = b . connect ( ) . sync ( ) . channel ( ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ch ) . sync ( ) ; </a> 
<a> System . out . println ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> for ( int i = 0 ; i < 1000 ; i ++ ) { </a> 
<a> ch . write ( new <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> + i ) ) ; </a> 
<a> } </a> 
<a> System . out . println ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> ch . write ( new <RARE_TOKEN> ( Unpooled . copiedBuffer ( new byte [ ] { 1 , 2 , 3 , 4 , 5 , 6 } ) ) ) ; </a> 
<a> System . out . println ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> ch . write ( new <RARE_TOKEN> ( ) ) ; </a> 
<a> ch . <RARE_TOKEN> ( ) . sync ( ) ; </a> 
<a> } finally { </a> 
<a> b . shutdown ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public static void <RARE_TOKEN> ( String [ ] args ) throws Exception { </a> 
<a> URI uri ; </a> 
<a> if ( args . length > 0 ) { </a> 
<a> uri = new URI ( args [ 0 ] ) ; </a> 
<a> } else { </a> 
<a> uri = new URI ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> new <RARE_TOKEN> ( uri ) . run ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . example . http . websocketx . server ; </a> 
<a> import io . netty . bootstrap . ServerBootstrap ; </a> 
<a> import io . netty . channel . Channel ; </a> 
<a> import io . netty . channel . socket . nio . NioEventLoopGroup ; </a> 
<a> import io . netty . channel . socket . nio . <RARE_TOKEN> ; </a> 
<a> public class <RARE_TOKEN> { </a> 
<a> private final int port ; </a> 
<a> public <RARE_TOKEN> ( int port ) { </a> 
<a> this . port = port ; </a> 
<a> } </a> 
<a> public void run ( ) throws Exception { </a> 
<a> ServerBootstrap b = new ServerBootstrap ( ) ; </a> 
<a> try { </a> 
<a> b . group ( new NioEventLoopGroup ( ) , new NioEventLoopGroup ( ) ) </a> 
<a> . channel ( new <RARE_TOKEN> ( ) ) </a> 
<a> . localAddress ( port ) </a> 
<a> . <RARE_TOKEN> ( new <RARE_TOKEN> ( ) ) ; </a> 
<a> Channel ch = b . bind ( ) . sync ( ) . channel ( ) ; </a> 
<a> System . out . println ( <RARE_TOKEN> socket server <RARE_TOKEN> <RARE_TOKEN> port " + port + <RARE_TOKEN> ) ; </a> 
<a> System . out . println ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> to <RARE_TOKEN> + port + <RARE_TOKEN> ) ; </a> 
<a> ch . <RARE_TOKEN> ( ) . sync ( ) ; </a> 
<a> } finally { </a> 
<a> b . shutdown ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public static void <RARE_TOKEN> ( String [ ] args ) throws Exception { </a> 
<a> int port ; </a> 
<a> if ( args . length > 0 ) { </a> 
<a> port = Integer . parseInt ( args [ 0 ] ) ; </a> 
<a> } else { </a> 
<a> port = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> new <RARE_TOKEN> ( port ) . run ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . example . http . websocketx . server ; </a> 
<a> import static io . netty . handler . codec . http . HttpHeaders . * ; </a> 
<a> import static io . netty . handler . codec . http . HttpHeaders . Names . * ; </a> 
<a> import static io . netty . handler . codec . http . HttpMethod . * ; </a> 
<a> import static io . netty . handler . codec . http . HttpResponseStatus . * ; </a> 
<a> import static io . netty . handler . codec . http . HttpVersion . * ; </a> 
<a> import io . netty . buffer . ByteBuf ; </a> 
<a> import io . netty . buffer . Unpooled ; </a> 
<a> import io . netty . channel . ChannelFuture ; </a> 
<a> import io . netty . channel . ChannelFutureListener ; </a> 
<a> import io . netty . channel . ChannelHandlerContext ; </a> 
<a> import io . netty . channel . ChannelInboundMessageHandlerAdapter ; </a> 
<a> import io . netty . handler . codec . http . <RARE_TOKEN> ; </a> 
<a> import io . netty . handler . codec . http . HttpHeaders ; </a> 
<a> import io . netty . handler . codec . http . HttpRequest ; </a> 
<a> import io . netty . handler . codec . http . HttpResponse ; </a> 
<a> import io . netty . handler . codec . http . websocketx . <RARE_TOKEN> ; </a> 
<a> import io . netty . handler . codec . http . websocketx . <RARE_TOKEN> ; </a> 
<a> import io . netty . handler . codec . http . websocketx . <RARE_TOKEN> ; </a> 
<a> import io . netty . handler . codec . http . websocketx . <RARE_TOKEN> ; </a> 
<a> import io . netty . handler . codec . http . websocketx . <RARE_TOKEN> ; </a> 
<a> import io . netty . handler . codec . http . websocketx . <RARE_TOKEN> ; </a> 
<a> import io . netty . handler . codec . http . websocketx . <RARE_TOKEN> ; </a> 
<a> import io . netty . logging . InternalLogger ; </a> 
<a> import io . netty . logging . InternalLoggerFactory ; </a> 
<a> import io . netty . util . CharsetUtil ; </a> 
<a> public class <RARE_TOKEN> extends ChannelInboundMessageHandlerAdapter < Object > { </a> 
<a> private static final InternalLogger logger = InternalLoggerFactory . getInstance ( <RARE_TOKEN> . class ) ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ChannelHandlerContext ctx , Object msg ) throws Exception { </a> 
<a> if ( msg instanceof HttpRequest ) { </a> 
<a> <RARE_TOKEN> ( ctx , ( HttpRequest ) msg ) ; </a> 
<a> } else if ( msg instanceof <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( ctx , ( <RARE_TOKEN> ) msg ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( ChannelHandlerContext ctx , HttpRequest req ) throws Exception { </a> 
<a> if ( req . <RARE_TOKEN> ( ) != GET ) { </a> 
<a> <RARE_TOKEN> ( ctx , req , new <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ) ; </a> 
<a> return ; </a> 
<a> } </a> 
<a> if ( req . <RARE_TOKEN> ( ) . equals ( "/" ) ) { </a> 
<a> HttpResponse res = new <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> ByteBuf content = <RARE_TOKEN> . getContent ( <RARE_TOKEN> ( req ) ) ; </a> 
<a> res . setHeader ( <RARE_TOKEN> , <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( res , content . readableBytes ( ) ) ; </a> 
<a> res . <RARE_TOKEN> ( content ) ; </a> 
<a> <RARE_TOKEN> ( ctx , req , res ) ; </a> 
<a> return ; </a> 
<a> } else if ( req . <RARE_TOKEN> ( ) . equals ( <RARE_TOKEN> ) ) { </a> 
<a> HttpResponse res = new <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( ctx , req , res ) ; </a> 
<a> return ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( </a> 
<a> <RARE_TOKEN> ( req ) , null , false ) ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( req ) ; </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ctx . channel ( ) ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ctx . channel ( ) , req ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( ChannelHandlerContext ctx , <RARE_TOKEN> frame ) { </a> 
<a> if ( frame instanceof <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> . close ( ctx . channel ( ) , ( <RARE_TOKEN> ) frame ) ; </a> 
<a> return ; </a> 
<a> } else if ( frame instanceof <RARE_TOKEN> ) { </a> 
<a> ctx . channel ( ) . write ( new <RARE_TOKEN> ( frame . <RARE_TOKEN> ( ) ) ) ; </a> 
<a> return ; </a> 
<a> } else if ( ! ( frame instanceof <RARE_TOKEN> ) ) { </a> 
<a> throw new UnsupportedOperationException ( String . format ( <RARE_TOKEN> frame <RARE_TOKEN> not <RARE_TOKEN> , frame . getClass ( ) </a> 
<a> . getName ( ) ) ) ; </a> 
<a> } </a> 
<a> String request = ( ( <RARE_TOKEN> ) frame ) . <RARE_TOKEN> ( ) ; </a> 
<a> if ( logger . isDebugEnabled ( ) ) { </a> 
<a> logger . debug ( String . format ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> , ctx . channel ( ) . id ( ) , request ) ) ; </a> 
<a> } </a> 
<a> ctx . channel ( ) . write ( new <RARE_TOKEN> ( request . <RARE_TOKEN> ( ) ) ) ; </a> 
<a> } </a> 
<a> private static void <RARE_TOKEN> ( ChannelHandlerContext ctx , HttpRequest req , HttpResponse res ) { </a> 
<a> if ( res . getStatus ( ) . <RARE_TOKEN> ( ) != 200 ) { </a> 
<a> res . <RARE_TOKEN> ( Unpooled . copiedBuffer ( res . getStatus ( ) . toString ( ) , CharsetUtil . <RARE_TOKEN> ) ) ; </a> 
<a> <RARE_TOKEN> ( res , res . getContent ( ) . readableBytes ( ) ) ; </a> 
<a> } </a> 
<a> ChannelFuture f = ctx . channel ( ) . write ( res ) ; </a> 
<a> if ( ! <RARE_TOKEN> ( req ) || res . getStatus ( ) . <RARE_TOKEN> ( ) != 200 ) { </a> 
<a> f . addListener ( ChannelFutureListener . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void exceptionCaught ( ChannelHandlerContext ctx , Throwable cause ) throws Exception { </a> 
<a> cause . printStackTrace ( ) ; </a> 
<a> ctx . close ( ) ; </a> 
<a> } </a> 
<a> private static String <RARE_TOKEN> ( HttpRequest req ) { </a> 
<a> return <RARE_TOKEN> + req . getHeader ( HttpHeaders . Names . <RARE_TOKEN> ) + <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . example . http . websocketx . server ; </a> 
<a> import io . netty . buffer . ByteBuf ; </a> 
<a> import io . netty . buffer . Unpooled ; </a> 
<a> import io . netty . util . CharsetUtil ; </a> 
<a> public final class <RARE_TOKEN> { </a> 
<a> private static final String NEWLINE = <RARE_TOKEN> ; </a> 
<a> public static ByteBuf getContent ( String <RARE_TOKEN> ) { </a> 
<a> return Unpooled . copiedBuffer ( </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> + NEWLINE + </a> 
<a> <RARE_TOKEN> + NEWLINE + </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> + NEWLINE + </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> + NEWLINE + </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> + NEWLINE + </a> 
<a> " <RARE_TOKEN> = <RARE_TOKEN> + NEWLINE + </a> 
<a> <RARE_TOKEN> + NEWLINE + </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> + NEWLINE + </a> 
<a> " socket = new <RARE_TOKEN> + <RARE_TOKEN> + <RARE_TOKEN> + NEWLINE + </a> 
<a> " <RARE_TOKEN> = <RARE_TOKEN> <RARE_TOKEN> + NEWLINE + </a> 
<a> " <RARE_TOKEN> <RARE_TOKEN> = <RARE_TOKEN> + NEWLINE + </a> 
<a> " <RARE_TOKEN> = <RARE_TOKEN> + <RARE_TOKEN> + <RARE_TOKEN> + NEWLINE + </a> 
<a> " <RARE_TOKEN> + NEWLINE + </a> 
<a> " <RARE_TOKEN> = <RARE_TOKEN> <RARE_TOKEN> + NEWLINE + </a> 
<a> " <RARE_TOKEN> <RARE_TOKEN> = <RARE_TOKEN> + NEWLINE + </a> 
<a> " <RARE_TOKEN> = <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> + NEWLINE + </a> 
<a> " <RARE_TOKEN> + NEWLINE + </a> 
<a> " <RARE_TOKEN> = <RARE_TOKEN> <RARE_TOKEN> + NEWLINE + </a> 
<a> " <RARE_TOKEN> <RARE_TOKEN> = <RARE_TOKEN> + NEWLINE + </a> 
<a> " <RARE_TOKEN> = <RARE_TOKEN> + <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> " + NEWLINE + </a> 
<a> " <RARE_TOKEN> + NEWLINE + </a> 
<a> <RARE_TOKEN> else <RARE_TOKEN> + NEWLINE + </a> 
<a> " <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> not support <RARE_TOKEN> <RARE_TOKEN> + NEWLINE + </a> 
<a> <RARE_TOKEN> + NEWLINE + </a> 
<a> NEWLINE + </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> + NEWLINE + </a> 
<a> " if <RARE_TOKEN> { <RARE_TOKEN> <RARE_TOKEN> + NEWLINE + </a> 
<a> " if <RARE_TOKEN> == <RARE_TOKEN> <RARE_TOKEN> + NEWLINE + </a> 
<a> " <RARE_TOKEN> + NEWLINE + </a> 
<a> " } else <RARE_TOKEN> + NEWLINE + </a> 
<a> " <RARE_TOKEN> socket is not <RARE_TOKEN> + NEWLINE + </a> 
<a> " <RARE_TOKEN> + NEWLINE + </a> 
<a> <RARE_TOKEN> + NEWLINE + </a> 
<a> <RARE_TOKEN> + NEWLINE + </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> + NEWLINE + </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> + </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> + NEWLINE + </a> 
<a> " <RARE_TOKEN> <RARE_TOKEN> + NEWLINE + </a> 
<a> <RARE_TOKEN> + NEWLINE + </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> + NEWLINE + </a> 
<a> <RARE_TOKEN> + NEWLINE + </a> 
<a> <RARE_TOKEN> + NEWLINE + </a> 
<a> <RARE_TOKEN> + NEWLINE , CharsetUtil . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> private <RARE_TOKEN> ( ) { </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . example . http . websocketx . server ; </a> 
<a> import io . netty . channel . ChannelInitializer ; </a> 
<a> import io . netty . channel . ChannelPipeline ; </a> 
<a> import io . netty . channel . socket . SocketChannel ; </a> 
<a> import io . netty . handler . codec . http . <RARE_TOKEN> ; </a> 
<a> import io . netty . handler . codec . http . <RARE_TOKEN> ; </a> 
<a> import io . netty . handler . codec . http . <RARE_TOKEN> ; </a> 
<a> public class <RARE_TOKEN> extends ChannelInitializer < SocketChannel > { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( SocketChannel ch ) throws Exception { </a> 
<a> ChannelPipeline pipeline = ch . pipeline ( ) ; </a> 
<a> pipeline . addLast ( <RARE_TOKEN> , new <RARE_TOKEN> ( ) ) ; </a> 
<a> pipeline . addLast ( <RARE_TOKEN> , new <RARE_TOKEN> ( <RARE_TOKEN> ) ) ; </a> 
<a> pipeline . addLast ( <RARE_TOKEN> , new <RARE_TOKEN> ( ) ) ; </a> 
<a> pipeline . addLast ( <RARE_TOKEN> , new <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . example . http . websocketx . server ; </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . example . http . websocketx . <RARE_TOKEN> ; </a> 
<a> import io . netty . bootstrap . ServerBootstrap ; </a> 
<a> import io . netty . channel . Channel ; </a> 
<a> import io . netty . channel . socket . nio . NioEventLoopGroup ; </a> 
<a> import io . netty . channel . socket . nio . <RARE_TOKEN> ; </a> 
<a> public class <RARE_TOKEN> { </a> 
<a> private final int port ; </a> 
<a> public <RARE_TOKEN> ( int port ) { </a> 
<a> this . port = port ; </a> 
<a> } </a> 
<a> public void run ( ) throws Exception { </a> 
<a> ServerBootstrap b = new ServerBootstrap ( ) ; </a> 
<a> try { </a> 
<a> b . group ( new NioEventLoopGroup ( ) , new NioEventLoopGroup ( ) ) </a> 
<a> . channel ( new <RARE_TOKEN> ( ) ) </a> 
<a> . localAddress ( port ) </a> 
<a> . <RARE_TOKEN> ( new <RARE_TOKEN> ( ) ) ; </a> 
<a> Channel ch = b . bind ( ) . sync ( ) . channel ( ) ; </a> 
<a> System . out . println ( <RARE_TOKEN> socket server <RARE_TOKEN> <RARE_TOKEN> port " + port + <RARE_TOKEN> ) ; </a> 
<a> System . out . println ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> to <RARE_TOKEN> + port + <RARE_TOKEN> ) ; </a> 
<a> ch . <RARE_TOKEN> ( ) . sync ( ) ; </a> 
<a> } finally { </a> 
<a> b . shutdown ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public static void <RARE_TOKEN> ( String [ ] args ) throws Exception { </a> 
<a> int port ; </a> 
<a> if ( args . length > 0 ) { </a> 
<a> port = Integer . parseInt ( args [ 0 ] ) ; </a> 
<a> } else { </a> 
<a> port = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> String <RARE_TOKEN> = System . getProperty ( <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> == null || <RARE_TOKEN> . isEmpty ( ) ) { </a> 
<a> System . out . println ( <RARE_TOKEN> System <RARE_TOKEN> <RARE_TOKEN> not <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> System . <RARE_TOKEN> ( 1 ) ; </a> 
<a> } </a> 
<a> String <RARE_TOKEN> = System . getProperty ( <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> == null || <RARE_TOKEN> . isEmpty ( ) ) { </a> 
<a> System . out . println ( <RARE_TOKEN> System <RARE_TOKEN> <RARE_TOKEN> not <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> System . <RARE_TOKEN> ( 1 ) ; </a> 
<a> } </a> 
<a> new <RARE_TOKEN> ( port ) . run ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . example . http . websocketx . <RARE_TOKEN> ; </a> 
<a> import io . netty . channel . ChannelInitializer ; </a> 
<a> import io . netty . channel . ChannelPipeline ; </a> 
<a> import io . netty . channel . socket . SocketChannel ; </a> 
<a> import io . netty . handler . codec . http . <RARE_TOKEN> ; </a> 
<a> import io . netty . handler . codec . http . <RARE_TOKEN> ; </a> 
<a> import io . netty . handler . codec . http . <RARE_TOKEN> ; </a> 
<a> import io . netty . handler . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import javax . net . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> public class <RARE_TOKEN> extends ChannelInitializer < SocketChannel > { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( SocketChannel ch ) throws Exception { </a> 
<a> ChannelPipeline pipeline = ch . pipeline ( ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = <RARE_TOKEN> . getInstance ( ) . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( false ) ; </a> 
<a> pipeline . addLast ( <RARE_TOKEN> , new <RARE_TOKEN> ( <RARE_TOKEN> ) ) ; </a> 
<a> pipeline . addLast ( <RARE_TOKEN> , new <RARE_TOKEN> ( ) ) ; </a> 
<a> pipeline . addLast ( <RARE_TOKEN> , new <RARE_TOKEN> ( <RARE_TOKEN> ) ) ; </a> 
<a> pipeline . addLast ( <RARE_TOKEN> , new <RARE_TOKEN> ( ) ) ; </a> 
<a> pipeline . addLast ( <RARE_TOKEN> , new <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . example . http . websocketx . <RARE_TOKEN> ; </a> 
<a> import io . netty . logging . InternalLogger ; </a> 
<a> import io . netty . logging . InternalLoggerFactory ; </a> 
<a> import java . io . <RARE_TOKEN> ; </a> 
<a> import java . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import java . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import javax . net . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import javax . net . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> public final class <RARE_TOKEN> { </a> 
<a> private static final InternalLogger logger = InternalLoggerFactory . getInstance ( <RARE_TOKEN> . class ) ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> public static <RARE_TOKEN> getInstance ( ) { </a> 
<a> return <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> private static class <RARE_TOKEN> { </a> 
<a> public static final <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> private <RARE_TOKEN> ( ) { </a> 
<a> try { </a> 
<a> String <RARE_TOKEN> = <RARE_TOKEN> . getProperty ( <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> try { </a> 
<a> String <RARE_TOKEN> = System . getProperty ( <RARE_TOKEN> ) ; </a> 
<a> String <RARE_TOKEN> = System . getProperty ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = <RARE_TOKEN> . getInstance ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = <RARE_TOKEN> . getInstance ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . init ( <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . getInstance ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . init ( <RARE_TOKEN> . <RARE_TOKEN> ( ) , null , null ) ; </a> 
<a> } catch ( Exception e ) { </a> 
<a> throw new Error ( "Failed to <RARE_TOKEN> the <RARE_TOKEN> <RARE_TOKEN> , e ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } catch ( Exception ex ) { </a> 
<a> if ( logger . <RARE_TOKEN> ( ) ) { </a> 
<a> logger . error ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> " + ex . getMessage ( ) , ex ) ; </a> 
<a> } </a> 
<a> System . <RARE_TOKEN> ( 1 ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public <RARE_TOKEN> <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . example . http . websocketx . <RARE_TOKEN> ; </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . example . <RARE_TOKEN> ; </a> 
<a> import io . netty . bootstrap . Bootstrap ; </a> 
<a> import io . netty . bootstrap . ServerBootstrap ; </a> 
<a> import io . netty . channel . Channel ; </a> 
<a> import io . netty . channel . ChannelFuture ; </a> 
<a> import io . netty . channel . ChannelInitializer ; </a> 
<a> import io . netty . channel . <RARE_TOKEN> . LocalAddress ; </a> 
<a> import io . netty . channel . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import io . netty . channel . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import io . netty . channel . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import io . netty . channel . socket . nio . NioEventLoopGroup ; </a> 
<a> import io . netty . handler . logging . <RARE_TOKEN> ; </a> 
<a> import io . netty . handler . logging . <RARE_TOKEN> ; </a> 
<a> import java . io . <RARE_TOKEN> ; </a> 
<a> import java . io . <RARE_TOKEN> ; </a> 
<a> public class <RARE_TOKEN> { </a> 
<a> private final String port ; </a> 
<a> public <RARE_TOKEN> ( String port ) { </a> 
<a> this . port = port ; </a> 
<a> } </a> 
<a> public void run ( ) throws Exception { </a> 
<a> final LocalAddress <RARE_TOKEN> = new LocalAddress ( port ) ; </a> 
<a> Bootstrap cb = new Bootstrap ( ) ; </a> 
<a> ServerBootstrap sb = new ServerBootstrap ( ) ; </a> 
<a> try { </a> 
<a> sb . group ( new <RARE_TOKEN> ( ) ) </a> 
<a> . channel ( new <RARE_TOKEN> ( ) ) </a> 
<a> . localAddress ( <RARE_TOKEN> ) </a> 
<a> . handler ( new ChannelInitializer < <RARE_TOKEN> > ( ) { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( <RARE_TOKEN> ch ) throws Exception { </a> 
<a> ch . pipeline ( ) . addLast ( new <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> } ) </a> 
<a> . <RARE_TOKEN> ( new ChannelInitializer < <RARE_TOKEN> > ( ) { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( <RARE_TOKEN> ch ) throws Exception { </a> 
<a> ch . pipeline ( ) . addLast ( </a> 
<a> new <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ) , </a> 
<a> new <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> cb . group ( new NioEventLoopGroup ( ) ) </a> 
<a> . channel ( new <RARE_TOKEN> ( ) ) </a> 
<a> . remoteAddress ( <RARE_TOKEN> ) </a> 
<a> . handler ( new ChannelInitializer < <RARE_TOKEN> > ( ) { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( <RARE_TOKEN> ch ) throws Exception { </a> 
<a> ch . pipeline ( ) . addLast ( </a> 
<a> new <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ) , </a> 
<a> new <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> sb . bind ( ) . sync ( ) ; </a> 
<a> Channel ch = cb . connect ( ) . sync ( ) . channel ( ) ; </a> 
<a> System . out . println ( <RARE_TOKEN> text <RARE_TOKEN> to <RARE_TOKEN> ) ; </a> 
<a> ChannelFuture <RARE_TOKEN> = null ; </a> 
<a> <RARE_TOKEN> in = new <RARE_TOKEN> ( new <RARE_TOKEN> ( System . in ) ) ; </a> 
<a> for ( ; ; ) { </a> 
<a> String <RARE_TOKEN> = in . <RARE_TOKEN> ( ) ; </a> 
<a> if ( <RARE_TOKEN> == null || <RARE_TOKEN> . equalsIgnoreCase ( <RARE_TOKEN> ) ) { </a> 
<a> break ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> = ch . write ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } finally { </a> 
<a> sb . shutdown ( ) ; </a> 
<a> cb . shutdown ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public static void <RARE_TOKEN> ( String [ ] args ) throws Exception { </a> 
<a> new <RARE_TOKEN> ( <RARE_TOKEN> ) . run ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . example . <RARE_TOKEN> ; </a> 
<a> import io . netty . channel . ChannelHandlerContext ; </a> 
<a> import io . netty . channel . ChannelInboundMessageHandlerAdapter ; </a> 
<a> public class <RARE_TOKEN> extends ChannelInboundMessageHandlerAdapter < String > { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ChannelHandlerContext ctx , String msg ) { </a> 
<a> System . out . println ( msg ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void exceptionCaught ( ChannelHandlerContext ctx , Throwable cause ) { </a> 
<a> cause . printStackTrace ( ) ; </a> 
<a> ctx . close ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . example . <RARE_TOKEN> ; </a> 
<a> import io . netty . channel . ChannelHandlerContext ; </a> 
<a> import io . netty . channel . ChannelInboundMessageHandlerAdapter ; </a> 
<a> public class <RARE_TOKEN> extends ChannelInboundMessageHandlerAdapter < String > { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ChannelHandlerContext ctx , String msg ) { </a> 
<a> ctx . write ( msg ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void exceptionCaught ( ChannelHandlerContext ctx , Throwable cause ) { </a> 
<a> cause . printStackTrace ( ) ; </a> 
<a> ctx . close ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . example . localtime ; </a> 
<a> import io . netty . bootstrap . Bootstrap ; </a> 
<a> import io . netty . channel . Channel ; </a> 
<a> import io . netty . channel . socket . nio . NioEventLoopGroup ; </a> 
<a> import io . netty . channel . socket . nio . <RARE_TOKEN> ; </a> 
<a> import java . util . ArrayList ; </a> 
<a> import java . util . Collection ; </a> 
<a> import java . util . Iterator ; </a> 
<a> import java . util . List ; </a> 
<a> public class <RARE_TOKEN> { </a> 
<a> private final String host ; </a> 
<a> private final int port ; </a> 
<a> private final Collection < String > <RARE_TOKEN> ; </a> 
<a> public <RARE_TOKEN> ( String host , int port , Collection < String > <RARE_TOKEN> ) { </a> 
<a> this . host = host ; </a> 
<a> this . port = port ; </a> 
<a> this . <RARE_TOKEN> = new ArrayList < String > ( ) ; </a> 
<a> this . <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public void run ( ) throws Exception { </a> 
<a> Bootstrap b = new Bootstrap ( ) ; </a> 
<a> try { </a> 
<a> b . group ( new NioEventLoopGroup ( ) ) </a> 
<a> . channel ( new <RARE_TOKEN> ( ) ) </a> 
<a> . remoteAddress ( host , port ) </a> 
<a> . handler ( new <RARE_TOKEN> ( ) ) ; </a> 
<a> Channel ch = b . connect ( ) . sync ( ) . channel ( ) ; </a> 
<a> <RARE_TOKEN> handler = </a> 
<a> ch . pipeline ( ) . get ( <RARE_TOKEN> . class ) ; </a> 
<a> List < String > response = handler . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> ch . close ( ) ; </a> 
<a> Iterator < String > <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> Iterator < String > <RARE_TOKEN> = response . <RARE_TOKEN> ( ) ; </a> 
<a> while ( <RARE_TOKEN> . <RARE_TOKEN> ( ) ) { </a> 
<a> System . out . format ( <RARE_TOKEN> <RARE_TOKEN> , <RARE_TOKEN> . next ( ) , <RARE_TOKEN> . next ( ) ) ; </a> 
<a> } </a> 
<a> } finally { </a> 
<a> b . shutdown ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public static void <RARE_TOKEN> ( String [ ] args ) throws Exception { </a> 
<a> if ( args . length < 3 ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> return ; </a> 
<a> } </a> 
<a> String host = args [ 0 ] ; </a> 
<a> int port = Integer . parseInt ( args [ 1 ] ) ; </a> 
<a> Collection < String > <RARE_TOKEN> = <RARE_TOKEN> ( args , 2 ) ; </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> return ; </a> 
<a> } </a> 
<a> new <RARE_TOKEN> ( host , port , <RARE_TOKEN> ) . run ( ) ; </a> 
<a> } </a> 
<a> private static void <RARE_TOKEN> ( ) { </a> 
<a> System . <RARE_TOKEN> . println ( </a> 
<a> <RARE_TOKEN> " + <RARE_TOKEN> . class . getSimpleName ( ) + </a> 
<a> " <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> System . <RARE_TOKEN> . println ( </a> 
<a> <RARE_TOKEN> " + <RARE_TOKEN> . class . getSimpleName ( ) + </a> 
<a> " <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> private static List < String > <RARE_TOKEN> ( String [ ] args , int offset ) { </a> 
<a> List < String > <RARE_TOKEN> = new ArrayList < String > ( ) ; </a> 
<a> for ( int i = offset ; i < args . length ; i ++ ) { </a> 
<a> if ( ! args [ i ] . <RARE_TOKEN> ( <RARE_TOKEN> ) ) { </a> 
<a> System . <RARE_TOKEN> . println ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> + args [ i ] + <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> return null ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> . add ( args [ i ] . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . example . localtime ; </a> 
<a> import io . netty . channel . Channel ; </a> 
<a> import io . netty . channel . ChannelHandlerContext ; </a> 
<a> import io . netty . channel . ChannelInboundMessageHandlerAdapter ; </a> 
<a> import io . netty . example . localtime . LocalTimeProtocol . <RARE_TOKEN> ; </a> 
<a> import io . netty . example . localtime . LocalTimeProtocol . LocalTime ; </a> 
<a> import io . netty . example . localtime . LocalTimeProtocol . LocalTimes ; </a> 
<a> import io . netty . example . localtime . LocalTimeProtocol . Location ; </a> 
<a> import io . netty . example . localtime . LocalTimeProtocol . Locations ; </a> 
<a> import java . util . ArrayList ; </a> 
<a> import java . util . Collection ; </a> 
<a> import java . util . <RARE_TOKEN> ; </a> 
<a> import java . util . List ; </a> 
<a> import java . util . concurrent . <RARE_TOKEN> ; </a> 
<a> import java . util . concurrent . <RARE_TOKEN> ; </a> 
<a> import java . util . logging . Level ; </a> 
<a> import java . util . logging . Logger ; </a> 
<a> public class <RARE_TOKEN> extends ChannelInboundMessageHandlerAdapter < LocalTimes > { </a> 
<a> private static final Logger logger = Logger . getLogger ( </a> 
<a> <RARE_TOKEN> . class . getName ( ) ) ; </a> 
<a> private volatile Channel channel ; </a> 
<a> private final <RARE_TOKEN> < LocalTimes > <RARE_TOKEN> = new <RARE_TOKEN> < LocalTimes > ( ) ; </a> 
<a> public List < String > <RARE_TOKEN> ( Collection < String > <RARE_TOKEN> ) { </a> 
<a> Locations . Builder builder = Locations . newBuilder ( ) ; </a> 
<a> for ( String c : <RARE_TOKEN> ) { </a> 
<a> String [ ] components = c . split ( "/" ) ; </a> 
<a> builder . <RARE_TOKEN> ( Location . newBuilder ( ) . </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> . valueOf ( components [ 0 ] . <RARE_TOKEN> ( ) ) ) . </a> 
<a> <RARE_TOKEN> ( components [ 1 ] ) . build ( ) ) ; </a> 
<a> } </a> 
<a> channel . write ( builder . build ( ) ) ; </a> 
<a> LocalTimes <RARE_TOKEN> ; </a> 
<a> boolean <RARE_TOKEN> = false ; </a> 
<a> for ( ; ; ) { </a> 
<a> try { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> break ; </a> 
<a> } catch ( InterruptedException e ) { </a> 
<a> <RARE_TOKEN> = true ; </a> 
<a> } </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> ) { </a> 
<a> Thread . currentThread ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> List < String > result = new ArrayList < String > ( ) ; </a> 
<a> for ( LocalTime <RARE_TOKEN> : <RARE_TOKEN> . <RARE_TOKEN> ( ) ) { </a> 
<a> result . add ( </a> 
<a> new <RARE_TOKEN> ( ) . format ( </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) , </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) , </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) , </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) , </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) , </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) , </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) . name ( ) ) . toString ( ) ) ; </a> 
<a> } </a> 
<a> return result ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ChannelHandlerContext ctx ) throws Exception { </a> 
<a> channel = ctx . channel ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ChannelHandlerContext ctx , LocalTimes msg ) throws Exception { </a> 
<a> <RARE_TOKEN> . add ( msg ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void exceptionCaught ( ChannelHandlerContext ctx , Throwable cause ) throws Exception { </a> 
<a> logger . log ( </a> 
<a> Level . <RARE_TOKEN> , </a> 
<a> "Unexpected exception from <RARE_TOKEN> , cause ) ; </a> 
<a> ctx . close ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . example . localtime ; </a> 
<a> import io . netty . channel . ChannelInitializer ; </a> 
<a> import io . netty . channel . ChannelPipeline ; </a> 
<a> import io . netty . channel . socket . SocketChannel ; </a> 
<a> import io . netty . handler . codec . protobuf . <RARE_TOKEN> ; </a> 
<a> import io . netty . handler . codec . protobuf . <RARE_TOKEN> ; </a> 
<a> import io . netty . handler . codec . protobuf . <RARE_TOKEN> ; </a> 
<a> import io . netty . handler . codec . protobuf . <RARE_TOKEN> ; </a> 
<a> public class <RARE_TOKEN> extends ChannelInitializer < SocketChannel > { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( SocketChannel ch ) throws Exception { </a> 
<a> ChannelPipeline p = ch . pipeline ( ) ; </a> 
<a> p . addLast ( <RARE_TOKEN> , new <RARE_TOKEN> ( ) ) ; </a> 
<a> p . addLast ( <RARE_TOKEN> , new <RARE_TOKEN> ( LocalTimeProtocol . LocalTimes . <RARE_TOKEN> ( ) ) ) ; </a> 
<a> p . addLast ( <RARE_TOKEN> , new <RARE_TOKEN> ( ) ) ; </a> 
<a> p . addLast ( <RARE_TOKEN> , new <RARE_TOKEN> ( ) ) ; </a> 
<a> p . addLast ( <RARE_TOKEN> , new <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . example . localtime ; </a> 
<a> @ SuppressWarnings ( <RARE_TOKEN> ) </a> 
<a> public final class LocalTimeProtocol { </a> 
<a> private LocalTimeProtocol ( ) { } </a> 
<a> public static void <RARE_TOKEN> ( </a> 
<a> com . google . protobuf . <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> } </a> 
<a> public enum <RARE_TOKEN> </a> 
<a> implements com . google . protobuf . <RARE_TOKEN> { </a> 
<a> <RARE_TOKEN> ( 0 , 0 ) , </a> 
<a> <RARE_TOKEN> ( 1 , 1 ) , </a> 
<a> <RARE_TOKEN> ( 2 , 2 ) , </a> 
<a> <RARE_TOKEN> ( 3 , 3 ) , </a> 
<a> <RARE_TOKEN> ( 4 , 4 ) , </a> 
<a> <RARE_TOKEN> ( 5 , 5 ) , </a> 
<a> <RARE_TOKEN> ( 6 , 6 ) , </a> 
<a> <RARE_TOKEN> ( 7 , 7 ) , </a> 
<a> <RARE_TOKEN> ( 8 , 8 ) , </a> 
<a> <RARE_TOKEN> ( 9 , 9 ) , </a> 
<a> <RARE_TOKEN> ( 10 , 10 ) , </a> 
<a> ; </a> 
<a> public static final int <RARE_TOKEN> = 0 ; </a> 
<a> public static final int <RARE_TOKEN> = 1 ; </a> 
<a> public static final int <RARE_TOKEN> = 2 ; </a> 
<a> public static final int <RARE_TOKEN> = 3 ; </a> 
<a> public static final int <RARE_TOKEN> = 4 ; </a> 
<a> public static final int <RARE_TOKEN> = 5 ; </a> 
<a> public static final int <RARE_TOKEN> = 6 ; </a> 
<a> public static final int <RARE_TOKEN> = 7 ; </a> 
<a> public static final int <RARE_TOKEN> = 8 ; </a> 
<a> public static final int <RARE_TOKEN> = 9 ; </a> 
<a> public static final int <RARE_TOKEN> = 10 ; </a> 
<a> public final int <RARE_TOKEN> ( ) { return value ; } </a> 
<a> public static <RARE_TOKEN> valueOf ( int value ) { </a> 
<a> switch ( value ) { </a> 
<a> case 0 : return <RARE_TOKEN> ; </a> 
<a> case 1 : return <RARE_TOKEN> ; </a> 
<a> case 2 : return <RARE_TOKEN> ; </a> 
<a> case 3 : return <RARE_TOKEN> ; </a> 
<a> case 4 : return <RARE_TOKEN> ; </a> 
<a> case 5 : return <RARE_TOKEN> ; </a> 
<a> case 6 : return <RARE_TOKEN> ; </a> 
<a> case 7 : return <RARE_TOKEN> ; </a> 
<a> case 8 : return <RARE_TOKEN> ; </a> 
<a> case 9 : return <RARE_TOKEN> ; </a> 
<a> case 10 : return <RARE_TOKEN> ; </a> 
<a> default : return null ; </a> 
<a> } </a> 
<a> } </a> 
<a> public static com . google . protobuf . <RARE_TOKEN> . <RARE_TOKEN> < <RARE_TOKEN> > </a> 
<a> <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> private static com . google . protobuf . <RARE_TOKEN> . <RARE_TOKEN> < <RARE_TOKEN> > </a> 
<a> <RARE_TOKEN> = </a> 
<a> new com . google . protobuf . <RARE_TOKEN> . <RARE_TOKEN> < <RARE_TOKEN> > ( ) { </a> 
<a> public <RARE_TOKEN> <RARE_TOKEN> ( int <RARE_TOKEN> ) { </a> 
<a> return <RARE_TOKEN> . valueOf ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } ; </a> 
<a> public final com . google . protobuf . <RARE_TOKEN> . <RARE_TOKEN> </a> 
<a> <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ( ) . <RARE_TOKEN> ( ) . get ( index ) ; </a> 
<a> } </a> 
<a> public final com . google . protobuf . <RARE_TOKEN> . <RARE_TOKEN> </a> 
<a> <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> public static final com . google . protobuf . <RARE_TOKEN> . <RARE_TOKEN> </a> 
<a> <RARE_TOKEN> ( ) { </a> 
<a> return io . netty . example . localtime . LocalTimeProtocol . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( ) . get ( 0 ) ; </a> 
<a> } </a> 
<a> private static final <RARE_TOKEN> [ ] <RARE_TOKEN> = { </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> } ; </a> 
<a> public static <RARE_TOKEN> valueOf ( </a> 
<a> com . google . protobuf . <RARE_TOKEN> . <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> if ( <RARE_TOKEN> . getType ( ) != <RARE_TOKEN> ( ) ) { </a> 
<a> throw new java . lang . IllegalArgumentException ( </a> 
<a> <RARE_TOKEN> is not for this <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> return <RARE_TOKEN> [ <RARE_TOKEN> . <RARE_TOKEN> ( ) ] ; </a> 
<a> } </a> 
<a> private final int index ; </a> 
<a> private final int value ; </a> 
<a> private <RARE_TOKEN> ( int index , int value ) { </a> 
<a> this . index = index ; </a> 
<a> this . value = value ; </a> 
<a> } </a> 
<a> } </a> 
<a> public enum <RARE_TOKEN> </a> 
<a> implements com . google . protobuf . <RARE_TOKEN> { </a> 
<a> <RARE_TOKEN> ( 0 , 1 ) , </a> 
<a> <RARE_TOKEN> ( 1 , 2 ) , </a> 
<a> <RARE_TOKEN> ( 2 , 3 ) , </a> 
<a> <RARE_TOKEN> ( 3 , 4 ) , </a> 
<a> <RARE_TOKEN> ( 4 , 5 ) , </a> 
<a> <RARE_TOKEN> ( 5 , 6 ) , </a> 
<a> <RARE_TOKEN> ( 6 , 7 ) , </a> 
<a> ; </a> 
<a> public static final int <RARE_TOKEN> = 1 ; </a> 
<a> public static final int <RARE_TOKEN> = 2 ; </a> 
<a> public static final int <RARE_TOKEN> = 3 ; </a> 
<a> public static final int <RARE_TOKEN> = 4 ; </a> 
<a> public static final int <RARE_TOKEN> = 5 ; </a> 
<a> public static final int <RARE_TOKEN> = 6 ; </a> 
<a> public static final int <RARE_TOKEN> = 7 ; </a> 
<a> public final int <RARE_TOKEN> ( ) { return value ; } </a> 
<a> public static <RARE_TOKEN> valueOf ( int value ) { </a> 
<a> switch ( value ) { </a> 
<a> case 1 : return <RARE_TOKEN> ; </a> 
<a> case 2 : return <RARE_TOKEN> ; </a> 
<a> case 3 : return <RARE_TOKEN> ; </a> 
<a> case 4 : return <RARE_TOKEN> ; </a> 
<a> case 5 : return <RARE_TOKEN> ; </a> 
<a> case 6 : return <RARE_TOKEN> ; </a> 
<a> case 7 : return <RARE_TOKEN> ; </a> 
<a> default : return null ; </a> 
<a> } </a> 
<a> } </a> 
<a> public static com . google . protobuf . <RARE_TOKEN> . <RARE_TOKEN> < <RARE_TOKEN> > </a> 
<a> <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> private static com . google . protobuf . <RARE_TOKEN> . <RARE_TOKEN> < <RARE_TOKEN> > </a> 
<a> <RARE_TOKEN> = </a> 
<a> new com . google . protobuf . <RARE_TOKEN> . <RARE_TOKEN> < <RARE_TOKEN> > ( ) { </a> 
<a> public <RARE_TOKEN> <RARE_TOKEN> ( int <RARE_TOKEN> ) { </a> 
<a> return <RARE_TOKEN> . valueOf ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } ; </a> 
<a> public final com . google . protobuf . <RARE_TOKEN> . <RARE_TOKEN> </a> 
<a> <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ( ) . <RARE_TOKEN> ( ) . get ( index ) ; </a> 
<a> } </a> 
<a> public final com . google . protobuf . <RARE_TOKEN> . <RARE_TOKEN> </a> 
<a> <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> public static final com . google . protobuf . <RARE_TOKEN> . <RARE_TOKEN> </a> 
<a> <RARE_TOKEN> ( ) { </a> 
<a> return io . netty . example . localtime . LocalTimeProtocol . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( ) . get ( 1 ) ; </a> 
<a> } </a> 
<a> private static final <RARE_TOKEN> [ ] <RARE_TOKEN> = { </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> } ; </a> 
<a> public static <RARE_TOKEN> valueOf ( </a> 
<a> com . google . protobuf . <RARE_TOKEN> . <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> if ( <RARE_TOKEN> . getType ( ) != <RARE_TOKEN> ( ) ) { </a> 
<a> throw new java . lang . IllegalArgumentException ( </a> 
<a> <RARE_TOKEN> is not for this <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> return <RARE_TOKEN> [ <RARE_TOKEN> . <RARE_TOKEN> ( ) ] ; </a> 
<a> } </a> 
<a> private final int index ; </a> 
<a> private final int value ; </a> 
<a> private <RARE_TOKEN> ( int index , int value ) { </a> 
<a> this . index = index ; </a> 
<a> this . value = value ; </a> 
<a> } </a> 
<a> } </a> 
<a> public interface <RARE_TOKEN> </a> 
<a> extends com . google . protobuf . <RARE_TOKEN> { </a> 
<a> boolean <RARE_TOKEN> ( ) ; </a> 
<a> io . netty . example . localtime . LocalTimeProtocol . <RARE_TOKEN> <RARE_TOKEN> ( ) ; </a> 
<a> boolean <RARE_TOKEN> ( ) ; </a> 
<a> String <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> public static final class Location extends </a> 
<a> com . google . protobuf . <RARE_TOKEN> </a> 
<a> implements <RARE_TOKEN> { </a> 
<a> private Location ( Builder builder ) { </a> 
<a> super ( builder ) ; </a> 
<a> } </a> 
<a> private Location ( boolean <RARE_TOKEN> ) { } </a> 
<a> private static final Location <RARE_TOKEN> ; </a> 
<a> public static Location <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public Location <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public static final com . google . protobuf . <RARE_TOKEN> . <RARE_TOKEN> </a> 
<a> <RARE_TOKEN> ( ) { </a> 
<a> return io . netty . example . localtime . LocalTimeProtocol . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> protected com . google . protobuf . <RARE_TOKEN> . <RARE_TOKEN> </a> 
<a> <RARE_TOKEN> ( ) { </a> 
<a> return io . netty . example . localtime . LocalTimeProtocol . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> private int bitField0_ ; </a> 
<a> public static final int <RARE_TOKEN> = 1 ; </a> 
<a> private io . netty . example . localtime . LocalTimeProtocol . <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return ( bitField0_ & 0x00000001 ) == 0x00000001 ; </a> 
<a> } </a> 
<a> public io . netty . example . localtime . LocalTimeProtocol . <RARE_TOKEN> <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public static final int <RARE_TOKEN> = 2 ; </a> 
<a> private java . lang . Object <RARE_TOKEN> ; </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return ( bitField0_ & <RARE_TOKEN> ) == <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public String <RARE_TOKEN> ( ) { </a> 
<a> java . lang . Object <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> if ( <RARE_TOKEN> instanceof String ) { </a> 
<a> return ( String ) <RARE_TOKEN> ; </a> 
<a> } else { </a> 
<a> com . google . protobuf . <RARE_TOKEN> <RARE_TOKEN> = </a> 
<a> ( com . google . protobuf . <RARE_TOKEN> ) <RARE_TOKEN> ; </a> 
<a> String s = <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> if ( com . google . protobuf . <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ) { </a> 
<a> <RARE_TOKEN> = s ; </a> 
<a> } </a> 
<a> return s ; </a> 
<a> } </a> 
<a> } </a> 
<a> private com . google . protobuf . <RARE_TOKEN> <RARE_TOKEN> ( ) { </a> 
<a> java . lang . Object <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> if ( <RARE_TOKEN> instanceof String ) { </a> 
<a> com . google . protobuf . <RARE_TOKEN> b = </a> 
<a> com . google . protobuf . <RARE_TOKEN> . <RARE_TOKEN> ( ( String ) <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = b ; </a> 
<a> return b ; </a> 
<a> } else { </a> 
<a> return ( com . google . protobuf . <RARE_TOKEN> ) <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> = io . netty . example . localtime . LocalTimeProtocol . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = "" ; </a> 
<a> } </a> 
<a> private byte <RARE_TOKEN> = - 1 ; </a> 
<a> public final boolean <RARE_TOKEN> ( ) { </a> 
<a> byte <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> if ( <RARE_TOKEN> != - 1 ) { </a> 
<a> return <RARE_TOKEN> == 1 ; </a> 
<a> } </a> 
<a> if ( ! <RARE_TOKEN> ( ) ) { </a> 
<a> <RARE_TOKEN> = 0 ; </a> 
<a> return false ; </a> 
<a> } </a> 
<a> if ( ! <RARE_TOKEN> ( ) ) { </a> 
<a> <RARE_TOKEN> = 0 ; </a> 
<a> return false ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> = 1 ; </a> 
<a> return true ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( com . google . protobuf . <RARE_TOKEN> output ) </a> 
<a> throws java . io . IOException { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> if ( ( bitField0_ & 0x00000001 ) == 0x00000001 ) { </a> 
<a> output . <RARE_TOKEN> ( 1 , <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> if ( ( bitField0_ & <RARE_TOKEN> ) == <RARE_TOKEN> ) { </a> 
<a> output . writeBytes ( 2 , <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( ) . <RARE_TOKEN> ( output ) ; </a> 
<a> } </a> 
<a> private int <RARE_TOKEN> = - 1 ; </a> 
<a> public int <RARE_TOKEN> ( ) { </a> 
<a> int size = <RARE_TOKEN> ; </a> 
<a> if ( size != - 1 ) { </a> 
<a> return size ; </a> 
<a> } </a> 
<a> size = 0 ; </a> 
<a> if ( ( bitField0_ & 0x00000001 ) == 0x00000001 ) { </a> 
<a> size += com . google . protobuf . <RARE_TOKEN> </a> 
<a> . <RARE_TOKEN> ( 1 , <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> if ( ( bitField0_ & <RARE_TOKEN> ) == <RARE_TOKEN> ) { </a> 
<a> size += com . google . protobuf . <RARE_TOKEN> </a> 
<a> . <RARE_TOKEN> ( 2 , <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> size += <RARE_TOKEN> ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> = size ; </a> 
<a> return size ; </a> 
<a> } </a> 
<a> private static final long serialVersionUID = <RARE_TOKEN> ; </a> 
<a> @ java . lang . Override </a> 
<a> protected java . lang . Object <RARE_TOKEN> ( ) </a> 
<a> throws java . io . <RARE_TOKEN> { </a> 
<a> return super . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> public static io . netty . example . localtime . LocalTimeProtocol . Location <RARE_TOKEN> ( </a> 
<a> com . google . protobuf . <RARE_TOKEN> data ) </a> 
<a> throws com . google . protobuf . <RARE_TOKEN> { </a> 
<a> return newBuilder ( ) . mergeFrom ( data ) . buildParsed ( ) ; </a> 
<a> } </a> 
<a> public static io . netty . example . localtime . LocalTimeProtocol . Location <RARE_TOKEN> ( </a> 
<a> com . google . protobuf . <RARE_TOKEN> data , </a> 
<a> com . google . protobuf . <RARE_TOKEN> extensionRegistry ) </a> 
<a> throws com . google . protobuf . <RARE_TOKEN> { </a> 
<a> return newBuilder ( ) . mergeFrom ( data , extensionRegistry ) </a> 
<a> . buildParsed ( ) ; </a> 
<a> } </a> 
<a> public static io . netty . example . localtime . LocalTimeProtocol . Location <RARE_TOKEN> ( byte [ ] data ) </a> 
<a> throws com . google . protobuf . <RARE_TOKEN> { </a> 
<a> return newBuilder ( ) . mergeFrom ( data ) . buildParsed ( ) ; </a> 
<a> } </a> 
<a> public static io . netty . example . localtime . LocalTimeProtocol . Location <RARE_TOKEN> ( </a> 
<a> byte [ ] data , </a> 
<a> com . google . protobuf . <RARE_TOKEN> extensionRegistry ) </a> 
<a> throws com . google . protobuf . <RARE_TOKEN> { </a> 
<a> return newBuilder ( ) . mergeFrom ( data , extensionRegistry ) </a> 
<a> . buildParsed ( ) ; </a> 
<a> } </a> 
<a> public static io . netty . example . localtime . LocalTimeProtocol . Location <RARE_TOKEN> ( java . io . InputStream input ) </a> 
<a> throws java . io . IOException { </a> 
<a> return newBuilder ( ) . mergeFrom ( input ) . buildParsed ( ) ; </a> 
<a> } </a> 
<a> public static io . netty . example . localtime . LocalTimeProtocol . Location <RARE_TOKEN> ( </a> 
<a> java . io . InputStream input , </a> 
<a> com . google . protobuf . <RARE_TOKEN> extensionRegistry ) </a> 
<a> throws java . io . IOException { </a> 
<a> return newBuilder ( ) . mergeFrom ( input , extensionRegistry ) </a> 
<a> . buildParsed ( ) ; </a> 
<a> } </a> 
<a> public static io . netty . example . localtime . LocalTimeProtocol . Location <RARE_TOKEN> ( java . io . InputStream input ) </a> 
<a> throws java . io . IOException { </a> 
<a> Builder builder = newBuilder ( ) ; </a> 
<a> if ( builder . <RARE_TOKEN> ( input ) ) { </a> 
<a> return builder . buildParsed ( ) ; </a> 
<a> } else { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> } </a> 
<a> public static io . netty . example . localtime . LocalTimeProtocol . Location <RARE_TOKEN> ( </a> 
<a> java . io . InputStream input , </a> 
<a> com . google . protobuf . <RARE_TOKEN> extensionRegistry ) </a> 
<a> throws java . io . IOException { </a> 
<a> Builder builder = newBuilder ( ) ; </a> 
<a> if ( builder . <RARE_TOKEN> ( input , extensionRegistry ) ) { </a> 
<a> return builder . buildParsed ( ) ; </a> 
<a> } else { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> } </a> 
<a> public static io . netty . example . localtime . LocalTimeProtocol . Location <RARE_TOKEN> ( </a> 
<a> com . google . protobuf . <RARE_TOKEN> input ) </a> 
<a> throws java . io . IOException { </a> 
<a> return newBuilder ( ) . mergeFrom ( input ) . buildParsed ( ) ; </a> 
<a> } </a> 
<a> public static io . netty . example . localtime . LocalTimeProtocol . Location <RARE_TOKEN> ( </a> 
<a> com . google . protobuf . <RARE_TOKEN> input , </a> 
<a> com . google . protobuf . <RARE_TOKEN> extensionRegistry ) </a> 
<a> throws java . io . IOException { </a> 
<a> return newBuilder ( ) . mergeFrom ( input , extensionRegistry ) </a> 
<a> . buildParsed ( ) ; </a> 
<a> } </a> 
<a> public static Builder newBuilder ( ) { return Builder . create ( ) ; } </a> 
<a> public Builder <RARE_TOKEN> ( ) { return newBuilder ( ) ; } </a> 
<a> public static Builder newBuilder ( io . netty . example . localtime . LocalTimeProtocol . Location <RARE_TOKEN> ) { </a> 
<a> return newBuilder ( ) . mergeFrom ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public Builder <RARE_TOKEN> ( ) { return newBuilder ( this ) ; } </a> 
<a> @ java . lang . Override </a> 
<a> protected Builder <RARE_TOKEN> ( </a> 
<a> com . google . protobuf . <RARE_TOKEN> . <RARE_TOKEN> parent ) { </a> 
<a> Builder builder = new Builder ( parent ) ; </a> 
<a> return builder ; </a> 
<a> } </a> 
<a> public static final class Builder extends </a> 
<a> com . google . protobuf . <RARE_TOKEN> . Builder < Builder > </a> 
<a> implements io . netty . example . localtime . LocalTimeProtocol . <RARE_TOKEN> { </a> 
<a> public static final com . google . protobuf . <RARE_TOKEN> . <RARE_TOKEN> </a> 
<a> <RARE_TOKEN> ( ) { </a> 
<a> return io . netty . example . localtime . LocalTimeProtocol . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> protected com . google . protobuf . <RARE_TOKEN> . <RARE_TOKEN> </a> 
<a> <RARE_TOKEN> ( ) { </a> 
<a> return io . netty . example . localtime . LocalTimeProtocol . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> private Builder ( ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> private Builder ( <RARE_TOKEN> parent ) { </a> 
<a> super ( parent ) ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( ) { </a> 
<a> if ( com . google . protobuf . <RARE_TOKEN> . <RARE_TOKEN> ) { </a> 
<a> } </a> 
<a> } </a> 
<a> private static Builder create ( ) { </a> 
<a> return new Builder ( ) ; </a> 
<a> } </a> 
<a> public Builder clear ( ) { </a> 
<a> super . clear ( ) ; </a> 
<a> <RARE_TOKEN> = io . netty . example . localtime . LocalTimeProtocol . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> bitField0_ = bitField0_ & ~ 0x00000001 ; </a> 
<a> <RARE_TOKEN> = "" ; </a> 
<a> bitField0_ = bitField0_ & ~ <RARE_TOKEN> ; </a> 
<a> return this ; </a> 
<a> } </a> 
<a> public Builder <RARE_TOKEN> ( ) { </a> 
<a> return create ( ) . mergeFrom ( <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> public com . google . protobuf . <RARE_TOKEN> . <RARE_TOKEN> </a> 
<a> <RARE_TOKEN> ( ) { </a> 
<a> return io . netty . example . localtime . LocalTimeProtocol . Location . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> public io . netty . example . localtime . LocalTimeProtocol . Location <RARE_TOKEN> ( ) { </a> 
<a> return io . netty . example . localtime . LocalTimeProtocol . Location . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> public io . netty . example . localtime . LocalTimeProtocol . Location build ( ) { </a> 
<a> io . netty . example . localtime . LocalTimeProtocol . Location result = <RARE_TOKEN> ( ) ; </a> 
<a> if ( ! result . <RARE_TOKEN> ( ) ) { </a> 
<a> throw <RARE_TOKEN> ( result ) ; </a> 
<a> } </a> 
<a> return result ; </a> 
<a> } </a> 
<a> private io . netty . example . localtime . LocalTimeProtocol . Location buildParsed ( ) </a> 
<a> throws com . google . protobuf . <RARE_TOKEN> { </a> 
<a> io . netty . example . localtime . LocalTimeProtocol . Location result = <RARE_TOKEN> ( ) ; </a> 
<a> if ( ! result . <RARE_TOKEN> ( ) ) { </a> 
<a> throw <RARE_TOKEN> ( </a> 
<a> result ) . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> return result ; </a> 
<a> } </a> 
<a> public io . netty . example . localtime . LocalTimeProtocol . Location <RARE_TOKEN> ( ) { </a> 
<a> io . netty . example . localtime . LocalTimeProtocol . Location result = new io . netty . example . localtime . LocalTimeProtocol . Location ( this ) ; </a> 
<a> int <RARE_TOKEN> = bitField0_ ; </a> 
<a> int <RARE_TOKEN> = 0 ; </a> 
<a> if ( ( <RARE_TOKEN> & 0x00000001 ) == 0x00000001 ) { </a> 
<a> <RARE_TOKEN> |= 0x00000001 ; </a> 
<a> } </a> 
<a> result . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> if ( ( <RARE_TOKEN> & <RARE_TOKEN> ) == <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> |= <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> result . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> result . bitField0_ = <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> return result ; </a> 
<a> } </a> 
<a> public Builder mergeFrom ( com . google . protobuf . <RARE_TOKEN> other ) { </a> 
<a> if ( other instanceof io . netty . example . localtime . LocalTimeProtocol . Location ) { </a> 
<a> return mergeFrom ( ( io . netty . example . localtime . LocalTimeProtocol . Location ) other ) ; </a> 
<a> } else { </a> 
<a> super . mergeFrom ( other ) ; </a> 
<a> return this ; </a> 
<a> } </a> 
<a> } </a> 
<a> public Builder mergeFrom ( io . netty . example . localtime . LocalTimeProtocol . Location other ) { </a> 
<a> if ( other == io . netty . example . localtime . LocalTimeProtocol . Location . <RARE_TOKEN> ( ) ) { </a> 
<a> return this ; </a> 
<a> } </a> 
<a> if ( other . <RARE_TOKEN> ( ) ) { </a> 
<a> <RARE_TOKEN> ( other . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> if ( other . <RARE_TOKEN> ( ) ) { </a> 
<a> <RARE_TOKEN> ( other . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( other . <RARE_TOKEN> ( ) ) ; </a> 
<a> return this ; </a> 
<a> } </a> 
<a> public final boolean <RARE_TOKEN> ( ) { </a> 
<a> if ( ! <RARE_TOKEN> ( ) ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> if ( ! <RARE_TOKEN> ( ) ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> return true ; </a> 
<a> } </a> 
<a> public Builder mergeFrom ( </a> 
<a> com . google . protobuf . <RARE_TOKEN> input , </a> 
<a> com . google . protobuf . <RARE_TOKEN> extensionRegistry ) </a> 
<a> throws java . io . IOException { </a> 
<a> com . google . protobuf . <RARE_TOKEN> . Builder <RARE_TOKEN> = </a> 
<a> com . google . protobuf . <RARE_TOKEN> . newBuilder ( </a> 
<a> <RARE_TOKEN> ( ) ) ; </a> 
<a> while ( true ) { </a> 
<a> int <RARE_TOKEN> = input . <RARE_TOKEN> ( ) ; </a> 
<a> switch ( <RARE_TOKEN> ) { </a> 
<a> case 0 : </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> . build ( ) ) ; </a> 
<a> onChanged ( ) ; </a> 
<a> return this ; </a> 
<a> default : { </a> 
<a> if ( ! <RARE_TOKEN> ( input , <RARE_TOKEN> , </a> 
<a> extensionRegistry , <RARE_TOKEN> ) ) { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> . build ( ) ) ; </a> 
<a> onChanged ( ) ; </a> 
<a> return this ; </a> 
<a> } </a> 
<a> break ; </a> 
<a> } </a> 
<a> case 8 : { </a> 
<a> int <RARE_TOKEN> = input . <RARE_TOKEN> ( ) ; </a> 
<a> io . netty . example . localtime . LocalTimeProtocol . <RARE_TOKEN> value = io . netty . example . localtime . LocalTimeProtocol . <RARE_TOKEN> . valueOf ( <RARE_TOKEN> ) ; </a> 
<a> if ( value == null ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( 1 , <RARE_TOKEN> ) ; </a> 
<a> } else { </a> 
<a> bitField0_ |= 0x00000001 ; </a> 
<a> <RARE_TOKEN> = value ; </a> 
<a> } </a> 
<a> break ; </a> 
<a> } </a> 
<a> case <RARE_TOKEN> : { </a> 
<a> bitField0_ |= <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = input . readBytes ( ) ; </a> 
<a> break ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> private int bitField0_ ; </a> 
<a> private io . netty . example . localtime . LocalTimeProtocol . <RARE_TOKEN> <RARE_TOKEN> = io . netty . example . localtime . LocalTimeProtocol . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return ( bitField0_ & 0x00000001 ) == 0x00000001 ; </a> 
<a> } </a> 
<a> public io . netty . example . localtime . LocalTimeProtocol . <RARE_TOKEN> <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public Builder <RARE_TOKEN> ( io . netty . example . localtime . LocalTimeProtocol . <RARE_TOKEN> value ) { </a> 
<a> if ( value == null ) { </a> 
<a> throw new NullPointerException ( ) ; </a> 
<a> } </a> 
<a> bitField0_ |= 0x00000001 ; </a> 
<a> <RARE_TOKEN> = value ; </a> 
<a> onChanged ( ) ; </a> 
<a> return this ; </a> 
<a> } </a> 
<a> public Builder <RARE_TOKEN> ( ) { </a> 
<a> bitField0_ = bitField0_ & ~ 0x00000001 ; </a> 
<a> <RARE_TOKEN> = io . netty . example . localtime . LocalTimeProtocol . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> onChanged ( ) ; </a> 
<a> return this ; </a> 
<a> } </a> 
<a> private java . lang . Object <RARE_TOKEN> = "" ; </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return ( bitField0_ & <RARE_TOKEN> ) == <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public String <RARE_TOKEN> ( ) { </a> 
<a> java . lang . Object <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> if ( ! ( <RARE_TOKEN> instanceof String ) ) { </a> 
<a> String s = ( ( com . google . protobuf . <RARE_TOKEN> ) <RARE_TOKEN> ) . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> = s ; </a> 
<a> return s ; </a> 
<a> } else { </a> 
<a> return ( String ) <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<a> public Builder <RARE_TOKEN> ( String value ) { </a> 
<a> if ( value == null ) { </a> 
<a> throw new NullPointerException ( ) ; </a> 
<a> } </a> 
<a> bitField0_ |= <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = value ; </a> 
<a> onChanged ( ) ; </a> 
<a> return this ; </a> 
<a> } </a> 
<a> public Builder <RARE_TOKEN> ( ) { </a> 
<a> bitField0_ = bitField0_ & ~ <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> onChanged ( ) ; </a> 
<a> return this ; </a> 
<a> } </a> 
<a> void <RARE_TOKEN> ( com . google . protobuf . <RARE_TOKEN> value ) { </a> 
<a> bitField0_ |= <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = value ; </a> 
<a> onChanged ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> static { </a> 
<a> <RARE_TOKEN> = new Location ( true ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public interface <RARE_TOKEN> </a> 
<a> extends com . google . protobuf . <RARE_TOKEN> { </a> 
<a> java . util . List < io . netty . example . localtime . LocalTimeProtocol . Location > </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> io . netty . example . localtime . LocalTimeProtocol . Location <RARE_TOKEN> ( int index ) ; </a> 
<a> int <RARE_TOKEN> ( ) ; </a> 
<a> java . util . List < ? extends io . netty . example . localtime . LocalTimeProtocol . <RARE_TOKEN> > </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> io . netty . example . localtime . LocalTimeProtocol . <RARE_TOKEN> <RARE_TOKEN> ( </a> 
<a> int index ) ; </a> 
<a> } </a> 
<a> public static final class Locations extends </a> 
<a> com . google . protobuf . <RARE_TOKEN> </a> 
<a> implements <RARE_TOKEN> { </a> 
<a> private Locations ( Builder builder ) { </a> 
<a> super ( builder ) ; </a> 
<a> } </a> 
<a> private Locations ( boolean <RARE_TOKEN> ) { } </a> 
<a> private static final Locations <RARE_TOKEN> ; </a> 
<a> public static Locations <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public Locations <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public static final com . google . protobuf . <RARE_TOKEN> . <RARE_TOKEN> </a> 
<a> <RARE_TOKEN> ( ) { </a> 
<a> return io . netty . example . localtime . LocalTimeProtocol . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> protected com . google . protobuf . <RARE_TOKEN> . <RARE_TOKEN> </a> 
<a> <RARE_TOKEN> ( ) { </a> 
<a> return io . netty . example . localtime . LocalTimeProtocol . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public static final int <RARE_TOKEN> = 1 ; </a> 
<a> private java . util . List < io . netty . example . localtime . LocalTimeProtocol . Location > location_ ; </a> 
<a> public java . util . List < io . netty . example . localtime . LocalTimeProtocol . Location > <RARE_TOKEN> ( ) { </a> 
<a> return location_ ; </a> 
<a> } </a> 
<a> public java . util . List < ? extends io . netty . example . localtime . LocalTimeProtocol . <RARE_TOKEN> > </a> 
<a> <RARE_TOKEN> ( ) { </a> 
<a> return location_ ; </a> 
<a> } </a> 
<a> public int <RARE_TOKEN> ( ) { </a> 
<a> return location_ . size ( ) ; </a> 
<a> } </a> 
<a> public io . netty . example . localtime . LocalTimeProtocol . Location <RARE_TOKEN> ( int index ) { </a> 
<a> return location_ . get ( index ) ; </a> 
<a> } </a> 
<a> public io . netty . example . localtime . LocalTimeProtocol . <RARE_TOKEN> <RARE_TOKEN> ( </a> 
<a> int index ) { </a> 
<a> return location_ . get ( index ) ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( ) { </a> 
<a> location_ = java . util . Collections . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> private byte <RARE_TOKEN> = - 1 ; </a> 
<a> public final boolean <RARE_TOKEN> ( ) { </a> 
<a> byte <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> if ( <RARE_TOKEN> != - 1 ) { </a> 
<a> return <RARE_TOKEN> == 1 ; </a> 
<a> } </a> 
<a> for ( int i = 0 ; i < <RARE_TOKEN> ( ) ; i ++ ) { </a> 
<a> if ( ! <RARE_TOKEN> ( i ) . <RARE_TOKEN> ( ) ) { </a> 
<a> <RARE_TOKEN> = 0 ; </a> 
<a> return false ; </a> 
<a> } </a> 
<a> } </a> 
<a> <RARE_TOKEN> = 1 ; </a> 
<a> return true ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( com . google . protobuf . <RARE_TOKEN> output ) </a> 
<a> throws java . io . IOException { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> for ( int i = 0 ; i < location_ . size ( ) ; i ++ ) { </a> 
<a> output . <RARE_TOKEN> ( 1 , location_ . get ( i ) ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( ) . <RARE_TOKEN> ( output ) ; </a> 
<a> } </a> 
<a> private int <RARE_TOKEN> = - 1 ; </a> 
<a> public int <RARE_TOKEN> ( ) { </a> 
<a> int size = <RARE_TOKEN> ; </a> 
<a> if ( size != - 1 ) { </a> 
<a> return size ; </a> 
<a> } </a> 
<a> size = 0 ; </a> 
<a> for ( int i = 0 ; i < location_ . size ( ) ; i ++ ) { </a> 
<a> size += com . google . protobuf . <RARE_TOKEN> </a> 
<a> . <RARE_TOKEN> ( 1 , location_ . get ( i ) ) ; </a> 
<a> } </a> 
<a> size += <RARE_TOKEN> ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> = size ; </a> 
<a> return size ; </a> 
<a> } </a> 
<a> private static final long serialVersionUID = <RARE_TOKEN> ; </a> 
<a> @ java . lang . Override </a> 
<a> protected java . lang . Object <RARE_TOKEN> ( ) </a> 
<a> throws java . io . <RARE_TOKEN> { </a> 
<a> return super . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> public static io . netty . example . localtime . LocalTimeProtocol . Locations <RARE_TOKEN> ( </a> 
<a> com . google . protobuf . <RARE_TOKEN> data ) </a> 
<a> throws com . google . protobuf . <RARE_TOKEN> { </a> 
<a> return newBuilder ( ) . mergeFrom ( data ) . buildParsed ( ) ; </a> 
<a> } </a> 
<a> public static io . netty . example . localtime . LocalTimeProtocol . Locations <RARE_TOKEN> ( </a> 
<a> com . google . protobuf . <RARE_TOKEN> data , </a> 
<a> com . google . protobuf . <RARE_TOKEN> extensionRegistry ) </a> 
<a> throws com . google . protobuf . <RARE_TOKEN> { </a> 
<a> return newBuilder ( ) . mergeFrom ( data , extensionRegistry ) </a> 
<a> . buildParsed ( ) ; </a> 
<a> } </a> 
<a> public static io . netty . example . localtime . LocalTimeProtocol . Locations <RARE_TOKEN> ( byte [ ] data ) </a> 
<a> throws com . google . protobuf . <RARE_TOKEN> { </a> 
<a> return newBuilder ( ) . mergeFrom ( data ) . buildParsed ( ) ; </a> 
<a> } </a> 
<a> public static io . netty . example . localtime . LocalTimeProtocol . Locations <RARE_TOKEN> ( </a> 
<a> byte [ ] data , </a> 
<a> com . google . protobuf . <RARE_TOKEN> extensionRegistry ) </a> 
<a> throws com . google . protobuf . <RARE_TOKEN> { </a> 
<a> return newBuilder ( ) . mergeFrom ( data , extensionRegistry ) </a> 
<a> . buildParsed ( ) ; </a> 
<a> } </a> 
<a> public static io . netty . example . localtime . LocalTimeProtocol . Locations <RARE_TOKEN> ( java . io . InputStream input ) </a> 
<a> throws java . io . IOException { </a> 
<a> return newBuilder ( ) . mergeFrom ( input ) . buildParsed ( ) ; </a> 
<a> } </a> 
<a> public static io . netty . example . localtime . LocalTimeProtocol . Locations <RARE_TOKEN> ( </a> 
<a> java . io . InputStream input , </a> 
<a> com . google . protobuf . <RARE_TOKEN> extensionRegistry ) </a> 
<a> throws java . io . IOException { </a> 
<a> return newBuilder ( ) . mergeFrom ( input , extensionRegistry ) </a> 
<a> . buildParsed ( ) ; </a> 
<a> } </a> 
<a> public static io . netty . example . localtime . LocalTimeProtocol . Locations <RARE_TOKEN> ( java . io . InputStream input ) </a> 
<a> throws java . io . IOException { </a> 
<a> Builder builder = newBuilder ( ) ; </a> 
<a> if ( builder . <RARE_TOKEN> ( input ) ) { </a> 
<a> return builder . buildParsed ( ) ; </a> 
<a> } else { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> } </a> 
<a> public static io . netty . example . localtime . LocalTimeProtocol . Locations <RARE_TOKEN> ( </a> 
<a> java . io . InputStream input , </a> 
<a> com . google . protobuf . <RARE_TOKEN> extensionRegistry ) </a> 
<a> throws java . io . IOException { </a> 
<a> Builder builder = newBuilder ( ) ; </a> 
<a> if ( builder . <RARE_TOKEN> ( input , extensionRegistry ) ) { </a> 
<a> return builder . buildParsed ( ) ; </a> 
<a> } else { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> } </a> 
<a> public static io . netty . example . localtime . LocalTimeProtocol . Locations <RARE_TOKEN> ( </a> 
<a> com . google . protobuf . <RARE_TOKEN> input ) </a> 
<a> throws java . io . IOException { </a> 
<a> return newBuilder ( ) . mergeFrom ( input ) . buildParsed ( ) ; </a> 
<a> } </a> 
<a> public static io . netty . example . localtime . LocalTimeProtocol . Locations <RARE_TOKEN> ( </a> 
<a> com . google . protobuf . <RARE_TOKEN> input , </a> 
<a> com . google . protobuf . <RARE_TOKEN> extensionRegistry ) </a> 
<a> throws java . io . IOException { </a> 
<a> return newBuilder ( ) . mergeFrom ( input , extensionRegistry ) </a> 
<a> . buildParsed ( ) ; </a> 
<a> } </a> 
<a> public static Builder newBuilder ( ) { return Builder . create ( ) ; } </a> 
<a> public Builder <RARE_TOKEN> ( ) { return newBuilder ( ) ; } </a> 
<a> public static Builder newBuilder ( io . netty . example . localtime . LocalTimeProtocol . Locations <RARE_TOKEN> ) { </a> 
<a> return newBuilder ( ) . mergeFrom ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public Builder <RARE_TOKEN> ( ) { return newBuilder ( this ) ; } </a> 
<a> @ java . lang . Override </a> 
<a> protected Builder <RARE_TOKEN> ( </a> 
<a> com . google . protobuf . <RARE_TOKEN> . <RARE_TOKEN> parent ) { </a> 
<a> Builder builder = new Builder ( parent ) ; </a> 
<a> return builder ; </a> 
<a> } </a> 
<a> public static final class Builder extends </a> 
<a> com . google . protobuf . <RARE_TOKEN> . Builder < Builder > </a> 
<a> implements io . netty . example . localtime . LocalTimeProtocol . <RARE_TOKEN> { </a> 
<a> public static final com . google . protobuf . <RARE_TOKEN> . <RARE_TOKEN> </a> 
<a> <RARE_TOKEN> ( ) { </a> 
<a> return io . netty . example . localtime . LocalTimeProtocol . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> protected com . google . protobuf . <RARE_TOKEN> . <RARE_TOKEN> </a> 
<a> <RARE_TOKEN> ( ) { </a> 
<a> return io . netty . example . localtime . LocalTimeProtocol . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> private Builder ( ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> private Builder ( <RARE_TOKEN> parent ) { </a> 
<a> super ( parent ) ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( ) { </a> 
<a> if ( com . google . protobuf . <RARE_TOKEN> . <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private static Builder create ( ) { </a> 
<a> return new Builder ( ) ; </a> 
<a> } </a> 
<a> public Builder clear ( ) { </a> 
<a> super . clear ( ) ; </a> 
<a> if ( locationBuilder_ == null ) { </a> 
<a> location_ = java . util . Collections . <RARE_TOKEN> ( ) ; </a> 
<a> bitField0_ = bitField0_ & ~ 0x00000001 ; </a> 
<a> } else { </a> 
<a> locationBuilder_ . clear ( ) ; </a> 
<a> } </a> 
<a> return this ; </a> 
<a> } </a> 
<a> public Builder <RARE_TOKEN> ( ) { </a> 
<a> return create ( ) . mergeFrom ( <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> public com . google . protobuf . <RARE_TOKEN> . <RARE_TOKEN> </a> 
<a> <RARE_TOKEN> ( ) { </a> 
<a> return io . netty . example . localtime . LocalTimeProtocol . Locations . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> public io . netty . example . localtime . LocalTimeProtocol . Locations <RARE_TOKEN> ( ) { </a> 
<a> return io . netty . example . localtime . LocalTimeProtocol . Locations . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> public io . netty . example . localtime . LocalTimeProtocol . Locations build ( ) { </a> 
<a> io . netty . example . localtime . LocalTimeProtocol . Locations result = <RARE_TOKEN> ( ) ; </a> 
<a> if ( ! result . <RARE_TOKEN> ( ) ) { </a> 
<a> throw <RARE_TOKEN> ( result ) ; </a> 
<a> } </a> 
<a> return result ; </a> 
<a> } </a> 
<a> private io . netty . example . localtime . LocalTimeProtocol . Locations buildParsed ( ) </a> 
<a> throws com . google . protobuf . <RARE_TOKEN> { </a> 
<a> io . netty . example . localtime . LocalTimeProtocol . Locations result = <RARE_TOKEN> ( ) ; </a> 
<a> if ( ! result . <RARE_TOKEN> ( ) ) { </a> 
<a> throw <RARE_TOKEN> ( </a> 
<a> result ) . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> return result ; </a> 
<a> } </a> 
<a> public io . netty . example . localtime . LocalTimeProtocol . Locations <RARE_TOKEN> ( ) { </a> 
<a> io . netty . example . localtime . LocalTimeProtocol . Locations result = new io . netty . example . localtime . LocalTimeProtocol . Locations ( this ) ; </a> 
<a> int <RARE_TOKEN> = bitField0_ ; </a> 
<a> if ( locationBuilder_ == null ) { </a> 
<a> if ( ( bitField0_ & 0x00000001 ) == 0x00000001 ) { </a> 
<a> location_ = java . util . Collections . <RARE_TOKEN> ( location_ ) ; </a> 
<a> bitField0_ = bitField0_ & ~ 0x00000001 ; </a> 
<a> } </a> 
<a> result . location_ = location_ ; </a> 
<a> } else { </a> 
<a> result . location_ = locationBuilder_ . build ( ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> return result ; </a> 
<a> } </a> 
<a> public Builder mergeFrom ( com . google . protobuf . <RARE_TOKEN> other ) { </a> 
<a> if ( other instanceof io . netty . example . localtime . LocalTimeProtocol . Locations ) { </a> 
<a> return mergeFrom ( ( io . netty . example . localtime . LocalTimeProtocol . Locations ) other ) ; </a> 
<a> } else { </a> 
<a> super . mergeFrom ( other ) ; </a> 
<a> return this ; </a> 
<a> } </a> 
<a> } </a> 
<a> public Builder mergeFrom ( io . netty . example . localtime . LocalTimeProtocol . Locations other ) { </a> 
<a> if ( other == io . netty . example . localtime . LocalTimeProtocol . Locations . <RARE_TOKEN> ( ) ) { </a> 
<a> return this ; </a> 
<a> } </a> 
<a> if ( locationBuilder_ == null ) { </a> 
<a> if ( ! other . location_ . isEmpty ( ) ) { </a> 
<a> if ( location_ . isEmpty ( ) ) { </a> 
<a> location_ = other . location_ ; </a> 
<a> bitField0_ = bitField0_ & ~ 0x00000001 ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> location_ . <RARE_TOKEN> ( other . location_ ) ; </a> 
<a> } </a> 
<a> onChanged ( ) ; </a> 
<a> } </a> 
<a> } else { </a> 
<a> if ( ! other . location_ . isEmpty ( ) ) { </a> 
<a> if ( locationBuilder_ . isEmpty ( ) ) { </a> 
<a> locationBuilder_ . <RARE_TOKEN> ( ) ; </a> 
<a> locationBuilder_ = null ; </a> 
<a> location_ = other . location_ ; </a> 
<a> bitField0_ = bitField0_ & ~ 0x00000001 ; </a> 
<a> locationBuilder_ = </a> 
<a> com . google . protobuf . <RARE_TOKEN> . <RARE_TOKEN> ? </a> 
<a> <RARE_TOKEN> ( ) : null ; </a> 
<a> } else { </a> 
<a> locationBuilder_ . <RARE_TOKEN> ( other . location_ ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( other . <RARE_TOKEN> ( ) ) ; </a> 
<a> return this ; </a> 
<a> } </a> 
<a> public final boolean <RARE_TOKEN> ( ) { </a> 
<a> for ( int i = 0 ; i < <RARE_TOKEN> ( ) ; i ++ ) { </a> 
<a> if ( ! <RARE_TOKEN> ( i ) . <RARE_TOKEN> ( ) ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> } </a> 
<a> return true ; </a> 
<a> } </a> 
<a> public Builder mergeFrom ( </a> 
<a> com . google . protobuf . <RARE_TOKEN> input , </a> 
<a> com . google . protobuf . <RARE_TOKEN> extensionRegistry ) </a> 
<a> throws java . io . IOException { </a> 
<a> com . google . protobuf . <RARE_TOKEN> . Builder <RARE_TOKEN> = </a> 
<a> com . google . protobuf . <RARE_TOKEN> . newBuilder ( </a> 
<a> <RARE_TOKEN> ( ) ) ; </a> 
<a> while ( true ) { </a> 
<a> int <RARE_TOKEN> = input . <RARE_TOKEN> ( ) ; </a> 
<a> switch ( <RARE_TOKEN> ) { </a> 
<a> case 0 : </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> . build ( ) ) ; </a> 
<a> onChanged ( ) ; </a> 
<a> return this ; </a> 
<a> default : { </a> 
<a> if ( ! <RARE_TOKEN> ( input , <RARE_TOKEN> , </a> 
<a> extensionRegistry , <RARE_TOKEN> ) ) { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> . build ( ) ) ; </a> 
<a> onChanged ( ) ; </a> 
<a> return this ; </a> 
<a> } </a> 
<a> break ; </a> 
<a> } </a> 
<a> case 10 : { </a> 
<a> io . netty . example . localtime . LocalTimeProtocol . Location . Builder <RARE_TOKEN> = io . netty . example . localtime . LocalTimeProtocol . Location . newBuilder ( ) ; </a> 
<a> input . <RARE_TOKEN> ( <RARE_TOKEN> , extensionRegistry ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> break ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> private int bitField0_ ; </a> 
<a> private java . util . List < io . netty . example . localtime . LocalTimeProtocol . Location > location_ = </a> 
<a> java . util . Collections . <RARE_TOKEN> ( ) ; </a> 
<a> private void <RARE_TOKEN> ( ) { </a> 
<a> if ( ! ( ( bitField0_ & 0x00000001 ) == 0x00000001 ) ) { </a> 
<a> location_ = new java . util . ArrayList < io . netty . example . localtime . LocalTimeProtocol . Location > ( location_ ) ; </a> 
<a> bitField0_ |= 0x00000001 ; </a> 
<a> } </a> 
<a> } </a> 
<a> private com . google . protobuf . <RARE_TOKEN> < </a> 
<a> io . netty . example . localtime . LocalTimeProtocol . Location , io . netty . example . localtime . LocalTimeProtocol . Location . Builder , io . netty . example . localtime . LocalTimeProtocol . <RARE_TOKEN> > locationBuilder_ ; </a> 
<a> public java . util . List < io . netty . example . localtime . LocalTimeProtocol . Location > <RARE_TOKEN> ( ) { </a> 
<a> if ( locationBuilder_ == null ) { </a> 
<a> return java . util . Collections . <RARE_TOKEN> ( location_ ) ; </a> 
<a> } else { </a> 
<a> return locationBuilder_ . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public int <RARE_TOKEN> ( ) { </a> 
<a> if ( locationBuilder_ == null ) { </a> 
<a> return location_ . size ( ) ; </a> 
<a> } else { </a> 
<a> return locationBuilder_ . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public io . netty . example . localtime . LocalTimeProtocol . Location <RARE_TOKEN> ( int index ) { </a> 
<a> if ( locationBuilder_ == null ) { </a> 
<a> return location_ . get ( index ) ; </a> 
<a> } else { </a> 
<a> return locationBuilder_ . getMessage ( index ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public Builder <RARE_TOKEN> ( </a> 
<a> int index , io . netty . example . localtime . LocalTimeProtocol . Location value ) { </a> 
<a> if ( locationBuilder_ == null ) { </a> 
<a> if ( value == null ) { </a> 
<a> throw new NullPointerException ( ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> location_ . set ( index , value ) ; </a> 
<a> onChanged ( ) ; </a> 
<a> } else { </a> 
<a> locationBuilder_ . <RARE_TOKEN> ( index , value ) ; </a> 
<a> } </a> 
<a> return this ; </a> 
<a> } </a> 
<a> public Builder <RARE_TOKEN> ( </a> 
<a> int index , io . netty . example . localtime . LocalTimeProtocol . Location . Builder <RARE_TOKEN> ) { </a> 
<a> if ( locationBuilder_ == null ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> location_ . set ( index , <RARE_TOKEN> . build ( ) ) ; </a> 
<a> onChanged ( ) ; </a> 
<a> } else { </a> 
<a> locationBuilder_ . <RARE_TOKEN> ( index , <RARE_TOKEN> . build ( ) ) ; </a> 
<a> } </a> 
<a> return this ; </a> 
<a> } </a> 
<a> public Builder <RARE_TOKEN> ( io . netty . example . localtime . LocalTimeProtocol . Location value ) { </a> 
<a> if ( locationBuilder_ == null ) { </a> 
<a> if ( value == null ) { </a> 
<a> throw new NullPointerException ( ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> location_ . add ( value ) ; </a> 
<a> onChanged ( ) ; </a> 
<a> } else { </a> 
<a> locationBuilder_ . <RARE_TOKEN> ( value ) ; </a> 
<a> } </a> 
<a> return this ; </a> 
<a> } </a> 
<a> public Builder <RARE_TOKEN> ( </a> 
<a> int index , io . netty . example . localtime . LocalTimeProtocol . Location value ) { </a> 
<a> if ( locationBuilder_ == null ) { </a> 
<a> if ( value == null ) { </a> 
<a> throw new NullPointerException ( ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> location_ . add ( index , value ) ; </a> 
<a> onChanged ( ) ; </a> 
<a> } else { </a> 
<a> locationBuilder_ . <RARE_TOKEN> ( index , value ) ; </a> 
<a> } </a> 
<a> return this ; </a> 
<a> } </a> 
<a> public Builder <RARE_TOKEN> ( </a> 
<a> io . netty . example . localtime . LocalTimeProtocol . Location . Builder <RARE_TOKEN> ) { </a> 
<a> if ( locationBuilder_ == null ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> location_ . add ( <RARE_TOKEN> . build ( ) ) ; </a> 
<a> onChanged ( ) ; </a> 
<a> } else { </a> 
<a> locationBuilder_ . <RARE_TOKEN> ( <RARE_TOKEN> . build ( ) ) ; </a> 
<a> } </a> 
<a> return this ; </a> 
<a> } </a> 
<a> public Builder <RARE_TOKEN> ( </a> 
<a> int index , io . netty . example . localtime . LocalTimeProtocol . Location . Builder <RARE_TOKEN> ) { </a> 
<a> if ( locationBuilder_ == null ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> location_ . add ( index , <RARE_TOKEN> . build ( ) ) ; </a> 
<a> onChanged ( ) ; </a> 
<a> } else { </a> 
<a> locationBuilder_ . <RARE_TOKEN> ( index , <RARE_TOKEN> . build ( ) ) ; </a> 
<a> } </a> 
<a> return this ; </a> 
<a> } </a> 
<a> public Builder <RARE_TOKEN> ( </a> 
<a> java . lang . <RARE_TOKEN> < ? extends io . netty . example . localtime . LocalTimeProtocol . Location > values ) { </a> 
<a> if ( locationBuilder_ == null ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> super . <RARE_TOKEN> ( values , location_ ) ; </a> 
<a> onChanged ( ) ; </a> 
<a> } else { </a> 
<a> locationBuilder_ . <RARE_TOKEN> ( values ) ; </a> 
<a> } </a> 
<a> return this ; </a> 
<a> } </a> 
<a> public Builder <RARE_TOKEN> ( ) { </a> 
<a> if ( locationBuilder_ == null ) { </a> 
<a> location_ = java . util . Collections . <RARE_TOKEN> ( ) ; </a> 
<a> bitField0_ = bitField0_ & ~ 0x00000001 ; </a> 
<a> onChanged ( ) ; </a> 
<a> } else { </a> 
<a> locationBuilder_ . clear ( ) ; </a> 
<a> } </a> 
<a> return this ; </a> 
<a> } </a> 
<a> public Builder <RARE_TOKEN> ( int index ) { </a> 
<a> if ( locationBuilder_ == null ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> location_ . remove ( index ) ; </a> 
<a> onChanged ( ) ; </a> 
<a> } else { </a> 
<a> locationBuilder_ . remove ( index ) ; </a> 
<a> } </a> 
<a> return this ; </a> 
<a> } </a> 
<a> public io . netty . example . localtime . LocalTimeProtocol . Location . Builder <RARE_TOKEN> ( </a> 
<a> int index ) { </a> 
<a> return <RARE_TOKEN> ( ) . <RARE_TOKEN> ( index ) ; </a> 
<a> } </a> 
<a> public io . netty . example . localtime . LocalTimeProtocol . <RARE_TOKEN> <RARE_TOKEN> ( </a> 
<a> int index ) { </a> 
<a> if ( locationBuilder_ == null ) { </a> 
<a> return location_ . get ( index ) ; } else { </a> 
<a> return locationBuilder_ . <RARE_TOKEN> ( index ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public java . util . List < ? extends io . netty . example . localtime . LocalTimeProtocol . <RARE_TOKEN> > </a> 
<a> <RARE_TOKEN> ( ) { </a> 
<a> if ( locationBuilder_ != null ) { </a> 
<a> return locationBuilder_ . <RARE_TOKEN> ( ) ; </a> 
<a> } else { </a> 
<a> return java . util . Collections . <RARE_TOKEN> ( location_ ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public io . netty . example . localtime . LocalTimeProtocol . Location . Builder <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ( ) . <RARE_TOKEN> ( </a> 
<a> io . netty . example . localtime . LocalTimeProtocol . Location . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> public io . netty . example . localtime . LocalTimeProtocol . Location . Builder <RARE_TOKEN> ( </a> 
<a> int index ) { </a> 
<a> return <RARE_TOKEN> ( ) . <RARE_TOKEN> ( </a> 
<a> index , io . netty . example . localtime . LocalTimeProtocol . Location . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> public java . util . List < io . netty . example . localtime . LocalTimeProtocol . Location . Builder > </a> 
<a> <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> private com . google . protobuf . <RARE_TOKEN> < </a> 
<a> io . netty . example . localtime . LocalTimeProtocol . Location , io . netty . example . localtime . LocalTimeProtocol . Location . Builder , io . netty . example . localtime . LocalTimeProtocol . <RARE_TOKEN> > </a> 
<a> <RARE_TOKEN> ( ) { </a> 
<a> if ( locationBuilder_ == null ) { </a> 
<a> locationBuilder_ = new com . google . protobuf . <RARE_TOKEN> < </a> 
<a> io . netty . example . localtime . LocalTimeProtocol . Location , io . netty . example . localtime . LocalTimeProtocol . Location . Builder , io . netty . example . localtime . LocalTimeProtocol . <RARE_TOKEN> > ( </a> 
<a> location_ , </a> 
<a> ( bitField0_ & 0x00000001 ) == 0x00000001 , </a> 
<a> <RARE_TOKEN> ( ) , </a> 
<a> <RARE_TOKEN> ( ) ) ; </a> 
<a> location_ = null ; </a> 
<a> } </a> 
<a> return locationBuilder_ ; </a> 
<a> } </a> 
<a> } </a> 
<a> static { </a> 
<a> <RARE_TOKEN> = new Locations ( true ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public interface <RARE_TOKEN> </a> 
<a> extends com . google . protobuf . <RARE_TOKEN> { </a> 
<a> boolean <RARE_TOKEN> ( ) ; </a> 
<a> int <RARE_TOKEN> ( ) ; </a> 
<a> boolean <RARE_TOKEN> ( ) ; </a> 
<a> int <RARE_TOKEN> ( ) ; </a> 
<a> boolean <RARE_TOKEN> ( ) ; </a> 
<a> int <RARE_TOKEN> ( ) ; </a> 
<a> boolean <RARE_TOKEN> ( ) ; </a> 
<a> io . netty . example . localtime . LocalTimeProtocol . <RARE_TOKEN> <RARE_TOKEN> ( ) ; </a> 
<a> boolean <RARE_TOKEN> ( ) ; </a> 
<a> int <RARE_TOKEN> ( ) ; </a> 
<a> boolean <RARE_TOKEN> ( ) ; </a> 
<a> int <RARE_TOKEN> ( ) ; </a> 
<a> boolean <RARE_TOKEN> ( ) ; </a> 
<a> int <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> public static final class LocalTime extends </a> 
<a> com . google . protobuf . <RARE_TOKEN> </a> 
<a> implements <RARE_TOKEN> { </a> 
<a> private LocalTime ( Builder builder ) { </a> 
<a> super ( builder ) ; </a> 
<a> } </a> 
<a> private LocalTime ( boolean <RARE_TOKEN> ) { } </a> 
<a> private static final LocalTime <RARE_TOKEN> ; </a> 
<a> public static LocalTime <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public LocalTime <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public static final com . google . protobuf . <RARE_TOKEN> . <RARE_TOKEN> </a> 
<a> <RARE_TOKEN> ( ) { </a> 
<a> return io . netty . example . localtime . LocalTimeProtocol . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> protected com . google . protobuf . <RARE_TOKEN> . <RARE_TOKEN> </a> 
<a> <RARE_TOKEN> ( ) { </a> 
<a> return io . netty . example . localtime . LocalTimeProtocol . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> private int bitField0_ ; </a> 
<a> public static final int <RARE_TOKEN> = 1 ; </a> 
<a> private int <RARE_TOKEN> ; </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return ( bitField0_ & 0x00000001 ) == 0x00000001 ; </a> 
<a> } </a> 
<a> public int <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public static final int <RARE_TOKEN> = 2 ; </a> 
<a> private int <RARE_TOKEN> ; </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return ( bitField0_ & <RARE_TOKEN> ) == <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public int <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public static final int <RARE_TOKEN> = 4 ; </a> 
<a> private int <RARE_TOKEN> ; </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return ( bitField0_ & <RARE_TOKEN> ) == <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public int <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public static final int <RARE_TOKEN> = 5 ; </a> 
<a> private io . netty . example . localtime . LocalTimeProtocol . <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return ( bitField0_ & <RARE_TOKEN> ) == <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public io . netty . example . localtime . LocalTimeProtocol . <RARE_TOKEN> <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public static final int <RARE_TOKEN> = 6 ; </a> 
<a> private int <RARE_TOKEN> ; </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return ( bitField0_ & <RARE_TOKEN> ) == <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public int <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public static final int <RARE_TOKEN> = 7 ; </a> 
<a> private int <RARE_TOKEN> ; </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return ( bitField0_ & <RARE_TOKEN> ) == <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public int <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public static final int <RARE_TOKEN> = 8 ; </a> 
<a> private int <RARE_TOKEN> ; </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return ( bitField0_ & <RARE_TOKEN> ) == <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public int <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> = 0 ; </a> 
<a> <RARE_TOKEN> = 0 ; </a> 
<a> <RARE_TOKEN> = 0 ; </a> 
<a> <RARE_TOKEN> = io . netty . example . localtime . LocalTimeProtocol . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = 0 ; </a> 
<a> <RARE_TOKEN> = 0 ; </a> 
<a> <RARE_TOKEN> = 0 ; </a> 
<a> } </a> 
<a> private byte <RARE_TOKEN> = - 1 ; </a> 
<a> public final boolean <RARE_TOKEN> ( ) { </a> 
<a> byte <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> if ( <RARE_TOKEN> != - 1 ) { </a> 
<a> return <RARE_TOKEN> == 1 ; </a> 
<a> } </a> 
<a> if ( ! <RARE_TOKEN> ( ) ) { </a> 
<a> <RARE_TOKEN> = 0 ; </a> 
<a> return false ; </a> 
<a> } </a> 
<a> if ( ! <RARE_TOKEN> ( ) ) { </a> 
<a> <RARE_TOKEN> = 0 ; </a> 
<a> return false ; </a> 
<a> } </a> 
<a> if ( ! <RARE_TOKEN> ( ) ) { </a> 
<a> <RARE_TOKEN> = 0 ; </a> 
<a> return false ; </a> 
<a> } </a> 
<a> if ( ! <RARE_TOKEN> ( ) ) { </a> 
<a> <RARE_TOKEN> = 0 ; </a> 
<a> return false ; </a> 
<a> } </a> 
<a> if ( ! <RARE_TOKEN> ( ) ) { </a> 
<a> <RARE_TOKEN> = 0 ; </a> 
<a> return false ; </a> 
<a> } </a> 
<a> if ( ! <RARE_TOKEN> ( ) ) { </a> 
<a> <RARE_TOKEN> = 0 ; </a> 
<a> return false ; </a> 
<a> } </a> 
<a> if ( ! <RARE_TOKEN> ( ) ) { </a> 
<a> <RARE_TOKEN> = 0 ; </a> 
<a> return false ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> = 1 ; </a> 
<a> return true ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( com . google . protobuf . <RARE_TOKEN> output ) </a> 
<a> throws java . io . IOException { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> if ( ( bitField0_ & 0x00000001 ) == 0x00000001 ) { </a> 
<a> output . <RARE_TOKEN> ( 1 , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( ( bitField0_ & <RARE_TOKEN> ) == <RARE_TOKEN> ) { </a> 
<a> output . <RARE_TOKEN> ( 2 , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( ( bitField0_ & <RARE_TOKEN> ) == <RARE_TOKEN> ) { </a> 
<a> output . <RARE_TOKEN> ( 4 , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( ( bitField0_ & <RARE_TOKEN> ) == <RARE_TOKEN> ) { </a> 
<a> output . <RARE_TOKEN> ( 5 , <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> if ( ( bitField0_ & <RARE_TOKEN> ) == <RARE_TOKEN> ) { </a> 
<a> output . <RARE_TOKEN> ( 6 , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( ( bitField0_ & <RARE_TOKEN> ) == <RARE_TOKEN> ) { </a> 
<a> output . <RARE_TOKEN> ( 7 , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( ( bitField0_ & <RARE_TOKEN> ) == <RARE_TOKEN> ) { </a> 
<a> output . <RARE_TOKEN> ( 8 , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( ) . <RARE_TOKEN> ( output ) ; </a> 
<a> } </a> 
<a> private int <RARE_TOKEN> = - 1 ; </a> 
<a> public int <RARE_TOKEN> ( ) { </a> 
<a> int size = <RARE_TOKEN> ; </a> 
<a> if ( size != - 1 ) { </a> 
<a> return size ; </a> 
<a> } </a> 
<a> size = 0 ; </a> 
<a> if ( ( bitField0_ & 0x00000001 ) == 0x00000001 ) { </a> 
<a> size += com . google . protobuf . <RARE_TOKEN> </a> 
<a> . <RARE_TOKEN> ( 1 , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( ( bitField0_ & <RARE_TOKEN> ) == <RARE_TOKEN> ) { </a> 
<a> size += com . google . protobuf . <RARE_TOKEN> </a> 
<a> . <RARE_TOKEN> ( 2 , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( ( bitField0_ & <RARE_TOKEN> ) == <RARE_TOKEN> ) { </a> 
<a> size += com . google . protobuf . <RARE_TOKEN> </a> 
<a> . <RARE_TOKEN> ( 4 , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( ( bitField0_ & <RARE_TOKEN> ) == <RARE_TOKEN> ) { </a> 
<a> size += com . google . protobuf . <RARE_TOKEN> </a> 
<a> . <RARE_TOKEN> ( 5 , <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> if ( ( bitField0_ & <RARE_TOKEN> ) == <RARE_TOKEN> ) { </a> 
<a> size += com . google . protobuf . <RARE_TOKEN> </a> 
<a> . <RARE_TOKEN> ( 6 , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( ( bitField0_ & <RARE_TOKEN> ) == <RARE_TOKEN> ) { </a> 
<a> size += com . google . protobuf . <RARE_TOKEN> </a> 
<a> . <RARE_TOKEN> ( 7 , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( ( bitField0_ & <RARE_TOKEN> ) == <RARE_TOKEN> ) { </a> 
<a> size += com . google . protobuf . <RARE_TOKEN> </a> 
<a> . <RARE_TOKEN> ( 8 , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> size += <RARE_TOKEN> ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> = size ; </a> 
<a> return size ; </a> 
<a> } </a> 
<a> private static final long serialVersionUID = <RARE_TOKEN> ; </a> 
<a> @ java . lang . Override </a> 
<a> protected java . lang . Object <RARE_TOKEN> ( ) </a> 
<a> throws java . io . <RARE_TOKEN> { </a> 
<a> return super . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> public static io . netty . example . localtime . LocalTimeProtocol . LocalTime <RARE_TOKEN> ( </a> 
<a> com . google . protobuf . <RARE_TOKEN> data ) </a> 
<a> throws com . google . protobuf . <RARE_TOKEN> { </a> 
<a> return newBuilder ( ) . mergeFrom ( data ) . buildParsed ( ) ; </a> 
<a> } </a> 
<a> public static io . netty . example . localtime . LocalTimeProtocol . LocalTime <RARE_TOKEN> ( </a> 
<a> com . google . protobuf . <RARE_TOKEN> data , </a> 
<a> com . google . protobuf . <RARE_TOKEN> extensionRegistry ) </a> 
<a> throws com . google . protobuf . <RARE_TOKEN> { </a> 
<a> return newBuilder ( ) . mergeFrom ( data , extensionRegistry ) </a> 
<a> . buildParsed ( ) ; </a> 
<a> } </a> 
<a> public static io . netty . example . localtime . LocalTimeProtocol . LocalTime <RARE_TOKEN> ( byte [ ] data ) </a> 
<a> throws com . google . protobuf . <RARE_TOKEN> { </a> 
<a> return newBuilder ( ) . mergeFrom ( data ) . buildParsed ( ) ; </a> 
<a> } </a> 
<a> public static io . netty . example . localtime . LocalTimeProtocol . LocalTime <RARE_TOKEN> ( </a> 
<a> byte [ ] data , </a> 
<a> com . google . protobuf . <RARE_TOKEN> extensionRegistry ) </a> 
<a> throws com . google . protobuf . <RARE_TOKEN> { </a> 
<a> return newBuilder ( ) . mergeFrom ( data , extensionRegistry ) </a> 
<a> . buildParsed ( ) ; </a> 
<a> } </a> 
<a> public static io . netty . example . localtime . LocalTimeProtocol . LocalTime <RARE_TOKEN> ( java . io . InputStream input ) </a> 
<a> throws java . io . IOException { </a> 
<a> return newBuilder ( ) . mergeFrom ( input ) . buildParsed ( ) ; </a> 
<a> } </a> 
<a> public static io . netty . example . localtime . LocalTimeProtocol . LocalTime <RARE_TOKEN> ( </a> 
<a> java . io . InputStream input , </a> 
<a> com . google . protobuf . <RARE_TOKEN> extensionRegistry ) </a> 
<a> throws java . io . IOException { </a> 
<a> return newBuilder ( ) . mergeFrom ( input , extensionRegistry ) </a> 
<a> . buildParsed ( ) ; </a> 
<a> } </a> 
<a> public static io . netty . example . localtime . LocalTimeProtocol . LocalTime <RARE_TOKEN> ( java . io . InputStream input ) </a> 
<a> throws java . io . IOException { </a> 
<a> Builder builder = newBuilder ( ) ; </a> 
<a> if ( builder . <RARE_TOKEN> ( input ) ) { </a> 
<a> return builder . buildParsed ( ) ; </a> 
<a> } else { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> } </a> 
<a> public static io . netty . example . localtime . LocalTimeProtocol . LocalTime <RARE_TOKEN> ( </a> 
<a> java . io . InputStream input , </a> 
<a> com . google . protobuf . <RARE_TOKEN> extensionRegistry ) </a> 
<a> throws java . io . IOException { </a> 
<a> Builder builder = newBuilder ( ) ; </a> 
<a> if ( builder . <RARE_TOKEN> ( input , extensionRegistry ) ) { </a> 
<a> return builder . buildParsed ( ) ; </a> 
<a> } else { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> } </a> 
<a> public static io . netty . example . localtime . LocalTimeProtocol . LocalTime <RARE_TOKEN> ( </a> 
<a> com . google . protobuf . <RARE_TOKEN> input ) </a> 
<a> throws java . io . IOException { </a> 
<a> return newBuilder ( ) . mergeFrom ( input ) . buildParsed ( ) ; </a> 
<a> } </a> 
<a> public static io . netty . example . localtime . LocalTimeProtocol . LocalTime <RARE_TOKEN> ( </a> 
<a> com . google . protobuf . <RARE_TOKEN> input , </a> 
<a> com . google . protobuf . <RARE_TOKEN> extensionRegistry ) </a> 
<a> throws java . io . IOException { </a> 
<a> return newBuilder ( ) . mergeFrom ( input , extensionRegistry ) </a> 
<a> . buildParsed ( ) ; </a> 
<a> } </a> 
<a> public static Builder newBuilder ( ) { return Builder . create ( ) ; } </a> 
<a> public Builder <RARE_TOKEN> ( ) { return newBuilder ( ) ; } </a> 
<a> public static Builder newBuilder ( io . netty . example . localtime . LocalTimeProtocol . LocalTime <RARE_TOKEN> ) { </a> 
<a> return newBuilder ( ) . mergeFrom ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public Builder <RARE_TOKEN> ( ) { return newBuilder ( this ) ; } </a> 
<a> @ java . lang . Override </a> 
<a> protected Builder <RARE_TOKEN> ( </a> 
<a> com . google . protobuf . <RARE_TOKEN> . <RARE_TOKEN> parent ) { </a> 
<a> Builder builder = new Builder ( parent ) ; </a> 
<a> return builder ; </a> 
<a> } </a> 
<a> public static final class Builder extends </a> 
<a> com . google . protobuf . <RARE_TOKEN> . Builder < Builder > </a> 
<a> implements io . netty . example . localtime . LocalTimeProtocol . <RARE_TOKEN> { </a> 
<a> public static final com . google . protobuf . <RARE_TOKEN> . <RARE_TOKEN> </a> 
<a> <RARE_TOKEN> ( ) { </a> 
<a> return io . netty . example . localtime . LocalTimeProtocol . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> protected com . google . protobuf . <RARE_TOKEN> . <RARE_TOKEN> </a> 
<a> <RARE_TOKEN> ( ) { </a> 
<a> return io . netty . example . localtime . LocalTimeProtocol . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> private Builder ( ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> private Builder ( <RARE_TOKEN> parent ) { </a> 
<a> super ( parent ) ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( ) { </a> 
<a> if ( com . google . protobuf . <RARE_TOKEN> . <RARE_TOKEN> ) { </a> 
<a> } </a> 
<a> } </a> 
<a> private static Builder create ( ) { </a> 
<a> return new Builder ( ) ; </a> 
<a> } </a> 
<a> public Builder clear ( ) { </a> 
<a> super . clear ( ) ; </a> 
<a> <RARE_TOKEN> = 0 ; </a> 
<a> bitField0_ = bitField0_ & ~ 0x00000001 ; </a> 
<a> <RARE_TOKEN> = 0 ; </a> 
<a> bitField0_ = bitField0_ & ~ <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = 0 ; </a> 
<a> bitField0_ = bitField0_ & ~ <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = io . netty . example . localtime . LocalTimeProtocol . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> bitField0_ = bitField0_ & ~ <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = 0 ; </a> 
<a> bitField0_ = bitField0_ & ~ <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = 0 ; </a> 
<a> bitField0_ = bitField0_ & ~ <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = 0 ; </a> 
<a> bitField0_ = bitField0_ & ~ <RARE_TOKEN> ; </a> 
<a> return this ; </a> 
<a> } </a> 
<a> public Builder <RARE_TOKEN> ( ) { </a> 
<a> return create ( ) . mergeFrom ( <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> public com . google . protobuf . <RARE_TOKEN> . <RARE_TOKEN> </a> 
<a> <RARE_TOKEN> ( ) { </a> 
<a> return io . netty . example . localtime . LocalTimeProtocol . LocalTime . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> public io . netty . example . localtime . LocalTimeProtocol . LocalTime <RARE_TOKEN> ( ) { </a> 
<a> return io . netty . example . localtime . LocalTimeProtocol . LocalTime . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> public io . netty . example . localtime . LocalTimeProtocol . LocalTime build ( ) { </a> 
<a> io . netty . example . localtime . LocalTimeProtocol . LocalTime result = <RARE_TOKEN> ( ) ; </a> 
<a> if ( ! result . <RARE_TOKEN> ( ) ) { </a> 
<a> throw <RARE_TOKEN> ( result ) ; </a> 
<a> } </a> 
<a> return result ; </a> 
<a> } </a> 
<a> private io . netty . example . localtime . LocalTimeProtocol . LocalTime buildParsed ( ) </a> 
<a> throws com . google . protobuf . <RARE_TOKEN> { </a> 
<a> io . netty . example . localtime . LocalTimeProtocol . LocalTime result = <RARE_TOKEN> ( ) ; </a> 
<a> if ( ! result . <RARE_TOKEN> ( ) ) { </a> 
<a> throw <RARE_TOKEN> ( </a> 
<a> result ) . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> return result ; </a> 
<a> } </a> 
<a> public io . netty . example . localtime . LocalTimeProtocol . LocalTime <RARE_TOKEN> ( ) { </a> 
<a> io . netty . example . localtime . LocalTimeProtocol . LocalTime result = new io . netty . example . localtime . LocalTimeProtocol . LocalTime ( this ) ; </a> 
<a> int <RARE_TOKEN> = bitField0_ ; </a> 
<a> int <RARE_TOKEN> = 0 ; </a> 
<a> if ( ( <RARE_TOKEN> & 0x00000001 ) == 0x00000001 ) { </a> 
<a> <RARE_TOKEN> |= 0x00000001 ; </a> 
<a> } </a> 
<a> result . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> if ( ( <RARE_TOKEN> & <RARE_TOKEN> ) == <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> |= <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> result . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> if ( ( <RARE_TOKEN> & <RARE_TOKEN> ) == <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> |= <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> result . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> if ( ( <RARE_TOKEN> & <RARE_TOKEN> ) == <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> |= <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> result . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> if ( ( <RARE_TOKEN> & <RARE_TOKEN> ) == <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> |= <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> result . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> if ( ( <RARE_TOKEN> & <RARE_TOKEN> ) == <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> |= <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> result . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> if ( ( <RARE_TOKEN> & <RARE_TOKEN> ) == <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> |= <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> result . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> result . bitField0_ = <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> return result ; </a> 
<a> } </a> 
<a> public Builder mergeFrom ( com . google . protobuf . <RARE_TOKEN> other ) { </a> 
<a> if ( other instanceof io . netty . example . localtime . LocalTimeProtocol . LocalTime ) { </a> 
<a> return mergeFrom ( ( io . netty . example . localtime . LocalTimeProtocol . LocalTime ) other ) ; </a> 
<a> } else { </a> 
<a> super . mergeFrom ( other ) ; </a> 
<a> return this ; </a> 
<a> } </a> 
<a> } </a> 
<a> public Builder mergeFrom ( io . netty . example . localtime . LocalTimeProtocol . LocalTime other ) { </a> 
<a> if ( other == io . netty . example . localtime . LocalTimeProtocol . LocalTime . <RARE_TOKEN> ( ) ) { </a> 
<a> return this ; </a> 
<a> } </a> 
<a> if ( other . <RARE_TOKEN> ( ) ) { </a> 
<a> <RARE_TOKEN> ( other . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> if ( other . <RARE_TOKEN> ( ) ) { </a> 
<a> <RARE_TOKEN> ( other . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> if ( other . <RARE_TOKEN> ( ) ) { </a> 
<a> <RARE_TOKEN> ( other . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> if ( other . <RARE_TOKEN> ( ) ) { </a> 
<a> <RARE_TOKEN> ( other . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> if ( other . <RARE_TOKEN> ( ) ) { </a> 
<a> <RARE_TOKEN> ( other . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> if ( other . <RARE_TOKEN> ( ) ) { </a> 
<a> <RARE_TOKEN> ( other . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> if ( other . <RARE_TOKEN> ( ) ) { </a> 
<a> <RARE_TOKEN> ( other . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( other . <RARE_TOKEN> ( ) ) ; </a> 
<a> return this ; </a> 
<a> } </a> 
<a> public final boolean <RARE_TOKEN> ( ) { </a> 
<a> if ( ! <RARE_TOKEN> ( ) ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> if ( ! <RARE_TOKEN> ( ) ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> if ( ! <RARE_TOKEN> ( ) ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> if ( ! <RARE_TOKEN> ( ) ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> if ( ! <RARE_TOKEN> ( ) ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> if ( ! <RARE_TOKEN> ( ) ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> if ( ! <RARE_TOKEN> ( ) ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> return true ; </a> 
<a> } </a> 
<a> public Builder mergeFrom ( </a> 
<a> com . google . protobuf . <RARE_TOKEN> input , </a> 
<a> com . google . protobuf . <RARE_TOKEN> extensionRegistry ) </a> 
<a> throws java . io . IOException { </a> 
<a> com . google . protobuf . <RARE_TOKEN> . Builder <RARE_TOKEN> = </a> 
<a> com . google . protobuf . <RARE_TOKEN> . newBuilder ( </a> 
<a> <RARE_TOKEN> ( ) ) ; </a> 
<a> while ( true ) { </a> 
<a> int <RARE_TOKEN> = input . <RARE_TOKEN> ( ) ; </a> 
<a> switch ( <RARE_TOKEN> ) { </a> 
<a> case 0 : </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> . build ( ) ) ; </a> 
<a> onChanged ( ) ; </a> 
<a> return this ; </a> 
<a> default : { </a> 
<a> if ( ! <RARE_TOKEN> ( input , <RARE_TOKEN> , </a> 
<a> extensionRegistry , <RARE_TOKEN> ) ) { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> . build ( ) ) ; </a> 
<a> onChanged ( ) ; </a> 
<a> return this ; </a> 
<a> } </a> 
<a> break ; </a> 
<a> } </a> 
<a> case 8 : { </a> 
<a> bitField0_ |= 0x00000001 ; </a> 
<a> <RARE_TOKEN> = input . <RARE_TOKEN> ( ) ; </a> 
<a> break ; </a> 
<a> } </a> 
<a> case 16 : { </a> 
<a> bitField0_ |= <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = input . <RARE_TOKEN> ( ) ; </a> 
<a> break ; </a> 
<a> } </a> 
<a> case 32 : { </a> 
<a> bitField0_ |= <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = input . <RARE_TOKEN> ( ) ; </a> 
<a> break ; </a> 
<a> } </a> 
<a> case <RARE_TOKEN> : { </a> 
<a> int <RARE_TOKEN> = input . <RARE_TOKEN> ( ) ; </a> 
<a> io . netty . example . localtime . LocalTimeProtocol . <RARE_TOKEN> value = io . netty . example . localtime . LocalTimeProtocol . <RARE_TOKEN> . valueOf ( <RARE_TOKEN> ) ; </a> 
<a> if ( value == null ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( 5 , <RARE_TOKEN> ) ; </a> 
<a> } else { </a> 
<a> bitField0_ |= <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = value ; </a> 
<a> } </a> 
<a> break ; </a> 
<a> } </a> 
<a> case <RARE_TOKEN> : { </a> 
<a> bitField0_ |= <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = input . <RARE_TOKEN> ( ) ; </a> 
<a> break ; </a> 
<a> } </a> 
<a> case <RARE_TOKEN> : { </a> 
<a> bitField0_ |= <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = input . <RARE_TOKEN> ( ) ; </a> 
<a> break ; </a> 
<a> } </a> 
<a> case <RARE_TOKEN> : { </a> 
<a> bitField0_ |= <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = input . <RARE_TOKEN> ( ) ; </a> 
<a> break ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> private int bitField0_ ; </a> 
<a> private int <RARE_TOKEN> ; </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return ( bitField0_ & 0x00000001 ) == 0x00000001 ; </a> 
<a> } </a> 
<a> public int <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public Builder <RARE_TOKEN> ( int value ) { </a> 
<a> bitField0_ |= 0x00000001 ; </a> 
<a> <RARE_TOKEN> = value ; </a> 
<a> onChanged ( ) ; </a> 
<a> return this ; </a> 
<a> } </a> 
<a> public Builder <RARE_TOKEN> ( ) { </a> 
<a> bitField0_ = bitField0_ & ~ 0x00000001 ; </a> 
<a> <RARE_TOKEN> = 0 ; </a> 
<a> onChanged ( ) ; </a> 
<a> return this ; </a> 
<a> } </a> 
<a> private int <RARE_TOKEN> ; </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return ( bitField0_ & <RARE_TOKEN> ) == <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public int <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public Builder <RARE_TOKEN> ( int value ) { </a> 
<a> bitField0_ |= <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = value ; </a> 
<a> onChanged ( ) ; </a> 
<a> return this ; </a> 
<a> } </a> 
<a> public Builder <RARE_TOKEN> ( ) { </a> 
<a> bitField0_ = bitField0_ & ~ <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = 0 ; </a> 
<a> onChanged ( ) ; </a> 
<a> return this ; </a> 
<a> } </a> 
<a> private int <RARE_TOKEN> ; </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return ( bitField0_ & <RARE_TOKEN> ) == <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public int <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public Builder <RARE_TOKEN> ( int value ) { </a> 
<a> bitField0_ |= <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = value ; </a> 
<a> onChanged ( ) ; </a> 
<a> return this ; </a> 
<a> } </a> 
<a> public Builder <RARE_TOKEN> ( ) { </a> 
<a> bitField0_ = bitField0_ & ~ <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = 0 ; </a> 
<a> onChanged ( ) ; </a> 
<a> return this ; </a> 
<a> } </a> 
<a> private io . netty . example . localtime . LocalTimeProtocol . <RARE_TOKEN> <RARE_TOKEN> = io . netty . example . localtime . LocalTimeProtocol . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return ( bitField0_ & <RARE_TOKEN> ) == <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public io . netty . example . localtime . LocalTimeProtocol . <RARE_TOKEN> <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public Builder <RARE_TOKEN> ( io . netty . example . localtime . LocalTimeProtocol . <RARE_TOKEN> value ) { </a> 
<a> if ( value == null ) { </a> 
<a> throw new NullPointerException ( ) ; </a> 
<a> } </a> 
<a> bitField0_ |= <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = value ; </a> 
<a> onChanged ( ) ; </a> 
<a> return this ; </a> 
<a> } </a> 
<a> public Builder <RARE_TOKEN> ( ) { </a> 
<a> bitField0_ = bitField0_ & ~ <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = io . netty . example . localtime . LocalTimeProtocol . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> onChanged ( ) ; </a> 
<a> return this ; </a> 
<a> } </a> 
<a> private int <RARE_TOKEN> ; </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return ( bitField0_ & <RARE_TOKEN> ) == <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public int <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public Builder <RARE_TOKEN> ( int value ) { </a> 
<a> bitField0_ |= <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = value ; </a> 
<a> onChanged ( ) ; </a> 
<a> return this ; </a> 
<a> } </a> 
<a> public Builder <RARE_TOKEN> ( ) { </a> 
<a> bitField0_ = bitField0_ & ~ <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = 0 ; </a> 
<a> onChanged ( ) ; </a> 
<a> return this ; </a> 
<a> } </a> 
<a> private int <RARE_TOKEN> ; </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return ( bitField0_ & <RARE_TOKEN> ) == <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public int <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public Builder <RARE_TOKEN> ( int value ) { </a> 
<a> bitField0_ |= <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = value ; </a> 
<a> onChanged ( ) ; </a> 
<a> return this ; </a> 
<a> } </a> 
<a> public Builder <RARE_TOKEN> ( ) { </a> 
<a> bitField0_ = bitField0_ & ~ <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = 0 ; </a> 
<a> onChanged ( ) ; </a> 
<a> return this ; </a> 
<a> } </a> 
<a> private int <RARE_TOKEN> ; </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return ( bitField0_ & <RARE_TOKEN> ) == <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public int <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public Builder <RARE_TOKEN> ( int value ) { </a> 
<a> bitField0_ |= <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = value ; </a> 
<a> onChanged ( ) ; </a> 
<a> return this ; </a> 
<a> } </a> 
<a> public Builder <RARE_TOKEN> ( ) { </a> 
<a> bitField0_ = bitField0_ & ~ <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = 0 ; </a> 
<a> onChanged ( ) ; </a> 
<a> return this ; </a> 
<a> } </a> 
<a> } </a> 
<a> static { </a> 
<a> <RARE_TOKEN> = new LocalTime ( true ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public interface <RARE_TOKEN> </a> 
<a> extends com . google . protobuf . <RARE_TOKEN> { </a> 
<a> java . util . List < io . netty . example . localtime . LocalTimeProtocol . LocalTime > </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> io . netty . example . localtime . LocalTimeProtocol . LocalTime <RARE_TOKEN> ( int index ) ; </a> 
<a> int <RARE_TOKEN> ( ) ; </a> 
<a> java . util . List < ? extends io . netty . example . localtime . LocalTimeProtocol . <RARE_TOKEN> > </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> io . netty . example . localtime . LocalTimeProtocol . <RARE_TOKEN> <RARE_TOKEN> ( </a> 
<a> int index ) ; </a> 
<a> } </a> 
<a> public static final class LocalTimes extends </a> 
<a> com . google . protobuf . <RARE_TOKEN> </a> 
<a> implements <RARE_TOKEN> { </a> 
<a> private LocalTimes ( Builder builder ) { </a> 
<a> super ( builder ) ; </a> 
<a> } </a> 
<a> private LocalTimes ( boolean <RARE_TOKEN> ) { } </a> 
<a> private static final LocalTimes <RARE_TOKEN> ; </a> 
<a> public static LocalTimes <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public LocalTimes <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public static final com . google . protobuf . <RARE_TOKEN> . <RARE_TOKEN> </a> 
<a> <RARE_TOKEN> ( ) { </a> 
<a> return io . netty . example . localtime . LocalTimeProtocol . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> protected com . google . protobuf . <RARE_TOKEN> . <RARE_TOKEN> </a> 
<a> <RARE_TOKEN> ( ) { </a> 
<a> return io . netty . example . localtime . LocalTimeProtocol . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public static final int <RARE_TOKEN> = 1 ; </a> 
<a> private java . util . List < io . netty . example . localtime . LocalTimeProtocol . LocalTime > localTime_ ; </a> 
<a> public java . util . List < io . netty . example . localtime . LocalTimeProtocol . LocalTime > <RARE_TOKEN> ( ) { </a> 
<a> return localTime_ ; </a> 
<a> } </a> 
<a> public java . util . List < ? extends io . netty . example . localtime . LocalTimeProtocol . <RARE_TOKEN> > </a> 
<a> <RARE_TOKEN> ( ) { </a> 
<a> return localTime_ ; </a> 
<a> } </a> 
<a> public int <RARE_TOKEN> ( ) { </a> 
<a> return localTime_ . size ( ) ; </a> 
<a> } </a> 
<a> public io . netty . example . localtime . LocalTimeProtocol . LocalTime <RARE_TOKEN> ( int index ) { </a> 
<a> return localTime_ . get ( index ) ; </a> 
<a> } </a> 
<a> public io . netty . example . localtime . LocalTimeProtocol . <RARE_TOKEN> <RARE_TOKEN> ( </a> 
<a> int index ) { </a> 
<a> return localTime_ . get ( index ) ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( ) { </a> 
<a> localTime_ = java . util . Collections . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> private byte <RARE_TOKEN> = - 1 ; </a> 
<a> public final boolean <RARE_TOKEN> ( ) { </a> 
<a> byte <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> if ( <RARE_TOKEN> != - 1 ) { </a> 
<a> return <RARE_TOKEN> == 1 ; </a> 
<a> } </a> 
<a> for ( int i = 0 ; i < <RARE_TOKEN> ( ) ; i ++ ) { </a> 
<a> if ( ! <RARE_TOKEN> ( i ) . <RARE_TOKEN> ( ) ) { </a> 
<a> <RARE_TOKEN> = 0 ; </a> 
<a> return false ; </a> 
<a> } </a> 
<a> } </a> 
<a> <RARE_TOKEN> = 1 ; </a> 
<a> return true ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( com . google . protobuf . <RARE_TOKEN> output ) </a> 
<a> throws java . io . IOException { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> for ( int i = 0 ; i < localTime_ . size ( ) ; i ++ ) { </a> 
<a> output . <RARE_TOKEN> ( 1 , localTime_ . get ( i ) ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( ) . <RARE_TOKEN> ( output ) ; </a> 
<a> } </a> 
<a> private int <RARE_TOKEN> = - 1 ; </a> 
<a> public int <RARE_TOKEN> ( ) { </a> 
<a> int size = <RARE_TOKEN> ; </a> 
<a> if ( size != - 1 ) { </a> 
<a> return size ; </a> 
<a> } </a> 
<a> size = 0 ; </a> 
<a> for ( int i = 0 ; i < localTime_ . size ( ) ; i ++ ) { </a> 
<a> size += com . google . protobuf . <RARE_TOKEN> </a> 
<a> . <RARE_TOKEN> ( 1 , localTime_ . get ( i ) ) ; </a> 
<a> } </a> 
<a> size += <RARE_TOKEN> ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> = size ; </a> 
<a> return size ; </a> 
<a> } </a> 
<a> private static final long serialVersionUID = <RARE_TOKEN> ; </a> 
<a> @ java . lang . Override </a> 
<a> protected java . lang . Object <RARE_TOKEN> ( ) </a> 
<a> throws java . io . <RARE_TOKEN> { </a> 
<a> return super . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> public static io . netty . example . localtime . LocalTimeProtocol . LocalTimes <RARE_TOKEN> ( </a> 
<a> com . google . protobuf . <RARE_TOKEN> data ) </a> 
<a> throws com . google . protobuf . <RARE_TOKEN> { </a> 
<a> return newBuilder ( ) . mergeFrom ( data ) . buildParsed ( ) ; </a> 
<a> } </a> 
<a> public static io . netty . example . localtime . LocalTimeProtocol . LocalTimes <RARE_TOKEN> ( </a> 
<a> com . google . protobuf . <RARE_TOKEN> data , </a> 
<a> com . google . protobuf . <RARE_TOKEN> extensionRegistry ) </a> 
<a> throws com . google . protobuf . <RARE_TOKEN> { </a> 
<a> return newBuilder ( ) . mergeFrom ( data , extensionRegistry ) </a> 
<a> . buildParsed ( ) ; </a> 
<a> } </a> 
<a> public static io . netty . example . localtime . LocalTimeProtocol . LocalTimes <RARE_TOKEN> ( byte [ ] data ) </a> 
<a> throws com . google . protobuf . <RARE_TOKEN> { </a> 
<a> return newBuilder ( ) . mergeFrom ( data ) . buildParsed ( ) ; </a> 
<a> } </a> 
<a> public static io . netty . example . localtime . LocalTimeProtocol . LocalTimes <RARE_TOKEN> ( </a> 
<a> byte [ ] data , </a> 
<a> com . google . protobuf . <RARE_TOKEN> extensionRegistry ) </a> 
<a> throws com . google . protobuf . <RARE_TOKEN> { </a> 
<a> return newBuilder ( ) . mergeFrom ( data , extensionRegistry ) </a> 
<a> . buildParsed ( ) ; </a> 
<a> } </a> 
<a> public static io . netty . example . localtime . LocalTimeProtocol . LocalTimes <RARE_TOKEN> ( java . io . InputStream input ) </a> 
<a> throws java . io . IOException { </a> 
<a> return newBuilder ( ) . mergeFrom ( input ) . buildParsed ( ) ; </a> 
<a> } </a> 
<a> public static io . netty . example . localtime . LocalTimeProtocol . LocalTimes <RARE_TOKEN> ( </a> 
<a> java . io . InputStream input , </a> 
<a> com . google . protobuf . <RARE_TOKEN> extensionRegistry ) </a> 
<a> throws java . io . IOException { </a> 
<a> return newBuilder ( ) . mergeFrom ( input , extensionRegistry ) </a> 
<a> . buildParsed ( ) ; </a> 
<a> } </a> 
<a> public static io . netty . example . localtime . LocalTimeProtocol . LocalTimes <RARE_TOKEN> ( java . io . InputStream input ) </a> 
<a> throws java . io . IOException { </a> 
<a> Builder builder = newBuilder ( ) ; </a> 
<a> if ( builder . <RARE_TOKEN> ( input ) ) { </a> 
<a> return builder . buildParsed ( ) ; </a> 
<a> } else { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> } </a> 
<a> public static io . netty . example . localtime . LocalTimeProtocol . LocalTimes <RARE_TOKEN> ( </a> 
<a> java . io . InputStream input , </a> 
<a> com . google . protobuf . <RARE_TOKEN> extensionRegistry ) </a> 
<a> throws java . io . IOException { </a> 
<a> Builder builder = newBuilder ( ) ; </a> 
<a> if ( builder . <RARE_TOKEN> ( input , extensionRegistry ) ) { </a> 
<a> return builder . buildParsed ( ) ; </a> 
<a> } else { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> } </a> 
<a> public static io . netty . example . localtime . LocalTimeProtocol . LocalTimes <RARE_TOKEN> ( </a> 
<a> com . google . protobuf . <RARE_TOKEN> input ) </a> 
<a> throws java . io . IOException { </a> 
<a> return newBuilder ( ) . mergeFrom ( input ) . buildParsed ( ) ; </a> 
<a> } </a> 
<a> public static io . netty . example . localtime . LocalTimeProtocol . LocalTimes <RARE_TOKEN> ( </a> 
<a> com . google . protobuf . <RARE_TOKEN> input , </a> 
<a> com . google . protobuf . <RARE_TOKEN> extensionRegistry ) </a> 
<a> throws java . io . IOException { </a> 
<a> return newBuilder ( ) . mergeFrom ( input , extensionRegistry ) </a> 
<a> . buildParsed ( ) ; </a> 
<a> } </a> 
<a> public static Builder newBuilder ( ) { return Builder . create ( ) ; } </a> 
<a> public Builder <RARE_TOKEN> ( ) { return newBuilder ( ) ; } </a> 
<a> public static Builder newBuilder ( io . netty . example . localtime . LocalTimeProtocol . LocalTimes <RARE_TOKEN> ) { </a> 
<a> return newBuilder ( ) . mergeFrom ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public Builder <RARE_TOKEN> ( ) { return newBuilder ( this ) ; } </a> 
<a> @ java . lang . Override </a> 
<a> protected Builder <RARE_TOKEN> ( </a> 
<a> com . google . protobuf . <RARE_TOKEN> . <RARE_TOKEN> parent ) { </a> 
<a> Builder builder = new Builder ( parent ) ; </a> 
<a> return builder ; </a> 
<a> } </a> 
<a> public static final class Builder extends </a> 
<a> com . google . protobuf . <RARE_TOKEN> . Builder < Builder > </a> 
<a> implements io . netty . example . localtime . LocalTimeProtocol . <RARE_TOKEN> { </a> 
<a> public static final com . google . protobuf . <RARE_TOKEN> . <RARE_TOKEN> </a> 
<a> <RARE_TOKEN> ( ) { </a> 
<a> return io . netty . example . localtime . LocalTimeProtocol . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> protected com . google . protobuf . <RARE_TOKEN> . <RARE_TOKEN> </a> 
<a> <RARE_TOKEN> ( ) { </a> 
<a> return io . netty . example . localtime . LocalTimeProtocol . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> private Builder ( ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> private Builder ( <RARE_TOKEN> parent ) { </a> 
<a> super ( parent ) ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( ) { </a> 
<a> if ( com . google . protobuf . <RARE_TOKEN> . <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private static Builder create ( ) { </a> 
<a> return new Builder ( ) ; </a> 
<a> } </a> 
<a> public Builder clear ( ) { </a> 
<a> super . clear ( ) ; </a> 
<a> if ( localTimeBuilder_ == null ) { </a> 
<a> localTime_ = java . util . Collections . <RARE_TOKEN> ( ) ; </a> 
<a> bitField0_ = bitField0_ & ~ 0x00000001 ; </a> 
<a> } else { </a> 
<a> localTimeBuilder_ . clear ( ) ; </a> 
<a> } </a> 
<a> return this ; </a> 
<a> } </a> 
<a> public Builder <RARE_TOKEN> ( ) { </a> 
<a> return create ( ) . mergeFrom ( <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> public com . google . protobuf . <RARE_TOKEN> . <RARE_TOKEN> </a> 
<a> <RARE_TOKEN> ( ) { </a> 
<a> return io . netty . example . localtime . LocalTimeProtocol . LocalTimes . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> public io . netty . example . localtime . LocalTimeProtocol . LocalTimes <RARE_TOKEN> ( ) { </a> 
<a> return io . netty . example . localtime . LocalTimeProtocol . LocalTimes . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> public io . netty . example . localtime . LocalTimeProtocol . LocalTimes build ( ) { </a> 
<a> io . netty . example . localtime . LocalTimeProtocol . LocalTimes result = <RARE_TOKEN> ( ) ; </a> 
<a> if ( ! result . <RARE_TOKEN> ( ) ) { </a> 
<a> throw <RARE_TOKEN> ( result ) ; </a> 
<a> } </a> 
<a> return result ; </a> 
<a> } </a> 
<a> private io . netty . example . localtime . LocalTimeProtocol . LocalTimes buildParsed ( ) </a> 
<a> throws com . google . protobuf . <RARE_TOKEN> { </a> 
<a> io . netty . example . localtime . LocalTimeProtocol . LocalTimes result = <RARE_TOKEN> ( ) ; </a> 
<a> if ( ! result . <RARE_TOKEN> ( ) ) { </a> 
<a> throw <RARE_TOKEN> ( </a> 
<a> result ) . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> return result ; </a> 
<a> } </a> 
<a> public io . netty . example . localtime . LocalTimeProtocol . LocalTimes <RARE_TOKEN> ( ) { </a> 
<a> io . netty . example . localtime . LocalTimeProtocol . LocalTimes result = new io . netty . example . localtime . LocalTimeProtocol . LocalTimes ( this ) ; </a> 
<a> int <RARE_TOKEN> = bitField0_ ; </a> 
<a> if ( localTimeBuilder_ == null ) { </a> 
<a> if ( ( bitField0_ & 0x00000001 ) == 0x00000001 ) { </a> 
<a> localTime_ = java . util . Collections . <RARE_TOKEN> ( localTime_ ) ; </a> 
<a> bitField0_ = bitField0_ & ~ 0x00000001 ; </a> 
<a> } </a> 
<a> result . localTime_ = localTime_ ; </a> 
<a> } else { </a> 
<a> result . localTime_ = localTimeBuilder_ . build ( ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> return result ; </a> 
<a> } </a> 
<a> public Builder mergeFrom ( com . google . protobuf . <RARE_TOKEN> other ) { </a> 
<a> if ( other instanceof io . netty . example . localtime . LocalTimeProtocol . LocalTimes ) { </a> 
<a> return mergeFrom ( ( io . netty . example . localtime . LocalTimeProtocol . LocalTimes ) other ) ; </a> 
<a> } else { </a> 
<a> super . mergeFrom ( other ) ; </a> 
<a> return this ; </a> 
<a> } </a> 
<a> } </a> 
<a> public Builder mergeFrom ( io . netty . example . localtime . LocalTimeProtocol . LocalTimes other ) { </a> 
<a> if ( other == io . netty . example . localtime . LocalTimeProtocol . LocalTimes . <RARE_TOKEN> ( ) ) { </a> 
<a> return this ; </a> 
<a> } </a> 
<a> if ( localTimeBuilder_ == null ) { </a> 
<a> if ( ! other . localTime_ . isEmpty ( ) ) { </a> 
<a> if ( localTime_ . isEmpty ( ) ) { </a> 
<a> localTime_ = other . localTime_ ; </a> 
<a> bitField0_ = bitField0_ & ~ 0x00000001 ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> localTime_ . <RARE_TOKEN> ( other . localTime_ ) ; </a> 
<a> } </a> 
<a> onChanged ( ) ; </a> 
<a> } </a> 
<a> } else { </a> 
<a> if ( ! other . localTime_ . isEmpty ( ) ) { </a> 
<a> if ( localTimeBuilder_ . isEmpty ( ) ) { </a> 
<a> localTimeBuilder_ . <RARE_TOKEN> ( ) ; </a> 
<a> localTimeBuilder_ = null ; </a> 
<a> localTime_ = other . localTime_ ; </a> 
<a> bitField0_ = bitField0_ & ~ 0x00000001 ; </a> 
<a> localTimeBuilder_ = </a> 
<a> com . google . protobuf . <RARE_TOKEN> . <RARE_TOKEN> ? </a> 
<a> <RARE_TOKEN> ( ) : null ; </a> 
<a> } else { </a> 
<a> localTimeBuilder_ . <RARE_TOKEN> ( other . localTime_ ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( other . <RARE_TOKEN> ( ) ) ; </a> 
<a> return this ; </a> 
<a> } </a> 
<a> public final boolean <RARE_TOKEN> ( ) { </a> 
<a> for ( int i = 0 ; i < <RARE_TOKEN> ( ) ; i ++ ) { </a> 
<a> if ( ! <RARE_TOKEN> ( i ) . <RARE_TOKEN> ( ) ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> } </a> 
<a> return true ; </a> 
<a> } </a> 
<a> public Builder mergeFrom ( </a> 
<a> com . google . protobuf . <RARE_TOKEN> input , </a> 
<a> com . google . protobuf . <RARE_TOKEN> extensionRegistry ) </a> 
<a> throws java . io . IOException { </a> 
<a> com . google . protobuf . <RARE_TOKEN> . Builder <RARE_TOKEN> = </a> 
<a> com . google . protobuf . <RARE_TOKEN> . newBuilder ( </a> 
<a> <RARE_TOKEN> ( ) ) ; </a> 
<a> while ( true ) { </a> 
<a> int <RARE_TOKEN> = input . <RARE_TOKEN> ( ) ; </a> 
<a> switch ( <RARE_TOKEN> ) { </a> 
<a> case 0 : </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> . build ( ) ) ; </a> 
<a> onChanged ( ) ; </a> 
<a> return this ; </a> 
<a> default : { </a> 
<a> if ( ! <RARE_TOKEN> ( input , <RARE_TOKEN> , </a> 
<a> extensionRegistry , <RARE_TOKEN> ) ) { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> . build ( ) ) ; </a> 
<a> onChanged ( ) ; </a> 
<a> return this ; </a> 
<a> } </a> 
<a> break ; </a> 
<a> } </a> 
<a> case 10 : { </a> 
<a> io . netty . example . localtime . LocalTimeProtocol . LocalTime . Builder <RARE_TOKEN> = io . netty . example . localtime . LocalTimeProtocol . LocalTime . newBuilder ( ) ; </a> 
<a> input . <RARE_TOKEN> ( <RARE_TOKEN> , extensionRegistry ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> break ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> private int bitField0_ ; </a> 
<a> private java . util . List < io . netty . example . localtime . LocalTimeProtocol . LocalTime > localTime_ = </a> 
<a> java . util . Collections . <RARE_TOKEN> ( ) ; </a> 
<a> private void <RARE_TOKEN> ( ) { </a> 
<a> if ( ! ( ( bitField0_ & 0x00000001 ) == 0x00000001 ) ) { </a> 
<a> localTime_ = new java . util . ArrayList < io . netty . example . localtime . LocalTimeProtocol . LocalTime > ( localTime_ ) ; </a> 
<a> bitField0_ |= 0x00000001 ; </a> 
<a> } </a> 
<a> } </a> 
<a> private com . google . protobuf . <RARE_TOKEN> < </a> 
<a> io . netty . example . localtime . LocalTimeProtocol . LocalTime , io . netty . example . localtime . LocalTimeProtocol . LocalTime . Builder , io . netty . example . localtime . LocalTimeProtocol . <RARE_TOKEN> > localTimeBuilder_ ; </a> 
<a> public java . util . List < io . netty . example . localtime . LocalTimeProtocol . LocalTime > <RARE_TOKEN> ( ) { </a> 
<a> if ( localTimeBuilder_ == null ) { </a> 
<a> return java . util . Collections . <RARE_TOKEN> ( localTime_ ) ; </a> 
<a> } else { </a> 
<a> return localTimeBuilder_ . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public int <RARE_TOKEN> ( ) { </a> 
<a> if ( localTimeBuilder_ == null ) { </a> 
<a> return localTime_ . size ( ) ; </a> 
<a> } else { </a> 
<a> return localTimeBuilder_ . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public io . netty . example . localtime . LocalTimeProtocol . LocalTime <RARE_TOKEN> ( int index ) { </a> 
<a> if ( localTimeBuilder_ == null ) { </a> 
<a> return localTime_ . get ( index ) ; </a> 
<a> } else { </a> 
<a> return localTimeBuilder_ . getMessage ( index ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public Builder <RARE_TOKEN> ( </a> 
<a> int index , io . netty . example . localtime . LocalTimeProtocol . LocalTime value ) { </a> 
<a> if ( localTimeBuilder_ == null ) { </a> 
<a> if ( value == null ) { </a> 
<a> throw new NullPointerException ( ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> localTime_ . set ( index , value ) ; </a> 
<a> onChanged ( ) ; </a> 
<a> } else { </a> 
<a> localTimeBuilder_ . <RARE_TOKEN> ( index , value ) ; </a> 
<a> } </a> 
<a> return this ; </a> 
<a> } </a> 
<a> public Builder <RARE_TOKEN> ( </a> 
<a> int index , io . netty . example . localtime . LocalTimeProtocol . LocalTime . Builder <RARE_TOKEN> ) { </a> 
<a> if ( localTimeBuilder_ == null ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> localTime_ . set ( index , <RARE_TOKEN> . build ( ) ) ; </a> 
<a> onChanged ( ) ; </a> 
<a> } else { </a> 
<a> localTimeBuilder_ . <RARE_TOKEN> ( index , <RARE_TOKEN> . build ( ) ) ; </a> 
<a> } </a> 
<a> return this ; </a> 
<a> } </a> 
<a> public Builder <RARE_TOKEN> ( io . netty . example . localtime . LocalTimeProtocol . LocalTime value ) { </a> 
<a> if ( localTimeBuilder_ == null ) { </a> 
<a> if ( value == null ) { </a> 
<a> throw new NullPointerException ( ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> localTime_ . add ( value ) ; </a> 
<a> onChanged ( ) ; </a> 
<a> } else { </a> 
<a> localTimeBuilder_ . <RARE_TOKEN> ( value ) ; </a> 
<a> } </a> 
<a> return this ; </a> 
<a> } </a> 
<a> public Builder <RARE_TOKEN> ( </a> 
<a> int index , io . netty . example . localtime . LocalTimeProtocol . LocalTime value ) { </a> 
<a> if ( localTimeBuilder_ == null ) { </a> 
<a> if ( value == null ) { </a> 
<a> throw new NullPointerException ( ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> localTime_ . add ( index , value ) ; </a> 
<a> onChanged ( ) ; </a> 
<a> } else { </a> 
<a> localTimeBuilder_ . <RARE_TOKEN> ( index , value ) ; </a> 
<a> } </a> 
<a> return this ; </a> 
<a> } </a> 
<a> public Builder <RARE_TOKEN> ( </a> 
<a> io . netty . example . localtime . LocalTimeProtocol . LocalTime . Builder <RARE_TOKEN> ) { </a> 
<a> if ( localTimeBuilder_ == null ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> localTime_ . add ( <RARE_TOKEN> . build ( ) ) ; </a> 
<a> onChanged ( ) ; </a> 
<a> } else { </a> 
<a> localTimeBuilder_ . <RARE_TOKEN> ( <RARE_TOKEN> . build ( ) ) ; </a> 
<a> } </a> 
<a> return this ; </a> 
<a> } </a> 
<a> public Builder <RARE_TOKEN> ( </a> 
<a> int index , io . netty . example . localtime . LocalTimeProtocol . LocalTime . Builder <RARE_TOKEN> ) { </a> 
<a> if ( localTimeBuilder_ == null ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> localTime_ . add ( index , <RARE_TOKEN> . build ( ) ) ; </a> 
<a> onChanged ( ) ; </a> 
<a> } else { </a> 
<a> localTimeBuilder_ . <RARE_TOKEN> ( index , <RARE_TOKEN> . build ( ) ) ; </a> 
<a> } </a> 
<a> return this ; </a> 
<a> } </a> 
<a> public Builder <RARE_TOKEN> ( </a> 
<a> java . lang . <RARE_TOKEN> < ? extends io . netty . example . localtime . LocalTimeProtocol . LocalTime > values ) { </a> 
<a> if ( localTimeBuilder_ == null ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> super . <RARE_TOKEN> ( values , localTime_ ) ; </a> 
<a> onChanged ( ) ; </a> 
<a> } else { </a> 
<a> localTimeBuilder_ . <RARE_TOKEN> ( values ) ; </a> 
<a> } </a> 
<a> return this ; </a> 
<a> } </a> 
<a> public Builder <RARE_TOKEN> ( ) { </a> 
<a> if ( localTimeBuilder_ == null ) { </a> 
<a> localTime_ = java . util . Collections . <RARE_TOKEN> ( ) ; </a> 
<a> bitField0_ = bitField0_ & ~ 0x00000001 ; </a> 
<a> onChanged ( ) ; </a> 
<a> } else { </a> 
<a> localTimeBuilder_ . clear ( ) ; </a> 
<a> } </a> 
<a> return this ; </a> 
<a> } </a> 
<a> public Builder <RARE_TOKEN> ( int index ) { </a> 
<a> if ( localTimeBuilder_ == null ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> localTime_ . remove ( index ) ; </a> 
<a> onChanged ( ) ; </a> 
<a> } else { </a> 
<a> localTimeBuilder_ . remove ( index ) ; </a> 
<a> } </a> 
<a> return this ; </a> 
<a> } </a> 
<a> public io . netty . example . localtime . LocalTimeProtocol . LocalTime . Builder <RARE_TOKEN> ( </a> 
<a> int index ) { </a> 
<a> return <RARE_TOKEN> ( ) . <RARE_TOKEN> ( index ) ; </a> 
<a> } </a> 
<a> public io . netty . example . localtime . LocalTimeProtocol . <RARE_TOKEN> <RARE_TOKEN> ( </a> 
<a> int index ) { </a> 
<a> if ( localTimeBuilder_ == null ) { </a> 
<a> return localTime_ . get ( index ) ; } else { </a> 
<a> return localTimeBuilder_ . <RARE_TOKEN> ( index ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public java . util . List < ? extends io . netty . example . localtime . LocalTimeProtocol . <RARE_TOKEN> > </a> 
<a> <RARE_TOKEN> ( ) { </a> 
<a> if ( localTimeBuilder_ != null ) { </a> 
<a> return localTimeBuilder_ . <RARE_TOKEN> ( ) ; </a> 
<a> } else { </a> 
<a> return java . util . Collections . <RARE_TOKEN> ( localTime_ ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public io . netty . example . localtime . LocalTimeProtocol . LocalTime . Builder <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ( ) . <RARE_TOKEN> ( </a> 
<a> io . netty . example . localtime . LocalTimeProtocol . LocalTime . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> public io . netty . example . localtime . LocalTimeProtocol . LocalTime . Builder <RARE_TOKEN> ( </a> 
<a> int index ) { </a> 
<a> return <RARE_TOKEN> ( ) . <RARE_TOKEN> ( </a> 
<a> index , io . netty . example . localtime . LocalTimeProtocol . LocalTime . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> public java . util . List < io . netty . example . localtime . LocalTimeProtocol . LocalTime . Builder > </a> 
<a> <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> private com . google . protobuf . <RARE_TOKEN> < </a> 
<a> io . netty . example . localtime . LocalTimeProtocol . LocalTime , io . netty . example . localtime . LocalTimeProtocol . LocalTime . Builder , io . netty . example . localtime . LocalTimeProtocol . <RARE_TOKEN> > </a> 
<a> <RARE_TOKEN> ( ) { </a> 
<a> if ( localTimeBuilder_ == null ) { </a> 
<a> localTimeBuilder_ = new com . google . protobuf . <RARE_TOKEN> < </a> 
<a> io . netty . example . localtime . LocalTimeProtocol . LocalTime , io . netty . example . localtime . LocalTimeProtocol . LocalTime . Builder , io . netty . example . localtime . LocalTimeProtocol . <RARE_TOKEN> > ( </a> 
<a> localTime_ , </a> 
<a> ( bitField0_ & 0x00000001 ) == 0x00000001 , </a> 
<a> <RARE_TOKEN> ( ) , </a> 
<a> <RARE_TOKEN> ( ) ) ; </a> 
<a> localTime_ = null ; </a> 
<a> } </a> 
<a> return localTimeBuilder_ ; </a> 
<a> } </a> 
<a> } </a> 
<a> static { </a> 
<a> <RARE_TOKEN> = new LocalTimes ( true ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private static com . google . protobuf . <RARE_TOKEN> . <RARE_TOKEN> </a> 
<a> <RARE_TOKEN> ; </a> 
<a> private static </a> 
<a> com . google . protobuf . <RARE_TOKEN> . <RARE_TOKEN> </a> 
<a> <RARE_TOKEN> ; </a> 
<a> private static com . google . protobuf . <RARE_TOKEN> . <RARE_TOKEN> </a> 
<a> <RARE_TOKEN> ; </a> 
<a> private static </a> 
<a> com . google . protobuf . <RARE_TOKEN> . <RARE_TOKEN> </a> 
<a> <RARE_TOKEN> ; </a> 
<a> private static com . google . protobuf . <RARE_TOKEN> . <RARE_TOKEN> </a> 
<a> <RARE_TOKEN> ; </a> 
<a> private static </a> 
<a> com . google . protobuf . <RARE_TOKEN> . <RARE_TOKEN> </a> 
<a> <RARE_TOKEN> ; </a> 
<a> private static com . google . protobuf . <RARE_TOKEN> . <RARE_TOKEN> </a> 
<a> <RARE_TOKEN> ; </a> 
<a> private static </a> 
<a> com . google . protobuf . <RARE_TOKEN> . <RARE_TOKEN> </a> 
<a> <RARE_TOKEN> ; </a> 
<a> public static com . google . protobuf . <RARE_TOKEN> . <RARE_TOKEN> </a> 
<a> <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> private static com . google . protobuf . <RARE_TOKEN> . <RARE_TOKEN> </a> 
<a> <RARE_TOKEN> ; </a> 
<a> static { </a> 
<a> java . lang . String [ ] <RARE_TOKEN> = { </a> 
<a> <RARE_TOKEN> + </a> 
<a> <RARE_TOKEN> + </a> 
<a> <RARE_TOKEN> + </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> + </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> + </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> + </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> + </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> + </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> + </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> + </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> + </a> 
<a> <RARE_TOKEN> + </a> 
<a> <RARE_TOKEN> + </a> 
<a> <RARE_TOKEN> + </a> 
<a> <RARE_TOKEN> + </a> 
<a> <RARE_TOKEN> + </a> 
<a> <RARE_TOKEN> + </a> 
<a> <RARE_TOKEN> </a> 
<a> } ; </a> 
<a> com . google . protobuf . <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> <RARE_TOKEN> = </a> 
<a> new com . google . protobuf . <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> ( ) { </a> 
<a> public com . google . protobuf . <RARE_TOKEN> <RARE_TOKEN> ( </a> 
<a> com . google . protobuf . <RARE_TOKEN> . <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = </a> 
<a> <RARE_TOKEN> ( ) . <RARE_TOKEN> ( ) . get ( 0 ) ; </a> 
<a> <RARE_TOKEN> = new </a> 
<a> com . google . protobuf . <RARE_TOKEN> . <RARE_TOKEN> ( </a> 
<a> <RARE_TOKEN> , </a> 
<a> new java . lang . String [ ] { <RARE_TOKEN> , <RARE_TOKEN> , } , </a> 
<a> io . netty . example . localtime . LocalTimeProtocol . Location . class , </a> 
<a> io . netty . example . localtime . LocalTimeProtocol . Location . Builder . class ) ; </a> 
<a> <RARE_TOKEN> = </a> 
<a> <RARE_TOKEN> ( ) . <RARE_TOKEN> ( ) . get ( 1 ) ; </a> 
<a> <RARE_TOKEN> = new </a> 
<a> com . google . protobuf . <RARE_TOKEN> . <RARE_TOKEN> ( </a> 
<a> <RARE_TOKEN> , </a> 
<a> new java . lang . String [ ] { <RARE_TOKEN> , } , </a> 
<a> io . netty . example . localtime . LocalTimeProtocol . Locations . class , </a> 
<a> io . netty . example . localtime . LocalTimeProtocol . Locations . Builder . class ) ; </a> 
<a> <RARE_TOKEN> = </a> 
<a> <RARE_TOKEN> ( ) . <RARE_TOKEN> ( ) . get ( 2 ) ; </a> 
<a> <RARE_TOKEN> = new </a> 
<a> com . google . protobuf . <RARE_TOKEN> . <RARE_TOKEN> ( </a> 
<a> <RARE_TOKEN> , </a> 
<a> new java . lang . String [ ] { <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , } , </a> 
<a> io . netty . example . localtime . LocalTimeProtocol . LocalTime . class , </a> 
<a> io . netty . example . localtime . LocalTimeProtocol . LocalTime . Builder . class ) ; </a> 
<a> <RARE_TOKEN> = </a> 
<a> <RARE_TOKEN> ( ) . <RARE_TOKEN> ( ) . get ( 3 ) ; </a> 
<a> <RARE_TOKEN> = new </a> 
<a> com . google . protobuf . <RARE_TOKEN> . <RARE_TOKEN> ( </a> 
<a> <RARE_TOKEN> , </a> 
<a> new java . lang . String [ ] { <RARE_TOKEN> , } , </a> 
<a> io . netty . example . localtime . LocalTimeProtocol . LocalTimes . class , </a> 
<a> io . netty . example . localtime . LocalTimeProtocol . LocalTimes . Builder . class ) ; </a> 
<a> return null ; </a> 
<a> } </a> 
<a> } ; </a> 
<a> com . google . protobuf . <RARE_TOKEN> . <RARE_TOKEN> </a> 
<a> . <RARE_TOKEN> ( <RARE_TOKEN> , </a> 
<a> new com . google . protobuf . <RARE_TOKEN> . <RARE_TOKEN> [ ] { </a> 
<a> } , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . example . localtime ; </a> 
<a> import io . netty . bootstrap . ServerBootstrap ; </a> 
<a> import io . netty . channel . socket . nio . NioEventLoopGroup ; </a> 
<a> import io . netty . channel . socket . nio . <RARE_TOKEN> ; </a> 
<a> public class <RARE_TOKEN> { </a> 
<a> private final int port ; </a> 
<a> public <RARE_TOKEN> ( int port ) { </a> 
<a> this . port = port ; </a> 
<a> } </a> 
<a> public void run ( ) throws Exception { </a> 
<a> ServerBootstrap b = new ServerBootstrap ( ) ; </a> 
<a> try { </a> 
<a> b . group ( new NioEventLoopGroup ( ) , new NioEventLoopGroup ( ) ) </a> 
<a> . channel ( new <RARE_TOKEN> ( ) ) </a> 
<a> . localAddress ( port ) </a> 
<a> . <RARE_TOKEN> ( new <RARE_TOKEN> ( ) ) ; </a> 
<a> b . bind ( ) . sync ( ) . channel ( ) . <RARE_TOKEN> ( ) . sync ( ) ; </a> 
<a> } finally { </a> 
<a> b . shutdown ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public static void <RARE_TOKEN> ( String [ ] args ) throws Exception { </a> 
<a> int port ; </a> 
<a> if ( args . length > 0 ) { </a> 
<a> port = Integer . parseInt ( args [ 0 ] ) ; </a> 
<a> } else { </a> 
<a> port = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> new <RARE_TOKEN> ( port ) . run ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . example . localtime ; </a> 
<a> import static java . util . <RARE_TOKEN> . * ; </a> 
<a> import io . netty . channel . ChannelHandlerContext ; </a> 
<a> import io . netty . channel . ChannelInboundMessageHandlerAdapter ; </a> 
<a> import io . netty . example . localtime . LocalTimeProtocol . <RARE_TOKEN> ; </a> 
<a> import io . netty . example . localtime . LocalTimeProtocol . <RARE_TOKEN> ; </a> 
<a> import io . netty . example . localtime . LocalTimeProtocol . LocalTime ; </a> 
<a> import io . netty . example . localtime . LocalTimeProtocol . LocalTimes ; </a> 
<a> import io . netty . example . localtime . LocalTimeProtocol . Location ; </a> 
<a> import io . netty . example . localtime . LocalTimeProtocol . Locations ; </a> 
<a> import java . util . <RARE_TOKEN> ; </a> 
<a> import java . util . <RARE_TOKEN> ; </a> 
<a> import java . util . logging . Level ; </a> 
<a> import java . util . logging . Logger ; </a> 
<a> public class <RARE_TOKEN> extends ChannelInboundMessageHandlerAdapter < Locations > { </a> 
<a> private static final Logger logger = Logger . getLogger ( </a> 
<a> <RARE_TOKEN> . class . getName ( ) ) ; </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ChannelHandlerContext ctx , Locations <RARE_TOKEN> ) throws Exception { </a> 
<a> long currentTime = System . currentTimeMillis ( ) ; </a> 
<a> LocalTimes . Builder builder = LocalTimes . newBuilder ( ) ; </a> 
<a> for ( Location l : <RARE_TOKEN> . <RARE_TOKEN> ( ) ) { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( </a> 
<a> toString ( l . <RARE_TOKEN> ( ) ) + <RARE_TOKEN> + l . <RARE_TOKEN> ( ) ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = <RARE_TOKEN> . getInstance ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( currentTime ) ; </a> 
<a> builder . <RARE_TOKEN> ( LocalTime . newBuilder ( ) . </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> . get ( <RARE_TOKEN> ) ) . </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> . get ( <RARE_TOKEN> ) + 1 ) . </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> . get ( <RARE_TOKEN> ) ) . </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> . valueOf ( <RARE_TOKEN> . get ( <RARE_TOKEN> ) ) ) . </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> . get ( <RARE_TOKEN> ) ) . </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> . get ( <RARE_TOKEN> ) ) . </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> . get ( <RARE_TOKEN> ) ) . build ( ) ) ; </a> 
<a> } </a> 
<a> ctx . write ( builder . build ( ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void exceptionCaught ( ChannelHandlerContext ctx , Throwable cause ) throws Exception { </a> 
<a> logger . log ( </a> 
<a> Level . <RARE_TOKEN> , </a> 
<a> "Unexpected exception from <RARE_TOKEN> , cause ) ; </a> 
<a> ctx . close ( ) ; </a> 
<a> } </a> 
<a> private static String toString ( <RARE_TOKEN> c ) { </a> 
<a> return c . name ( ) . charAt ( 0 ) + c . name ( ) . <RARE_TOKEN> ( ) . substring ( 1 ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . example . localtime ; </a> 
<a> import io . netty . channel . ChannelInitializer ; </a> 
<a> import io . netty . channel . ChannelPipeline ; </a> 
<a> import io . netty . channel . socket . SocketChannel ; </a> 
<a> import io . netty . handler . codec . protobuf . <RARE_TOKEN> ; </a> 
<a> import io . netty . handler . codec . protobuf . <RARE_TOKEN> ; </a> 
<a> import io . netty . handler . codec . protobuf . <RARE_TOKEN> ; </a> 
<a> import io . netty . handler . codec . protobuf . <RARE_TOKEN> ; </a> 
<a> public class <RARE_TOKEN> extends ChannelInitializer < SocketChannel > { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( SocketChannel ch ) throws Exception { </a> 
<a> ChannelPipeline p = ch . pipeline ( ) ; </a> 
<a> p . addLast ( <RARE_TOKEN> , new <RARE_TOKEN> ( ) ) ; </a> 
<a> p . addLast ( <RARE_TOKEN> , new <RARE_TOKEN> ( LocalTimeProtocol . Locations . <RARE_TOKEN> ( ) ) ) ; </a> 
<a> p . addLast ( <RARE_TOKEN> , new <RARE_TOKEN> ( ) ) ; </a> 
<a> p . addLast ( <RARE_TOKEN> , new <RARE_TOKEN> ( ) ) ; </a> 
<a> p . addLast ( <RARE_TOKEN> , new <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . example . <RARE_TOKEN> ; </a> 
<a> import io . netty . channel . ChannelHandlerContext ; </a> 
<a> import io . netty . channel . ChannelInboundMessageHandlerAdapter ; </a> 
<a> import java . util . ArrayList ; </a> 
<a> import java . util . List ; </a> 
<a> import java . util . logging . Level ; </a> 
<a> import java . util . logging . Logger ; </a> 
<a> public class <RARE_TOKEN> extends ChannelInboundMessageHandlerAdapter < List < Integer > > { </a> 
<a> private static final Logger logger = Logger . getLogger ( </a> 
<a> <RARE_TOKEN> . class . getName ( ) ) ; </a> 
<a> private final List < Integer > <RARE_TOKEN> ; </a> 
<a> public <RARE_TOKEN> ( int <RARE_TOKEN> ) { </a> 
<a> if ( <RARE_TOKEN> <= 0 ) { </a> 
<a> throw new IllegalArgumentException ( </a> 
<a> <RARE_TOKEN> " + <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> = new ArrayList < Integer > ( <RARE_TOKEN> ) ; </a> 
<a> for ( int i = 0 ; i < <RARE_TOKEN> ; i ++ ) { </a> 
<a> <RARE_TOKEN> . add ( Integer . valueOf ( i ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ChannelHandlerContext ctx ) throws Exception { </a> 
<a> ctx . write ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ChannelHandlerContext ctx , List < Integer > msg ) throws Exception { </a> 
<a> ctx . write ( msg ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void exceptionCaught ( </a> 
<a> ChannelHandlerContext ctx , Throwable cause ) throws Exception { </a> 
<a> logger . log ( </a> 
<a> Level . <RARE_TOKEN> , </a> 
<a> "Unexpected exception from <RARE_TOKEN> , cause ) ; </a> 
<a> ctx . close ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . example . <RARE_TOKEN> ; </a> 
<a> import io . netty . bootstrap . ServerBootstrap ; </a> 
<a> import io . netty . channel . ChannelInitializer ; </a> 
<a> import io . netty . channel . socket . SocketChannel ; </a> 
<a> import io . netty . channel . socket . nio . NioEventLoopGroup ; </a> 
<a> import io . netty . channel . socket . nio . <RARE_TOKEN> ; </a> 
<a> import io . netty . example . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import io . netty . handler . codec . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import io . netty . handler . codec . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import io . netty . handler . codec . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> public class <RARE_TOKEN> { </a> 
<a> private final int port ; </a> 
<a> public <RARE_TOKEN> ( int port ) { </a> 
<a> this . port = port ; </a> 
<a> } </a> 
<a> public void run ( ) throws Exception { </a> 
<a> ServerBootstrap b = new ServerBootstrap ( ) ; </a> 
<a> try { </a> 
<a> b . group ( new NioEventLoopGroup ( ) , new NioEventLoopGroup ( ) ) </a> 
<a> . channel ( new <RARE_TOKEN> ( ) ) </a> 
<a> . localAddress ( port ) </a> 
<a> . <RARE_TOKEN> ( new ChannelInitializer < SocketChannel > ( ) { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( SocketChannel ch ) throws Exception { </a> 
<a> ch . pipeline ( ) . addLast ( </a> 
<a> new <RARE_TOKEN> ( ) , </a> 
<a> new <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ( null ) ) , </a> 
<a> new <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> b . bind ( ) . sync ( ) . channel ( ) . <RARE_TOKEN> ( ) . sync ( ) ; </a> 
<a> } finally { </a> 
<a> b . shutdown ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public static void <RARE_TOKEN> ( String [ ] args ) throws Exception { </a> 
<a> int port ; </a> 
<a> if ( args . length > 0 ) { </a> 
<a> port = Integer . parseInt ( args [ 0 ] ) ; </a> 
<a> } else { </a> 
<a> port = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> new <RARE_TOKEN> ( port ) . run ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . example . <RARE_TOKEN> ; </a> 
<a> import io . netty . channel . ChannelHandlerContext ; </a> 
<a> import io . netty . channel . ChannelInboundMessageHandlerAdapter ; </a> 
<a> import java . util . List ; </a> 
<a> import java . util . logging . Level ; </a> 
<a> import java . util . logging . Logger ; </a> 
<a> public class <RARE_TOKEN> extends ChannelInboundMessageHandlerAdapter < List < Integer > > { </a> 
<a> private static final Logger logger = Logger . getLogger ( </a> 
<a> <RARE_TOKEN> . class . getName ( ) ) ; </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( </a> 
<a> ChannelHandlerContext ctx , List < Integer > msg ) throws Exception { </a> 
<a> ctx . write ( msg ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void exceptionCaught ( </a> 
<a> ChannelHandlerContext ctx , Throwable cause ) throws Exception { </a> 
<a> logger . log ( </a> 
<a> Level . <RARE_TOKEN> , </a> 
<a> "Unexpected exception from <RARE_TOKEN> , cause ) ; </a> 
<a> ctx . close ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . example . <RARE_TOKEN> ; </a> 
<a> import io . netty . bootstrap . ServerBootstrap ; </a> 
<a> import io . netty . channel . ChannelInitializer ; </a> 
<a> import io . netty . channel . socket . SocketChannel ; </a> 
<a> import io . netty . channel . socket . nio . NioEventLoopGroup ; </a> 
<a> import io . netty . channel . socket . nio . <RARE_TOKEN> ; </a> 
<a> public class <RARE_TOKEN> { </a> 
<a> private final int port ; </a> 
<a> public <RARE_TOKEN> ( int port ) { </a> 
<a> this . port = port ; </a> 
<a> } </a> 
<a> public void run ( ) throws Exception { </a> 
<a> ServerBootstrap b = new ServerBootstrap ( ) ; </a> 
<a> try { </a> 
<a> b . group ( new NioEventLoopGroup ( ) , new NioEventLoopGroup ( ) ) </a> 
<a> . channel ( new <RARE_TOKEN> ( ) ) </a> 
<a> . localAddress ( port ) </a> 
<a> . <RARE_TOKEN> ( new ChannelInitializer < SocketChannel > ( ) { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( SocketChannel ch ) throws Exception { </a> 
<a> ch . pipeline ( ) . addLast ( new <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> b . bind ( ) . sync ( ) . channel ( ) . <RARE_TOKEN> ( ) . sync ( ) ; </a> 
<a> } finally { </a> 
<a> b . shutdown ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public static void <RARE_TOKEN> ( String [ ] args ) throws Exception { </a> 
<a> int port ; </a> 
<a> if ( args . length > 0 ) { </a> 
<a> port = Integer . parseInt ( args [ 0 ] ) ; </a> 
<a> } else { </a> 
<a> port = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> new <RARE_TOKEN> ( port ) . run ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . example . <RARE_TOKEN> ; </a> 
<a> import io . netty . buffer . ByteBuf ; </a> 
<a> import io . netty . channel . ChannelHandlerContext ; </a> 
<a> import io . netty . channel . <RARE_TOKEN> ; </a> 
<a> import io . netty . channel . ChannelPipeline ; </a> 
<a> import io . netty . example . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import io . netty . example . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import io . netty . example . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import io . netty . example . http . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import io . netty . example . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import io . netty . handler . codec . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import io . netty . handler . codec . <RARE_TOKEN> . ZlibWrapper ; </a> 
<a> import io . netty . handler . codec . http . <RARE_TOKEN> ; </a> 
<a> import io . netty . handler . codec . http . <RARE_TOKEN> ; </a> 
<a> import io . netty . handler . codec . http . <RARE_TOKEN> ; </a> 
<a> import io . netty . handler . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import javax . net . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> private final boolean <RARE_TOKEN> ; </a> 
<a> private final boolean <RARE_TOKEN> ; </a> 
<a> public <RARE_TOKEN> ( ) { </a> 
<a> this ( true , true ) ; </a> 
<a> } </a> 
<a> private <RARE_TOKEN> ( boolean <RARE_TOKEN> , boolean <RARE_TOKEN> ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void inboundBufferUpdated ( ChannelHandlerContext ctx , ByteBuf in ) throws Exception { </a> 
<a> if ( in . readableBytes ( ) < 2 ) { </a> 
<a> return ; </a> 
<a> } </a> 
<a> final int <RARE_TOKEN> = in . <RARE_TOKEN> ( in . readerIndex ( ) ) ; </a> 
<a> final int <RARE_TOKEN> = in . <RARE_TOKEN> ( in . readerIndex ( ) + 1 ) ; </a> 
<a> if ( <RARE_TOKEN> ( <RARE_TOKEN> ) ) { </a> 
<a> <RARE_TOKEN> ( ctx ) ; </a> 
<a> } else if ( <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ) { </a> 
<a> <RARE_TOKEN> ( ctx ) ; </a> 
<a> } else if ( <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ) { </a> 
<a> <RARE_TOKEN> ( ctx ) ; </a> 
<a> } else if ( <RARE_TOKEN> ( <RARE_TOKEN> ) ) { </a> 
<a> <RARE_TOKEN> ( ctx ) ; </a> 
<a> } else { </a> 
<a> in . clear ( ) ; </a> 
<a> ctx . close ( ) ; </a> 
<a> return ; </a> 
<a> } </a> 
<a> ctx . <RARE_TOKEN> ( ) . writeBytes ( in ) ; </a> 
<a> ctx . fireInboundBufferUpdated ( ) ; </a> 
<a> } </a> 
<a> private boolean <RARE_TOKEN> ( int <RARE_TOKEN> ) { </a> 
<a> if ( <RARE_TOKEN> ) { </a> 
<a> switch ( <RARE_TOKEN> ) { </a> 
<a> case 20 : case <RARE_TOKEN> : case <RARE_TOKEN> : case 23 : case <RARE_TOKEN> : </a> 
<a> return true ; </a> 
<a> default : </a> 
<a> return <RARE_TOKEN> >= <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<a> return false ; </a> 
<a> } </a> 
<a> private boolean <RARE_TOKEN> ( int <RARE_TOKEN> , int <RARE_TOKEN> ) { </a> 
<a> if ( <RARE_TOKEN> ) { </a> 
<a> return <RARE_TOKEN> == <RARE_TOKEN> && <RARE_TOKEN> == <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> return false ; </a> 
<a> } </a> 
<a> private static boolean <RARE_TOKEN> ( int <RARE_TOKEN> , int <RARE_TOKEN> ) { </a> 
<a> return </a> 
<a> <RARE_TOKEN> == <RARE_TOKEN> && <RARE_TOKEN> == <RARE_TOKEN> || </a> 
<a> <RARE_TOKEN> == <RARE_TOKEN> && <RARE_TOKEN> == <RARE_TOKEN> || </a> 
<a> <RARE_TOKEN> == <RARE_TOKEN> && <RARE_TOKEN> == <RARE_TOKEN> || </a> 
<a> <RARE_TOKEN> == <RARE_TOKEN> && <RARE_TOKEN> == <RARE_TOKEN> || </a> 
<a> <RARE_TOKEN> == <RARE_TOKEN> && <RARE_TOKEN> == <RARE_TOKEN> || </a> 
<a> <RARE_TOKEN> == <RARE_TOKEN> && <RARE_TOKEN> == <RARE_TOKEN> || </a> 
<a> <RARE_TOKEN> == <RARE_TOKEN> && <RARE_TOKEN> == <RARE_TOKEN> || </a> 
<a> <RARE_TOKEN> == <RARE_TOKEN> && <RARE_TOKEN> == <RARE_TOKEN> || </a> 
<a> <RARE_TOKEN> == <RARE_TOKEN> && <RARE_TOKEN> == <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> private static boolean <RARE_TOKEN> ( int <RARE_TOKEN> ) { </a> 
<a> return <RARE_TOKEN> == <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( ChannelHandlerContext ctx ) { </a> 
<a> ChannelPipeline p = ctx . pipeline ( ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( false ) ; </a> 
<a> p . addLast ( <RARE_TOKEN> , new <RARE_TOKEN> ( <RARE_TOKEN> ) ) ; </a> 
<a> p . addLast ( <RARE_TOKEN> , new <RARE_TOKEN> ( false , <RARE_TOKEN> ) ) ; </a> 
<a> p . remove ( this ) ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( ChannelHandlerContext ctx ) { </a> 
<a> ChannelPipeline p = ctx . pipeline ( ) ; </a> 
<a> p . addLast ( <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> ( ZlibWrapper . <RARE_TOKEN> ) ) ; </a> 
<a> p . addLast ( <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> ( ZlibWrapper . <RARE_TOKEN> ) ) ; </a> 
<a> p . addLast ( <RARE_TOKEN> , new <RARE_TOKEN> ( <RARE_TOKEN> , false ) ) ; </a> 
<a> p . remove ( this ) ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( ChannelHandlerContext ctx ) { </a> 
<a> ChannelPipeline p = ctx . pipeline ( ) ; </a> 
<a> p . addLast ( <RARE_TOKEN> , new <RARE_TOKEN> ( ) ) ; </a> 
<a> p . addLast ( <RARE_TOKEN> , new <RARE_TOKEN> ( ) ) ; </a> 
<a> p . addLast ( <RARE_TOKEN> , new <RARE_TOKEN> ( ) ) ; </a> 
<a> p . addLast ( <RARE_TOKEN> , new <RARE_TOKEN> ( ) ) ; </a> 
<a> p . remove ( this ) ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( ChannelHandlerContext ctx ) { </a> 
<a> ChannelPipeline p = ctx . pipeline ( ) ; </a> 
<a> p . addLast ( <RARE_TOKEN> , new <RARE_TOKEN> ( ) ) ; </a> 
<a> p . addLast ( <RARE_TOKEN> , new <RARE_TOKEN> ( ) ) ; </a> 
<a> p . addLast ( <RARE_TOKEN> , new <RARE_TOKEN> ( ) ) ; </a> 
<a> p . remove ( this ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . example . <RARE_TOKEN> ; </a> 
<a> import io . netty . bootstrap . ServerBootstrap ; </a> 
<a> import io . netty . channel . socket . nio . NioEventLoopGroup ; </a> 
<a> import io . netty . channel . socket . nio . <RARE_TOKEN> ; </a> 
<a> public class <RARE_TOKEN> { </a> 
<a> private final int <RARE_TOKEN> ; </a> 
<a> private final String <RARE_TOKEN> ; </a> 
<a> private final int <RARE_TOKEN> ; </a> 
<a> public <RARE_TOKEN> ( int <RARE_TOKEN> , String <RARE_TOKEN> , int <RARE_TOKEN> ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public void run ( ) throws Exception { </a> 
<a> System . <RARE_TOKEN> . println ( </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> + <RARE_TOKEN> + " to " + </a> 
<a> <RARE_TOKEN> + <RARE_TOKEN> + <RARE_TOKEN> + " <RARE_TOKEN> ) ; </a> 
<a> ServerBootstrap b = new ServerBootstrap ( ) ; </a> 
<a> try { </a> 
<a> b . group ( new NioEventLoopGroup ( ) , new NioEventLoopGroup ( ) ) </a> 
<a> . channel ( new <RARE_TOKEN> ( ) ) </a> 
<a> . localAddress ( <RARE_TOKEN> ) </a> 
<a> . <RARE_TOKEN> ( new <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ) ; </a> 
<a> b . bind ( ) . sync ( ) . channel ( ) . <RARE_TOKEN> ( ) . sync ( ) ; </a> 
<a> } finally { </a> 
<a> b . shutdown ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public static void <RARE_TOKEN> ( String [ ] args ) throws Exception { </a> 
<a> if ( args . length != 3 ) { </a> 
<a> System . <RARE_TOKEN> . println ( </a> 
<a> <RARE_TOKEN> " + <RARE_TOKEN> . class . getSimpleName ( ) + </a> 
<a> " <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> return ; </a> 
<a> } </a> 
<a> int <RARE_TOKEN> = Integer . parseInt ( args [ 0 ] ) ; </a> 
<a> String <RARE_TOKEN> = args [ 1 ] ; </a> 
<a> int <RARE_TOKEN> = Integer . parseInt ( args [ 2 ] ) ; </a> 
<a> new <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> ) . run ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . example . <RARE_TOKEN> ; </a> 
<a> import io . netty . buffer . ByteBuf ; </a> 
<a> import io . netty . channel . Channel ; </a> 
<a> import io . netty . channel . ChannelHandlerContext ; </a> 
<a> import io . netty . channel . <RARE_TOKEN> ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> private final Channel <RARE_TOKEN> ; </a> 
<a> public <RARE_TOKEN> ( Channel <RARE_TOKEN> ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ChannelHandlerContext ctx ) throws Exception { </a> 
<a> ctx . flush ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void inboundBufferUpdated ( ChannelHandlerContext ctx , ByteBuf in ) throws Exception { </a> 
<a> ByteBuf out = <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> out . <RARE_TOKEN> ( ) ; </a> 
<a> out . writeBytes ( in ) ; </a> 
<a> in . clear ( ) ; </a> 
<a> <RARE_TOKEN> . flush ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ChannelHandlerContext ctx ) throws Exception { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void exceptionCaught ( ChannelHandlerContext ctx , Throwable cause ) throws Exception { </a> 
<a> cause . printStackTrace ( ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ctx . channel ( ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . example . <RARE_TOKEN> ; </a> 
<a> import io . netty . bootstrap . Bootstrap ; </a> 
<a> import io . netty . buffer . Unpooled ; </a> 
<a> import io . netty . channel . Channel ; </a> 
<a> import io . netty . channel . ChannelOption ; </a> 
<a> import io . netty . channel . socket . <RARE_TOKEN> ; </a> 
<a> import io . netty . channel . socket . nio . <RARE_TOKEN> ; </a> 
<a> import io . netty . channel . socket . nio . NioEventLoopGroup ; </a> 
<a> import io . netty . util . CharsetUtil ; </a> 
<a> import java . net . InetSocketAddress ; </a> 
<a> public class <RARE_TOKEN> { </a> 
<a> private final int port ; </a> 
<a> public <RARE_TOKEN> ( int port ) { </a> 
<a> this . port = port ; </a> 
<a> } </a> 
<a> public void run ( ) throws Exception { </a> 
<a> Bootstrap b = new Bootstrap ( ) ; </a> 
<a> try { </a> 
<a> b . group ( new NioEventLoopGroup ( ) ) </a> 
<a> . channel ( new <RARE_TOKEN> ( ) ) </a> 
<a> . localAddress ( new InetSocketAddress ( 0 ) ) </a> 
<a> . option ( ChannelOption . <RARE_TOKEN> , true ) </a> 
<a> . handler ( new <RARE_TOKEN> ( ) ) ; </a> 
<a> Channel ch = b . bind ( ) . sync ( ) . channel ( ) ; </a> 
<a> ch . write ( new <RARE_TOKEN> ( </a> 
<a> Unpooled . copiedBuffer ( <RARE_TOKEN> , CharsetUtil . <RARE_TOKEN> ) , </a> 
<a> new InetSocketAddress ( <RARE_TOKEN> , port ) ) ) ; </a> 
<a> if ( ! ch . <RARE_TOKEN> ( ) . await ( <RARE_TOKEN> ) ) { </a> 
<a> System . <RARE_TOKEN> . println ( <RARE_TOKEN> request <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } finally { </a> 
<a> b . shutdown ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public static void <RARE_TOKEN> ( String [ ] args ) throws Exception { </a> 
<a> int port ; </a> 
<a> if ( args . length > 0 ) { </a> 
<a> port = Integer . parseInt ( args [ 0 ] ) ; </a> 
<a> } else { </a> 
<a> port = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> new <RARE_TOKEN> ( port ) . run ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . example . <RARE_TOKEN> ; </a> 
<a> import io . netty . channel . ChannelHandlerContext ; </a> 
<a> import io . netty . channel . ChannelInboundMessageHandlerAdapter ; </a> 
<a> import io . netty . channel . socket . <RARE_TOKEN> ; </a> 
<a> import io . netty . util . CharsetUtil ; </a> 
<a> public class <RARE_TOKEN> extends ChannelInboundMessageHandlerAdapter < <RARE_TOKEN> > { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( </a> 
<a> ChannelHandlerContext ctx , <RARE_TOKEN> msg ) </a> 
<a> throws Exception { </a> 
<a> String response = msg . data ( ) . toString ( CharsetUtil . <RARE_TOKEN> ) ; </a> 
<a> if ( response . startsWith ( <RARE_TOKEN> " ) ) { </a> 
<a> System . out . println ( <RARE_TOKEN> of the <RARE_TOKEN> " + response . substring ( 6 ) ) ; </a> 
<a> ctx . close ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void exceptionCaught ( </a> 
<a> ChannelHandlerContext ctx , Throwable cause ) </a> 
<a> throws Exception { </a> 
<a> cause . printStackTrace ( ) ; </a> 
<a> ctx . close ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . example . <RARE_TOKEN> ; </a> 
<a> import io . netty . bootstrap . Bootstrap ; </a> 
<a> import io . netty . channel . ChannelOption ; </a> 
<a> import io . netty . channel . socket . nio . <RARE_TOKEN> ; </a> 
<a> import io . netty . channel . socket . nio . NioEventLoopGroup ; </a> 
<a> import java . net . InetSocketAddress ; </a> 
<a> public class <RARE_TOKEN> { </a> 
<a> private final int port ; </a> 
<a> public <RARE_TOKEN> ( int port ) { </a> 
<a> this . port = port ; </a> 
<a> } </a> 
<a> public void run ( ) throws Exception { </a> 
<a> Bootstrap b = new Bootstrap ( ) ; </a> 
<a> try { </a> 
<a> b . group ( new NioEventLoopGroup ( ) ) </a> 
<a> . channel ( new <RARE_TOKEN> ( ) ) </a> 
<a> . localAddress ( new InetSocketAddress ( port ) ) </a> 
<a> . option ( ChannelOption . <RARE_TOKEN> , true ) </a> 
<a> . handler ( new <RARE_TOKEN> ( ) ) ; </a> 
<a> b . bind ( ) . sync ( ) . channel ( ) . <RARE_TOKEN> ( ) . await ( ) ; </a> 
<a> } finally { </a> 
<a> b . shutdown ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public static void <RARE_TOKEN> ( String [ ] args ) throws Exception { </a> 
<a> int port ; </a> 
<a> if ( args . length > 0 ) { </a> 
<a> port = Integer . parseInt ( args [ 0 ] ) ; </a> 
<a> } else { </a> 
<a> port = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> new <RARE_TOKEN> ( port ) . run ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . example . <RARE_TOKEN> ; </a> 
<a> import io . netty . buffer . Unpooled ; </a> 
<a> import io . netty . channel . ChannelHandlerContext ; </a> 
<a> import io . netty . channel . ChannelInboundMessageHandlerAdapter ; </a> 
<a> import io . netty . channel . socket . <RARE_TOKEN> ; </a> 
<a> import io . netty . util . CharsetUtil ; </a> 
<a> import java . util . Random ; </a> 
<a> public class <RARE_TOKEN> extends ChannelInboundMessageHandlerAdapter < <RARE_TOKEN> > { </a> 
<a> private static final Random random = new Random ( ) ; </a> 
<a> private static final String [ ] <RARE_TOKEN> = { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> is <RARE_TOKEN> <RARE_TOKEN> is <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> the <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> to <RARE_TOKEN> in the <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> is the <RARE_TOKEN> of the <RARE_TOKEN> , </a> 
<a> } ; </a> 
<a> private static String <RARE_TOKEN> ( ) { </a> 
<a> int <RARE_TOKEN> ; </a> 
<a> synchronized ( random ) { </a> 
<a> <RARE_TOKEN> = random . nextInt ( <RARE_TOKEN> . length ) ; </a> 
<a> } </a> 
<a> return <RARE_TOKEN> [ <RARE_TOKEN> ] ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( </a> 
<a> ChannelHandlerContext ctx , <RARE_TOKEN> msg ) </a> 
<a> throws Exception { </a> 
<a> if ( msg . data ( ) . toString ( CharsetUtil . <RARE_TOKEN> ) . equals ( <RARE_TOKEN> ) ) { </a> 
<a> ctx . write ( new <RARE_TOKEN> ( </a> 
<a> Unpooled . copiedBuffer ( <RARE_TOKEN> " + <RARE_TOKEN> ( ) , CharsetUtil . <RARE_TOKEN> ) , </a> 
<a> msg . remoteAddress ( ) ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void exceptionCaught ( </a> 
<a> ChannelHandlerContext ctx , Throwable cause ) </a> 
<a> throws Exception { </a> 
<a> cause . printStackTrace ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . example . <RARE_TOKEN> ; </a> 
<a> import io . netty . bootstrap . Bootstrap ; </a> 
<a> import io . netty . channel . Channel ; </a> 
<a> import io . netty . channel . ChannelFuture ; </a> 
<a> import io . netty . channel . socket . nio . NioEventLoopGroup ; </a> 
<a> import io . netty . channel . socket . nio . <RARE_TOKEN> ; </a> 
<a> import io . netty . example . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import java . io . <RARE_TOKEN> ; </a> 
<a> import java . io . <RARE_TOKEN> ; </a> 
<a> public class <RARE_TOKEN> { </a> 
<a> private final String host ; </a> 
<a> private final int port ; </a> 
<a> public <RARE_TOKEN> ( String host , int port ) { </a> 
<a> this . host = host ; </a> 
<a> this . port = port ; </a> 
<a> } </a> 
<a> public void run ( ) throws Exception { </a> 
<a> Bootstrap b = new Bootstrap ( ) ; </a> 
<a> try { </a> 
<a> b . group ( new NioEventLoopGroup ( ) ) </a> 
<a> . channel ( new <RARE_TOKEN> ( ) ) </a> 
<a> . remoteAddress ( host , port ) </a> 
<a> . handler ( new <RARE_TOKEN> ( ) ) ; </a> 
<a> Channel ch = b . connect ( ) . sync ( ) . channel ( ) ; </a> 
<a> ChannelFuture <RARE_TOKEN> = null ; </a> 
<a> <RARE_TOKEN> in = new <RARE_TOKEN> ( new <RARE_TOKEN> ( System . in ) ) ; </a> 
<a> for ( ; ; ) { </a> 
<a> String <RARE_TOKEN> = in . <RARE_TOKEN> ( ) ; </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> break ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> = ch . write ( <RARE_TOKEN> + <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> . <RARE_TOKEN> ( ) . equals ( <RARE_TOKEN> ) ) { </a> 
<a> ch . <RARE_TOKEN> ( ) . sync ( ) ; </a> 
<a> break ; </a> 
<a> } </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> . sync ( ) ; </a> 
<a> } </a> 
<a> } finally { </a> 
<a> b . shutdown ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public static void <RARE_TOKEN> ( String [ ] args ) throws Exception { </a> 
<a> if ( args . length != 2 ) { </a> 
<a> System . <RARE_TOKEN> . println ( </a> 
<a> <RARE_TOKEN> " + <RARE_TOKEN> . class . getSimpleName ( ) + </a> 
<a> " <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> return ; </a> 
<a> } </a> 
<a> String host = args [ 0 ] ; </a> 
<a> int port = Integer . parseInt ( args [ 1 ] ) ; </a> 
<a> new <RARE_TOKEN> ( host , port ) . run ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . example . <RARE_TOKEN> ; </a> 
<a> import io . netty . channel . ChannelHandlerContext ; </a> 
<a> import io . netty . channel . ChannelInboundMessageHandlerAdapter ; </a> 
<a> import java . util . logging . Level ; </a> 
<a> import java . util . logging . Logger ; </a> 
<a> public class <RARE_TOKEN> extends ChannelInboundMessageHandlerAdapter < String > { </a> 
<a> private static final Logger logger = Logger . getLogger ( </a> 
<a> <RARE_TOKEN> . class . getName ( ) ) ; </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ChannelHandlerContext ctx , String msg ) throws Exception { </a> 
<a> System . <RARE_TOKEN> . println ( msg ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void exceptionCaught ( ChannelHandlerContext ctx , Throwable cause ) throws Exception { </a> 
<a> logger . log ( </a> 
<a> Level . <RARE_TOKEN> , </a> 
<a> "Unexpected exception from <RARE_TOKEN> , cause ) ; </a> 
<a> ctx . close ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . example . <RARE_TOKEN> ; </a> 
<a> import io . netty . channel . ChannelInitializer ; </a> 
<a> import io . netty . channel . ChannelPipeline ; </a> 
<a> import io . netty . channel . socket . SocketChannel ; </a> 
<a> import io . netty . handler . codec . <RARE_TOKEN> ; </a> 
<a> import io . netty . handler . codec . <RARE_TOKEN> ; </a> 
<a> import io . netty . handler . codec . string . <RARE_TOKEN> ; </a> 
<a> import io . netty . handler . codec . string . <RARE_TOKEN> ; </a> 
<a> import io . netty . handler . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import javax . net . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> public class <RARE_TOKEN> extends ChannelInitializer < SocketChannel > { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( SocketChannel ch ) throws Exception { </a> 
<a> ChannelPipeline pipeline = ch . pipeline ( ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( true ) ; </a> 
<a> pipeline . addLast ( <RARE_TOKEN> , new <RARE_TOKEN> ( <RARE_TOKEN> ) ) ; </a> 
<a> pipeline . addLast ( <RARE_TOKEN> , new <RARE_TOKEN> ( </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ) ; </a> 
<a> pipeline . addLast ( <RARE_TOKEN> , new <RARE_TOKEN> ( ) ) ; </a> 
<a> pipeline . addLast ( <RARE_TOKEN> , new <RARE_TOKEN> ( ) ) ; </a> 
<a> pipeline . addLast ( <RARE_TOKEN> , new <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . example . <RARE_TOKEN> ; </a> 
<a> import java . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import java . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import java . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import java . <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import java . <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import javax . net . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import javax . net . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import javax . net . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import javax . net . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> private static final <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( ) { </a> 
<a> @ Override </a> 
<a> public <RARE_TOKEN> [ ] <RARE_TOKEN> ( ) { </a> 
<a> return new <RARE_TOKEN> [ 0 ] ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( </a> 
<a> <RARE_TOKEN> [ ] <RARE_TOKEN> , String <RARE_TOKEN> ) throws <RARE_TOKEN> { </a> 
<a> System . <RARE_TOKEN> . println ( </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> " + <RARE_TOKEN> [ 0 ] . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( </a> 
<a> <RARE_TOKEN> [ ] <RARE_TOKEN> , String <RARE_TOKEN> ) throws <RARE_TOKEN> { </a> 
<a> System . <RARE_TOKEN> . println ( </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> " + <RARE_TOKEN> [ 0 ] . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> } ; </a> 
<a> public static <RARE_TOKEN> [ ] <RARE_TOKEN> ( ) { </a> 
<a> return new <RARE_TOKEN> [ ] { <RARE_TOKEN> } ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected <RARE_TOKEN> [ ] <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> ) throws <RARE_TOKEN> { </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> ) </a> 
<a> throws <RARE_TOKEN> { </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . example . <RARE_TOKEN> ; </a> 
<a> import io . netty . channel . ChannelHandler . Sharable ; </a> 
<a> import io . netty . channel . ChannelHandlerContext ; </a> 
<a> import io . netty . channel . ChannelInboundMessageHandlerAdapter ; </a> 
<a> import java . util . logging . Level ; </a> 
<a> import java . util . logging . Logger ; </a> 
<a> @ Sharable </a> 
<a> public class <RARE_TOKEN> extends ChannelInboundMessageHandlerAdapter < String > { </a> 
<a> private static final Logger logger = Logger . getLogger ( </a> 
<a> <RARE_TOKEN> . class . getName ( ) ) ; </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ChannelHandlerContext ctx , String msg ) throws Exception { </a> 
<a> System . <RARE_TOKEN> . println ( msg ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void exceptionCaught ( ChannelHandlerContext ctx , Throwable cause ) throws Exception { </a> 
<a> logger . log ( </a> 
<a> Level . <RARE_TOKEN> , </a> 
<a> "Unexpected exception from <RARE_TOKEN> , cause ) ; </a> 
<a> ctx . close ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . example . <RARE_TOKEN> ; </a> 
<a> import io . netty . channel . ChannelInitializer ; </a> 
<a> import io . netty . channel . ChannelPipeline ; </a> 
<a> import io . netty . channel . socket . SocketChannel ; </a> 
<a> import io . netty . handler . codec . <RARE_TOKEN> ; </a> 
<a> import io . netty . handler . codec . <RARE_TOKEN> ; </a> 
<a> import io . netty . handler . codec . string . <RARE_TOKEN> ; </a> 
<a> import io . netty . handler . codec . string . <RARE_TOKEN> ; </a> 
<a> public class <RARE_TOKEN> extends ChannelInitializer < SocketChannel > { </a> 
<a> private static final <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( ) ; </a> 
<a> private static final <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( ) ; </a> 
<a> private static final <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( ) ; </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( SocketChannel ch ) throws Exception { </a> 
<a> ChannelPipeline pipeline = ch . pipeline ( ) ; </a> 
<a> pipeline . addLast ( <RARE_TOKEN> , new <RARE_TOKEN> ( </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ) ; </a> 
<a> pipeline . addLast ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> pipeline . addLast ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> pipeline . addLast ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . example . <RARE_TOKEN> ; </a> 
<a> import io . netty . bootstrap . ServerBootstrap ; </a> 
<a> import io . netty . channel . socket . nio . NioEventLoopGroup ; </a> 
<a> import io . netty . channel . socket . nio . <RARE_TOKEN> ; </a> 
<a> public class <RARE_TOKEN> { </a> 
<a> private final int port ; </a> 
<a> public <RARE_TOKEN> ( int port ) { </a> 
<a> this . port = port ; </a> 
<a> } </a> 
<a> public void run ( ) throws Exception { </a> 
<a> ServerBootstrap b = new ServerBootstrap ( ) ; </a> 
<a> try { </a> 
<a> b . group ( new NioEventLoopGroup ( ) , new NioEventLoopGroup ( ) ) </a> 
<a> . channel ( new <RARE_TOKEN> ( ) ) </a> 
<a> . localAddress ( port ) </a> 
<a> . <RARE_TOKEN> ( new <RARE_TOKEN> ( ) ) ; </a> 
<a> b . bind ( ) . sync ( ) . channel ( ) . <RARE_TOKEN> ( ) . sync ( ) ; </a> 
<a> } finally { </a> 
<a> b . shutdown ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public static void <RARE_TOKEN> ( String [ ] args ) throws Exception { </a> 
<a> int port ; </a> 
<a> if ( args . length > 0 ) { </a> 
<a> port = Integer . parseInt ( args [ 0 ] ) ; </a> 
<a> } else { </a> 
<a> port = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> new <RARE_TOKEN> ( port ) . run ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . example . <RARE_TOKEN> ; </a> 
<a> import io . netty . channel . ChannelFuture ; </a> 
<a> import io . netty . channel . ChannelFutureListener ; </a> 
<a> import io . netty . channel . ChannelHandler . Sharable ; </a> 
<a> import io . netty . channel . ChannelHandlerContext ; </a> 
<a> import io . netty . channel . ChannelInboundMessageHandlerAdapter ; </a> 
<a> import java . net . InetAddress ; </a> 
<a> import java . util . Date ; </a> 
<a> import java . util . logging . Level ; </a> 
<a> import java . util . logging . Logger ; </a> 
<a> @ Sharable </a> 
<a> public class <RARE_TOKEN> extends ChannelInboundMessageHandlerAdapter < String > { </a> 
<a> private static final Logger logger = Logger . getLogger ( </a> 
<a> <RARE_TOKEN> . class . getName ( ) ) ; </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ChannelHandlerContext ctx ) throws Exception { </a> 
<a> ctx . write ( </a> 
<a> <RARE_TOKEN> to " + InetAddress . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( ) + <RARE_TOKEN> ) ; </a> 
<a> ctx . write ( <RARE_TOKEN> is " + new Date ( ) + " <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ChannelHandlerContext ctx , String request ) throws Exception { </a> 
<a> String response ; </a> 
<a> boolean close = false ; </a> 
<a> if ( request . length ( ) == 0 ) { </a> 
<a> response = <RARE_TOKEN> type <RARE_TOKEN> ; </a> 
<a> } else if ( request . <RARE_TOKEN> ( ) . equals ( <RARE_TOKEN> ) ) { </a> 
<a> response = <RARE_TOKEN> a <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> close = true ; </a> 
<a> } else { </a> 
<a> response = <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> + request + <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> ChannelFuture future = ctx . write ( response ) ; </a> 
<a> if ( close ) { </a> 
<a> future . addListener ( ChannelFutureListener . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void exceptionCaught ( ChannelHandlerContext ctx , Throwable cause ) throws Exception { </a> 
<a> logger . log ( </a> 
<a> Level . <RARE_TOKEN> , </a> 
<a> "Unexpected exception from <RARE_TOKEN> , cause ) ; </a> 
<a> ctx . close ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . example . <RARE_TOKEN> ; </a> 
<a> import io . netty . channel . ChannelInitializer ; </a> 
<a> import io . netty . channel . ChannelPipeline ; </a> 
<a> import io . netty . channel . socket . SocketChannel ; </a> 
<a> import io . netty . handler . codec . <RARE_TOKEN> ; </a> 
<a> import io . netty . handler . codec . <RARE_TOKEN> ; </a> 
<a> import io . netty . handler . codec . string . <RARE_TOKEN> ; </a> 
<a> import io . netty . handler . codec . string . <RARE_TOKEN> ; </a> 
<a> public class <RARE_TOKEN> extends ChannelInitializer < SocketChannel > { </a> 
<a> private static final <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( ) ; </a> 
<a> private static final <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( ) ; </a> 
<a> private static final <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( ) ; </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( SocketChannel ch ) throws Exception { </a> 
<a> ChannelPipeline pipeline = ch . pipeline ( ) ; </a> 
<a> pipeline . addLast ( <RARE_TOKEN> , new <RARE_TOKEN> ( </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ) ; </a> 
<a> pipeline . addLast ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> pipeline . addLast ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> pipeline . addLast ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . example . <RARE_TOKEN> ; </a> 
<a> import io . netty . bootstrap . Bootstrap ; </a> 
<a> import io . netty . channel . ChannelInitializer ; </a> 
<a> import io . netty . channel . <RARE_TOKEN> ; </a> 
<a> import io . netty . channel . socket . SocketChannel ; </a> 
<a> import io . netty . channel . socket . nio . NioEventLoopGroup ; </a> 
<a> import io . netty . channel . socket . nio . <RARE_TOKEN> ; </a> 
<a> import io . netty . handler . timeout . <RARE_TOKEN> ; </a> 
<a> public class <RARE_TOKEN> { </a> 
<a> static final int <RARE_TOKEN> = 5 ; </a> 
<a> private static final int <RARE_TOKEN> = 10 ; </a> 
<a> private final String host ; </a> 
<a> private final int port ; </a> 
<a> private final <RARE_TOKEN> handler = new <RARE_TOKEN> ( this ) ; </a> 
<a> public <RARE_TOKEN> ( String host , int port ) { </a> 
<a> this . host = host ; </a> 
<a> this . port = port ; </a> 
<a> } </a> 
<a> public void run ( ) { </a> 
<a> <RARE_TOKEN> ( new Bootstrap ( ) ) . connect ( ) ; </a> 
<a> } </a> 
<a> private Bootstrap <RARE_TOKEN> ( Bootstrap b ) { </a> 
<a> return <RARE_TOKEN> ( b , new NioEventLoopGroup ( ) ) ; </a> 
<a> } </a> 
<a> Bootstrap <RARE_TOKEN> ( Bootstrap b , <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> b . group ( <RARE_TOKEN> ) </a> 
<a> . channel ( new <RARE_TOKEN> ( ) ) </a> 
<a> . remoteAddress ( host , port ) </a> 
<a> . handler ( new ChannelInitializer < SocketChannel > ( ) { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( SocketChannel ch ) throws Exception { </a> 
<a> ch . pipeline ( ) . addLast ( new <RARE_TOKEN> ( <RARE_TOKEN> , 0 , 0 ) , handler ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> return b ; </a> 
<a> } </a> 
<a> public static void <RARE_TOKEN> ( String [ ] args ) throws Exception { </a> 
<a> if ( args . length != 2 ) { </a> 
<a> System . <RARE_TOKEN> . println ( </a> 
<a> <RARE_TOKEN> " + <RARE_TOKEN> . class . getSimpleName ( ) + </a> 
<a> " <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> return ; </a> 
<a> } </a> 
<a> String host = args [ 0 ] ; </a> 
<a> int port = Integer . parseInt ( args [ 1 ] ) ; </a> 
<a> new <RARE_TOKEN> ( host , port ) . run ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . example . <RARE_TOKEN> ; </a> 
<a> import io . netty . bootstrap . Bootstrap ; </a> 
<a> import io . netty . buffer . ByteBuf ; </a> 
<a> import io . netty . channel . ChannelHandler . Sharable ; </a> 
<a> import io . netty . channel . ChannelHandlerContext ; </a> 
<a> import io . netty . channel . <RARE_TOKEN> ; </a> 
<a> import io . netty . channel . EventLoop ; </a> 
<a> import io . netty . handler . timeout . <RARE_TOKEN> ; </a> 
<a> import io . netty . handler . timeout . <RARE_TOKEN> ; </a> 
<a> import java . net . <RARE_TOKEN> ; </a> 
<a> import java . util . concurrent . TimeUnit ; </a> 
<a> @ Sharable </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> private final <RARE_TOKEN> client ; </a> 
<a> private long <RARE_TOKEN> = - 1 ; </a> 
<a> public <RARE_TOKEN> ( <RARE_TOKEN> client ) { </a> 
<a> this . client = client ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ChannelHandlerContext ctx ) throws Exception { </a> 
<a> if ( <RARE_TOKEN> < 0 ) { </a> 
<a> <RARE_TOKEN> = System . currentTimeMillis ( ) ; </a> 
<a> } </a> 
<a> println ( <RARE_TOKEN> <RARE_TOKEN> " + ctx . channel ( ) . remoteAddress ( ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void inboundBufferUpdated ( ChannelHandlerContext ctx , ByteBuf in ) throws Exception { </a> 
<a> in . clear ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ChannelHandlerContext ctx , Object <RARE_TOKEN> ) throws Exception { </a> 
<a> if ( ! ( <RARE_TOKEN> instanceof <RARE_TOKEN> ) ) { </a> 
<a> return ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> e = ( <RARE_TOKEN> ) <RARE_TOKEN> ; </a> 
<a> if ( e . state ( ) == <RARE_TOKEN> . <RARE_TOKEN> ) { </a> 
<a> println ( <RARE_TOKEN> <RARE_TOKEN> to <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> ctx . close ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ChannelHandlerContext ctx ) throws Exception { </a> 
<a> println ( <RARE_TOKEN> <RARE_TOKEN> " + ctx . channel ( ) . remoteAddress ( ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( final ChannelHandlerContext ctx ) </a> 
<a> throws Exception { </a> 
<a> println ( <RARE_TOKEN> <RARE_TOKEN> " + <RARE_TOKEN> . <RARE_TOKEN> + <RARE_TOKEN> ) ; </a> 
<a> final EventLoop loop = ctx . channel ( ) . eventLoop ( ) ; </a> 
<a> loop . schedule ( new Runnable ( ) { </a> 
<a> @ Override </a> 
<a> public void run ( ) { </a> 
<a> println ( <RARE_TOKEN> <RARE_TOKEN> " + ctx . channel ( ) . remoteAddress ( ) ) ; </a> 
<a> client . <RARE_TOKEN> ( new Bootstrap ( ) , loop ) . connect ( ) ; </a> 
<a> } </a> 
<a> } , <RARE_TOKEN> . <RARE_TOKEN> , TimeUnit . SECONDS ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void exceptionCaught ( ChannelHandlerContext ctx , Throwable cause ) throws Exception { </a> 
<a> if ( cause instanceof <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> = - 1 ; </a> 
<a> println ( "Failed to <RARE_TOKEN> " + cause . getMessage ( ) ) ; </a> 
<a> } </a> 
<a> cause . printStackTrace ( ) ; </a> 
<a> ctx . close ( ) ; </a> 
<a> } </a> 
<a> void println ( String msg ) { </a> 
<a> if ( <RARE_TOKEN> < 0 ) { </a> 
<a> System . <RARE_TOKEN> . format ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> , msg ) ; </a> 
<a> } else { </a> 
<a> System . <RARE_TOKEN> . format ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> , ( System . currentTimeMillis ( ) - <RARE_TOKEN> ) / 1000 , msg ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . logging ; </a> 
<a> import io . netty . logging . <RARE_TOKEN> ; </a> 
<a> public enum <RARE_TOKEN> { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ) , </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ) , </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ) , </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ) , </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> private final <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . logging ; </a> 
<a> import io . netty . channel . ChannelFuture ; </a> 
<a> import io . netty . channel . ChannelHandler ; </a> 
<a> import io . netty . channel . ChannelHandler . Sharable ; </a> 
<a> import io . netty . channel . <RARE_TOKEN> ; </a> 
<a> import io . netty . channel . ChannelHandlerContext ; </a> 
<a> import io . netty . logging . <RARE_TOKEN> ; </a> 
<a> import io . netty . logging . InternalLogger ; </a> 
<a> import io . netty . logging . InternalLoggerFactory ; </a> 
<a> import java . net . SocketAddress ; </a> 
<a> @ Sharable </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> private static final <RARE_TOKEN> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> protected final InternalLogger logger ; </a> 
<a> protected final <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> private final <RARE_TOKEN> level ; </a> 
<a> public <RARE_TOKEN> ( ) { </a> 
<a> this ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( <RARE_TOKEN> level ) { </a> 
<a> if ( level == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> logger = InternalLoggerFactory . getInstance ( getClass ( ) ) ; </a> 
<a> this . level = level ; </a> 
<a> <RARE_TOKEN> = level . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( Class < ? > clazz ) { </a> 
<a> this ( clazz , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( Class < ? > clazz , <RARE_TOKEN> level ) { </a> 
<a> if ( clazz == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( level == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> logger = InternalLoggerFactory . getInstance ( clazz ) ; </a> 
<a> this . level = level ; </a> 
<a> <RARE_TOKEN> = level . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( String name ) { </a> 
<a> this ( name , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( String name , <RARE_TOKEN> level ) { </a> 
<a> if ( name == null ) { </a> 
<a> throw new NullPointerException ( "name" ) ; </a> 
<a> } </a> 
<a> if ( level == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> logger = InternalLoggerFactory . getInstance ( name ) ; </a> 
<a> this . level = level ; </a> 
<a> <RARE_TOKEN> = level . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> level ( ) { </a> 
<a> return level ; </a> 
<a> } </a> 
<a> protected String format ( ChannelHandlerContext ctx , String message ) { </a> 
<a> String <RARE_TOKEN> = ctx . channel ( ) . toString ( ) ; </a> 
<a> StringBuilder buf = new StringBuilder ( <RARE_TOKEN> . length ( ) + message . length ( ) + 1 ) ; </a> 
<a> buf . append ( <RARE_TOKEN> ) ; </a> 
<a> buf . append ( ' ' ) ; </a> 
<a> buf . append ( message ) ; </a> 
<a> return buf . toString ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ChannelHandlerContext ctx ) </a> 
<a> throws Exception { </a> 
<a> if ( logger . <RARE_TOKEN> ( <RARE_TOKEN> ) ) { </a> 
<a> logger . log ( <RARE_TOKEN> , format ( ctx , <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> super . <RARE_TOKEN> ( ctx ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ChannelHandlerContext ctx ) </a> 
<a> throws Exception { </a> 
<a> if ( logger . <RARE_TOKEN> ( <RARE_TOKEN> ) ) { </a> 
<a> logger . log ( <RARE_TOKEN> , format ( ctx , <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> super . <RARE_TOKEN> ( ctx ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ChannelHandlerContext ctx ) </a> 
<a> throws Exception { </a> 
<a> if ( logger . <RARE_TOKEN> ( <RARE_TOKEN> ) ) { </a> 
<a> logger . log ( <RARE_TOKEN> , format ( ctx , <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> super . <RARE_TOKEN> ( ctx ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ChannelHandlerContext ctx ) </a> 
<a> throws Exception { </a> 
<a> if ( logger . <RARE_TOKEN> ( <RARE_TOKEN> ) ) { </a> 
<a> logger . log ( <RARE_TOKEN> , format ( ctx , <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> super . <RARE_TOKEN> ( ctx ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void exceptionCaught ( ChannelHandlerContext ctx , </a> 
<a> Throwable cause ) throws Exception { </a> 
<a> if ( logger . <RARE_TOKEN> ( <RARE_TOKEN> ) ) { </a> 
<a> logger . log ( <RARE_TOKEN> , format ( ctx , <RARE_TOKEN> " + cause ) , cause ) ; </a> 
<a> } </a> 
<a> super . exceptionCaught ( ctx , cause ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ChannelHandlerContext ctx , </a> 
<a> Object <RARE_TOKEN> ) throws Exception { </a> 
<a> if ( logger . <RARE_TOKEN> ( <RARE_TOKEN> ) ) { </a> 
<a> logger . log ( <RARE_TOKEN> , format ( ctx , <RARE_TOKEN> " + <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> super . <RARE_TOKEN> ( ctx , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void bind ( ChannelHandlerContext ctx , </a> 
<a> SocketAddress localAddress , ChannelFuture future ) throws Exception { </a> 
<a> if ( logger . <RARE_TOKEN> ( <RARE_TOKEN> ) ) { </a> 
<a> logger . log ( <RARE_TOKEN> , format ( ctx , <RARE_TOKEN> + localAddress + <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> super . bind ( ctx , localAddress , future ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void connect ( ChannelHandlerContext ctx , </a> 
<a> SocketAddress remoteAddress , SocketAddress localAddress , </a> 
<a> ChannelFuture future ) throws Exception { </a> 
<a> if ( logger . <RARE_TOKEN> ( <RARE_TOKEN> ) ) { </a> 
<a> logger . log ( <RARE_TOKEN> , format ( ctx , <RARE_TOKEN> + remoteAddress + ", " + localAddress + <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> super . connect ( ctx , remoteAddress , localAddress , future ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void disconnect ( ChannelHandlerContext ctx , </a> 
<a> ChannelFuture future ) throws Exception { </a> 
<a> if ( logger . <RARE_TOKEN> ( <RARE_TOKEN> ) ) { </a> 
<a> logger . log ( <RARE_TOKEN> , format ( ctx , <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> super . disconnect ( ctx , future ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void close ( ChannelHandlerContext ctx , </a> 
<a> ChannelFuture future ) throws Exception { </a> 
<a> if ( logger . <RARE_TOKEN> ( <RARE_TOKEN> ) ) { </a> 
<a> logger . log ( <RARE_TOKEN> , format ( ctx , <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> super . close ( ctx , future ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ChannelHandlerContext ctx , </a> 
<a> ChannelFuture future ) throws Exception { </a> 
<a> if ( logger . <RARE_TOKEN> ( <RARE_TOKEN> ) ) { </a> 
<a> logger . log ( <RARE_TOKEN> , format ( ctx , <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> super . <RARE_TOKEN> ( ctx , future ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void flush ( ChannelHandlerContext ctx , ChannelFuture future ) </a> 
<a> throws Exception { </a> 
<a> ctx . flush ( future ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void inboundBufferUpdated ( ChannelHandlerContext ctx ) </a> 
<a> throws Exception { </a> 
<a> ctx . fireInboundBufferUpdated ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . logging ; </a> 
<a> import io . netty . buffer . MessageBuf ; </a> 
<a> import io . netty . buffer . Unpooled ; </a> 
<a> import io . netty . channel . ChannelFuture ; </a> 
<a> import io . netty . channel . ChannelHandlerContext ; </a> 
<a> import io . netty . channel . <RARE_TOKEN> ; </a> 
<a> import io . netty . channel . <RARE_TOKEN> ; </a> 
<a> public class <RARE_TOKEN> </a> 
<a> extends <RARE_TOKEN> </a> 
<a> implements <RARE_TOKEN> < Object > , <RARE_TOKEN> < Object > { </a> 
<a> public <RARE_TOKEN> ( ) { } </a> 
<a> public <RARE_TOKEN> ( Class < ? > clazz , <RARE_TOKEN> level ) { </a> 
<a> super ( clazz , level ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( Class < ? > clazz ) { </a> 
<a> super ( clazz ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( <RARE_TOKEN> level ) { </a> 
<a> super ( level ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( String name , <RARE_TOKEN> level ) { </a> 
<a> super ( name , level ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( String name ) { </a> 
<a> super ( name ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public MessageBuf < Object > <RARE_TOKEN> ( ChannelHandlerContext ctx ) throws Exception { </a> 
<a> return Unpooled . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public MessageBuf < Object > <RARE_TOKEN> ( ChannelHandlerContext ctx ) throws Exception { </a> 
<a> return Unpooled . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void inboundBufferUpdated ( ChannelHandlerContext ctx ) </a> 
<a> throws Exception { </a> 
<a> MessageBuf < Object > buf = ctx . <RARE_TOKEN> ( ) ; </a> 
<a> if ( logger . <RARE_TOKEN> ( <RARE_TOKEN> ) ) { </a> 
<a> logger . log ( <RARE_TOKEN> , format ( ctx , <RARE_TOKEN> ( <RARE_TOKEN> , buf ) ) ) ; </a> 
<a> } </a> 
<a> MessageBuf < Object > out = ctx . <RARE_TOKEN> ( ) ; </a> 
<a> for ( ; ; ) { </a> 
<a> Object o = buf . poll ( ) ; </a> 
<a> if ( o == null ) { </a> 
<a> break ; </a> 
<a> } </a> 
<a> out . add ( o ) ; </a> 
<a> } </a> 
<a> ctx . fireInboundBufferUpdated ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void flush ( ChannelHandlerContext ctx , ChannelFuture future ) </a> 
<a> throws Exception { </a> 
<a> MessageBuf < Object > buf = ctx . <RARE_TOKEN> ( ) ; </a> 
<a> if ( logger . <RARE_TOKEN> ( <RARE_TOKEN> ) ) { </a> 
<a> logger . log ( <RARE_TOKEN> , format ( ctx , <RARE_TOKEN> ( <RARE_TOKEN> , buf ) ) ) ; </a> 
<a> } </a> 
<a> MessageBuf < Object > out = ctx . <RARE_TOKEN> ( ) ; </a> 
<a> for ( ; ; ) { </a> 
<a> Object o = buf . poll ( ) ; </a> 
<a> if ( o == null ) { </a> 
<a> break ; </a> 
<a> } </a> 
<a> out . add ( o ) ; </a> 
<a> } </a> 
<a> ctx . flush ( future ) ; </a> 
<a> } </a> 
<a> protected String <RARE_TOKEN> ( String message , MessageBuf < Object > buf ) { </a> 
<a> return message + <RARE_TOKEN> + buf . size ( ) + <RARE_TOKEN> " + buf ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . <RARE_TOKEN> ; </a> 
<a> import java . util . concurrent . <RARE_TOKEN> ; </a> 
<a> final class <RARE_TOKEN> implements <RARE_TOKEN> { </a> 
<a> static final <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( ) ; </a> 
<a> @ Override </a> 
<a> public void execute ( Runnable command ) { </a> 
<a> command . run ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . <RARE_TOKEN> ; </a> 
<a> import javax . net . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> private static final long serialVersionUID = - <RARE_TOKEN> ; </a> 
<a> public <RARE_TOKEN> ( ) { </a> 
<a> super ( "" ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( String message ) { </a> 
<a> super ( message ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( Throwable cause ) { </a> 
<a> super ( cause ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( String message , Throwable cause ) { </a> 
<a> super ( message , cause ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . <RARE_TOKEN> ; </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . stream ; </a> 
<a> import io . netty . buffer . ByteBuf ; </a> 
<a> public interface <RARE_TOKEN> extends <RARE_TOKEN> < ByteBuf > { </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . stream ; </a> 
<a> import io . netty . buffer . ByteBuf ; </a> 
<a> import java . io . File ; </a> 
<a> import java . io . IOException ; </a> 
<a> import java . io . <RARE_TOKEN> ; </a> 
<a> public class <RARE_TOKEN> implements <RARE_TOKEN> { </a> 
<a> private final <RARE_TOKEN> file ; </a> 
<a> private final long <RARE_TOKEN> ; </a> 
<a> private final long endOffset ; </a> 
<a> private final int chunkSize ; </a> 
<a> private long offset ; </a> 
<a> public <RARE_TOKEN> ( File file ) throws IOException { </a> 
<a> this ( file , <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( File file , int chunkSize ) throws IOException { </a> 
<a> this ( new <RARE_TOKEN> ( file , <RARE_TOKEN> ) , chunkSize ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( <RARE_TOKEN> file ) throws IOException { </a> 
<a> this ( file , <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( <RARE_TOKEN> file , int chunkSize ) throws IOException { </a> 
<a> this ( file , 0 , file . length ( ) , chunkSize ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( <RARE_TOKEN> file , long offset , long length , int chunkSize ) throws IOException { </a> 
<a> if ( file == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( offset < 0 ) { </a> 
<a> throw new IllegalArgumentException ( </a> 
<a> <RARE_TOKEN> " + offset + " (expected: 0 or <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( length < 0 ) { </a> 
<a> throw new IllegalArgumentException ( </a> 
<a> <RARE_TOKEN> " + length + " (expected: 0 or <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( chunkSize <= 0 ) { </a> 
<a> throw new IllegalArgumentException ( </a> 
<a> <RARE_TOKEN> " + chunkSize + </a> 
<a> " (expected: a <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> this . file = file ; </a> 
<a> this . offset = <RARE_TOKEN> = offset ; </a> 
<a> endOffset = offset + length ; </a> 
<a> this . chunkSize = chunkSize ; </a> 
<a> file . <RARE_TOKEN> ( offset ) ; </a> 
<a> } </a> 
<a> public long <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public long <RARE_TOKEN> ( ) { </a> 
<a> return endOffset ; </a> 
<a> } </a> 
<a> public long <RARE_TOKEN> ( ) { </a> 
<a> return offset ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ) throws Exception { </a> 
<a> return ! ( offset < endOffset && file . <RARE_TOKEN> ( ) . isOpen ( ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void close ( ) throws Exception { </a> 
<a> file . close ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ByteBuf buffer ) throws Exception { </a> 
<a> long offset = this . offset ; </a> 
<a> if ( offset >= endOffset ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> int chunkSize = ( int ) Math . min ( this . chunkSize , endOffset - offset ) ; </a> 
<a> byte [ ] chunk = new byte [ chunkSize ] ; </a> 
<a> file . <RARE_TOKEN> ( chunk ) ; </a> 
<a> buffer . writeBytes ( chunk ) ; </a> 
<a> this . offset = offset + chunkSize ; </a> 
<a> return true ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . stream ; </a> 
<a> public interface <RARE_TOKEN> < <RARE_TOKEN> > { </a> 
<a> boolean <RARE_TOKEN> ( ) throws Exception ; </a> 
<a> void close ( ) throws Exception ; </a> 
<a> boolean <RARE_TOKEN> ( <RARE_TOKEN> buffer ) throws Exception ; </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . stream ; </a> 
<a> import io . netty . buffer . ByteBuf ; </a> 
<a> import java . io . File ; </a> 
<a> import java . io . <RARE_TOKEN> ; </a> 
<a> import java . io . IOException ; </a> 
<a> import java . nio . channels . <RARE_TOKEN> ; </a> 
<a> public class <RARE_TOKEN> implements <RARE_TOKEN> { </a> 
<a> private final <RARE_TOKEN> in ; </a> 
<a> private final long <RARE_TOKEN> ; </a> 
<a> private final long endOffset ; </a> 
<a> private final int chunkSize ; </a> 
<a> private long offset ; </a> 
<a> public <RARE_TOKEN> ( File in ) throws IOException { </a> 
<a> this ( new <RARE_TOKEN> ( in ) . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( File in , int chunkSize ) throws IOException { </a> 
<a> this ( new <RARE_TOKEN> ( in ) . <RARE_TOKEN> ( ) , chunkSize ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( <RARE_TOKEN> in ) throws IOException { </a> 
<a> this ( in , <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( <RARE_TOKEN> in , int chunkSize ) throws IOException { </a> 
<a> this ( in , 0 , in . size ( ) , chunkSize ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( <RARE_TOKEN> in , long offset , long length , int chunkSize ) </a> 
<a> throws IOException { </a> 
<a> if ( in == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( offset < 0 ) { </a> 
<a> throw new IllegalArgumentException ( </a> 
<a> <RARE_TOKEN> " + offset + " (expected: 0 or <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( length < 0 ) { </a> 
<a> throw new IllegalArgumentException ( </a> 
<a> <RARE_TOKEN> " + length + " (expected: 0 or <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( chunkSize <= 0 ) { </a> 
<a> throw new IllegalArgumentException ( </a> 
<a> <RARE_TOKEN> " + chunkSize + </a> 
<a> " (expected: a <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( offset != 0 ) { </a> 
<a> in . position ( offset ) ; </a> 
<a> } </a> 
<a> this . in = in ; </a> 
<a> this . chunkSize = chunkSize ; </a> 
<a> this . offset = <RARE_TOKEN> = offset ; </a> 
<a> endOffset = offset + length ; </a> 
<a> } </a> 
<a> public long <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public long <RARE_TOKEN> ( ) { </a> 
<a> return endOffset ; </a> 
<a> } </a> 
<a> public long <RARE_TOKEN> ( ) { </a> 
<a> return offset ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ) throws Exception { </a> 
<a> return ! ( offset < endOffset && in . isOpen ( ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void close ( ) throws Exception { </a> 
<a> in . close ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ByteBuf buffer ) throws Exception { </a> 
<a> long offset = this . offset ; </a> 
<a> if ( offset >= endOffset ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> int chunkSize = ( int ) Math . min ( this . chunkSize , endOffset - offset ) ; </a> 
<a> int readBytes = 0 ; </a> 
<a> for ( ; ; ) { </a> 
<a> int <RARE_TOKEN> = buffer . writeBytes ( in , chunkSize - readBytes ) ; </a> 
<a> if ( <RARE_TOKEN> < 0 ) { </a> 
<a> break ; </a> 
<a> } </a> 
<a> readBytes += <RARE_TOKEN> ; </a> 
<a> if ( readBytes == chunkSize ) { </a> 
<a> break ; </a> 
<a> } </a> 
<a> } </a> 
<a> this . offset += readBytes ; </a> 
<a> return true ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . stream ; </a> 
<a> import io . netty . buffer . ByteBuf ; </a> 
<a> import java . nio . ByteBuffer ; </a> 
<a> import java . nio . channels . <RARE_TOKEN> ; </a> 
<a> public class <RARE_TOKEN> implements <RARE_TOKEN> { </a> 
<a> private final <RARE_TOKEN> in ; </a> 
<a> private final int chunkSize ; </a> 
<a> private long offset ; </a> 
<a> private final ByteBuffer <RARE_TOKEN> ; </a> 
<a> public <RARE_TOKEN> ( <RARE_TOKEN> in ) { </a> 
<a> this ( in , <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( <RARE_TOKEN> in , int chunkSize ) { </a> 
<a> if ( in == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( chunkSize <= 0 ) { </a> 
<a> throw new IllegalArgumentException ( <RARE_TOKEN> " + chunkSize + </a> 
<a> " (expected: a <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> this . in = in ; </a> 
<a> offset = 0 ; </a> 
<a> this . chunkSize = chunkSize ; </a> 
<a> <RARE_TOKEN> = ByteBuffer . <RARE_TOKEN> ( chunkSize ) ; </a> 
<a> } </a> 
<a> public long <RARE_TOKEN> ( ) { </a> 
<a> return offset ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ) throws Exception { </a> 
<a> if ( <RARE_TOKEN> . position ( ) > 0 ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> if ( in . isOpen ( ) ) { </a> 
<a> int b = in . read ( <RARE_TOKEN> ) ; </a> 
<a> if ( b < 0 ) { </a> 
<a> return true ; </a> 
<a> } else { </a> 
<a> offset += b ; </a> 
<a> return false ; </a> 
<a> } </a> 
<a> } </a> 
<a> return true ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void close ( ) throws Exception { </a> 
<a> in . close ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ByteBuf buffer ) throws Exception { </a> 
<a> if ( <RARE_TOKEN> ( ) ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> int readBytes = <RARE_TOKEN> . position ( ) ; </a> 
<a> for ( ; ; ) { </a> 
<a> int <RARE_TOKEN> = in . read ( <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> < 0 ) { </a> 
<a> break ; </a> 
<a> } </a> 
<a> readBytes += <RARE_TOKEN> ; </a> 
<a> offset += <RARE_TOKEN> ; </a> 
<a> if ( readBytes == chunkSize ) { </a> 
<a> break ; </a> 
<a> } </a> 
<a> } </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> buffer . writeBytes ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . clear ( ) ; </a> 
<a> return true ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . stream ; </a> 
<a> import io . netty . buffer . ByteBuf ; </a> 
<a> import java . io . InputStream ; </a> 
<a> import java . io . <RARE_TOKEN> ; </a> 
<a> public class <RARE_TOKEN> implements <RARE_TOKEN> { </a> 
<a> static final int <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private final <RARE_TOKEN> in ; </a> 
<a> private final int chunkSize ; </a> 
<a> private long offset ; </a> 
<a> public <RARE_TOKEN> ( InputStream in ) { </a> 
<a> this ( in , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( InputStream in , int chunkSize ) { </a> 
<a> if ( in == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( chunkSize <= 0 ) { </a> 
<a> throw new IllegalArgumentException ( </a> 
<a> <RARE_TOKEN> " + chunkSize + </a> 
<a> " (expected: a <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( in instanceof <RARE_TOKEN> ) { </a> 
<a> this . in = ( <RARE_TOKEN> ) in ; </a> 
<a> } else { </a> 
<a> this . in = new <RARE_TOKEN> ( in ) ; </a> 
<a> } </a> 
<a> this . chunkSize = chunkSize ; </a> 
<a> } </a> 
<a> public long <RARE_TOKEN> ( ) { </a> 
<a> return offset ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ) throws Exception { </a> 
<a> int b = in . read ( ) ; </a> 
<a> if ( b < 0 ) { </a> 
<a> return true ; </a> 
<a> } else { </a> 
<a> in . <RARE_TOKEN> ( b ) ; </a> 
<a> return false ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void close ( ) throws Exception { </a> 
<a> in . close ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ByteBuf buffer ) throws Exception { </a> 
<a> if ( <RARE_TOKEN> ( ) ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> final int <RARE_TOKEN> = in . <RARE_TOKEN> ( ) ; </a> 
<a> final int chunkSize ; </a> 
<a> if ( <RARE_TOKEN> <= 0 ) { </a> 
<a> chunkSize = this . chunkSize ; </a> 
<a> } else { </a> 
<a> chunkSize = Math . min ( this . chunkSize , in . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> offset += buffer . writeBytes ( in , chunkSize ) ; </a> 
<a> return true ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . stream ; </a> 
<a> import io . netty . buffer . MessageBuf ; </a> 
<a> import io . netty . buffer . Unpooled ; </a> 
<a> import io . netty . channel . Channel ; </a> 
<a> import io . netty . channel . ChannelException ; </a> 
<a> import io . netty . channel . ChannelFuture ; </a> 
<a> import io . netty . channel . ChannelFutureListener ; </a> 
<a> import io . netty . channel . ChannelHandler ; </a> 
<a> import io . netty . channel . <RARE_TOKEN> ; </a> 
<a> import io . netty . channel . ChannelHandlerContext ; </a> 
<a> import io . netty . channel . <RARE_TOKEN> ; </a> 
<a> import io . netty . channel . ChannelPipeline ; </a> 
<a> import io . netty . logging . InternalLogger ; </a> 
<a> import io . netty . logging . InternalLoggerFactory ; </a> 
<a> import java . nio . channels . <RARE_TOKEN> ; </a> 
<a> import java . util . concurrent . atomic . AtomicInteger ; </a> 
<a> public class <RARE_TOKEN> </a> 
<a> extends <RARE_TOKEN> implements <RARE_TOKEN> < Object > { </a> 
<a> private static final InternalLogger logger = </a> 
<a> InternalLoggerFactory . getInstance ( <RARE_TOKEN> . class ) ; </a> 
<a> private final MessageBuf < Object > queue = Unpooled . <RARE_TOKEN> ( ) ; </a> 
<a> private final int <RARE_TOKEN> ; </a> 
<a> private volatile ChannelHandlerContext ctx ; </a> 
<a> private final AtomicInteger <RARE_TOKEN> = new AtomicInteger ( ) ; </a> 
<a> private Object <RARE_TOKEN> ; </a> 
<a> public <RARE_TOKEN> ( ) { </a> 
<a> this ( 4 ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( int <RARE_TOKEN> ) { </a> 
<a> if ( <RARE_TOKEN> <= 0 ) { </a> 
<a> throw new IllegalArgumentException ( </a> 
<a> <RARE_TOKEN> " + <RARE_TOKEN> + " (expected: > <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public MessageBuf < Object > <RARE_TOKEN> ( ChannelHandlerContext ctx ) throws Exception { </a> 
<a> this . ctx = ctx ; </a> 
<a> return queue ; </a> 
<a> } </a> 
<a> private boolean <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> . get ( ) < <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> final ChannelHandlerContext ctx = this . ctx ; </a> 
<a> if ( ctx == null ) { </a> 
<a> return ; </a> 
<a> } </a> 
<a> if ( ctx . executor ( ) . inEventLoop ( ) ) { </a> 
<a> try { </a> 
<a> <RARE_TOKEN> ( ctx ) ; </a> 
<a> } catch ( Exception e ) { </a> 
<a> if ( logger . <RARE_TOKEN> ( ) ) { </a> 
<a> logger . warn ( "Unexpected exception while <RARE_TOKEN> <RARE_TOKEN> , e ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } else { </a> 
<a> ctx . executor ( ) . execute ( new Runnable ( ) { </a> 
<a> @ Override </a> 
<a> public void run ( ) { </a> 
<a> try { </a> 
<a> <RARE_TOKEN> ( ctx ) ; </a> 
<a> } catch ( Exception e ) { </a> 
<a> if ( logger . <RARE_TOKEN> ( ) ) { </a> 
<a> logger . warn ( "Unexpected exception while <RARE_TOKEN> <RARE_TOKEN> , e ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void flush ( ChannelHandlerContext ctx , ChannelFuture future ) throws Exception { </a> 
<a> queue . add ( future ) ; </a> 
<a> if ( <RARE_TOKEN> ( ) || ! ctx . channel ( ) . isActive ( ) ) { </a> 
<a> <RARE_TOKEN> ( ctx ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ChannelHandlerContext ctx ) throws Exception { </a> 
<a> <RARE_TOKEN> ( ctx ) ; </a> 
<a> super . <RARE_TOKEN> ( ctx ) ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( final ChannelHandlerContext ctx , Throwable cause ) { </a> 
<a> boolean fireExceptionCaught = false ; </a> 
<a> boolean success = true ; </a> 
<a> for ( ; ; ) { </a> 
<a> Object <RARE_TOKEN> = this . <RARE_TOKEN> ; </a> 
<a> if ( this . <RARE_TOKEN> == null ) { </a> 
<a> <RARE_TOKEN> = queue . poll ( ) ; </a> 
<a> } else { </a> 
<a> this . <RARE_TOKEN> = null ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> break ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> instanceof <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> < ? > in = ( <RARE_TOKEN> < ? > ) <RARE_TOKEN> ; </a> 
<a> try { </a> 
<a> if ( ! in . <RARE_TOKEN> ( ) ) { </a> 
<a> success = false ; </a> 
<a> } </a> 
<a> } catch ( Exception e ) { </a> 
<a> success = false ; </a> 
<a> logger . warn ( <RARE_TOKEN> . class . getSimpleName ( ) + <RARE_TOKEN> failed" , e ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( in ) ; </a> 
<a> } else if ( <RARE_TOKEN> instanceof ChannelFuture ) { </a> 
<a> ChannelFuture f = ( ChannelFuture ) <RARE_TOKEN> ; </a> 
<a> if ( ! success ) { </a> 
<a> fireExceptionCaught = true ; </a> 
<a> if ( cause == null ) { </a> 
<a> cause = new <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> f . setFailure ( cause ) ; </a> 
<a> } else { </a> 
<a> f . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> if ( fireExceptionCaught ) { </a> 
<a> ctx . fireExceptionCaught ( cause ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( final ChannelHandlerContext ctx ) throws Exception { </a> 
<a> Channel channel = ctx . channel ( ) ; </a> 
<a> if ( ! channel . isActive ( ) ) { </a> 
<a> <RARE_TOKEN> ( ctx , null ) ; </a> 
<a> return ; </a> 
<a> } </a> 
<a> while ( <RARE_TOKEN> ( ) ) { </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> <RARE_TOKEN> = queue . poll ( ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> break ; </a> 
<a> } </a> 
<a> final Object <RARE_TOKEN> = this . <RARE_TOKEN> ; </a> 
<a> if ( <RARE_TOKEN> instanceof ChannelFuture ) { </a> 
<a> this . <RARE_TOKEN> = null ; </a> 
<a> ctx . flush ( ( ChannelFuture ) <RARE_TOKEN> ) ; </a> 
<a> } else if ( <RARE_TOKEN> instanceof <RARE_TOKEN> ) { </a> 
<a> final <RARE_TOKEN> < ? > <RARE_TOKEN> = ( <RARE_TOKEN> < ? > ) <RARE_TOKEN> ; </a> 
<a> boolean read ; </a> 
<a> boolean <RARE_TOKEN> ; </a> 
<a> boolean suspend ; </a> 
<a> try { </a> 
<a> read = <RARE_TOKEN> ( ctx , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> if ( ! read ) { </a> 
<a> suspend = ! <RARE_TOKEN> ; </a> 
<a> } else { </a> 
<a> suspend = false ; </a> 
<a> } </a> 
<a> } catch ( final Throwable t ) { </a> 
<a> this . <RARE_TOKEN> = null ; </a> 
<a> if ( ctx . executor ( ) . inEventLoop ( ) ) { </a> 
<a> ctx . fireExceptionCaught ( t ) ; </a> 
<a> } else { </a> 
<a> ctx . executor ( ) . execute ( new Runnable ( ) { </a> 
<a> @ Override </a> 
<a> public void run ( ) { </a> 
<a> ctx . fireExceptionCaught ( t ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> break ; </a> 
<a> } </a> 
<a> if ( suspend ) { </a> 
<a> break ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> ChannelFuture f = ctx . flush ( ) ; </a> 
<a> if ( <RARE_TOKEN> ) { </a> 
<a> this . <RARE_TOKEN> = null ; </a> 
<a> f . addListener ( new ChannelFutureListener ( ) { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ChannelFuture future ) throws Exception { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> } else if ( <RARE_TOKEN> ( ) ) { </a> 
<a> f . addListener ( new ChannelFutureListener ( ) { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ChannelFuture future ) throws Exception { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> if ( ! future . <RARE_TOKEN> ( ) ) { </a> 
<a> <RARE_TOKEN> ( ( <RARE_TOKEN> < ? > ) <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> } else { </a> 
<a> f . addListener ( new ChannelFutureListener ( ) { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ChannelFuture future ) throws Exception { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> if ( ! future . <RARE_TOKEN> ( ) ) { </a> 
<a> <RARE_TOKEN> ( ( <RARE_TOKEN> < ? > ) <RARE_TOKEN> ) ; </a> 
<a> } else if ( <RARE_TOKEN> ( ) ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> } </a> 
<a> } else { </a> 
<a> ctx . <RARE_TOKEN> ( ) . add ( <RARE_TOKEN> ) ; </a> 
<a> this . <RARE_TOKEN> = null ; </a> 
<a> } </a> 
<a> if ( ! channel . isActive ( ) ) { </a> 
<a> <RARE_TOKEN> ( ctx , new <RARE_TOKEN> ( ) ) ; </a> 
<a> return ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> @ SuppressWarnings ( "unchecked" ) </a> 
<a> protected boolean <RARE_TOKEN> ( ChannelHandlerContext ctx , <RARE_TOKEN> < ? > <RARE_TOKEN> ) throws Exception { </a> 
<a> if ( <RARE_TOKEN> instanceof <RARE_TOKEN> ) { </a> 
<a> return ( ( <RARE_TOKEN> ) <RARE_TOKEN> ) . <RARE_TOKEN> ( ctx . <RARE_TOKEN> ( ) ) ; </a> 
<a> } else if ( <RARE_TOKEN> instanceof <RARE_TOKEN> ) { </a> 
<a> return ( ( <RARE_TOKEN> < Object > ) <RARE_TOKEN> ) . <RARE_TOKEN> ( ctx . <RARE_TOKEN> ( ) ) ; </a> 
<a> } else { </a> 
<a> throw new IllegalArgumentException ( <RARE_TOKEN> <RARE_TOKEN> " + <RARE_TOKEN> + " not <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> static void <RARE_TOKEN> ( <RARE_TOKEN> < ? > <RARE_TOKEN> ) { </a> 
<a> try { </a> 
<a> <RARE_TOKEN> . close ( ) ; </a> 
<a> } catch ( Throwable t ) { </a> 
<a> if ( logger . <RARE_TOKEN> ( ) ) { </a> 
<a> logger . warn ( "Failed to close a <RARE_TOKEN> <RARE_TOKEN> , t ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ChannelHandlerContext ctx ) throws Exception { </a> 
<a> <RARE_TOKEN> ( ctx ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ChannelHandlerContext ctx ) throws Exception { </a> 
<a> <RARE_TOKEN> ( ctx , new ChannelException ( <RARE_TOKEN> . class . getSimpleName ( ) + " <RARE_TOKEN> from <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . stream ; </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . timeout ; </a> 
<a> import io . netty . channel . Channel ; </a> 
<a> public enum <RARE_TOKEN> { </a> 
<a> <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . timeout ; </a> 
<a> import io . netty . bootstrap . ServerBootstrap ; </a> 
<a> import io . netty . channel . Channel ; </a> 
<a> import io . netty . channel . ChannelFuture ; </a> 
<a> import io . netty . channel . ChannelFutureListener ; </a> 
<a> import io . netty . channel . ChannelHandler ; </a> 
<a> import io . netty . channel . <RARE_TOKEN> ; </a> 
<a> import io . netty . channel . ChannelHandlerContext ; </a> 
<a> import io . netty . channel . ChannelPipeline ; </a> 
<a> import io . netty . channel . EventExecutor ; </a> 
<a> import io . netty . util . <RARE_TOKEN> ; </a> 
<a> import io . netty . util . <RARE_TOKEN> ; </a> 
<a> import java . nio . channels . <RARE_TOKEN> ; </a> 
<a> import java . util . concurrent . ScheduledFuture ; </a> 
<a> import java . util . concurrent . TimeUnit ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> private final long <RARE_TOKEN> ; </a> 
<a> private final long <RARE_TOKEN> ; </a> 
<a> private final long <RARE_TOKEN> ; </a> 
<a> volatile ScheduledFuture < ? > <RARE_TOKEN> ; </a> 
<a> volatile long <RARE_TOKEN> ; </a> 
<a> int <RARE_TOKEN> ; </a> 
<a> volatile ScheduledFuture < ? > <RARE_TOKEN> ; </a> 
<a> volatile long <RARE_TOKEN> ; </a> 
<a> int <RARE_TOKEN> ; </a> 
<a> volatile ScheduledFuture < ? > <RARE_TOKEN> ; </a> 
<a> int <RARE_TOKEN> ; </a> 
<a> private volatile int state ; </a> 
<a> public <RARE_TOKEN> ( </a> 
<a> int <RARE_TOKEN> , </a> 
<a> int <RARE_TOKEN> , </a> 
<a> int <RARE_TOKEN> ) { </a> 
<a> this ( <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> TimeUnit . SECONDS ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( </a> 
<a> long <RARE_TOKEN> , long <RARE_TOKEN> , long <RARE_TOKEN> , </a> 
<a> TimeUnit unit ) { </a> 
<a> if ( unit == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> <= 0 ) { </a> 
<a> <RARE_TOKEN> = 0 ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> = Math . <RARE_TOKEN> ( unit . <RARE_TOKEN> ( <RARE_TOKEN> ) , 1 ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> <= 0 ) { </a> 
<a> <RARE_TOKEN> = 0 ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> = Math . <RARE_TOKEN> ( unit . <RARE_TOKEN> ( <RARE_TOKEN> ) , 1 ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> <= 0 ) { </a> 
<a> <RARE_TOKEN> = 0 ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> = Math . <RARE_TOKEN> ( unit . <RARE_TOKEN> ( <RARE_TOKEN> ) , 1 ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public long <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public long <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public long <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ChannelHandlerContext ctx ) throws Exception { </a> 
<a> if ( ctx . channel ( ) . isActive ( ) & ctx . channel ( ) . <RARE_TOKEN> ( ) ) { </a> 
<a> <RARE_TOKEN> ( ctx ) ; </a> 
<a> } else { </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ChannelHandlerContext ctx ) throws Exception { </a> 
<a> destroy ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ChannelHandlerContext ctx ) throws Exception { </a> 
<a> if ( ctx . channel ( ) . isActive ( ) ) { </a> 
<a> <RARE_TOKEN> ( ctx ) ; </a> 
<a> } </a> 
<a> super . <RARE_TOKEN> ( ctx ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ChannelHandlerContext ctx ) throws Exception { </a> 
<a> <RARE_TOKEN> ( ctx ) ; </a> 
<a> super . <RARE_TOKEN> ( ctx ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ChannelHandlerContext ctx ) throws Exception { </a> 
<a> destroy ( ) ; </a> 
<a> super . <RARE_TOKEN> ( ctx ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void inboundBufferUpdated ( ChannelHandlerContext ctx ) throws Exception { </a> 
<a> <RARE_TOKEN> = System . currentTimeMillis ( ) ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> = 0 ; </a> 
<a> ctx . fireInboundBufferUpdated ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void flush ( final ChannelHandlerContext ctx , ChannelFuture future ) throws Exception { </a> 
<a> future . addListener ( new ChannelFutureListener ( ) { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ChannelFuture future ) throws Exception { </a> 
<a> <RARE_TOKEN> = System . currentTimeMillis ( ) ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> = 0 ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> super . flush ( ctx , future ) ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( ChannelHandlerContext ctx ) { </a> 
<a> switch ( state ) { </a> 
<a> case 1 : </a> 
<a> case 2 : </a> 
<a> return ; </a> 
<a> } </a> 
<a> state = 1 ; </a> 
<a> EventExecutor loop = ctx . executor ( ) ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> = System . currentTimeMillis ( ) ; </a> 
<a> if ( <RARE_TOKEN> > 0 ) { </a> 
<a> <RARE_TOKEN> = loop . schedule ( </a> 
<a> new <RARE_TOKEN> ( ctx ) , </a> 
<a> <RARE_TOKEN> , TimeUnit . MILLISECONDS ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> > 0 ) { </a> 
<a> <RARE_TOKEN> = loop . schedule ( </a> 
<a> new <RARE_TOKEN> ( ctx ) , </a> 
<a> <RARE_TOKEN> , TimeUnit . MILLISECONDS ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> > 0 ) { </a> 
<a> <RARE_TOKEN> = loop . schedule ( </a> 
<a> new <RARE_TOKEN> ( ctx ) , </a> 
<a> <RARE_TOKEN> , TimeUnit . MILLISECONDS ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private void destroy ( ) { </a> 
<a> state = 2 ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> . cancel ( false ) ; </a> 
<a> <RARE_TOKEN> = null ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> . cancel ( false ) ; </a> 
<a> <RARE_TOKEN> = null ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> . cancel ( false ) ; </a> 
<a> <RARE_TOKEN> = null ; </a> 
<a> } </a> 
<a> } </a> 
<a> protected void <RARE_TOKEN> ( ChannelHandlerContext ctx , <RARE_TOKEN> <RARE_TOKEN> ) throws Exception { </a> 
<a> ctx . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> private final class <RARE_TOKEN> implements Runnable { </a> 
<a> private final ChannelHandlerContext ctx ; </a> 
<a> <RARE_TOKEN> ( ChannelHandlerContext ctx ) { </a> 
<a> this . ctx = ctx ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void run ( ) { </a> 
<a> if ( ! ctx . channel ( ) . isOpen ( ) ) { </a> 
<a> return ; </a> 
<a> } </a> 
<a> long currentTime = System . currentTimeMillis ( ) ; </a> 
<a> long <RARE_TOKEN> = <RARE_TOKEN> . this . <RARE_TOKEN> ; </a> 
<a> long <RARE_TOKEN> = <RARE_TOKEN> - ( currentTime - <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> <= 0 ) { </a> 
<a> <RARE_TOKEN> = </a> 
<a> ctx . executor ( ) . schedule ( this , <RARE_TOKEN> , TimeUnit . MILLISECONDS ) ; </a> 
<a> try { </a> 
<a> <RARE_TOKEN> ( ctx , new <RARE_TOKEN> ( </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> , <RARE_TOKEN> ++ , currentTime - <RARE_TOKEN> ) ) ; </a> 
<a> } catch ( Throwable t ) { </a> 
<a> ctx . fireExceptionCaught ( t ) ; </a> 
<a> } </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> = ctx . executor ( ) . schedule ( this , <RARE_TOKEN> , TimeUnit . MILLISECONDS ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> private final class <RARE_TOKEN> implements Runnable { </a> 
<a> private final ChannelHandlerContext ctx ; </a> 
<a> <RARE_TOKEN> ( ChannelHandlerContext ctx ) { </a> 
<a> this . ctx = ctx ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void run ( ) { </a> 
<a> if ( ! ctx . channel ( ) . isOpen ( ) ) { </a> 
<a> return ; </a> 
<a> } </a> 
<a> long currentTime = System . currentTimeMillis ( ) ; </a> 
<a> long <RARE_TOKEN> = <RARE_TOKEN> . this . <RARE_TOKEN> ; </a> 
<a> long <RARE_TOKEN> = <RARE_TOKEN> - ( currentTime - <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> <= 0 ) { </a> 
<a> <RARE_TOKEN> = ctx . executor ( ) . schedule ( </a> 
<a> this , <RARE_TOKEN> , TimeUnit . MILLISECONDS ) ; </a> 
<a> try { </a> 
<a> <RARE_TOKEN> ( ctx , new <RARE_TOKEN> ( </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> , <RARE_TOKEN> ++ , currentTime - <RARE_TOKEN> ) ) ; </a> 
<a> } catch ( Throwable t ) { </a> 
<a> ctx . fireExceptionCaught ( t ) ; </a> 
<a> } </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> = ctx . executor ( ) . schedule ( this , <RARE_TOKEN> , TimeUnit . MILLISECONDS ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> private final class <RARE_TOKEN> implements Runnable { </a> 
<a> private final ChannelHandlerContext ctx ; </a> 
<a> <RARE_TOKEN> ( ChannelHandlerContext ctx ) { </a> 
<a> this . ctx = ctx ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void run ( ) { </a> 
<a> if ( ! ctx . channel ( ) . isOpen ( ) ) { </a> 
<a> return ; </a> 
<a> } </a> 
<a> long currentTime = System . currentTimeMillis ( ) ; </a> 
<a> long <RARE_TOKEN> = Math . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> long <RARE_TOKEN> = <RARE_TOKEN> - ( currentTime - <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> <= 0 ) { </a> 
<a> <RARE_TOKEN> = ctx . executor ( ) . schedule ( </a> 
<a> this , <RARE_TOKEN> , TimeUnit . MILLISECONDS ) ; </a> 
<a> try { </a> 
<a> <RARE_TOKEN> ( ctx , new <RARE_TOKEN> ( </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> , <RARE_TOKEN> ++ , currentTime - <RARE_TOKEN> ) ) ; </a> 
<a> } catch ( Throwable t ) { </a> 
<a> ctx . fireExceptionCaught ( t ) ; </a> 
<a> } </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> = ctx . executor ( ) . schedule ( this , <RARE_TOKEN> , TimeUnit . MILLISECONDS ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . timeout ; </a> 
<a> import io . netty . bootstrap . ServerBootstrap ; </a> 
<a> import io . netty . channel . ChannelHandler ; </a> 
<a> import io . netty . channel . ChannelHandlerContext ; </a> 
<a> import io . netty . channel . ChannelPipeline ; </a> 
<a> import io . netty . channel . <RARE_TOKEN> ; </a> 
<a> import io . netty . util . <RARE_TOKEN> ; </a> 
<a> import io . netty . util . <RARE_TOKEN> ; </a> 
<a> import java . nio . channels . <RARE_TOKEN> ; </a> 
<a> import java . util . concurrent . ScheduledFuture ; </a> 
<a> import java . util . concurrent . TimeUnit ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> private final long <RARE_TOKEN> ; </a> 
<a> private volatile ScheduledFuture < ? > timeout ; </a> 
<a> private volatile long <RARE_TOKEN> ; </a> 
<a> private volatile int state ; </a> 
<a> private boolean closed ; </a> 
<a> public <RARE_TOKEN> ( int <RARE_TOKEN> ) { </a> 
<a> this ( <RARE_TOKEN> , TimeUnit . SECONDS ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( long timeout , TimeUnit unit ) { </a> 
<a> if ( unit == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( timeout <= 0 ) { </a> 
<a> <RARE_TOKEN> = 0 ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> = Math . <RARE_TOKEN> ( unit . <RARE_TOKEN> ( timeout ) , 1 ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ChannelHandlerContext ctx ) throws Exception { </a> 
<a> if ( ctx . channel ( ) . isActive ( ) && ctx . channel ( ) . <RARE_TOKEN> ( ) ) { </a> 
<a> <RARE_TOKEN> ( ctx ) ; </a> 
<a> } else { </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ChannelHandlerContext ctx ) throws Exception { </a> 
<a> destroy ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ChannelHandlerContext ctx ) throws Exception { </a> 
<a> if ( ctx . channel ( ) . isActive ( ) ) { </a> 
<a> <RARE_TOKEN> ( ctx ) ; </a> 
<a> } </a> 
<a> super . <RARE_TOKEN> ( ctx ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ChannelHandlerContext ctx ) throws Exception { </a> 
<a> <RARE_TOKEN> ( ctx ) ; </a> 
<a> super . <RARE_TOKEN> ( ctx ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ChannelHandlerContext ctx ) throws Exception { </a> 
<a> destroy ( ) ; </a> 
<a> super . <RARE_TOKEN> ( ctx ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void inboundBufferUpdated ( ChannelHandlerContext ctx ) throws Exception { </a> 
<a> <RARE_TOKEN> = System . currentTimeMillis ( ) ; </a> 
<a> ctx . fireInboundBufferUpdated ( ) ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( ChannelHandlerContext ctx ) { </a> 
<a> switch ( state ) { </a> 
<a> case 1 : </a> 
<a> case 2 : </a> 
<a> return ; </a> 
<a> } </a> 
<a> state = 1 ; </a> 
<a> <RARE_TOKEN> = System . currentTimeMillis ( ) ; </a> 
<a> if ( <RARE_TOKEN> > 0 ) { </a> 
<a> timeout = ctx . executor ( ) . schedule ( </a> 
<a> new <RARE_TOKEN> ( ctx ) , </a> 
<a> <RARE_TOKEN> , TimeUnit . MILLISECONDS ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private void destroy ( ) { </a> 
<a> state = 2 ; </a> 
<a> if ( timeout != null ) { </a> 
<a> timeout . cancel ( false ) ; </a> 
<a> timeout = null ; </a> 
<a> } </a> 
<a> } </a> 
<a> protected void <RARE_TOKEN> ( ChannelHandlerContext ctx ) throws Exception { </a> 
<a> if ( ! closed ) { </a> 
<a> ctx . fireExceptionCaught ( <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> ctx . close ( ) ; </a> 
<a> closed = true ; </a> 
<a> } </a> 
<a> } </a> 
<a> private final class <RARE_TOKEN> implements Runnable { </a> 
<a> private final ChannelHandlerContext ctx ; </a> 
<a> <RARE_TOKEN> ( ChannelHandlerContext ctx ) { </a> 
<a> this . ctx = ctx ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void run ( ) { </a> 
<a> if ( ! ctx . channel ( ) . isOpen ( ) ) { </a> 
<a> return ; </a> 
<a> } </a> 
<a> long currentTime = System . currentTimeMillis ( ) ; </a> 
<a> long <RARE_TOKEN> = <RARE_TOKEN> - ( currentTime - <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> <= 0 ) { </a> 
<a> timeout = ctx . executor ( ) . schedule ( this , <RARE_TOKEN> , TimeUnit . MILLISECONDS ) ; </a> 
<a> try { </a> 
<a> <RARE_TOKEN> ( ctx ) ; </a> 
<a> } catch ( Throwable t ) { </a> 
<a> ctx . fireExceptionCaught ( t ) ; </a> 
<a> } </a> 
<a> } else { </a> 
<a> timeout = ctx . executor ( ) . schedule ( this , <RARE_TOKEN> , TimeUnit . MILLISECONDS ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . timeout ; </a> 
<a> public final class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> private static final long serialVersionUID = - <RARE_TOKEN> ; </a> 
<a> public static final <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( ) ; </a> 
<a> private <RARE_TOKEN> ( ) { } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . timeout ; </a> 
<a> import io . netty . bootstrap . ServerBootstrap ; </a> 
<a> import io . netty . channel . ChannelFuture ; </a> 
<a> import io . netty . channel . ChannelFutureListener ; </a> 
<a> import io . netty . channel . ChannelHandlerContext ; </a> 
<a> import io . netty . channel . <RARE_TOKEN> ; </a> 
<a> import io . netty . channel . ChannelPipeline ; </a> 
<a> import io . netty . util . <RARE_TOKEN> ; </a> 
<a> import io . netty . util . <RARE_TOKEN> ; </a> 
<a> import java . nio . channels . <RARE_TOKEN> ; </a> 
<a> import java . util . concurrent . ScheduledFuture ; </a> 
<a> import java . util . concurrent . TimeUnit ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> private final long <RARE_TOKEN> ; </a> 
<a> private boolean closed ; </a> 
<a> public <RARE_TOKEN> ( int <RARE_TOKEN> ) { </a> 
<a> this ( <RARE_TOKEN> , TimeUnit . SECONDS ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( long timeout , TimeUnit unit ) { </a> 
<a> if ( unit == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( timeout <= 0 ) { </a> 
<a> <RARE_TOKEN> = 0 ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> = Math . <RARE_TOKEN> ( unit . <RARE_TOKEN> ( timeout ) , 1 ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void flush ( final ChannelHandlerContext ctx , final ChannelFuture future ) throws Exception { </a> 
<a> if ( <RARE_TOKEN> > 0 ) { </a> 
<a> final ScheduledFuture < ? > <RARE_TOKEN> = ctx . executor ( ) . schedule ( new Runnable ( ) { </a> 
<a> @ Override </a> 
<a> public void run ( ) { </a> 
<a> if ( future . setFailure ( <RARE_TOKEN> . <RARE_TOKEN> ) ) { </a> 
<a> try { </a> 
<a> <RARE_TOKEN> ( ctx ) ; </a> 
<a> } catch ( Throwable t ) { </a> 
<a> ctx . fireExceptionCaught ( t ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } , <RARE_TOKEN> , TimeUnit . MILLISECONDS ) ; </a> 
<a> future . addListener ( new ChannelFutureListener ( ) { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ChannelFuture future ) throws Exception { </a> 
<a> <RARE_TOKEN> . cancel ( false ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> } </a> 
<a> super . flush ( ctx , future ) ; </a> 
<a> } </a> 
<a> protected void <RARE_TOKEN> ( ChannelHandlerContext ctx ) throws Exception { </a> 
<a> if ( ! closed ) { </a> 
<a> ctx . fireExceptionCaught ( <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> ctx . close ( ) ; </a> 
<a> closed = true ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . timeout ; </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . handler . <RARE_TOKEN> ; </a> 
<a> import static org . junit . Assert . * ; </a> 
<a> import org . junit . Test ; </a> 
<a> public class <RARE_TOKEN> { </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> e = <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> long <RARE_TOKEN> = System . <RARE_TOKEN> ( ) ; </a> 
<a> e . execute ( new Runnable ( ) { </a> 
<a> @ Override </a> 
<a> public void run ( ) { </a> 
<a> long <RARE_TOKEN> = System . <RARE_TOKEN> ( ) ; </a> 
<a> for ( ; ; ) { </a> 
<a> try { </a> 
<a> Thread . sleep ( 1000 ) ; </a> 
<a> } catch ( InterruptedException e ) { </a> 
<a> } </a> 
<a> if ( System . <RARE_TOKEN> ( ) - <RARE_TOKEN> >= <RARE_TOKEN> ) { </a> 
<a> break ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> assertTrue ( System . <RARE_TOKEN> ( ) - <RARE_TOKEN> >= <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . <RARE_TOKEN> . transport . socket ; </a> 
<a> import io . netty . bootstrap . Bootstrap ; </a> 
<a> import io . netty . bootstrap . ServerBootstrap ; </a> 
<a> import io . netty . logging . InternalLogger ; </a> 
<a> import io . netty . logging . InternalLoggerFactory ; </a> 
<a> import io . netty . <RARE_TOKEN> . transport . socket . <RARE_TOKEN> . Factory ; </a> 
<a> import io . netty . <RARE_TOKEN> . util . <RARE_TOKEN> ; </a> 
<a> import io . netty . util . <RARE_TOKEN> ; </a> 
<a> import java . lang . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import java . lang . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import java . net . InetSocketAddress ; </a> 
<a> import java . util . List ; </a> 
<a> import java . util . Map . Entry ; </a> 
<a> import org . junit . <RARE_TOKEN> ; </a> 
<a> import org . junit . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> public abstract class <RARE_TOKEN> { </a> 
<a> private static final List < Entry < Factory < ServerBootstrap > , Factory < Bootstrap > > > <RARE_TOKEN> = </a> 
<a> <RARE_TOKEN> . socket ( ) ; </a> 
<a> @ <RARE_TOKEN> </a> 
<a> public final <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( ) ; </a> 
<a> protected final InternalLogger logger = InternalLoggerFactory . getInstance ( getClass ( ) ) ; </a> 
<a> protected volatile ServerBootstrap sb ; </a> 
<a> protected volatile Bootstrap cb ; </a> 
<a> protected volatile InetSocketAddress <RARE_TOKEN> ; </a> 
<a> protected volatile Factory < Bootstrap > <RARE_TOKEN> ; </a> 
<a> protected void run ( ) throws Throwable { </a> 
<a> int i = 0 ; </a> 
<a> for ( Entry < Factory < ServerBootstrap > , Factory < Bootstrap > > e : <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> = e . getValue ( ) ; </a> 
<a> sb = e . <RARE_TOKEN> ( ) . newInstance ( ) ; </a> 
<a> cb = e . getValue ( ) . newInstance ( ) ; </a> 
<a> <RARE_TOKEN> = new InetSocketAddress ( </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> sb . localAddress ( <RARE_TOKEN> ) ; </a> 
<a> cb . remoteAddress ( <RARE_TOKEN> ) ; </a> 
<a> logger . info ( String . format ( </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> of <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> ( ) , ++ i , <RARE_TOKEN> . size ( ) ) ) ; </a> 
<a> try { </a> 
<a> <RARE_TOKEN> m = getClass ( ) . <RARE_TOKEN> ( </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) , ServerBootstrap . class , Bootstrap . class ) ; </a> 
<a> m . <RARE_TOKEN> ( this , sb , cb ) ; </a> 
<a> } catch ( <RARE_TOKEN> ex ) { </a> 
<a> throw ex . <RARE_TOKEN> ( ) ; </a> 
<a> } finally { </a> 
<a> sb . shutdown ( ) ; </a> 
<a> cb . shutdown ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . <RARE_TOKEN> . transport . socket ; </a> 
<a> import static org . junit . Assert . * ; </a> 
<a> import io . netty . bootstrap . Bootstrap ; </a> 
<a> import io . netty . buffer . Unpooled ; </a> 
<a> import io . netty . channel . Channel ; </a> 
<a> import io . netty . channel . ChannelHandlerContext ; </a> 
<a> import io . netty . channel . ChannelInboundMessageHandlerAdapter ; </a> 
<a> import io . netty . channel . ChannelOption ; </a> 
<a> import io . netty . channel . socket . <RARE_TOKEN> ; </a> 
<a> import io . netty . channel . socket . <RARE_TOKEN> ; </a> 
<a> import io . netty . util . <RARE_TOKEN> ; </a> 
<a> import java . net . InetSocketAddress ; </a> 
<a> import java . util . concurrent . CountDownLatch ; </a> 
<a> import java . util . concurrent . TimeUnit ; </a> 
<a> import org . junit . Assert ; </a> 
<a> import org . junit . Test ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) throws Throwable { </a> 
<a> run ( ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( Bootstrap sb , Bootstrap cb ) throws Throwable { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( ) ; </a> 
<a> sb . handler ( new ChannelInboundMessageHandlerAdapter < <RARE_TOKEN> > ( ) { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( </a> 
<a> ChannelHandlerContext ctx , </a> 
<a> <RARE_TOKEN> msg ) throws Exception { </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> cb . handler ( <RARE_TOKEN> ) ; </a> 
<a> sb . option ( ChannelOption . <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> sb . option ( ChannelOption . <RARE_TOKEN> , true ) ; </a> 
<a> cb . option ( ChannelOption . <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> cb . option ( ChannelOption . <RARE_TOKEN> , true ) ; </a> 
<a> cb . localAddress ( <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> Channel sc = sb . bind ( ) . sync ( ) . channel ( ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = ( <RARE_TOKEN> ) cb . bind ( ) . sync ( ) . channel ( ) ; </a> 
<a> String group = <RARE_TOKEN> ; </a> 
<a> InetSocketAddress <RARE_TOKEN> = new InetSocketAddress ( group , <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> ) . sync ( ) ; </a> 
<a> sc . write ( new <RARE_TOKEN> ( Unpooled . <RARE_TOKEN> ( 1 ) , <RARE_TOKEN> ) ) . sync ( ) ; </a> 
<a> assertTrue ( <RARE_TOKEN> . await ( ) ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> ) . sync ( ) ; </a> 
<a> Thread . sleep ( 1000 ) ; </a> 
<a> sc . write ( new <RARE_TOKEN> ( Unpooled . <RARE_TOKEN> ( 1 ) , <RARE_TOKEN> ) ) . sync ( ) ; </a> 
<a> <RARE_TOKEN> . await ( ) ; </a> 
<a> sc . close ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> . close ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> private final class <RARE_TOKEN> extends ChannelInboundMessageHandlerAdapter < <RARE_TOKEN> > { </a> 
<a> private final CountDownLatch latch = new CountDownLatch ( 1 ) ; </a> 
<a> private boolean done ; </a> 
<a> private volatile boolean fail ; </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( </a> 
<a> ChannelHandlerContext ctx , </a> 
<a> <RARE_TOKEN> msg ) throws Exception { </a> 
<a> if ( done ) { </a> 
<a> fail = true ; </a> 
<a> } </a> 
<a> Assert . assertEquals ( 1 , msg . data ( ) . <RARE_TOKEN> ( ) ) ; </a> 
<a> latch . countDown ( ) ; </a> 
<a> done = true ; </a> 
<a> } </a> 
<a> public boolean await ( ) throws Exception { </a> 
<a> boolean success = latch . await ( 10 , TimeUnit . SECONDS ) ; </a> 
<a> if ( fail ) { </a> 
<a> Assert . fail ( ) ; </a> 
<a> } </a> 
<a> return success ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . <RARE_TOKEN> . transport . socket ; </a> 
<a> import static org . junit . Assert . * ; </a> 
<a> import io . netty . bootstrap . Bootstrap ; </a> 
<a> import io . netty . buffer . Unpooled ; </a> 
<a> import io . netty . channel . Channel ; </a> 
<a> import io . netty . channel . ChannelHandlerContext ; </a> 
<a> import io . netty . channel . ChannelInboundMessageHandlerAdapter ; </a> 
<a> import io . netty . channel . socket . <RARE_TOKEN> ; </a> 
<a> import java . util . concurrent . CountDownLatch ; </a> 
<a> import java . util . concurrent . TimeUnit ; </a> 
<a> import org . junit . Assert ; </a> 
<a> import org . junit . Test ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) throws Throwable { </a> 
<a> run ( ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( Bootstrap sb , Bootstrap cb ) throws Throwable { </a> 
<a> final CountDownLatch latch = new CountDownLatch ( 1 ) ; </a> 
<a> sb . handler ( new ChannelInboundMessageHandlerAdapter < <RARE_TOKEN> > ( ) { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( </a> 
<a> ChannelHandlerContext ctx , </a> 
<a> <RARE_TOKEN> msg ) throws Exception { </a> 
<a> Assert . assertEquals ( 1 , msg . data ( ) . <RARE_TOKEN> ( ) ) ; </a> 
<a> latch . countDown ( ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> cb . handler ( new ChannelInboundMessageHandlerAdapter < <RARE_TOKEN> > ( ) { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( </a> 
<a> ChannelHandlerContext ctx , </a> 
<a> <RARE_TOKEN> msg ) throws Exception { </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> Channel sc = sb . bind ( ) . sync ( ) . channel ( ) ; </a> 
<a> Channel <RARE_TOKEN> = cb . bind ( ) . sync ( ) . channel ( ) ; </a> 
<a> <RARE_TOKEN> . write ( new <RARE_TOKEN> ( Unpooled . <RARE_TOKEN> ( 1 ) , <RARE_TOKEN> ) ) . sync ( ) ; </a> 
<a> assertTrue ( latch . await ( 10 , TimeUnit . SECONDS ) ) ; </a> 
<a> sc . close ( ) . sync ( ) ; </a> 
<a> <RARE_TOKEN> . close ( ) . sync ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . <RARE_TOKEN> . transport . socket ; </a> 
<a> import static org . junit . Assert . * ; </a> 
<a> import io . netty . bootstrap . Bootstrap ; </a> 
<a> import io . netty . bootstrap . ServerBootstrap ; </a> 
<a> import io . netty . buffer . ByteBuf ; </a> 
<a> import io . netty . buffer . Unpooled ; </a> 
<a> import io . netty . channel . Channel ; </a> 
<a> import io . netty . channel . ChannelHandlerContext ; </a> 
<a> import io . netty . channel . ChannelInboundMessageHandlerAdapter ; </a> 
<a> import io . netty . channel . ChannelInitializer ; </a> 
<a> import io . netty . channel . socket . SocketChannel ; </a> 
<a> import io . netty . handler . codec . <RARE_TOKEN> ; </a> 
<a> import java . io . IOException ; </a> 
<a> import java . util . Random ; </a> 
<a> import java . util . concurrent . atomic . AtomicReference ; </a> 
<a> import org . junit . Test ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> private static final Random random = new Random ( ) ; </a> 
<a> static final byte [ ] data = new byte [ <RARE_TOKEN> ] ; </a> 
<a> static { </a> 
<a> random . <RARE_TOKEN> ( data ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) throws Throwable { </a> 
<a> run ( ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( ServerBootstrap sb , Bootstrap cb ) throws Throwable { </a> 
<a> final <RARE_TOKEN> sh = new <RARE_TOKEN> ( ) ; </a> 
<a> final <RARE_TOKEN> ch = new <RARE_TOKEN> ( ) ; </a> 
<a> sb . <RARE_TOKEN> ( new ChannelInitializer < SocketChannel > ( ) { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( SocketChannel <RARE_TOKEN> ) throws Exception { </a> 
<a> <RARE_TOKEN> . pipeline ( ) . addLast ( <RARE_TOKEN> , new <RARE_TOKEN> ( <RARE_TOKEN> ) ) ; </a> 
<a> <RARE_TOKEN> . pipeline ( ) . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> , sh ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> cb . handler ( new ChannelInitializer < SocketChannel > ( ) { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( SocketChannel <RARE_TOKEN> ) throws Exception { </a> 
<a> <RARE_TOKEN> . pipeline ( ) . addLast ( <RARE_TOKEN> , new <RARE_TOKEN> ( <RARE_TOKEN> ) ) ; </a> 
<a> <RARE_TOKEN> . pipeline ( ) . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> , ch ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> Channel sc = sb . bind ( ) . sync ( ) . channel ( ) ; </a> 
<a> Channel <RARE_TOKEN> = cb . connect ( ) . sync ( ) . channel ( ) ; </a> 
<a> for ( int i = 0 ; i < data . length ; ) { </a> 
<a> int length = Math . min ( random . nextInt ( <RARE_TOKEN> * 3 ) , data . length - i ) ; </a> 
<a> <RARE_TOKEN> . write ( Unpooled . wrappedBuffer ( data , i , length ) ) ; </a> 
<a> i += length ; </a> 
<a> } </a> 
<a> while ( ch . <RARE_TOKEN> < data . length ) { </a> 
<a> if ( sh . exception . get ( ) != null ) { </a> 
<a> break ; </a> 
<a> } </a> 
<a> if ( ch . exception . get ( ) != null ) { </a> 
<a> break ; </a> 
<a> } </a> 
<a> try { </a> 
<a> Thread . sleep ( 1 ) ; </a> 
<a> } catch ( InterruptedException e ) { </a> 
<a> } </a> 
<a> } </a> 
<a> while ( sh . <RARE_TOKEN> < data . length ) { </a> 
<a> if ( sh . exception . get ( ) != null ) { </a> 
<a> break ; </a> 
<a> } </a> 
<a> if ( ch . exception . get ( ) != null ) { </a> 
<a> break ; </a> 
<a> } </a> 
<a> try { </a> 
<a> Thread . sleep ( 1 ) ; </a> 
<a> } catch ( InterruptedException e ) { </a> 
<a> } </a> 
<a> } </a> 
<a> sh . channel . close ( ) . sync ( ) ; </a> 
<a> ch . channel . close ( ) . sync ( ) ; </a> 
<a> sc . close ( ) . sync ( ) ; </a> 
<a> if ( sh . exception . get ( ) != null && ! ( sh . exception . get ( ) instanceof IOException ) ) { </a> 
<a> throw sh . exception . get ( ) ; </a> 
<a> } </a> 
<a> if ( ch . exception . get ( ) != null && ! ( ch . exception . get ( ) instanceof IOException ) ) { </a> 
<a> throw ch . exception . get ( ) ; </a> 
<a> } </a> 
<a> if ( sh . exception . get ( ) != null ) { </a> 
<a> throw sh . exception . get ( ) ; </a> 
<a> } </a> 
<a> if ( ch . exception . get ( ) != null ) { </a> 
<a> throw ch . exception . get ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private static class <RARE_TOKEN> extends ChannelInboundMessageHandlerAdapter < ByteBuf > { </a> 
<a> volatile Channel channel ; </a> 
<a> final AtomicReference < Throwable > exception = new AtomicReference < Throwable > ( ) ; </a> 
<a> volatile int <RARE_TOKEN> ; </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ChannelHandlerContext ctx ) </a> 
<a> throws Exception { </a> 
<a> channel = ctx . channel ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( </a> 
<a> ChannelHandlerContext ctx , </a> 
<a> ByteBuf msg ) throws Exception { </a> 
<a> assertEquals ( <RARE_TOKEN> , msg . readableBytes ( ) ) ; </a> 
<a> byte [ ] <RARE_TOKEN> = new byte [ msg . readableBytes ( ) ] ; </a> 
<a> msg . getBytes ( 0 , <RARE_TOKEN> ) ; </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> for ( int i = 0 ; i < <RARE_TOKEN> . length ; i ++ ) { </a> 
<a> assertEquals ( data [ i + <RARE_TOKEN> ] , <RARE_TOKEN> [ i ] ) ; </a> 
<a> } </a> 
<a> if ( channel . parent ( ) != null ) { </a> 
<a> channel . write ( msg ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> += <RARE_TOKEN> . length ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void exceptionCaught ( </a> 
<a> ChannelHandlerContext ctx , Throwable cause ) </a> 
<a> throws Exception { </a> 
<a> if ( exception . <RARE_TOKEN> ( null , cause ) ) { </a> 
<a> ctx . close ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . <RARE_TOKEN> . transport . socket ; </a> 
<a> import static org . junit . Assert . * ; </a> 
<a> import io . netty . bootstrap . Bootstrap ; </a> 
<a> import io . netty . bootstrap . ServerBootstrap ; </a> 
<a> import io . netty . channel . Channel ; </a> 
<a> import io . netty . channel . ChannelHandlerContext ; </a> 
<a> import io . netty . channel . ChannelInboundMessageHandlerAdapter ; </a> 
<a> import io . netty . channel . ChannelInitializer ; </a> 
<a> import io . netty . channel . socket . SocketChannel ; </a> 
<a> import io . netty . handler . codec . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import io . netty . handler . codec . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import io . netty . handler . codec . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import java . io . IOException ; </a> 
<a> import java . util . Random ; </a> 
<a> import java . util . concurrent . atomic . AtomicReference ; </a> 
<a> import org . junit . Test ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> static final Random random = new Random ( ) ; </a> 
<a> static final String [ ] data = new String [ <RARE_TOKEN> ] ; </a> 
<a> static { </a> 
<a> for ( int i = 0 ; i < data . length ; i ++ ) { </a> 
<a> int <RARE_TOKEN> = random . nextInt ( <RARE_TOKEN> ) ; </a> 
<a> char [ ] e = new char [ <RARE_TOKEN> ] ; </a> 
<a> for ( int j = 0 ; j < <RARE_TOKEN> ; j ++ ) { </a> 
<a> e [ j ] = ( char ) ( <RARE_TOKEN> + random . nextInt ( 26 ) ) ; </a> 
<a> } </a> 
<a> data [ i ] = new String ( e ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) throws Throwable { </a> 
<a> run ( ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( ServerBootstrap sb , Bootstrap cb ) throws Throwable { </a> 
<a> final <RARE_TOKEN> sh = new <RARE_TOKEN> ( ) ; </a> 
<a> final <RARE_TOKEN> ch = new <RARE_TOKEN> ( ) ; </a> 
<a> sb . <RARE_TOKEN> ( new ChannelInitializer < SocketChannel > ( ) { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( SocketChannel <RARE_TOKEN> ) throws Exception { </a> 
<a> <RARE_TOKEN> . pipeline ( ) . addLast ( </a> 
<a> new <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ( getClass ( ) . <RARE_TOKEN> ( ) ) ) , </a> 
<a> new <RARE_TOKEN> ( ) , </a> 
<a> sh ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> cb . handler ( new ChannelInitializer < SocketChannel > ( ) { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( SocketChannel <RARE_TOKEN> ) throws Exception { </a> 
<a> <RARE_TOKEN> . pipeline ( ) . addLast ( </a> 
<a> new <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ( getClass ( ) . <RARE_TOKEN> ( ) ) ) , </a> 
<a> new <RARE_TOKEN> ( ) , </a> 
<a> ch ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> Channel sc = sb . bind ( ) . sync ( ) . channel ( ) ; </a> 
<a> Channel <RARE_TOKEN> = cb . connect ( ) . sync ( ) . channel ( ) ; </a> 
<a> for ( String <RARE_TOKEN> : data ) { </a> 
<a> <RARE_TOKEN> . write ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> while ( ch . <RARE_TOKEN> < data . length ) { </a> 
<a> if ( sh . exception . get ( ) != null ) { </a> 
<a> break ; </a> 
<a> } </a> 
<a> if ( ch . exception . get ( ) != null ) { </a> 
<a> break ; </a> 
<a> } </a> 
<a> try { </a> 
<a> Thread . sleep ( 1 ) ; </a> 
<a> } catch ( InterruptedException e ) { </a> 
<a> } </a> 
<a> } </a> 
<a> while ( sh . <RARE_TOKEN> < data . length ) { </a> 
<a> if ( sh . exception . get ( ) != null ) { </a> 
<a> break ; </a> 
<a> } </a> 
<a> if ( ch . exception . get ( ) != null ) { </a> 
<a> break ; </a> 
<a> } </a> 
<a> try { </a> 
<a> Thread . sleep ( 1 ) ; </a> 
<a> } catch ( InterruptedException e ) { </a> 
<a> } </a> 
<a> } </a> 
<a> sh . channel . close ( ) . sync ( ) ; </a> 
<a> ch . channel . close ( ) . sync ( ) ; </a> 
<a> sc . close ( ) . sync ( ) ; </a> 
<a> if ( sh . exception . get ( ) != null && ! ( sh . exception . get ( ) instanceof IOException ) ) { </a> 
<a> throw sh . exception . get ( ) ; </a> 
<a> } </a> 
<a> if ( ch . exception . get ( ) != null && ! ( ch . exception . get ( ) instanceof IOException ) ) { </a> 
<a> throw ch . exception . get ( ) ; </a> 
<a> } </a> 
<a> if ( sh . exception . get ( ) != null ) { </a> 
<a> throw sh . exception . get ( ) ; </a> 
<a> } </a> 
<a> if ( ch . exception . get ( ) != null ) { </a> 
<a> throw ch . exception . get ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private static class <RARE_TOKEN> extends ChannelInboundMessageHandlerAdapter < String > { </a> 
<a> volatile Channel channel ; </a> 
<a> final AtomicReference < Throwable > exception = new AtomicReference < Throwable > ( ) ; </a> 
<a> volatile int <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> ( ) { </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ChannelHandlerContext ctx ) </a> 
<a> throws Exception { </a> 
<a> channel = ctx . channel ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ChannelHandlerContext ctx , </a> 
<a> String msg ) throws Exception { </a> 
<a> assertEquals ( data [ <RARE_TOKEN> ] , msg ) ; </a> 
<a> if ( channel . parent ( ) != null ) { </a> 
<a> channel . write ( msg ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> ++ ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void exceptionCaught ( ChannelHandlerContext ctx , </a> 
<a> Throwable cause ) throws Exception { </a> 
<a> if ( exception . <RARE_TOKEN> ( null , cause ) ) { </a> 
<a> ctx . close ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . <RARE_TOKEN> . transport . socket ; </a> 
<a> import static org . junit . Assert . * ; </a> 
<a> import io . netty . bootstrap . Bootstrap ; </a> 
<a> import io . netty . bootstrap . ServerBootstrap ; </a> 
<a> import io . netty . buffer . ByteBuf ; </a> 
<a> import io . netty . buffer . Unpooled ; </a> 
<a> import io . netty . channel . Channel ; </a> 
<a> import io . netty . channel . ChannelHandlerContext ; </a> 
<a> import io . netty . channel . <RARE_TOKEN> ; </a> 
<a> import io . netty . channel . ChannelInboundMessageHandlerAdapter ; </a> 
<a> import io . netty . channel . ChannelInitializer ; </a> 
<a> import io . netty . channel . socket . SocketChannel ; </a> 
<a> import io . netty . handler . codec . spdy . <RARE_TOKEN> ; </a> 
<a> import io . netty . handler . codec . spdy . <RARE_TOKEN> ; </a> 
<a> import io . netty . handler . codec . spdy . <RARE_TOKEN> ; </a> 
<a> import io . netty . util . <RARE_TOKEN> ; </a> 
<a> import java . io . IOException ; </a> 
<a> import java . net . InetSocketAddress ; </a> 
<a> import java . util . Random ; </a> 
<a> import java . util . concurrent . atomic . AtomicReference ; </a> 
<a> import org . junit . Test ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> private static final Random random = new Random ( ) ; </a> 
<a> static final int <RARE_TOKEN> = 20 ; </a> 
<a> private static ByteBuf <RARE_TOKEN> ( int version ) { </a> 
<a> int length = version < 3 ? <RARE_TOKEN> : <RARE_TOKEN> ; </a> 
<a> ByteBuf frames = Unpooled . buffer ( length ) ; </a> 
<a> frames . writeByte ( <RARE_TOKEN> ) ; </a> 
<a> frames . writeByte ( version ) ; </a> 
<a> frames . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> frames . writeByte ( 0xFF ) ; </a> 
<a> frames . <RARE_TOKEN> ( 4 ) ; </a> 
<a> frames . writeInt ( random . nextInt ( ) ) ; </a> 
<a> frames . writeByte ( <RARE_TOKEN> ) ; </a> 
<a> frames . writeByte ( version ) ; </a> 
<a> frames . <RARE_TOKEN> ( 5 ) ; </a> 
<a> frames . writeInt ( 0 ) ; </a> 
<a> frames . writeInt ( random . nextInt ( ) & <RARE_TOKEN> | 0x01 ) ; </a> 
<a> frames . writeByte ( 0x01 ) ; </a> 
<a> frames . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> for ( int i = 0 ; i < <RARE_TOKEN> ; i ++ ) { </a> 
<a> frames . writeInt ( random . nextInt ( ) ) ; </a> 
<a> } </a> 
<a> frames . writeByte ( <RARE_TOKEN> ) ; </a> 
<a> frames . writeByte ( version ) ; </a> 
<a> frames . <RARE_TOKEN> ( 1 ) ; </a> 
<a> frames . writeByte ( 0x03 ) ; </a> 
<a> if ( version < 3 ) { </a> 
<a> frames . <RARE_TOKEN> ( 12 ) ; </a> 
<a> } else { </a> 
<a> frames . <RARE_TOKEN> ( 10 ) ; </a> 
<a> } </a> 
<a> frames . writeInt ( random . nextInt ( ) & <RARE_TOKEN> | 0x01 ) ; </a> 
<a> frames . writeInt ( random . nextInt ( ) & <RARE_TOKEN> ) ; </a> 
<a> frames . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> if ( version < 3 ) { </a> 
<a> frames . <RARE_TOKEN> ( 0 ) ; </a> 
<a> } </a> 
<a> frames . writeByte ( <RARE_TOKEN> ) ; </a> 
<a> frames . writeByte ( version ) ; </a> 
<a> frames . <RARE_TOKEN> ( 2 ) ; </a> 
<a> frames . writeByte ( 0x01 ) ; </a> 
<a> if ( version < 3 ) { </a> 
<a> frames . <RARE_TOKEN> ( 8 ) ; </a> 
<a> } else { </a> 
<a> frames . <RARE_TOKEN> ( 4 ) ; </a> 
<a> } </a> 
<a> frames . writeInt ( random . nextInt ( ) & <RARE_TOKEN> | 0x01 ) ; </a> 
<a> if ( version < 3 ) { </a> 
<a> frames . writeInt ( 0 ) ; </a> 
<a> } </a> 
<a> frames . writeByte ( <RARE_TOKEN> ) ; </a> 
<a> frames . writeByte ( version ) ; </a> 
<a> frames . <RARE_TOKEN> ( 3 ) ; </a> 
<a> frames . writeInt ( 8 ) ; </a> 
<a> frames . writeInt ( random . nextInt ( ) & <RARE_TOKEN> | 0x01 ) ; </a> 
<a> frames . writeInt ( random . nextInt ( ) | 0x01 ) ; </a> 
<a> frames . writeByte ( <RARE_TOKEN> ) ; </a> 
<a> frames . writeByte ( version ) ; </a> 
<a> frames . <RARE_TOKEN> ( 4 ) ; </a> 
<a> frames . writeByte ( 0x01 ) ; </a> 
<a> frames . <RARE_TOKEN> ( 12 ) ; </a> 
<a> frames . writeInt ( 1 ) ; </a> 
<a> if ( version < 3 ) { </a> 
<a> frames . <RARE_TOKEN> ( random . nextInt ( ) ) ; </a> 
<a> frames . writeByte ( 0x03 ) ; </a> 
<a> } else { </a> 
<a> frames . writeByte ( 0x03 ) ; </a> 
<a> frames . <RARE_TOKEN> ( random . nextInt ( ) ) ; </a> 
<a> } </a> 
<a> frames . writeInt ( random . nextInt ( ) ) ; </a> 
<a> frames . writeByte ( <RARE_TOKEN> ) ; </a> 
<a> frames . writeByte ( version ) ; </a> 
<a> frames . <RARE_TOKEN> ( 6 ) ; </a> 
<a> frames . writeInt ( 4 ) ; </a> 
<a> frames . writeInt ( random . nextInt ( ) ) ; </a> 
<a> frames . writeByte ( <RARE_TOKEN> ) ; </a> 
<a> frames . writeByte ( version ) ; </a> 
<a> frames . <RARE_TOKEN> ( 7 ) ; </a> 
<a> if ( version < 3 ) { </a> 
<a> frames . writeInt ( 4 ) ; </a> 
<a> } else { </a> 
<a> frames . writeInt ( 8 ) ; </a> 
<a> } </a> 
<a> frames . writeInt ( random . nextInt ( ) & <RARE_TOKEN> ) ; </a> 
<a> if ( version >= 3 ) { </a> 
<a> frames . writeInt ( random . nextInt ( ) | 0x01 ) ; </a> 
<a> } </a> 
<a> frames . writeByte ( <RARE_TOKEN> ) ; </a> 
<a> frames . writeByte ( version ) ; </a> 
<a> frames . <RARE_TOKEN> ( 8 ) ; </a> 
<a> frames . writeByte ( 0x01 ) ; </a> 
<a> frames . <RARE_TOKEN> ( 4 ) ; </a> 
<a> frames . writeInt ( random . nextInt ( ) & <RARE_TOKEN> | 0x01 ) ; </a> 
<a> frames . writeByte ( <RARE_TOKEN> ) ; </a> 
<a> frames . writeByte ( version ) ; </a> 
<a> frames . <RARE_TOKEN> ( 9 ) ; </a> 
<a> frames . writeInt ( 8 ) ; </a> 
<a> frames . writeInt ( random . nextInt ( ) & <RARE_TOKEN> | 0x01 ) ; </a> 
<a> frames . writeInt ( random . nextInt ( ) & <RARE_TOKEN> | 0x01 ) ; </a> 
<a> return frames ; </a> 
<a> } </a> 
<a> private int version ; </a> 
<a> @ Test ( timeout = <RARE_TOKEN> ) </a> 
<a> public void <RARE_TOKEN> ( ) throws Throwable { </a> 
<a> for ( version = <RARE_TOKEN> . <RARE_TOKEN> ; version <= <RARE_TOKEN> . <RARE_TOKEN> ; version ++ ) { </a> 
<a> logger . info ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> + version ) ; </a> 
<a> run ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( ServerBootstrap sb , Bootstrap cb ) throws Throwable { </a> 
<a> ByteBuf frames = <RARE_TOKEN> ( version ) ; </a> 
<a> final <RARE_TOKEN> sh = new <RARE_TOKEN> ( ) ; </a> 
<a> final <RARE_TOKEN> ch = new <RARE_TOKEN> ( frames ) ; </a> 
<a> sb . <RARE_TOKEN> ( new ChannelInitializer < SocketChannel > ( ) { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( SocketChannel channel ) throws Exception { </a> 
<a> channel . pipeline ( ) . addLast ( </a> 
<a> new <RARE_TOKEN> ( version ) , </a> 
<a> new <RARE_TOKEN> ( version ) , </a> 
<a> sh ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> cb . handler ( ch ) ; </a> 
<a> Channel sc = sb . localAddress ( 0 ) . bind ( ) . sync ( ) . channel ( ) ; </a> 
<a> int port = ( ( InetSocketAddress ) sc . localAddress ( ) ) . <RARE_TOKEN> ( ) ; </a> 
<a> Channel <RARE_TOKEN> = cb . remoteAddress ( <RARE_TOKEN> . <RARE_TOKEN> , port ) . connect ( ) . sync ( ) . channel ( ) ; </a> 
<a> <RARE_TOKEN> . write ( frames ) ; </a> 
<a> while ( ch . <RARE_TOKEN> < frames . writerIndex ( ) - <RARE_TOKEN> ) { </a> 
<a> if ( sh . exception . get ( ) != null ) { </a> 
<a> break ; </a> 
<a> } </a> 
<a> if ( ch . exception . get ( ) != null ) { </a> 
<a> break ; </a> 
<a> } </a> 
<a> try { </a> 
<a> Thread . sleep ( 1 ) ; </a> 
<a> } catch ( InterruptedException e ) { </a> 
<a> } </a> 
<a> } </a> 
<a> if ( sh . exception . get ( ) != null && ! ( sh . exception . get ( ) instanceof IOException ) ) { </a> 
<a> throw sh . exception . get ( ) ; </a> 
<a> } </a> 
<a> if ( ch . exception . get ( ) != null && ! ( ch . exception . get ( ) instanceof IOException ) ) { </a> 
<a> throw ch . exception . get ( ) ; </a> 
<a> } </a> 
<a> if ( sh . exception . get ( ) != null ) { </a> 
<a> throw sh . exception . get ( ) ; </a> 
<a> } </a> 
<a> if ( ch . exception . get ( ) != null ) { </a> 
<a> throw ch . exception . get ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private class <RARE_TOKEN> extends ChannelInboundMessageHandlerAdapter < Object > { </a> 
<a> final AtomicReference < Throwable > exception = new AtomicReference < Throwable > ( ) ; </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ChannelHandlerContext ctx , Object msg ) throws Exception { </a> 
<a> ctx . write ( msg ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void exceptionCaught ( ChannelHandlerContext ctx , Throwable cause ) throws Exception { </a> 
<a> if ( exception . <RARE_TOKEN> ( null , cause ) ) { </a> 
<a> ctx . close ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> private class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> final AtomicReference < Throwable > exception = new AtomicReference < Throwable > ( ) ; </a> 
<a> final ByteBuf frames ; </a> 
<a> volatile int <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> ( ByteBuf frames ) { </a> 
<a> this . frames = frames ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void inboundBufferUpdated ( ChannelHandlerContext ctx , ByteBuf in ) throws Exception { </a> 
<a> byte [ ] <RARE_TOKEN> = new byte [ in . readableBytes ( ) ] ; </a> 
<a> in . readBytes ( <RARE_TOKEN> ) ; </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> for ( int i = 0 ; i < <RARE_TOKEN> . length ; i ++ ) { </a> 
<a> assertEquals ( frames . getByte ( <RARE_TOKEN> + i + <RARE_TOKEN> ) , <RARE_TOKEN> [ i ] ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> += <RARE_TOKEN> . length ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void exceptionCaught ( ChannelHandlerContext ctx , Throwable cause ) throws Exception { </a> 
<a> if ( exception . <RARE_TOKEN> ( null , cause ) ) { </a> 
<a> ctx . close ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . <RARE_TOKEN> . transport . socket ; </a> 
<a> import static org . junit . Assert . * ; </a> 
<a> import io . netty . bootstrap . Bootstrap ; </a> 
<a> import io . netty . bootstrap . ServerBootstrap ; </a> 
<a> import io . netty . buffer . ByteBuf ; </a> 
<a> import io . netty . buffer . Unpooled ; </a> 
<a> import io . netty . channel . Channel ; </a> 
<a> import io . netty . channel . ChannelFuture ; </a> 
<a> import io . netty . channel . ChannelFutureListener ; </a> 
<a> import io . netty . channel . ChannelHandlerContext ; </a> 
<a> import io . netty . channel . <RARE_TOKEN> ; </a> 
<a> import io . netty . channel . ChannelInitializer ; </a> 
<a> import io . netty . channel . socket . SocketChannel ; </a> 
<a> import io . netty . handler . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import java . io . <RARE_TOKEN> ; </a> 
<a> import java . io . IOException ; </a> 
<a> import java . io . InputStream ; </a> 
<a> import java . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import java . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import java . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import java . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import java . <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import java . <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import java . util . Random ; </a> 
<a> import java . util . concurrent . atomic . AtomicBoolean ; </a> 
<a> import java . util . concurrent . atomic . AtomicReference ; </a> 
<a> import javax . net . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import javax . net . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import javax . net . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import javax . net . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import javax . net . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import javax . net . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import javax . net . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import org . junit . Test ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> private static final int <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final Random random = new Random ( ) ; </a> 
<a> static final byte [ ] data = new byte [ <RARE_TOKEN> ] ; </a> 
<a> static { </a> 
<a> random . <RARE_TOKEN> ( data ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) throws Throwable { </a> 
<a> run ( ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( ServerBootstrap sb , Bootstrap cb ) throws Throwable { </a> 
<a> final <RARE_TOKEN> sh = new <RARE_TOKEN> ( true ) ; </a> 
<a> final <RARE_TOKEN> ch = new <RARE_TOKEN> ( false ) ; </a> 
<a> final <RARE_TOKEN> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> final <RARE_TOKEN> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( false ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( true ) ; </a> 
<a> sb . <RARE_TOKEN> ( new ChannelInitializer < SocketChannel > ( ) { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( SocketChannel <RARE_TOKEN> ) throws Exception { </a> 
<a> <RARE_TOKEN> . pipeline ( ) . <RARE_TOKEN> ( <RARE_TOKEN> , new <RARE_TOKEN> ( <RARE_TOKEN> ) ) ; </a> 
<a> <RARE_TOKEN> . pipeline ( ) . addLast ( <RARE_TOKEN> , sh ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> cb . handler ( new ChannelInitializer < SocketChannel > ( ) { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( SocketChannel <RARE_TOKEN> ) throws Exception { </a> 
<a> <RARE_TOKEN> . pipeline ( ) . <RARE_TOKEN> ( <RARE_TOKEN> , new <RARE_TOKEN> ( <RARE_TOKEN> ) ) ; </a> 
<a> <RARE_TOKEN> . pipeline ( ) . addLast ( <RARE_TOKEN> , ch ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> Channel sc = sb . bind ( ) . sync ( ) . channel ( ) ; </a> 
<a> Channel <RARE_TOKEN> = cb . connect ( ) . sync ( ) . channel ( ) ; </a> 
<a> ChannelFuture <RARE_TOKEN> = <RARE_TOKEN> . pipeline ( ) . get ( <RARE_TOKEN> . class ) . <RARE_TOKEN> ( ) ; </a> 
<a> final ChannelFuture <RARE_TOKEN> = </a> 
<a> <RARE_TOKEN> . write ( Unpooled . wrappedBuffer ( data , 0 , <RARE_TOKEN> ) ) ; </a> 
<a> final AtomicBoolean <RARE_TOKEN> = new AtomicBoolean ( ) ; </a> 
<a> <RARE_TOKEN> . addListener ( new ChannelFutureListener ( ) { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ChannelFuture future ) throws Exception { </a> 
<a> <RARE_TOKEN> . set ( <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> <RARE_TOKEN> . sync ( ) ; </a> 
<a> assertFalse ( <RARE_TOKEN> . get ( ) ) ; </a> 
<a> for ( int i = <RARE_TOKEN> ; i < data . length ; ) { </a> 
<a> int length = Math . min ( random . nextInt ( <RARE_TOKEN> * <RARE_TOKEN> ) , data . length - i ) ; </a> 
<a> <RARE_TOKEN> . write ( Unpooled . wrappedBuffer ( data , i , length ) ) ; </a> 
<a> i += length ; </a> 
<a> } </a> 
<a> while ( ch . <RARE_TOKEN> < data . length ) { </a> 
<a> if ( sh . exception . get ( ) != null ) { </a> 
<a> break ; </a> 
<a> } </a> 
<a> if ( ch . exception . get ( ) != null ) { </a> 
<a> break ; </a> 
<a> } </a> 
<a> try { </a> 
<a> Thread . sleep ( 1 ) ; </a> 
<a> } catch ( InterruptedException e ) { </a> 
<a> } </a> 
<a> } </a> 
<a> while ( sh . <RARE_TOKEN> < data . length ) { </a> 
<a> if ( sh . exception . get ( ) != null ) { </a> 
<a> break ; </a> 
<a> } </a> 
<a> if ( ch . exception . get ( ) != null ) { </a> 
<a> break ; </a> 
<a> } </a> 
<a> try { </a> 
<a> Thread . sleep ( 1 ) ; </a> 
<a> } catch ( InterruptedException e ) { </a> 
<a> } </a> 
<a> } </a> 
<a> sh . channel . close ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> ch . channel . close ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> sc . close ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> if ( sh . exception . get ( ) != null && ! ( sh . exception . get ( ) instanceof IOException ) ) { </a> 
<a> throw sh . exception . get ( ) ; </a> 
<a> } </a> 
<a> if ( ch . exception . get ( ) != null && ! ( ch . exception . get ( ) instanceof IOException ) ) { </a> 
<a> throw ch . exception . get ( ) ; </a> 
<a> } </a> 
<a> if ( sh . exception . get ( ) != null ) { </a> 
<a> throw sh . exception . get ( ) ; </a> 
<a> } </a> 
<a> if ( ch . exception . get ( ) != null ) { </a> 
<a> throw ch . exception . get ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> volatile Channel channel ; </a> 
<a> final AtomicReference < Throwable > exception = new AtomicReference < Throwable > ( ) ; </a> 
<a> volatile int <RARE_TOKEN> ; </a> 
<a> private final boolean server ; </a> 
<a> <RARE_TOKEN> ( boolean server ) { </a> 
<a> this . server = server ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ChannelHandlerContext ctx ) </a> 
<a> throws Exception { </a> 
<a> channel = ctx . channel ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void inboundBufferUpdated ( </a> 
<a> ChannelHandlerContext ctx , ByteBuf in ) </a> 
<a> throws Exception { </a> 
<a> byte [ ] <RARE_TOKEN> = new byte [ in . readableBytes ( ) ] ; </a> 
<a> in . readBytes ( <RARE_TOKEN> ) ; </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> for ( int i = 0 ; i < <RARE_TOKEN> . length ; i ++ ) { </a> 
<a> assertEquals ( data [ i + <RARE_TOKEN> ] , <RARE_TOKEN> [ i ] ) ; </a> 
<a> } </a> 
<a> if ( channel . parent ( ) != null ) { </a> 
<a> channel . write ( Unpooled . wrappedBuffer ( <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> += <RARE_TOKEN> . length ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void exceptionCaught ( ChannelHandlerContext ctx , </a> 
<a> Throwable cause ) throws Exception { </a> 
<a> if ( logger . <RARE_TOKEN> ( ) ) { </a> 
<a> logger . warn ( </a> 
<a> "Unexpected exception from the " + </a> 
<a> ( server ? <RARE_TOKEN> : <RARE_TOKEN> ) + " <RARE_TOKEN> , cause ) ; </a> 
<a> } </a> 
<a> exception . <RARE_TOKEN> ( null , cause ) ; </a> 
<a> ctx . close ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private static class <RARE_TOKEN> { </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private static final <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> private static final <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> static { </a> 
<a> String <RARE_TOKEN> = <RARE_TOKEN> . getProperty ( <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> try { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = <RARE_TOKEN> . getInstance ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ( ) , </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = <RARE_TOKEN> . getInstance ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . init ( <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . getInstance ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . init ( <RARE_TOKEN> . <RARE_TOKEN> ( ) , null , null ) ; </a> 
<a> } catch ( Exception e ) { </a> 
<a> throw new Error ( </a> 
<a> "Failed to <RARE_TOKEN> the <RARE_TOKEN> <RARE_TOKEN> , e ) ; </a> 
<a> } </a> 
<a> try { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . getInstance ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . init ( null , <RARE_TOKEN> . <RARE_TOKEN> ( ) , null ) ; </a> 
<a> } catch ( Exception e ) { </a> 
<a> throw new Error ( </a> 
<a> "Failed to <RARE_TOKEN> the <RARE_TOKEN> <RARE_TOKEN> , e ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public static <RARE_TOKEN> <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public static <RARE_TOKEN> <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<a> private static class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> private static final <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( ) { </a> 
<a> @ Override </a> 
<a> public <RARE_TOKEN> [ ] <RARE_TOKEN> ( ) { </a> 
<a> return new <RARE_TOKEN> [ 0 ] ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( </a> 
<a> <RARE_TOKEN> [ ] <RARE_TOKEN> , String <RARE_TOKEN> ) throws <RARE_TOKEN> { </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( </a> 
<a> <RARE_TOKEN> [ ] <RARE_TOKEN> , String <RARE_TOKEN> ) throws <RARE_TOKEN> { </a> 
<a> } </a> 
<a> } ; </a> 
<a> public static <RARE_TOKEN> [ ] <RARE_TOKEN> ( ) { </a> 
<a> return new <RARE_TOKEN> [ ] { <RARE_TOKEN> } ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected <RARE_TOKEN> [ ] <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> ) throws <RARE_TOKEN> { </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> ) </a> 
<a> throws <RARE_TOKEN> { </a> 
<a> } </a> 
<a> } </a> 
<a> private static final class <RARE_TOKEN> { </a> 
<a> private static final short [ ] <RARE_TOKEN> = { </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , 0x00 , 0x00 , 0x00 , <RARE_TOKEN> , </a> 
<a> 0x00 , 0x00 , 0x00 , <RARE_TOKEN> , 0x00 , 0x00 , 0x00 , 0x01 , </a> 
<a> 0x00 , <RARE_TOKEN> , 0x65 , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> 0x65 , 0x00 , 0x00 , 0x01 , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , 0x00 , 0x00 , 0x01 , <RARE_TOKEN> , 0x30 , <RARE_TOKEN> , 0x01 , </a> 
<a> <RARE_TOKEN> , 0x30 , <RARE_TOKEN> , 0x06 , <RARE_TOKEN> , <RARE_TOKEN> , 0x06 , 0x01 , </a> 
<a> <RARE_TOKEN> , 0x01 , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , 0x01 , 0x01 , <RARE_TOKEN> , </a> 
<a> 0x00 , <RARE_TOKEN> , <RARE_TOKEN> , 0x01 , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , 0x06 , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , 0x31 , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> 0xff , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> 0x30 , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , 0x03 , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , 0x03 , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , 0x65 , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , 0x01 , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , 0x13 , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , 0x74 , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , 0xff , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , 0x13 , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , 0x31 , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , 0x31 , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , 0x00 , </a> 
<a> 0x00 , 0x00 , 0x01 , 0x00 , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> 0x30 , <RARE_TOKEN> , 0x00 , 0x00 , <RARE_TOKEN> , <RARE_TOKEN> , 0x30 , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , 0x30 , <RARE_TOKEN> , 0x01 , <RARE_TOKEN> , <RARE_TOKEN> , 0x03 , </a> 
<a> <RARE_TOKEN> , 0x01 , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , 0x30 , <RARE_TOKEN> , 0x06 , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , 0x01 , 0x01 , <RARE_TOKEN> , <RARE_TOKEN> , 0x00 , </a> 
<a> 0x30 , <RARE_TOKEN> , <RARE_TOKEN> , 0x31 , <RARE_TOKEN> , 0x30 , <RARE_TOKEN> , 0x06 , </a> 
<a> 0x03 , <RARE_TOKEN> , <RARE_TOKEN> , 0x06 , 0x13 , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> 0x31 , 0x13 , 0x30 , <RARE_TOKEN> , 0x06 , 0x03 , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , 0x13 , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , 0x31 , <RARE_TOKEN> , 0x30 , </a> 
<a> <RARE_TOKEN> , 0x06 , 0x03 , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , 0x13 , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , 0x65 , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , 0x31 , <RARE_TOKEN> , 0x30 , <RARE_TOKEN> , 0x06 , </a> 
<a> 0x03 , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , 0x13 , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> 0x65 , <RARE_TOKEN> , <RARE_TOKEN> , 0x65 , 0x74 , 0x74 , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , 0x65 , <RARE_TOKEN> , 0x74 , 0x31 , </a> 
<a> <RARE_TOKEN> , 0x30 , <RARE_TOKEN> , 0x06 , 0x03 , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> 0x13 , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> 0x65 , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , 0x74 , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , 0x31 , 0x30 , 0x30 , <RARE_TOKEN> , 0x06 , 0x03 , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , 0x03 , 0x13 , <RARE_TOKEN> , <RARE_TOKEN> , 0x65 , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , 0x65 , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , 0x74 , <RARE_TOKEN> , 0x65 , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , 0x65 , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> 0x65 , 0x74 , 0x74 , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , 0x65 , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , 0x65 , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , 0x65 , 0x74 , 0x30 , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , 0x30 , </a> 
<a> <RARE_TOKEN> , 0x30 , <RARE_TOKEN> , 0x31 , <RARE_TOKEN> , 0x30 , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> 0x31 , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , 0x31 , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , 0x31 , 0x31 , <RARE_TOKEN> , <RARE_TOKEN> , 0x30 , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , 0x31 , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , 0x30 , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> 0x31 , <RARE_TOKEN> , 0x30 , <RARE_TOKEN> , 0x06 , 0x03 , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> 0x06 , 0x13 , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , 0x31 , 0x13 , 0x30 , </a> 
<a> <RARE_TOKEN> , 0x06 , 0x03 , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , 0x13 , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , 0x31 , <RARE_TOKEN> , 0x30 , <RARE_TOKEN> , 0x06 , 0x03 , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , 0x13 , <RARE_TOKEN> , <RARE_TOKEN> , 0x65 , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> 0x31 , <RARE_TOKEN> , 0x30 , <RARE_TOKEN> , 0x06 , 0x03 , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , 0x13 , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , 0x65 , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> 0x65 , 0x74 , 0x74 , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , 0x65 , <RARE_TOKEN> , 0x74 , 0x31 , <RARE_TOKEN> , 0x30 , <RARE_TOKEN> , </a> 
<a> 0x06 , 0x03 , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , 0x13 , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , 0x65 , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , 0x74 , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , 0x31 , 0x30 , </a> 
<a> 0x30 , <RARE_TOKEN> , 0x06 , 0x03 , <RARE_TOKEN> , <RARE_TOKEN> , 0x03 , 0x13 , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , 0x65 , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , 0x65 , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , 0x74 , <RARE_TOKEN> , 0x65 , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , 0x65 , <RARE_TOKEN> , <RARE_TOKEN> , 0x65 , 0x74 , 0x74 , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , 0x65 , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , 0x65 , <RARE_TOKEN> , <RARE_TOKEN> , 0x65 , 0x74 , </a> 
<a> 0x30 , <RARE_TOKEN> , 0x30 , <RARE_TOKEN> , 0x06 , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , 0x01 , 0x01 , 0x01 , <RARE_TOKEN> , </a> 
<a> 0x00 , 0x03 , <RARE_TOKEN> , 0x00 , 0x30 , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> 0x00 , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> 0x00 , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , 0x00 , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , 0x06 , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , 0x03 , 0x01 , 0x00 , 0x01 , 0x30 , <RARE_TOKEN> , </a> 
<a> 0x06 , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> 0x01 , 0x01 , <RARE_TOKEN> , <RARE_TOKEN> , 0x00 , 0x03 , <RARE_TOKEN> , 0x00 , </a> 
<a> 0x65 , <RARE_TOKEN> , 0x30 , 0x01 , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , 0x03 , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> 0x00 , 0x00 , 0x00 , 0x01 , 0x00 , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , 0x65 , <RARE_TOKEN> , 0x00 , 0x00 , 0x01 , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , 0x00 , 0x00 , 0x01 , <RARE_TOKEN> , 0x30 , </a> 
<a> <RARE_TOKEN> , 0x01 , <RARE_TOKEN> , 0x30 , <RARE_TOKEN> , 0x06 , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> 0x06 , 0x01 , <RARE_TOKEN> , 0x01 , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , 0x01 , </a> 
<a> 0x01 , <RARE_TOKEN> , 0x00 , <RARE_TOKEN> , <RARE_TOKEN> , 0x01 , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , 0x31 , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , 0x30 , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , 0x65 , </a> 
<a> 0x03 , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , 0x74 , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> 0x30 , 0x31 , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , 0x13 , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , 0x31 , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , 0x13 , 0x65 , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , 0x30 , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , 0x74 , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , 0x01 , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , 0x03 , 0x74 , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , 0x13 , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , 0x74 , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , 0x03 , 0x74 , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> 0x74 , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , 0x00 , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , 0x06 , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , 0x13 , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> 0x00 , 0x00 , 0x00 , 0x01 , 0x00 , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , 0x30 , <RARE_TOKEN> , 0x00 , 0x00 , <RARE_TOKEN> , <RARE_TOKEN> , 0x30 , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , 0x30 , 0x30 , <RARE_TOKEN> , 0x01 , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> 0x03 , <RARE_TOKEN> , 0x01 , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , 0x30 , <RARE_TOKEN> , 0x06 , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , 0x01 , 0x01 , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> 0x00 , 0x30 , <RARE_TOKEN> , <RARE_TOKEN> , 0x31 , <RARE_TOKEN> , 0x30 , <RARE_TOKEN> , </a> 
<a> 0x06 , 0x03 , <RARE_TOKEN> , <RARE_TOKEN> , 0x06 , 0x13 , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , 0x31 , 0x13 , 0x30 , <RARE_TOKEN> , 0x06 , 0x03 , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , 0x13 , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , 0x31 , <RARE_TOKEN> , </a> 
<a> 0x30 , <RARE_TOKEN> , 0x06 , 0x03 , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , 0x13 , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , 0x65 , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , 0x31 , <RARE_TOKEN> , 0x30 , <RARE_TOKEN> , </a> 
<a> 0x06 , 0x03 , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , 0x13 , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , 0x65 , <RARE_TOKEN> , <RARE_TOKEN> , 0x65 , 0x74 , 0x74 , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , 0x65 , <RARE_TOKEN> , 0x74 , </a> 
<a> 0x31 , <RARE_TOKEN> , 0x30 , 0x13 , 0x06 , 0x03 , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , 0x13 , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , 0x74 , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , 0x74 , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , 0x31 , </a> 
<a> 0x30 , 0x30 , <RARE_TOKEN> , 0x06 , 0x03 , <RARE_TOKEN> , <RARE_TOKEN> , 0x03 , </a> 
<a> 0x13 , <RARE_TOKEN> , <RARE_TOKEN> , 0x65 , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , 0x65 , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , 0x74 , <RARE_TOKEN> , 0x65 , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , 0x65 , <RARE_TOKEN> , <RARE_TOKEN> , 0x65 , 0x74 , </a> 
<a> 0x74 , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , 0x65 , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , 0x65 , <RARE_TOKEN> , <RARE_TOKEN> , 0x65 , </a> 
<a> 0x74 , 0x30 , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , 0x30 , <RARE_TOKEN> , 0x30 , </a> 
<a> <RARE_TOKEN> , 0x31 , <RARE_TOKEN> , 0x30 , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> 0x30 , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , 0x31 , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> 0x31 , 0x31 , <RARE_TOKEN> , <RARE_TOKEN> , 0x30 , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , 0x30 , <RARE_TOKEN> , 0x30 , <RARE_TOKEN> , <RARE_TOKEN> , 0x31 , <RARE_TOKEN> , </a> 
<a> 0x30 , <RARE_TOKEN> , 0x06 , 0x03 , <RARE_TOKEN> , <RARE_TOKEN> , 0x06 , 0x13 , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , 0x31 , 0x13 , 0x30 , <RARE_TOKEN> , 0x06 , </a> 
<a> 0x03 , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , 0x13 , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> 0x31 , <RARE_TOKEN> , 0x30 , <RARE_TOKEN> , 0x06 , 0x03 , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , 0x13 , <RARE_TOKEN> , <RARE_TOKEN> , 0x65 , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , 0x31 , <RARE_TOKEN> , </a> 
<a> 0x30 , <RARE_TOKEN> , 0x06 , 0x03 , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , 0x13 , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , 0x65 , <RARE_TOKEN> , <RARE_TOKEN> , 0x65 , 0x74 , </a> 
<a> 0x74 , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , 0x65 , </a> 
<a> <RARE_TOKEN> , 0x74 , 0x31 , <RARE_TOKEN> , 0x30 , 0x13 , 0x06 , 0x03 , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , 0x13 , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> 0x74 , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , 0x74 , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , 0x31 , 0x30 , 0x30 , <RARE_TOKEN> , 0x06 , 0x03 , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , 0x03 , 0x13 , <RARE_TOKEN> , <RARE_TOKEN> , 0x65 , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , 0x65 , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , 0x74 , <RARE_TOKEN> , 0x65 , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , 0x65 , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> 0x65 , 0x74 , 0x74 , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , 0x65 , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , 0x65 , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , 0x65 , 0x74 , 0x30 , <RARE_TOKEN> , 0x30 , <RARE_TOKEN> , 0x06 , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , 0x01 , </a> 
<a> 0x01 , 0x01 , <RARE_TOKEN> , 0x00 , 0x03 , <RARE_TOKEN> , 0x00 , 0x30 , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , 0x00 , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , 0x03 , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , 0x03 , 0x01 , 0x00 , </a> 
<a> 0x01 , 0x30 , <RARE_TOKEN> , 0x06 , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , 0x01 , 0x01 , <RARE_TOKEN> , <RARE_TOKEN> , 0x00 , </a> 
<a> 0x03 , <RARE_TOKEN> , 0x00 , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> } ; </a> 
<a> public static InputStream <RARE_TOKEN> ( ) { </a> 
<a> byte [ ] data = new byte [ <RARE_TOKEN> . length ] ; </a> 
<a> for ( int i = 0 ; i < data . length ; i ++ ) { </a> 
<a> data [ i ] = ( byte ) <RARE_TOKEN> [ i ] ; </a> 
<a> } </a> 
<a> return new <RARE_TOKEN> ( data ) ; </a> 
<a> } </a> 
<a> public static char [ ] <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> public static char [ ] <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> private <RARE_TOKEN> ( ) { </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . <RARE_TOKEN> . transport . socket ; </a> 
<a> import static org . junit . Assert . * ; </a> 
<a> import io . netty . bootstrap . Bootstrap ; </a> 
<a> import io . netty . bootstrap . ServerBootstrap ; </a> 
<a> import io . netty . buffer . ByteBuf ; </a> 
<a> import io . netty . channel . Channel ; </a> 
<a> import io . netty . channel . ChannelFuture ; </a> 
<a> import io . netty . channel . ChannelHandler ; </a> 
<a> import io . netty . channel . ChannelHandlerContext ; </a> 
<a> import io . netty . channel . <RARE_TOKEN> ; </a> 
<a> import io . netty . channel . ChannelInboundMessageHandlerAdapter ; </a> 
<a> import io . netty . channel . group . <RARE_TOKEN> ; </a> 
<a> import io . netty . channel . group . <RARE_TOKEN> ; </a> 
<a> import io . netty . channel . socket . SocketChannel ; </a> 
<a> import java . io . IOException ; </a> 
<a> import java . util . Random ; </a> 
<a> import java . util . concurrent . TimeUnit ; </a> 
<a> import java . util . concurrent . atomic . AtomicReference ; </a> 
<a> import org . junit . <RARE_TOKEN> ; </a> 
<a> import org . junit . Test ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> private static final Random random = new Random ( ) ; </a> 
<a> static final byte [ ] data = new byte [ <RARE_TOKEN> ] ; </a> 
<a> static { </a> 
<a> random . <RARE_TOKEN> ( data ) ; </a> 
<a> } </a> 
<a> @ <RARE_TOKEN> </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) throws Throwable { </a> 
<a> run ( ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( ServerBootstrap sb , Bootstrap cb ) throws Throwable { </a> 
<a> <RARE_TOKEN> handler = new <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> sh = new <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> ch = new <RARE_TOKEN> ( ) ; </a> 
<a> sb . handler ( handler ) ; </a> 
<a> sb . <RARE_TOKEN> ( sh ) ; </a> 
<a> Channel sc = sb . bind ( ) . sync ( ) . channel ( ) ; </a> 
<a> cb . handler ( ch ) ; </a> 
<a> cb . connect ( ) . sync ( ) ; </a> 
<a> Thread . sleep ( 1000 ) ; </a> 
<a> Bootstrap <RARE_TOKEN> = <RARE_TOKEN> . newInstance ( ) ; </a> 
<a> <RARE_TOKEN> . handler ( ch ) ; </a> 
<a> <RARE_TOKEN> . remoteAddress ( <RARE_TOKEN> ) ; </a> 
<a> ChannelFuture <RARE_TOKEN> = <RARE_TOKEN> . connect ( ) ; </a> 
<a> assertFalse ( <RARE_TOKEN> . await ( 2 , TimeUnit . SECONDS ) ) ; </a> 
<a> sc . pipeline ( ) . context ( handler ) . readable ( true ) ; </a> 
<a> assertTrue ( <RARE_TOKEN> . await ( 2 , TimeUnit . SECONDS ) ) ; </a> 
<a> sh . group . close ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> ch . group . close ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> sc . close ( ) . sync ( ) ; </a> 
<a> if ( sh . exception . get ( ) != null && ! ( sh . exception . get ( ) instanceof IOException ) ) { </a> 
<a> throw sh . exception . get ( ) ; </a> 
<a> } </a> 
<a> if ( ch . exception . get ( ) != null && ! ( ch . exception . get ( ) instanceof IOException ) ) { </a> 
<a> throw ch . exception . get ( ) ; </a> 
<a> } </a> 
<a> if ( sh . exception . get ( ) != null ) { </a> 
<a> throw sh . exception . get ( ) ; </a> 
<a> } </a> 
<a> if ( ch . exception . get ( ) != null ) { </a> 
<a> throw ch . exception . get ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private static class <RARE_TOKEN> extends ChannelInboundMessageHandlerAdapter < SocketChannel > { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ChannelHandlerContext ctx , SocketChannel msg ) throws Exception { </a> 
<a> ctx . <RARE_TOKEN> ( ) . add ( msg ) ; </a> 
<a> ctx . readable ( false ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ ChannelHandler . Sharable </a> 
<a> private static class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> final <RARE_TOKEN> group = new <RARE_TOKEN> ( ) ; </a> 
<a> final AtomicReference < Throwable > exception = new AtomicReference < Throwable > ( ) ; </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ChannelHandlerContext ctx ) </a> 
<a> throws Exception { </a> 
<a> group . add ( ctx . channel ( ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void exceptionCaught ( ChannelHandlerContext ctx , </a> 
<a> Throwable cause ) throws Exception { </a> 
<a> if ( exception . <RARE_TOKEN> ( null , cause ) ) { </a> 
<a> ctx . close ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void inboundBufferUpdated ( ChannelHandlerContext ctx , ByteBuf in ) throws Exception { </a> 
<a> in . clear ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . <RARE_TOKEN> . transport . socket ; </a> 
<a> import io . netty . bootstrap . Bootstrap ; </a> 
<a> import io . netty . bootstrap . ServerBootstrap ; </a> 
<a> import io . netty . channel . socket . <RARE_TOKEN> ; </a> 
<a> import io . netty . channel . socket . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import io . netty . channel . socket . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import io . netty . channel . socket . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import io . netty . channel . socket . nio . <RARE_TOKEN> ; </a> 
<a> import io . netty . channel . socket . nio . NioEventLoopGroup ; </a> 
<a> import io . netty . channel . socket . nio . <RARE_TOKEN> ; </a> 
<a> import io . netty . channel . socket . nio . <RARE_TOKEN> ; </a> 
<a> import io . netty . channel . socket . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import io . netty . channel . socket . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import io . netty . channel . socket . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import io . netty . channel . socket . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import java . util . ArrayList ; </a> 
<a> import java . util . List ; </a> 
<a> import java . util . Map . Entry ; </a> 
<a> final class <RARE_TOKEN> { </a> 
<a> static List < Entry < Factory < ServerBootstrap > , Factory < Bootstrap > > > socket ( ) { </a> 
<a> List < Entry < Factory < ServerBootstrap > , Factory < Bootstrap > > > list = </a> 
<a> new ArrayList < Entry < Factory < ServerBootstrap > , Factory < Bootstrap > > > ( ) ; </a> 
<a> List < Factory < ServerBootstrap > > <RARE_TOKEN> = </a> 
<a> new ArrayList < Factory < ServerBootstrap > > ( ) ; </a> 
<a> <RARE_TOKEN> . add ( new Factory < ServerBootstrap > ( ) { </a> 
<a> @ Override </a> 
<a> public ServerBootstrap newInstance ( ) { </a> 
<a> return new ServerBootstrap ( ) . </a> 
<a> group ( new NioEventLoopGroup ( ) , new NioEventLoopGroup ( ) ) . </a> 
<a> channel ( new <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> <RARE_TOKEN> . add ( new Factory < ServerBootstrap > ( ) { </a> 
<a> @ Override </a> 
<a> public ServerBootstrap newInstance ( ) { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( ) ; </a> 
<a> return new ServerBootstrap ( ) . </a> 
<a> group ( <RARE_TOKEN> , <RARE_TOKEN> ) . </a> 
<a> channel ( new <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> <RARE_TOKEN> . add ( new Factory < ServerBootstrap > ( ) { </a> 
<a> @ Override </a> 
<a> public ServerBootstrap newInstance ( ) { </a> 
<a> return new ServerBootstrap ( ) . </a> 
<a> group ( new <RARE_TOKEN> ( ) , new <RARE_TOKEN> ( ) ) . </a> 
<a> channel ( new <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> List < Factory < Bootstrap > > <RARE_TOKEN> = </a> 
<a> new ArrayList < Factory < Bootstrap > > ( ) ; </a> 
<a> <RARE_TOKEN> . add ( new Factory < Bootstrap > ( ) { </a> 
<a> @ Override </a> 
<a> public Bootstrap newInstance ( ) { </a> 
<a> return new Bootstrap ( ) . group ( new NioEventLoopGroup ( ) ) . channel ( new <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> <RARE_TOKEN> . add ( new Factory < Bootstrap > ( ) { </a> 
<a> @ Override </a> 
<a> public Bootstrap newInstance ( ) { </a> 
<a> <RARE_TOKEN> loop = new <RARE_TOKEN> ( ) ; </a> 
<a> return new Bootstrap ( ) . group ( loop ) . channel ( new <RARE_TOKEN> ( loop ) ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> <RARE_TOKEN> . add ( new Factory < Bootstrap > ( ) { </a> 
<a> @ Override </a> 
<a> public Bootstrap newInstance ( ) { </a> 
<a> return new Bootstrap ( ) . group ( new <RARE_TOKEN> ( ) ) . channel ( new <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> for ( Factory < ServerBootstrap > <RARE_TOKEN> : <RARE_TOKEN> ) { </a> 
<a> for ( Factory < Bootstrap > <RARE_TOKEN> : <RARE_TOKEN> ) { </a> 
<a> final Factory < ServerBootstrap > <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> final Factory < Bootstrap > <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> list . add ( new Entry < Factory < ServerBootstrap > , Factory < Bootstrap > > ( ) { </a> 
<a> @ Override </a> 
<a> public Factory < ServerBootstrap > <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public Factory < Bootstrap > getValue ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public Factory < Bootstrap > <RARE_TOKEN> ( Factory < Bootstrap > value ) { </a> 
<a> throw new UnsupportedOperationException ( ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> list . remove ( list . size ( ) - 1 ) ; </a> 
<a> return list ; </a> 
<a> } </a> 
<a> static List < Entry < Factory < Bootstrap > , Factory < Bootstrap > > > <RARE_TOKEN> ( ) { </a> 
<a> List < Entry < Factory < Bootstrap > , Factory < Bootstrap > > > list = </a> 
<a> new ArrayList < Entry < Factory < Bootstrap > , Factory < Bootstrap > > > ( ) ; </a> 
<a> List < Factory < Bootstrap > > <RARE_TOKEN> = </a> 
<a> new ArrayList < Factory < Bootstrap > > ( ) ; </a> 
<a> <RARE_TOKEN> . add ( new Factory < Bootstrap > ( ) { </a> 
<a> @ Override </a> 
<a> public Bootstrap newInstance ( ) { </a> 
<a> return new Bootstrap ( ) . group ( new NioEventLoopGroup ( ) ) . channel ( </a> 
<a> new <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> <RARE_TOKEN> . add ( new Factory < Bootstrap > ( ) { </a> 
<a> @ Override </a> 
<a> public Bootstrap newInstance ( ) { </a> 
<a> return new Bootstrap ( ) . group ( new <RARE_TOKEN> ( ) ) . channel ( new <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> for ( Factory < Bootstrap > <RARE_TOKEN> : <RARE_TOKEN> ) { </a> 
<a> for ( Factory < Bootstrap > <RARE_TOKEN> : <RARE_TOKEN> ) { </a> 
<a> final Factory < Bootstrap > <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> final Factory < Bootstrap > <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> list . add ( new Entry < Factory < Bootstrap > , Factory < Bootstrap > > ( ) { </a> 
<a> @ Override </a> 
<a> public Factory < Bootstrap > <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public Factory < Bootstrap > getValue ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public Factory < Bootstrap > <RARE_TOKEN> ( Factory < Bootstrap > value ) { </a> 
<a> throw new UnsupportedOperationException ( ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> return list ; </a> 
<a> } </a> 
<a> private <RARE_TOKEN> ( ) { } </a> 
<a> interface Factory < T > { </a> 
<a> T newInstance ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . <RARE_TOKEN> . util ; </a> 
<a> import java . io . IOException ; </a> 
<a> import java . net . <RARE_TOKEN> ; </a> 
<a> public class <RARE_TOKEN> { </a> 
<a> private final static int <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private final static int <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> public static int <RARE_TOKEN> ( ) { </a> 
<a> for ( int start = <RARE_TOKEN> ; start <= <RARE_TOKEN> ; start ++ ) { </a> 
<a> try { </a> 
<a> <RARE_TOKEN> socket = new <RARE_TOKEN> ( start ) ; </a> 
<a> socket . <RARE_TOKEN> ( true ) ; </a> 
<a> socket . close ( ) ; </a> 
<a> return start ; </a> 
<a> } catch ( IOException e ) { </a> 
<a> } </a> 
<a> } </a> 
<a> throw new <RARE_TOKEN> ( <RARE_TOKEN> to <RARE_TOKEN> a <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> private <RARE_TOKEN> ( ) { } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . bootstrap ; </a> 
<a> import io . netty . channel . Channel ; </a> 
<a> import io . netty . channel . ChannelException ; </a> 
<a> import io . netty . channel . ChannelFuture ; </a> 
<a> import io . netty . channel . ChannelFutureListener ; </a> 
<a> import io . netty . channel . ChannelHandler ; </a> 
<a> import io . netty . channel . ChannelOption ; </a> 
<a> import io . netty . channel . ChannelPipeline ; </a> 
<a> import io . netty . channel . <RARE_TOKEN> ; </a> 
<a> import io . netty . logging . InternalLogger ; </a> 
<a> import io . netty . logging . InternalLoggerFactory ; </a> 
<a> import java . net . InetAddress ; </a> 
<a> import java . net . InetSocketAddress ; </a> 
<a> import java . net . SocketAddress ; </a> 
<a> import java . nio . channels . <RARE_TOKEN> ; </a> 
<a> import java . util . <RARE_TOKEN> ; </a> 
<a> import java . util . Map ; </a> 
<a> import java . util . Map . Entry ; </a> 
<a> public class Bootstrap { </a> 
<a> private static final InternalLogger logger = InternalLoggerFactory . getInstance ( Bootstrap . class ) ; </a> 
<a> private final Map < ChannelOption < ? > , Object > <RARE_TOKEN> = new <RARE_TOKEN> < ChannelOption < ? > , Object > ( ) ; </a> 
<a> private <RARE_TOKEN> group ; </a> 
<a> private Channel channel ; </a> 
<a> private ChannelHandler handler ; </a> 
<a> private SocketAddress localAddress ; </a> 
<a> private SocketAddress remoteAddress ; </a> 
<a> public Bootstrap group ( <RARE_TOKEN> group ) { </a> 
<a> if ( group == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( this . group != null ) { </a> 
<a> throw new IllegalStateException ( <RARE_TOKEN> set <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> this . group = group ; </a> 
<a> return this ; </a> 
<a> } </a> 
<a> public Bootstrap channel ( Channel channel ) { </a> 
<a> if ( channel == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( this . channel != null ) { </a> 
<a> throw new IllegalStateException ( <RARE_TOKEN> set <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> this . channel = channel ; </a> 
<a> return this ; </a> 
<a> } </a> 
<a> public < T > Bootstrap option ( ChannelOption < T > option , T value ) { </a> 
<a> if ( option == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( value == null ) { </a> 
<a> <RARE_TOKEN> . remove ( option ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> . put ( option , value ) ; </a> 
<a> } </a> 
<a> return this ; </a> 
<a> } </a> 
<a> public Bootstrap handler ( ChannelHandler handler ) { </a> 
<a> if ( handler == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> this . handler = handler ; </a> 
<a> return this ; </a> 
<a> } </a> 
<a> public Bootstrap localAddress ( SocketAddress localAddress ) { </a> 
<a> this . localAddress = localAddress ; </a> 
<a> return this ; </a> 
<a> } </a> 
<a> public Bootstrap localAddress ( int port ) { </a> 
<a> localAddress = new InetSocketAddress ( port ) ; </a> 
<a> return this ; </a> 
<a> } </a> 
<a> public Bootstrap localAddress ( String host , int port ) { </a> 
<a> localAddress = new InetSocketAddress ( host , port ) ; </a> 
<a> return this ; </a> 
<a> } </a> 
<a> public Bootstrap localAddress ( InetAddress host , int port ) { </a> 
<a> localAddress = new InetSocketAddress ( host , port ) ; </a> 
<a> return this ; </a> 
<a> } </a> 
<a> public Bootstrap remoteAddress ( SocketAddress remoteAddress ) { </a> 
<a> this . remoteAddress = remoteAddress ; </a> 
<a> return this ; </a> 
<a> } </a> 
<a> public Bootstrap remoteAddress ( String host , int port ) { </a> 
<a> remoteAddress = new InetSocketAddress ( host , port ) ; </a> 
<a> return this ; </a> 
<a> } </a> 
<a> public Bootstrap remoteAddress ( InetAddress host , int port ) { </a> 
<a> remoteAddress = new InetSocketAddress ( host , port ) ; </a> 
<a> return this ; </a> 
<a> } </a> 
<a> public ChannelFuture bind ( ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> return bind ( channel . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> public ChannelFuture bind ( ChannelFuture future ) { </a> 
<a> <RARE_TOKEN> ( future ) ; </a> 
<a> if ( localAddress == null ) { </a> 
<a> throw new IllegalStateException ( <RARE_TOKEN> not <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> try { </a> 
<a> init ( ) ; </a> 
<a> } catch ( Throwable t ) { </a> 
<a> future . setFailure ( t ) ; </a> 
<a> return future ; </a> 
<a> } </a> 
<a> if ( ! <RARE_TOKEN> ( future ) ) { </a> 
<a> return future ; </a> 
<a> } </a> 
<a> return channel . bind ( localAddress , future ) . addListener ( ChannelFutureListener . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> public ChannelFuture connect ( ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> return connect ( channel . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> public ChannelFuture connect ( ChannelFuture future ) { </a> 
<a> <RARE_TOKEN> ( future ) ; </a> 
<a> if ( remoteAddress == null ) { </a> 
<a> throw new IllegalStateException ( <RARE_TOKEN> not <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> try { </a> 
<a> init ( ) ; </a> 
<a> } catch ( Throwable t ) { </a> 
<a> future . setFailure ( t ) ; </a> 
<a> return future ; </a> 
<a> } </a> 
<a> if ( ! <RARE_TOKEN> ( future ) ) { </a> 
<a> return future ; </a> 
<a> } </a> 
<a> if ( localAddress == null ) { </a> 
<a> channel . connect ( remoteAddress , future ) ; </a> 
<a> } else { </a> 
<a> channel . connect ( remoteAddress , localAddress , future ) ; </a> 
<a> } </a> 
<a> return future . addListener ( ChannelFutureListener . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> private void init ( ) throws Exception { </a> 
<a> if ( channel . isActive ( ) ) { </a> 
<a> throw new IllegalStateException ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> " + channel ) ; </a> 
<a> } </a> 
<a> if ( channel . <RARE_TOKEN> ( ) ) { </a> 
<a> throw new IllegalStateException ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> " + channel ) ; </a> 
<a> } </a> 
<a> if ( ! channel . isOpen ( ) ) { </a> 
<a> throw new <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> ChannelPipeline p = channel . pipeline ( ) ; </a> 
<a> p . addLast ( handler ) ; </a> 
<a> for ( Entry < ChannelOption < ? > , Object > e : <RARE_TOKEN> . <RARE_TOKEN> ( ) ) { </a> 
<a> try { </a> 
<a> if ( ! channel . config ( ) . <RARE_TOKEN> ( ( ChannelOption < Object > ) e . <RARE_TOKEN> ( ) , e . getValue ( ) ) ) { </a> 
<a> logger . warn ( <RARE_TOKEN> channel <RARE_TOKEN> " + e ) ; </a> 
<a> } </a> 
<a> } catch ( Throwable t ) { </a> 
<a> logger . warn ( "Failed to set a channel <RARE_TOKEN> " + channel , t ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> group . <RARE_TOKEN> ( channel ) . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> private static boolean <RARE_TOKEN> ( ChannelFuture future ) { </a> 
<a> if ( ! future . channel ( ) . isOpen ( ) ) { </a> 
<a> future . setFailure ( new ChannelException ( <RARE_TOKEN> <RARE_TOKEN> ) ) ; </a> 
<a> return false ; </a> 
<a> } </a> 
<a> return true ; </a> 
<a> } </a> 
<a> public void shutdown ( ) { </a> 
<a> if ( group != null ) { </a> 
<a> group . shutdown ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( ) { </a> 
<a> if ( group == null ) { </a> 
<a> throw new IllegalStateException ( <RARE_TOKEN> not <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( channel == null ) { </a> 
<a> throw new IllegalStateException ( <RARE_TOKEN> not <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( handler == null ) { </a> 
<a> throw new IllegalStateException ( <RARE_TOKEN> not <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( ChannelFuture future ) { </a> 
<a> if ( future == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( future . channel ( ) != channel ) { </a> 
<a> throw new IllegalArgumentException ( <RARE_TOKEN> must be the <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . bootstrap ; </a> 
<a> import io . netty . buffer . MessageBuf ; </a> 
<a> import io . netty . buffer . Unpooled ; </a> 
<a> import io . netty . channel . Channel ; </a> 
<a> import io . netty . channel . ChannelException ; </a> 
<a> import io . netty . channel . ChannelFuture ; </a> 
<a> import io . netty . channel . ChannelFutureListener ; </a> 
<a> import io . netty . channel . ChannelHandler ; </a> 
<a> import io . netty . channel . ChannelHandlerContext ; </a> 
<a> import io . netty . channel . <RARE_TOKEN> ; </a> 
<a> import io . netty . channel . <RARE_TOKEN> ; </a> 
<a> import io . netty . channel . ChannelInitializer ; </a> 
<a> import io . netty . channel . ChannelOption ; </a> 
<a> import io . netty . channel . ChannelPipeline ; </a> 
<a> import io . netty . channel . <RARE_TOKEN> ; </a> 
<a> import io . netty . channel . <RARE_TOKEN> ; </a> 
<a> import io . netty . logging . InternalLogger ; </a> 
<a> import io . netty . logging . InternalLoggerFactory ; </a> 
<a> import io . netty . util . <RARE_TOKEN> ; </a> 
<a> import java . net . InetAddress ; </a> 
<a> import java . net . InetSocketAddress ; </a> 
<a> import java . net . SocketAddress ; </a> 
<a> import java . nio . channels . <RARE_TOKEN> ; </a> 
<a> import java . util . <RARE_TOKEN> ; </a> 
<a> import java . util . Map ; </a> 
<a> import java . util . Map . Entry ; </a> 
<a> public class ServerBootstrap { </a> 
<a> private static final InternalLogger logger = InternalLoggerFactory . getInstance ( ServerBootstrap . class ) ; </a> 
<a> private static final InetSocketAddress <RARE_TOKEN> = new InetSocketAddress ( <RARE_TOKEN> . <RARE_TOKEN> , 0 ) ; </a> 
<a> private final ChannelHandler <RARE_TOKEN> = new ChannelInitializer < Channel > ( ) { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( Channel ch ) throws Exception { </a> 
<a> ch . pipeline ( ) . addLast ( new <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> } ; </a> 
<a> private final Map < ChannelOption < ? > , Object > <RARE_TOKEN> = new <RARE_TOKEN> < ChannelOption < ? > , Object > ( ) ; </a> 
<a> private final Map < ChannelOption < ? > , Object > <RARE_TOKEN> = new <RARE_TOKEN> < ChannelOption < ? > , Object > ( ) ; </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> private <RARE_TOKEN> channel ; </a> 
<a> private ChannelHandler handler ; </a> 
<a> private ChannelHandler <RARE_TOKEN> ; </a> 
<a> private SocketAddress localAddress ; </a> 
<a> public ServerBootstrap group ( <RARE_TOKEN> group ) { </a> 
<a> if ( group == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> throw new IllegalStateException ( <RARE_TOKEN> set <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> = group ; </a> 
<a> <RARE_TOKEN> = group ; </a> 
<a> return this ; </a> 
<a> } </a> 
<a> public ServerBootstrap group ( <RARE_TOKEN> <RARE_TOKEN> , <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( this . <RARE_TOKEN> != null ) { </a> 
<a> throw new IllegalStateException ( <RARE_TOKEN> set <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> return this ; </a> 
<a> } </a> 
<a> public ServerBootstrap channel ( <RARE_TOKEN> channel ) { </a> 
<a> if ( channel == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( this . channel != null ) { </a> 
<a> throw new IllegalStateException ( <RARE_TOKEN> set <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> this . channel = channel ; </a> 
<a> return this ; </a> 
<a> } </a> 
<a> public < T > ServerBootstrap option ( ChannelOption < T > <RARE_TOKEN> , T value ) { </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( value == null ) { </a> 
<a> <RARE_TOKEN> . remove ( <RARE_TOKEN> ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> . put ( <RARE_TOKEN> , value ) ; </a> 
<a> } </a> 
<a> return this ; </a> 
<a> } </a> 
<a> public < T > ServerBootstrap <RARE_TOKEN> ( ChannelOption < T > <RARE_TOKEN> , T value ) { </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( value == null ) { </a> 
<a> <RARE_TOKEN> . remove ( <RARE_TOKEN> ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> . put ( <RARE_TOKEN> , value ) ; </a> 
<a> } </a> 
<a> return this ; </a> 
<a> } </a> 
<a> public ServerBootstrap handler ( ChannelHandler handler ) { </a> 
<a> this . handler = handler ; </a> 
<a> return this ; </a> 
<a> } </a> 
<a> public ServerBootstrap <RARE_TOKEN> ( ChannelHandler <RARE_TOKEN> ) { </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> return this ; </a> 
<a> } </a> 
<a> public ServerBootstrap localAddress ( SocketAddress localAddress ) { </a> 
<a> if ( localAddress == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> this . localAddress = localAddress ; </a> 
<a> return this ; </a> 
<a> } </a> 
<a> public ServerBootstrap localAddress ( int port ) { </a> 
<a> localAddress = new InetSocketAddress ( port ) ; </a> 
<a> return this ; </a> 
<a> } </a> 
<a> public ServerBootstrap localAddress ( String host , int port ) { </a> 
<a> localAddress = new InetSocketAddress ( host , port ) ; </a> 
<a> return this ; </a> 
<a> } </a> 
<a> public ServerBootstrap localAddress ( InetAddress host , int port ) { </a> 
<a> localAddress = new InetSocketAddress ( host , port ) ; </a> 
<a> return this ; </a> 
<a> } </a> 
<a> public ChannelFuture bind ( ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> return bind ( channel . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> public ChannelFuture bind ( ChannelFuture future ) { </a> 
<a> <RARE_TOKEN> ( future ) ; </a> 
<a> if ( channel . isActive ( ) ) { </a> 
<a> future . setFailure ( new IllegalStateException ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> " + channel ) ) ; </a> 
<a> return future ; </a> 
<a> } </a> 
<a> if ( channel . <RARE_TOKEN> ( ) ) { </a> 
<a> future . setFailure ( new IllegalStateException ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> " + channel ) ) ; </a> 
<a> return future ; </a> 
<a> } </a> 
<a> if ( ! channel . isOpen ( ) ) { </a> 
<a> future . setFailure ( new <RARE_TOKEN> ( ) ) ; </a> 
<a> return future ; </a> 
<a> } </a> 
<a> try { </a> 
<a> channel . config ( ) . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } catch ( Exception e ) { </a> 
<a> future . setFailure ( e ) ; </a> 
<a> return future ; </a> 
<a> } </a> 
<a> ChannelPipeline p = channel . pipeline ( ) ; </a> 
<a> if ( handler != null ) { </a> 
<a> p . addLast ( handler ) ; </a> 
<a> } </a> 
<a> p . addLast ( <RARE_TOKEN> ) ; </a> 
<a> ChannelFuture f = <RARE_TOKEN> . <RARE_TOKEN> ( channel ) . <RARE_TOKEN> ( ) ; </a> 
<a> if ( ! f . <RARE_TOKEN> ( ) ) { </a> 
<a> future . setFailure ( f . cause ( ) ) ; </a> 
<a> return future ; </a> 
<a> } </a> 
<a> if ( ! channel . isOpen ( ) ) { </a> 
<a> future . setFailure ( new ChannelException ( <RARE_TOKEN> <RARE_TOKEN> ) ) ; </a> 
<a> return future ; </a> 
<a> } </a> 
<a> channel . bind ( localAddress , future ) . addListener ( ChannelFutureListener . <RARE_TOKEN> ) ; </a> 
<a> return future ; </a> 
<a> } </a> 
<a> public void shutdown ( ) { </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> . shutdown ( ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> . shutdown ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( ) { </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> throw new IllegalStateException ( <RARE_TOKEN> not <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( channel == null ) { </a> 
<a> throw new IllegalStateException ( <RARE_TOKEN> not <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> throw new IllegalStateException ( <RARE_TOKEN> not <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> logger . warn ( <RARE_TOKEN> is not <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> if ( localAddress == null ) { </a> 
<a> logger . warn ( <RARE_TOKEN> is not <RARE_TOKEN> <RARE_TOKEN> " + <RARE_TOKEN> + " <RARE_TOKEN> ) ; </a> 
<a> localAddress = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( ChannelFuture future ) { </a> 
<a> if ( future == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( future . channel ( ) != channel ) { </a> 
<a> throw new IllegalArgumentException ( <RARE_TOKEN> must be the <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> private class <RARE_TOKEN> </a> 
<a> extends <RARE_TOKEN> implements <RARE_TOKEN> < Channel > { </a> 
<a> @ Override </a> 
<a> public MessageBuf < Channel > <RARE_TOKEN> ( ChannelHandlerContext ctx ) throws Exception { </a> 
<a> return Unpooled . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void inboundBufferUpdated ( ChannelHandlerContext ctx ) { </a> 
<a> MessageBuf < Channel > in = ctx . <RARE_TOKEN> ( ) ; </a> 
<a> for ( ; ; ) { </a> 
<a> Channel <RARE_TOKEN> = in . poll ( ) ; </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> break ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> . pipeline ( ) . addLast ( <RARE_TOKEN> ) ; </a> 
<a> for ( Entry < ChannelOption < ? > , Object > e : <RARE_TOKEN> . <RARE_TOKEN> ( ) ) { </a> 
<a> try { </a> 
<a> if ( ! <RARE_TOKEN> . config ( ) . <RARE_TOKEN> ( ( ChannelOption < Object > ) e . <RARE_TOKEN> ( ) , e . getValue ( ) ) ) { </a> 
<a> logger . warn ( <RARE_TOKEN> channel <RARE_TOKEN> " + e ) ; </a> 
<a> } </a> 
<a> } catch ( Throwable t ) { </a> 
<a> logger . warn ( "Failed to set a channel <RARE_TOKEN> " + <RARE_TOKEN> , t ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> try { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } catch ( Throwable t ) { </a> 
<a> logger . warn ( "Failed to <RARE_TOKEN> an <RARE_TOKEN> <RARE_TOKEN> " + <RARE_TOKEN> , t ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . bootstrap ; </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . channel ; </a> 
<a> import io . netty . buffer . ByteBuf ; </a> 
<a> import io . netty . buffer . MessageBuf ; </a> 
<a> import io . netty . logging . InternalLogger ; </a> 
<a> import io . netty . logging . InternalLoggerFactory ; </a> 
<a> import io . netty . util . <RARE_TOKEN> ; </a> 
<a> import java . io . IOException ; </a> 
<a> import java . net . SocketAddress ; </a> 
<a> import java . nio . channels . <RARE_TOKEN> ; </a> 
<a> import java . util . Random ; </a> 
<a> import java . util . concurrent . ConcurrentHashMap ; </a> 
<a> import java . util . concurrent . <RARE_TOKEN> ; </a> 
<a> public abstract class <RARE_TOKEN> extends <RARE_TOKEN> implements Channel { </a> 
<a> private static final InternalLogger logger = InternalLoggerFactory . getInstance ( <RARE_TOKEN> . class ) ; </a> 
<a> static final <RARE_TOKEN> < Integer , Channel > <RARE_TOKEN> = new ConcurrentHashMap < Integer , Channel > ( ) ; </a> 
<a> private static final Random random = new Random ( ) ; </a> 
<a> private static Integer <RARE_TOKEN> ( Channel channel ) { </a> 
<a> int <RARE_TOKEN> = random . nextInt ( ) ; </a> 
<a> if ( <RARE_TOKEN> > 0 ) { </a> 
<a> <RARE_TOKEN> = - <RARE_TOKEN> ; </a> 
<a> } else if ( <RARE_TOKEN> == 0 ) { </a> 
<a> <RARE_TOKEN> = - 1 ; </a> 
<a> } </a> 
<a> Integer id ; </a> 
<a> for ( ; ; ) { </a> 
<a> id = Integer . valueOf ( <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> . <RARE_TOKEN> ( id , channel ) == null ) { </a> 
<a> return id ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> -- ; </a> 
<a> if ( <RARE_TOKEN> >= 0 ) { </a> 
<a> <RARE_TOKEN> = - 1 ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> private final Channel parent ; </a> 
<a> private final Integer id ; </a> 
<a> private final <RARE_TOKEN> unsafe ; </a> 
<a> private final <RARE_TOKEN> pipeline ; </a> 
<a> private final ChannelFuture <RARE_TOKEN> = new <RARE_TOKEN> ( this ) ; </a> 
<a> private final ChannelFuture <RARE_TOKEN> = new <RARE_TOKEN> ( this ) ; </a> 
<a> private final <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( this ) ; </a> 
<a> protected final <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( ) ; </a> 
<a> private volatile SocketAddress localAddress ; </a> 
<a> private volatile SocketAddress remoteAddress ; </a> 
<a> private volatile EventLoop eventLoop ; </a> 
<a> private volatile boolean <RARE_TOKEN> ; </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> private boolean <RARE_TOKEN> ; </a> 
<a> private boolean <RARE_TOKEN> ; </a> 
<a> private boolean <RARE_TOKEN> ; </a> 
<a> private String <RARE_TOKEN> ; </a> 
<a> protected <RARE_TOKEN> ( Channel parent , Integer id ) { </a> 
<a> if ( id == null ) { </a> 
<a> id = <RARE_TOKEN> ( this ) ; </a> 
<a> } else { </a> 
<a> if ( id . <RARE_TOKEN> ( ) < 0 ) { </a> 
<a> throw new IllegalArgumentException ( <RARE_TOKEN> " + id + " (expected: >= <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> . <RARE_TOKEN> ( id , this ) != null ) { </a> 
<a> throw new IllegalArgumentException ( <RARE_TOKEN> <RARE_TOKEN> " + id ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> this . parent = parent ; </a> 
<a> this . id = id ; </a> 
<a> unsafe = <RARE_TOKEN> ( ) ; </a> 
<a> pipeline = new <RARE_TOKEN> ( this ) ; </a> 
<a> <RARE_TOKEN> ( ) . addListener ( new ChannelFutureListener ( ) { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ChannelFuture future ) { </a> 
<a> <RARE_TOKEN> . remove ( id ( ) ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public final Integer id ( ) { </a> 
<a> return id ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public Channel parent ( ) { </a> 
<a> return parent ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ChannelPipeline pipeline ( ) { </a> 
<a> return pipeline ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public EventLoop eventLoop ( ) { </a> 
<a> EventLoop eventLoop = this . eventLoop ; </a> 
<a> if ( eventLoop == null ) { </a> 
<a> throw new IllegalStateException ( <RARE_TOKEN> not <RARE_TOKEN> to an event <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> return eventLoop ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public SocketAddress localAddress ( ) { </a> 
<a> SocketAddress localAddress = this . localAddress ; </a> 
<a> if ( localAddress == null ) { </a> 
<a> try { </a> 
<a> this . localAddress = localAddress = unsafe ( ) . localAddress ( ) ; </a> 
<a> } catch ( Throwable t ) { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> } </a> 
<a> return localAddress ; </a> 
<a> } </a> 
<a> protected void <RARE_TOKEN> ( ) { </a> 
<a> localAddress = null ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public SocketAddress remoteAddress ( ) { </a> 
<a> SocketAddress remoteAddress = this . remoteAddress ; </a> 
<a> if ( remoteAddress == null ) { </a> 
<a> try { </a> 
<a> this . remoteAddress = remoteAddress = unsafe ( ) . remoteAddress ( ) ; </a> 
<a> } catch ( Throwable t ) { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> } </a> 
<a> return remoteAddress ; </a> 
<a> } </a> 
<a> protected void <RARE_TOKEN> ( ) { </a> 
<a> remoteAddress = null ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ChannelFuture bind ( SocketAddress localAddress ) { </a> 
<a> return pipeline . bind ( localAddress ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ChannelFuture connect ( SocketAddress remoteAddress ) { </a> 
<a> return pipeline . connect ( remoteAddress ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ChannelFuture connect ( SocketAddress remoteAddress , SocketAddress localAddress ) { </a> 
<a> return pipeline . connect ( remoteAddress , localAddress ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ChannelFuture disconnect ( ) { </a> 
<a> return pipeline . disconnect ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ChannelFuture close ( ) { </a> 
<a> return pipeline . close ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ChannelFuture <RARE_TOKEN> ( ) { </a> 
<a> return pipeline . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ChannelFuture flush ( ) { </a> 
<a> return pipeline . flush ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ChannelFuture write ( Object message ) { </a> 
<a> return pipeline . write ( message ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ChannelFuture bind ( SocketAddress localAddress , ChannelFuture future ) { </a> 
<a> return pipeline . bind ( localAddress , future ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ChannelFuture connect ( SocketAddress remoteAddress , ChannelFuture future ) { </a> 
<a> return pipeline . connect ( remoteAddress , future ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ChannelFuture connect ( SocketAddress remoteAddress , SocketAddress localAddress , ChannelFuture future ) { </a> 
<a> return pipeline . connect ( remoteAddress , localAddress , future ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ChannelFuture disconnect ( ChannelFuture future ) { </a> 
<a> return pipeline . disconnect ( future ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ChannelFuture close ( ChannelFuture future ) { </a> 
<a> return pipeline . close ( future ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ChannelFuture <RARE_TOKEN> ( ChannelFuture future ) { </a> 
<a> return pipeline . <RARE_TOKEN> ( future ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ByteBuf <RARE_TOKEN> ( ) { </a> 
<a> return pipeline . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public MessageBuf < Object > <RARE_TOKEN> ( ) { </a> 
<a> return pipeline . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ChannelFuture flush ( ChannelFuture future ) { </a> 
<a> return pipeline . flush ( future ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ChannelFuture write ( Object message , ChannelFuture future ) { </a> 
<a> return pipeline . write ( message , future ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ChannelFuture <RARE_TOKEN> ( ) { </a> 
<a> return new <RARE_TOKEN> ( this , false ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ChannelFuture <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ChannelFuture <RARE_TOKEN> ( Throwable cause ) { </a> 
<a> return new <RARE_TOKEN> ( this , cause ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ChannelFuture <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public <RARE_TOKEN> unsafe ( ) { </a> 
<a> return unsafe ; </a> 
<a> } </a> 
<a> protected abstract <RARE_TOKEN> <RARE_TOKEN> ( ) ; </a> 
<a> @ Override </a> 
<a> public final int hashCode ( ) { </a> 
<a> return this . id ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public final boolean equals ( Object o ) { </a> 
<a> return this == o ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public final int <RARE_TOKEN> ( Channel o ) { </a> 
<a> return id ( ) . <RARE_TOKEN> ( o . id ( ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public String toString ( ) { </a> 
<a> boolean <RARE_TOKEN> = isActive ( ) ; </a> 
<a> if ( <RARE_TOKEN> == <RARE_TOKEN> && <RARE_TOKEN> != null ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> SocketAddress <RARE_TOKEN> = remoteAddress ( ) ; </a> 
<a> SocketAddress <RARE_TOKEN> = localAddress ( ) ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> SocketAddress <RARE_TOKEN> ; </a> 
<a> SocketAddress <RARE_TOKEN> ; </a> 
<a> if ( parent == null ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> = String . format ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> , id , <RARE_TOKEN> , <RARE_TOKEN> ? <RARE_TOKEN> : <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } else if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> = String . format ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> , id , <RARE_TOKEN> ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> = String . format ( <RARE_TOKEN> <RARE_TOKEN> , id ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> protected abstract class <RARE_TOKEN> implements <RARE_TOKEN> { </a> 
<a> private final Runnable <RARE_TOKEN> = new <RARE_TOKEN> ( ) ; </a> 
<a> @ Override </a> 
<a> public final ChannelHandlerContext <RARE_TOKEN> ( ) { </a> 
<a> return pipeline . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public final ChannelFuture <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public final SocketAddress localAddress ( ) { </a> 
<a> return <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public final SocketAddress remoteAddress ( ) { </a> 
<a> return <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public final void <RARE_TOKEN> ( EventLoop eventLoop , ChannelFuture future ) { </a> 
<a> if ( eventLoop == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> ( ) ) { </a> 
<a> throw new IllegalStateException ( <RARE_TOKEN> to an event loop <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( ! <RARE_TOKEN> ( eventLoop ) ) { </a> 
<a> throw new IllegalStateException ( <RARE_TOKEN> event loop <RARE_TOKEN> " + eventLoop . getClass ( ) . getName ( ) ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> . this . eventLoop = eventLoop ; </a> 
<a> assert eventLoop ( ) . inEventLoop ( ) ; </a> 
<a> if ( ! <RARE_TOKEN> ( future ) ) { </a> 
<a> return ; </a> 
<a> } </a> 
<a> try { </a> 
<a> Runnable <RARE_TOKEN> = <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> = true ; </a> 
<a> future . <RARE_TOKEN> ( ) ; </a> 
<a> pipeline . <RARE_TOKEN> ( ) ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> . run ( ) ; </a> 
<a> } </a> 
<a> if ( isActive ( ) ) { </a> 
<a> pipeline . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } catch ( Throwable t ) { </a> 
<a> try { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } catch ( Throwable <RARE_TOKEN> ) { </a> 
<a> logger . warn ( "Failed to close a <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> future . setFailure ( t ) ; </a> 
<a> pipeline . fireExceptionCaught ( t ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public final void bind ( final SocketAddress localAddress , final ChannelFuture future ) { </a> 
<a> if ( eventLoop ( ) . inEventLoop ( ) ) { </a> 
<a> if ( ! <RARE_TOKEN> ( future ) ) { </a> 
<a> return ; </a> 
<a> } </a> 
<a> try { </a> 
<a> boolean <RARE_TOKEN> = isActive ( ) ; </a> 
<a> <RARE_TOKEN> ( localAddress ) ; </a> 
<a> future . <RARE_TOKEN> ( ) ; </a> 
<a> if ( ! <RARE_TOKEN> && isActive ( ) ) { </a> 
<a> pipeline . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } catch ( Throwable t ) { </a> 
<a> future . setFailure ( t ) ; </a> 
<a> pipeline . fireExceptionCaught ( t ) ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } else { </a> 
<a> eventLoop ( ) . execute ( new Runnable ( ) { </a> 
<a> @ Override </a> 
<a> public void run ( ) { </a> 
<a> bind ( localAddress , future ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public final void disconnect ( final ChannelFuture future ) { </a> 
<a> if ( eventLoop ( ) . inEventLoop ( ) ) { </a> 
<a> try { </a> 
<a> boolean <RARE_TOKEN> = isActive ( ) ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> future . <RARE_TOKEN> ( ) ; </a> 
<a> if ( <RARE_TOKEN> && ! isActive ( ) ) { </a> 
<a> pipeline . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } catch ( Throwable t ) { </a> 
<a> future . setFailure ( t ) ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } else { </a> 
<a> eventLoop ( ) . execute ( new Runnable ( ) { </a> 
<a> @ Override </a> 
<a> public void run ( ) { </a> 
<a> disconnect ( future ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public final void close ( final ChannelFuture future ) { </a> 
<a> if ( eventLoop ( ) . inEventLoop ( ) ) { </a> 
<a> boolean <RARE_TOKEN> = isActive ( ) ; </a> 
<a> if ( <RARE_TOKEN> . <RARE_TOKEN> ( ) ) { </a> 
<a> try { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> future . <RARE_TOKEN> ( ) ; </a> 
<a> } catch ( Throwable t ) { </a> 
<a> future . setFailure ( t ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> = new <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> && ! isActive ( ) ) { </a> 
<a> pipeline . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ( ) ) ; </a> 
<a> } else { </a> 
<a> future . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } else { </a> 
<a> eventLoop ( ) . execute ( new Runnable ( ) { </a> 
<a> @ Override </a> 
<a> public void run ( ) { </a> 
<a> close ( future ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public final void <RARE_TOKEN> ( final ChannelFuture future ) { </a> 
<a> if ( eventLoop ( ) . inEventLoop ( ) ) { </a> 
<a> if ( ! <RARE_TOKEN> ) { </a> 
<a> future . <RARE_TOKEN> ( ) ; </a> 
<a> return ; </a> 
<a> } </a> 
<a> try { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } catch ( Throwable t ) { </a> 
<a> logger . warn ( "Unexpected exception <RARE_TOKEN> while <RARE_TOKEN> a <RARE_TOKEN> , t ) ; </a> 
<a> } finally { </a> 
<a> if ( <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> = false ; </a> 
<a> future . <RARE_TOKEN> ( ) ; </a> 
<a> pipeline . <RARE_TOKEN> ( ) ; </a> 
<a> } else { </a> 
<a> future . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } else { </a> 
<a> eventLoop ( ) . execute ( new Runnable ( ) { </a> 
<a> @ Override </a> 
<a> public void run ( ) { </a> 
<a> <RARE_TOKEN> ( future ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void flush ( final ChannelFuture future ) { </a> 
<a> if ( eventLoop ( ) . inEventLoop ( ) ) { </a> 
<a> if ( future != <RARE_TOKEN> ) { </a> 
<a> final int <RARE_TOKEN> ; </a> 
<a> final ChannelHandlerContext ctx = <RARE_TOKEN> ( ) ; </a> 
<a> if ( ctx . <RARE_TOKEN> ( ) ) { </a> 
<a> <RARE_TOKEN> = ctx . <RARE_TOKEN> ( ) . readableBytes ( ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> = ctx . <RARE_TOKEN> ( ) . size ( ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( future , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( ! <RARE_TOKEN> ) { </a> 
<a> try { </a> 
<a> if ( ! <RARE_TOKEN> ( ) ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } else { </a> 
<a> } </a> 
<a> } catch ( Throwable t ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( t ) ; </a> 
<a> pipeline . fireExceptionCaught ( t ) ; </a> 
<a> if ( t instanceof IOException ) { </a> 
<a> close ( <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> } finally { </a> 
<a> if ( ! isActive ( ) ) { </a> 
<a> close ( unsafe ( ) . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } else { </a> 
<a> if ( ! <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> = true ; </a> 
<a> eventLoop ( ) . execute ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } else { </a> 
<a> eventLoop ( ) . execute ( new Runnable ( ) { </a> 
<a> @ Override </a> 
<a> public void run ( ) { </a> 
<a> flush ( future ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public final void <RARE_TOKEN> ( ) { </a> 
<a> if ( <RARE_TOKEN> ) { </a> 
<a> return ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> = true ; </a> 
<a> ChannelHandlerContext ctx = <RARE_TOKEN> ( ) ; </a> 
<a> Throwable cause = null ; </a> 
<a> try { </a> 
<a> if ( ctx . <RARE_TOKEN> ( ) ) { </a> 
<a> ByteBuf out = ctx . <RARE_TOKEN> ( ) ; </a> 
<a> int <RARE_TOKEN> = out . readableBytes ( ) ; </a> 
<a> try { </a> 
<a> <RARE_TOKEN> ( out ) ; </a> 
<a> } catch ( Throwable t ) { </a> 
<a> cause = t ; </a> 
<a> } finally { </a> 
<a> final int <RARE_TOKEN> = out . readableBytes ( ) ; </a> 
<a> final int <RARE_TOKEN> = <RARE_TOKEN> - <RARE_TOKEN> ; </a> 
<a> if ( <RARE_TOKEN> > 0 ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> == 0 ) { </a> 
<a> out . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } else { </a> 
<a> MessageBuf < Object > out = ctx . <RARE_TOKEN> ( ) ; </a> 
<a> int <RARE_TOKEN> = out . size ( ) ; </a> 
<a> try { </a> 
<a> <RARE_TOKEN> ( out ) ; </a> 
<a> } catch ( Throwable t ) { </a> 
<a> cause = t ; </a> 
<a> } finally { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> - out . size ( ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> if ( cause == null ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( cause ) ; </a> 
<a> pipeline . fireExceptionCaught ( cause ) ; </a> 
<a> if ( cause instanceof IOException ) { </a> 
<a> close ( <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } finally { </a> 
<a> <RARE_TOKEN> = false ; </a> 
<a> } </a> 
<a> } </a> 
<a> protected final boolean <RARE_TOKEN> ( ChannelFuture future ) { </a> 
<a> if ( isOpen ( ) ) { </a> 
<a> return true ; </a> 
<a> } </a> 
<a> Exception e = new <RARE_TOKEN> ( ) ; </a> 
<a> future . setFailure ( e ) ; </a> 
<a> pipeline . fireExceptionCaught ( e ) ; </a> 
<a> return false ; </a> 
<a> } </a> 
<a> protected final void <RARE_TOKEN> ( ) { </a> 
<a> if ( isOpen ( ) ) { </a> 
<a> return ; </a> 
<a> } </a> 
<a> close ( <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private class <RARE_TOKEN> implements Runnable { </a> 
<a> @ Override </a> 
<a> public void run ( ) { </a> 
<a> <RARE_TOKEN> = false ; </a> 
<a> unsafe ( ) . flush ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> protected abstract boolean <RARE_TOKEN> ( EventLoop loop ) ; </a> 
<a> protected abstract SocketAddress <RARE_TOKEN> ( ) ; </a> 
<a> protected abstract SocketAddress <RARE_TOKEN> ( ) ; </a> 
<a> protected abstract Runnable <RARE_TOKEN> ( ) throws Exception ; </a> 
<a> protected abstract void <RARE_TOKEN> ( SocketAddress localAddress ) throws Exception ; </a> 
<a> protected abstract void <RARE_TOKEN> ( ) throws Exception ; </a> 
<a> protected void <RARE_TOKEN> ( ) throws Exception { </a> 
<a> } </a> 
<a> protected abstract void <RARE_TOKEN> ( ) throws Exception ; </a> 
<a> protected abstract void <RARE_TOKEN> ( ) throws Exception ; </a> 
<a> protected void <RARE_TOKEN> ( ByteBuf buf ) throws Exception { </a> 
<a> throw new UnsupportedOperationException ( ) ; </a> 
<a> } </a> 
<a> protected void <RARE_TOKEN> ( MessageBuf < Object > buf ) throws Exception { </a> 
<a> throw new UnsupportedOperationException ( ) ; </a> 
<a> } </a> 
<a> protected abstract boolean <RARE_TOKEN> ( ) ; </a> 
<a> private final class <RARE_TOKEN> extends <RARE_TOKEN> implements ChannelFuture . <RARE_TOKEN> { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ch ) { </a> 
<a> super ( ch , false ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> throw new IllegalStateException ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean setFailure ( Throwable cause ) { </a> 
<a> throw new IllegalStateException ( ) ; </a> 
<a> } </a> 
<a> boolean <RARE_TOKEN> ( ) { </a> 
<a> try { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } catch ( Exception e ) { </a> 
<a> logger . warn ( <RARE_TOKEN> <RARE_TOKEN> an <RARE_TOKEN> , e ) ; </a> 
<a> } </a> 
<a> return super . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . channel ; </a> 
<a> import io . netty . buffer . ByteBuf ; </a> 
<a> import io . netty . buffer . ChannelBufType ; </a> 
<a> import io . netty . buffer . MessageBuf ; </a> 
<a> import java . net . SocketAddress ; </a> 
<a> public abstract class <RARE_TOKEN> extends <RARE_TOKEN> implements <RARE_TOKEN> { </a> 
<a> private static final ChannelMetadata <RARE_TOKEN> = new ChannelMetadata ( ChannelBufType . <RARE_TOKEN> , false ) ; </a> 
<a> protected <RARE_TOKEN> ( Integer id ) { </a> 
<a> super ( null , id ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ByteBuf <RARE_TOKEN> ( ) { </a> 
<a> throw new <RARE_TOKEN> ( String . format ( </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> not <RARE_TOKEN> an <RARE_TOKEN> <RARE_TOKEN> , <RARE_TOKEN> . class . getSimpleName ( ) ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public MessageBuf < Object > <RARE_TOKEN> ( ) { </a> 
<a> throw new <RARE_TOKEN> ( String . format ( </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> not <RARE_TOKEN> an <RARE_TOKEN> <RARE_TOKEN> , <RARE_TOKEN> . class . getSimpleName ( ) ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ChannelMetadata <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public SocketAddress remoteAddress ( ) { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected SocketAddress <RARE_TOKEN> ( ) { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( ) throws Exception { </a> 
<a> throw new UnsupportedOperationException ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( ByteBuf buf ) throws Exception { </a> 
<a> throw new UnsupportedOperationException ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( MessageBuf < Object > buf ) throws Exception { </a> 
<a> throw new UnsupportedOperationException ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected boolean <RARE_TOKEN> ( ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> protected abstract class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> @ Override </a> 
<a> public void flush ( final ChannelFuture future ) { </a> 
<a> if ( eventLoop ( ) . inEventLoop ( ) ) { </a> 
<a> <RARE_TOKEN> ( future ) ; </a> 
<a> } else { </a> 
<a> eventLoop ( ) . execute ( new Runnable ( ) { </a> 
<a> @ Override </a> 
<a> public void run ( ) { </a> 
<a> flush ( future ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void connect ( </a> 
<a> final SocketAddress remoteAddress , final SocketAddress localAddress , </a> 
<a> final ChannelFuture future ) { </a> 
<a> if ( eventLoop ( ) . inEventLoop ( ) ) { </a> 
<a> <RARE_TOKEN> ( future ) ; </a> 
<a> } else { </a> 
<a> eventLoop ( ) . execute ( new Runnable ( ) { </a> 
<a> @ Override </a> 
<a> public void run ( ) { </a> 
<a> connect ( remoteAddress , localAddress , future ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( ChannelFuture future ) { </a> 
<a> Exception cause = new UnsupportedOperationException ( ) ; </a> 
<a> future . setFailure ( cause ) ; </a> 
<a> pipeline ( ) . fireExceptionCaught ( cause ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . channel ; </a> 
<a> import io . netty . buffer . ByteBuf ; </a> 
<a> import io . netty . buffer . MessageBuf ; </a> 
<a> import io . netty . channel . socket . <RARE_TOKEN> ; </a> 
<a> import io . netty . channel . socket . <RARE_TOKEN> ; </a> 
<a> import io . netty . channel . socket . SocketChannel ; </a> 
<a> import io . netty . util . <RARE_TOKEN> ; </a> 
<a> import java . net . InetSocketAddress ; </a> 
<a> import java . net . SocketAddress ; </a> 
<a> import java . nio . channels . SelectionKey ; </a> 
<a> public interface Channel extends <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> < Channel > { </a> 
<a> Integer id ( ) ; </a> 
<a> EventLoop eventLoop ( ) ; </a> 
<a> Channel parent ( ) ; </a> 
<a> <RARE_TOKEN> config ( ) ; </a> 
<a> ChannelPipeline pipeline ( ) ; </a> 
<a> boolean isOpen ( ) ; </a> 
<a> boolean <RARE_TOKEN> ( ) ; </a> 
<a> boolean isActive ( ) ; </a> 
<a> ChannelMetadata <RARE_TOKEN> ( ) ; </a> 
<a> ByteBuf <RARE_TOKEN> ( ) ; </a> 
<a> < T > MessageBuf < T > <RARE_TOKEN> ( ) ; </a> 
<a> SocketAddress localAddress ( ) ; </a> 
<a> SocketAddress remoteAddress ( ) ; </a> 
<a> ChannelFuture <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> unsafe ( ) ; </a> 
<a> interface <RARE_TOKEN> { </a> 
<a> ChannelHandlerContext <RARE_TOKEN> ( ) ; </a> 
<a> ChannelFuture <RARE_TOKEN> ( ) ; </a> 
<a> SocketAddress localAddress ( ) ; </a> 
<a> SocketAddress remoteAddress ( ) ; </a> 
<a> void <RARE_TOKEN> ( EventLoop eventLoop , ChannelFuture future ) ; </a> 
<a> void bind ( SocketAddress localAddress , ChannelFuture future ) ; </a> 
<a> void connect ( SocketAddress remoteAddress , SocketAddress localAddress , ChannelFuture future ) ; </a> 
<a> void disconnect ( ChannelFuture future ) ; </a> 
<a> void close ( ChannelFuture future ) ; </a> 
<a> void <RARE_TOKEN> ( ChannelFuture future ) ; </a> 
<a> void flush ( ChannelFuture future ) ; </a> 
<a> void <RARE_TOKEN> ( ) ; </a> 
<a> void <RARE_TOKEN> ( ) ; </a> 
<a> void <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . channel ; </a> 
<a> import io . netty . channel . socket . <RARE_TOKEN> ; </a> 
<a> import java . nio . ByteBuffer ; </a> 
<a> import java . nio . channels . <RARE_TOKEN> ; </a> 
<a> import java . util . Map ; </a> 
<a> public interface <RARE_TOKEN> { </a> 
<a> Map < ChannelOption < ? > , Object > <RARE_TOKEN> ( ) ; </a> 
<a> boolean <RARE_TOKEN> ( Map < ChannelOption < ? > , ? > <RARE_TOKEN> ) ; </a> 
<a> < T > T <RARE_TOKEN> ( ChannelOption < T > option ) ; </a> 
<a> < T > boolean <RARE_TOKEN> ( ChannelOption < T > option , T value ) ; </a> 
<a> int <RARE_TOKEN> ( ) ; </a> 
<a> void <RARE_TOKEN> ( int <RARE_TOKEN> ) ; </a> 
<a> int <RARE_TOKEN> ( ) ; </a> 
<a> void <RARE_TOKEN> ( int <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . channel ; </a> 
<a> public class ChannelException extends <RARE_TOKEN> { </a> 
<a> private static final long serialVersionUID = <RARE_TOKEN> ; </a> 
<a> public ChannelException ( ) { </a> 
<a> } </a> 
<a> public ChannelException ( String message , Throwable cause ) { </a> 
<a> super ( message , cause ) ; </a> 
<a> } </a> 
<a> public ChannelException ( String message ) { </a> 
<a> super ( message ) ; </a> 
<a> } </a> 
<a> public ChannelException ( Throwable cause ) { </a> 
<a> super ( cause ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . channel ; </a> 
<a> import java . util . concurrent . Future ; </a> 
<a> import java . util . concurrent . TimeUnit ; </a> 
<a> public interface ChannelFuture extends Future < Void > { </a> 
<a> Channel channel ( ) ; </a> 
<a> @ Override </a> 
<a> boolean <RARE_TOKEN> ( ) ; </a> 
<a> @ Override </a> 
<a> boolean isCancelled ( ) ; </a> 
<a> boolean <RARE_TOKEN> ( ) ; </a> 
<a> Throwable cause ( ) ; </a> 
<a> boolean cancel ( ) ; </a> 
<a> boolean <RARE_TOKEN> ( ) ; </a> 
<a> boolean setFailure ( Throwable cause ) ; </a> 
<a> boolean <RARE_TOKEN> ( long <RARE_TOKEN> , long current , long <RARE_TOKEN> ) ; </a> 
<a> ChannelFuture addListener ( ChannelFutureListener listener ) ; </a> 
<a> ChannelFuture <RARE_TOKEN> ( ChannelFutureListener listener ) ; </a> 
<a> ChannelFuture sync ( ) throws InterruptedException ; </a> 
<a> ChannelFuture <RARE_TOKEN> ( ) ; </a> 
<a> ChannelFuture await ( ) throws InterruptedException ; </a> 
<a> ChannelFuture <RARE_TOKEN> ( ) ; </a> 
<a> boolean await ( long timeout , TimeUnit unit ) throws InterruptedException ; </a> 
<a> boolean await ( long <RARE_TOKEN> ) throws InterruptedException ; </a> 
<a> boolean <RARE_TOKEN> ( long timeout , TimeUnit unit ) ; </a> 
<a> boolean <RARE_TOKEN> ( long <RARE_TOKEN> ) ; </a> 
<a> interface <RARE_TOKEN> extends ChannelFuture { </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . channel ; </a> 
<a> import java . util . HashSet ; </a> 
<a> import java . util . Set ; </a> 
<a> public class <RARE_TOKEN> implements ChannelFutureListener { </a> 
<a> private final ChannelFuture <RARE_TOKEN> ; </a> 
<a> private Set < ChannelFuture > <RARE_TOKEN> ; </a> 
<a> public <RARE_TOKEN> ( ChannelFuture <RARE_TOKEN> ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( ChannelFuture future ) { </a> 
<a> synchronized ( this ) { </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> <RARE_TOKEN> = new HashSet < ChannelFuture > ( ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> . add ( future ) ; </a> 
<a> } </a> 
<a> future . addListener ( this ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ChannelFuture future ) </a> 
<a> throws Exception { </a> 
<a> if ( future . isCancelled ( ) ) { </a> 
<a> return ; </a> 
<a> } </a> 
<a> synchronized ( this ) { </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> . remove ( future ) ; </a> 
<a> if ( ! future . <RARE_TOKEN> ( ) ) { </a> 
<a> <RARE_TOKEN> . setFailure ( future . cause ( ) ) ; </a> 
<a> for ( ChannelFuture <RARE_TOKEN> : <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> . cancel ( ) ; </a> 
<a> } </a> 
<a> } else { </a> 
<a> if ( <RARE_TOKEN> . isEmpty ( ) ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . channel ; </a> 
<a> import java . util . <RARE_TOKEN> ; </a> 
<a> public interface ChannelFutureListener extends <RARE_TOKEN> { </a> 
<a> ChannelFutureListener <RARE_TOKEN> = new ChannelFutureListener ( ) { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ChannelFuture future ) { </a> 
<a> future . channel ( ) . close ( ) ; </a> 
<a> } </a> 
<a> } ; </a> 
<a> ChannelFutureListener <RARE_TOKEN> = new ChannelFutureListener ( ) { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ChannelFuture future ) { </a> 
<a> if ( ! future . <RARE_TOKEN> ( ) ) { </a> 
<a> future . channel ( ) . close ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } ; </a> 
<a> void <RARE_TOKEN> ( ChannelFuture future ) throws Exception ; </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . channel ; </a> 
<a> public interface <RARE_TOKEN> extends ChannelFutureListener { </a> 
<a> void <RARE_TOKEN> ( ChannelFuture future , long <RARE_TOKEN> , long current , long <RARE_TOKEN> ) throws Exception ; </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . channel ; </a> 
<a> import io . netty . bootstrap . Bootstrap ; </a> 
<a> import io . netty . channel . group . <RARE_TOKEN> ; </a> 
<a> import java . lang . annotation . <RARE_TOKEN> ; </a> 
<a> import java . lang . annotation . <RARE_TOKEN> ; </a> 
<a> import java . lang . annotation . <RARE_TOKEN> ; </a> 
<a> import java . lang . annotation . <RARE_TOKEN> ; </a> 
<a> import java . lang . annotation . <RARE_TOKEN> ; </a> 
<a> import java . lang . annotation . <RARE_TOKEN> ; </a> 
<a> import java . nio . channels . <RARE_TOKEN> ; </a> 
<a> public interface ChannelHandler { </a> 
<a> void <RARE_TOKEN> ( ChannelHandlerContext ctx ) throws Exception ; </a> 
<a> void <RARE_TOKEN> ( ChannelHandlerContext ctx ) throws Exception ; </a> 
<a> void <RARE_TOKEN> ( ChannelHandlerContext ctx ) throws Exception ; </a> 
<a> void <RARE_TOKEN> ( ChannelHandlerContext ctx ) throws Exception ; </a> 
<a> void exceptionCaught ( ChannelHandlerContext ctx , Throwable cause ) throws Exception ; </a> 
<a> void <RARE_TOKEN> ( ChannelHandlerContext ctx , Object <RARE_TOKEN> ) throws Exception ; </a> 
<a> @ <RARE_TOKEN> </a> 
<a> @ <RARE_TOKEN> </a> 
<a> @ <RARE_TOKEN> ( <RARE_TOKEN> . TYPE ) </a> 
<a> @ <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ) </a> 
<a> @ interface Sharable { </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . channel ; </a> 
<a> import java . net . SocketAddress ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> implements <RARE_TOKEN> { </a> 
<a> @ Override </a> 
<a> public void bind ( ChannelHandlerContext ctx , SocketAddress localAddress , ChannelFuture future ) throws Exception { </a> 
<a> ctx . bind ( localAddress , future ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void connect ( </a> 
<a> ChannelHandlerContext ctx , SocketAddress remoteAddress , SocketAddress localAddress , </a> 
<a> ChannelFuture future ) throws Exception { </a> 
<a> ctx . connect ( remoteAddress , localAddress , future ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void disconnect ( ChannelHandlerContext ctx , ChannelFuture future ) throws Exception { </a> 
<a> ctx . disconnect ( future ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void close ( ChannelHandlerContext ctx , ChannelFuture future ) throws Exception { </a> 
<a> ctx . close ( future ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ChannelHandlerContext ctx , ChannelFuture future ) throws Exception { </a> 
<a> ctx . <RARE_TOKEN> ( future ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void flush ( ChannelHandlerContext ctx , ChannelFuture future ) throws Exception { </a> 
<a> if ( this instanceof <RARE_TOKEN> ) { </a> 
<a> throw new IllegalStateException ( </a> 
<a> <RARE_TOKEN> must be <RARE_TOKEN> <RARE_TOKEN> " + getClass ( ) . getName ( ) + </a> 
<a> ", <RARE_TOKEN> implements " + <RARE_TOKEN> . class . getSimpleName ( ) ) ; </a> 
<a> } </a> 
<a> ctx . flush ( future ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . channel ; </a> 
<a> import io . netty . buffer . ByteBuf ; </a> 
<a> import io . netty . buffer . MessageBuf ; </a> 
<a> import io . netty . util . <RARE_TOKEN> ; </a> 
<a> import java . nio . channels . <RARE_TOKEN> ; </a> 
<a> import java . util . Set ; </a> 
<a> public interface ChannelHandlerContext </a> 
<a> extends <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> { </a> 
<a> Channel channel ( ) ; </a> 
<a> ChannelPipeline pipeline ( ) ; </a> 
<a> EventExecutor executor ( ) ; </a> 
<a> String name ( ) ; </a> 
<a> ChannelHandler handler ( ) ; </a> 
<a> Set < <RARE_TOKEN> > type ( ) ; </a> 
<a> boolean <RARE_TOKEN> ( ) ; </a> 
<a> boolean <RARE_TOKEN> ( ) ; </a> 
<a> ByteBuf <RARE_TOKEN> ( ) ; </a> 
<a> < T > MessageBuf < T > <RARE_TOKEN> ( ) ; </a> 
<a> boolean <RARE_TOKEN> ( ) ; </a> 
<a> boolean <RARE_TOKEN> ( ) ; </a> 
<a> ByteBuf <RARE_TOKEN> ( ) ; </a> 
<a> < T > MessageBuf < T > <RARE_TOKEN> ( ) ; </a> 
<a> boolean <RARE_TOKEN> ( ) ; </a> 
<a> boolean <RARE_TOKEN> ( ) ; </a> 
<a> ByteBuf <RARE_TOKEN> ( ) ; </a> 
<a> MessageBuf < Object > <RARE_TOKEN> ( ) ; </a> 
<a> boolean <RARE_TOKEN> ( ) ; </a> 
<a> boolean <RARE_TOKEN> ( ) ; </a> 
<a> ByteBuf <RARE_TOKEN> ( ) ; </a> 
<a> MessageBuf < Object > <RARE_TOKEN> ( ) ; </a> 
<a> boolean <RARE_TOKEN> ( ) ; </a> 
<a> void readable ( boolean readable ) ; </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . channel ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> private static final long serialVersionUID = <RARE_TOKEN> ; </a> 
<a> public <RARE_TOKEN> ( ) { </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( String message , Throwable cause ) { </a> 
<a> super ( message , cause ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( String message ) { </a> 
<a> super ( message ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( Throwable cause ) { </a> 
<a> super ( cause ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . channel ; </a> 
<a> public enum <RARE_TOKEN> { </a> 
<a> <RARE_TOKEN> ( 0 ) , </a> 
<a> <RARE_TOKEN> ( 0 ) , </a> 
<a> <RARE_TOKEN> ( 1 ) , </a> 
<a> <RARE_TOKEN> ( 1 ) ; </a> 
<a> final int <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> ( int <RARE_TOKEN> ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . channel ; </a> 
<a> import io . netty . buffer . ByteBuf ; </a> 
<a> public interface <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> @ Override </a> 
<a> ByteBuf <RARE_TOKEN> ( ChannelHandlerContext ctx ) throws Exception ; </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . channel ; </a> 
<a> import io . netty . buffer . ByteBuf ; </a> 
<a> import io . netty . buffer . Unpooled ; </a> 
<a> public abstract class <RARE_TOKEN> </a> 
<a> extends <RARE_TOKEN> implements <RARE_TOKEN> { </a> 
<a> @ Override </a> 
<a> public ByteBuf <RARE_TOKEN> ( ChannelHandlerContext ctx ) throws Exception { </a> 
<a> return Unpooled . buffer ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public final void inboundBufferUpdated ( ChannelHandlerContext ctx ) throws Exception { </a> 
<a> ByteBuf in = ctx . <RARE_TOKEN> ( ) ; </a> 
<a> try { </a> 
<a> inboundBufferUpdated ( ctx , in ) ; </a> 
<a> } finally { </a> 
<a> if ( ! in . readable ( ) ) { </a> 
<a> in . unsafe ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> public abstract void inboundBufferUpdated ( ChannelHandlerContext ctx , ByteBuf in ) throws Exception ; </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . channel ; </a> 
<a> import io . netty . buffer . <RARE_TOKEN> ; </a> 
<a> public interface <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> ( ChannelHandlerContext ctx ) throws Exception ; </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . channel ; </a> 
<a> public abstract class <RARE_TOKEN> </a> 
<a> extends <RARE_TOKEN> implements <RARE_TOKEN> { </a> 
<a> @ Override </a> 
<a> public abstract void inboundBufferUpdated ( ChannelHandlerContext ctx ) throws Exception ; </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . channel ; </a> 
<a> public interface <RARE_TOKEN> { </a> 
<a> void <RARE_TOKEN> ( ) ; </a> 
<a> void <RARE_TOKEN> ( ) ; </a> 
<a> void <RARE_TOKEN> ( ) ; </a> 
<a> void <RARE_TOKEN> ( ) ; </a> 
<a> void fireExceptionCaught ( Throwable cause ) ; </a> 
<a> void <RARE_TOKEN> ( Object event ) ; </a> 
<a> void fireInboundBufferUpdated ( ) ; </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . channel ; </a> 
<a> import io . netty . buffer . MessageBuf ; </a> 
<a> public interface <RARE_TOKEN> < <RARE_TOKEN> > extends <RARE_TOKEN> { </a> 
<a> @ Override </a> 
<a> MessageBuf < <RARE_TOKEN> > <RARE_TOKEN> ( ChannelHandlerContext ctx ) throws Exception ; </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . channel ; </a> 
<a> import io . netty . buffer . MessageBuf ; </a> 
<a> import io . netty . buffer . Unpooled ; </a> 
<a> public abstract class ChannelInboundMessageHandlerAdapter < <RARE_TOKEN> > </a> 
<a> extends <RARE_TOKEN> implements <RARE_TOKEN> < <RARE_TOKEN> > { </a> 
<a> @ Override </a> 
<a> public MessageBuf < <RARE_TOKEN> > <RARE_TOKEN> ( ChannelHandlerContext ctx ) throws Exception { </a> 
<a> return Unpooled . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public final void inboundBufferUpdated ( ChannelHandlerContext ctx ) throws Exception { </a> 
<a> <RARE_TOKEN> ( ctx ) ; </a> 
<a> MessageBuf < <RARE_TOKEN> > in = ctx . <RARE_TOKEN> ( ) ; </a> 
<a> for ( ; ; ) { </a> 
<a> <RARE_TOKEN> msg = in . poll ( ) ; </a> 
<a> if ( msg == null ) { </a> 
<a> break ; </a> 
<a> } </a> 
<a> try { </a> 
<a> <RARE_TOKEN> ( ctx , msg ) ; </a> 
<a> } catch ( Throwable t ) { </a> 
<a> ctx . fireExceptionCaught ( t ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( ctx ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( ChannelHandlerContext ctx ) throws Exception { } </a> 
<a> public abstract void <RARE_TOKEN> ( ChannelHandlerContext ctx , <RARE_TOKEN> msg ) throws Exception ; </a> 
<a> public void <RARE_TOKEN> ( ChannelHandlerContext ctx ) throws Exception { } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . channel ; </a> 
<a> import io . netty . channel . ChannelHandler . Sharable ; </a> 
<a> import io . netty . logging . InternalLogger ; </a> 
<a> import io . netty . logging . InternalLoggerFactory ; </a> 
<a> @ Sharable </a> 
<a> public abstract class ChannelInitializer < <RARE_TOKEN> extends Channel > extends <RARE_TOKEN> { </a> 
<a> private static final InternalLogger logger = InternalLoggerFactory . getInstance ( ChannelInitializer . class ) ; </a> 
<a> public abstract void <RARE_TOKEN> ( <RARE_TOKEN> ch ) throws Exception ; </a> 
<a> @ Override </a> 
<a> public final void <RARE_TOKEN> ( ChannelHandlerContext ctx ) </a> 
<a> throws Exception { </a> 
<a> boolean <RARE_TOKEN> = false ; </a> 
<a> boolean success = false ; </a> 
<a> try { </a> 
<a> <RARE_TOKEN> ( ( <RARE_TOKEN> ) ctx . channel ( ) ) ; </a> 
<a> ctx . pipeline ( ) . remove ( this ) ; </a> 
<a> <RARE_TOKEN> = true ; </a> 
<a> ctx . <RARE_TOKEN> ( ) ; </a> 
<a> success = true ; </a> 
<a> } catch ( Throwable t ) { </a> 
<a> logger . warn ( "Failed to <RARE_TOKEN> a <RARE_TOKEN> <RARE_TOKEN> " + ctx . channel ( ) , t ) ; </a> 
<a> } finally { </a> 
<a> if ( ! <RARE_TOKEN> ) { </a> 
<a> ctx . pipeline ( ) . remove ( this ) ; </a> 
<a> } </a> 
<a> if ( ! success ) { </a> 
<a> ctx . close ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . channel ; </a> 
<a> import io . netty . buffer . ChannelBufType ; </a> 
<a> import java . net . SocketAddress ; </a> 
<a> public final class ChannelMetadata { </a> 
<a> private final ChannelBufType <RARE_TOKEN> ; </a> 
<a> private final boolean <RARE_TOKEN> ; </a> 
<a> public ChannelMetadata ( ChannelBufType <RARE_TOKEN> , boolean <RARE_TOKEN> ) { </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public ChannelBufType <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . channel ; </a> 
<a> import java . net . SocketAddress ; </a> 
<a> public interface <RARE_TOKEN> extends ChannelHandler { </a> 
<a> void bind ( ChannelHandlerContext ctx , SocketAddress localAddress , ChannelFuture future ) throws Exception ; </a> 
<a> void connect ( </a> 
<a> ChannelHandlerContext ctx , SocketAddress remoteAddress , </a> 
<a> SocketAddress localAddress , ChannelFuture future ) throws Exception ; </a> 
<a> void disconnect ( ChannelHandlerContext ctx , ChannelFuture future ) throws Exception ; </a> 
<a> void close ( ChannelHandlerContext ctx , ChannelFuture future ) throws Exception ; </a> 
<a> void <RARE_TOKEN> ( ChannelHandlerContext ctx , ChannelFuture future ) throws Exception ; </a> 
<a> void flush ( ChannelHandlerContext ctx , ChannelFuture future ) throws Exception ; </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . channel ; </a> 
<a> import java . net . SocketAddress ; </a> 
<a> public class <RARE_TOKEN> implements <RARE_TOKEN> { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ChannelHandlerContext ctx ) throws Exception { </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ChannelHandlerContext ctx ) throws Exception { </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ChannelHandlerContext ctx ) throws Exception { </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ChannelHandlerContext ctx ) throws Exception { </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void exceptionCaught ( ChannelHandlerContext ctx , Throwable cause ) </a> 
<a> throws Exception { </a> 
<a> ctx . fireExceptionCaught ( cause ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ChannelHandlerContext ctx , Object <RARE_TOKEN> ) </a> 
<a> throws Exception { </a> 
<a> ctx . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void bind ( ChannelHandlerContext ctx , SocketAddress localAddress , </a> 
<a> ChannelFuture future ) throws Exception { </a> 
<a> ctx . bind ( localAddress , future ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void connect ( ChannelHandlerContext ctx , SocketAddress remoteAddress , </a> 
<a> SocketAddress localAddress , ChannelFuture future ) throws Exception { </a> 
<a> ctx . connect ( remoteAddress , localAddress , future ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void disconnect ( ChannelHandlerContext ctx , ChannelFuture future ) </a> 
<a> throws Exception { </a> 
<a> ctx . disconnect ( future ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void close ( ChannelHandlerContext ctx , ChannelFuture future ) </a> 
<a> throws Exception { </a> 
<a> ctx . close ( future ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ChannelHandlerContext ctx , ChannelFuture future ) </a> 
<a> throws Exception { </a> 
<a> ctx . <RARE_TOKEN> ( future ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void flush ( ChannelHandlerContext ctx , ChannelFuture future ) </a> 
<a> throws Exception { </a> 
<a> if ( this instanceof <RARE_TOKEN> ) { </a> 
<a> throw new IllegalStateException ( </a> 
<a> <RARE_TOKEN> must be <RARE_TOKEN> <RARE_TOKEN> " + getClass ( ) . getName ( ) + </a> 
<a> ", <RARE_TOKEN> implements " + <RARE_TOKEN> . class . getSimpleName ( ) ) ; </a> 
<a> } </a> 
<a> ctx . flush ( future ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . channel ; </a> 
<a> import io . netty . buffer . ByteBuf ; </a> 
<a> public interface <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> @ Override </a> 
<a> ByteBuf <RARE_TOKEN> ( ChannelHandlerContext ctx ) throws Exception ; </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . channel ; </a> 
<a> import io . netty . buffer . ByteBuf ; </a> 
<a> import io . netty . buffer . Unpooled ; </a> 
<a> public abstract class <RARE_TOKEN> </a> 
<a> extends <RARE_TOKEN> implements <RARE_TOKEN> { </a> 
<a> @ Override </a> 
<a> public ByteBuf <RARE_TOKEN> ( ChannelHandlerContext ctx ) throws Exception { </a> 
<a> return Unpooled . buffer ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . channel ; </a> 
<a> public abstract class <RARE_TOKEN> </a> 
<a> extends <RARE_TOKEN> implements <RARE_TOKEN> { </a> 
<a> @ Override </a> 
<a> public abstract void flush ( ChannelHandlerContext ctx , ChannelFuture future ) throws Exception ; </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . channel ; </a> 
<a> import java . net . SocketAddress ; </a> 
<a> public interface <RARE_TOKEN> { </a> 
<a> ChannelFuture bind ( SocketAddress localAddress ) ; </a> 
<a> ChannelFuture connect ( SocketAddress remoteAddress ) ; </a> 
<a> ChannelFuture connect ( SocketAddress remoteAddress , SocketAddress localAddress ) ; </a> 
<a> ChannelFuture disconnect ( ) ; </a> 
<a> ChannelFuture close ( ) ; </a> 
<a> ChannelFuture <RARE_TOKEN> ( ) ; </a> 
<a> ChannelFuture flush ( ) ; </a> 
<a> ChannelFuture write ( Object message ) ; </a> 
<a> ChannelFuture bind ( SocketAddress localAddress , ChannelFuture future ) ; </a> 
<a> ChannelFuture connect ( SocketAddress remoteAddress , ChannelFuture future ) ; </a> 
<a> ChannelFuture connect ( SocketAddress remoteAddress , SocketAddress localAddress , ChannelFuture future ) ; </a> 
<a> ChannelFuture disconnect ( ChannelFuture future ) ; </a> 
<a> ChannelFuture close ( ChannelFuture future ) ; </a> 
<a> ChannelFuture <RARE_TOKEN> ( ChannelFuture future ) ; </a> 
<a> ChannelFuture flush ( ChannelFuture future ) ; </a> 
<a> ChannelFuture write ( Object message , ChannelFuture future ) ; </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . channel ; </a> 
<a> import io . netty . buffer . MessageBuf ; </a> 
<a> import io . netty . buffer . Unpooled ; </a> 
<a> public abstract class <RARE_TOKEN> < <RARE_TOKEN> > </a> 
<a> extends <RARE_TOKEN> implements <RARE_TOKEN> < <RARE_TOKEN> > { </a> 
<a> @ Override </a> 
<a> public MessageBuf < <RARE_TOKEN> > <RARE_TOKEN> ( ChannelHandlerContext ctx ) throws Exception { </a> 
<a> return Unpooled . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . channel ; </a> 
<a> import io . netty . buffer . ByteBuf ; </a> 
<a> import io . netty . buffer . MessageBuf ; </a> 
<a> import java . io . InputStream ; </a> 
<a> import java . io . OutputStream ; </a> 
<a> import java . nio . channels . <RARE_TOKEN> ; </a> 
<a> import java . util . List ; </a> 
<a> import java . util . Map ; </a> 
<a> import java . util . <RARE_TOKEN> ; </a> 
<a> public interface ChannelPipeline extends <RARE_TOKEN> , <RARE_TOKEN> { </a> 
<a> MessageBuf < Object > <RARE_TOKEN> ( ) ; </a> 
<a> ByteBuf <RARE_TOKEN> ( ) ; </a> 
<a> MessageBuf < Object > <RARE_TOKEN> ( ) ; </a> 
<a> ByteBuf <RARE_TOKEN> ( ) ; </a> 
<a> ChannelPipeline <RARE_TOKEN> ( String name , ChannelHandler handler ) ; </a> 
<a> ChannelPipeline <RARE_TOKEN> ( <RARE_TOKEN> group , String name , ChannelHandler handler ) ; </a> 
<a> ChannelPipeline addLast ( String name , ChannelHandler handler ) ; </a> 
<a> ChannelPipeline addLast ( <RARE_TOKEN> group , String name , ChannelHandler handler ) ; </a> 
<a> ChannelPipeline <RARE_TOKEN> ( String <RARE_TOKEN> , String name , ChannelHandler handler ) ; </a> 
<a> ChannelPipeline <RARE_TOKEN> ( <RARE_TOKEN> group , String <RARE_TOKEN> , String name , ChannelHandler handler ) ; </a> 
<a> ChannelPipeline <RARE_TOKEN> ( String <RARE_TOKEN> , String name , ChannelHandler handler ) ; </a> 
<a> ChannelPipeline <RARE_TOKEN> ( <RARE_TOKEN> group , String <RARE_TOKEN> , String name , ChannelHandler handler ) ; </a> 
<a> ChannelPipeline <RARE_TOKEN> ( ChannelHandler ... <RARE_TOKEN> ) ; </a> 
<a> ChannelPipeline <RARE_TOKEN> ( <RARE_TOKEN> group , ChannelHandler ... <RARE_TOKEN> ) ; </a> 
<a> ChannelPipeline addLast ( ChannelHandler ... <RARE_TOKEN> ) ; </a> 
<a> ChannelPipeline addLast ( <RARE_TOKEN> group , ChannelHandler ... <RARE_TOKEN> ) ; </a> 
<a> void remove ( ChannelHandler handler ) ; </a> 
<a> ChannelHandler remove ( String name ) ; </a> 
<a> < T extends ChannelHandler > T remove ( Class < T > <RARE_TOKEN> ) ; </a> 
<a> ChannelHandler <RARE_TOKEN> ( ) ; </a> 
<a> ChannelHandler <RARE_TOKEN> ( ) ; </a> 
<a> void <RARE_TOKEN> ( ChannelHandler <RARE_TOKEN> , String <RARE_TOKEN> , ChannelHandler <RARE_TOKEN> ) ; </a> 
<a> ChannelHandler <RARE_TOKEN> ( String <RARE_TOKEN> , String <RARE_TOKEN> , ChannelHandler <RARE_TOKEN> ) ; </a> 
<a> < T extends ChannelHandler > T <RARE_TOKEN> ( Class < T > <RARE_TOKEN> , String <RARE_TOKEN> , ChannelHandler <RARE_TOKEN> ) ; </a> 
<a> ChannelHandler <RARE_TOKEN> ( ) ; </a> 
<a> ChannelHandler last ( ) ; </a> 
<a> ChannelHandler get ( String name ) ; </a> 
<a> < T extends ChannelHandler > T get ( Class < T > <RARE_TOKEN> ) ; </a> 
<a> ChannelHandlerContext context ( ChannelHandler handler ) ; </a> 
<a> ChannelHandlerContext context ( String name ) ; </a> 
<a> ChannelHandlerContext context ( Class < ? extends ChannelHandler > <RARE_TOKEN> ) ; </a> 
<a> Channel channel ( ) ; </a> 
<a> List < String > names ( ) ; </a> 
<a> Map < String , ChannelHandler > <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . channel ; </a> 
<a> public class <RARE_TOKEN> extends ChannelException { </a> 
<a> private static final long serialVersionUID = <RARE_TOKEN> ; </a> 
<a> public <RARE_TOKEN> ( ) { </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( String message , Throwable cause ) { </a> 
<a> super ( message , cause ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( String message ) { </a> 
<a> super ( message ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( Throwable cause ) { </a> 
<a> super ( cause ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . channel ; </a> 
<a> public interface <RARE_TOKEN> extends ChannelHandler { </a> 
<a> void <RARE_TOKEN> ( ChannelHandlerContext ctx ) throws Exception ; </a> 
<a> void <RARE_TOKEN> ( ChannelHandlerContext ctx ) throws Exception ; </a> 
<a> void <RARE_TOKEN> ( ChannelHandlerContext ctx ) throws Exception ; </a> 
<a> void <RARE_TOKEN> ( ChannelHandlerContext ctx ) throws Exception ; </a> 
<a> void inboundBufferUpdated ( ChannelHandlerContext ctx ) throws Exception ; </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . channel ; </a> 
<a> public class <RARE_TOKEN> implements <RARE_TOKEN> { </a> 
<a> boolean <RARE_TOKEN> ; </a> 
<a> final boolean <RARE_TOKEN> ( ) { </a> 
<a> return getClass ( ) . <RARE_TOKEN> ( Sharable . class ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ChannelHandlerContext ctx ) throws Exception { </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ChannelHandlerContext ctx ) throws Exception { </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ChannelHandlerContext ctx ) throws Exception { </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ChannelHandlerContext ctx ) throws Exception { </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void exceptionCaught ( ChannelHandlerContext ctx , Throwable cause ) </a> 
<a> throws Exception { </a> 
<a> ctx . fireExceptionCaught ( cause ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ChannelHandlerContext ctx , Object <RARE_TOKEN> ) </a> 
<a> throws Exception { </a> 
<a> ctx . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ChannelHandlerContext ctx ) throws Exception { </a> 
<a> ctx . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ChannelHandlerContext ctx ) throws Exception { </a> 
<a> ctx . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ChannelHandlerContext ctx ) throws Exception { </a> 
<a> ctx . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ChannelHandlerContext ctx ) throws Exception { </a> 
<a> ctx . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void inboundBufferUpdated ( ChannelHandlerContext ctx ) throws Exception { </a> 
<a> if ( this instanceof <RARE_TOKEN> ) { </a> 
<a> throw new IllegalStateException ( </a> 
<a> <RARE_TOKEN> must be <RARE_TOKEN> <RARE_TOKEN> " + getClass ( ) . getName ( ) + </a> 
<a> ", <RARE_TOKEN> implements " + <RARE_TOKEN> . class . getSimpleName ( ) ) ; </a> 
<a> } </a> 
<a> ctx . fireInboundBufferUpdated ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . channel ; </a> 
<a> import io . netty . logging . InternalLogger ; </a> 
<a> import io . netty . logging . InternalLoggerFactory ; </a> 
<a> import java . util . Iterator ; </a> 
<a> import java . util . concurrent . <RARE_TOKEN> ; </a> 
<a> import java . util . concurrent . <RARE_TOKEN> ; </a> 
<a> import java . util . concurrent . <RARE_TOKEN> ; </a> 
<a> import java . util . concurrent . <RARE_TOKEN> ; </a> 
<a> import java . util . concurrent . <RARE_TOKEN> ; </a> 
<a> import java . util . concurrent . <RARE_TOKEN> ; </a> 
<a> import java . util . concurrent . ScheduledFuture ; </a> 
<a> import java . util . concurrent . <RARE_TOKEN> ; </a> 
<a> import java . util . concurrent . ThreadFactory ; </a> 
<a> import java . util . concurrent . TimeUnit ; </a> 
<a> import java . util . concurrent . atomic . <RARE_TOKEN> ; </a> 
<a> public final class <RARE_TOKEN> { </a> 
<a> private static final InternalLogger logger = </a> 
<a> InternalLoggerFactory . getInstance ( <RARE_TOKEN> . class ) ; </a> 
<a> private static final long <RARE_TOKEN> = TimeUnit . SECONDS . <RARE_TOKEN> ( 1 ) ; </a> 
<a> private static final long <RARE_TOKEN> = System . <RARE_TOKEN> ( ) ; </a> 
<a> private static final <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( ) ; </a> 
<a> private static long <RARE_TOKEN> ( ) { </a> 
<a> return System . <RARE_TOKEN> ( ) - <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> private static long <RARE_TOKEN> ( long delay ) { </a> 
<a> return <RARE_TOKEN> ( ) + delay ; </a> 
<a> } </a> 
<a> private final <RARE_TOKEN> < <RARE_TOKEN> < ? > > <RARE_TOKEN> = new <RARE_TOKEN> < <RARE_TOKEN> < ? > > ( ) ; </a> 
<a> private final Thread <RARE_TOKEN> ; </a> 
<a> private final Object <RARE_TOKEN> = new Object ( ) ; </a> 
<a> private final <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( 0 ) ; </a> 
<a> private volatile int state ; </a> 
<a> public <RARE_TOKEN> ( ThreadFactory threadFactory ) { </a> 
<a> if ( threadFactory == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> = threadFactory . <RARE_TOKEN> ( new Runnable ( ) { </a> 
<a> @ Override </a> 
<a> public void run ( ) { </a> 
<a> try { </a> 
<a> for ( ; ; ) { </a> 
<a> <RARE_TOKEN> < ? > task ; </a> 
<a> try { </a> 
<a> task = <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> ( task ) ; </a> 
<a> } catch ( InterruptedException e ) { </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> ( ) && <RARE_TOKEN> . <RARE_TOKEN> ( ) == null ) { </a> 
<a> break ; </a> 
<a> } </a> 
<a> } </a> 
<a> } finally { </a> 
<a> try { </a> 
<a> try { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } finally { </a> 
<a> synchronized ( <RARE_TOKEN> ) { </a> 
<a> state = 3 ; </a> 
<a> } </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } finally { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> assert <RARE_TOKEN> . isEmpty ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( <RARE_TOKEN> < ? > task ) { </a> 
<a> EventExecutor executor = task . executor ; </a> 
<a> if ( executor == null ) { </a> 
<a> task . run ( ) ; </a> 
<a> } else { </a> 
<a> if ( executor . <RARE_TOKEN> ( ) ) { </a> 
<a> task . cancel ( false ) ; </a> 
<a> } else { </a> 
<a> try { </a> 
<a> task . executor . execute ( task ) ; </a> 
<a> } catch ( <RARE_TOKEN> e ) { </a> 
<a> task . cancel ( false ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( ) { </a> 
<a> for ( ; ; ) { </a> 
<a> boolean <RARE_TOKEN> = false ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> for ( ; ; ) { </a> 
<a> final <RARE_TOKEN> < ? > task = <RARE_TOKEN> . poll ( ) ; </a> 
<a> if ( task == null ) { </a> 
<a> break ; </a> 
<a> } </a> 
<a> try { </a> 
<a> <RARE_TOKEN> ( task ) ; </a> 
<a> <RARE_TOKEN> = true ; </a> 
<a> } catch ( Throwable t ) { </a> 
<a> logger . warn ( <RARE_TOKEN> task <RARE_TOKEN> an <RARE_TOKEN> , t ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> if ( ! <RARE_TOKEN> && <RARE_TOKEN> . isEmpty ( ) ) { </a> 
<a> break ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> } </a> 
<a> private boolean <RARE_TOKEN> ( ) { </a> 
<a> return Thread . currentThread ( ) == <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public void shutdown ( ) { </a> 
<a> boolean <RARE_TOKEN> = <RARE_TOKEN> ( ) ; </a> 
<a> boolean <RARE_TOKEN> = false ; </a> 
<a> if ( <RARE_TOKEN> ) { </a> 
<a> synchronized ( <RARE_TOKEN> ) { </a> 
<a> assert state == 1 ; </a> 
<a> state = 2 ; </a> 
<a> <RARE_TOKEN> = true ; </a> 
<a> } </a> 
<a> } else { </a> 
<a> synchronized ( <RARE_TOKEN> ) { </a> 
<a> switch ( state ) { </a> 
<a> case 0 : </a> 
<a> state = 3 ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> break ; </a> 
<a> case 1 : </a> 
<a> state = 2 ; </a> 
<a> <RARE_TOKEN> = true ; </a> 
<a> break ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> && ! <RARE_TOKEN> && <RARE_TOKEN> ( ) ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return state >= 2 ; </a> 
<a> } </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return state == 3 ; </a> 
<a> } </a> 
<a> public boolean <RARE_TOKEN> ( long timeout , TimeUnit unit ) throws InterruptedException { </a> 
<a> if ( unit == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> ( ) ) { </a> 
<a> throw new IllegalStateException ( <RARE_TOKEN> await <RARE_TOKEN> of the current <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> . <RARE_TOKEN> ( timeout , unit ) ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> return <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> public ScheduledFuture < ? > schedule ( </a> 
<a> EventExecutor executor , Runnable command , long delay , TimeUnit unit ) { </a> 
<a> if ( executor == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( command == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( unit == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( delay < 0 ) { </a> 
<a> throw new IllegalArgumentException ( </a> 
<a> String . format ( <RARE_TOKEN> <RARE_TOKEN> (expected: >= <RARE_TOKEN> , delay ) ) ; </a> 
<a> } </a> 
<a> return schedule ( new <RARE_TOKEN> < Void > ( executor , command , null , <RARE_TOKEN> ( unit . <RARE_TOKEN> ( delay ) ) ) ) ; </a> 
<a> } </a> 
<a> public < V > ScheduledFuture < V > schedule ( </a> 
<a> EventExecutor executor , <RARE_TOKEN> < V > <RARE_TOKEN> , long delay , TimeUnit unit ) { </a> 
<a> if ( executor == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( unit == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( delay < 0 ) { </a> 
<a> throw new IllegalArgumentException ( </a> 
<a> String . format ( <RARE_TOKEN> <RARE_TOKEN> (expected: >= <RARE_TOKEN> , delay ) ) ; </a> 
<a> } </a> 
<a> return schedule ( new <RARE_TOKEN> < V > ( executor , <RARE_TOKEN> , <RARE_TOKEN> ( unit . <RARE_TOKEN> ( delay ) ) ) ) ; </a> 
<a> } </a> 
<a> public ScheduledFuture < ? > <RARE_TOKEN> ( </a> 
<a> EventExecutor executor , Runnable command , long <RARE_TOKEN> , long period , TimeUnit unit ) { </a> 
<a> if ( executor == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( command == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( unit == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> < 0 ) { </a> 
<a> throw new IllegalArgumentException ( </a> 
<a> String . format ( <RARE_TOKEN> <RARE_TOKEN> (expected: >= <RARE_TOKEN> , <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> if ( period <= 0 ) { </a> 
<a> throw new IllegalArgumentException ( </a> 
<a> String . format ( <RARE_TOKEN> <RARE_TOKEN> (expected: > <RARE_TOKEN> , period ) ) ; </a> 
<a> } </a> 
<a> return schedule ( new <RARE_TOKEN> < Void > ( </a> 
<a> executor , command , null , <RARE_TOKEN> ( unit . <RARE_TOKEN> ( <RARE_TOKEN> ) ) , unit . <RARE_TOKEN> ( period ) ) ) ; </a> 
<a> } </a> 
<a> public ScheduledFuture < ? > <RARE_TOKEN> ( </a> 
<a> EventExecutor executor , Runnable command , long <RARE_TOKEN> , long delay , TimeUnit unit ) { </a> 
<a> if ( executor == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( command == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( unit == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> < 0 ) { </a> 
<a> throw new IllegalArgumentException ( </a> 
<a> String . format ( <RARE_TOKEN> <RARE_TOKEN> (expected: >= <RARE_TOKEN> , <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> if ( delay <= 0 ) { </a> 
<a> throw new IllegalArgumentException ( </a> 
<a> String . format ( <RARE_TOKEN> <RARE_TOKEN> (expected: > <RARE_TOKEN> , delay ) ) ; </a> 
<a> } </a> 
<a> return schedule ( new <RARE_TOKEN> < Void > ( </a> 
<a> executor , command , null , <RARE_TOKEN> ( unit . <RARE_TOKEN> ( <RARE_TOKEN> ) ) , - unit . <RARE_TOKEN> ( delay ) ) ) ; </a> 
<a> } </a> 
<a> private < V > ScheduledFuture < V > schedule ( <RARE_TOKEN> < V > task ) { </a> 
<a> if ( <RARE_TOKEN> ( ) ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> . add ( task ) ; </a> 
<a> if ( <RARE_TOKEN> ( ) ) { </a> 
<a> task . cancel ( false ) ; </a> 
<a> } </a> 
<a> boolean <RARE_TOKEN> = false ; </a> 
<a> if ( ! <RARE_TOKEN> ( ) ) { </a> 
<a> synchronized ( <RARE_TOKEN> ) { </a> 
<a> if ( state == 0 ) { </a> 
<a> state = 1 ; </a> 
<a> <RARE_TOKEN> . start ( ) ; </a> 
<a> <RARE_TOKEN> = true ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> ) { </a> 
<a> schedule ( new <RARE_TOKEN> < Void > ( </a> 
<a> null , new <RARE_TOKEN> ( ) , null , </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) , - <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> return task ; </a> 
<a> } </a> 
<a> private static void <RARE_TOKEN> ( ) { </a> 
<a> throw new <RARE_TOKEN> ( <RARE_TOKEN> executor <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( ) { </a> 
<a> if ( <RARE_TOKEN> . isEmpty ( ) ) { </a> 
<a> return ; </a> 
<a> } </a> 
<a> for ( <RARE_TOKEN> < ? > task : <RARE_TOKEN> . <RARE_TOKEN> ( new <RARE_TOKEN> < ? > [ <RARE_TOKEN> . size ( ) ] ) ) { </a> 
<a> task . cancel ( false ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> . clear ( ) ; </a> 
<a> } </a> 
<a> private class <RARE_TOKEN> < V > extends <RARE_TOKEN> < V > implements ScheduledFuture < V > { </a> 
<a> private final EventExecutor executor ; </a> 
<a> private final long id = <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> private long <RARE_TOKEN> ; </a> 
<a> private final long <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> ( EventExecutor executor , Runnable <RARE_TOKEN> , V result , long <RARE_TOKEN> ) { </a> 
<a> super ( <RARE_TOKEN> , result ) ; </a> 
<a> this . executor = executor ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = 0 ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( EventExecutor executor , Runnable <RARE_TOKEN> , V result , long <RARE_TOKEN> , long period ) { </a> 
<a> super ( <RARE_TOKEN> , result ) ; </a> 
<a> if ( period == 0 ) { </a> 
<a> throw new IllegalArgumentException ( </a> 
<a> String . format ( <RARE_TOKEN> <RARE_TOKEN> (expected: != <RARE_TOKEN> , period ) ) ; </a> 
<a> } </a> 
<a> this . executor = executor ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = period ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( EventExecutor executor , <RARE_TOKEN> < V > <RARE_TOKEN> , long <RARE_TOKEN> ) { </a> 
<a> super ( <RARE_TOKEN> ) ; </a> 
<a> this . executor = executor ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = 0 ; </a> 
<a> } </a> 
<a> public long <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public long <RARE_TOKEN> ( ) { </a> 
<a> return Math . <RARE_TOKEN> ( 0 , <RARE_TOKEN> ( ) - <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public long <RARE_TOKEN> ( TimeUnit unit ) { </a> 
<a> return unit . <RARE_TOKEN> ( <RARE_TOKEN> ( ) , TimeUnit . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int <RARE_TOKEN> ( <RARE_TOKEN> o ) { </a> 
<a> if ( this == o ) { </a> 
<a> return 0 ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> < ? > that = ( <RARE_TOKEN> < ? > ) o ; </a> 
<a> long d = <RARE_TOKEN> ( ) - that . <RARE_TOKEN> ( ) ; </a> 
<a> if ( d < 0 ) { </a> 
<a> return - 1 ; </a> 
<a> } else if ( d > 0 ) { </a> 
<a> return 1 ; </a> 
<a> } else if ( id < that . id ) { </a> 
<a> return - 1 ; </a> 
<a> } else if ( id == that . id ) { </a> 
<a> throw new Error ( ) ; </a> 
<a> } else { </a> 
<a> return 1 ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void run ( ) { </a> 
<a> if ( <RARE_TOKEN> == 0 ) { </a> 
<a> super . run ( ) ; </a> 
<a> } else { </a> 
<a> boolean <RARE_TOKEN> = <RARE_TOKEN> ( ) ; </a> 
<a> if ( <RARE_TOKEN> && ! <RARE_TOKEN> ( ) ) { </a> 
<a> long p = <RARE_TOKEN> ; </a> 
<a> if ( p > 0 ) { </a> 
<a> <RARE_TOKEN> += p ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ( ) - p ; </a> 
<a> } </a> 
<a> schedule ( this ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> private final class <RARE_TOKEN> implements Runnable { </a> 
<a> @ Override </a> 
<a> public void run ( ) { </a> 
<a> Iterator < <RARE_TOKEN> < ? > > i = <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> while ( i . <RARE_TOKEN> ( ) ) { </a> 
<a> <RARE_TOKEN> < ? > task = i . next ( ) ; </a> 
<a> if ( task . isCancelled ( ) ) { </a> 
<a> i . remove ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . channel ; </a> 
<a> import io . netty . buffer . <RARE_TOKEN> ; </a> 
<a> import java . net . SocketAddress ; </a> 
<a> public class <RARE_TOKEN> </a> 
<a> extends <RARE_TOKEN> implements <RARE_TOKEN> , <RARE_TOKEN> { </a> 
<a> private <RARE_TOKEN> out ; </a> 
<a> private <RARE_TOKEN> in ; </a> 
<a> protected <RARE_TOKEN> ( ) { </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> , <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> init ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> protected void init ( </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> , <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> instanceof <RARE_TOKEN> ) { </a> 
<a> throw new IllegalArgumentException ( </a> 
<a> <RARE_TOKEN> must not <RARE_TOKEN> " + </a> 
<a> <RARE_TOKEN> . class . getSimpleName ( ) + " to get <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> instanceof <RARE_TOKEN> ) { </a> 
<a> throw new IllegalArgumentException ( </a> 
<a> <RARE_TOKEN> must not <RARE_TOKEN> " + </a> 
<a> <RARE_TOKEN> . class . getSimpleName ( ) + " to get <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( in != null ) { </a> 
<a> throw new IllegalStateException ( <RARE_TOKEN> <RARE_TOKEN> be <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> in = <RARE_TOKEN> ; </a> 
<a> out = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public <RARE_TOKEN> <RARE_TOKEN> ( </a> 
<a> ChannelHandlerContext ctx ) throws Exception { </a> 
<a> return in . <RARE_TOKEN> ( ctx ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public <RARE_TOKEN> <RARE_TOKEN> ( </a> 
<a> ChannelHandlerContext ctx ) throws Exception { </a> 
<a> return out . <RARE_TOKEN> ( ctx ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ChannelHandlerContext ctx ) throws Exception { </a> 
<a> if ( in == null ) { </a> 
<a> throw new IllegalStateException ( </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> - <RARE_TOKEN> <RARE_TOKEN> in the <RARE_TOKEN> of the <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> try { </a> 
<a> in . <RARE_TOKEN> ( ctx ) ; </a> 
<a> } finally { </a> 
<a> out . <RARE_TOKEN> ( ctx ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ChannelHandlerContext ctx ) throws Exception { </a> 
<a> try { </a> 
<a> in . <RARE_TOKEN> ( ctx ) ; </a> 
<a> } finally { </a> 
<a> out . <RARE_TOKEN> ( ctx ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ChannelHandlerContext ctx ) throws Exception { </a> 
<a> try { </a> 
<a> in . <RARE_TOKEN> ( ctx ) ; </a> 
<a> } finally { </a> 
<a> out . <RARE_TOKEN> ( ctx ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ChannelHandlerContext ctx ) throws Exception { </a> 
<a> try { </a> 
<a> in . <RARE_TOKEN> ( ctx ) ; </a> 
<a> } finally { </a> 
<a> out . <RARE_TOKEN> ( ctx ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ChannelHandlerContext ctx ) throws Exception { </a> 
<a> in . <RARE_TOKEN> ( ctx ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ChannelHandlerContext ctx ) throws Exception { </a> 
<a> in . <RARE_TOKEN> ( ctx ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ChannelHandlerContext ctx ) throws Exception { </a> 
<a> in . <RARE_TOKEN> ( ctx ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ChannelHandlerContext ctx ) throws Exception { </a> 
<a> in . <RARE_TOKEN> ( ctx ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void exceptionCaught ( ChannelHandlerContext ctx , Throwable cause ) throws Exception { </a> 
<a> in . exceptionCaught ( ctx , cause ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ChannelHandlerContext ctx , Object <RARE_TOKEN> ) throws Exception { </a> 
<a> in . <RARE_TOKEN> ( ctx , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void inboundBufferUpdated ( ChannelHandlerContext ctx ) throws Exception { </a> 
<a> in . inboundBufferUpdated ( ctx ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void bind ( </a> 
<a> ChannelHandlerContext ctx , </a> 
<a> SocketAddress localAddress , ChannelFuture future ) throws Exception { </a> 
<a> out . bind ( ctx , localAddress , future ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void connect ( </a> 
<a> ChannelHandlerContext ctx , </a> 
<a> SocketAddress remoteAddress , SocketAddress localAddress , </a> 
<a> ChannelFuture future ) throws Exception { </a> 
<a> out . connect ( ctx , remoteAddress , localAddress , future ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void disconnect ( </a> 
<a> ChannelHandlerContext ctx , ChannelFuture future ) throws Exception { </a> 
<a> out . disconnect ( ctx , future ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void close ( </a> 
<a> ChannelHandlerContext ctx , ChannelFuture future ) throws Exception { </a> 
<a> out . close ( ctx , future ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( </a> 
<a> ChannelHandlerContext ctx , ChannelFuture future ) throws Exception { </a> 
<a> out . <RARE_TOKEN> ( ctx , future ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void flush ( </a> 
<a> ChannelHandlerContext ctx , ChannelFuture future ) throws Exception { </a> 
<a> out . flush ( ctx , future ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . channel ; </a> 
<a> import java . util . concurrent . TimeUnit ; </a> 
<a> public abstract class <RARE_TOKEN> implements ChannelFuture { </a> 
<a> private final Channel channel ; </a> 
<a> protected <RARE_TOKEN> ( Channel channel ) { </a> 
<a> if ( channel == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> this . channel = channel ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ChannelFuture addListener ( final ChannelFutureListener listener ) { </a> 
<a> if ( listener == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( this , listener ) ; </a> 
<a> return this ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ChannelFuture <RARE_TOKEN> ( ChannelFutureListener listener ) { </a> 
<a> return this ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ChannelFuture await ( ) throws InterruptedException { </a> 
<a> if ( Thread . <RARE_TOKEN> ( ) ) { </a> 
<a> throw new InterruptedException ( ) ; </a> 
<a> } </a> 
<a> return this ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean await ( long timeout , TimeUnit unit ) throws InterruptedException { </a> 
<a> if ( Thread . <RARE_TOKEN> ( ) ) { </a> 
<a> throw new InterruptedException ( ) ; </a> 
<a> } </a> 
<a> return true ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean await ( long <RARE_TOKEN> ) throws InterruptedException { </a> 
<a> if ( Thread . <RARE_TOKEN> ( ) ) { </a> 
<a> throw new InterruptedException ( ) ; </a> 
<a> } </a> 
<a> return true ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ChannelFuture <RARE_TOKEN> ( ) { </a> 
<a> return this ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( long timeout , TimeUnit unit ) { </a> 
<a> return true ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( long <RARE_TOKEN> ) { </a> 
<a> return true ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public Channel channel ( ) { </a> 
<a> return channel ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return true ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( long <RARE_TOKEN> , long current , long <RARE_TOKEN> ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean setFailure ( Throwable cause ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean cancel ( ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean cancel ( boolean <RARE_TOKEN> ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean isCancelled ( ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . channel ; </a> 
<a> import static io . netty . channel . ChannelOption . * ; </a> 
<a> import io . netty . channel . socket . <RARE_TOKEN> ; </a> 
<a> import java . util . <RARE_TOKEN> ; </a> 
<a> import java . util . Map ; </a> 
<a> import java . util . Map . Entry ; </a> 
<a> public class <RARE_TOKEN> implements <RARE_TOKEN> { </a> 
<a> private static final int <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private volatile int <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private volatile int <RARE_TOKEN> = 16 ; </a> 
<a> @ Override </a> 
<a> public Map < ChannelOption < ? > , Object > <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ( null , <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> protected Map < ChannelOption < ? > , Object > <RARE_TOKEN> ( </a> 
<a> Map < ChannelOption < ? > , Object > result , ChannelOption < ? > ... <RARE_TOKEN> ) { </a> 
<a> if ( result == null ) { </a> 
<a> result = new <RARE_TOKEN> < ChannelOption < ? > , Object > ( ) ; </a> 
<a> } </a> 
<a> for ( ChannelOption < ? > o : <RARE_TOKEN> ) { </a> 
<a> result . put ( o , <RARE_TOKEN> ( o ) ) ; </a> 
<a> } </a> 
<a> return result ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( Map < ChannelOption < ? > , ? > <RARE_TOKEN> ) { </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> boolean <RARE_TOKEN> = true ; </a> 
<a> for ( Entry < ChannelOption < ? > , ? > e : <RARE_TOKEN> . <RARE_TOKEN> ( ) ) { </a> 
<a> if ( ! <RARE_TOKEN> ( ( ChannelOption < Object > ) e . <RARE_TOKEN> ( ) , e . getValue ( ) ) ) { </a> 
<a> <RARE_TOKEN> = false ; </a> 
<a> } </a> 
<a> } </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public < T > T <RARE_TOKEN> ( ChannelOption < T > option ) { </a> 
<a> if ( option == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( option == <RARE_TOKEN> ) { </a> 
<a> return ( T ) Integer . valueOf ( <RARE_TOKEN> ( ) ) ; </a> 
<a> } else if ( option == <RARE_TOKEN> ) { </a> 
<a> return ( T ) Integer . valueOf ( <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> return null ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public < T > boolean <RARE_TOKEN> ( ChannelOption < T > option , T value ) { </a> 
<a> <RARE_TOKEN> ( option , value ) ; </a> 
<a> if ( option == <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( ( Integer ) value ) ; </a> 
<a> } else if ( option == <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( ( Integer ) value ) ; </a> 
<a> } else { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> return true ; </a> 
<a> } </a> 
<a> protected < T > void <RARE_TOKEN> ( ChannelOption < T > option , T value ) { </a> 
<a> if ( option == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> option . <RARE_TOKEN> ( value ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( int <RARE_TOKEN> ) { </a> 
<a> if ( <RARE_TOKEN> < 0 ) { </a> 
<a> throw new IllegalArgumentException ( String . format ( </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> (expected: >= <RARE_TOKEN> , <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( int <RARE_TOKEN> ) { </a> 
<a> if ( <RARE_TOKEN> <= 0 ) { </a> 
<a> throw new IllegalArgumentException ( </a> 
<a> <RARE_TOKEN> must be a <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . channel ; </a> 
<a> import static java . util . concurrent . TimeUnit . * ; </a> 
<a> import io . netty . channel . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import io . netty . logging . InternalLogger ; </a> 
<a> import io . netty . logging . InternalLoggerFactory ; </a> 
<a> import java . nio . channels . <RARE_TOKEN> ; </a> 
<a> import java . util . ArrayList ; </a> 
<a> import java . util . Collection ; </a> 
<a> import java . util . List ; </a> 
<a> import java . util . concurrent . <RARE_TOKEN> ; </a> 
<a> import java . util . concurrent . TimeUnit ; </a> 
<a> import java . util . concurrent . <RARE_TOKEN> ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> implements ChannelFuture { </a> 
<a> private static final InternalLogger logger = </a> 
<a> InternalLoggerFactory . getInstance ( <RARE_TOKEN> . class ) ; </a> 
<a> private static final int <RARE_TOKEN> = 8 ; </a> 
<a> private static final <RARE_TOKEN> < Integer > <RARE_TOKEN> = new <RARE_TOKEN> < Integer > ( ) { </a> 
<a> @ Override </a> 
<a> protected Integer <RARE_TOKEN> ( ) { </a> 
<a> return 0 ; </a> 
<a> } </a> 
<a> } ; </a> 
<a> private static final Throwable <RARE_TOKEN> = new Throwable ( ) ; </a> 
<a> private final Channel channel ; </a> 
<a> private final boolean <RARE_TOKEN> ; </a> 
<a> private ChannelFutureListener <RARE_TOKEN> ; </a> 
<a> private List < ChannelFutureListener > <RARE_TOKEN> ; </a> 
<a> private List < <RARE_TOKEN> > <RARE_TOKEN> ; </a> 
<a> private boolean done ; </a> 
<a> private Throwable cause ; </a> 
<a> private int <RARE_TOKEN> ; </a> 
<a> private long <RARE_TOKEN> ; </a> 
<a> public <RARE_TOKEN> ( Channel channel , boolean <RARE_TOKEN> ) { </a> 
<a> this . channel = channel ; </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public Channel channel ( ) { </a> 
<a> return channel ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public synchronized boolean <RARE_TOKEN> ( ) { </a> 
<a> return done ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public synchronized boolean <RARE_TOKEN> ( ) { </a> 
<a> return done && cause == null ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public synchronized Throwable cause ( ) { </a> 
<a> if ( cause != <RARE_TOKEN> ) { </a> 
<a> return cause ; </a> 
<a> } else { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public synchronized boolean isCancelled ( ) { </a> 
<a> return cause == <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ChannelFuture addListener ( final ChannelFutureListener listener ) { </a> 
<a> if ( listener == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> boolean <RARE_TOKEN> = false ; </a> 
<a> synchronized ( this ) { </a> 
<a> if ( done ) { </a> 
<a> <RARE_TOKEN> = true ; </a> 
<a> } else { </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> <RARE_TOKEN> = listener ; </a> 
<a> } else { </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> <RARE_TOKEN> = new ArrayList < ChannelFutureListener > ( 1 ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> . add ( listener ) ; </a> 
<a> } </a> 
<a> if ( listener instanceof <RARE_TOKEN> ) { </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> <RARE_TOKEN> = new ArrayList < <RARE_TOKEN> > ( 1 ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> . add ( ( <RARE_TOKEN> ) listener ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( this , listener ) ; </a> 
<a> } </a> 
<a> return this ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ChannelFuture <RARE_TOKEN> ( ChannelFutureListener listener ) { </a> 
<a> if ( listener == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> synchronized ( this ) { </a> 
<a> if ( ! done ) { </a> 
<a> if ( listener == <RARE_TOKEN> ) { </a> 
<a> if ( <RARE_TOKEN> != null && ! <RARE_TOKEN> . isEmpty ( ) ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . remove ( 0 ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> = null ; </a> 
<a> } </a> 
<a> } else if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> . remove ( listener ) ; </a> 
<a> } </a> 
<a> if ( listener instanceof <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> . remove ( listener ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> return this ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ChannelFuture sync ( ) throws InterruptedException { </a> 
<a> await ( ) ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> return this ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ChannelFuture <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> return this ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public Void get ( ) throws InterruptedException , <RARE_TOKEN> { </a> 
<a> await ( ) ; </a> 
<a> Throwable cause = cause ( ) ; </a> 
<a> if ( cause == null ) { </a> 
<a> return null ; </a> 
<a> } else { </a> 
<a> throw new <RARE_TOKEN> ( cause ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public Void get ( long timeout , TimeUnit unit ) throws InterruptedException , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> { </a> 
<a> if ( ! await ( timeout , unit ) ) { </a> 
<a> throw new <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> Throwable cause = cause ( ) ; </a> 
<a> if ( cause == null ) { </a> 
<a> return null ; </a> 
<a> } else { </a> 
<a> throw new <RARE_TOKEN> ( cause ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( ) { </a> 
<a> Throwable cause = cause ( ) ; </a> 
<a> if ( cause == null ) { </a> 
<a> return ; </a> 
<a> } </a> 
<a> if ( cause instanceof <RARE_TOKEN> ) { </a> 
<a> throw ( <RARE_TOKEN> ) cause ; </a> 
<a> } </a> 
<a> if ( cause instanceof Error ) { </a> 
<a> throw ( Error ) cause ; </a> 
<a> } </a> 
<a> throw new ChannelException ( cause ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ChannelFuture await ( ) throws InterruptedException { </a> 
<a> if ( Thread . <RARE_TOKEN> ( ) ) { </a> 
<a> throw new InterruptedException ( ) ; </a> 
<a> } </a> 
<a> synchronized ( this ) { </a> 
<a> while ( ! done ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> ++ ; </a> 
<a> try { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } finally { </a> 
<a> <RARE_TOKEN> -- ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> return this ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean await ( long timeout , TimeUnit unit ) </a> 
<a> throws InterruptedException { </a> 
<a> return <RARE_TOKEN> ( unit . <RARE_TOKEN> ( timeout ) , true ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean await ( long <RARE_TOKEN> ) throws InterruptedException { </a> 
<a> return <RARE_TOKEN> ( MILLISECONDS . <RARE_TOKEN> ( <RARE_TOKEN> ) , true ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ChannelFuture <RARE_TOKEN> ( ) { </a> 
<a> boolean <RARE_TOKEN> = false ; </a> 
<a> synchronized ( this ) { </a> 
<a> while ( ! done ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> ++ ; </a> 
<a> try { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } catch ( InterruptedException e ) { </a> 
<a> <RARE_TOKEN> = true ; </a> 
<a> } finally { </a> 
<a> <RARE_TOKEN> -- ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> ) { </a> 
<a> Thread . currentThread ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> return this ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( long timeout , TimeUnit unit ) { </a> 
<a> try { </a> 
<a> return <RARE_TOKEN> ( unit . <RARE_TOKEN> ( timeout ) , false ) ; </a> 
<a> } catch ( InterruptedException e ) { </a> 
<a> throw new <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( long <RARE_TOKEN> ) { </a> 
<a> try { </a> 
<a> return <RARE_TOKEN> ( MILLISECONDS . <RARE_TOKEN> ( <RARE_TOKEN> ) , false ) ; </a> 
<a> } catch ( InterruptedException e ) { </a> 
<a> throw new <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private boolean <RARE_TOKEN> ( long <RARE_TOKEN> , boolean <RARE_TOKEN> ) throws InterruptedException { </a> 
<a> if ( <RARE_TOKEN> && Thread . <RARE_TOKEN> ( ) ) { </a> 
<a> throw new InterruptedException ( ) ; </a> 
<a> } </a> 
<a> long <RARE_TOKEN> = <RARE_TOKEN> <= 0 ? 0 : System . <RARE_TOKEN> ( ) ; </a> 
<a> long <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> boolean <RARE_TOKEN> = false ; </a> 
<a> try { </a> 
<a> synchronized ( this ) { </a> 
<a> if ( done ) { </a> 
<a> return done ; </a> 
<a> } else if ( <RARE_TOKEN> <= 0 ) { </a> 
<a> return done ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> ++ ; </a> 
<a> try { </a> 
<a> for ( ; ; ) { </a> 
<a> try { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> / <RARE_TOKEN> , ( int ) ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ) ; </a> 
<a> } catch ( InterruptedException e ) { </a> 
<a> if ( <RARE_TOKEN> ) { </a> 
<a> throw e ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> = true ; </a> 
<a> } </a> 
<a> } </a> 
<a> if ( done ) { </a> 
<a> return true ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> - ( System . <RARE_TOKEN> ( ) - <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> <= 0 ) { </a> 
<a> return done ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } finally { </a> 
<a> <RARE_TOKEN> -- ; </a> 
<a> } </a> 
<a> } </a> 
<a> } finally { </a> 
<a> if ( <RARE_TOKEN> ) { </a> 
<a> Thread . currentThread ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( ) { </a> 
<a> if ( channel ( ) . <RARE_TOKEN> ( ) && channel ( ) . eventLoop ( ) . inEventLoop ( ) ) { </a> 
<a> throw new <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> synchronized ( this ) { </a> 
<a> if ( done ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> done = true ; </a> 
<a> if ( <RARE_TOKEN> > 0 ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> return true ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean setFailure ( Throwable cause ) { </a> 
<a> synchronized ( this ) { </a> 
<a> if ( done ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> this . cause = cause ; </a> 
<a> done = true ; </a> 
<a> if ( <RARE_TOKEN> > 0 ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> return true ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean cancel ( ) { </a> 
<a> if ( ! <RARE_TOKEN> ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> synchronized ( this ) { </a> 
<a> if ( done ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> cause = <RARE_TOKEN> ; </a> 
<a> done = true ; </a> 
<a> if ( <RARE_TOKEN> > 0 ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> return true ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean cancel ( boolean <RARE_TOKEN> ) { </a> 
<a> return cancel ( ) ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( ) { </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> return ; </a> 
<a> } </a> 
<a> if ( channel ( ) . eventLoop ( ) . inEventLoop ( ) ) { </a> 
<a> <RARE_TOKEN> ( this , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = null ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> for ( ChannelFutureListener l : <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( this , l ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> = null ; </a> 
<a> } </a> 
<a> } else { </a> 
<a> final ChannelFutureListener <RARE_TOKEN> = this . <RARE_TOKEN> ; </a> 
<a> final List < ChannelFutureListener > <RARE_TOKEN> = this . <RARE_TOKEN> ; </a> 
<a> this . <RARE_TOKEN> = null ; </a> 
<a> this . <RARE_TOKEN> = null ; </a> 
<a> channel ( ) . eventLoop ( ) . execute ( new Runnable ( ) { </a> 
<a> @ Override </a> 
<a> public void run ( ) { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> . this , <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> for ( ChannelFutureListener l : <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> . this , l ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> static void <RARE_TOKEN> ( final ChannelFuture f , final ChannelFutureListener l ) { </a> 
<a> EventLoop loop = f . channel ( ) . eventLoop ( ) ; </a> 
<a> if ( loop . inEventLoop ( ) ) { </a> 
<a> final Integer <RARE_TOKEN> = <RARE_TOKEN> . get ( ) ; </a> 
<a> if ( <RARE_TOKEN> < <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> . set ( <RARE_TOKEN> + 1 ) ; </a> 
<a> try { </a> 
<a> <RARE_TOKEN> ( f , l ) ; </a> 
<a> } finally { </a> 
<a> <RARE_TOKEN> . set ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> return ; </a> 
<a> } </a> 
<a> } </a> 
<a> loop . execute ( new Runnable ( ) { </a> 
<a> @ Override </a> 
<a> public void run ( ) { </a> 
<a> <RARE_TOKEN> ( f , l ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> } </a> 
<a> private static void <RARE_TOKEN> ( ChannelFuture f , ChannelFutureListener l ) { </a> 
<a> try { </a> 
<a> l . <RARE_TOKEN> ( f ) ; </a> 
<a> } catch ( Throwable t ) { </a> 
<a> if ( logger . <RARE_TOKEN> ( ) ) { </a> 
<a> logger . warn ( </a> 
<a> <RARE_TOKEN> exception <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> " + </a> 
<a> ChannelFutureListener . class . getSimpleName ( ) + <RARE_TOKEN> , t ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( long <RARE_TOKEN> , long current , long <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> [ ] <RARE_TOKEN> ; </a> 
<a> synchronized ( this ) { </a> 
<a> if ( done ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> Collection < <RARE_TOKEN> > <RARE_TOKEN> = </a> 
<a> this . <RARE_TOKEN> ; </a> 
<a> if ( <RARE_TOKEN> == null || <RARE_TOKEN> . isEmpty ( ) ) { </a> 
<a> return true ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( </a> 
<a> new <RARE_TOKEN> [ <RARE_TOKEN> . size ( ) ] ) ; </a> 
<a> } </a> 
<a> for ( <RARE_TOKEN> <RARE_TOKEN> : <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> , current , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> return true ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( </a> 
<a> <RARE_TOKEN> l , </a> 
<a> long <RARE_TOKEN> , long current , long <RARE_TOKEN> ) { </a> 
<a> try { </a> 
<a> l . <RARE_TOKEN> ( this , <RARE_TOKEN> , current , <RARE_TOKEN> ) ; </a> 
<a> } catch ( Throwable t ) { </a> 
<a> if ( logger . <RARE_TOKEN> ( ) ) { </a> 
<a> logger . warn ( </a> 
<a> <RARE_TOKEN> exception <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> " + </a> 
<a> <RARE_TOKEN> . class . getSimpleName ( ) + <RARE_TOKEN> , t ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> long <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> void <RARE_TOKEN> ( long <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> ChannelFuture future ( ) { </a> 
<a> return this ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . channel ; </a> 
<a> import static io . netty . channel . <RARE_TOKEN> . * ; </a> 
<a> import io . netty . buffer . ByteBuf ; </a> 
<a> import io . netty . buffer . <RARE_TOKEN> ; </a> 
<a> import io . netty . buffer . MessageBuf ; </a> 
<a> import io . netty . buffer . Unpooled ; </a> 
<a> import io . netty . util . <RARE_TOKEN> ; </a> 
<a> import java . net . SocketAddress ; </a> 
<a> import java . util . Collections ; </a> 
<a> import java . util . <RARE_TOKEN> ; </a> 
<a> import java . util . <RARE_TOKEN> ; </a> 
<a> import java . util . Set ; </a> 
<a> import java . util . concurrent . ConcurrentLinkedQueue ; </a> 
<a> import java . util . concurrent . atomic . AtomicBoolean ; </a> 
<a> import java . util . concurrent . atomic . AtomicReference ; </a> 
<a> final class <RARE_TOKEN> extends <RARE_TOKEN> implements ChannelHandlerContext { </a> 
<a> private static final <RARE_TOKEN> < <RARE_TOKEN> > <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> . class ) ; </a> 
<a> static final int <RARE_TOKEN> = 0x00000001 ; </a> 
<a> static final int <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> volatile <RARE_TOKEN> next ; </a> 
<a> volatile <RARE_TOKEN> prev ; </a> 
<a> private final Channel channel ; </a> 
<a> private final <RARE_TOKEN> pipeline ; </a> 
<a> EventExecutor executor ; </a> 
<a> private final String name ; </a> 
<a> private final Set < <RARE_TOKEN> > type ; </a> 
<a> final int <RARE_TOKEN> ; </a> 
<a> private final ChannelHandler handler ; </a> 
<a> final MessageBuf < Object > <RARE_TOKEN> ; </a> 
<a> final ByteBuf <RARE_TOKEN> ; </a> 
<a> final MessageBuf < Object > <RARE_TOKEN> ; </a> 
<a> final ByteBuf <RARE_TOKEN> ; </a> 
<a> final AtomicReference < <RARE_TOKEN> > <RARE_TOKEN> ; </a> 
<a> final AtomicReference < <RARE_TOKEN> > <RARE_TOKEN> ; </a> 
<a> final AtomicReference < <RARE_TOKEN> > <RARE_TOKEN> ; </a> 
<a> final AtomicReference < <RARE_TOKEN> > <RARE_TOKEN> ; </a> 
<a> final AtomicBoolean readable = new AtomicBoolean ( true ) ; </a> 
<a> final Runnable <RARE_TOKEN> = new Runnable ( ) { </a> 
<a> @ Override </a> 
<a> public void run ( ) { </a> 
<a> <RARE_TOKEN> ctx = <RARE_TOKEN> . this ; </a> 
<a> try { </a> 
<a> ( ( <RARE_TOKEN> ) ctx . handler ) . <RARE_TOKEN> ( ctx ) ; </a> 
<a> } catch ( Throwable t ) { </a> 
<a> pipeline . <RARE_TOKEN> ( t ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } ; </a> 
<a> final Runnable <RARE_TOKEN> = new Runnable ( ) { </a> 
<a> @ Override </a> 
<a> public void run ( ) { </a> 
<a> <RARE_TOKEN> ctx = <RARE_TOKEN> . this ; </a> 
<a> try { </a> 
<a> ( ( <RARE_TOKEN> ) ctx . handler ) . <RARE_TOKEN> ( ctx ) ; </a> 
<a> } catch ( Throwable t ) { </a> 
<a> pipeline . <RARE_TOKEN> ( t ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } ; </a> 
<a> final Runnable <RARE_TOKEN> = new Runnable ( ) { </a> 
<a> @ Override </a> 
<a> public void run ( ) { </a> 
<a> <RARE_TOKEN> ctx = <RARE_TOKEN> . this ; </a> 
<a> try { </a> 
<a> ( ( <RARE_TOKEN> ) ctx . handler ) . <RARE_TOKEN> ( ctx ) ; </a> 
<a> } catch ( Throwable t ) { </a> 
<a> pipeline . <RARE_TOKEN> ( t ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } ; </a> 
<a> final Runnable <RARE_TOKEN> = new Runnable ( ) { </a> 
<a> @ Override </a> 
<a> public void run ( ) { </a> 
<a> <RARE_TOKEN> ctx = <RARE_TOKEN> . this ; </a> 
<a> try { </a> 
<a> ( ( <RARE_TOKEN> ) ctx . handler ) . <RARE_TOKEN> ( ctx ) ; </a> 
<a> } catch ( Throwable t ) { </a> 
<a> pipeline . <RARE_TOKEN> ( t ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } ; </a> 
<a> final Runnable <RARE_TOKEN> = new Runnable ( ) { </a> 
<a> @ Override </a> 
<a> public void run ( ) { </a> 
<a> <RARE_TOKEN> ctx = <RARE_TOKEN> . this ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> try { </a> 
<a> ( ( <RARE_TOKEN> ) ctx . handler ) . inboundBufferUpdated ( ctx ) ; </a> 
<a> } catch ( Throwable t ) { </a> 
<a> pipeline . <RARE_TOKEN> ( t ) ; </a> 
<a> } finally { </a> 
<a> ByteBuf buf = <RARE_TOKEN> ; </a> 
<a> if ( buf != null ) { </a> 
<a> if ( ! buf . readable ( ) ) { </a> 
<a> buf . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } ; </a> 
<a> private final Runnable <RARE_TOKEN> = new Runnable ( ) { </a> 
<a> @ Override </a> 
<a> public void run ( ) { </a> 
<a> <RARE_TOKEN> next = <RARE_TOKEN> ( </a> 
<a> <RARE_TOKEN> . this . next , <RARE_TOKEN> ) ; </a> 
<a> if ( next != null ) { </a> 
<a> next . <RARE_TOKEN> ( ) ; </a> 
<a> EventExecutor executor = next . executor ( ) ; </a> 
<a> if ( executor . inEventLoop ( ) ) { </a> 
<a> next . <RARE_TOKEN> . run ( ) ; </a> 
<a> } else { </a> 
<a> executor . execute ( next . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } ; </a> 
<a> @ SuppressWarnings ( "unchecked" ) </a> 
<a> <RARE_TOKEN> ( </a> 
<a> <RARE_TOKEN> pipeline , <RARE_TOKEN> group , </a> 
<a> <RARE_TOKEN> prev , <RARE_TOKEN> next , </a> 
<a> String name , ChannelHandler handler ) { </a> 
<a> if ( name == null ) { </a> 
<a> throw new NullPointerException ( "name" ) ; </a> 
<a> } </a> 
<a> if ( handler == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> int <RARE_TOKEN> = 0 ; </a> 
<a> <RARE_TOKEN> < <RARE_TOKEN> > type = <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> if ( handler instanceof <RARE_TOKEN> ) { </a> 
<a> type . add ( <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> |= <RARE_TOKEN> ; </a> 
<a> if ( handler instanceof <RARE_TOKEN> ) { </a> 
<a> type . add ( <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> if ( handler instanceof <RARE_TOKEN> ) { </a> 
<a> type . add ( <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> |= <RARE_TOKEN> ; </a> 
<a> if ( handler instanceof <RARE_TOKEN> ) { </a> 
<a> type . add ( <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> this . type = Collections . <RARE_TOKEN> ( type ) ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> this . prev = prev ; </a> 
<a> this . next = next ; </a> 
<a> channel = pipeline . channel ; </a> 
<a> this . pipeline = pipeline ; </a> 
<a> this . name = name ; </a> 
<a> this . handler = handler ; </a> 
<a> if ( group != null ) { </a> 
<a> EventExecutor <RARE_TOKEN> = pipeline . <RARE_TOKEN> . get ( group ) ; </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> <RARE_TOKEN> = group . next ( ) ; </a> 
<a> pipeline . <RARE_TOKEN> . put ( group , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> executor = <RARE_TOKEN> ; </a> 
<a> } else if ( channel . <RARE_TOKEN> ( ) ) { </a> 
<a> executor = channel . eventLoop ( ) ; </a> 
<a> } else { </a> 
<a> executor = null ; </a> 
<a> } </a> 
<a> if ( type . contains ( <RARE_TOKEN> . <RARE_TOKEN> ) ) { </a> 
<a> <RARE_TOKEN> buf ; </a> 
<a> try { </a> 
<a> buf = ( ( <RARE_TOKEN> ) handler ) . <RARE_TOKEN> ( this ) ; </a> 
<a> } catch ( Exception e ) { </a> 
<a> throw new <RARE_TOKEN> ( <RARE_TOKEN> user handler <RARE_TOKEN> to create a new <RARE_TOKEN> <RARE_TOKEN> , e ) ; </a> 
<a> } </a> 
<a> if ( buf == null ) { </a> 
<a> throw new <RARE_TOKEN> ( <RARE_TOKEN> user <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( buf instanceof ByteBuf ) { </a> 
<a> <RARE_TOKEN> = ( ByteBuf ) buf ; </a> 
<a> <RARE_TOKEN> = new AtomicReference < <RARE_TOKEN> > ( ) ; </a> 
<a> <RARE_TOKEN> = null ; </a> 
<a> <RARE_TOKEN> = null ; </a> 
<a> } else if ( buf instanceof MessageBuf ) { </a> 
<a> <RARE_TOKEN> = null ; </a> 
<a> <RARE_TOKEN> = null ; </a> 
<a> <RARE_TOKEN> = ( MessageBuf < Object > ) buf ; </a> 
<a> <RARE_TOKEN> = new AtomicReference < <RARE_TOKEN> > ( ) ; </a> 
<a> } else { </a> 
<a> throw new Error ( ) ; </a> 
<a> } </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> = null ; </a> 
<a> <RARE_TOKEN> = null ; </a> 
<a> <RARE_TOKEN> = null ; </a> 
<a> <RARE_TOKEN> = null ; </a> 
<a> } </a> 
<a> if ( type . contains ( <RARE_TOKEN> . <RARE_TOKEN> ) ) { </a> 
<a> <RARE_TOKEN> buf ; </a> 
<a> try { </a> 
<a> buf = ( ( <RARE_TOKEN> ) handler ) . <RARE_TOKEN> ( this ) ; </a> 
<a> } catch ( Exception e ) { </a> 
<a> throw new <RARE_TOKEN> ( <RARE_TOKEN> user handler <RARE_TOKEN> to create a new <RARE_TOKEN> <RARE_TOKEN> , e ) ; </a> 
<a> } </a> 
<a> if ( buf == null ) { </a> 
<a> throw new <RARE_TOKEN> ( <RARE_TOKEN> user <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( buf instanceof ByteBuf ) { </a> 
<a> <RARE_TOKEN> = ( ByteBuf ) buf ; </a> 
<a> <RARE_TOKEN> = new AtomicReference < <RARE_TOKEN> > ( ) ; </a> 
<a> <RARE_TOKEN> = null ; </a> 
<a> <RARE_TOKEN> = null ; </a> 
<a> } else if ( buf instanceof MessageBuf ) { </a> 
<a> <RARE_TOKEN> = null ; </a> 
<a> <RARE_TOKEN> = null ; </a> 
<a> <RARE_TOKEN> = ( MessageBuf < Object > ) buf ; </a> 
<a> <RARE_TOKEN> = new AtomicReference < <RARE_TOKEN> > ( ) ; </a> 
<a> } else { </a> 
<a> throw new Error ( ) ; </a> 
<a> } </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> = null ; </a> 
<a> <RARE_TOKEN> = null ; </a> 
<a> <RARE_TOKEN> = null ; </a> 
<a> <RARE_TOKEN> = null ; </a> 
<a> } </a> 
<a> } </a> 
<a> void <RARE_TOKEN> ( ) { </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> bridge = <RARE_TOKEN> . get ( ) ; </a> 
<a> if ( bridge != null ) { </a> 
<a> bridge . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } else if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> bridge = <RARE_TOKEN> . get ( ) ; </a> 
<a> if ( bridge != null ) { </a> 
<a> bridge . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> bridge = <RARE_TOKEN> . get ( ) ; </a> 
<a> if ( bridge != null ) { </a> 
<a> bridge . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } else if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> bridge = <RARE_TOKEN> . get ( ) ; </a> 
<a> if ( bridge != null ) { </a> 
<a> bridge . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> void <RARE_TOKEN> ( ) { </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> bridge = <RARE_TOKEN> . get ( ) ; </a> 
<a> if ( bridge != null ) { </a> 
<a> bridge . flush ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } else if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> bridge = <RARE_TOKEN> . get ( ) ; </a> 
<a> if ( bridge != null ) { </a> 
<a> bridge . flush ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> bridge = <RARE_TOKEN> . get ( ) ; </a> 
<a> if ( bridge != null ) { </a> 
<a> bridge . flush ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } else if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> bridge = <RARE_TOKEN> . get ( ) ; </a> 
<a> if ( bridge != null ) { </a> 
<a> bridge . flush ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public Channel channel ( ) { </a> 
<a> return channel ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ChannelPipeline pipeline ( ) { </a> 
<a> return pipeline ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public EventExecutor executor ( ) { </a> 
<a> if ( executor == null ) { </a> 
<a> return executor = channel . eventLoop ( ) ; </a> 
<a> } else { </a> 
<a> return executor ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ChannelHandler handler ( ) { </a> 
<a> return handler ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public String name ( ) { </a> 
<a> return name ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public Set < <RARE_TOKEN> > type ( ) { </a> 
<a> return type ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> != null ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> != null ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ByteBuf <RARE_TOKEN> ( ) { </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> if ( handler instanceof <RARE_TOKEN> ) { </a> 
<a> throw new <RARE_TOKEN> ( String . format ( </a> 
<a> <RARE_TOKEN> handler <RARE_TOKEN> has <RARE_TOKEN> <RARE_TOKEN> byte <RARE_TOKEN> <RARE_TOKEN> implements <RARE_TOKEN> <RARE_TOKEN> " + </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> method <RARE_TOKEN> a <RARE_TOKEN> , </a> 
<a> name , <RARE_TOKEN> . class . getSimpleName ( ) , </a> 
<a> MessageBuf . class . getSimpleName ( ) ) ) ; </a> 
<a> } else { </a> 
<a> throw new <RARE_TOKEN> ( String . format ( </a> 
<a> <RARE_TOKEN> handler <RARE_TOKEN> has <RARE_TOKEN> <RARE_TOKEN> byte <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> not <RARE_TOKEN> <RARE_TOKEN> , </a> 
<a> name , <RARE_TOKEN> . class . getSimpleName ( ) ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> @ SuppressWarnings ( "unchecked" ) </a> 
<a> public < T > MessageBuf < T > <RARE_TOKEN> ( ) { </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> if ( handler instanceof <RARE_TOKEN> ) { </a> 
<a> throw new <RARE_TOKEN> ( String . format ( </a> 
<a> <RARE_TOKEN> handler <RARE_TOKEN> has <RARE_TOKEN> <RARE_TOKEN> message <RARE_TOKEN> <RARE_TOKEN> implements <RARE_TOKEN> <RARE_TOKEN> " + </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> method <RARE_TOKEN> a <RARE_TOKEN> , </a> 
<a> name , <RARE_TOKEN> . class . getSimpleName ( ) , </a> 
<a> ByteBuf . class . getSimpleName ( ) ) ) ; </a> 
<a> } else { </a> 
<a> throw new <RARE_TOKEN> ( String . format ( </a> 
<a> <RARE_TOKEN> handler <RARE_TOKEN> has <RARE_TOKEN> <RARE_TOKEN> message <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> not <RARE_TOKEN> <RARE_TOKEN> , </a> 
<a> name , <RARE_TOKEN> . class . getSimpleName ( ) ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> return ( MessageBuf < T > ) <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> != null ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> != null ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ByteBuf <RARE_TOKEN> ( ) { </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> if ( handler instanceof <RARE_TOKEN> ) { </a> 
<a> throw new <RARE_TOKEN> ( String . format ( </a> 
<a> <RARE_TOKEN> handler <RARE_TOKEN> has <RARE_TOKEN> <RARE_TOKEN> byte <RARE_TOKEN> <RARE_TOKEN> implements <RARE_TOKEN> <RARE_TOKEN> " + </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> method <RARE_TOKEN> a <RARE_TOKEN> , </a> 
<a> name , <RARE_TOKEN> . class . getSimpleName ( ) , </a> 
<a> MessageBuf . class . getSimpleName ( ) ) ) ; </a> 
<a> } else { </a> 
<a> throw new <RARE_TOKEN> ( String . format ( </a> 
<a> <RARE_TOKEN> handler <RARE_TOKEN> has <RARE_TOKEN> <RARE_TOKEN> byte <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> not <RARE_TOKEN> <RARE_TOKEN> , </a> 
<a> name , <RARE_TOKEN> . class . getSimpleName ( ) ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> @ SuppressWarnings ( "unchecked" ) </a> 
<a> public < T > MessageBuf < T > <RARE_TOKEN> ( ) { </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> if ( handler instanceof <RARE_TOKEN> ) { </a> 
<a> throw new <RARE_TOKEN> ( String . format ( </a> 
<a> <RARE_TOKEN> handler <RARE_TOKEN> has <RARE_TOKEN> <RARE_TOKEN> message <RARE_TOKEN> <RARE_TOKEN> implements <RARE_TOKEN> <RARE_TOKEN> " + </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> method <RARE_TOKEN> a <RARE_TOKEN> , </a> 
<a> name , <RARE_TOKEN> . class . getSimpleName ( ) , </a> 
<a> ByteBuf . class . getSimpleName ( ) ) ) ; </a> 
<a> } else { </a> 
<a> throw new <RARE_TOKEN> ( String . format ( </a> 
<a> <RARE_TOKEN> handler <RARE_TOKEN> has <RARE_TOKEN> <RARE_TOKEN> message <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> not <RARE_TOKEN> <RARE_TOKEN> , </a> 
<a> name , <RARE_TOKEN> . class . getSimpleName ( ) ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> return ( MessageBuf < T > ) <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> ctx = next ; </a> 
<a> for ( ; ; ) { </a> 
<a> if ( ctx == null ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> if ( ctx . <RARE_TOKEN> != null ) { </a> 
<a> return true ; </a> 
<a> } </a> 
<a> ctx = ctx . next ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> ctx = next ; </a> 
<a> for ( ; ; ) { </a> 
<a> if ( ctx == null ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> if ( ctx . <RARE_TOKEN> != null ) { </a> 
<a> return true ; </a> 
<a> } </a> 
<a> ctx = ctx . next ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return pipeline . <RARE_TOKEN> ( prev ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return pipeline . <RARE_TOKEN> ( prev ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ByteBuf <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> ctx = next ; </a> 
<a> final Thread currentThread = Thread . currentThread ( ) ; </a> 
<a> for ( ; ; ) { </a> 
<a> if ( ctx == null ) { </a> 
<a> if ( prev != null ) { </a> 
<a> throw new <RARE_TOKEN> ( String . format ( </a> 
<a> <RARE_TOKEN> handler <RARE_TOKEN> <RARE_TOKEN> not <RARE_TOKEN> a <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> buffer is <RARE_TOKEN> , </a> 
<a> name , <RARE_TOKEN> . class . getSimpleName ( ) , </a> 
<a> ByteBuf . class . getSimpleName ( ) ) ) ; </a> 
<a> } else { </a> 
<a> throw new <RARE_TOKEN> ( String . format ( </a> 
<a> <RARE_TOKEN> pipeline <RARE_TOKEN> not <RARE_TOKEN> a <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> buffer is <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> . class . getSimpleName ( ) , </a> 
<a> ByteBuf . class . getSimpleName ( ) ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> if ( ctx . <RARE_TOKEN> != null ) { </a> 
<a> if ( ctx . executor ( ) . inEventLoop ( currentThread ) ) { </a> 
<a> return ctx . <RARE_TOKEN> ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> bridge = ctx . <RARE_TOKEN> . get ( ) ; </a> 
<a> if ( bridge == null ) { </a> 
<a> bridge = new <RARE_TOKEN> ( ) ; </a> 
<a> if ( ! ctx . <RARE_TOKEN> . <RARE_TOKEN> ( null , bridge ) ) { </a> 
<a> bridge = ctx . <RARE_TOKEN> . get ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> return bridge . byteBuf ; </a> 
<a> } </a> 
<a> } </a> 
<a> ctx = ctx . next ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public MessageBuf < Object > <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> ctx = next ; </a> 
<a> final Thread currentThread = Thread . currentThread ( ) ; </a> 
<a> for ( ; ; ) { </a> 
<a> if ( ctx == null ) { </a> 
<a> if ( prev != null ) { </a> 
<a> throw new <RARE_TOKEN> ( String . format ( </a> 
<a> <RARE_TOKEN> handler <RARE_TOKEN> <RARE_TOKEN> not <RARE_TOKEN> a <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> buffer is <RARE_TOKEN> , </a> 
<a> name , <RARE_TOKEN> . class . getSimpleName ( ) , </a> 
<a> MessageBuf . class . getSimpleName ( ) ) ) ; </a> 
<a> } else { </a> 
<a> throw new <RARE_TOKEN> ( String . format ( </a> 
<a> <RARE_TOKEN> pipeline <RARE_TOKEN> not <RARE_TOKEN> a <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> buffer is <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> . class . getSimpleName ( ) , </a> 
<a> MessageBuf . class . getSimpleName ( ) ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> if ( ctx . <RARE_TOKEN> != null ) { </a> 
<a> if ( ctx . executor ( ) . inEventLoop ( currentThread ) ) { </a> 
<a> return ctx . <RARE_TOKEN> ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> bridge = ctx . <RARE_TOKEN> . get ( ) ; </a> 
<a> if ( bridge == null ) { </a> 
<a> bridge = new <RARE_TOKEN> ( ) ; </a> 
<a> if ( ! ctx . <RARE_TOKEN> . <RARE_TOKEN> ( null , bridge ) ) { </a> 
<a> bridge = ctx . <RARE_TOKEN> . get ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> return bridge . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<a> ctx = ctx . next ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ByteBuf <RARE_TOKEN> ( ) { </a> 
<a> return pipeline . <RARE_TOKEN> ( prev ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public MessageBuf < Object > <RARE_TOKEN> ( ) { </a> 
<a> return pipeline . <RARE_TOKEN> ( prev ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> next = <RARE_TOKEN> ( this . next , <RARE_TOKEN> ) ; </a> 
<a> if ( next != null ) { </a> 
<a> EventExecutor executor = next . executor ( ) ; </a> 
<a> if ( executor . inEventLoop ( ) ) { </a> 
<a> next . <RARE_TOKEN> . run ( ) ; </a> 
<a> } else { </a> 
<a> executor . execute ( next . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> next = <RARE_TOKEN> ( this . next , <RARE_TOKEN> ) ; </a> 
<a> if ( next != null ) { </a> 
<a> EventExecutor executor = next . executor ( ) ; </a> 
<a> if ( executor . inEventLoop ( ) ) { </a> 
<a> next . <RARE_TOKEN> . run ( ) ; </a> 
<a> } else { </a> 
<a> executor . execute ( next . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> next = <RARE_TOKEN> ( this . next , <RARE_TOKEN> ) ; </a> 
<a> if ( next != null ) { </a> 
<a> EventExecutor executor = next . executor ( ) ; </a> 
<a> if ( executor . inEventLoop ( ) ) { </a> 
<a> next . <RARE_TOKEN> . run ( ) ; </a> 
<a> } else { </a> 
<a> executor . execute ( next . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> next = <RARE_TOKEN> ( this . next , <RARE_TOKEN> ) ; </a> 
<a> if ( next != null ) { </a> 
<a> EventExecutor executor = next . executor ( ) ; </a> 
<a> if ( executor . inEventLoop ( ) ) { </a> 
<a> next . <RARE_TOKEN> . run ( ) ; </a> 
<a> } else { </a> 
<a> executor . execute ( next . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void fireExceptionCaught ( final Throwable cause ) { </a> 
<a> if ( cause == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> next = this . next ; </a> 
<a> if ( next != null ) { </a> 
<a> EventExecutor executor = next . executor ( ) ; </a> 
<a> if ( executor . inEventLoop ( ) ) { </a> 
<a> try { </a> 
<a> next . handler ( ) . exceptionCaught ( next , cause ) ; </a> 
<a> } catch ( Throwable t ) { </a> 
<a> if ( logger . <RARE_TOKEN> ( ) ) { </a> 
<a> logger . warn ( </a> 
<a> <RARE_TOKEN> exception <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> a user <RARE_TOKEN> " + </a> 
<a> <RARE_TOKEN> method while <RARE_TOKEN> the <RARE_TOKEN> <RARE_TOKEN> , cause ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } else { </a> 
<a> try { </a> 
<a> executor . execute ( new Runnable ( ) { </a> 
<a> @ Override </a> 
<a> public void run ( ) { </a> 
<a> fireExceptionCaught ( cause ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> } catch ( Throwable t ) { </a> 
<a> if ( logger . <RARE_TOKEN> ( ) ) { </a> 
<a> logger . warn ( "Failed to <RARE_TOKEN> an <RARE_TOKEN> <RARE_TOKEN> , t ) ; </a> 
<a> logger . warn ( <RARE_TOKEN> <RARE_TOKEN> event that <RARE_TOKEN> <RARE_TOKEN> to <RARE_TOKEN> <RARE_TOKEN> , cause ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } else { </a> 
<a> logger . warn ( </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> event <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> the end of the " + </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> the last <RARE_TOKEN> handler in the pipeline <RARE_TOKEN> not " + </a> 
<a> <RARE_TOKEN> the <RARE_TOKEN> , cause ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( final Object event ) { </a> 
<a> if ( event == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> next = this . next ; </a> 
<a> if ( next != null ) { </a> 
<a> EventExecutor executor = next . executor ( ) ; </a> 
<a> if ( executor . inEventLoop ( ) ) { </a> 
<a> try { </a> 
<a> next . handler ( ) . <RARE_TOKEN> ( next , event ) ; </a> 
<a> } catch ( Throwable t ) { </a> 
<a> pipeline . <RARE_TOKEN> ( t ) ; </a> 
<a> } </a> 
<a> } else { </a> 
<a> executor . execute ( new Runnable ( ) { </a> 
<a> @ Override </a> 
<a> public void run ( ) { </a> 
<a> <RARE_TOKEN> ( event ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void fireInboundBufferUpdated ( ) { </a> 
<a> EventExecutor executor = executor ( ) ; </a> 
<a> if ( executor . inEventLoop ( ) ) { </a> 
<a> <RARE_TOKEN> . run ( ) ; </a> 
<a> } else { </a> 
<a> executor . execute ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ChannelFuture bind ( SocketAddress localAddress ) { </a> 
<a> return bind ( localAddress , <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ChannelFuture connect ( SocketAddress remoteAddress ) { </a> 
<a> return connect ( remoteAddress , <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ChannelFuture connect ( SocketAddress remoteAddress , SocketAddress localAddress ) { </a> 
<a> return connect ( remoteAddress , localAddress , <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ChannelFuture disconnect ( ) { </a> 
<a> return disconnect ( <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ChannelFuture close ( ) { </a> 
<a> return close ( <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ChannelFuture <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ( <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ChannelFuture flush ( ) { </a> 
<a> return flush ( <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ChannelFuture write ( Object message ) { </a> 
<a> return write ( message , <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ChannelFuture bind ( SocketAddress localAddress , ChannelFuture future ) { </a> 
<a> return pipeline . bind ( <RARE_TOKEN> ( prev , <RARE_TOKEN> ) , localAddress , future ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ChannelFuture connect ( SocketAddress remoteAddress , ChannelFuture future ) { </a> 
<a> return connect ( remoteAddress , null , future ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ChannelFuture connect ( SocketAddress remoteAddress , SocketAddress localAddress , ChannelFuture future ) { </a> 
<a> return pipeline . connect ( <RARE_TOKEN> ( prev , <RARE_TOKEN> ) , remoteAddress , localAddress , future ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ChannelFuture disconnect ( ChannelFuture future ) { </a> 
<a> return pipeline . disconnect ( <RARE_TOKEN> ( prev , <RARE_TOKEN> ) , future ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ChannelFuture close ( ChannelFuture future ) { </a> 
<a> return pipeline . close ( <RARE_TOKEN> ( prev , <RARE_TOKEN> ) , future ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ChannelFuture <RARE_TOKEN> ( ChannelFuture future ) { </a> 
<a> return pipeline . <RARE_TOKEN> ( <RARE_TOKEN> ( prev , <RARE_TOKEN> ) , future ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ChannelFuture flush ( final ChannelFuture future ) { </a> 
<a> EventExecutor executor = executor ( ) ; </a> 
<a> if ( executor . inEventLoop ( ) ) { </a> 
<a> <RARE_TOKEN> prev = <RARE_TOKEN> ( this . prev , <RARE_TOKEN> ) ; </a> 
<a> prev . <RARE_TOKEN> ( ) ; </a> 
<a> pipeline . flush ( prev , future ) ; </a> 
<a> } else { </a> 
<a> executor . execute ( new Runnable ( ) { </a> 
<a> @ Override </a> 
<a> public void run ( ) { </a> 
<a> flush ( future ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> } </a> 
<a> return future ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ChannelFuture write ( Object message , ChannelFuture future ) { </a> 
<a> return pipeline . write ( prev , message , future ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ChannelFuture <RARE_TOKEN> ( ) { </a> 
<a> return channel . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ChannelFuture <RARE_TOKEN> ( ) { </a> 
<a> return channel . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ChannelFuture <RARE_TOKEN> ( Throwable cause ) { </a> 
<a> return channel . <RARE_TOKEN> ( cause ) ; </a> 
<a> } </a> 
<a> static final class <RARE_TOKEN> { </a> 
<a> final MessageBuf < Object > <RARE_TOKEN> = Unpooled . <RARE_TOKEN> ( ) ; </a> 
<a> final <RARE_TOKEN> < Object [ ] > <RARE_TOKEN> = new ConcurrentLinkedQueue < Object [ ] > ( ) ; </a> 
<a> void <RARE_TOKEN> ( ) { </a> 
<a> if ( <RARE_TOKEN> . isEmpty ( ) ) { </a> 
<a> return ; </a> 
<a> } </a> 
<a> Object [ ] data = <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> . clear ( ) ; </a> 
<a> <RARE_TOKEN> . add ( data ) ; </a> 
<a> } </a> 
<a> void flush ( MessageBuf < Object > out ) { </a> 
<a> for ( ; ; ) { </a> 
<a> Object [ ] data = <RARE_TOKEN> . poll ( ) ; </a> 
<a> if ( data == null ) { </a> 
<a> break ; </a> 
<a> } </a> 
<a> Collections . <RARE_TOKEN> ( out , data ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> static final class <RARE_TOKEN> { </a> 
<a> final ByteBuf byteBuf = Unpooled . buffer ( ) ; </a> 
<a> final <RARE_TOKEN> < ByteBuf > <RARE_TOKEN> = new ConcurrentLinkedQueue < ByteBuf > ( ) ; </a> 
<a> void <RARE_TOKEN> ( ) { </a> 
<a> if ( ! byteBuf . readable ( ) ) { </a> 
<a> return ; </a> 
<a> } </a> 
<a> ByteBuf data = byteBuf . readBytes ( byteBuf . readableBytes ( ) ) ; </a> 
<a> byteBuf . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> . add ( data ) ; </a> 
<a> } </a> 
<a> void flush ( ByteBuf out ) { </a> 
<a> for ( ; ; ) { </a> 
<a> ByteBuf data = <RARE_TOKEN> . poll ( ) ; </a> 
<a> if ( data == null ) { </a> 
<a> break ; </a> 
<a> } </a> 
<a> out . writeBytes ( data ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return readable . get ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void readable ( boolean readable ) { </a> 
<a> pipeline . readable ( this , readable ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . channel ; </a> 
<a> import java . util . concurrent . ThreadFactory ; </a> 
<a> class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> <RARE_TOKEN> ( </a> 
<a> <RARE_TOKEN> parent , ThreadFactory threadFactory , <RARE_TOKEN> scheduler ) { </a> 
<a> super ( parent , threadFactory , scheduler ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void run ( ) { </a> 
<a> for ( ; ; ) { </a> 
<a> Runnable task ; </a> 
<a> try { </a> 
<a> task = <RARE_TOKEN> ( ) ; </a> 
<a> task . run ( ) ; </a> 
<a> } catch ( InterruptedException e ) { </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> ( ) && <RARE_TOKEN> ( ) == null ) { </a> 
<a> break ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( boolean inEventLoop ) { </a> 
<a> if ( ! inEventLoop && <RARE_TOKEN> ( ) ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . channel ; </a> 
<a> import java . util . concurrent . ThreadFactory ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> public <RARE_TOKEN> ( int <RARE_TOKEN> ) { </a> 
<a> this ( <RARE_TOKEN> , null ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( int <RARE_TOKEN> , ThreadFactory threadFactory ) { </a> 
<a> super ( <RARE_TOKEN> , threadFactory ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected EventExecutor <RARE_TOKEN> ( </a> 
<a> ThreadFactory threadFactory , <RARE_TOKEN> scheduler , Object ... args ) throws Exception { </a> 
<a> return new <RARE_TOKEN> ( this , threadFactory , scheduler ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . channel ; </a> 
<a> import java . util . concurrent . <RARE_TOKEN> ; </a> 
<a> public interface EventExecutor extends <RARE_TOKEN> , <RARE_TOKEN> { </a> 
<a> <RARE_TOKEN> parent ( ) ; </a> 
<a> boolean inEventLoop ( ) ; </a> 
<a> boolean inEventLoop ( Thread <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . channel ; </a> 
<a> import java . util . concurrent . <RARE_TOKEN> ; </a> 
<a> import java . util . concurrent . TimeUnit ; </a> 
<a> public interface <RARE_TOKEN> { </a> 
<a> EventExecutor next ( ) ; </a> 
<a> void shutdown ( ) ; </a> 
<a> boolean <RARE_TOKEN> ( ) ; </a> 
<a> boolean <RARE_TOKEN> ( ) ; </a> 
<a> boolean <RARE_TOKEN> ( long timeout , TimeUnit unit ) throws InterruptedException ; </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . channel ; </a> 
<a> public interface EventLoop extends EventExecutor , <RARE_TOKEN> { </a> 
<a> @ Override </a> 
<a> <RARE_TOKEN> parent ( ) ; </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . channel ; </a> 
<a> public class <RARE_TOKEN> extends ChannelException { </a> 
<a> private static final long serialVersionUID = - <RARE_TOKEN> ; </a> 
<a> public <RARE_TOKEN> ( ) { </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( String message , Throwable cause ) { </a> 
<a> super ( message , cause ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( String message ) { </a> 
<a> super ( message ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( Throwable cause ) { </a> 
<a> super ( cause ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . channel ; </a> 
<a> import java . util . concurrent . ThreadFactory ; </a> 
<a> import java . util . concurrent . TimeUnit ; </a> 
<a> import java . util . concurrent . atomic . AtomicInteger ; </a> 
<a> public abstract class <RARE_TOKEN> implements <RARE_TOKEN> { </a> 
<a> private static final int <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( ) * 2 ; </a> 
<a> private static final AtomicInteger <RARE_TOKEN> = new AtomicInteger ( ) ; </a> 
<a> final <RARE_TOKEN> scheduler ; </a> 
<a> private final EventExecutor [ ] <RARE_TOKEN> ; </a> 
<a> private final AtomicInteger <RARE_TOKEN> = new AtomicInteger ( ) ; </a> 
<a> protected <RARE_TOKEN> ( int <RARE_TOKEN> , ThreadFactory threadFactory , Object ... args ) { </a> 
<a> if ( <RARE_TOKEN> < 0 ) { </a> 
<a> throw new IllegalArgumentException ( String . format ( </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> (expected: >= <RARE_TOKEN> , <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> == 0 ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> if ( threadFactory == null ) { </a> 
<a> threadFactory = new <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> scheduler = new <RARE_TOKEN> ( threadFactory ) ; </a> 
<a> <RARE_TOKEN> = new <RARE_TOKEN> [ <RARE_TOKEN> ] ; </a> 
<a> for ( int i = 0 ; i < <RARE_TOKEN> ; i ++ ) { </a> 
<a> boolean success = false ; </a> 
<a> try { </a> 
<a> <RARE_TOKEN> [ i ] = <RARE_TOKEN> ( threadFactory , scheduler , args ) ; </a> 
<a> success = true ; </a> 
<a> } catch ( Exception e ) { </a> 
<a> throw new <RARE_TOKEN> ( "failed to create a <RARE_TOKEN> event <RARE_TOKEN> , e ) ; </a> 
<a> } finally { </a> 
<a> if ( ! success ) { </a> 
<a> for ( int j = 0 ; j < i ; j ++ ) { </a> 
<a> <RARE_TOKEN> [ j ] . shutdown ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public EventExecutor next ( ) { </a> 
<a> return <RARE_TOKEN> [ Math . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ( ) <RARE_TOKEN> <RARE_TOKEN> . length ) ] ; </a> 
<a> } </a> 
<a> protected abstract EventExecutor <RARE_TOKEN> ( </a> 
<a> ThreadFactory threadFactory , <RARE_TOKEN> scheduler , Object ... args ) throws Exception ; </a> 
<a> @ Override </a> 
<a> public void shutdown ( ) { </a> 
<a> scheduler . shutdown ( ) ; </a> 
<a> for ( EventExecutor l : <RARE_TOKEN> ) { </a> 
<a> l . shutdown ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> if ( ! scheduler . <RARE_TOKEN> ( ) ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> for ( EventExecutor l : <RARE_TOKEN> ) { </a> 
<a> if ( ! l . <RARE_TOKEN> ( ) ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> } </a> 
<a> return true ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> if ( ! scheduler . <RARE_TOKEN> ( ) ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> for ( EventExecutor l : <RARE_TOKEN> ) { </a> 
<a> if ( ! l . <RARE_TOKEN> ( ) ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> } </a> 
<a> return true ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( long timeout , TimeUnit unit ) </a> 
<a> throws InterruptedException { </a> 
<a> long <RARE_TOKEN> = System . <RARE_TOKEN> ( ) + unit . <RARE_TOKEN> ( timeout ) ; </a> 
<a> for ( ; ; ) { </a> 
<a> long <RARE_TOKEN> = <RARE_TOKEN> - System . <RARE_TOKEN> ( ) ; </a> 
<a> if ( <RARE_TOKEN> <= 0 ) { </a> 
<a> return <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> if ( scheduler . <RARE_TOKEN> ( <RARE_TOKEN> , TimeUnit . <RARE_TOKEN> ) ) { </a> 
<a> break ; </a> 
<a> } </a> 
<a> } </a> 
<a> loop : for ( EventExecutor l : <RARE_TOKEN> ) { </a> 
<a> for ( ; ; ) { </a> 
<a> long <RARE_TOKEN> = <RARE_TOKEN> - System . <RARE_TOKEN> ( ) ; </a> 
<a> if ( <RARE_TOKEN> <= 0 ) { </a> 
<a> break loop ; </a> 
<a> } </a> 
<a> if ( l . <RARE_TOKEN> ( <RARE_TOKEN> , TimeUnit . <RARE_TOKEN> ) ) { </a> 
<a> break ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> return <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> private final class <RARE_TOKEN> implements ThreadFactory { </a> 
<a> private final AtomicInteger <RARE_TOKEN> = new AtomicInteger ( ) ; </a> 
<a> private final String <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> ( ) { </a> 
<a> String <RARE_TOKEN> = <RARE_TOKEN> . this . getClass ( ) . getSimpleName ( ) ; </a> 
<a> <RARE_TOKEN> = "" + <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> . charAt ( 0 ) ) + <RARE_TOKEN> . substring ( 1 ) ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> + <RARE_TOKEN> + <RARE_TOKEN> . <RARE_TOKEN> ( ) + <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public Thread <RARE_TOKEN> ( Runnable r ) { </a> 
<a> Thread t = new Thread ( r , <RARE_TOKEN> + <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> try { </a> 
<a> if ( t . <RARE_TOKEN> ( ) ) { </a> 
<a> t . <RARE_TOKEN> ( false ) ; </a> 
<a> } </a> 
<a> if ( t . <RARE_TOKEN> ( ) != Thread . <RARE_TOKEN> ) { </a> 
<a> t . <RARE_TOKEN> ( Thread . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } catch ( Exception <RARE_TOKEN> ) { </a> 
<a> } </a> 
<a> return t ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . channel ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> private static final long serialVersionUID = - <RARE_TOKEN> ; </a> 
<a> public <RARE_TOKEN> ( ) { </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( String message , Throwable cause ) { </a> 
<a> super ( message , cause ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( String message ) { </a> 
<a> super ( message ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( Throwable cause ) { </a> 
<a> super ( cause ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . channel ; </a> 
<a> import io . netty . channel . socket . <RARE_TOKEN> ; </a> 
<a> public interface <RARE_TOKEN> extends Channel { </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . channel ; </a> 
<a> import io . netty . logging . InternalLogger ; </a> 
<a> import io . netty . logging . InternalLoggerFactory ; </a> 
<a> import java . util . ArrayList ; </a> 
<a> import java . util . Collections ; </a> 
<a> import java . util . <RARE_TOKEN> ; </a> 
<a> import java . util . List ; </a> 
<a> import java . util . <RARE_TOKEN> ; </a> 
<a> import java . util . Set ; </a> 
<a> import java . util . concurrent . <RARE_TOKEN> ; </a> 
<a> import java . util . concurrent . <RARE_TOKEN> ; </a> 
<a> import java . util . concurrent . <RARE_TOKEN> ; </a> 
<a> import java . util . concurrent . <RARE_TOKEN> ; </a> 
<a> import java . util . concurrent . <RARE_TOKEN> ; </a> 
<a> import java . util . concurrent . ScheduledFuture ; </a> 
<a> import java . util . concurrent . <RARE_TOKEN> ; </a> 
<a> import java . util . concurrent . ThreadFactory ; </a> 
<a> import java . util . concurrent . TimeUnit ; </a> 
<a> public abstract class <RARE_TOKEN> extends <RARE_TOKEN> implements EventExecutor { </a> 
<a> private static final InternalLogger logger = </a> 
<a> InternalLoggerFactory . getInstance ( <RARE_TOKEN> . class ) ; </a> 
<a> static final <RARE_TOKEN> < <RARE_TOKEN> > <RARE_TOKEN> = </a> 
<a> new <RARE_TOKEN> < <RARE_TOKEN> > ( ) ; </a> 
<a> public static <RARE_TOKEN> <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> . get ( ) ; </a> 
<a> } </a> 
<a> private final <RARE_TOKEN> parent ; </a> 
<a> private final <RARE_TOKEN> < Runnable > <RARE_TOKEN> ; </a> 
<a> private final Thread <RARE_TOKEN> ; </a> 
<a> private final Object <RARE_TOKEN> = new Object ( ) ; </a> 
<a> private final <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( 0 ) ; </a> 
<a> private final <RARE_TOKEN> scheduler ; </a> 
<a> private final Set < Runnable > <RARE_TOKEN> = new <RARE_TOKEN> < Runnable > ( ) ; </a> 
<a> private volatile int state ; </a> 
<a> protected <RARE_TOKEN> ( </a> 
<a> <RARE_TOKEN> parent , ThreadFactory threadFactory , <RARE_TOKEN> scheduler ) { </a> 
<a> if ( threadFactory == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( scheduler == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> this . parent = parent ; </a> 
<a> this . scheduler = scheduler ; </a> 
<a> <RARE_TOKEN> = threadFactory . <RARE_TOKEN> ( new Runnable ( ) { </a> 
<a> @ Override </a> 
<a> public void run ( ) { </a> 
<a> <RARE_TOKEN> . set ( <RARE_TOKEN> . this ) ; </a> 
<a> try { </a> 
<a> <RARE_TOKEN> . this . run ( ) ; </a> 
<a> } finally { </a> 
<a> try { </a> 
<a> try { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } finally { </a> 
<a> synchronized ( <RARE_TOKEN> ) { </a> 
<a> state = 3 ; </a> 
<a> } </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } finally { </a> 
<a> try { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } finally { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> assert <RARE_TOKEN> . isEmpty ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( ) { </a> 
<a> for ( ; ; ) { </a> 
<a> boolean <RARE_TOKEN> = false ; </a> 
<a> <RARE_TOKEN> |= <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> |= <RARE_TOKEN> ( ) ; </a> 
<a> if ( ! <RARE_TOKEN> && ! <RARE_TOKEN> ( ) ) { </a> 
<a> break ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> protected <RARE_TOKEN> < Runnable > <RARE_TOKEN> ( ) { </a> 
<a> return new <RARE_TOKEN> < Runnable > ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public <RARE_TOKEN> parent ( ) { </a> 
<a> return parent ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public EventExecutor next ( ) { </a> 
<a> return this ; </a> 
<a> } </a> 
<a> protected void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> protected Runnable <RARE_TOKEN> ( ) { </a> 
<a> assert inEventLoop ( ) ; </a> 
<a> return <RARE_TOKEN> . poll ( ) ; </a> 
<a> } </a> 
<a> protected Runnable <RARE_TOKEN> ( ) throws InterruptedException { </a> 
<a> assert inEventLoop ( ) ; </a> 
<a> if ( <RARE_TOKEN> instanceof <RARE_TOKEN> ) { </a> 
<a> return ( ( <RARE_TOKEN> < Runnable > ) <RARE_TOKEN> ) . <RARE_TOKEN> ( ) ; </a> 
<a> } else { </a> 
<a> throw new UnsupportedOperationException ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> protected Runnable <RARE_TOKEN> ( ) { </a> 
<a> assert inEventLoop ( ) ; </a> 
<a> return <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> protected boolean <RARE_TOKEN> ( ) { </a> 
<a> assert inEventLoop ( ) ; </a> 
<a> return ! <RARE_TOKEN> . isEmpty ( ) ; </a> 
<a> } </a> 
<a> protected void <RARE_TOKEN> ( Runnable task ) { </a> 
<a> if ( task == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> ( ) ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> . add ( task ) ; </a> 
<a> } </a> 
<a> protected boolean <RARE_TOKEN> ( Runnable task ) { </a> 
<a> if ( task == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> return <RARE_TOKEN> . remove ( task ) ; </a> 
<a> } </a> 
<a> protected boolean <RARE_TOKEN> ( ) { </a> 
<a> boolean <RARE_TOKEN> = false ; </a> 
<a> for ( ; ; ) { </a> 
<a> final Runnable task = <RARE_TOKEN> ( ) ; </a> 
<a> if ( task == null ) { </a> 
<a> break ; </a> 
<a> } </a> 
<a> try { </a> 
<a> task . run ( ) ; </a> 
<a> <RARE_TOKEN> = true ; </a> 
<a> } catch ( Throwable t ) { </a> 
<a> logger . warn ( <RARE_TOKEN> task <RARE_TOKEN> an <RARE_TOKEN> , t ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> protected abstract void run ( ) ; </a> 
<a> protected void <RARE_TOKEN> ( ) { </a> 
<a> } </a> 
<a> protected abstract void <RARE_TOKEN> ( boolean inEventLoop ) ; </a> 
<a> @ Override </a> 
<a> public boolean inEventLoop ( ) { </a> 
<a> return inEventLoop ( Thread . currentThread ( ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean inEventLoop ( Thread <RARE_TOKEN> ) { </a> 
<a> return <RARE_TOKEN> == this . <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( final Runnable task ) { </a> 
<a> if ( inEventLoop ( ) ) { </a> 
<a> <RARE_TOKEN> . add ( task ) ; </a> 
<a> } else { </a> 
<a> execute ( new Runnable ( ) { </a> 
<a> @ Override </a> 
<a> public void run ( ) { </a> 
<a> <RARE_TOKEN> . add ( task ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( final Runnable task ) { </a> 
<a> if ( inEventLoop ( ) ) { </a> 
<a> <RARE_TOKEN> . remove ( task ) ; </a> 
<a> } else { </a> 
<a> execute ( new Runnable ( ) { </a> 
<a> @ Override </a> 
<a> public void run ( ) { </a> 
<a> <RARE_TOKEN> . remove ( task ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private boolean <RARE_TOKEN> ( ) { </a> 
<a> boolean <RARE_TOKEN> = false ; </a> 
<a> while ( ! <RARE_TOKEN> . isEmpty ( ) ) { </a> 
<a> List < Runnable > <RARE_TOKEN> = new ArrayList < Runnable > ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . clear ( ) ; </a> 
<a> for ( Runnable task : <RARE_TOKEN> ) { </a> 
<a> try { </a> 
<a> task . run ( ) ; </a> 
<a> <RARE_TOKEN> = true ; </a> 
<a> } catch ( Throwable t ) { </a> 
<a> logger . warn ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> an <RARE_TOKEN> , t ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void shutdown ( ) { </a> 
<a> boolean inEventLoop = inEventLoop ( ) ; </a> 
<a> boolean <RARE_TOKEN> = false ; </a> 
<a> if ( inEventLoop ) { </a> 
<a> synchronized ( <RARE_TOKEN> ) { </a> 
<a> assert state == 1 ; </a> 
<a> state = 2 ; </a> 
<a> <RARE_TOKEN> = true ; </a> 
<a> } </a> 
<a> } else { </a> 
<a> synchronized ( <RARE_TOKEN> ) { </a> 
<a> switch ( state ) { </a> 
<a> case 0 : </a> 
<a> state = 3 ; </a> 
<a> try { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } finally { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> break ; </a> 
<a> case 1 : </a> 
<a> state = 2 ; </a> 
<a> <RARE_TOKEN> = true ; </a> 
<a> break ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( inEventLoop ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public List < Runnable > <RARE_TOKEN> ( ) { </a> 
<a> shutdown ( ) ; </a> 
<a> return Collections . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return state >= 2 ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return state == 3 ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( long timeout , TimeUnit unit ) throws InterruptedException { </a> 
<a> if ( unit == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( inEventLoop ( ) ) { </a> 
<a> throw new IllegalStateException ( <RARE_TOKEN> await <RARE_TOKEN> of the current <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> . <RARE_TOKEN> ( timeout , unit ) ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> return <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void execute ( Runnable task ) { </a> 
<a> if ( task == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( inEventLoop ( ) ) { </a> 
<a> <RARE_TOKEN> ( task ) ; </a> 
<a> <RARE_TOKEN> ( true ) ; </a> 
<a> } else { </a> 
<a> synchronized ( <RARE_TOKEN> ) { </a> 
<a> if ( state == 0 ) { </a> 
<a> state = 1 ; </a> 
<a> <RARE_TOKEN> . start ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( task ) ; </a> 
<a> if ( <RARE_TOKEN> ( ) && <RARE_TOKEN> ( task ) ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( false ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private static void <RARE_TOKEN> ( ) { </a> 
<a> throw new <RARE_TOKEN> ( <RARE_TOKEN> executor <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ScheduledFuture < ? > schedule ( Runnable command , long delay , TimeUnit unit ) { </a> 
<a> return scheduler . schedule ( this , command , delay , unit ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public < V > ScheduledFuture < V > schedule ( <RARE_TOKEN> < V > <RARE_TOKEN> , long delay , TimeUnit unit ) { </a> 
<a> return scheduler . schedule ( this , <RARE_TOKEN> , delay , unit ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ScheduledFuture < ? > <RARE_TOKEN> ( Runnable command , long <RARE_TOKEN> , long period , TimeUnit unit ) { </a> 
<a> return scheduler . <RARE_TOKEN> ( this , command , <RARE_TOKEN> , period , unit ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ScheduledFuture < ? > <RARE_TOKEN> ( Runnable command , long <RARE_TOKEN> , long delay , TimeUnit unit ) { </a> 
<a> return scheduler . <RARE_TOKEN> ( this , command , <RARE_TOKEN> , delay , unit ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . channel ; </a> 
<a> import java . util . concurrent . ThreadFactory ; </a> 
<a> public abstract class <RARE_TOKEN> extends <RARE_TOKEN> implements EventLoop { </a> 
<a> protected <RARE_TOKEN> ( </a> 
<a> <RARE_TOKEN> parent , ThreadFactory threadFactory , <RARE_TOKEN> scheduler ) { </a> 
<a> super ( parent , threadFactory , scheduler ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public <RARE_TOKEN> parent ( ) { </a> 
<a> return ( <RARE_TOKEN> ) super . parent ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public EventLoop next ( ) { </a> 
<a> return ( EventLoop ) super . next ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ChannelFuture <RARE_TOKEN> ( Channel channel ) { </a> 
<a> if ( channel == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> return <RARE_TOKEN> ( channel , channel . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ChannelFuture <RARE_TOKEN> ( final Channel channel , final ChannelFuture future ) { </a> 
<a> if ( inEventLoop ( ) ) { </a> 
<a> channel . unsafe ( ) . <RARE_TOKEN> ( this , future ) ; </a> 
<a> } else { </a> 
<a> execute ( new Runnable ( ) { </a> 
<a> @ Override </a> 
<a> public void run ( ) { </a> 
<a> channel . unsafe ( ) . <RARE_TOKEN> ( <RARE_TOKEN> . this , future ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> } </a> 
<a> return future ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . channel ; </a> 
<a> import java . nio . channels . <RARE_TOKEN> ; </a> 
<a> import java . util . concurrent . <RARE_TOKEN> ; </a> 
<a> import java . util . concurrent . TimeUnit ; </a> 
<a> import java . util . concurrent . <RARE_TOKEN> ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> public <RARE_TOKEN> ( Channel channel ) { </a> 
<a> super ( channel ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public Throwable cause ( ) { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return true ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ChannelFuture sync ( ) throws InterruptedException { </a> 
<a> return this ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ChannelFuture <RARE_TOKEN> ( ) { </a> 
<a> return this ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public Void get ( ) throws InterruptedException , <RARE_TOKEN> { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public Void get ( long timeout , TimeUnit unit ) throws InterruptedException , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . channel ; </a> 
<a> import java . util . concurrent . <RARE_TOKEN> ; </a> 
<a> import java . util . concurrent . TimeUnit ; </a> 
<a> import java . util . concurrent . <RARE_TOKEN> ; </a> 
<a> public class <RARE_TOKEN> implements ChannelFuture . <RARE_TOKEN> { </a> 
<a> private final Channel channel ; </a> 
<a> public <RARE_TOKEN> ( Channel channel ) { </a> 
<a> if ( channel == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> this . channel = channel ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ChannelFuture addListener ( final ChannelFutureListener listener ) { </a> 
<a> fail ( ) ; </a> 
<a> return this ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ChannelFuture <RARE_TOKEN> ( ChannelFutureListener listener ) { </a> 
<a> return this ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ChannelFuture await ( ) throws InterruptedException { </a> 
<a> if ( Thread . <RARE_TOKEN> ( ) ) { </a> 
<a> throw new InterruptedException ( ) ; </a> 
<a> } </a> 
<a> return this ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean await ( long timeout , TimeUnit unit ) throws InterruptedException { </a> 
<a> fail ( ) ; </a> 
<a> return false ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean await ( long <RARE_TOKEN> ) throws InterruptedException { </a> 
<a> fail ( ) ; </a> 
<a> return false ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ChannelFuture <RARE_TOKEN> ( ) { </a> 
<a> fail ( ) ; </a> 
<a> return this ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( long timeout , TimeUnit unit ) { </a> 
<a> fail ( ) ; </a> 
<a> return false ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( long <RARE_TOKEN> ) { </a> 
<a> fail ( ) ; </a> 
<a> return false ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public Channel channel ( ) { </a> 
<a> return channel ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean isCancelled ( ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public Throwable cause ( ) { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ChannelFuture sync ( ) throws InterruptedException { </a> 
<a> fail ( ) ; </a> 
<a> return this ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ChannelFuture <RARE_TOKEN> ( ) { </a> 
<a> fail ( ) ; </a> 
<a> return this ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public Void get ( ) throws InterruptedException , <RARE_TOKEN> { </a> 
<a> fail ( ) ; </a> 
<a> return null ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public Void get ( long timeout , TimeUnit unit ) throws InterruptedException , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> { </a> 
<a> fail ( ) ; </a> 
<a> return null ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( long <RARE_TOKEN> , long current , long <RARE_TOKEN> ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean setFailure ( Throwable cause ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean cancel ( ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean cancel ( boolean <RARE_TOKEN> ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> private static void fail ( ) { </a> 
<a> throw new IllegalStateException ( <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . channel . embedded ; </a> 
<a> import io . netty . buffer . ByteBuf ; </a> 
<a> import io . netty . buffer . <RARE_TOKEN> ; </a> 
<a> import io . netty . buffer . MessageBuf ; </a> 
<a> import io . netty . buffer . Unpooled ; </a> 
<a> import io . netty . channel . <RARE_TOKEN> ; </a> 
<a> import io . netty . channel . <RARE_TOKEN> ; </a> 
<a> import io . netty . channel . ChannelException ; </a> 
<a> import io . netty . channel . ChannelFuture ; </a> 
<a> import io . netty . channel . ChannelHandler ; </a> 
<a> import io . netty . channel . ChannelHandlerContext ; </a> 
<a> import io . netty . channel . <RARE_TOKEN> ; </a> 
<a> import io . netty . channel . <RARE_TOKEN> ; </a> 
<a> import io . netty . channel . <RARE_TOKEN> ; </a> 
<a> import io . netty . channel . ChannelPipeline ; </a> 
<a> import io . netty . channel . <RARE_TOKEN> ; </a> 
<a> import io . netty . channel . EventLoop ; </a> 
<a> import io . netty . logging . InternalLogger ; </a> 
<a> import io . netty . logging . InternalLoggerFactory ; </a> 
<a> import java . net . SocketAddress ; </a> 
<a> public abstract class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> private static final InternalLogger logger = InternalLoggerFactory . getInstance ( <RARE_TOKEN> . class ) ; </a> 
<a> private final <RARE_TOKEN> config = new <RARE_TOKEN> ( ) ; </a> 
<a> private final SocketAddress localAddress = new <RARE_TOKEN> ( ) ; </a> 
<a> private final SocketAddress remoteAddress = new <RARE_TOKEN> ( ) ; </a> 
<a> private final MessageBuf < Object > <RARE_TOKEN> = Unpooled . <RARE_TOKEN> ( ) ; </a> 
<a> private final ByteBuf <RARE_TOKEN> = Unpooled . buffer ( ) ; </a> 
<a> protected final Object <RARE_TOKEN> ; </a> 
<a> private Throwable <RARE_TOKEN> ; </a> 
<a> private int state ; </a> 
<a> <RARE_TOKEN> ( Object <RARE_TOKEN> , ChannelHandler ... <RARE_TOKEN> ) { </a> 
<a> super ( null , null ) ; </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> int <RARE_TOKEN> = 0 ; </a> 
<a> boolean <RARE_TOKEN> = false ; </a> 
<a> ChannelPipeline p = pipeline ( ) ; </a> 
<a> for ( ChannelHandler h : <RARE_TOKEN> ) { </a> 
<a> if ( h == null ) { </a> 
<a> break ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> ++ ; </a> 
<a> p . addLast ( h ) ; </a> 
<a> if ( h instanceof <RARE_TOKEN> || h instanceof <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> = true ; </a> 
<a> } </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> == 0 ) { </a> 
<a> throw new IllegalArgumentException ( <RARE_TOKEN> is <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( ! <RARE_TOKEN> ) { </a> 
<a> throw new IllegalArgumentException ( <RARE_TOKEN> <RARE_TOKEN> not <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> p . addLast ( new <RARE_TOKEN> ( ) , new <RARE_TOKEN> ( ) ) ; </a> 
<a> new <RARE_TOKEN> ( ) . <RARE_TOKEN> ( this ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public <RARE_TOKEN> config ( ) { </a> 
<a> return config ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean isOpen ( ) { </a> 
<a> return state < 2 ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean isActive ( ) { </a> 
<a> return state == 1 ; </a> 
<a> } </a> 
<a> public MessageBuf < Object > <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public ByteBuf <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public Object <RARE_TOKEN> ( ) { </a> 
<a> if ( <RARE_TOKEN> . readable ( ) ) { </a> 
<a> try { </a> 
<a> return <RARE_TOKEN> . readBytes ( <RARE_TOKEN> . readableBytes ( ) ) ; </a> 
<a> } finally { </a> 
<a> <RARE_TOKEN> . clear ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> return <RARE_TOKEN> . poll ( ) ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> Throwable t = <RARE_TOKEN> ; </a> 
<a> if ( t == null ) { </a> 
<a> return ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> = null ; </a> 
<a> if ( t instanceof <RARE_TOKEN> ) { </a> 
<a> throw ( <RARE_TOKEN> ) t ; </a> 
<a> } </a> 
<a> if ( t instanceof Error ) { </a> 
<a> throw ( Error ) t ; </a> 
<a> } </a> 
<a> throw new ChannelException ( t ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected boolean <RARE_TOKEN> ( EventLoop loop ) { </a> 
<a> return loop instanceof <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected SocketAddress <RARE_TOKEN> ( ) { </a> 
<a> return isActive ( ) ? localAddress : null ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected SocketAddress <RARE_TOKEN> ( ) { </a> 
<a> return isActive ( ) ? remoteAddress : null ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected Runnable <RARE_TOKEN> ( ) throws Exception { </a> 
<a> state = 1 ; </a> 
<a> return null ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( SocketAddress localAddress ) throws Exception { </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( ) throws Exception { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( ) throws Exception { </a> 
<a> state = 2 ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( ) throws Exception { </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected <RARE_TOKEN> <RARE_TOKEN> ( ) { </a> 
<a> return new <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected boolean <RARE_TOKEN> ( ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> private class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> @ Override </a> 
<a> public void connect ( SocketAddress remoteAddress , </a> 
<a> SocketAddress localAddress , ChannelFuture future ) { </a> 
<a> future . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> } </a> 
<a> } </a> 
<a> private final class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> @ Override </a> 
<a> public <RARE_TOKEN> <RARE_TOKEN> ( ChannelHandlerContext ctx ) throws Exception { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void inboundBufferUpdated ( ChannelHandlerContext ctx ) throws Exception { </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void exceptionCaught ( ChannelHandlerContext ctx , Throwable cause ) </a> 
<a> throws Exception { </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> <RARE_TOKEN> = cause ; </a> 
<a> } else { </a> 
<a> logger . warn ( </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> one exception <RARE_TOKEN> <RARE_TOKEN> " + </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> the <RARE_TOKEN> one <RARE_TOKEN> log <RARE_TOKEN> , cause ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> private final class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> @ Override </a> 
<a> public <RARE_TOKEN> <RARE_TOKEN> ( ChannelHandlerContext ctx ) throws Exception { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void inboundBufferUpdated ( ChannelHandlerContext ctx ) throws Exception { </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . channel . embedded ; </a> 
<a> import io . netty . buffer . ByteBuf ; </a> 
<a> import io . netty . buffer . ChannelBufType ; </a> 
<a> import io . netty . buffer . Unpooled ; </a> 
<a> import io . netty . channel . ChannelHandler ; </a> 
<a> import io . netty . channel . ChannelMetadata ; </a> 
<a> public class EmbeddedByteChannel extends <RARE_TOKEN> { </a> 
<a> private static final ChannelMetadata <RARE_TOKEN> = new ChannelMetadata ( ChannelBufType . <RARE_TOKEN> , false ) ; </a> 
<a> public EmbeddedByteChannel ( ChannelHandler ... <RARE_TOKEN> ) { </a> 
<a> super ( Unpooled . buffer ( ) , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ChannelMetadata <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public ByteBuf <RARE_TOKEN> ( ) { </a> 
<a> return pipeline ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> public ByteBuf <RARE_TOKEN> ( ) { </a> 
<a> return ( ByteBuf ) <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public ByteBuf readOutbound ( ) { </a> 
<a> if ( ! <RARE_TOKEN> ( ) . readable ( ) ) { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> try { </a> 
<a> return <RARE_TOKEN> ( ) . readBytes ( <RARE_TOKEN> ( ) . readableBytes ( ) ) ; </a> 
<a> } finally { </a> 
<a> <RARE_TOKEN> ( ) . clear ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public boolean writeInbound ( ByteBuf data ) { </a> 
<a> <RARE_TOKEN> ( ) . writeBytes ( data ) ; </a> 
<a> pipeline ( ) . fireInboundBufferUpdated ( ) ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> return <RARE_TOKEN> ( ) . readable ( ) || ! <RARE_TOKEN> ( ) . isEmpty ( ) ; </a> 
<a> } </a> 
<a> public boolean <RARE_TOKEN> ( Object msg ) { </a> 
<a> write ( msg ) ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> return <RARE_TOKEN> ( ) . readable ( ) ; </a> 
<a> } </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> close ( ) ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> return <RARE_TOKEN> ( ) . readable ( ) || ! <RARE_TOKEN> ( ) . isEmpty ( ) || </a> 
<a> <RARE_TOKEN> ( ) . readable ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( ByteBuf buf ) throws Exception { </a> 
<a> if ( ! <RARE_TOKEN> ( ) . readable ( ) ) { </a> 
<a> <RARE_TOKEN> ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( ) . writeBytes ( buf ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . channel . embedded ; </a> 
<a> import io . netty . channel . Channel ; </a> 
<a> import io . netty . channel . ChannelFuture ; </a> 
<a> import io . netty . channel . EventLoop ; </a> 
<a> import io . netty . channel . <RARE_TOKEN> ; </a> 
<a> import java . util . Collections ; </a> 
<a> import java . util . List ; </a> 
<a> import java . util . concurrent . <RARE_TOKEN> ; </a> 
<a> import java . util . concurrent . <RARE_TOKEN> ; </a> 
<a> import java . util . concurrent . ScheduledFuture ; </a> 
<a> import java . util . concurrent . TimeUnit ; </a> 
<a> class <RARE_TOKEN> extends <RARE_TOKEN> implements EventLoop { </a> 
<a> @ Override </a> 
<a> public ScheduledFuture < ? > schedule ( Runnable command , long delay , </a> 
<a> TimeUnit unit ) { </a> 
<a> throw new UnsupportedOperationException ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public < V > ScheduledFuture < V > schedule ( <RARE_TOKEN> < V > <RARE_TOKEN> , long delay , </a> 
<a> TimeUnit unit ) { </a> 
<a> throw new UnsupportedOperationException ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ScheduledFuture < ? > <RARE_TOKEN> ( Runnable command , </a> 
<a> long <RARE_TOKEN> , long period , TimeUnit unit ) { </a> 
<a> throw new UnsupportedOperationException ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ScheduledFuture < ? > <RARE_TOKEN> ( Runnable command , </a> 
<a> long <RARE_TOKEN> , long delay , TimeUnit unit ) { </a> 
<a> throw new UnsupportedOperationException ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void shutdown ( ) { </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public List < Runnable > <RARE_TOKEN> ( ) { </a> 
<a> return Collections . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( long timeout , TimeUnit unit ) </a> 
<a> throws InterruptedException { </a> 
<a> Thread . sleep ( unit . <RARE_TOKEN> ( timeout ) ) ; </a> 
<a> return false ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void execute ( Runnable command ) { </a> 
<a> command . run ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ChannelFuture <RARE_TOKEN> ( Channel channel ) { </a> 
<a> return <RARE_TOKEN> ( channel , channel . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ChannelFuture <RARE_TOKEN> ( Channel channel , ChannelFuture future ) { </a> 
<a> channel . unsafe ( ) . <RARE_TOKEN> ( this , future ) ; </a> 
<a> return future ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean inEventLoop ( ) { </a> 
<a> return true ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean inEventLoop ( Thread <RARE_TOKEN> ) { </a> 
<a> return true ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public EventLoop next ( ) { </a> 
<a> return this ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public <RARE_TOKEN> parent ( ) { </a> 
<a> return this ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . channel . embedded ; </a> 
<a> import io . netty . buffer . ChannelBufType ; </a> 
<a> import io . netty . buffer . MessageBuf ; </a> 
<a> import io . netty . buffer . Unpooled ; </a> 
<a> import io . netty . channel . ChannelHandler ; </a> 
<a> import io . netty . channel . ChannelMetadata ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> private static final ChannelMetadata <RARE_TOKEN> = new ChannelMetadata ( ChannelBufType . <RARE_TOKEN> , false ) ; </a> 
<a> public <RARE_TOKEN> ( ChannelHandler ... <RARE_TOKEN> ) { </a> 
<a> super ( Unpooled . <RARE_TOKEN> ( ) , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ChannelMetadata <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public MessageBuf < Object > <RARE_TOKEN> ( ) { </a> 
<a> return pipeline ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ SuppressWarnings ( "unchecked" ) </a> 
<a> public MessageBuf < Object > <RARE_TOKEN> ( ) { </a> 
<a> return ( MessageBuf < Object > ) <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public Object readOutbound ( ) { </a> 
<a> return <RARE_TOKEN> ( ) . poll ( ) ; </a> 
<a> } </a> 
<a> public boolean writeInbound ( Object msg ) { </a> 
<a> <RARE_TOKEN> ( ) . add ( msg ) ; </a> 
<a> pipeline ( ) . fireInboundBufferUpdated ( ) ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> return <RARE_TOKEN> ( ) . readable ( ) || ! <RARE_TOKEN> ( ) . isEmpty ( ) ; </a> 
<a> } </a> 
<a> public boolean <RARE_TOKEN> ( Object msg ) { </a> 
<a> write ( msg ) ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> return ! <RARE_TOKEN> ( ) . isEmpty ( ) ; </a> 
<a> } </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> close ( ) ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> return <RARE_TOKEN> ( ) . readable ( ) || ! <RARE_TOKEN> ( ) . isEmpty ( ) || </a> 
<a> ! <RARE_TOKEN> ( ) . isEmpty ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( MessageBuf < Object > buf ) throws Exception { </a> 
<a> buf . <RARE_TOKEN> ( <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . channel . embedded ; </a> 
<a> import java . net . SocketAddress ; </a> 
<a> class <RARE_TOKEN> extends SocketAddress { </a> 
<a> private static final long serialVersionUID = <RARE_TOKEN> ; </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . channel . embedded ; </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . channel . group ; </a> 
<a> import io . netty . bootstrap . ServerBootstrap ; </a> 
<a> import io . netty . buffer . ByteBuf ; </a> 
<a> import io . netty . buffer . Unpooled ; </a> 
<a> import io . netty . channel . Channel ; </a> 
<a> import io . netty . channel . ChannelHandlerContext ; </a> 
<a> import io . netty . channel . <RARE_TOKEN> ; </a> 
<a> import io . netty . util . CharsetUtil ; </a> 
<a> import java . util . Set ; </a> 
<a> public interface <RARE_TOKEN> extends Set < Channel > , <RARE_TOKEN> < <RARE_TOKEN> > { </a> 
<a> String name ( ) ; </a> 
<a> Channel <RARE_TOKEN> ( Integer id ) ; </a> 
<a> <RARE_TOKEN> write ( Object message ) ; </a> 
<a> <RARE_TOKEN> disconnect ( ) ; </a> 
<a> <RARE_TOKEN> close ( ) ; </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . channel . group ; </a> 
<a> import io . netty . channel . Channel ; </a> 
<a> import io . netty . channel . ChannelFuture ; </a> 
<a> import io . netty . channel . ChannelHandler ; </a> 
<a> import io . netty . channel . ChannelHandlerContext ; </a> 
<a> import java . util . Iterator ; </a> 
<a> import java . util . concurrent . TimeUnit ; </a> 
<a> public interface <RARE_TOKEN> extends <RARE_TOKEN> < ChannelFuture > { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> ( ) ; </a> 
<a> ChannelFuture <RARE_TOKEN> ( Integer <RARE_TOKEN> ) ; </a> 
<a> ChannelFuture <RARE_TOKEN> ( Channel channel ) ; </a> 
<a> boolean <RARE_TOKEN> ( ) ; </a> 
<a> boolean <RARE_TOKEN> ( ) ; </a> 
<a> boolean <RARE_TOKEN> ( ) ; </a> 
<a> boolean <RARE_TOKEN> ( ) ; </a> 
<a> boolean <RARE_TOKEN> ( ) ; </a> 
<a> void addListener ( <RARE_TOKEN> listener ) ; </a> 
<a> void <RARE_TOKEN> ( <RARE_TOKEN> listener ) ; </a> 
<a> <RARE_TOKEN> await ( ) throws InterruptedException ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> ( ) ; </a> 
<a> boolean await ( long timeout , TimeUnit unit ) throws InterruptedException ; </a> 
<a> boolean await ( long <RARE_TOKEN> ) throws InterruptedException ; </a> 
<a> boolean <RARE_TOKEN> ( long timeout , TimeUnit unit ) ; </a> 
<a> boolean <RARE_TOKEN> ( long <RARE_TOKEN> ) ; </a> 
<a> @ Override </a> 
<a> Iterator < ChannelFuture > <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . channel . group ; </a> 
<a> import java . util . <RARE_TOKEN> ; </a> 
<a> public interface <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> void <RARE_TOKEN> ( <RARE_TOKEN> future ) throws Exception ; </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . channel . group ; </a> 
<a> import java . util . Iterator ; </a> 
<a> import java . util . <RARE_TOKEN> ; </a> 
<a> final class <RARE_TOKEN> < E > implements Iterator < E > { </a> 
<a> private final Iterator < E > <RARE_TOKEN> ; </a> 
<a> private final Iterator < E > <RARE_TOKEN> ; </a> 
<a> private Iterator < E > <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> ( Iterator < E > <RARE_TOKEN> , Iterator < E > <RARE_TOKEN> ) { </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> boolean <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> if ( <RARE_TOKEN> ) { </a> 
<a> return true ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> == <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> return <RARE_TOKEN> ( ) ; </a> 
<a> } else { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public E next ( ) { </a> 
<a> try { </a> 
<a> return <RARE_TOKEN> . next ( ) ; </a> 
<a> } catch ( <RARE_TOKEN> e ) { </a> 
<a> if ( <RARE_TOKEN> == <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> return next ( ) ; </a> 
<a> } else { </a> 
<a> throw e ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void remove ( ) { </a> 
<a> <RARE_TOKEN> . remove ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . channel . group ; </a> 
<a> import io . netty . buffer . ByteBuf ; </a> 
<a> import io . netty . channel . Channel ; </a> 
<a> import io . netty . channel . ChannelFuture ; </a> 
<a> import io . netty . channel . ChannelFutureListener ; </a> 
<a> import io . netty . channel . <RARE_TOKEN> ; </a> 
<a> import java . util . <RARE_TOKEN> ; </a> 
<a> import java . util . ArrayList ; </a> 
<a> import java . util . Collection ; </a> 
<a> import java . util . Iterator ; </a> 
<a> import java . util . <RARE_TOKEN> ; </a> 
<a> import java . util . Map ; </a> 
<a> import java . util . concurrent . ConcurrentHashMap ; </a> 
<a> import java . util . concurrent . <RARE_TOKEN> ; </a> 
<a> import java . util . concurrent . atomic . AtomicInteger ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> < Channel > implements <RARE_TOKEN> { </a> 
<a> private static final AtomicInteger <RARE_TOKEN> = new AtomicInteger ( ) ; </a> 
<a> private final String name ; </a> 
<a> private final <RARE_TOKEN> < Integer , Channel > <RARE_TOKEN> = new ConcurrentHashMap < Integer , Channel > ( ) ; </a> 
<a> private final <RARE_TOKEN> < Integer , Channel > <RARE_TOKEN> = new ConcurrentHashMap < Integer , Channel > ( ) ; </a> 
<a> private final ChannelFutureListener <RARE_TOKEN> = new ChannelFutureListener ( ) { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ChannelFuture future ) throws Exception { </a> 
<a> remove ( future . channel ( ) ) ; </a> 
<a> } </a> 
<a> } ; </a> 
<a> public <RARE_TOKEN> ( ) { </a> 
<a> this ( <RARE_TOKEN> + Integer . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( String name ) { </a> 
<a> if ( name == null ) { </a> 
<a> throw new NullPointerException ( "name" ) ; </a> 
<a> } </a> 
<a> this . name = name ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public String name ( ) { </a> 
<a> return name ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean isEmpty ( ) { </a> 
<a> return <RARE_TOKEN> . isEmpty ( ) && <RARE_TOKEN> . isEmpty ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int size ( ) { </a> 
<a> return <RARE_TOKEN> . size ( ) + <RARE_TOKEN> . size ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public Channel <RARE_TOKEN> ( Integer id ) { </a> 
<a> Channel c = <RARE_TOKEN> . get ( id ) ; </a> 
<a> if ( c != null ) { </a> 
<a> return c ; </a> 
<a> } else { </a> 
<a> return <RARE_TOKEN> . get ( id ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean contains ( Object o ) { </a> 
<a> if ( o instanceof Integer ) { </a> 
<a> return <RARE_TOKEN> . containsKey ( o ) || <RARE_TOKEN> . containsKey ( o ) ; </a> 
<a> } else if ( o instanceof Channel ) { </a> 
<a> Channel c = ( Channel ) o ; </a> 
<a> if ( o instanceof <RARE_TOKEN> ) { </a> 
<a> return <RARE_TOKEN> . containsKey ( c . id ( ) ) ; </a> 
<a> } else { </a> 
<a> return <RARE_TOKEN> . containsKey ( c . id ( ) ) ; </a> 
<a> } </a> 
<a> } else { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean add ( Channel channel ) { </a> 
<a> <RARE_TOKEN> < Integer , Channel > map = </a> 
<a> channel instanceof <RARE_TOKEN> ? <RARE_TOKEN> : <RARE_TOKEN> ; </a> 
<a> boolean <RARE_TOKEN> = map . <RARE_TOKEN> ( channel . id ( ) , channel ) == null ; </a> 
<a> if ( <RARE_TOKEN> ) { </a> 
<a> channel . <RARE_TOKEN> ( ) . addListener ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean remove ( Object o ) { </a> 
<a> Channel c = null ; </a> 
<a> if ( o instanceof Integer ) { </a> 
<a> c = <RARE_TOKEN> . remove ( o ) ; </a> 
<a> if ( c == null ) { </a> 
<a> c = <RARE_TOKEN> . remove ( o ) ; </a> 
<a> } </a> 
<a> } else if ( o instanceof Channel ) { </a> 
<a> c = ( Channel ) o ; </a> 
<a> if ( c instanceof <RARE_TOKEN> ) { </a> 
<a> c = <RARE_TOKEN> . remove ( c . id ( ) ) ; </a> 
<a> } else { </a> 
<a> c = <RARE_TOKEN> . remove ( c . id ( ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> if ( c == null ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> c . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> return true ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void clear ( ) { </a> 
<a> <RARE_TOKEN> . clear ( ) ; </a> 
<a> <RARE_TOKEN> . clear ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public Iterator < Channel > <RARE_TOKEN> ( ) { </a> 
<a> return new <RARE_TOKEN> < Channel > ( </a> 
<a> <RARE_TOKEN> . values ( ) . <RARE_TOKEN> ( ) , </a> 
<a> <RARE_TOKEN> . values ( ) . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public Object [ ] <RARE_TOKEN> ( ) { </a> 
<a> Collection < Channel > channels = new ArrayList < Channel > ( size ( ) ) ; </a> 
<a> channels . <RARE_TOKEN> ( <RARE_TOKEN> . values ( ) ) ; </a> 
<a> channels . <RARE_TOKEN> ( <RARE_TOKEN> . values ( ) ) ; </a> 
<a> return channels . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public < T > T [ ] <RARE_TOKEN> ( T [ ] a ) { </a> 
<a> Collection < Channel > channels = new ArrayList < Channel > ( size ( ) ) ; </a> 
<a> channels . <RARE_TOKEN> ( <RARE_TOKEN> . values ( ) ) ; </a> 
<a> channels . <RARE_TOKEN> ( <RARE_TOKEN> . values ( ) ) ; </a> 
<a> return channels . <RARE_TOKEN> ( a ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public <RARE_TOKEN> close ( ) { </a> 
<a> Map < Integer , ChannelFuture > futures = </a> 
<a> new <RARE_TOKEN> < Integer , ChannelFuture > ( size ( ) ) ; </a> 
<a> for ( Channel c : <RARE_TOKEN> . values ( ) ) { </a> 
<a> futures . put ( c . id ( ) , c . close ( ) . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> for ( Channel c : <RARE_TOKEN> . values ( ) ) { </a> 
<a> futures . put ( c . id ( ) , c . close ( ) ) ; </a> 
<a> } </a> 
<a> return new <RARE_TOKEN> ( this , futures ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public <RARE_TOKEN> disconnect ( ) { </a> 
<a> Map < Integer , ChannelFuture > futures = </a> 
<a> new <RARE_TOKEN> < Integer , ChannelFuture > ( size ( ) ) ; </a> 
<a> for ( Channel c : <RARE_TOKEN> . values ( ) ) { </a> 
<a> futures . put ( c . id ( ) , c . disconnect ( ) ) ; </a> 
<a> } </a> 
<a> for ( Channel c : <RARE_TOKEN> . values ( ) ) { </a> 
<a> futures . put ( c . id ( ) , c . disconnect ( ) ) ; </a> 
<a> } </a> 
<a> return new <RARE_TOKEN> ( this , futures ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public <RARE_TOKEN> write ( Object message ) { </a> 
<a> Map < Integer , ChannelFuture > futures = </a> 
<a> new <RARE_TOKEN> < Integer , ChannelFuture > ( size ( ) ) ; </a> 
<a> if ( message instanceof ByteBuf ) { </a> 
<a> ByteBuf buf = ( ByteBuf ) message ; </a> 
<a> for ( Channel c : <RARE_TOKEN> . values ( ) ) { </a> 
<a> futures . put ( c . id ( ) , c . write ( buf . <RARE_TOKEN> ( ) ) ) ; </a> 
<a> } </a> 
<a> } else { </a> 
<a> for ( Channel c : <RARE_TOKEN> . values ( ) ) { </a> 
<a> futures . put ( c . id ( ) , c . write ( message ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> return new <RARE_TOKEN> ( this , futures ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int hashCode ( ) { </a> 
<a> return System . <RARE_TOKEN> ( this ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean equals ( Object o ) { </a> 
<a> return this == o ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int <RARE_TOKEN> ( <RARE_TOKEN> o ) { </a> 
<a> int v = name ( ) . <RARE_TOKEN> ( o . name ( ) ) ; </a> 
<a> if ( v != 0 ) { </a> 
<a> return v ; </a> 
<a> } </a> 
<a> return System . <RARE_TOKEN> ( this ) - System . <RARE_TOKEN> ( o ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public String toString ( ) { </a> 
<a> return getClass ( ) . getSimpleName ( ) + </a> 
<a> <RARE_TOKEN> " + name ( ) + ", <RARE_TOKEN> " + size ( ) + <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . channel . group ; </a> 
<a> import static java . util . concurrent . TimeUnit . * ; </a> 
<a> import io . netty . channel . Channel ; </a> 
<a> import io . netty . channel . ChannelFuture ; </a> 
<a> import io . netty . channel . ChannelFutureListener ; </a> 
<a> import io . netty . logging . InternalLogger ; </a> 
<a> import io . netty . logging . InternalLoggerFactory ; </a> 
<a> import java . util . ArrayList ; </a> 
<a> import java . util . Collection ; </a> 
<a> import java . util . Collections ; </a> 
<a> import java . util . Iterator ; </a> 
<a> import java . util . <RARE_TOKEN> ; </a> 
<a> import java . util . List ; </a> 
<a> import java . util . Map ; </a> 
<a> import java . util . concurrent . TimeUnit ; </a> 
<a> public class <RARE_TOKEN> implements <RARE_TOKEN> { </a> 
<a> private static final InternalLogger logger = </a> 
<a> InternalLoggerFactory . getInstance ( <RARE_TOKEN> . class ) ; </a> 
<a> private final <RARE_TOKEN> group ; </a> 
<a> final Map < Integer , ChannelFuture > futures ; </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> private List < <RARE_TOKEN> > <RARE_TOKEN> ; </a> 
<a> private boolean done ; </a> 
<a> int <RARE_TOKEN> ; </a> 
<a> int <RARE_TOKEN> ; </a> 
<a> private int <RARE_TOKEN> ; </a> 
<a> private final ChannelFutureListener <RARE_TOKEN> = new ChannelFutureListener ( ) { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ChannelFuture future ) throws Exception { </a> 
<a> boolean success = future . <RARE_TOKEN> ( ) ; </a> 
<a> boolean <RARE_TOKEN> ; </a> 
<a> synchronized ( <RARE_TOKEN> . this ) { </a> 
<a> if ( success ) { </a> 
<a> <RARE_TOKEN> ++ ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> ++ ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> + <RARE_TOKEN> == futures . size ( ) ; </a> 
<a> assert <RARE_TOKEN> + <RARE_TOKEN> <= futures . size ( ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } ; </a> 
<a> public <RARE_TOKEN> ( <RARE_TOKEN> group , Collection < ChannelFuture > futures ) { </a> 
<a> if ( group == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( futures == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> this . group = group ; </a> 
<a> Map < Integer , ChannelFuture > <RARE_TOKEN> = new <RARE_TOKEN> < Integer , ChannelFuture > ( ) ; </a> 
<a> for ( ChannelFuture f : futures ) { </a> 
<a> <RARE_TOKEN> . put ( f . channel ( ) . id ( ) , f ) ; </a> 
<a> } </a> 
<a> this . futures = Collections . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> for ( ChannelFuture f : this . futures . values ( ) ) { </a> 
<a> f . addListener ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( this . futures . isEmpty ( ) ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> group , Map < Integer , ChannelFuture > futures ) { </a> 
<a> this . group = group ; </a> 
<a> this . futures = Collections . <RARE_TOKEN> ( futures ) ; </a> 
<a> for ( ChannelFuture f : this . futures . values ( ) ) { </a> 
<a> f . addListener ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( this . futures . isEmpty ( ) ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public <RARE_TOKEN> <RARE_TOKEN> ( ) { </a> 
<a> return group ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ChannelFuture <RARE_TOKEN> ( Integer <RARE_TOKEN> ) { </a> 
<a> return futures . get ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ChannelFuture <RARE_TOKEN> ( Channel channel ) { </a> 
<a> return futures . get ( channel . id ( ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public Iterator < ChannelFuture > <RARE_TOKEN> ( ) { </a> 
<a> return futures . values ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public synchronized boolean <RARE_TOKEN> ( ) { </a> 
<a> return done ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public synchronized boolean <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> == futures . size ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public synchronized boolean <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> != 0 && <RARE_TOKEN> != futures . size ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public synchronized boolean <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> != 0 && <RARE_TOKEN> != futures . size ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public synchronized boolean <RARE_TOKEN> ( ) { </a> 
<a> int <RARE_TOKEN> = futures . size ( ) ; </a> 
<a> return <RARE_TOKEN> != 0 && <RARE_TOKEN> == <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void addListener ( <RARE_TOKEN> listener ) { </a> 
<a> if ( listener == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> boolean <RARE_TOKEN> = false ; </a> 
<a> synchronized ( this ) { </a> 
<a> if ( done ) { </a> 
<a> <RARE_TOKEN> = true ; </a> 
<a> } else { </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> <RARE_TOKEN> = listener ; </a> 
<a> } else { </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> <RARE_TOKEN> = new ArrayList < <RARE_TOKEN> > ( 1 ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> . add ( listener ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( listener ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( <RARE_TOKEN> listener ) { </a> 
<a> if ( listener == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> synchronized ( this ) { </a> 
<a> if ( ! done ) { </a> 
<a> if ( listener == <RARE_TOKEN> ) { </a> 
<a> if ( <RARE_TOKEN> != null && ! <RARE_TOKEN> . isEmpty ( ) ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . remove ( 0 ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> = null ; </a> 
<a> } </a> 
<a> } else if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> . remove ( listener ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public <RARE_TOKEN> await ( ) throws InterruptedException { </a> 
<a> if ( Thread . <RARE_TOKEN> ( ) ) { </a> 
<a> throw new InterruptedException ( ) ; </a> 
<a> } </a> 
<a> synchronized ( this ) { </a> 
<a> while ( ! done ) { </a> 
<a> <RARE_TOKEN> ++ ; </a> 
<a> try { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } finally { </a> 
<a> <RARE_TOKEN> -- ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> return this ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean await ( long timeout , TimeUnit unit ) </a> 
<a> throws InterruptedException { </a> 
<a> return <RARE_TOKEN> ( unit . <RARE_TOKEN> ( timeout ) , true ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean await ( long <RARE_TOKEN> ) throws InterruptedException { </a> 
<a> return <RARE_TOKEN> ( MILLISECONDS . <RARE_TOKEN> ( <RARE_TOKEN> ) , true ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public <RARE_TOKEN> <RARE_TOKEN> ( ) { </a> 
<a> boolean <RARE_TOKEN> = false ; </a> 
<a> synchronized ( this ) { </a> 
<a> while ( ! done ) { </a> 
<a> <RARE_TOKEN> ++ ; </a> 
<a> try { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } catch ( InterruptedException e ) { </a> 
<a> <RARE_TOKEN> = true ; </a> 
<a> } finally { </a> 
<a> <RARE_TOKEN> -- ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> ) { </a> 
<a> Thread . currentThread ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> return this ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( long timeout , TimeUnit unit ) { </a> 
<a> try { </a> 
<a> return <RARE_TOKEN> ( unit . <RARE_TOKEN> ( timeout ) , false ) ; </a> 
<a> } catch ( InterruptedException e ) { </a> 
<a> throw new <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( long <RARE_TOKEN> ) { </a> 
<a> try { </a> 
<a> return <RARE_TOKEN> ( MILLISECONDS . <RARE_TOKEN> ( <RARE_TOKEN> ) , false ) ; </a> 
<a> } catch ( InterruptedException e ) { </a> 
<a> throw new <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private boolean <RARE_TOKEN> ( long <RARE_TOKEN> , boolean <RARE_TOKEN> ) throws InterruptedException { </a> 
<a> if ( <RARE_TOKEN> && Thread . <RARE_TOKEN> ( ) ) { </a> 
<a> throw new InterruptedException ( ) ; </a> 
<a> } </a> 
<a> long <RARE_TOKEN> = <RARE_TOKEN> <= 0 ? 0 : System . <RARE_TOKEN> ( ) ; </a> 
<a> long <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> boolean <RARE_TOKEN> = false ; </a> 
<a> try { </a> 
<a> synchronized ( this ) { </a> 
<a> if ( done ) { </a> 
<a> return done ; </a> 
<a> } else if ( <RARE_TOKEN> <= 0 ) { </a> 
<a> return done ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> ++ ; </a> 
<a> try { </a> 
<a> for ( ; ; ) { </a> 
<a> try { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> / <RARE_TOKEN> , ( int ) ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ) ; </a> 
<a> } catch ( InterruptedException e ) { </a> 
<a> if ( <RARE_TOKEN> ) { </a> 
<a> throw e ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> = true ; </a> 
<a> } </a> 
<a> } </a> 
<a> if ( done ) { </a> 
<a> return true ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> - ( System . <RARE_TOKEN> ( ) - <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> <= 0 ) { </a> 
<a> return done ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } finally { </a> 
<a> <RARE_TOKEN> -- ; </a> 
<a> } </a> 
<a> } </a> 
<a> } finally { </a> 
<a> if ( <RARE_TOKEN> ) { </a> 
<a> Thread . currentThread ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> void <RARE_TOKEN> ( ) { </a> 
<a> synchronized ( this ) { </a> 
<a> if ( done ) { </a> 
<a> return ; </a> 
<a> } </a> 
<a> done = true ; </a> 
<a> if ( <RARE_TOKEN> > 0 ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( ) { </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> = null ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> for ( <RARE_TOKEN> l : <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( l ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> = null ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( <RARE_TOKEN> l ) { </a> 
<a> try { </a> 
<a> l . <RARE_TOKEN> ( this ) ; </a> 
<a> } catch ( Throwable t ) { </a> 
<a> if ( logger . <RARE_TOKEN> ( ) ) { </a> 
<a> logger . warn ( </a> 
<a> <RARE_TOKEN> exception <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> " + </a> 
<a> ChannelFutureListener . class . getSimpleName ( ) + <RARE_TOKEN> , t ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . channel . group ; </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . channel . <RARE_TOKEN> ; </a> 
<a> import io . netty . channel . Channel ; </a> 
<a> import java . net . SocketAddress ; </a> 
<a> public final class LocalAddress extends SocketAddress implements <RARE_TOKEN> < LocalAddress > { </a> 
<a> private static final long serialVersionUID = <RARE_TOKEN> ; </a> 
<a> public static final LocalAddress <RARE_TOKEN> = new LocalAddress ( <RARE_TOKEN> ) ; </a> 
<a> private final String id ; </a> 
<a> private final String <RARE_TOKEN> ; </a> 
<a> LocalAddress ( Channel channel ) { </a> 
<a> StringBuilder buf = new StringBuilder ( 16 ) ; </a> 
<a> buf . append ( <RARE_TOKEN> ) ; </a> 
<a> buf . append ( Long . <RARE_TOKEN> ( channel . id ( ) . <RARE_TOKEN> ( ) & <RARE_TOKEN> | <RARE_TOKEN> ) ) ; </a> 
<a> buf . <RARE_TOKEN> ( 7 , <RARE_TOKEN> ) ; </a> 
<a> id = buf . substring ( 6 ) ; </a> 
<a> <RARE_TOKEN> = buf . toString ( ) ; </a> 
<a> } </a> 
<a> public LocalAddress ( String id ) { </a> 
<a> if ( id == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> id = id . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> if ( id . length ( ) == 0 ) { </a> 
<a> throw new IllegalArgumentException ( <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> this . id = id ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> + id ; </a> 
<a> } </a> 
<a> public String id ( ) { </a> 
<a> return id ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int hashCode ( ) { </a> 
<a> return id . hashCode ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean equals ( Object o ) { </a> 
<a> if ( ! ( o instanceof LocalAddress ) ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> return id . equals ( ( ( LocalAddress ) o ) . id ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int <RARE_TOKEN> ( LocalAddress o ) { </a> 
<a> return id . <RARE_TOKEN> ( o . id ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public String toString ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . channel . <RARE_TOKEN> ; </a> 
<a> import io . netty . buffer . ChannelBufType ; </a> 
<a> import io . netty . buffer . MessageBuf ; </a> 
<a> import io . netty . channel . <RARE_TOKEN> ; </a> 
<a> import io . netty . channel . Channel ; </a> 
<a> import io . netty . channel . <RARE_TOKEN> ; </a> 
<a> import io . netty . channel . ChannelException ; </a> 
<a> import io . netty . channel . ChannelFuture ; </a> 
<a> import io . netty . channel . ChannelMetadata ; </a> 
<a> import io . netty . channel . <RARE_TOKEN> ; </a> 
<a> import io . netty . channel . EventLoop ; </a> 
<a> import io . netty . channel . <RARE_TOKEN> ; </a> 
<a> import io . netty . channel . <RARE_TOKEN> ; </a> 
<a> import java . net . SocketAddress ; </a> 
<a> import java . nio . channels . <RARE_TOKEN> ; </a> 
<a> import java . nio . channels . <RARE_TOKEN> ; </a> 
<a> import java . nio . channels . <RARE_TOKEN> ; </a> 
<a> import java . nio . channels . <RARE_TOKEN> ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> private static final ChannelMetadata <RARE_TOKEN> = new ChannelMetadata ( ChannelBufType . <RARE_TOKEN> , false ) ; </a> 
<a> private final <RARE_TOKEN> config = new <RARE_TOKEN> ( ) ; </a> 
<a> private final Runnable <RARE_TOKEN> = new Runnable ( ) { </a> 
<a> @ Override </a> 
<a> public void run ( ) { </a> 
<a> unsafe ( ) . close ( unsafe ( ) . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> } ; </a> 
<a> private volatile int state ; </a> 
<a> private volatile <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> private volatile LocalAddress localAddress ; </a> 
<a> private volatile LocalAddress remoteAddress ; </a> 
<a> private volatile ChannelFuture <RARE_TOKEN> ; </a> 
<a> public <RARE_TOKEN> ( ) { </a> 
<a> this ( null ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( Integer id ) { </a> 
<a> super ( null , id ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> parent , <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> super ( parent , null ) ; </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> localAddress = parent . localAddress ( ) ; </a> 
<a> remoteAddress = <RARE_TOKEN> . localAddress ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ChannelMetadata <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public <RARE_TOKEN> config ( ) { </a> 
<a> return config ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public <RARE_TOKEN> parent ( ) { </a> 
<a> return ( <RARE_TOKEN> ) super . parent ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public LocalAddress localAddress ( ) { </a> 
<a> return ( LocalAddress ) super . localAddress ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public LocalAddress remoteAddress ( ) { </a> 
<a> return ( LocalAddress ) super . remoteAddress ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean isOpen ( ) { </a> 
<a> return state < 3 ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean isActive ( ) { </a> 
<a> return state == 2 ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected <RARE_TOKEN> <RARE_TOKEN> ( ) { </a> 
<a> return new <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected boolean <RARE_TOKEN> ( EventLoop loop ) { </a> 
<a> return loop instanceof <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected SocketAddress <RARE_TOKEN> ( ) { </a> 
<a> return localAddress ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected SocketAddress <RARE_TOKEN> ( ) { </a> 
<a> return remoteAddress ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected Runnable <RARE_TOKEN> ( ) throws Exception { </a> 
<a> final <RARE_TOKEN> <RARE_TOKEN> = this . <RARE_TOKEN> ; </a> 
<a> Runnable <RARE_TOKEN> ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> state = 2 ; </a> 
<a> <RARE_TOKEN> . remoteAddress = parent ( ) . localAddress ( ) ; </a> 
<a> <RARE_TOKEN> . state = 2 ; </a> 
<a> final EventLoop <RARE_TOKEN> = <RARE_TOKEN> . eventLoop ( ) ; </a> 
<a> <RARE_TOKEN> = new Runnable ( ) { </a> 
<a> @ Override </a> 
<a> public void run ( ) { </a> 
<a> <RARE_TOKEN> . execute ( new Runnable ( ) { </a> 
<a> @ Override </a> 
<a> public void run ( ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> . pipeline ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> } </a> 
<a> } ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> = null ; </a> 
<a> } </a> 
<a> ( ( <RARE_TOKEN> ) eventLoop ( ) ) . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( SocketAddress localAddress ) throws Exception { </a> 
<a> this . localAddress = </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( this , this . localAddress , </a> 
<a> localAddress ) ; </a> 
<a> state = 1 ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( ) throws Exception { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( ) throws Exception { </a> 
<a> if ( state > 2 ) { </a> 
<a> return ; </a> 
<a> } </a> 
<a> if ( parent ( ) == null ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( localAddress ) ; </a> 
<a> } </a> 
<a> localAddress = null ; </a> 
<a> state = 3 ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( ) throws Exception { </a> 
<a> if ( <RARE_TOKEN> . isActive ( ) ) { </a> 
<a> <RARE_TOKEN> . unsafe ( ) . close ( <RARE_TOKEN> . unsafe ( ) . <RARE_TOKEN> ( ) ) ; </a> 
<a> <RARE_TOKEN> = null ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( ) throws Exception { </a> 
<a> if ( isOpen ( ) ) { </a> 
<a> unsafe ( ) . close ( unsafe ( ) . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> ( ( <RARE_TOKEN> ) eventLoop ( ) ) . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( MessageBuf < Object > buf ) throws Exception { </a> 
<a> if ( state < 2 ) { </a> 
<a> throw new <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> if ( state > 2 ) { </a> 
<a> throw new <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> final <RARE_TOKEN> <RARE_TOKEN> = this . <RARE_TOKEN> ; </a> 
<a> assert <RARE_TOKEN> != null ; </a> 
<a> buf . <RARE_TOKEN> ( <RARE_TOKEN> . pipeline ( ) . <RARE_TOKEN> ( ) ) ; </a> 
<a> <RARE_TOKEN> . eventLoop ( ) . execute ( new Runnable ( ) { </a> 
<a> @ Override </a> 
<a> public void run ( ) { </a> 
<a> <RARE_TOKEN> . pipeline ( ) . fireInboundBufferUpdated ( ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected boolean <RARE_TOKEN> ( ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> private class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> @ Override </a> 
<a> public void connect ( final SocketAddress remoteAddress , </a> 
<a> SocketAddress localAddress , final ChannelFuture future ) { </a> 
<a> if ( eventLoop ( ) . inEventLoop ( ) ) { </a> 
<a> if ( ! <RARE_TOKEN> ( future ) ) { </a> 
<a> return ; </a> 
<a> } </a> 
<a> if ( state == 2 ) { </a> 
<a> Exception cause = new <RARE_TOKEN> ( ) ; </a> 
<a> future . setFailure ( cause ) ; </a> 
<a> pipeline ( ) . fireExceptionCaught ( cause ) ; </a> 
<a> return ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> throw new <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> = future ; </a> 
<a> if ( state != 1 ) { </a> 
<a> if ( localAddress == null ) { </a> 
<a> localAddress = new LocalAddress ( <RARE_TOKEN> . this ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> if ( localAddress != null ) { </a> 
<a> try { </a> 
<a> <RARE_TOKEN> ( localAddress ) ; </a> 
<a> } catch ( Throwable t ) { </a> 
<a> future . setFailure ( t ) ; </a> 
<a> pipeline ( ) . fireExceptionCaught ( t ) ; </a> 
<a> close ( <RARE_TOKEN> ( ) ) ; </a> 
<a> return ; </a> 
<a> } </a> 
<a> } </a> 
<a> Channel <RARE_TOKEN> = <RARE_TOKEN> . get ( remoteAddress ) ; </a> 
<a> if ( ! ( <RARE_TOKEN> instanceof <RARE_TOKEN> ) ) { </a> 
<a> Exception cause = </a> 
<a> new ChannelException ( <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> future . setFailure ( cause ) ; </a> 
<a> pipeline ( ) . fireExceptionCaught ( cause ) ; </a> 
<a> close ( <RARE_TOKEN> ( ) ) ; </a> 
<a> return ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = ( <RARE_TOKEN> ) <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> . this ) ; </a> 
<a> } else { </a> 
<a> final SocketAddress <RARE_TOKEN> = localAddress ; </a> 
<a> eventLoop ( ) . execute ( new Runnable ( ) { </a> 
<a> @ Override </a> 
<a> public void run ( ) { </a> 
<a> connect ( remoteAddress , <RARE_TOKEN> , future ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . channel . <RARE_TOKEN> ; </a> 
<a> import io . netty . channel . Channel ; </a> 
<a> import io . netty . channel . ChannelException ; </a> 
<a> import java . net . SocketAddress ; </a> 
<a> import java . util . concurrent . ConcurrentHashMap ; </a> 
<a> import java . util . concurrent . <RARE_TOKEN> ; </a> 
<a> final class <RARE_TOKEN> { </a> 
<a> private static final <RARE_TOKEN> < LocalAddress , Channel > <RARE_TOKEN> = </a> 
<a> new ConcurrentHashMap < LocalAddress , Channel > ( ) ; </a> 
<a> static LocalAddress <RARE_TOKEN> ( </a> 
<a> Channel channel , LocalAddress <RARE_TOKEN> , SocketAddress localAddress ) { </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> throw new ChannelException ( <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( ! ( localAddress instanceof LocalAddress ) ) { </a> 
<a> throw new ChannelException ( </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> " + localAddress . getClass ( ) . getSimpleName ( ) ) ; </a> 
<a> } </a> 
<a> LocalAddress <RARE_TOKEN> = ( LocalAddress ) localAddress ; </a> 
<a> if ( LocalAddress . <RARE_TOKEN> . equals ( <RARE_TOKEN> ) ) { </a> 
<a> <RARE_TOKEN> = new LocalAddress ( channel ) ; </a> 
<a> } </a> 
<a> Channel <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> , channel ) ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> throw new ChannelException ( <RARE_TOKEN> <RARE_TOKEN> in <RARE_TOKEN> <RARE_TOKEN> " + <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> static Channel get ( SocketAddress localAddress ) { </a> 
<a> return <RARE_TOKEN> . get ( localAddress ) ; </a> 
<a> } </a> 
<a> static void <RARE_TOKEN> ( LocalAddress localAddress ) { </a> 
<a> <RARE_TOKEN> . remove ( localAddress ) ; </a> 
<a> } </a> 
<a> private <RARE_TOKEN> ( ) { </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . channel . <RARE_TOKEN> ; </a> 
<a> import io . netty . channel . <RARE_TOKEN> ; </a> 
<a> import io . netty . channel . <RARE_TOKEN> ; </a> 
<a> import java . util . concurrent . ThreadFactory ; </a> 
<a> final class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> <RARE_TOKEN> ( </a> 
<a> <RARE_TOKEN> parent , ThreadFactory threadFactory , <RARE_TOKEN> scheduler ) { </a> 
<a> super ( parent , threadFactory , scheduler ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void run ( ) { </a> 
<a> for ( ; ; ) { </a> 
<a> Runnable task ; </a> 
<a> try { </a> 
<a> task = <RARE_TOKEN> ( ) ; </a> 
<a> task . run ( ) ; </a> 
<a> } catch ( InterruptedException e ) { </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> ( ) ) { </a> 
<a> task = <RARE_TOKEN> ( ) ; </a> 
<a> if ( task == null ) { </a> 
<a> break ; </a> 
<a> } </a> 
<a> task . run ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( boolean inEventLoop ) { </a> 
<a> if ( ! inEventLoop && <RARE_TOKEN> ( ) ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . channel . <RARE_TOKEN> ; </a> 
<a> import io . netty . channel . EventExecutor ; </a> 
<a> import io . netty . channel . <RARE_TOKEN> ; </a> 
<a> import io . netty . channel . <RARE_TOKEN> ; </a> 
<a> import java . util . concurrent . ThreadFactory ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> public <RARE_TOKEN> ( ) { </a> 
<a> this ( 0 ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( int <RARE_TOKEN> ) { </a> 
<a> this ( <RARE_TOKEN> , null ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( int <RARE_TOKEN> , ThreadFactory threadFactory ) { </a> 
<a> super ( <RARE_TOKEN> , threadFactory ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected EventExecutor <RARE_TOKEN> ( </a> 
<a> ThreadFactory threadFactory , <RARE_TOKEN> scheduler , Object ... args ) throws Exception { </a> 
<a> return new <RARE_TOKEN> ( this , threadFactory , scheduler ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . channel . <RARE_TOKEN> ; </a> 
<a> import io . netty . channel . <RARE_TOKEN> ; </a> 
<a> import io . netty . channel . <RARE_TOKEN> ; </a> 
<a> import io . netty . channel . <RARE_TOKEN> ; </a> 
<a> import io . netty . channel . EventLoop ; </a> 
<a> import io . netty . channel . <RARE_TOKEN> ; </a> 
<a> import io . netty . channel . <RARE_TOKEN> ; </a> 
<a> import io . netty . channel . <RARE_TOKEN> ; </a> 
<a> import java . net . SocketAddress ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> private final <RARE_TOKEN> config = new <RARE_TOKEN> ( ) ; </a> 
<a> private final Runnable <RARE_TOKEN> = new Runnable ( ) { </a> 
<a> @ Override </a> 
<a> public void run ( ) { </a> 
<a> unsafe ( ) . close ( unsafe ( ) . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> } ; </a> 
<a> private volatile int state ; </a> 
<a> private volatile LocalAddress localAddress ; </a> 
<a> public <RARE_TOKEN> ( ) { </a> 
<a> this ( null ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( Integer id ) { </a> 
<a> super ( id ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public <RARE_TOKEN> config ( ) { </a> 
<a> return config ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public LocalAddress localAddress ( ) { </a> 
<a> return ( LocalAddress ) super . localAddress ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public LocalAddress remoteAddress ( ) { </a> 
<a> return ( LocalAddress ) super . remoteAddress ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean isOpen ( ) { </a> 
<a> return state < 2 ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean isActive ( ) { </a> 
<a> return state == 1 ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected boolean <RARE_TOKEN> ( EventLoop loop ) { </a> 
<a> return loop instanceof <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected SocketAddress <RARE_TOKEN> ( ) { </a> 
<a> return localAddress ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected Runnable <RARE_TOKEN> ( ) throws Exception { </a> 
<a> ( ( <RARE_TOKEN> ) eventLoop ( ) ) . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> return null ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( SocketAddress localAddress ) throws Exception { </a> 
<a> this . localAddress = <RARE_TOKEN> . <RARE_TOKEN> ( this , this . localAddress , localAddress ) ; </a> 
<a> state = 1 ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( ) throws Exception { </a> 
<a> if ( state > 1 ) { </a> 
<a> return ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( localAddress ) ; </a> 
<a> localAddress = null ; </a> 
<a> state = 2 ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( ) throws Exception { </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( ) throws Exception { </a> 
<a> ( ( <RARE_TOKEN> ) eventLoop ( ) ) . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> ( final <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( this , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( final <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> if ( eventLoop ( ) . inEventLoop ( ) ) { </a> 
<a> pipeline ( ) . <RARE_TOKEN> ( ) . add ( <RARE_TOKEN> ) ; </a> 
<a> pipeline ( ) . fireInboundBufferUpdated ( ) ; </a> 
<a> } else { </a> 
<a> eventLoop ( ) . execute ( new Runnable ( ) { </a> 
<a> @ Override </a> 
<a> public void run ( ) { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected <RARE_TOKEN> <RARE_TOKEN> ( ) { </a> 
<a> return new <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> private final class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . channel . <RARE_TOKEN> ; </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . channel . socket ; </a> 
<a> import io . netty . buffer . ByteBuf ; </a> 
<a> import java . net . InetSocketAddress ; </a> 
<a> public class <RARE_TOKEN> { </a> 
<a> private final ByteBuf data ; </a> 
<a> private final InetSocketAddress remoteAddress ; </a> 
<a> public <RARE_TOKEN> ( ByteBuf data , InetSocketAddress remoteAddress ) { </a> 
<a> if ( data == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( remoteAddress == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> this . data = data ; </a> 
<a> this . remoteAddress = remoteAddress ; </a> 
<a> } </a> 
<a> public ByteBuf data ( ) { </a> 
<a> return data ; </a> 
<a> } </a> 
<a> public InetSocketAddress remoteAddress ( ) { </a> 
<a> return remoteAddress ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public String toString ( ) { </a> 
<a> return <RARE_TOKEN> + data . readableBytes ( ) + <RARE_TOKEN> " + remoteAddress + <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . channel . socket ; </a> 
<a> import static io . netty . channel . ChannelOption . * ; </a> 
<a> import io . netty . channel . ChannelException ; </a> 
<a> import io . netty . channel . ChannelOption ; </a> 
<a> import io . netty . channel . <RARE_TOKEN> ; </a> 
<a> import java . io . IOException ; </a> 
<a> import java . net . <RARE_TOKEN> ; </a> 
<a> import java . net . InetAddress ; </a> 
<a> import java . net . <RARE_TOKEN> ; </a> 
<a> import java . net . NetworkInterface ; </a> 
<a> import java . net . SocketException ; </a> 
<a> import java . util . Map ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> implements <RARE_TOKEN> { </a> 
<a> private static final int <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> private final <RARE_TOKEN> socket ; </a> 
<a> private volatile int <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> public <RARE_TOKEN> ( <RARE_TOKEN> socket ) { </a> 
<a> if ( socket == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> this . socket = socket ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public Map < ChannelOption < ? > , Object > <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ( </a> 
<a> super . <RARE_TOKEN> ( ) , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public < T > T <RARE_TOKEN> ( ChannelOption < T > option ) { </a> 
<a> if ( option == <RARE_TOKEN> ) { </a> 
<a> return ( T ) Boolean . valueOf ( <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> if ( option == <RARE_TOKEN> ) { </a> 
<a> return ( T ) Integer . valueOf ( <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> if ( option == <RARE_TOKEN> ) { </a> 
<a> return ( T ) Integer . valueOf ( <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> if ( option == <RARE_TOKEN> ) { </a> 
<a> return ( T ) Integer . valueOf ( <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> if ( option == <RARE_TOKEN> ) { </a> 
<a> return ( T ) Boolean . valueOf ( <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> if ( option == <RARE_TOKEN> ) { </a> 
<a> return ( T ) Boolean . valueOf ( <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> if ( option == <RARE_TOKEN> ) { </a> 
<a> @ SuppressWarnings ( "unchecked" ) </a> 
<a> T i = ( T ) <RARE_TOKEN> ( ) ; </a> 
<a> return i ; </a> 
<a> } </a> 
<a> if ( option == <RARE_TOKEN> ) { </a> 
<a> @ SuppressWarnings ( "unchecked" ) </a> 
<a> T i = ( T ) <RARE_TOKEN> ( ) ; </a> 
<a> return i ; </a> 
<a> } </a> 
<a> if ( option == <RARE_TOKEN> ) { </a> 
<a> return ( T ) Integer . valueOf ( <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> if ( option == <RARE_TOKEN> ) { </a> 
<a> return ( T ) Integer . valueOf ( <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> return super . <RARE_TOKEN> ( option ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public < T > boolean <RARE_TOKEN> ( ChannelOption < T > option , T value ) { </a> 
<a> <RARE_TOKEN> ( option , value ) ; </a> 
<a> if ( option == <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( ( Boolean ) value ) ; </a> 
<a> } else if ( option == <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( ( Integer ) value ) ; </a> 
<a> } else if ( option == <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( ( Integer ) value ) ; </a> 
<a> } else if ( option == <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( ( Boolean ) value ) ; </a> 
<a> } else if ( option == <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( ( Boolean ) value ) ; </a> 
<a> } else if ( option == <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( ( InetAddress ) value ) ; </a> 
<a> } else if ( option == <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( ( NetworkInterface ) value ) ; </a> 
<a> } else if ( option == <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( ( Integer ) value ) ; </a> 
<a> } else if ( option == <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( ( Integer ) value ) ; </a> 
<a> } else { </a> 
<a> return super . <RARE_TOKEN> ( option , value ) ; </a> 
<a> } </a> 
<a> return true ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> try { </a> 
<a> return socket . <RARE_TOKEN> ( ) ; </a> 
<a> } catch ( SocketException e ) { </a> 
<a> throw new ChannelException ( e ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( boolean broadcast ) { </a> 
<a> try { </a> 
<a> socket . <RARE_TOKEN> ( broadcast ) ; </a> 
<a> } catch ( SocketException e ) { </a> 
<a> throw new ChannelException ( e ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public InetAddress <RARE_TOKEN> ( ) { </a> 
<a> if ( socket instanceof <RARE_TOKEN> ) { </a> 
<a> try { </a> 
<a> return ( ( <RARE_TOKEN> ) socket ) . <RARE_TOKEN> ( ) ; </a> 
<a> } catch ( SocketException e ) { </a> 
<a> throw new ChannelException ( e ) ; </a> 
<a> } </a> 
<a> } else { </a> 
<a> throw new UnsupportedOperationException ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( InetAddress <RARE_TOKEN> ) { </a> 
<a> if ( socket instanceof <RARE_TOKEN> ) { </a> 
<a> try { </a> 
<a> ( ( <RARE_TOKEN> ) socket ) . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } catch ( SocketException e ) { </a> 
<a> throw new ChannelException ( e ) ; </a> 
<a> } </a> 
<a> } else { </a> 
<a> throw new UnsupportedOperationException ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> if ( socket instanceof <RARE_TOKEN> ) { </a> 
<a> try { </a> 
<a> return ( ( <RARE_TOKEN> ) socket ) . <RARE_TOKEN> ( ) ; </a> 
<a> } catch ( SocketException e ) { </a> 
<a> throw new ChannelException ( e ) ; </a> 
<a> } </a> 
<a> } else { </a> 
<a> throw new UnsupportedOperationException ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( boolean <RARE_TOKEN> ) { </a> 
<a> if ( socket instanceof <RARE_TOKEN> ) { </a> 
<a> try { </a> 
<a> ( ( <RARE_TOKEN> ) socket ) . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } catch ( SocketException e ) { </a> 
<a> throw new ChannelException ( e ) ; </a> 
<a> } </a> 
<a> } else { </a> 
<a> throw new UnsupportedOperationException ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public NetworkInterface <RARE_TOKEN> ( ) { </a> 
<a> if ( socket instanceof <RARE_TOKEN> ) { </a> 
<a> try { </a> 
<a> return ( ( <RARE_TOKEN> ) socket ) . <RARE_TOKEN> ( ) ; </a> 
<a> } catch ( SocketException e ) { </a> 
<a> throw new ChannelException ( e ) ; </a> 
<a> } </a> 
<a> } else { </a> 
<a> throw new UnsupportedOperationException ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( NetworkInterface networkInterface ) { </a> 
<a> if ( socket instanceof <RARE_TOKEN> ) { </a> 
<a> try { </a> 
<a> ( ( <RARE_TOKEN> ) socket ) . <RARE_TOKEN> ( networkInterface ) ; </a> 
<a> } catch ( SocketException e ) { </a> 
<a> throw new ChannelException ( e ) ; </a> 
<a> } </a> 
<a> } else { </a> 
<a> throw new UnsupportedOperationException ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> try { </a> 
<a> return socket . <RARE_TOKEN> ( ) ; </a> 
<a> } catch ( SocketException e ) { </a> 
<a> throw new ChannelException ( e ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( boolean <RARE_TOKEN> ) { </a> 
<a> try { </a> 
<a> socket . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } catch ( SocketException e ) { </a> 
<a> throw new ChannelException ( e ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int <RARE_TOKEN> ( ) { </a> 
<a> try { </a> 
<a> return socket . <RARE_TOKEN> ( ) ; </a> 
<a> } catch ( SocketException e ) { </a> 
<a> throw new ChannelException ( e ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( int <RARE_TOKEN> ) { </a> 
<a> try { </a> 
<a> socket . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } catch ( SocketException e ) { </a> 
<a> throw new ChannelException ( e ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int <RARE_TOKEN> ( ) { </a> 
<a> try { </a> 
<a> return socket . <RARE_TOKEN> ( ) ; </a> 
<a> } catch ( SocketException e ) { </a> 
<a> throw new ChannelException ( e ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( int <RARE_TOKEN> ) { </a> 
<a> try { </a> 
<a> socket . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } catch ( SocketException e ) { </a> 
<a> throw new ChannelException ( e ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( int <RARE_TOKEN> ) { </a> 
<a> if ( <RARE_TOKEN> <= 0 ) { </a> 
<a> throw new IllegalArgumentException ( </a> 
<a> String . format ( <RARE_TOKEN> <RARE_TOKEN> (expected: > <RARE_TOKEN> , <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int <RARE_TOKEN> ( ) { </a> 
<a> if ( socket instanceof <RARE_TOKEN> ) { </a> 
<a> try { </a> 
<a> return ( ( <RARE_TOKEN> ) socket ) . <RARE_TOKEN> ( ) ; </a> 
<a> } catch ( IOException e ) { </a> 
<a> throw new ChannelException ( e ) ; </a> 
<a> } </a> 
<a> } else { </a> 
<a> throw new UnsupportedOperationException ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( int <RARE_TOKEN> ) { </a> 
<a> if ( socket instanceof <RARE_TOKEN> ) { </a> 
<a> try { </a> 
<a> ( ( <RARE_TOKEN> ) socket ) . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } catch ( IOException e ) { </a> 
<a> throw new ChannelException ( e ) ; </a> 
<a> } </a> 
<a> } else { </a> 
<a> throw new UnsupportedOperationException ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int <RARE_TOKEN> ( ) { </a> 
<a> try { </a> 
<a> return socket . <RARE_TOKEN> ( ) ; </a> 
<a> } catch ( SocketException e ) { </a> 
<a> throw new ChannelException ( e ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( int <RARE_TOKEN> ) { </a> 
<a> try { </a> 
<a> socket . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } catch ( SocketException e ) { </a> 
<a> throw new ChannelException ( e ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . channel . socket ; </a> 
<a> import static io . netty . channel . ChannelOption . * ; </a> 
<a> import io . netty . channel . ChannelException ; </a> 
<a> import io . netty . channel . ChannelOption ; </a> 
<a> import io . netty . channel . <RARE_TOKEN> ; </a> 
<a> import io . netty . util . <RARE_TOKEN> ; </a> 
<a> import java . net . <RARE_TOKEN> ; </a> 
<a> import java . net . SocketException ; </a> 
<a> import java . util . Map ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> </a> 
<a> implements <RARE_TOKEN> { </a> 
<a> private final <RARE_TOKEN> socket ; </a> 
<a> private volatile int <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> public <RARE_TOKEN> ( <RARE_TOKEN> socket ) { </a> 
<a> if ( socket == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> this . socket = socket ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public Map < ChannelOption < ? > , Object > <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ( super . <RARE_TOKEN> ( ) , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public < T > T <RARE_TOKEN> ( ChannelOption < T > option ) { </a> 
<a> if ( option == <RARE_TOKEN> ) { </a> 
<a> return ( T ) Integer . valueOf ( <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> if ( option == <RARE_TOKEN> ) { </a> 
<a> return ( T ) Boolean . valueOf ( <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> if ( option == <RARE_TOKEN> ) { </a> 
<a> return ( T ) Integer . valueOf ( <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> return super . <RARE_TOKEN> ( option ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public < T > boolean <RARE_TOKEN> ( ChannelOption < T > option , T value ) { </a> 
<a> <RARE_TOKEN> ( option , value ) ; </a> 
<a> if ( option == <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( ( Integer ) value ) ; </a> 
<a> } else if ( option == <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( ( Boolean ) value ) ; </a> 
<a> } else if ( option == <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( ( Integer ) value ) ; </a> 
<a> } else { </a> 
<a> return super . <RARE_TOKEN> ( option , value ) ; </a> 
<a> } </a> 
<a> return true ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> try { </a> 
<a> return socket . <RARE_TOKEN> ( ) ; </a> 
<a> } catch ( SocketException e ) { </a> 
<a> throw new ChannelException ( e ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( boolean <RARE_TOKEN> ) { </a> 
<a> try { </a> 
<a> socket . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } catch ( SocketException e ) { </a> 
<a> throw new ChannelException ( e ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int <RARE_TOKEN> ( ) { </a> 
<a> try { </a> 
<a> return socket . <RARE_TOKEN> ( ) ; </a> 
<a> } catch ( SocketException e ) { </a> 
<a> throw new ChannelException ( e ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( int <RARE_TOKEN> ) { </a> 
<a> try { </a> 
<a> socket . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } catch ( SocketException e ) { </a> 
<a> throw new ChannelException ( e ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( int <RARE_TOKEN> , int <RARE_TOKEN> , int <RARE_TOKEN> ) { </a> 
<a> socket . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( int <RARE_TOKEN> ) { </a> 
<a> if ( <RARE_TOKEN> < 0 ) { </a> 
<a> throw new IllegalArgumentException ( <RARE_TOKEN> " + <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . channel . socket ; </a> 
<a> import static io . netty . channel . ChannelOption . * ; </a> 
<a> import io . netty . channel . ChannelException ; </a> 
<a> import io . netty . channel . ChannelOption ; </a> 
<a> import io . netty . channel . <RARE_TOKEN> ; </a> 
<a> import java . net . <RARE_TOKEN> ; </a> 
<a> import java . net . SocketException ; </a> 
<a> import java . util . Map ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> </a> 
<a> implements <RARE_TOKEN> { </a> 
<a> private final <RARE_TOKEN> socket ; </a> 
<a> public <RARE_TOKEN> ( <RARE_TOKEN> socket ) { </a> 
<a> if ( socket == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> this . socket = socket ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public Map < ChannelOption < ? > , Object > <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ( </a> 
<a> super . <RARE_TOKEN> ( ) , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public < T > T <RARE_TOKEN> ( ChannelOption < T > option ) { </a> 
<a> if ( option == <RARE_TOKEN> ) { </a> 
<a> return ( T ) Integer . valueOf ( <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> if ( option == <RARE_TOKEN> ) { </a> 
<a> return ( T ) Integer . valueOf ( <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> if ( option == <RARE_TOKEN> ) { </a> 
<a> return ( T ) Boolean . valueOf ( <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> if ( option == <RARE_TOKEN> ) { </a> 
<a> return ( T ) Boolean . valueOf ( <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> if ( option == <RARE_TOKEN> ) { </a> 
<a> return ( T ) Boolean . valueOf ( <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> if ( option == <RARE_TOKEN> ) { </a> 
<a> return ( T ) Integer . valueOf ( <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> if ( option == <RARE_TOKEN> ) { </a> 
<a> return ( T ) Integer . valueOf ( <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> return super . <RARE_TOKEN> ( option ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public < T > boolean <RARE_TOKEN> ( ChannelOption < T > option , T value ) { </a> 
<a> <RARE_TOKEN> ( option , value ) ; </a> 
<a> if ( option == <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( ( Integer ) value ) ; </a> 
<a> } else if ( option == <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( ( Integer ) value ) ; </a> 
<a> } else if ( option == <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( ( Boolean ) value ) ; </a> 
<a> } else if ( option == <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( ( Boolean ) value ) ; </a> 
<a> } else if ( option == <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( ( Boolean ) value ) ; </a> 
<a> } else if ( option == <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( ( Integer ) value ) ; </a> 
<a> } else if ( option == <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( ( Integer ) value ) ; </a> 
<a> } else { </a> 
<a> return super . <RARE_TOKEN> ( option , value ) ; </a> 
<a> } </a> 
<a> return true ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int <RARE_TOKEN> ( ) { </a> 
<a> try { </a> 
<a> return socket . <RARE_TOKEN> ( ) ; </a> 
<a> } catch ( SocketException e ) { </a> 
<a> throw new ChannelException ( e ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int <RARE_TOKEN> ( ) { </a> 
<a> try { </a> 
<a> return socket . <RARE_TOKEN> ( ) ; </a> 
<a> } catch ( SocketException e ) { </a> 
<a> throw new ChannelException ( e ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int <RARE_TOKEN> ( ) { </a> 
<a> try { </a> 
<a> return socket . <RARE_TOKEN> ( ) ; </a> 
<a> } catch ( SocketException e ) { </a> 
<a> throw new ChannelException ( e ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int <RARE_TOKEN> ( ) { </a> 
<a> try { </a> 
<a> return socket . <RARE_TOKEN> ( ) ; </a> 
<a> } catch ( SocketException e ) { </a> 
<a> throw new ChannelException ( e ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> try { </a> 
<a> return socket . <RARE_TOKEN> ( ) ; </a> 
<a> } catch ( SocketException e ) { </a> 
<a> throw new ChannelException ( e ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> try { </a> 
<a> return socket . <RARE_TOKEN> ( ) ; </a> 
<a> } catch ( SocketException e ) { </a> 
<a> throw new ChannelException ( e ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> try { </a> 
<a> return socket . <RARE_TOKEN> ( ) ; </a> 
<a> } catch ( SocketException e ) { </a> 
<a> throw new ChannelException ( e ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( boolean <RARE_TOKEN> ) { </a> 
<a> try { </a> 
<a> socket . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } catch ( SocketException e ) { </a> 
<a> throw new ChannelException ( e ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( </a> 
<a> int <RARE_TOKEN> , int <RARE_TOKEN> , int <RARE_TOKEN> ) { </a> 
<a> socket . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( int <RARE_TOKEN> ) { </a> 
<a> try { </a> 
<a> socket . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } catch ( SocketException e ) { </a> 
<a> throw new ChannelException ( e ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( boolean <RARE_TOKEN> ) { </a> 
<a> try { </a> 
<a> socket . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } catch ( SocketException e ) { </a> 
<a> throw new ChannelException ( e ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( int <RARE_TOKEN> ) { </a> 
<a> try { </a> 
<a> socket . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } catch ( SocketException e ) { </a> 
<a> throw new ChannelException ( e ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( int <RARE_TOKEN> ) { </a> 
<a> try { </a> 
<a> if ( <RARE_TOKEN> < 0 ) { </a> 
<a> socket . <RARE_TOKEN> ( false , 0 ) ; </a> 
<a> } else { </a> 
<a> socket . <RARE_TOKEN> ( true , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } catch ( SocketException e ) { </a> 
<a> throw new ChannelException ( e ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( boolean <RARE_TOKEN> ) { </a> 
<a> try { </a> 
<a> socket . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } catch ( SocketException e ) { </a> 
<a> throw new ChannelException ( e ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( int <RARE_TOKEN> ) { </a> 
<a> try { </a> 
<a> socket . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } catch ( SocketException e ) { </a> 
<a> throw new ChannelException ( e ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . channel . socket ; </a> 
<a> public enum <RARE_TOKEN> { </a> 
<a> <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . channel . socket ; </a> 
<a> import io . netty . channel . <RARE_TOKEN> ; </a> 
<a> import java . net . InetSocketAddress ; </a> 
<a> public interface <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> @ Override </a> 
<a> <RARE_TOKEN> config ( ) ; </a> 
<a> @ Override </a> 
<a> InetSocketAddress localAddress ( ) ; </a> 
<a> @ Override </a> 
<a> InetSocketAddress remoteAddress ( ) ; </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . channel . socket ; </a> 
<a> import io . netty . channel . <RARE_TOKEN> ; </a> 
<a> import java . net . <RARE_TOKEN> ; </a> 
<a> import java . net . <RARE_TOKEN> ; </a> 
<a> public interface <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> int <RARE_TOKEN> ( ) ; </a> 
<a> void <RARE_TOKEN> ( int <RARE_TOKEN> ) ; </a> 
<a> boolean <RARE_TOKEN> ( ) ; </a> 
<a> void <RARE_TOKEN> ( boolean <RARE_TOKEN> ) ; </a> 
<a> int <RARE_TOKEN> ( ) ; </a> 
<a> void <RARE_TOKEN> ( int <RARE_TOKEN> ) ; </a> 
<a> void <RARE_TOKEN> ( int <RARE_TOKEN> , int <RARE_TOKEN> , int <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . channel . socket ; </a> 
<a> import io . netty . channel . Channel ; </a> 
<a> import java . net . InetSocketAddress ; </a> 
<a> public interface SocketChannel extends Channel { </a> 
<a> @ Override </a> 
<a> <RARE_TOKEN> config ( ) ; </a> 
<a> @ Override </a> 
<a> InetSocketAddress localAddress ( ) ; </a> 
<a> @ Override </a> 
<a> InetSocketAddress remoteAddress ( ) ; </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . channel . socket ; </a> 
<a> import io . netty . channel . <RARE_TOKEN> ; </a> 
<a> import java . net . <RARE_TOKEN> ; </a> 
<a> import java . net . <RARE_TOKEN> ; </a> 
<a> public interface <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> boolean <RARE_TOKEN> ( ) ; </a> 
<a> void <RARE_TOKEN> ( boolean <RARE_TOKEN> ) ; </a> 
<a> int <RARE_TOKEN> ( ) ; </a> 
<a> void <RARE_TOKEN> ( int <RARE_TOKEN> ) ; </a> 
<a> int <RARE_TOKEN> ( ) ; </a> 
<a> void <RARE_TOKEN> ( int <RARE_TOKEN> ) ; </a> 
<a> int <RARE_TOKEN> ( ) ; </a> 
<a> void <RARE_TOKEN> ( int <RARE_TOKEN> ) ; </a> 
<a> boolean <RARE_TOKEN> ( ) ; </a> 
<a> void <RARE_TOKEN> ( boolean <RARE_TOKEN> ) ; </a> 
<a> int <RARE_TOKEN> ( ) ; </a> 
<a> void <RARE_TOKEN> ( int <RARE_TOKEN> ) ; </a> 
<a> boolean <RARE_TOKEN> ( ) ; </a> 
<a> void <RARE_TOKEN> ( boolean <RARE_TOKEN> ) ; </a> 
<a> void <RARE_TOKEN> ( int <RARE_TOKEN> , int <RARE_TOKEN> , int <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . channel . socket . <RARE_TOKEN> ; </a> 
<a> import io . netty . channel . <RARE_TOKEN> ; </a> 
<a> import io . netty . channel . Channel ; </a> 
<a> import io . netty . channel . ChannelException ; </a> 
<a> import io . netty . channel . ChannelFuture ; </a> 
<a> import io . netty . channel . EventLoop ; </a> 
<a> import java . net . <RARE_TOKEN> ; </a> 
<a> import java . net . InetSocketAddress ; </a> 
<a> import java . net . SocketAddress ; </a> 
<a> import java . nio . channels . <RARE_TOKEN> ; </a> 
<a> import java . util . concurrent . ScheduledFuture ; </a> 
<a> import java . util . concurrent . TimeUnit ; </a> 
<a> abstract class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> protected final <RARE_TOKEN> group ; </a> 
<a> private final <RARE_TOKEN> ch ; </a> 
<a> protected ChannelFuture <RARE_TOKEN> ; </a> 
<a> protected ScheduledFuture < ? > <RARE_TOKEN> ; </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> protected <RARE_TOKEN> ( Channel parent , Integer id , <RARE_TOKEN> group , <RARE_TOKEN> ch ) { </a> 
<a> super ( parent , id ) ; </a> 
<a> this . ch = ch ; </a> 
<a> this . group = group ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public InetSocketAddress localAddress ( ) { </a> 
<a> return ( InetSocketAddress ) super . localAddress ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public InetSocketAddress remoteAddress ( ) { </a> 
<a> return ( InetSocketAddress ) super . remoteAddress ( ) ; </a> 
<a> } </a> 
<a> protected <RARE_TOKEN> javaChannel ( ) { </a> 
<a> return ch ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean isOpen ( ) { </a> 
<a> return ch . isOpen ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected Runnable <RARE_TOKEN> ( ) throws Exception { </a> 
<a> if ( ( ( <RARE_TOKEN> ) eventLoop ( ) ) . parent ( ) != group ) { </a> 
<a> throw new ChannelException ( </a> 
<a> getClass ( ) . getSimpleName ( ) + " must be <RARE_TOKEN> to the " + </a> 
<a> <RARE_TOKEN> . class . getSimpleName ( ) + " <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> in the <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> return null ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( ) throws Exception { </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected boolean <RARE_TOKEN> ( EventLoop loop ) { </a> 
<a> return loop instanceof <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> protected abstract class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> @ Override </a> 
<a> public void connect ( final SocketAddress remoteAddress , </a> 
<a> final SocketAddress localAddress , final ChannelFuture future ) { </a> 
<a> if ( eventLoop ( ) . inEventLoop ( ) ) { </a> 
<a> if ( ! <RARE_TOKEN> ( future ) ) { </a> 
<a> return ; </a> 
<a> } </a> 
<a> try { </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> throw new IllegalStateException ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> = future ; </a> 
<a> <RARE_TOKEN> ( remoteAddress , localAddress , future ) ; </a> 
<a> int <RARE_TOKEN> = config ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> if ( <RARE_TOKEN> > 0 ) { </a> 
<a> <RARE_TOKEN> = eventLoop ( ) . schedule ( new Runnable ( ) { </a> 
<a> @ Override </a> 
<a> public void run ( ) { </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> <RARE_TOKEN> = new <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> ChannelFuture <RARE_TOKEN> = <RARE_TOKEN> . this . <RARE_TOKEN> ; </a> 
<a> if ( <RARE_TOKEN> != null && </a> 
<a> <RARE_TOKEN> . setFailure ( <RARE_TOKEN> ) ) { </a> 
<a> pipeline ( ) . fireExceptionCaught ( <RARE_TOKEN> ) ; </a> 
<a> close ( <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } , <RARE_TOKEN> , TimeUnit . MILLISECONDS ) ; </a> 
<a> } </a> 
<a> } catch ( Throwable t ) { </a> 
<a> future . setFailure ( t ) ; </a> 
<a> pipeline ( ) . fireExceptionCaught ( t ) ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } else { </a> 
<a> eventLoop ( ) . execute ( new Runnable ( ) { </a> 
<a> @ Override </a> 
<a> public void run ( ) { </a> 
<a> connect ( remoteAddress , localAddress , future ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> protected final void <RARE_TOKEN> ( Throwable t ) { </a> 
<a> <RARE_TOKEN> . setFailure ( t ) ; </a> 
<a> pipeline ( ) . fireExceptionCaught ( t ) ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> protected final void <RARE_TOKEN> ( ) { </a> 
<a> assert eventLoop ( ) . inEventLoop ( ) ; </a> 
<a> assert <RARE_TOKEN> != null ; </a> 
<a> try { </a> 
<a> boolean <RARE_TOKEN> = isActive ( ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> if ( ! <RARE_TOKEN> && isActive ( ) ) { </a> 
<a> pipeline ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } catch ( Throwable t ) { </a> 
<a> <RARE_TOKEN> . setFailure ( t ) ; </a> 
<a> pipeline ( ) . fireExceptionCaught ( t ) ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } finally { </a> 
<a> <RARE_TOKEN> . cancel ( false ) ; </a> 
<a> <RARE_TOKEN> = null ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> protected abstract void <RARE_TOKEN> ( SocketAddress remoteAddress , </a> 
<a> SocketAddress localAddress , ChannelFuture <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . channel . socket . <RARE_TOKEN> ; </a> 
<a> import io . netty . channel . Channel ; </a> 
<a> import io . netty . channel . EventLoop ; </a> 
<a> import java . nio . channels . <RARE_TOKEN> ; </a> 
<a> abstract class <RARE_TOKEN> < V , <RARE_TOKEN> extends Channel > implements <RARE_TOKEN> < V , <RARE_TOKEN> > { </a> 
<a> protected abstract void <RARE_TOKEN> ( V result , <RARE_TOKEN> channel ) ; </a> 
<a> protected abstract void <RARE_TOKEN> ( Throwable <RARE_TOKEN> , <RARE_TOKEN> channel ) ; </a> 
<a> private static final int <RARE_TOKEN> = 4 ; </a> 
<a> private static final <RARE_TOKEN> < Integer > <RARE_TOKEN> = new <RARE_TOKEN> < Integer > ( ) { </a> 
<a> @ Override </a> 
<a> protected Integer <RARE_TOKEN> ( ) { </a> 
<a> return 0 ; </a> 
<a> } </a> 
<a> } ; </a> 
<a> @ Override </a> 
<a> public final void <RARE_TOKEN> ( final V result , final <RARE_TOKEN> channel ) { </a> 
<a> EventLoop loop = channel . eventLoop ( ) ; </a> 
<a> if ( loop . inEventLoop ( ) ) { </a> 
<a> Integer d = <RARE_TOKEN> . get ( ) ; </a> 
<a> if ( d < <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> . set ( d + 1 ) ; </a> 
<a> try { </a> 
<a> <RARE_TOKEN> ( result , channel ) ; </a> 
<a> } finally { </a> 
<a> <RARE_TOKEN> . set ( d ) ; </a> 
<a> } </a> 
<a> return ; </a> 
<a> } </a> 
<a> } </a> 
<a> loop . execute ( new Runnable ( ) { </a> 
<a> @ Override </a> 
<a> public void run ( ) { </a> 
<a> <RARE_TOKEN> ( result , channel ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public final void <RARE_TOKEN> ( final Throwable <RARE_TOKEN> , final <RARE_TOKEN> channel ) { </a> 
<a> EventLoop loop = channel . eventLoop ( ) ; </a> 
<a> if ( loop . inEventLoop ( ) ) { </a> 
<a> Integer d = <RARE_TOKEN> . get ( ) ; </a> 
<a> if ( d < <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> . set ( d + 1 ) ; </a> 
<a> try { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> , channel ) ; </a> 
<a> } finally { </a> 
<a> <RARE_TOKEN> . set ( d ) ; </a> 
<a> } </a> 
<a> return ; </a> 
<a> } </a> 
<a> } </a> 
<a> loop . execute ( new Runnable ( ) { </a> 
<a> @ Override </a> 
<a> public void run ( ) { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> , channel ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . channel . socket . <RARE_TOKEN> ; </a> 
<a> import io . netty . channel . <RARE_TOKEN> ; </a> 
<a> import io . netty . channel . <RARE_TOKEN> ; </a> 
<a> import java . util . concurrent . ThreadFactory ; </a> 
<a> final class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> parent , ThreadFactory threadFactory , <RARE_TOKEN> scheduler ) { </a> 
<a> super ( parent , threadFactory , scheduler ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void run ( ) { </a> 
<a> for ( ; ; ) { </a> 
<a> Runnable task ; </a> 
<a> try { </a> 
<a> task = <RARE_TOKEN> ( ) ; </a> 
<a> task . run ( ) ; </a> 
<a> } catch ( InterruptedException e ) { </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> ( ) ) { </a> 
<a> task = <RARE_TOKEN> ( ) ; </a> 
<a> if ( task == null ) { </a> 
<a> break ; </a> 
<a> } </a> 
<a> task . run ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( boolean inEventLoop ) { </a> 
<a> if ( ! inEventLoop && <RARE_TOKEN> ( ) ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . channel . socket . <RARE_TOKEN> ; </a> 
<a> import io . netty . channel . EventExecutor ; </a> 
<a> import io . netty . channel . <RARE_TOKEN> ; </a> 
<a> import io . netty . channel . <RARE_TOKEN> ; </a> 
<a> import io . netty . channel . <RARE_TOKEN> ; </a> 
<a> import java . io . IOException ; </a> 
<a> import java . lang . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import java . nio . channels . <RARE_TOKEN> ; </a> 
<a> import java . util . <RARE_TOKEN> ; </a> 
<a> import java . util . Collections ; </a> 
<a> import java . util . <RARE_TOKEN> ; </a> 
<a> import java . util . List ; </a> 
<a> import java . util . concurrent . <RARE_TOKEN> ; </a> 
<a> import java . util . concurrent . ConcurrentHashMap ; </a> 
<a> import java . util . concurrent . <RARE_TOKEN> ; </a> 
<a> import java . util . concurrent . ThreadFactory ; </a> 
<a> import java . util . concurrent . TimeUnit ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> private static final <RARE_TOKEN> < Class < ? > , <RARE_TOKEN> [ ] > <RARE_TOKEN> = new ConcurrentHashMap < Class < ? > , <RARE_TOKEN> [ ] > ( ) ; </a> 
<a> private static final <RARE_TOKEN> [ ] <RARE_TOKEN> = new <RARE_TOKEN> [ 0 ] ; </a> 
<a> final <RARE_TOKEN> group ; </a> 
<a> public <RARE_TOKEN> ( ) { </a> 
<a> this ( 0 ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( int <RARE_TOKEN> ) { </a> 
<a> this ( <RARE_TOKEN> , null ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( int <RARE_TOKEN> , ThreadFactory threadFactory ) { </a> 
<a> super ( <RARE_TOKEN> , threadFactory ) ; </a> 
<a> try { </a> 
<a> group = <RARE_TOKEN> . <RARE_TOKEN> ( new <RARE_TOKEN> ( ) ) ; </a> 
<a> } catch ( IOException e ) { </a> 
<a> throw new <RARE_TOKEN> ( "Failed to create an <RARE_TOKEN> , e ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected EventExecutor <RARE_TOKEN> ( </a> 
<a> ThreadFactory threadFactory , <RARE_TOKEN> scheduler , Object ... args ) throws Exception { </a> 
<a> return new <RARE_TOKEN> ( this , threadFactory , scheduler ) ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( Runnable command ) { </a> 
<a> <RARE_TOKEN> ch = null ; </a> 
<a> try { </a> 
<a> ch = <RARE_TOKEN> ( command ) ; </a> 
<a> } catch ( Throwable t ) { </a> 
<a> } </a> 
<a> EventExecutor l ; </a> 
<a> if ( ch != null ) { </a> 
<a> l = ch . eventLoop ( ) ; </a> 
<a> } else { </a> 
<a> l = next ( ) ; </a> 
<a> } </a> 
<a> if ( l . <RARE_TOKEN> ( ) ) { </a> 
<a> command . run ( ) ; </a> 
<a> } else { </a> 
<a> l . execute ( command ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private static <RARE_TOKEN> <RARE_TOKEN> ( Runnable command ) throws Exception { </a> 
<a> Class < ? > <RARE_TOKEN> = command . getClass ( ) ; </a> 
<a> <RARE_TOKEN> [ ] fields = <RARE_TOKEN> . get ( <RARE_TOKEN> ) ; </a> 
<a> if ( fields == null ) { </a> 
<a> try { </a> 
<a> fields = <RARE_TOKEN> ( command , new <RARE_TOKEN> < <RARE_TOKEN> > ( 2 ) ) ; </a> 
<a> } catch ( Throwable t ) { </a> 
<a> } </a> 
<a> if ( fields == null ) { </a> 
<a> fields = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> . put ( <RARE_TOKEN> , fields ) ; </a> 
<a> } </a> 
<a> if ( fields == <RARE_TOKEN> ) { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> final int <RARE_TOKEN> = fields . length - 1 ; </a> 
<a> for ( int i = 0 ; i < <RARE_TOKEN> ; i ++ ) { </a> 
<a> command = ( Runnable ) fields [ i ] . get ( command ) ; </a> 
<a> } </a> 
<a> return ( <RARE_TOKEN> ) fields [ <RARE_TOKEN> ] . get ( command ) ; </a> 
<a> } </a> 
<a> private static <RARE_TOKEN> [ ] <RARE_TOKEN> ( Runnable command , <RARE_TOKEN> < <RARE_TOKEN> > fields ) throws Exception { </a> 
<a> Class < ? > <RARE_TOKEN> = command . getClass ( ) ; </a> 
<a> for ( <RARE_TOKEN> f : <RARE_TOKEN> . <RARE_TOKEN> ( ) ) { </a> 
<a> if ( f . getType ( ) == Runnable . class ) { </a> 
<a> f . <RARE_TOKEN> ( true ) ; </a> 
<a> fields . addLast ( f ) ; </a> 
<a> try { </a> 
<a> <RARE_TOKEN> [ ] <RARE_TOKEN> = <RARE_TOKEN> ( ( Runnable ) f . get ( command ) , fields ) ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } finally { </a> 
<a> fields . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> if ( f . getType ( ) == Object . class ) { </a> 
<a> f . <RARE_TOKEN> ( true ) ; </a> 
<a> fields . addLast ( f ) ; </a> 
<a> try { </a> 
<a> Object <RARE_TOKEN> = f . get ( command ) ; </a> 
<a> if ( <RARE_TOKEN> instanceof <RARE_TOKEN> ) { </a> 
<a> return fields . <RARE_TOKEN> ( new <RARE_TOKEN> [ fields . size ( ) ] ) ; </a> 
<a> } </a> 
<a> } finally { </a> 
<a> fields . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> return null ; </a> 
<a> } </a> 
<a> private final class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> @ Override </a> 
<a> public void shutdown ( ) { </a> 
<a> <RARE_TOKEN> . this . shutdown ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public List < Runnable > <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> . this . shutdown ( ) ; </a> 
<a> return Collections . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> . this . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> . this . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( long timeout , TimeUnit unit ) throws InterruptedException { </a> 
<a> return <RARE_TOKEN> . this . <RARE_TOKEN> ( timeout , unit ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void execute ( Runnable command ) { </a> 
<a> Class < ? extends Runnable > <RARE_TOKEN> = command . getClass ( ) ; </a> 
<a> if ( <RARE_TOKEN> . getName ( ) . startsWith ( <RARE_TOKEN> ) ) { </a> 
<a> <RARE_TOKEN> ( command ) ; </a> 
<a> } else { </a> 
<a> next ( ) . execute ( command ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . channel . socket . <RARE_TOKEN> ; </a> 
<a> import io . netty . buffer . ChannelBufType ; </a> 
<a> import io . netty . channel . ChannelException ; </a> 
<a> import io . netty . channel . ChannelFuture ; </a> 
<a> import io . netty . channel . ChannelMetadata ; </a> 
<a> import io . netty . channel . socket . <RARE_TOKEN> ; </a> 
<a> import io . netty . channel . socket . <RARE_TOKEN> ; </a> 
<a> import io . netty . logging . InternalLogger ; </a> 
<a> import io . netty . logging . InternalLoggerFactory ; </a> 
<a> import java . io . IOException ; </a> 
<a> import java . net . SocketAddress ; </a> 
<a> import java . nio . channels . <RARE_TOKEN> ; </a> 
<a> import java . nio . channels . <RARE_TOKEN> ; </a> 
<a> import java . nio . channels . <RARE_TOKEN> ; </a> 
<a> import java . nio . channels . <RARE_TOKEN> ; </a> 
<a> import java . util . concurrent . atomic . AtomicBoolean ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> implements <RARE_TOKEN> { </a> 
<a> private static final ChannelMetadata <RARE_TOKEN> = new ChannelMetadata ( ChannelBufType . <RARE_TOKEN> , false ) ; </a> 
<a> private static final <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( ) ; </a> 
<a> private static final InternalLogger logger = </a> 
<a> InternalLoggerFactory . getInstance ( <RARE_TOKEN> . class ) ; </a> 
<a> private final <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> private final <RARE_TOKEN> config ; </a> 
<a> private boolean closed ; </a> 
<a> private final AtomicBoolean <RARE_TOKEN> = new AtomicBoolean ( ) ; </a> 
<a> private final Runnable <RARE_TOKEN> = new Runnable ( ) { </a> 
<a> @ Override </a> 
<a> public void run ( ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } ; </a> 
<a> private static <RARE_TOKEN> <RARE_TOKEN> ( <RARE_TOKEN> group ) { </a> 
<a> try { </a> 
<a> return <RARE_TOKEN> . open ( group ) ; </a> 
<a> } catch ( IOException e ) { </a> 
<a> throw new ChannelException ( "Failed to open a <RARE_TOKEN> , e ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( <RARE_TOKEN> group ) { </a> 
<a> this ( group , group ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> , <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> super ( null , null , <RARE_TOKEN> , <RARE_TOKEN> ( <RARE_TOKEN> . group ) ) ; </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> config = new <RARE_TOKEN> ( javaChannel ( ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected <RARE_TOKEN> javaChannel ( ) { </a> 
<a> return ( <RARE_TOKEN> ) super . javaChannel ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean isActive ( ) { </a> 
<a> return javaChannel ( ) . isOpen ( ) && <RARE_TOKEN> ( ) != null ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ChannelMetadata <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected SocketAddress <RARE_TOKEN> ( ) { </a> 
<a> try { </a> 
<a> return javaChannel ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> } catch ( IOException e ) { </a> 
<a> throw new ChannelException ( e ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected SocketAddress <RARE_TOKEN> ( ) { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( SocketAddress localAddress ) throws Exception { </a> 
<a> <RARE_TOKEN> ch = javaChannel ( ) ; </a> 
<a> ch . bind ( localAddress ) ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( ) { </a> 
<a> if ( <RARE_TOKEN> . get ( ) ) { </a> 
<a> return ; </a> 
<a> } </a> 
<a> javaChannel ( ) . <RARE_TOKEN> ( this , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( ) throws Exception { </a> 
<a> if ( ! closed ) { </a> 
<a> closed = true ; </a> 
<a> javaChannel ( ) . close ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected boolean <RARE_TOKEN> ( ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( </a> 
<a> SocketAddress remoteAddress , SocketAddress localAddress , ChannelFuture future ) { </a> 
<a> future . setFailure ( new UnsupportedOperationException ( ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( ) throws Exception { </a> 
<a> throw new UnsupportedOperationException ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected Runnable <RARE_TOKEN> ( ) throws Exception { </a> 
<a> return super . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> private static final class <RARE_TOKEN> </a> 
<a> extends <RARE_TOKEN> < <RARE_TOKEN> , <RARE_TOKEN> > { </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( <RARE_TOKEN> ch , <RARE_TOKEN> channel ) { </a> 
<a> channel . <RARE_TOKEN> ( ) ; </a> 
<a> channel . pipeline ( ) . <RARE_TOKEN> ( ) . add ( </a> 
<a> new <RARE_TOKEN> ( channel , null , channel . <RARE_TOKEN> , ch ) ) ; </a> 
<a> if ( ! channel . <RARE_TOKEN> . get ( ) ) { </a> 
<a> channel . pipeline ( ) . fireInboundBufferUpdated ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( Throwable t , <RARE_TOKEN> channel ) { </a> 
<a> boolean <RARE_TOKEN> = false ; </a> 
<a> if ( t instanceof <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> = true ; </a> 
<a> channel . closed = true ; </a> 
<a> } </a> 
<a> if ( channel . isOpen ( ) && ! <RARE_TOKEN> ) { </a> 
<a> logger . warn ( "Failed to create a new channel from an <RARE_TOKEN> <RARE_TOKEN> , t ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public <RARE_TOKEN> config ( ) { </a> 
<a> return config ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected <RARE_TOKEN> <RARE_TOKEN> ( ) { </a> 
<a> return new <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> private final class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> . set ( true ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> if ( <RARE_TOKEN> . <RARE_TOKEN> ( true , false ) ) { </a> 
<a> if ( eventLoop ( ) . inEventLoop ( ) ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } else { </a> 
<a> eventLoop ( ) . execute ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . channel . socket . <RARE_TOKEN> ; </a> 
<a> import static io . netty . channel . ChannelOption . * ; </a> 
<a> import io . netty . channel . ChannelException ; </a> 
<a> import io . netty . channel . ChannelOption ; </a> 
<a> import io . netty . channel . <RARE_TOKEN> ; </a> 
<a> import io . netty . channel . socket . <RARE_TOKEN> ; </a> 
<a> import io . netty . util . <RARE_TOKEN> ; </a> 
<a> import java . io . IOException ; </a> 
<a> import java . net . <RARE_TOKEN> ; </a> 
<a> import java . nio . channels . <RARE_TOKEN> ; </a> 
<a> import java . util . Map ; </a> 
<a> final class <RARE_TOKEN> extends <RARE_TOKEN> </a> 
<a> implements <RARE_TOKEN> { </a> 
<a> private final <RARE_TOKEN> channel ; </a> 
<a> private volatile int <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> channel ) { </a> 
<a> this . channel = channel ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public Map < ChannelOption < ? > , Object > <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ( super . <RARE_TOKEN> ( ) , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> @ SuppressWarnings ( "unchecked" ) </a> 
<a> public < T > T <RARE_TOKEN> ( ChannelOption < T > option ) { </a> 
<a> if ( option == <RARE_TOKEN> ) { </a> 
<a> return ( T ) Integer . valueOf ( <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> if ( option == <RARE_TOKEN> ) { </a> 
<a> return ( T ) Boolean . valueOf ( <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> if ( option == <RARE_TOKEN> ) { </a> 
<a> return ( T ) Integer . valueOf ( <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> return super . <RARE_TOKEN> ( option ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public < T > boolean <RARE_TOKEN> ( ChannelOption < T > option , T value ) { </a> 
<a> <RARE_TOKEN> ( option , value ) ; </a> 
<a> if ( option == <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( ( Integer ) value ) ; </a> 
<a> } else if ( option == <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( ( Boolean ) value ) ; </a> 
<a> } else if ( option == <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( ( Integer ) value ) ; </a> 
<a> } else { </a> 
<a> return super . <RARE_TOKEN> ( option , value ) ; </a> 
<a> } </a> 
<a> return true ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> try { </a> 
<a> return channel . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> } catch ( IOException e ) { </a> 
<a> throw new ChannelException ( e ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( boolean <RARE_TOKEN> ) { </a> 
<a> try { </a> 
<a> channel . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } catch ( IOException e ) { </a> 
<a> throw new ChannelException ( e ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int <RARE_TOKEN> ( ) { </a> 
<a> try { </a> 
<a> return channel . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> } catch ( IOException e ) { </a> 
<a> throw new ChannelException ( e ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( int <RARE_TOKEN> ) { </a> 
<a> try { </a> 
<a> channel . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } catch ( IOException e ) { </a> 
<a> throw new ChannelException ( e ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( int <RARE_TOKEN> , int <RARE_TOKEN> , int <RARE_TOKEN> ) { </a> 
<a> throw new UnsupportedOperationException ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( int <RARE_TOKEN> ) { </a> 
<a> if ( <RARE_TOKEN> < 0 ) { </a> 
<a> throw new IllegalArgumentException ( <RARE_TOKEN> " + <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . channel . socket . <RARE_TOKEN> ; </a> 
<a> import io . netty . buffer . ByteBuf ; </a> 
<a> import io . netty . buffer . ChannelBufType ; </a> 
<a> import io . netty . channel . ChannelException ; </a> 
<a> import io . netty . channel . <RARE_TOKEN> ; </a> 
<a> import io . netty . channel . ChannelFuture ; </a> 
<a> import io . netty . channel . ChannelMetadata ; </a> 
<a> import io . netty . channel . ChannelPipeline ; </a> 
<a> import io . netty . channel . socket . SocketChannel ; </a> 
<a> import java . io . IOException ; </a> 
<a> import java . net . InetSocketAddress ; </a> 
<a> import java . net . SocketAddress ; </a> 
<a> import java . nio . ByteBuffer ; </a> 
<a> import java . nio . channels . <RARE_TOKEN> ; </a> 
<a> import java . nio . channels . <RARE_TOKEN> ; </a> 
<a> import java . nio . channels . <RARE_TOKEN> ; </a> 
<a> import java . nio . channels . <RARE_TOKEN> ; </a> 
<a> import java . nio . channels . <RARE_TOKEN> ; </a> 
<a> import java . util . concurrent . TimeUnit ; </a> 
<a> import java . util . concurrent . atomic . AtomicBoolean ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> implements SocketChannel { </a> 
<a> private static final ChannelMetadata <RARE_TOKEN> = new ChannelMetadata ( ChannelBufType . <RARE_TOKEN> , false ) ; </a> 
<a> private static final <RARE_TOKEN> < Void , <RARE_TOKEN> > <RARE_TOKEN> = new <RARE_TOKEN> ( ) ; </a> 
<a> private static final <RARE_TOKEN> < Integer , <RARE_TOKEN> > <RARE_TOKEN> = new <RARE_TOKEN> < Integer > ( ) ; </a> 
<a> private static final <RARE_TOKEN> < Integer , <RARE_TOKEN> > <RARE_TOKEN> = new <RARE_TOKEN> < Integer > ( ) ; </a> 
<a> private static final <RARE_TOKEN> < Long , <RARE_TOKEN> > <RARE_TOKEN> = new <RARE_TOKEN> < Long > ( ) ; </a> 
<a> private static final <RARE_TOKEN> < Long , <RARE_TOKEN> > <RARE_TOKEN> = new <RARE_TOKEN> < Long > ( ) ; </a> 
<a> private static <RARE_TOKEN> <RARE_TOKEN> ( <RARE_TOKEN> group ) { </a> 
<a> try { </a> 
<a> return <RARE_TOKEN> . open ( group ) ; </a> 
<a> } catch ( IOException e ) { </a> 
<a> throw new ChannelException ( "Failed to open a <RARE_TOKEN> , e ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private final <RARE_TOKEN> config ; </a> 
<a> private boolean <RARE_TOKEN> ; </a> 
<a> private final AtomicBoolean <RARE_TOKEN> = new AtomicBoolean ( ) ; </a> 
<a> private final AtomicBoolean <RARE_TOKEN> = new AtomicBoolean ( ) ; </a> 
<a> private final Runnable <RARE_TOKEN> = new Runnable ( ) { </a> 
<a> @ Override </a> 
<a> public void run ( ) { </a> 
<a> <RARE_TOKEN> . this . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } ; </a> 
<a> public <RARE_TOKEN> ( <RARE_TOKEN> eventLoop ) { </a> 
<a> this ( null , null , eventLoop , <RARE_TOKEN> ( eventLoop . group ) ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( </a> 
<a> <RARE_TOKEN> parent , Integer id , </a> 
<a> <RARE_TOKEN> eventLoop , <RARE_TOKEN> ch ) { </a> 
<a> super ( parent , id , eventLoop , ch ) ; </a> 
<a> config = new <RARE_TOKEN> ( ch ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean isActive ( ) { </a> 
<a> return javaChannel ( ) . isOpen ( ) && <RARE_TOKEN> ( ) != null ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected <RARE_TOKEN> javaChannel ( ) { </a> 
<a> return ( <RARE_TOKEN> ) super . javaChannel ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ChannelMetadata <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( SocketAddress remoteAddress , SocketAddress localAddress , final ChannelFuture future ) { </a> 
<a> if ( localAddress != null ) { </a> 
<a> try { </a> 
<a> javaChannel ( ) . bind ( localAddress ) ; </a> 
<a> } catch ( IOException e ) { </a> 
<a> future . setFailure ( e ) ; </a> 
<a> return ; </a> 
<a> } </a> 
<a> } </a> 
<a> javaChannel ( ) . connect ( remoteAddress , this , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected InetSocketAddress <RARE_TOKEN> ( ) { </a> 
<a> try { </a> 
<a> return ( InetSocketAddress ) javaChannel ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> } catch ( IOException e ) { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected InetSocketAddress <RARE_TOKEN> ( ) { </a> 
<a> try { </a> 
<a> return ( InetSocketAddress ) javaChannel ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> } catch ( IOException e ) { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected Runnable <RARE_TOKEN> ( ) throws Exception { </a> 
<a> super . <RARE_TOKEN> ( ) ; </a> 
<a> if ( remoteAddress ( ) == null ) { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> return new Runnable ( ) { </a> 
<a> @ Override </a> 
<a> public void run ( ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } ; </a> 
<a> } </a> 
<a> private static void <RARE_TOKEN> ( ByteBuf byteBuf ) { </a> 
<a> final int writerIndex = byteBuf . writerIndex ( ) ; </a> 
<a> final int capacity = byteBuf . capacity ( ) ; </a> 
<a> if ( capacity != writerIndex ) { </a> 
<a> return ; </a> 
<a> } </a> 
<a> final int maxCapacity = byteBuf . maxCapacity ( ) ; </a> 
<a> if ( capacity == maxCapacity ) { </a> 
<a> return ; </a> 
<a> } </a> 
<a> final int <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> if ( writerIndex + <RARE_TOKEN> > maxCapacity ) { </a> 
<a> byteBuf . capacity ( maxCapacity ) ; </a> 
<a> } else { </a> 
<a> byteBuf . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( SocketAddress localAddress ) throws Exception { </a> 
<a> javaChannel ( ) . bind ( localAddress ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( ) throws Exception { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( ) throws Exception { </a> 
<a> javaChannel ( ) . close ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected boolean <RARE_TOKEN> ( ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( ByteBuf buf ) throws Exception { </a> 
<a> if ( <RARE_TOKEN> ) { </a> 
<a> return ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> = true ; </a> 
<a> buf . <RARE_TOKEN> ( ) ; </a> 
<a> if ( buf . readable ( ) ) { </a> 
<a> if ( buf . <RARE_TOKEN> ( ) ) { </a> 
<a> ByteBuffer [ ] buffers = buf . nioBuffers ( buf . readerIndex ( ) , buf . readableBytes ( ) ) ; </a> 
<a> javaChannel ( ) . write ( buffers , 0 , buffers . length , config . <RARE_TOKEN> ( ) , </a> 
<a> TimeUnit . MILLISECONDS , <RARE_TOKEN> . this , <RARE_TOKEN> ) ; </a> 
<a> } else { </a> 
<a> javaChannel ( ) . write ( buf . nioBuffer ( ) , config . <RARE_TOKEN> ( ) , TimeUnit . MILLISECONDS , </a> 
<a> this , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> = false ; </a> 
<a> } </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( ) { </a> 
<a> if ( <RARE_TOKEN> . get ( ) ) { </a> 
<a> return ; </a> 
<a> } </a> 
<a> if ( ! <RARE_TOKEN> . <RARE_TOKEN> ( false , true ) ) { </a> 
<a> return ; </a> 
<a> } </a> 
<a> ByteBuf byteBuf = pipeline ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> if ( ! byteBuf . readable ( ) ) { </a> 
<a> byteBuf . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( byteBuf ) ; </a> 
<a> if ( byteBuf . <RARE_TOKEN> ( ) ) { </a> 
<a> ByteBuffer [ ] buffers = byteBuf . nioBuffers ( byteBuf . writerIndex ( ) , byteBuf . <RARE_TOKEN> ( ) ) ; </a> 
<a> javaChannel ( ) . read ( buffers , 0 , buffers . length , config . <RARE_TOKEN> ( ) , </a> 
<a> TimeUnit . MILLISECONDS , <RARE_TOKEN> . this , <RARE_TOKEN> ) ; </a> 
<a> } else { </a> 
<a> ByteBuffer buffer = byteBuf . nioBuffer ( byteBuf . writerIndex ( ) , byteBuf . <RARE_TOKEN> ( ) ) ; </a> 
<a> javaChannel ( ) . read ( buffer , config . <RARE_TOKEN> ( ) , TimeUnit . MILLISECONDS , </a> 
<a> <RARE_TOKEN> . this , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private static final class <RARE_TOKEN> < T extends <RARE_TOKEN> > extends <RARE_TOKEN> < T , <RARE_TOKEN> > { </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( T result , <RARE_TOKEN> channel ) { </a> 
<a> ByteBuf buf = channel . unsafe ( ) . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> int <RARE_TOKEN> = result . <RARE_TOKEN> ( ) ; </a> 
<a> if ( <RARE_TOKEN> > 0 ) { </a> 
<a> buf . readerIndex ( buf . readerIndex ( ) + <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> boolean <RARE_TOKEN> = ! buf . readable ( ) ; </a> 
<a> if ( <RARE_TOKEN> ) { </a> 
<a> buf . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = channel . <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> channel . <RARE_TOKEN> = false ; </a> 
<a> if ( ! channel . isActive ( ) ) { </a> 
<a> return ; </a> 
<a> } </a> 
<a> if ( buf . readable ( ) ) { </a> 
<a> try { </a> 
<a> channel . <RARE_TOKEN> ( buf ) ; </a> 
<a> } catch ( Exception e ) { </a> 
<a> <RARE_TOKEN> ( e , channel ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( Throwable cause , <RARE_TOKEN> channel ) { </a> 
<a> channel . <RARE_TOKEN> . <RARE_TOKEN> ( cause ) ; </a> 
<a> channel . pipeline ( ) . fireExceptionCaught ( cause ) ; </a> 
<a> if ( cause instanceof <RARE_TOKEN> ) { </a> 
<a> channel . unsafe ( ) . close ( channel . unsafe ( ) . <RARE_TOKEN> ( ) ) ; </a> 
<a> return ; </a> 
<a> } </a> 
<a> ByteBuf buf = channel . unsafe ( ) . <RARE_TOKEN> ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> if ( ! buf . readable ( ) ) { </a> 
<a> buf . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> channel . <RARE_TOKEN> = false ; </a> 
<a> } </a> 
<a> } </a> 
<a> private static final class <RARE_TOKEN> < T extends <RARE_TOKEN> > extends <RARE_TOKEN> < T , <RARE_TOKEN> > { </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( T result , <RARE_TOKEN> channel ) { </a> 
<a> final ChannelPipeline pipeline = channel . pipeline ( ) ; </a> 
<a> final ByteBuf byteBuf = pipeline . <RARE_TOKEN> ( ) ; </a> 
<a> boolean closed = false ; </a> 
<a> boolean read = false ; </a> 
<a> try { </a> 
<a> int <RARE_TOKEN> = result . <RARE_TOKEN> ( ) ; </a> 
<a> if ( <RARE_TOKEN> > 0 ) { </a> 
<a> byteBuf . writerIndex ( byteBuf . writerIndex ( ) + <RARE_TOKEN> ) ; </a> 
<a> read = true ; </a> 
<a> } else if ( <RARE_TOKEN> < 0 ) { </a> 
<a> closed = true ; </a> 
<a> } </a> 
<a> } catch ( Throwable t ) { </a> 
<a> if ( read ) { </a> 
<a> read = false ; </a> 
<a> if ( ! channel . <RARE_TOKEN> . get ( ) ) { </a> 
<a> pipeline . fireInboundBufferUpdated ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> if ( ! ( t instanceof <RARE_TOKEN> ) ) { </a> 
<a> pipeline . fireExceptionCaught ( t ) ; </a> 
<a> if ( t instanceof IOException ) { </a> 
<a> channel . unsafe ( ) . close ( channel . unsafe ( ) . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } finally { </a> 
<a> channel . <RARE_TOKEN> . set ( false ) ; </a> 
<a> if ( read ) { </a> 
<a> if ( ! channel . <RARE_TOKEN> . get ( ) ) { </a> 
<a> pipeline . fireInboundBufferUpdated ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> if ( closed && channel . isOpen ( ) ) { </a> 
<a> channel . unsafe ( ) . close ( channel . unsafe ( ) . <RARE_TOKEN> ( ) ) ; </a> 
<a> } else { </a> 
<a> channel . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( Throwable t , <RARE_TOKEN> channel ) { </a> 
<a> if ( t instanceof <RARE_TOKEN> ) { </a> 
<a> return ; </a> 
<a> } </a> 
<a> channel . pipeline ( ) . fireExceptionCaught ( t ) ; </a> 
<a> if ( t instanceof IOException || t instanceof <RARE_TOKEN> ) { </a> 
<a> channel . unsafe ( ) . close ( channel . unsafe ( ) . <RARE_TOKEN> ( ) ) ; </a> 
<a> } else { </a> 
<a> channel . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> private static final class <RARE_TOKEN> extends <RARE_TOKEN> < Void , <RARE_TOKEN> > { </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( Void result , <RARE_TOKEN> channel ) { </a> 
<a> ( ( <RARE_TOKEN> ) channel . unsafe ( ) ) . <RARE_TOKEN> ( ) ; </a> 
<a> channel . pipeline ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> channel . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( Throwable <RARE_TOKEN> , <RARE_TOKEN> channel ) { </a> 
<a> ( ( <RARE_TOKEN> ) channel . unsafe ( ) ) . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public <RARE_TOKEN> config ( ) { </a> 
<a> return config ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected <RARE_TOKEN> <RARE_TOKEN> ( ) { </a> 
<a> return new <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> private final class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> . set ( true ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> if ( <RARE_TOKEN> . <RARE_TOKEN> ( true , false ) ) { </a> 
<a> if ( eventLoop ( ) . inEventLoop ( ) ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } else { </a> 
<a> eventLoop ( ) . execute ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . channel . socket . <RARE_TOKEN> ; </a> 
<a> import static io . netty . channel . ChannelOption . * ; </a> 
<a> import io . netty . channel . ChannelException ; </a> 
<a> import io . netty . channel . ChannelOption ; </a> 
<a> import io . netty . channel . <RARE_TOKEN> ; </a> 
<a> import io . netty . channel . socket . <RARE_TOKEN> ; </a> 
<a> import java . io . IOException ; </a> 
<a> import java . net . <RARE_TOKEN> ; </a> 
<a> import java . nio . channels . <RARE_TOKEN> ; </a> 
<a> import java . nio . channels . <RARE_TOKEN> ; </a> 
<a> import java . util . Map ; </a> 
<a> final class <RARE_TOKEN> extends <RARE_TOKEN> </a> 
<a> implements <RARE_TOKEN> { </a> 
<a> private final <RARE_TOKEN> channel ; </a> 
<a> private volatile long <RARE_TOKEN> ; </a> 
<a> private volatile long <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> channel ) { </a> 
<a> if ( channel == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> this . channel = channel ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public Map < ChannelOption < ? > , Object > <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ( </a> 
<a> super . <RARE_TOKEN> ( ) , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> @ SuppressWarnings ( "unchecked" ) </a> 
<a> public < T > T <RARE_TOKEN> ( ChannelOption < T > option ) { </a> 
<a> if ( option == <RARE_TOKEN> ) { </a> 
<a> return ( T ) Integer . valueOf ( <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> if ( option == <RARE_TOKEN> ) { </a> 
<a> return ( T ) Integer . valueOf ( <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> if ( option == <RARE_TOKEN> ) { </a> 
<a> return ( T ) Boolean . valueOf ( <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> if ( option == <RARE_TOKEN> ) { </a> 
<a> return ( T ) Boolean . valueOf ( <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> if ( option == <RARE_TOKEN> ) { </a> 
<a> return ( T ) Boolean . valueOf ( <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> if ( option == <RARE_TOKEN> ) { </a> 
<a> return ( T ) Integer . valueOf ( <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> if ( option == <RARE_TOKEN> ) { </a> 
<a> return ( T ) Integer . valueOf ( <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> if ( option == <RARE_TOKEN> ) { </a> 
<a> return ( T ) Long . valueOf ( <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> if ( option == <RARE_TOKEN> ) { </a> 
<a> return ( T ) Long . valueOf ( <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> return super . <RARE_TOKEN> ( option ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public < T > boolean <RARE_TOKEN> ( ChannelOption < T > option , T value ) { </a> 
<a> <RARE_TOKEN> ( option , value ) ; </a> 
<a> if ( option == <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( ( Integer ) value ) ; </a> 
<a> } else if ( option == <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( ( Integer ) value ) ; </a> 
<a> } else if ( option == <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( ( Boolean ) value ) ; </a> 
<a> } else if ( option == <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( ( Boolean ) value ) ; </a> 
<a> } else if ( option == <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( ( Boolean ) value ) ; </a> 
<a> } else if ( option == <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( ( Integer ) value ) ; </a> 
<a> } else if ( option == <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( ( Integer ) value ) ; </a> 
<a> } else if ( option == <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( ( Long ) value ) ; </a> 
<a> } else if ( option == <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( ( Long ) value ) ; </a> 
<a> } else { </a> 
<a> return super . <RARE_TOKEN> ( option , value ) ; </a> 
<a> } </a> 
<a> return true ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int <RARE_TOKEN> ( ) { </a> 
<a> try { </a> 
<a> return channel . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> } catch ( IOException e ) { </a> 
<a> throw new ChannelException ( e ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int <RARE_TOKEN> ( ) { </a> 
<a> try { </a> 
<a> return channel . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> } catch ( IOException e ) { </a> 
<a> throw new ChannelException ( e ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int <RARE_TOKEN> ( ) { </a> 
<a> try { </a> 
<a> return channel . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> } catch ( IOException e ) { </a> 
<a> throw new ChannelException ( e ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int <RARE_TOKEN> ( ) { </a> 
<a> try { </a> 
<a> return channel . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> } catch ( IOException e ) { </a> 
<a> throw new ChannelException ( e ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> try { </a> 
<a> return channel . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> } catch ( IOException e ) { </a> 
<a> throw new ChannelException ( e ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> try { </a> 
<a> return channel . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> } catch ( IOException e ) { </a> 
<a> throw new ChannelException ( e ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> try { </a> 
<a> return channel . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> } catch ( IOException e ) { </a> 
<a> throw new ChannelException ( e ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( boolean <RARE_TOKEN> ) { </a> 
<a> try { </a> 
<a> channel . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } catch ( IOException e ) { </a> 
<a> throw new ChannelException ( e ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( </a> 
<a> int <RARE_TOKEN> , int <RARE_TOKEN> , int <RARE_TOKEN> ) { </a> 
<a> throw new UnsupportedOperationException ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( int <RARE_TOKEN> ) { </a> 
<a> try { </a> 
<a> channel . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } catch ( IOException e ) { </a> 
<a> throw new ChannelException ( e ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( boolean <RARE_TOKEN> ) { </a> 
<a> try { </a> 
<a> channel . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } catch ( IOException e ) { </a> 
<a> throw new ChannelException ( e ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( int <RARE_TOKEN> ) { </a> 
<a> try { </a> 
<a> channel . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } catch ( IOException e ) { </a> 
<a> throw new ChannelException ( e ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( int <RARE_TOKEN> ) { </a> 
<a> try { </a> 
<a> channel . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } catch ( IOException e ) { </a> 
<a> throw new ChannelException ( e ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( boolean <RARE_TOKEN> ) { </a> 
<a> try { </a> 
<a> channel . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } catch ( IOException e ) { </a> 
<a> throw new ChannelException ( e ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( int <RARE_TOKEN> ) { </a> 
<a> try { </a> 
<a> channel . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } catch ( IOException e ) { </a> 
<a> throw new ChannelException ( e ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( long <RARE_TOKEN> ) { </a> 
<a> if ( <RARE_TOKEN> < 0 ) { </a> 
<a> throw new IllegalArgumentException ( <RARE_TOKEN> " + <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public void <RARE_TOKEN> ( long <RARE_TOKEN> ) { </a> 
<a> if ( <RARE_TOKEN> < 0 ) { </a> 
<a> throw new IllegalArgumentException ( <RARE_TOKEN> " + <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public long <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public long <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . channel . socket . nio ; </a> 
<a> import io . netty . buffer . ByteBuf ; </a> 
<a> import io . netty . channel . Channel ; </a> 
<a> import io . netty . channel . ChannelPipeline ; </a> 
<a> import java . io . IOException ; </a> 
<a> import java . nio . channels . <RARE_TOKEN> ; </a> 
<a> import java . nio . channels . SelectionKey ; </a> 
<a> abstract class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> protected <RARE_TOKEN> ( </a> 
<a> Channel parent , Integer id , <RARE_TOKEN> ch ) { </a> 
<a> super ( parent , id , ch , SelectionKey . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected abstract <RARE_TOKEN> <RARE_TOKEN> ( ) ; </a> 
<a> abstract class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> @ Override </a> 
<a> public void read ( ) { </a> 
<a> assert eventLoop ( ) . inEventLoop ( ) ; </a> 
<a> final ChannelPipeline pipeline = pipeline ( ) ; </a> 
<a> final ByteBuf byteBuf = pipeline . <RARE_TOKEN> ( ) ; </a> 
<a> boolean closed = false ; </a> 
<a> boolean read = false ; </a> 
<a> try { </a> 
<a> <RARE_TOKEN> ( byteBuf ) ; </a> 
<a> loop : for ( ; ; ) { </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> ( byteBuf ) ; </a> 
<a> if ( <RARE_TOKEN> > 0 ) { </a> 
<a> read = true ; </a> 
<a> } else if ( <RARE_TOKEN> < 0 ) { </a> 
<a> closed = true ; </a> 
<a> break ; </a> 
<a> } </a> 
<a> switch ( <RARE_TOKEN> ( byteBuf ) ) { </a> 
<a> case 0 : </a> 
<a> break loop ; </a> 
<a> case 1 : </a> 
<a> break ; </a> 
<a> case 2 : </a> 
<a> if ( read ) { </a> 
<a> read = false ; </a> 
<a> pipeline . fireInboundBufferUpdated ( ) ; </a> 
<a> if ( ! byteBuf . <RARE_TOKEN> ( ) ) { </a> 
<a> throw new IllegalStateException ( </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> handler <RARE_TOKEN> buffer is <RARE_TOKEN> must <RARE_TOKEN> <RARE_TOKEN> " + </a> 
<a> <RARE_TOKEN> one <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } catch ( Throwable t ) { </a> 
<a> if ( read ) { </a> 
<a> read = false ; </a> 
<a> pipeline . fireInboundBufferUpdated ( ) ; </a> 
<a> } </a> 
<a> pipeline ( ) . fireExceptionCaught ( t ) ; </a> 
<a> if ( t instanceof IOException ) { </a> 
<a> close ( <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> } finally { </a> 
<a> if ( read ) { </a> 
<a> pipeline . fireInboundBufferUpdated ( ) ; </a> 
<a> } </a> 
<a> if ( closed && isOpen ( ) ) { </a> 
<a> close ( <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( ByteBuf buf ) throws Exception { </a> 
<a> if ( ! buf . readable ( ) ) { </a> 
<a> buf . clear ( ) ; </a> 
<a> return ; </a> 
<a> } </a> 
<a> for ( int i = config ( ) . <RARE_TOKEN> ( ) - 1 ; i >= 0 ; i -- ) { </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> ( buf , i == 0 ) ; </a> 
<a> if ( <RARE_TOKEN> > 0 ) { </a> 
<a> break ; </a> 
<a> } </a> 
<a> if ( ! buf . readable ( ) ) { </a> 
<a> buf . clear ( ) ; </a> 
<a> break ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> protected abstract int <RARE_TOKEN> ( ByteBuf buf ) throws Exception ; </a> 
<a> protected abstract int <RARE_TOKEN> ( ByteBuf buf , boolean <RARE_TOKEN> ) throws Exception ; </a> 
<a> private static int <RARE_TOKEN> ( ByteBuf byteBuf ) { </a> 
<a> final int writerIndex = byteBuf . writerIndex ( ) ; </a> 
<a> final int capacity = byteBuf . capacity ( ) ; </a> 
<a> if ( capacity != writerIndex ) { </a> 
<a> return 0 ; </a> 
<a> } </a> 
<a> final int maxCapacity = byteBuf . maxCapacity ( ) ; </a> 
<a> if ( capacity == maxCapacity ) { </a> 
<a> return 2 ; </a> 
<a> } </a> 
<a> final int <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> if ( writerIndex + <RARE_TOKEN> > maxCapacity ) { </a> 
<a> byteBuf . capacity ( maxCapacity ) ; </a> 
<a> } else { </a> 
<a> byteBuf . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> return 1 ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . channel . socket . nio ; </a> 
<a> import io . netty . channel . <RARE_TOKEN> ; </a> 
<a> import io . netty . channel . Channel ; </a> 
<a> import io . netty . channel . ChannelException ; </a> 
<a> import io . netty . channel . ChannelFuture ; </a> 
<a> import io . netty . channel . EventLoop ; </a> 
<a> import io . netty . logging . InternalLogger ; </a> 
<a> import io . netty . logging . InternalLoggerFactory ; </a> 
<a> import java . io . IOException ; </a> 
<a> import java . net . <RARE_TOKEN> ; </a> 
<a> import java . net . InetSocketAddress ; </a> 
<a> import java . net . SocketAddress ; </a> 
<a> import java . nio . channels . <RARE_TOKEN> ; </a> 
<a> import java . nio . channels . SelectionKey ; </a> 
<a> import java . util . concurrent . ScheduledFuture ; </a> 
<a> import java . util . concurrent . TimeUnit ; </a> 
<a> public abstract class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> private static final InternalLogger logger = </a> 
<a> InternalLoggerFactory . getInstance ( <RARE_TOKEN> . class ) ; </a> 
<a> private final <RARE_TOKEN> ch ; </a> 
<a> private final int <RARE_TOKEN> ; </a> 
<a> private volatile SelectionKey <RARE_TOKEN> ; </a> 
<a> private ChannelFuture <RARE_TOKEN> ; </a> 
<a> private ScheduledFuture < ? > <RARE_TOKEN> ; </a> 
<a> private <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> protected <RARE_TOKEN> ( </a> 
<a> Channel parent , Integer id , <RARE_TOKEN> ch , int <RARE_TOKEN> ) { </a> 
<a> super ( parent , id ) ; </a> 
<a> this . ch = ch ; </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> try { </a> 
<a> ch . <RARE_TOKEN> ( false ) ; </a> 
<a> } catch ( IOException e ) { </a> 
<a> try { </a> 
<a> ch . close ( ) ; </a> 
<a> } catch ( IOException <RARE_TOKEN> ) { </a> 
<a> if ( logger . <RARE_TOKEN> ( ) ) { </a> 
<a> logger . warn ( </a> 
<a> "Failed to close a <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> throw new ChannelException ( "Failed to <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> , e ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean isOpen ( ) { </a> 
<a> return ch . isOpen ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public InetSocketAddress localAddress ( ) { </a> 
<a> return ( InetSocketAddress ) super . localAddress ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public InetSocketAddress remoteAddress ( ) { </a> 
<a> return ( InetSocketAddress ) super . remoteAddress ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public <RARE_TOKEN> unsafe ( ) { </a> 
<a> return ( <RARE_TOKEN> ) super . unsafe ( ) ; </a> 
<a> } </a> 
<a> protected <RARE_TOKEN> javaChannel ( ) { </a> 
<a> return ch ; </a> 
<a> } </a> 
<a> protected SelectionKey <RARE_TOKEN> ( ) { </a> 
<a> assert <RARE_TOKEN> != null ; </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> public interface <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> java . nio . channels . Channel ch ( ) ; </a> 
<a> void <RARE_TOKEN> ( ) ; </a> 
<a> void read ( ) ; </a> 
<a> } </a> 
<a> protected abstract class <RARE_TOKEN> extends <RARE_TOKEN> implements <RARE_TOKEN> { </a> 
<a> @ Override </a> 
<a> public java . nio . channels . Channel ch ( ) { </a> 
<a> return javaChannel ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void connect ( </a> 
<a> final SocketAddress remoteAddress , final SocketAddress localAddress , final ChannelFuture future ) { </a> 
<a> if ( eventLoop ( ) . inEventLoop ( ) ) { </a> 
<a> if ( ! <RARE_TOKEN> ( future ) ) { </a> 
<a> return ; </a> 
<a> } </a> 
<a> try { </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> throw new IllegalStateException ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> boolean <RARE_TOKEN> = isActive ( ) ; </a> 
<a> if ( <RARE_TOKEN> ( remoteAddress , localAddress ) ) { </a> 
<a> future . <RARE_TOKEN> ( ) ; </a> 
<a> if ( ! <RARE_TOKEN> && isActive ( ) ) { </a> 
<a> pipeline ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> = future ; </a> 
<a> int <RARE_TOKEN> = config ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> if ( <RARE_TOKEN> > 0 ) { </a> 
<a> <RARE_TOKEN> = eventLoop ( ) . schedule ( new Runnable ( ) { </a> 
<a> @ Override </a> 
<a> public void run ( ) { </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> <RARE_TOKEN> = new <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> ChannelFuture <RARE_TOKEN> = <RARE_TOKEN> . this . <RARE_TOKEN> ; </a> 
<a> if ( <RARE_TOKEN> != null && <RARE_TOKEN> . setFailure ( <RARE_TOKEN> ) ) { </a> 
<a> pipeline ( ) . fireExceptionCaught ( <RARE_TOKEN> ) ; </a> 
<a> close ( <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } , <RARE_TOKEN> , TimeUnit . MILLISECONDS ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } catch ( Throwable t ) { </a> 
<a> future . setFailure ( t ) ; </a> 
<a> pipeline ( ) . fireExceptionCaught ( t ) ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } else { </a> 
<a> eventLoop ( ) . execute ( new Runnable ( ) { </a> 
<a> @ Override </a> 
<a> public void run ( ) { </a> 
<a> connect ( remoteAddress , localAddress , future ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> assert eventLoop ( ) . inEventLoop ( ) ; </a> 
<a> assert <RARE_TOKEN> != null ; </a> 
<a> try { </a> 
<a> boolean <RARE_TOKEN> = isActive ( ) ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> if ( ! <RARE_TOKEN> && isActive ( ) ) { </a> 
<a> pipeline ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } catch ( Throwable t ) { </a> 
<a> <RARE_TOKEN> . setFailure ( t ) ; </a> 
<a> pipeline ( ) . fireExceptionCaught ( t ) ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } finally { </a> 
<a> <RARE_TOKEN> . cancel ( false ) ; </a> 
<a> <RARE_TOKEN> = null ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected boolean <RARE_TOKEN> ( EventLoop loop ) { </a> 
<a> return loop instanceof <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected boolean <RARE_TOKEN> ( ) { </a> 
<a> SelectionKey <RARE_TOKEN> = this . <RARE_TOKEN> ; </a> 
<a> return <RARE_TOKEN> . <RARE_TOKEN> ( ) && ( <RARE_TOKEN> . <RARE_TOKEN> ( ) & SelectionKey . <RARE_TOKEN> ) != 0 ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected Runnable <RARE_TOKEN> ( ) throws Exception { </a> 
<a> <RARE_TOKEN> loop = ( <RARE_TOKEN> ) eventLoop ( ) ; </a> 
<a> <RARE_TOKEN> = javaChannel ( ) . <RARE_TOKEN> ( </a> 
<a> loop . <RARE_TOKEN> , isActive ( ) ? <RARE_TOKEN> : 0 , this ) ; </a> 
<a> return null ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( ) throws Exception { </a> 
<a> ( ( <RARE_TOKEN> ) eventLoop ( ) ) . cancel ( <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> protected abstract boolean <RARE_TOKEN> ( SocketAddress remoteAddress , SocketAddress localAddress ) throws Exception ; </a> 
<a> protected abstract void <RARE_TOKEN> ( ) throws Exception ; </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . channel . socket . nio ; </a> 
<a> import io . netty . buffer . MessageBuf ; </a> 
<a> import io . netty . channel . Channel ; </a> 
<a> import io . netty . channel . ChannelPipeline ; </a> 
<a> import java . io . IOException ; </a> 
<a> import java . nio . channels . <RARE_TOKEN> ; </a> 
<a> abstract class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> protected <RARE_TOKEN> ( </a> 
<a> Channel parent , Integer id , <RARE_TOKEN> ch , int <RARE_TOKEN> ) { </a> 
<a> super ( parent , id , ch , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected abstract <RARE_TOKEN> <RARE_TOKEN> ( ) ; </a> 
<a> abstract class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> @ Override </a> 
<a> public void read ( ) { </a> 
<a> assert eventLoop ( ) . inEventLoop ( ) ; </a> 
<a> final ChannelPipeline pipeline = pipeline ( ) ; </a> 
<a> final MessageBuf < Object > <RARE_TOKEN> = pipeline . <RARE_TOKEN> ( ) ; </a> 
<a> boolean closed = false ; </a> 
<a> boolean read = false ; </a> 
<a> try { </a> 
<a> for ( ; ; ) { </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> > 0 ) { </a> 
<a> read = true ; </a> 
<a> } else if ( <RARE_TOKEN> == 0 ) { </a> 
<a> break ; </a> 
<a> } else if ( <RARE_TOKEN> < 0 ) { </a> 
<a> closed = true ; </a> 
<a> break ; </a> 
<a> } </a> 
<a> } </a> 
<a> } catch ( Throwable t ) { </a> 
<a> if ( read ) { </a> 
<a> read = false ; </a> 
<a> pipeline . fireInboundBufferUpdated ( ) ; </a> 
<a> } </a> 
<a> pipeline ( ) . fireExceptionCaught ( t ) ; </a> 
<a> if ( t instanceof IOException ) { </a> 
<a> close ( <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> } finally { </a> 
<a> if ( read ) { </a> 
<a> pipeline . fireInboundBufferUpdated ( ) ; </a> 
<a> } </a> 
<a> if ( closed && isOpen ( ) ) { </a> 
<a> close ( <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( MessageBuf < Object > buf ) throws Exception { </a> 
<a> final int <RARE_TOKEN> = config ( ) . <RARE_TOKEN> ( ) - 1 ; </a> 
<a> while ( ! buf . isEmpty ( ) ) { </a> 
<a> boolean <RARE_TOKEN> = false ; </a> 
<a> for ( int i = <RARE_TOKEN> ; i >= 0 ; i -- ) { </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> ( buf , i == 0 ) ; </a> 
<a> if ( <RARE_TOKEN> > 0 ) { </a> 
<a> <RARE_TOKEN> = true ; </a> 
<a> break ; </a> 
<a> } </a> 
<a> } </a> 
<a> if ( ! <RARE_TOKEN> ) { </a> 
<a> break ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> protected abstract int <RARE_TOKEN> ( MessageBuf < Object > buf ) throws Exception ; </a> 
<a> protected abstract int <RARE_TOKEN> ( MessageBuf < Object > buf , boolean <RARE_TOKEN> ) throws Exception ; </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . channel . socket . nio ; </a> 
<a> import io . netty . buffer . ByteBuf ; </a> 
<a> import io . netty . buffer . ChannelBufType ; </a> 
<a> import io . netty . buffer . MessageBuf ; </a> 
<a> import io . netty . buffer . Unpooled ; </a> 
<a> import io . netty . channel . ChannelException ; </a> 
<a> import io . netty . channel . ChannelFuture ; </a> 
<a> import io . netty . channel . ChannelMetadata ; </a> 
<a> import io . netty . channel . socket . <RARE_TOKEN> ; </a> 
<a> import io . netty . channel . socket . <RARE_TOKEN> ; </a> 
<a> import io . netty . channel . socket . <RARE_TOKEN> ; </a> 
<a> import io . netty . util . internal . <RARE_TOKEN> ; </a> 
<a> import java . io . IOException ; </a> 
<a> import java . net . InetAddress ; </a> 
<a> import java . net . InetSocketAddress ; </a> 
<a> import java . net . NetworkInterface ; </a> 
<a> import java . net . SocketAddress ; </a> 
<a> import java . net . SocketException ; </a> 
<a> import java . nio . ByteBuffer ; </a> 
<a> import java . nio . channels . <RARE_TOKEN> ; </a> 
<a> import java . nio . channels . <RARE_TOKEN> ; </a> 
<a> import java . nio . channels . SelectionKey ; </a> 
<a> import java . util . ArrayList ; </a> 
<a> import java . util . HashMap ; </a> 
<a> import java . util . Iterator ; </a> 
<a> import java . util . List ; </a> 
<a> import java . util . Map ; </a> 
<a> public final class <RARE_TOKEN> </a> 
<a> extends <RARE_TOKEN> implements io . netty . channel . socket . <RARE_TOKEN> { </a> 
<a> private static final ChannelMetadata <RARE_TOKEN> = new ChannelMetadata ( ChannelBufType . <RARE_TOKEN> , true ) ; </a> 
<a> private final <RARE_TOKEN> config ; </a> 
<a> private final Map < InetAddress , List < <RARE_TOKEN> > > <RARE_TOKEN> = </a> 
<a> new HashMap < InetAddress , List < <RARE_TOKEN> > > ( ) ; </a> 
<a> private static <RARE_TOKEN> <RARE_TOKEN> ( ) { </a> 
<a> try { </a> 
<a> return <RARE_TOKEN> . open ( ) ; </a> 
<a> } catch ( IOException e ) { </a> 
<a> throw new ChannelException ( "Failed to open a <RARE_TOKEN> , e ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private static <RARE_TOKEN> <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> return <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> . <RARE_TOKEN> ( ) < 7 ) { </a> 
<a> throw new UnsupportedOperationException ( ) ; </a> 
<a> } </a> 
<a> try { </a> 
<a> return <RARE_TOKEN> . open ( <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ) ; </a> 
<a> } catch ( IOException e ) { </a> 
<a> throw new ChannelException ( "Failed to open a <RARE_TOKEN> , e ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( ) { </a> 
<a> this ( <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> this ( <RARE_TOKEN> ( <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( <RARE_TOKEN> socket ) { </a> 
<a> this ( null , socket ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( Integer id , <RARE_TOKEN> socket ) { </a> 
<a> super ( null , id , socket , SelectionKey . <RARE_TOKEN> ) ; </a> 
<a> config = new <RARE_TOKEN> ( socket ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ChannelMetadata <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public <RARE_TOKEN> config ( ) { </a> 
<a> return config ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean isActive ( ) { </a> 
<a> <RARE_TOKEN> ch = javaChannel ( ) ; </a> 
<a> return ch . isOpen ( ) && ch . socket ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return javaChannel ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected <RARE_TOKEN> javaChannel ( ) { </a> 
<a> return ( <RARE_TOKEN> ) super . javaChannel ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected SocketAddress <RARE_TOKEN> ( ) { </a> 
<a> return javaChannel ( ) . socket ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected SocketAddress <RARE_TOKEN> ( ) { </a> 
<a> return javaChannel ( ) . socket ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( SocketAddress localAddress ) throws Exception { </a> 
<a> javaChannel ( ) . socket ( ) . bind ( localAddress ) ; </a> 
<a> <RARE_TOKEN> ( ) . <RARE_TOKEN> ( SelectionKey . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected boolean <RARE_TOKEN> ( SocketAddress remoteAddress , </a> 
<a> SocketAddress localAddress ) throws Exception { </a> 
<a> if ( localAddress != null ) { </a> 
<a> javaChannel ( ) . socket ( ) . bind ( localAddress ) ; </a> 
<a> } </a> 
<a> boolean success = false ; </a> 
<a> try { </a> 
<a> javaChannel ( ) . connect ( remoteAddress ) ; </a> 
<a> <RARE_TOKEN> ( ) . <RARE_TOKEN> ( <RARE_TOKEN> ( ) . <RARE_TOKEN> ( ) | SelectionKey . <RARE_TOKEN> ) ; </a> 
<a> success = true ; </a> 
<a> return true ; </a> 
<a> } finally { </a> 
<a> if ( ! success ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( ) throws Exception { </a> 
<a> throw new Error ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( ) throws Exception { </a> 
<a> javaChannel ( ) . disconnect ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( ) throws Exception { </a> 
<a> javaChannel ( ) . close ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected int <RARE_TOKEN> ( MessageBuf < Object > buf ) throws Exception { </a> 
<a> <RARE_TOKEN> ch = javaChannel ( ) ; </a> 
<a> ByteBuffer data = ByteBuffer . <RARE_TOKEN> ( config ( ) . <RARE_TOKEN> ( ) ) ; </a> 
<a> InetSocketAddress remoteAddress = ( InetSocketAddress ) ch . <RARE_TOKEN> ( data ) ; </a> 
<a> if ( remoteAddress == null ) { </a> 
<a> return 0 ; </a> 
<a> } </a> 
<a> data . <RARE_TOKEN> ( ) ; </a> 
<a> buf . add ( new <RARE_TOKEN> ( Unpooled . wrappedBuffer ( data ) , remoteAddress ) ) ; </a> 
<a> return 1 ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected int <RARE_TOKEN> ( MessageBuf < Object > buf , boolean <RARE_TOKEN> ) throws Exception { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = ( <RARE_TOKEN> ) buf . <RARE_TOKEN> ( ) ; </a> 
<a> ByteBuf data = <RARE_TOKEN> . data ( ) ; </a> 
<a> ByteBuffer <RARE_TOKEN> ; </a> 
<a> if ( data . <RARE_TOKEN> ( ) ) { </a> 
<a> <RARE_TOKEN> = data . nioBuffer ( ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> = ByteBuffer . <RARE_TOKEN> ( data . readableBytes ( ) ) ; </a> 
<a> data . getBytes ( data . readerIndex ( ) , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> final int <RARE_TOKEN> = javaChannel ( ) . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> . remoteAddress ( ) ) ; </a> 
<a> final SelectionKey key = <RARE_TOKEN> ( ) ; </a> 
<a> final int <RARE_TOKEN> = key . <RARE_TOKEN> ( ) ; </a> 
<a> if ( <RARE_TOKEN> <= 0 ) { </a> 
<a> if ( <RARE_TOKEN> ) { </a> 
<a> if ( ( <RARE_TOKEN> & SelectionKey . <RARE_TOKEN> ) == 0 ) { </a> 
<a> key . <RARE_TOKEN> ( <RARE_TOKEN> | SelectionKey . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> return 0 ; </a> 
<a> } </a> 
<a> buf . remove ( ) ; </a> 
<a> if ( buf . isEmpty ( ) ) { </a> 
<a> if ( ( <RARE_TOKEN> & SelectionKey . <RARE_TOKEN> ) != 0 ) { </a> 
<a> key . <RARE_TOKEN> ( <RARE_TOKEN> & ~ SelectionKey . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> return 1 ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ChannelFuture <RARE_TOKEN> ( InetAddress multicastAddress ) { </a> 
<a> return <RARE_TOKEN> ( multicastAddress , <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ChannelFuture <RARE_TOKEN> ( InetAddress multicastAddress , ChannelFuture future ) { </a> 
<a> try { </a> 
<a> return <RARE_TOKEN> ( </a> 
<a> multicastAddress , </a> 
<a> NetworkInterface . <RARE_TOKEN> ( localAddress ( ) . <RARE_TOKEN> ( ) ) , </a> 
<a> null , future ) ; </a> 
<a> } catch ( SocketException e ) { </a> 
<a> future . setFailure ( e ) ; </a> 
<a> } </a> 
<a> return future ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ChannelFuture <RARE_TOKEN> ( </a> 
<a> InetSocketAddress multicastAddress , NetworkInterface networkInterface ) { </a> 
<a> return <RARE_TOKEN> ( multicastAddress , networkInterface , <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ChannelFuture <RARE_TOKEN> ( </a> 
<a> InetSocketAddress multicastAddress , NetworkInterface networkInterface , </a> 
<a> ChannelFuture future ) { </a> 
<a> return <RARE_TOKEN> ( multicastAddress . <RARE_TOKEN> ( ) , networkInterface , null , future ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ChannelFuture <RARE_TOKEN> ( </a> 
<a> InetAddress multicastAddress , NetworkInterface networkInterface , InetAddress source ) { </a> 
<a> return <RARE_TOKEN> ( multicastAddress , networkInterface , source , <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ChannelFuture <RARE_TOKEN> ( </a> 
<a> InetAddress multicastAddress , NetworkInterface networkInterface , </a> 
<a> InetAddress source , ChannelFuture future ) { </a> 
<a> if ( <RARE_TOKEN> . <RARE_TOKEN> ( ) < 7 ) { </a> 
<a> throw new UnsupportedOperationException ( ) ; </a> 
<a> } else { </a> 
<a> if ( multicastAddress == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( networkInterface == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> try { </a> 
<a> <RARE_TOKEN> key ; </a> 
<a> if ( source == null ) { </a> 
<a> key = javaChannel ( ) . <RARE_TOKEN> ( multicastAddress , networkInterface ) ; </a> 
<a> } else { </a> 
<a> key = javaChannel ( ) . <RARE_TOKEN> ( multicastAddress , networkInterface , source ) ; </a> 
<a> } </a> 
<a> synchronized ( this ) { </a> 
<a> List < <RARE_TOKEN> > keys = <RARE_TOKEN> . get ( multicastAddress ) ; </a> 
<a> if ( keys == null ) { </a> 
<a> keys = new ArrayList < <RARE_TOKEN> > ( ) ; </a> 
<a> <RARE_TOKEN> . put ( multicastAddress , keys ) ; </a> 
<a> } </a> 
<a> keys . add ( key ) ; </a> 
<a> } </a> 
<a> future . <RARE_TOKEN> ( ) ; </a> 
<a> } catch ( Throwable e ) { </a> 
<a> future . setFailure ( e ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> return future ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ChannelFuture <RARE_TOKEN> ( InetAddress multicastAddress ) { </a> 
<a> return <RARE_TOKEN> ( multicastAddress , <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ChannelFuture <RARE_TOKEN> ( InetAddress multicastAddress , ChannelFuture future ) { </a> 
<a> try { </a> 
<a> return <RARE_TOKEN> ( </a> 
<a> multicastAddress , NetworkInterface . <RARE_TOKEN> ( localAddress ( ) . <RARE_TOKEN> ( ) ) , null , future ) ; </a> 
<a> } catch ( SocketException e ) { </a> 
<a> future . setFailure ( e ) ; </a> 
<a> } </a> 
<a> return future ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ChannelFuture <RARE_TOKEN> ( </a> 
<a> InetSocketAddress multicastAddress , NetworkInterface networkInterface ) { </a> 
<a> return <RARE_TOKEN> ( multicastAddress , networkInterface , <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ChannelFuture <RARE_TOKEN> ( </a> 
<a> InetSocketAddress multicastAddress , </a> 
<a> NetworkInterface networkInterface , ChannelFuture future ) { </a> 
<a> return <RARE_TOKEN> ( multicastAddress . <RARE_TOKEN> ( ) , networkInterface , null , future ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ChannelFuture <RARE_TOKEN> ( </a> 
<a> InetAddress multicastAddress , NetworkInterface networkInterface , InetAddress source ) { </a> 
<a> return <RARE_TOKEN> ( multicastAddress , networkInterface , source , <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ChannelFuture <RARE_TOKEN> ( </a> 
<a> InetAddress multicastAddress , NetworkInterface networkInterface , InetAddress source , </a> 
<a> ChannelFuture future ) { </a> 
<a> if ( <RARE_TOKEN> . <RARE_TOKEN> ( ) < 7 ) { </a> 
<a> throw new UnsupportedOperationException ( ) ; </a> 
<a> } </a> 
<a> if ( multicastAddress == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( networkInterface == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> synchronized ( this ) { </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> List < <RARE_TOKEN> > keys = <RARE_TOKEN> . get ( multicastAddress ) ; </a> 
<a> if ( keys != null ) { </a> 
<a> Iterator < <RARE_TOKEN> > <RARE_TOKEN> = keys . <RARE_TOKEN> ( ) ; </a> 
<a> while ( <RARE_TOKEN> . <RARE_TOKEN> ( ) ) { </a> 
<a> <RARE_TOKEN> key = <RARE_TOKEN> . next ( ) ; </a> 
<a> if ( networkInterface . equals ( key . networkInterface ( ) ) ) { </a> 
<a> if ( source == null && key . <RARE_TOKEN> ( ) == null || </a> 
<a> source != null && source . equals ( key . <RARE_TOKEN> ( ) ) ) { </a> 
<a> key . <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> . remove ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> if ( keys . isEmpty ( ) ) { </a> 
<a> <RARE_TOKEN> . remove ( multicastAddress ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> future . <RARE_TOKEN> ( ) ; </a> 
<a> return future ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ChannelFuture block ( </a> 
<a> InetAddress multicastAddress , NetworkInterface networkInterface , </a> 
<a> InetAddress <RARE_TOKEN> ) { </a> 
<a> return block ( multicastAddress , networkInterface , <RARE_TOKEN> , <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ChannelFuture block ( </a> 
<a> InetAddress multicastAddress , NetworkInterface networkInterface , </a> 
<a> InetAddress <RARE_TOKEN> , ChannelFuture future ) { </a> 
<a> if ( <RARE_TOKEN> . <RARE_TOKEN> ( ) < 7 ) { </a> 
<a> throw new UnsupportedOperationException ( ) ; </a> 
<a> } else { </a> 
<a> if ( multicastAddress == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> if ( networkInterface == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> synchronized ( this ) { </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> List < <RARE_TOKEN> > keys = <RARE_TOKEN> . get ( multicastAddress ) ; </a> 
<a> for ( <RARE_TOKEN> key : keys ) { </a> 
<a> if ( networkInterface . equals ( key . networkInterface ( ) ) ) { </a> 
<a> try { </a> 
<a> key . block ( <RARE_TOKEN> ) ; </a> 
<a> } catch ( IOException e ) { </a> 
<a> future . setFailure ( e ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> future . <RARE_TOKEN> ( ) ; </a> 
<a> return future ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ChannelFuture block ( InetAddress multicastAddress , InetAddress <RARE_TOKEN> ) { </a> 
<a> return block ( multicastAddress , <RARE_TOKEN> , <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ChannelFuture block ( </a> 
<a> InetAddress multicastAddress , InetAddress <RARE_TOKEN> , ChannelFuture future ) { </a> 
<a> try { </a> 
<a> return block ( </a> 
<a> multicastAddress , </a> 
<a> NetworkInterface . <RARE_TOKEN> ( localAddress ( ) . <RARE_TOKEN> ( ) ) , </a> 
<a> <RARE_TOKEN> , future ) ; </a> 
<a> } catch ( SocketException e ) { </a> 
<a> future . setFailure ( e ) ; </a> 
<a> } </a> 
<a> return future ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected <RARE_TOKEN> <RARE_TOKEN> ( ) { </a> 
<a> return new <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> private final class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> ( ) . <RARE_TOKEN> ( <RARE_TOKEN> ( ) . <RARE_TOKEN> ( ) & ~ SelectionKey . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> ( ) . <RARE_TOKEN> ( <RARE_TOKEN> ( ) . <RARE_TOKEN> ( ) & ~ SelectionKey . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . channel . socket . nio ; </a> 
<a> import io . netty . channel . ChannelException ; </a> 
<a> import io . netty . channel . socket . <RARE_TOKEN> ; </a> 
<a> import io . netty . util . internal . <RARE_TOKEN> ; </a> 
<a> import java . lang . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import java . net . InetAddress ; </a> 
<a> import java . net . NetworkInterface ; </a> 
<a> import java . net . SocketException ; </a> 
<a> import java . nio . channels . <RARE_TOKEN> ; </a> 
<a> import java . nio . channels . <RARE_TOKEN> ; </a> 
<a> import java . util . <RARE_TOKEN> ; </a> 
<a> class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> private static final Object <RARE_TOKEN> ; </a> 
<a> private static final Object <RARE_TOKEN> ; </a> 
<a> private static final Object <RARE_TOKEN> ; </a> 
<a> private static final <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> private static final <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> static { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = <RARE_TOKEN> . class . <RARE_TOKEN> ( ) ; </a> 
<a> Class < ? > <RARE_TOKEN> = null ; </a> 
<a> try { </a> 
<a> <RARE_TOKEN> = Class . <RARE_TOKEN> ( <RARE_TOKEN> , true , <RARE_TOKEN> ) ; </a> 
<a> } catch ( Exception e ) { </a> 
<a> } </a> 
<a> Class < ? > <RARE_TOKEN> = null ; </a> 
<a> try { </a> 
<a> <RARE_TOKEN> = Class . <RARE_TOKEN> ( <RARE_TOKEN> , true , <RARE_TOKEN> ) ; </a> 
<a> } catch ( Exception e ) { </a> 
<a> } </a> 
<a> Object <RARE_TOKEN> = null ; </a> 
<a> Object <RARE_TOKEN> = null ; </a> 
<a> Object <RARE_TOKEN> = null ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = null ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = null ; </a> 
<a> if ( <RARE_TOKEN> != null ) { </a> 
<a> try { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) . get ( null ) ; </a> 
<a> } catch ( Exception e ) { </a> 
<a> throw new Error ( <RARE_TOKEN> <RARE_TOKEN> the <RARE_TOKEN> <RARE_TOKEN> , e ) ; </a> 
<a> } </a> 
<a> try { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) . get ( null ) ; </a> 
<a> } catch ( Exception e ) { </a> 
<a> throw new Error ( <RARE_TOKEN> <RARE_TOKEN> the <RARE_TOKEN> <RARE_TOKEN> , e ) ; </a> 
<a> } </a> 
<a> try { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) . get ( null ) ; </a> 
<a> } catch ( Exception e ) { </a> 
<a> throw new Error ( <RARE_TOKEN> <RARE_TOKEN> the <RARE_TOKEN> <RARE_TOKEN> , e ) ; </a> 
<a> } </a> 
<a> try { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . class . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } catch ( Exception e ) { </a> 
<a> throw new Error ( <RARE_TOKEN> <RARE_TOKEN> the <RARE_TOKEN> <RARE_TOKEN> , e ) ; </a> 
<a> } </a> 
<a> try { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . class . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> , Object . class ) ; </a> 
<a> } catch ( Exception e ) { </a> 
<a> throw new Error ( <RARE_TOKEN> <RARE_TOKEN> the <RARE_TOKEN> <RARE_TOKEN> , e ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> private final <RARE_TOKEN> channel ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> channel ) { </a> 
<a> super ( channel . socket ( ) ) ; </a> 
<a> this . channel = channel ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public int <RARE_TOKEN> ( ) { </a> 
<a> return ( Integer ) <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( int <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public InetAddress <RARE_TOKEN> ( ) { </a> 
<a> NetworkInterface <RARE_TOKEN> = <RARE_TOKEN> ( ) ; </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> return null ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> < InetAddress > <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> if ( <RARE_TOKEN> . <RARE_TOKEN> ( ) ) { </a> 
<a> return <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> return null ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( InetAddress <RARE_TOKEN> ) { </a> 
<a> try { </a> 
<a> <RARE_TOKEN> ( NetworkInterface . <RARE_TOKEN> ( <RARE_TOKEN> ) ) ; </a> 
<a> } catch ( SocketException e ) { </a> 
<a> throw new ChannelException ( e ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public NetworkInterface <RARE_TOKEN> ( ) { </a> 
<a> return ( NetworkInterface ) <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( NetworkInterface networkInterface ) { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> , networkInterface ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return ( Boolean ) <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( boolean <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> private Object <RARE_TOKEN> ( Object option ) { </a> 
<a> if ( <RARE_TOKEN> . <RARE_TOKEN> ( ) < 7 ) { </a> 
<a> throw new UnsupportedOperationException ( ) ; </a> 
<a> } else { </a> 
<a> try { </a> 
<a> return <RARE_TOKEN> . <RARE_TOKEN> ( channel , option ) ; </a> 
<a> } catch ( Exception e ) { </a> 
<a> throw new ChannelException ( e ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( Object option , Object value ) { </a> 
<a> if ( <RARE_TOKEN> . <RARE_TOKEN> ( ) < 7 ) { </a> 
<a> throw new UnsupportedOperationException ( ) ; </a> 
<a> } else { </a> 
<a> try { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( channel , option , value ) ; </a> 
<a> } catch ( Exception e ) { </a> 
<a> throw new ChannelException ( e ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . channel . socket . nio ; </a> 
<a> import io . netty . channel . Channel ; </a> 
<a> import io . netty . channel . ChannelException ; </a> 
<a> import io . netty . channel . <RARE_TOKEN> ; </a> 
<a> import io . netty . channel . <RARE_TOKEN> ; </a> 
<a> import io . netty . channel . socket . nio . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import io . netty . logging . InternalLogger ; </a> 
<a> import io . netty . logging . InternalLoggerFactory ; </a> 
<a> import java . io . IOException ; </a> 
<a> import java . nio . channels . <RARE_TOKEN> ; </a> 
<a> import java . nio . channels . SelectionKey ; </a> 
<a> import java . nio . channels . <RARE_TOKEN> ; </a> 
<a> import java . nio . channels . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import java . util . ArrayList ; </a> 
<a> import java . util . Collection ; </a> 
<a> import java . util . Iterator ; </a> 
<a> import java . util . <RARE_TOKEN> ; </a> 
<a> import java . util . Set ; </a> 
<a> import java . util . concurrent . ConcurrentLinkedQueue ; </a> 
<a> import java . util . concurrent . ThreadFactory ; </a> 
<a> import java . util . concurrent . atomic . AtomicBoolean ; </a> 
<a> final class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> protected static final InternalLogger logger = InternalLoggerFactory </a> 
<a> . getInstance ( <RARE_TOKEN> . class ) ; </a> 
<a> static final int <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> protected final <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> protected final AtomicBoolean <RARE_TOKEN> = new AtomicBoolean ( ) ; </a> 
<a> private int <RARE_TOKEN> ; </a> 
<a> private boolean <RARE_TOKEN> ; </a> 
<a> <RARE_TOKEN> ( </a> 
<a> NioEventLoopGroup parent , ThreadFactory threadFactory , </a> 
<a> <RARE_TOKEN> scheduler , <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> super ( parent , threadFactory , scheduler ) ; </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> private static <RARE_TOKEN> <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> try { </a> 
<a> return <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> } catch ( IOException e ) { </a> 
<a> throw new ChannelException ( "failed to open a new <RARE_TOKEN> , e ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected <RARE_TOKEN> < Runnable > <RARE_TOKEN> ( ) { </a> 
<a> return new ConcurrentLinkedQueue < Runnable > ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void run ( ) { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = this . <RARE_TOKEN> ; </a> 
<a> for ( ; ; ) { </a> 
<a> <RARE_TOKEN> . set ( false ) ; </a> 
<a> try { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> . get ( ) ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> = 0 ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> if ( <RARE_TOKEN> ( ) ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> if ( <RARE_TOKEN> ( ) == null ) { </a> 
<a> break ; </a> 
<a> } </a> 
<a> } </a> 
<a> } catch ( Throwable t ) { </a> 
<a> logger . warn ( </a> 
<a> "Unexpected exception in the <RARE_TOKEN> <RARE_TOKEN> , t ) ; </a> 
<a> try { </a> 
<a> Thread . sleep ( 1000 ) ; </a> 
<a> } catch ( InterruptedException e ) { </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( ) { </a> 
<a> try { </a> 
<a> <RARE_TOKEN> . close ( ) ; </a> 
<a> } catch ( IOException e ) { </a> 
<a> logger . warn ( </a> 
<a> "Failed to close a <RARE_TOKEN> , e ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> void cancel ( SelectionKey key ) { </a> 
<a> key . cancel ( ) ; </a> 
<a> <RARE_TOKEN> ++ ; </a> 
<a> if ( <RARE_TOKEN> >= <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> = 0 ; </a> 
<a> <RARE_TOKEN> = true ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( ) { </a> 
<a> Set < SelectionKey > <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> if ( <RARE_TOKEN> . isEmpty ( ) ) { </a> 
<a> return ; </a> 
<a> } </a> 
<a> Iterator < SelectionKey > i ; </a> 
<a> <RARE_TOKEN> = false ; </a> 
<a> boolean <RARE_TOKEN> = true ; </a> 
<a> try { </a> 
<a> for ( i = <RARE_TOKEN> . <RARE_TOKEN> ( ) ; i . <RARE_TOKEN> ( ) ; ) { </a> 
<a> final SelectionKey k = i . next ( ) ; </a> 
<a> final <RARE_TOKEN> ch = ( <RARE_TOKEN> ) k . <RARE_TOKEN> ( ) ; </a> 
<a> final <RARE_TOKEN> unsafe = ch . unsafe ( ) ; </a> 
<a> try { </a> 
<a> int <RARE_TOKEN> = k . <RARE_TOKEN> ( ) ; </a> 
<a> if ( ( <RARE_TOKEN> & ( SelectionKey . <RARE_TOKEN> | SelectionKey . <RARE_TOKEN> ) ) != 0 || <RARE_TOKEN> == 0 ) { </a> 
<a> unsafe . read ( ) ; </a> 
<a> if ( ! ch . isOpen ( ) ) { </a> 
<a> continue ; </a> 
<a> } </a> 
<a> } </a> 
<a> if ( ( <RARE_TOKEN> & SelectionKey . <RARE_TOKEN> ) != 0 ) { </a> 
<a> unsafe . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> if ( ( <RARE_TOKEN> & SelectionKey . <RARE_TOKEN> ) != 0 ) { </a> 
<a> unsafe . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } catch ( <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> unsafe . close ( unsafe . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> ) { </a> 
<a> if ( <RARE_TOKEN> . isEmpty ( ) ) { </a> 
<a> <RARE_TOKEN> = false ; </a> 
<a> break ; </a> 
<a> } else { </a> 
<a> i = <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } finally { </a> 
<a> if ( <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> . clear ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> Set < SelectionKey > keys = <RARE_TOKEN> . keys ( ) ; </a> 
<a> Collection < Channel > channels = new ArrayList < Channel > ( keys . size ( ) ) ; </a> 
<a> for ( SelectionKey k : keys ) { </a> 
<a> channels . add ( ( Channel ) k . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> for ( Channel ch : channels ) { </a> 
<a> ch . unsafe ( ) . close ( ch . unsafe ( ) . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( boolean inEventLoop ) { </a> 
<a> if ( <RARE_TOKEN> . <RARE_TOKEN> ( false , true ) ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . channel . socket . nio ; </a> 
<a> import io . netty . channel . EventExecutor ; </a> 
<a> import io . netty . channel . <RARE_TOKEN> ; </a> 
<a> import io . netty . channel . <RARE_TOKEN> ; </a> 
<a> import java . nio . channels . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import java . util . concurrent . ThreadFactory ; </a> 
<a> public class NioEventLoopGroup extends <RARE_TOKEN> { </a> 
<a> public NioEventLoopGroup ( ) { </a> 
<a> this ( 0 ) ; </a> 
<a> } </a> 
<a> public NioEventLoopGroup ( int <RARE_TOKEN> ) { </a> 
<a> this ( <RARE_TOKEN> , null ) ; </a> 
<a> } </a> 
<a> public NioEventLoopGroup ( int <RARE_TOKEN> , ThreadFactory threadFactory ) { </a> 
<a> super ( <RARE_TOKEN> , threadFactory ) ; </a> 
<a> } </a> 
<a> public NioEventLoopGroup ( </a> 
<a> int <RARE_TOKEN> , ThreadFactory threadFactory , final <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> super ( <RARE_TOKEN> , threadFactory , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected EventExecutor <RARE_TOKEN> ( </a> 
<a> ThreadFactory threadFactory , <RARE_TOKEN> scheduler , Object ... args ) throws Exception { </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> ; </a> 
<a> if ( args == null || args . length == 0 || args [ 0 ] == null ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> = ( <RARE_TOKEN> ) args [ 0 ] ; </a> 
<a> } </a> 
<a> return new <RARE_TOKEN> ( this , threadFactory , scheduler , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . channel . socket . nio ; </a> 
<a> import io . netty . buffer . ChannelBufType ; </a> 
<a> import io . netty . buffer . MessageBuf ; </a> 
<a> import io . netty . channel . ChannelException ; </a> 
<a> import io . netty . channel . ChannelMetadata ; </a> 
<a> import io . netty . channel . socket . <RARE_TOKEN> ; </a> 
<a> import io . netty . channel . socket . <RARE_TOKEN> ; </a> 
<a> import java . io . IOException ; </a> 
<a> import java . net . InetSocketAddress ; </a> 
<a> import java . net . SocketAddress ; </a> 
<a> import java . nio . channels . SelectionKey ; </a> 
<a> import java . nio . channels . <RARE_TOKEN> ; </a> 
<a> import java . nio . channels . SocketChannel ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> </a> 
<a> implements io . netty . channel . socket . <RARE_TOKEN> { </a> 
<a> private static final ChannelMetadata <RARE_TOKEN> = new ChannelMetadata ( ChannelBufType . <RARE_TOKEN> , false ) ; </a> 
<a> private static <RARE_TOKEN> <RARE_TOKEN> ( ) { </a> 
<a> try { </a> 
<a> return <RARE_TOKEN> . open ( ) ; </a> 
<a> } catch ( IOException e ) { </a> 
<a> throw new ChannelException ( </a> 
<a> "Failed to open a server <RARE_TOKEN> , e ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private final <RARE_TOKEN> config ; </a> 
<a> public <RARE_TOKEN> ( ) { </a> 
<a> super ( null , null , <RARE_TOKEN> ( ) , 0 ) ; </a> 
<a> config = new <RARE_TOKEN> ( javaChannel ( ) . socket ( ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ChannelMetadata <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public <RARE_TOKEN> config ( ) { </a> 
<a> return config ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean isActive ( ) { </a> 
<a> return javaChannel ( ) . socket ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public InetSocketAddress remoteAddress ( ) { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected <RARE_TOKEN> javaChannel ( ) { </a> 
<a> return ( <RARE_TOKEN> ) super . javaChannel ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected SocketAddress <RARE_TOKEN> ( ) { </a> 
<a> return javaChannel ( ) . socket ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( SocketAddress localAddress ) throws Exception { </a> 
<a> javaChannel ( ) . socket ( ) . bind ( localAddress ) ; </a> 
<a> SelectionKey <RARE_TOKEN> = <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ( ) | SelectionKey . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( ) throws Exception { </a> 
<a> javaChannel ( ) . close ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected int <RARE_TOKEN> ( MessageBuf < Object > buf ) throws Exception { </a> 
<a> SocketChannel ch = javaChannel ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> if ( ch == null ) { </a> 
<a> return 0 ; </a> 
<a> } </a> 
<a> buf . add ( new <RARE_TOKEN> ( this , null , ch ) ) ; </a> 
<a> return 1 ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected boolean <RARE_TOKEN> ( </a> 
<a> SocketAddress remoteAddress , SocketAddress localAddress ) throws Exception { </a> 
<a> throw new UnsupportedOperationException ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( ) throws Exception { </a> 
<a> throw new UnsupportedOperationException ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected SocketAddress <RARE_TOKEN> ( ) { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( ) throws Exception { </a> 
<a> throw new UnsupportedOperationException ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected int <RARE_TOKEN> ( MessageBuf < Object > buf , boolean <RARE_TOKEN> ) throws Exception { </a> 
<a> throw new UnsupportedOperationException ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected <RARE_TOKEN> <RARE_TOKEN> ( ) { </a> 
<a> return new <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> private final class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> ( ) . cancel ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> try { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } catch ( Exception e ) { </a> 
<a> e . printStackTrace ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . channel . socket . nio ; </a> 
<a> import io . netty . buffer . ByteBuf ; </a> 
<a> import io . netty . buffer . ChannelBufType ; </a> 
<a> import io . netty . channel . Channel ; </a> 
<a> import io . netty . channel . ChannelException ; </a> 
<a> import io . netty . channel . ChannelMetadata ; </a> 
<a> import io . netty . channel . socket . <RARE_TOKEN> ; </a> 
<a> import io . netty . channel . socket . <RARE_TOKEN> ; </a> 
<a> import io . netty . logging . InternalLogger ; </a> 
<a> import io . netty . logging . InternalLoggerFactory ; </a> 
<a> import java . io . IOException ; </a> 
<a> import java . net . SocketAddress ; </a> 
<a> import java . nio . channels . SelectionKey ; </a> 
<a> import java . nio . channels . SocketChannel ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> implements io . netty . channel . socket . SocketChannel { </a> 
<a> private static final ChannelMetadata <RARE_TOKEN> = new ChannelMetadata ( ChannelBufType . <RARE_TOKEN> , false ) ; </a> 
<a> private static final InternalLogger logger = InternalLoggerFactory . getInstance ( <RARE_TOKEN> . class ) ; </a> 
<a> private final <RARE_TOKEN> config ; </a> 
<a> private static SocketChannel <RARE_TOKEN> ( ) { </a> 
<a> try { </a> 
<a> return SocketChannel . open ( ) ; </a> 
<a> } catch ( IOException e ) { </a> 
<a> throw new ChannelException ( "Failed to open a <RARE_TOKEN> , e ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( ) { </a> 
<a> this ( <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( SocketChannel socket ) { </a> 
<a> this ( null , null , socket ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( Channel parent , Integer id , SocketChannel socket ) { </a> 
<a> super ( parent , id , socket ) ; </a> 
<a> try { </a> 
<a> socket . <RARE_TOKEN> ( false ) ; </a> 
<a> } catch ( IOException e ) { </a> 
<a> try { </a> 
<a> socket . close ( ) ; </a> 
<a> } catch ( IOException <RARE_TOKEN> ) { </a> 
<a> if ( logger . <RARE_TOKEN> ( ) ) { </a> 
<a> logger . warn ( </a> 
<a> "Failed to close a <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> throw new ChannelException ( "Failed to <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> , e ) ; </a> 
<a> } </a> 
<a> config = new <RARE_TOKEN> ( socket . socket ( ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ChannelMetadata <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public <RARE_TOKEN> config ( ) { </a> 
<a> return config ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected SocketChannel javaChannel ( ) { </a> 
<a> return ( SocketChannel ) super . javaChannel ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean isActive ( ) { </a> 
<a> SocketChannel ch = javaChannel ( ) ; </a> 
<a> return ch . isOpen ( ) && ch . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected SocketAddress <RARE_TOKEN> ( ) { </a> 
<a> return javaChannel ( ) . socket ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected SocketAddress <RARE_TOKEN> ( ) { </a> 
<a> return javaChannel ( ) . socket ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( SocketAddress localAddress ) throws Exception { </a> 
<a> javaChannel ( ) . socket ( ) . bind ( localAddress ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected boolean <RARE_TOKEN> ( SocketAddress remoteAddress , SocketAddress localAddress ) throws Exception { </a> 
<a> if ( localAddress != null ) { </a> 
<a> javaChannel ( ) . socket ( ) . bind ( localAddress ) ; </a> 
<a> } </a> 
<a> boolean success = false ; </a> 
<a> try { </a> 
<a> boolean <RARE_TOKEN> = javaChannel ( ) . connect ( remoteAddress ) ; </a> 
<a> if ( <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> ( ) . <RARE_TOKEN> ( SelectionKey . <RARE_TOKEN> ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> ( ) . <RARE_TOKEN> ( SelectionKey . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> success = true ; </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } finally { </a> 
<a> if ( ! success ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( ) throws Exception { </a> 
<a> if ( ! javaChannel ( ) . <RARE_TOKEN> ( ) ) { </a> 
<a> throw new Error ( ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> ( ) . <RARE_TOKEN> ( SelectionKey . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( ) throws Exception { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( ) throws Exception { </a> 
<a> javaChannel ( ) . close ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected int <RARE_TOKEN> ( ByteBuf byteBuf ) throws Exception { </a> 
<a> return byteBuf . writeBytes ( javaChannel ( ) , byteBuf . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected int <RARE_TOKEN> ( ByteBuf buf , boolean <RARE_TOKEN> ) throws Exception { </a> 
<a> final int <RARE_TOKEN> = buf . readableBytes ( ) ; </a> 
<a> final int <RARE_TOKEN> = buf . readBytes ( javaChannel ( ) , <RARE_TOKEN> ) ; </a> 
<a> final SelectionKey key = <RARE_TOKEN> ( ) ; </a> 
<a> final int <RARE_TOKEN> = key . <RARE_TOKEN> ( ) ; </a> 
<a> if ( <RARE_TOKEN> >= <RARE_TOKEN> ) { </a> 
<a> if ( ( <RARE_TOKEN> & SelectionKey . <RARE_TOKEN> ) != 0 ) { </a> 
<a> key . <RARE_TOKEN> ( <RARE_TOKEN> & ~ SelectionKey . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } else { </a> 
<a> if ( <RARE_TOKEN> > 0 || <RARE_TOKEN> ) { </a> 
<a> if ( ( <RARE_TOKEN> & SelectionKey . <RARE_TOKEN> ) == 0 ) { </a> 
<a> key . <RARE_TOKEN> ( <RARE_TOKEN> | SelectionKey . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected <RARE_TOKEN> <RARE_TOKEN> ( ) { </a> 
<a> return new <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> private final class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> ( ) . <RARE_TOKEN> ( <RARE_TOKEN> ( ) . <RARE_TOKEN> ( ) & ~ SelectionKey . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> ( ) . <RARE_TOKEN> ( <RARE_TOKEN> ( ) . <RARE_TOKEN> ( ) | SelectionKey . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . channel . socket . nio ; </a> 
<a> import io . netty . channel . socket . <RARE_TOKEN> ; </a> 
<a> import java . net . <RARE_TOKEN> ; </a> 
<a> import java . net . <RARE_TOKEN> ; </a> 
<a> final class <RARE_TOKEN> { </a> 
<a> private <RARE_TOKEN> ( ) { </a> 
<a> } </a> 
<a> public static <RARE_TOKEN> <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> switch ( <RARE_TOKEN> ) { </a> 
<a> case <RARE_TOKEN> : </a> 
<a> return <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> case <RARE_TOKEN> : </a> 
<a> return <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> default : </a> 
<a> throw new IllegalArgumentException ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . channel . socket . nio ; </a> 
<a> import io . netty . logging . InternalLogger ; </a> 
<a> import io . netty . logging . InternalLoggerFactory ; </a> 
<a> import java . io . IOException ; </a> 
<a> import java . nio . channels . <RARE_TOKEN> ; </a> 
<a> import java . nio . channels . <RARE_TOKEN> ; </a> 
<a> final class <RARE_TOKEN> { </a> 
<a> private static final InternalLogger logger = </a> 
<a> InternalLoggerFactory . getInstance ( <RARE_TOKEN> . class ) ; </a> 
<a> static final long <RARE_TOKEN> = 10 ; </a> 
<a> static final long <RARE_TOKEN> ; </a> 
<a> static { </a> 
<a> String key = <RARE_TOKEN> ; </a> 
<a> try { </a> 
<a> String <RARE_TOKEN> = System . getProperty ( key ) ; </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> System . setProperty ( key , "" ) ; </a> 
<a> } </a> 
<a> } catch ( <RARE_TOKEN> e ) { </a> 
<a> if ( logger . isDebugEnabled ( ) ) { </a> 
<a> logger . debug ( <RARE_TOKEN> to <RARE_TOKEN> System <RARE_TOKEN> <RARE_TOKEN> + key + <RARE_TOKEN> , e ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> long <RARE_TOKEN> ; </a> 
<a> try { </a> 
<a> <RARE_TOKEN> = Long . <RARE_TOKEN> ( System . getProperty ( <RARE_TOKEN> , </a> 
<a> String . valueOf ( <RARE_TOKEN> ) ) ) ; </a> 
<a> } catch ( <RARE_TOKEN> e ) { </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> logger . debug ( <RARE_TOKEN> <RARE_TOKEN> timeout of " + <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> static void <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> ) throws IOException { </a> 
<a> try { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } catch ( <RARE_TOKEN> e ) { </a> 
<a> if ( logger . isDebugEnabled ( ) ) { </a> 
<a> logger . debug ( </a> 
<a> <RARE_TOKEN> . class . getSimpleName ( ) + </a> 
<a> " <RARE_TOKEN> <RARE_TOKEN> a <RARE_TOKEN> - <RARE_TOKEN> <RARE_TOKEN> , e ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> static void <RARE_TOKEN> ( <RARE_TOKEN> <RARE_TOKEN> ) { </a> 
<a> try { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> } catch ( Throwable t ) { </a> 
<a> logger . warn ( "Failed to <RARE_TOKEN> <RARE_TOKEN> , t ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private <RARE_TOKEN> ( ) { </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . channel . socket . nio ; </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . channel . socket . <RARE_TOKEN> ; </a> 
<a> import io . netty . buffer . ByteBuf ; </a> 
<a> import io . netty . channel . Channel ; </a> 
<a> import io . netty . channel . ChannelPipeline ; </a> 
<a> import java . io . IOException ; </a> 
<a> abstract class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> protected <RARE_TOKEN> ( Channel parent , Integer id ) { </a> 
<a> super ( parent , id ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected abstract <RARE_TOKEN> <RARE_TOKEN> ( ) ; </a> 
<a> abstract class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> @ Override </a> 
<a> public void read ( ) { </a> 
<a> assert eventLoop ( ) . inEventLoop ( ) ; </a> 
<a> final ChannelPipeline pipeline = pipeline ( ) ; </a> 
<a> final ByteBuf byteBuf = pipeline . <RARE_TOKEN> ( ) ; </a> 
<a> boolean closed = false ; </a> 
<a> boolean read = false ; </a> 
<a> try { </a> 
<a> for ( ; ; ) { </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> ( byteBuf ) ; </a> 
<a> if ( <RARE_TOKEN> > 0 ) { </a> 
<a> read = true ; </a> 
<a> } else if ( <RARE_TOKEN> < 0 ) { </a> 
<a> closed = true ; </a> 
<a> } </a> 
<a> final int <RARE_TOKEN> = <RARE_TOKEN> ( ) ; </a> 
<a> if ( <RARE_TOKEN> <= 0 ) { </a> 
<a> break ; </a> 
<a> } </a> 
<a> if ( byteBuf . <RARE_TOKEN> ( ) ) { </a> 
<a> continue ; </a> 
<a> } </a> 
<a> final int capacity = byteBuf . capacity ( ) ; </a> 
<a> final int maxCapacity = byteBuf . maxCapacity ( ) ; </a> 
<a> if ( capacity == maxCapacity ) { </a> 
<a> if ( read ) { </a> 
<a> read = false ; </a> 
<a> pipeline . fireInboundBufferUpdated ( ) ; </a> 
<a> if ( ! byteBuf . <RARE_TOKEN> ( ) ) { </a> 
<a> throw new IllegalStateException ( </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> handler <RARE_TOKEN> buffer is <RARE_TOKEN> must <RARE_TOKEN> <RARE_TOKEN> " + </a> 
<a> <RARE_TOKEN> one <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } else { </a> 
<a> final int writerIndex = byteBuf . writerIndex ( ) ; </a> 
<a> if ( writerIndex + <RARE_TOKEN> > maxCapacity ) { </a> 
<a> byteBuf . capacity ( maxCapacity ) ; </a> 
<a> } else { </a> 
<a> byteBuf . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } catch ( Throwable t ) { </a> 
<a> if ( read ) { </a> 
<a> read = false ; </a> 
<a> pipeline . fireInboundBufferUpdated ( ) ; </a> 
<a> } </a> 
<a> pipeline ( ) . fireExceptionCaught ( t ) ; </a> 
<a> if ( t instanceof IOException ) { </a> 
<a> close ( <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> } finally { </a> 
<a> if ( read ) { </a> 
<a> pipeline . fireInboundBufferUpdated ( ) ; </a> 
<a> } </a> 
<a> if ( closed && isOpen ( ) ) { </a> 
<a> close ( <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( ByteBuf buf ) throws Exception { </a> 
<a> while ( buf . readable ( ) ) { </a> 
<a> <RARE_TOKEN> ( buf ) ; </a> 
<a> } </a> 
<a> buf . clear ( ) ; </a> 
<a> } </a> 
<a> protected abstract int <RARE_TOKEN> ( ) ; </a> 
<a> protected abstract int <RARE_TOKEN> ( ByteBuf buf ) throws Exception ; </a> 
<a> protected abstract void <RARE_TOKEN> ( ByteBuf buf ) throws Exception ; </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . channel . socket . <RARE_TOKEN> ; </a> 
<a> import io . netty . channel . <RARE_TOKEN> ; </a> 
<a> import io . netty . channel . Channel ; </a> 
<a> import io . netty . channel . ChannelFuture ; </a> 
<a> import io . netty . channel . EventLoop ; </a> 
<a> import java . net . InetSocketAddress ; </a> 
<a> import java . net . SocketAddress ; </a> 
<a> abstract class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> static final int <RARE_TOKEN> = 1000 ; </a> 
<a> protected <RARE_TOKEN> ( Channel parent , Integer id ) { </a> 
<a> super ( parent , id ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public InetSocketAddress localAddress ( ) { </a> 
<a> return ( InetSocketAddress ) super . localAddress ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public InetSocketAddress remoteAddress ( ) { </a> 
<a> return ( InetSocketAddress ) super . remoteAddress ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public <RARE_TOKEN> unsafe ( ) { </a> 
<a> return ( <RARE_TOKEN> ) super . unsafe ( ) ; </a> 
<a> } </a> 
<a> public interface <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> void read ( ) ; </a> 
<a> } </a> 
<a> abstract class <RARE_TOKEN> extends <RARE_TOKEN> implements <RARE_TOKEN> { </a> 
<a> @ Override </a> 
<a> public void connect ( </a> 
<a> final SocketAddress remoteAddress , </a> 
<a> final SocketAddress localAddress , final ChannelFuture future ) { </a> 
<a> if ( eventLoop ( ) . inEventLoop ( ) ) { </a> 
<a> if ( ! <RARE_TOKEN> ( future ) ) { </a> 
<a> return ; </a> 
<a> } </a> 
<a> try { </a> 
<a> boolean <RARE_TOKEN> = isActive ( ) ; </a> 
<a> <RARE_TOKEN> ( remoteAddress , localAddress ) ; </a> 
<a> future . <RARE_TOKEN> ( ) ; </a> 
<a> if ( ! <RARE_TOKEN> && isActive ( ) ) { </a> 
<a> pipeline ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } catch ( Throwable t ) { </a> 
<a> future . setFailure ( t ) ; </a> 
<a> pipeline ( ) . fireExceptionCaught ( t ) ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } else { </a> 
<a> eventLoop ( ) . execute ( new Runnable ( ) { </a> 
<a> @ Override </a> 
<a> public void run ( ) { </a> 
<a> connect ( remoteAddress , localAddress , future ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected boolean <RARE_TOKEN> ( EventLoop loop ) { </a> 
<a> return loop instanceof <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected Runnable <RARE_TOKEN> ( ) throws Exception { </a> 
<a> return null ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( ) throws Exception { </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected boolean <RARE_TOKEN> ( ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> protected abstract void <RARE_TOKEN> ( </a> 
<a> SocketAddress remoteAddress , SocketAddress localAddress ) throws Exception ; </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . channel . socket . <RARE_TOKEN> ; </a> 
<a> import io . netty . buffer . MessageBuf ; </a> 
<a> import io . netty . channel . Channel ; </a> 
<a> import io . netty . channel . ChannelPipeline ; </a> 
<a> import java . io . IOException ; </a> 
<a> abstract class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> protected <RARE_TOKEN> ( Channel parent , Integer id ) { </a> 
<a> super ( parent , id ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected abstract <RARE_TOKEN> <RARE_TOKEN> ( ) ; </a> 
<a> abstract class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> @ Override </a> 
<a> public void read ( ) { </a> 
<a> assert eventLoop ( ) . inEventLoop ( ) ; </a> 
<a> final ChannelPipeline pipeline = pipeline ( ) ; </a> 
<a> final MessageBuf < Object > <RARE_TOKEN> = pipeline . <RARE_TOKEN> ( ) ; </a> 
<a> boolean closed = false ; </a> 
<a> boolean read = false ; </a> 
<a> try { </a> 
<a> int <RARE_TOKEN> = <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> if ( <RARE_TOKEN> > 0 ) { </a> 
<a> read = true ; </a> 
<a> } else if ( <RARE_TOKEN> < 0 ) { </a> 
<a> closed = true ; </a> 
<a> } </a> 
<a> } catch ( Throwable t ) { </a> 
<a> if ( read ) { </a> 
<a> read = false ; </a> 
<a> pipeline . fireInboundBufferUpdated ( ) ; </a> 
<a> } </a> 
<a> pipeline ( ) . fireExceptionCaught ( t ) ; </a> 
<a> if ( t instanceof IOException ) { </a> 
<a> close ( <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> } finally { </a> 
<a> if ( read ) { </a> 
<a> pipeline . fireInboundBufferUpdated ( ) ; </a> 
<a> } </a> 
<a> if ( closed && isOpen ( ) ) { </a> 
<a> close ( <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( MessageBuf < Object > buf ) throws Exception { </a> 
<a> while ( ! buf . isEmpty ( ) ) { </a> 
<a> <RARE_TOKEN> ( buf ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> protected abstract int <RARE_TOKEN> ( MessageBuf < Object > buf ) throws Exception ; </a> 
<a> protected abstract void <RARE_TOKEN> ( MessageBuf < Object > buf ) throws Exception ; </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . channel . socket . <RARE_TOKEN> ; </a> 
<a> import io . netty . buffer . ByteBuf ; </a> 
<a> import io . netty . buffer . ChannelBufType ; </a> 
<a> import io . netty . buffer . MessageBuf ; </a> 
<a> import io . netty . buffer . Unpooled ; </a> 
<a> import io . netty . channel . ChannelException ; </a> 
<a> import io . netty . channel . ChannelFuture ; </a> 
<a> import io . netty . channel . ChannelMetadata ; </a> 
<a> import io . netty . channel . socket . <RARE_TOKEN> ; </a> 
<a> import io . netty . channel . socket . <RARE_TOKEN> ; </a> 
<a> import io . netty . channel . socket . <RARE_TOKEN> ; </a> 
<a> import io . netty . channel . socket . <RARE_TOKEN> ; </a> 
<a> import io . netty . logging . InternalLogger ; </a> 
<a> import io . netty . logging . InternalLoggerFactory ; </a> 
<a> import java . io . IOException ; </a> 
<a> import java . net . InetAddress ; </a> 
<a> import java . net . InetSocketAddress ; </a> 
<a> import java . net . <RARE_TOKEN> ; </a> 
<a> import java . net . NetworkInterface ; </a> 
<a> import java . net . SocketAddress ; </a> 
<a> import java . net . SocketException ; </a> 
<a> import java . net . <RARE_TOKEN> ; </a> 
<a> import java . util . <RARE_TOKEN> ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> </a> 
<a> implements <RARE_TOKEN> { </a> 
<a> private static final InternalLogger logger = InternalLoggerFactory . getInstance ( <RARE_TOKEN> . class ) ; </a> 
<a> private static final ChannelMetadata <RARE_TOKEN> = new ChannelMetadata ( ChannelBufType . <RARE_TOKEN> , true ) ; </a> 
<a> private static final byte [ ] <RARE_TOKEN> = new byte [ 0 ] ; </a> 
<a> private final <RARE_TOKEN> socket ; </a> 
<a> private final <RARE_TOKEN> config ; </a> 
<a> private final java . net . <RARE_TOKEN> <RARE_TOKEN> = new java . net . <RARE_TOKEN> ( <RARE_TOKEN> , 0 ) ; </a> 
<a> private volatile boolean <RARE_TOKEN> ; </a> 
<a> private static <RARE_TOKEN> <RARE_TOKEN> ( ) { </a> 
<a> try { </a> 
<a> return new <RARE_TOKEN> ( null ) ; </a> 
<a> } catch ( Exception e ) { </a> 
<a> throw new ChannelException ( "failed to create a new <RARE_TOKEN> , e ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( ) { </a> 
<a> this ( <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( <RARE_TOKEN> socket ) { </a> 
<a> this ( null , socket ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( Integer id , <RARE_TOKEN> socket ) { </a> 
<a> super ( null , id ) ; </a> 
<a> boolean success = false ; </a> 
<a> try { </a> 
<a> socket . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> socket . <RARE_TOKEN> ( false ) ; </a> 
<a> success = true ; </a> 
<a> } catch ( SocketException e ) { </a> 
<a> throw new ChannelException ( </a> 
<a> "Failed to <RARE_TOKEN> the <RARE_TOKEN> socket <RARE_TOKEN> , e ) ; </a> 
<a> } finally { </a> 
<a> if ( ! success ) { </a> 
<a> socket . close ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> this . socket = socket ; </a> 
<a> config = new <RARE_TOKEN> ( socket ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ChannelMetadata <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public <RARE_TOKEN> config ( ) { </a> 
<a> return config ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean isOpen ( ) { </a> 
<a> return ! socket . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean isActive ( ) { </a> 
<a> return isOpen ( ) && socket . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> return socket . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected SocketAddress <RARE_TOKEN> ( ) { </a> 
<a> return socket . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected SocketAddress <RARE_TOKEN> ( ) { </a> 
<a> return socket . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( SocketAddress localAddress ) throws Exception { </a> 
<a> socket . bind ( localAddress ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( SocketAddress remoteAddress , </a> 
<a> SocketAddress localAddress ) throws Exception { </a> 
<a> if ( localAddress != null ) { </a> 
<a> socket . bind ( localAddress ) ; </a> 
<a> } </a> 
<a> boolean success = false ; </a> 
<a> try { </a> 
<a> socket . connect ( remoteAddress ) ; </a> 
<a> success = true ; </a> 
<a> } finally { </a> 
<a> if ( ! success ) { </a> 
<a> try { </a> 
<a> socket . close ( ) ; </a> 
<a> } catch ( Throwable t ) { </a> 
<a> logger . warn ( "Failed to close a <RARE_TOKEN> , t ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( ) throws Exception { </a> 
<a> socket . disconnect ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( ) throws Exception { </a> 
<a> socket . close ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected int <RARE_TOKEN> ( MessageBuf < Object > buf ) throws Exception { </a> 
<a> if ( <RARE_TOKEN> ) { </a> 
<a> try { </a> 
<a> Thread . sleep ( <RARE_TOKEN> ) ; </a> 
<a> } catch ( InterruptedException e ) { </a> 
<a> } </a> 
<a> return 0 ; </a> 
<a> } </a> 
<a> int <RARE_TOKEN> = config ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> byte [ ] data = new byte [ <RARE_TOKEN> ] ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( data ) ; </a> 
<a> try { </a> 
<a> socket . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> InetSocketAddress <RARE_TOKEN> = ( InetSocketAddress ) <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> <RARE_TOKEN> = remoteAddress ( ) ; </a> 
<a> } </a> 
<a> buf . add ( new <RARE_TOKEN> ( Unpooled . wrappedBuffer ( </a> 
<a> data , <RARE_TOKEN> . <RARE_TOKEN> ( ) , <RARE_TOKEN> . <RARE_TOKEN> ( ) ) , <RARE_TOKEN> ) ) ; </a> 
<a> if ( <RARE_TOKEN> ) { </a> 
<a> return 0 ; </a> 
<a> } else { </a> 
<a> return 1 ; </a> 
<a> } </a> 
<a> } catch ( <RARE_TOKEN> e ) { </a> 
<a> return 0 ; </a> 
<a> } catch ( SocketException e ) { </a> 
<a> if ( ! e . getMessage ( ) . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ) . contains ( <RARE_TOKEN> <RARE_TOKEN> ) ) { </a> 
<a> throw e ; </a> 
<a> } </a> 
<a> return - 1 ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( MessageBuf < Object > buf ) throws Exception { </a> 
<a> <RARE_TOKEN> p = ( <RARE_TOKEN> ) buf . poll ( ) ; </a> 
<a> ByteBuf data = p . data ( ) ; </a> 
<a> int length = data . readableBytes ( ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( p . remoteAddress ( ) ) ; </a> 
<a> if ( data . <RARE_TOKEN> ( ) ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( data . array ( ) , data . <RARE_TOKEN> ( ) + data . readerIndex ( ) , length ) ; </a> 
<a> } else { </a> 
<a> byte [ ] <RARE_TOKEN> = new byte [ length ] ; </a> 
<a> data . getBytes ( data . readerIndex ( ) , <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> socket . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ChannelFuture <RARE_TOKEN> ( InetAddress multicastAddress ) { </a> 
<a> return <RARE_TOKEN> ( multicastAddress , <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ChannelFuture <RARE_TOKEN> ( InetAddress multicastAddress , ChannelFuture future ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> try { </a> 
<a> socket . <RARE_TOKEN> ( multicastAddress ) ; </a> 
<a> future . <RARE_TOKEN> ( ) ; </a> 
<a> } catch ( IOException e ) { </a> 
<a> future . setFailure ( e ) ; </a> 
<a> } </a> 
<a> return future ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ChannelFuture <RARE_TOKEN> ( InetSocketAddress multicastAddress , NetworkInterface networkInterface ) { </a> 
<a> return <RARE_TOKEN> ( multicastAddress , networkInterface , <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ChannelFuture <RARE_TOKEN> ( </a> 
<a> InetSocketAddress multicastAddress , NetworkInterface networkInterface , </a> 
<a> ChannelFuture future ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> try { </a> 
<a> socket . <RARE_TOKEN> ( multicastAddress , networkInterface ) ; </a> 
<a> future . <RARE_TOKEN> ( ) ; </a> 
<a> } catch ( IOException e ) { </a> 
<a> future . setFailure ( e ) ; </a> 
<a> } </a> 
<a> return future ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ChannelFuture <RARE_TOKEN> ( </a> 
<a> InetAddress multicastAddress , NetworkInterface networkInterface , InetAddress source ) { </a> 
<a> return <RARE_TOKEN> ( new UnsupportedOperationException ( ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ChannelFuture <RARE_TOKEN> ( </a> 
<a> InetAddress multicastAddress , NetworkInterface networkInterface , InetAddress source , </a> 
<a> ChannelFuture future ) { </a> 
<a> future . setFailure ( new UnsupportedOperationException ( ) ) ; </a> 
<a> return future ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( ) { </a> 
<a> if ( ! isActive ( ) ) { </a> 
<a> throw new IllegalStateException ( </a> 
<a> <RARE_TOKEN> . class . getName ( ) + </a> 
<a> " must be <RARE_TOKEN> to <RARE_TOKEN> a <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ChannelFuture <RARE_TOKEN> ( InetAddress multicastAddress ) { </a> 
<a> return <RARE_TOKEN> ( multicastAddress , <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ChannelFuture <RARE_TOKEN> ( InetAddress multicastAddress , ChannelFuture future ) { </a> 
<a> try { </a> 
<a> socket . <RARE_TOKEN> ( multicastAddress ) ; </a> 
<a> future . <RARE_TOKEN> ( ) ; </a> 
<a> } catch ( IOException e ) { </a> 
<a> future . setFailure ( e ) ; </a> 
<a> } </a> 
<a> return future ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ChannelFuture <RARE_TOKEN> ( </a> 
<a> InetSocketAddress multicastAddress , NetworkInterface networkInterface ) { </a> 
<a> return <RARE_TOKEN> ( multicastAddress , networkInterface , <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ChannelFuture <RARE_TOKEN> ( </a> 
<a> InetSocketAddress multicastAddress , NetworkInterface networkInterface , </a> 
<a> ChannelFuture future ) { </a> 
<a> try { </a> 
<a> socket . <RARE_TOKEN> ( multicastAddress , networkInterface ) ; </a> 
<a> future . <RARE_TOKEN> ( ) ; </a> 
<a> } catch ( IOException e ) { </a> 
<a> future . setFailure ( e ) ; </a> 
<a> } </a> 
<a> return future ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ChannelFuture <RARE_TOKEN> ( </a> 
<a> InetAddress multicastAddress , NetworkInterface networkInterface , InetAddress source ) { </a> 
<a> return <RARE_TOKEN> ( new UnsupportedOperationException ( ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ChannelFuture <RARE_TOKEN> ( </a> 
<a> InetAddress multicastAddress , NetworkInterface networkInterface , InetAddress source , </a> 
<a> ChannelFuture future ) { </a> 
<a> future . setFailure ( new UnsupportedOperationException ( ) ) ; </a> 
<a> return future ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ChannelFuture block ( InetAddress multicastAddress , </a> 
<a> NetworkInterface networkInterface , InetAddress <RARE_TOKEN> ) { </a> 
<a> return <RARE_TOKEN> ( new UnsupportedOperationException ( ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ChannelFuture block ( InetAddress multicastAddress , </a> 
<a> NetworkInterface networkInterface , InetAddress <RARE_TOKEN> , </a> 
<a> ChannelFuture future ) { </a> 
<a> future . setFailure ( new UnsupportedOperationException ( ) ) ; </a> 
<a> return future ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ChannelFuture block ( InetAddress multicastAddress , </a> 
<a> InetAddress <RARE_TOKEN> ) { </a> 
<a> return <RARE_TOKEN> ( new UnsupportedOperationException ( ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ChannelFuture block ( InetAddress multicastAddress , </a> 
<a> InetAddress <RARE_TOKEN> , ChannelFuture future ) { </a> 
<a> future . setFailure ( new UnsupportedOperationException ( ) ) ; </a> 
<a> return future ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected <RARE_TOKEN> <RARE_TOKEN> ( ) { </a> 
<a> return new <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> private final class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> = true ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> = false ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . channel . socket . <RARE_TOKEN> ; </a> 
<a> import io . netty . channel . Channel ; </a> 
<a> import io . netty . channel . ChannelFuture ; </a> 
<a> import io . netty . channel . ChannelFutureListener ; </a> 
<a> import io . netty . channel . <RARE_TOKEN> ; </a> 
<a> class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> private final <RARE_TOKEN> parent ; </a> 
<a> private <RARE_TOKEN> ch ; </a> 
<a> <RARE_TOKEN> ( <RARE_TOKEN> parent ) { </a> 
<a> super ( parent , parent . threadFactory , parent . scheduler ) ; </a> 
<a> this . parent = parent ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ChannelFuture <RARE_TOKEN> ( Channel channel , ChannelFuture future ) { </a> 
<a> return super . <RARE_TOKEN> ( channel , future ) . addListener ( new ChannelFutureListener ( ) { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ChannelFuture future ) throws Exception { </a> 
<a> if ( future . <RARE_TOKEN> ( ) ) { </a> 
<a> ch = ( <RARE_TOKEN> ) future . channel ( ) ; </a> 
<a> } else { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void run ( ) { </a> 
<a> for ( ; ; ) { </a> 
<a> <RARE_TOKEN> ch = this . ch ; </a> 
<a> if ( ch == null || ! ch . isActive ( ) ) { </a> 
<a> Runnable task ; </a> 
<a> try { </a> 
<a> task = <RARE_TOKEN> ( ) ; </a> 
<a> task . run ( ) ; </a> 
<a> } catch ( InterruptedException e ) { </a> 
<a> } </a> 
<a> } else { </a> 
<a> long <RARE_TOKEN> = System . <RARE_TOKEN> ( ) ; </a> 
<a> for ( ; ; ) { </a> 
<a> final Runnable task = <RARE_TOKEN> ( ) ; </a> 
<a> if ( task == null ) { </a> 
<a> break ; </a> 
<a> } </a> 
<a> task . run ( ) ; </a> 
<a> if ( System . <RARE_TOKEN> ( ) - <RARE_TOKEN> > <RARE_TOKEN> . <RARE_TOKEN> * <RARE_TOKEN> ) { </a> 
<a> break ; </a> 
<a> } </a> 
<a> } </a> 
<a> ch . unsafe ( ) . read ( ) ; </a> 
<a> if ( ! ch . <RARE_TOKEN> ( ) ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> ( ) ) { </a> 
<a> if ( ch != null ) { </a> 
<a> ch . unsafe ( ) . close ( ch . unsafe ( ) . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> ( ) == null ) { </a> 
<a> break ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( boolean inEventLoop ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> private void <RARE_TOKEN> ( ) { </a> 
<a> ch = null ; </a> 
<a> parent . <RARE_TOKEN> . remove ( this ) ; </a> 
<a> parent . <RARE_TOKEN> . add ( this ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . channel . socket . <RARE_TOKEN> ; </a> 
<a> import io . netty . channel . Channel ; </a> 
<a> import io . netty . channel . ChannelException ; </a> 
<a> import io . netty . channel . ChannelFuture ; </a> 
<a> import io . netty . channel . EventLoop ; </a> 
<a> import io . netty . channel . <RARE_TOKEN> ; </a> 
<a> import io . netty . channel . <RARE_TOKEN> ; </a> 
<a> import java . util . Collections ; </a> 
<a> import java . util . <RARE_TOKEN> ; </a> 
<a> import java . util . Set ; </a> 
<a> import java . util . concurrent . ConcurrentHashMap ; </a> 
<a> import java . util . concurrent . ConcurrentLinkedQueue ; </a> 
<a> import java . util . concurrent . <RARE_TOKEN> ; </a> 
<a> import java . util . concurrent . ThreadFactory ; </a> 
<a> import java . util . concurrent . TimeUnit ; </a> 
<a> public class <RARE_TOKEN> implements <RARE_TOKEN> { </a> 
<a> private final int <RARE_TOKEN> ; </a> 
<a> final <RARE_TOKEN> scheduler ; </a> 
<a> final ThreadFactory threadFactory ; </a> 
<a> final Set < <RARE_TOKEN> > <RARE_TOKEN> = Collections . <RARE_TOKEN> ( </a> 
<a> new ConcurrentHashMap < <RARE_TOKEN> , Boolean > ( ) ) ; </a> 
<a> final <RARE_TOKEN> < <RARE_TOKEN> > <RARE_TOKEN> = new ConcurrentLinkedQueue < <RARE_TOKEN> > ( ) ; </a> 
<a> private final ChannelException <RARE_TOKEN> ; </a> 
<a> public <RARE_TOKEN> ( ) { </a> 
<a> this ( 0 ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( int <RARE_TOKEN> ) { </a> 
<a> this ( <RARE_TOKEN> , <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( int <RARE_TOKEN> , ThreadFactory threadFactory ) { </a> 
<a> if ( <RARE_TOKEN> < 0 ) { </a> 
<a> throw new IllegalArgumentException ( String . format ( </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> (expected: >= <RARE_TOKEN> , <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> if ( threadFactory == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> this . threadFactory = threadFactory ; </a> 
<a> scheduler = new <RARE_TOKEN> ( threadFactory ) ; </a> 
<a> <RARE_TOKEN> = new ChannelException ( <RARE_TOKEN> <RARE_TOKEN> channels <RARE_TOKEN> " + <RARE_TOKEN> + <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( new <RARE_TOKEN> [ 0 ] ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public EventLoop next ( ) { </a> 
<a> throw new UnsupportedOperationException ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void shutdown ( ) { </a> 
<a> scheduler . shutdown ( ) ; </a> 
<a> for ( EventLoop l : <RARE_TOKEN> ) { </a> 
<a> l . shutdown ( ) ; </a> 
<a> } </a> 
<a> for ( EventLoop l : <RARE_TOKEN> ) { </a> 
<a> l . shutdown ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> if ( ! scheduler . <RARE_TOKEN> ( ) ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> for ( EventLoop l : <RARE_TOKEN> ) { </a> 
<a> if ( ! l . <RARE_TOKEN> ( ) ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> } </a> 
<a> for ( EventLoop l : <RARE_TOKEN> ) { </a> 
<a> if ( ! l . <RARE_TOKEN> ( ) ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> } </a> 
<a> return true ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> if ( ! scheduler . <RARE_TOKEN> ( ) ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> for ( EventLoop l : <RARE_TOKEN> ) { </a> 
<a> if ( ! l . <RARE_TOKEN> ( ) ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> } </a> 
<a> for ( EventLoop l : <RARE_TOKEN> ) { </a> 
<a> if ( ! l . <RARE_TOKEN> ( ) ) { </a> 
<a> return false ; </a> 
<a> } </a> 
<a> } </a> 
<a> return true ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( long timeout , TimeUnit unit ) </a> 
<a> throws InterruptedException { </a> 
<a> long <RARE_TOKEN> = System . <RARE_TOKEN> ( ) + unit . <RARE_TOKEN> ( timeout ) ; </a> 
<a> for ( ; ; ) { </a> 
<a> long <RARE_TOKEN> = <RARE_TOKEN> - System . <RARE_TOKEN> ( ) ; </a> 
<a> if ( <RARE_TOKEN> <= 0 ) { </a> 
<a> return <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> if ( scheduler . <RARE_TOKEN> ( <RARE_TOKEN> , TimeUnit . <RARE_TOKEN> ) ) { </a> 
<a> break ; </a> 
<a> } </a> 
<a> } </a> 
<a> for ( EventLoop l : <RARE_TOKEN> ) { </a> 
<a> for ( ; ; ) { </a> 
<a> long <RARE_TOKEN> = <RARE_TOKEN> - System . <RARE_TOKEN> ( ) ; </a> 
<a> if ( <RARE_TOKEN> <= 0 ) { </a> 
<a> return <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> if ( l . <RARE_TOKEN> ( <RARE_TOKEN> , TimeUnit . <RARE_TOKEN> ) ) { </a> 
<a> break ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> for ( EventLoop l : <RARE_TOKEN> ) { </a> 
<a> for ( ; ; ) { </a> 
<a> long <RARE_TOKEN> = <RARE_TOKEN> - System . <RARE_TOKEN> ( ) ; </a> 
<a> if ( <RARE_TOKEN> <= 0 ) { </a> 
<a> return <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> if ( l . <RARE_TOKEN> ( <RARE_TOKEN> , TimeUnit . <RARE_TOKEN> ) ) { </a> 
<a> break ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> return <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ChannelFuture <RARE_TOKEN> ( Channel channel ) { </a> 
<a> if ( channel == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> try { </a> 
<a> return <RARE_TOKEN> ( ) . <RARE_TOKEN> ( channel ) ; </a> 
<a> } catch ( Throwable t ) { </a> 
<a> return channel . <RARE_TOKEN> ( t ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ChannelFuture <RARE_TOKEN> ( Channel channel , ChannelFuture future ) { </a> 
<a> if ( channel == null ) { </a> 
<a> throw new NullPointerException ( <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> try { </a> 
<a> return <RARE_TOKEN> ( ) . <RARE_TOKEN> ( channel , future ) ; </a> 
<a> } catch ( Throwable t ) { </a> 
<a> return channel . <RARE_TOKEN> ( t ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private EventLoop <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> loop = <RARE_TOKEN> . poll ( ) ; </a> 
<a> if ( loop == null ) { </a> 
<a> if ( <RARE_TOKEN> > 0 && <RARE_TOKEN> . size ( ) >= <RARE_TOKEN> ) { </a> 
<a> throw <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> loop = new <RARE_TOKEN> ( this ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> . add ( loop ) ; </a> 
<a> return loop ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . channel . socket . <RARE_TOKEN> ; </a> 
<a> import io . netty . buffer . ByteBuf ; </a> 
<a> import io . netty . buffer . ChannelBufType ; </a> 
<a> import io . netty . channel . Channel ; </a> 
<a> import io . netty . channel . ChannelException ; </a> 
<a> import io . netty . channel . ChannelMetadata ; </a> 
<a> import io . netty . channel . socket . <RARE_TOKEN> ; </a> 
<a> import io . netty . channel . socket . SocketChannel ; </a> 
<a> import io . netty . channel . socket . <RARE_TOKEN> ; </a> 
<a> import io . netty . logging . InternalLogger ; </a> 
<a> import io . netty . logging . InternalLoggerFactory ; </a> 
<a> import java . io . IOException ; </a> 
<a> import java . io . InputStream ; </a> 
<a> import java . io . OutputStream ; </a> 
<a> import java . net . <RARE_TOKEN> ; </a> 
<a> import java . net . SocketAddress ; </a> 
<a> import java . net . <RARE_TOKEN> ; </a> 
<a> import java . nio . channels . <RARE_TOKEN> ; </a> 
<a> public class <RARE_TOKEN> extends <RARE_TOKEN> </a> 
<a> implements SocketChannel { </a> 
<a> private static final InternalLogger logger = </a> 
<a> InternalLoggerFactory . getInstance ( <RARE_TOKEN> . class ) ; </a> 
<a> private static final ChannelMetadata <RARE_TOKEN> = new ChannelMetadata ( ChannelBufType . <RARE_TOKEN> , false ) ; </a> 
<a> private final <RARE_TOKEN> socket ; </a> 
<a> private final <RARE_TOKEN> config ; </a> 
<a> private InputStream is ; </a> 
<a> private OutputStream os ; </a> 
<a> private volatile boolean <RARE_TOKEN> ; </a> 
<a> public <RARE_TOKEN> ( ) { </a> 
<a> this ( new <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( <RARE_TOKEN> socket ) { </a> 
<a> this ( null , null , socket ) ; </a> 
<a> } </a> 
<a> public <RARE_TOKEN> ( Channel parent , Integer id , <RARE_TOKEN> socket ) { </a> 
<a> super ( parent , id ) ; </a> 
<a> this . socket = socket ; </a> 
<a> config = new <RARE_TOKEN> ( socket ) ; </a> 
<a> boolean success = false ; </a> 
<a> try { </a> 
<a> if ( socket . <RARE_TOKEN> ( ) ) { </a> 
<a> is = socket . <RARE_TOKEN> ( ) ; </a> 
<a> os = socket . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> socket . <RARE_TOKEN> ( <RARE_TOKEN> ) ; </a> 
<a> success = true ; </a> 
<a> } catch ( Exception e ) { </a> 
<a> throw new ChannelException ( "failed to <RARE_TOKEN> a <RARE_TOKEN> , e ) ; </a> 
<a> } finally { </a> 
<a> if ( ! success ) { </a> 
<a> try { </a> 
<a> socket . close ( ) ; </a> 
<a> } catch ( IOException e ) { </a> 
<a> logger . warn ( "Failed to close a <RARE_TOKEN> , e ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ChannelMetadata <RARE_TOKEN> ( ) { </a> 
<a> return <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public <RARE_TOKEN> config ( ) { </a> 
<a> return config ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean isOpen ( ) { </a> 
<a> return ! socket . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean isActive ( ) { </a> 
<a> return ! socket . <RARE_TOKEN> ( ) && socket . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected SocketAddress <RARE_TOKEN> ( ) { </a> 
<a> return socket . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected SocketAddress <RARE_TOKEN> ( ) { </a> 
<a> return socket . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( SocketAddress localAddress ) throws Exception { </a> 
<a> socket . bind ( localAddress ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( SocketAddress remoteAddress , </a> 
<a> SocketAddress localAddress ) throws Exception { </a> 
<a> if ( localAddress != null ) { </a> 
<a> socket . bind ( localAddress ) ; </a> 
<a> } </a> 
<a> boolean success = false ; </a> 
<a> try { </a> 
<a> socket . connect ( remoteAddress , config ( ) . <RARE_TOKEN> ( ) ) ; </a> 
<a> is = socket . <RARE_TOKEN> ( ) ; </a> 
<a> os = socket . <RARE_TOKEN> ( ) ; </a> 
<a> success = true ; </a> 
<a> } finally { </a> 
<a> if ( ! success ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( ) throws Exception { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( ) throws Exception { </a> 
<a> socket . close ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected int <RARE_TOKEN> ( ) { </a> 
<a> try { </a> 
<a> return is . <RARE_TOKEN> ( ) ; </a> 
<a> } catch ( IOException e ) { </a> 
<a> return 0 ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected int <RARE_TOKEN> ( ByteBuf buf ) throws Exception { </a> 
<a> if ( socket . <RARE_TOKEN> ( ) ) { </a> 
<a> return - 1 ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> ) { </a> 
<a> try { </a> 
<a> Thread . sleep ( <RARE_TOKEN> ) ; </a> 
<a> } catch ( InterruptedException e ) { </a> 
<a> } </a> 
<a> return 0 ; </a> 
<a> } </a> 
<a> try { </a> 
<a> int read = buf . writeBytes ( is , buf . <RARE_TOKEN> ( ) ) ; </a> 
<a> if ( read > 0 && ! <RARE_TOKEN> ) { </a> 
<a> return read ; </a> 
<a> } else { </a> 
<a> return 0 ; </a> 
<a> } </a> 
<a> } catch ( <RARE_TOKEN> e ) { </a> 
<a> return 0 ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( ByteBuf buf ) throws Exception { </a> 
<a> OutputStream os = this . os ; </a> 
<a> if ( os == null ) { </a> 
<a> throw new <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> buf . readBytes ( os , buf . readableBytes ( ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected <RARE_TOKEN> <RARE_TOKEN> ( ) { </a> 
<a> return new <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> private final class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> = true ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> = false ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . channel . socket . <RARE_TOKEN> ; </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . channel . socket ; </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . channel ; </a> 
<a> import static org . <RARE_TOKEN> . <RARE_TOKEN> . * ; </a> 
<a> import static org . junit . Assert . * ; </a> 
<a> import java . util . concurrent . <RARE_TOKEN> ; </a> 
<a> import java . util . concurrent . TimeUnit ; </a> 
<a> import java . util . concurrent . <RARE_TOKEN> ; </a> 
<a> import org . junit . <RARE_TOKEN> ; </a> 
<a> import org . junit . Test ; </a> 
<a> public class <RARE_TOKEN> { </a> 
<a> private final Channel channel = <RARE_TOKEN> ( Channel . class ) ; </a> 
<a> private <RARE_TOKEN> future ; </a> 
<a> @ <RARE_TOKEN> </a> 
<a> public void init ( ) { </a> 
<a> future = new <RARE_TOKEN> ( channel ) ; </a> 
<a> } </a> 
<a> @ Test ( expected = NullPointerException . class ) </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> new <RARE_TOKEN> ( null ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) throws Exception { </a> 
<a> ChannelFutureListener l = createStrictMock ( ChannelFutureListener . class ) ; </a> 
<a> replay ( l ) ; </a> 
<a> future . <RARE_TOKEN> ( l ) ; </a> 
<a> verify ( l ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) throws InterruptedException { </a> 
<a> assertSame ( channel , future . channel ( ) ) ; </a> 
<a> assertTrue ( future . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertFalse ( future . cancel ( ) ) ; </a> 
<a> assertFalse ( future . isCancelled ( ) ) ; </a> 
<a> assertSame ( future , future . await ( ) ) ; </a> 
<a> assertTrue ( future . await ( 1 ) ) ; </a> 
<a> assertTrue ( future . await ( 1 , TimeUnit . <RARE_TOKEN> ) ) ; </a> 
<a> assertSame ( future , future . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertTrue ( future . <RARE_TOKEN> ( 1 ) ) ; </a> 
<a> assertTrue ( future . <RARE_TOKEN> ( 1 , TimeUnit . <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> private static class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> <RARE_TOKEN> ( Channel channel ) { </a> 
<a> super ( channel ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public Throwable cause ( ) { </a> 
<a> throw new Error ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public boolean <RARE_TOKEN> ( ) { </a> 
<a> throw new Error ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ChannelFuture sync ( ) throws InterruptedException { </a> 
<a> throw new Error ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ChannelFuture <RARE_TOKEN> ( ) { </a> 
<a> throw new Error ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public Void get ( ) throws InterruptedException , <RARE_TOKEN> { </a> 
<a> throw new Error ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public Void get ( long timeout , TimeUnit unit ) throws InterruptedException , </a> 
<a> <RARE_TOKEN> , <RARE_TOKEN> { </a> 
<a> throw new Error ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . channel ; </a> 
<a> import static org . junit . Assert . * ; </a> 
<a> import io . netty . channel . ChannelHandler . Sharable ; </a> 
<a> import io . netty . channel . <RARE_TOKEN> . <RARE_TOKEN> ; </a> 
<a> import org . junit . Test ; </a> 
<a> public class <RARE_TOKEN> { </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> pipeline = new <RARE_TOKEN> ( new <RARE_TOKEN> ( ) ) ; </a> 
<a> ChannelHandler <RARE_TOKEN> = <RARE_TOKEN> ( ) ; </a> 
<a> pipeline . addLast ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> pipeline . addLast ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> pipeline . addLast ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> assertTrue ( pipeline . get ( <RARE_TOKEN> ) == <RARE_TOKEN> ) ; </a> 
<a> assertTrue ( pipeline . get ( <RARE_TOKEN> ) == <RARE_TOKEN> ) ; </a> 
<a> assertTrue ( pipeline . get ( <RARE_TOKEN> ) == <RARE_TOKEN> ) ; </a> 
<a> ChannelHandler <RARE_TOKEN> = <RARE_TOKEN> ( ) ; </a> 
<a> pipeline . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> assertTrue ( pipeline . get ( <RARE_TOKEN> ) == <RARE_TOKEN> ) ; </a> 
<a> ChannelHandler <RARE_TOKEN> = <RARE_TOKEN> ( ) ; </a> 
<a> pipeline . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> assertTrue ( pipeline . get ( <RARE_TOKEN> ) == <RARE_TOKEN> ) ; </a> 
<a> ChannelHandler <RARE_TOKEN> = <RARE_TOKEN> ( ) ; </a> 
<a> pipeline . <RARE_TOKEN> ( <RARE_TOKEN> , <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> assertTrue ( pipeline . get ( <RARE_TOKEN> ) == <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> private static ChannelHandler <RARE_TOKEN> ( ) { </a> 
<a> return new <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Sharable </a> 
<a> private static class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . channel ; </a> 
<a> import static org . junit . Assert . * ; </a> 
<a> import java . util . <RARE_TOKEN> ; </a> 
<a> import java . util . concurrent . CountDownLatch ; </a> 
<a> import java . util . concurrent . <RARE_TOKEN> ; </a> 
<a> import java . util . concurrent . <RARE_TOKEN> ; </a> 
<a> import java . util . concurrent . ScheduledFuture ; </a> 
<a> import java . util . concurrent . TimeUnit ; </a> 
<a> import java . util . concurrent . atomic . AtomicBoolean ; </a> 
<a> import java . util . concurrent . atomic . AtomicInteger ; </a> 
<a> import java . util . concurrent . atomic . <RARE_TOKEN> ; </a> 
<a> import org . junit . <RARE_TOKEN> ; </a> 
<a> import org . junit . <RARE_TOKEN> ; </a> 
<a> import org . junit . Test ; </a> 
<a> public class <RARE_TOKEN> { </a> 
<a> private <RARE_TOKEN> loop ; </a> 
<a> @ <RARE_TOKEN> </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> loop = new <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ <RARE_TOKEN> </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> if ( ! loop . <RARE_TOKEN> ( ) ) { </a> 
<a> loop . shutdown ( ) ; </a> 
<a> } </a> 
<a> while ( ! loop . <RARE_TOKEN> ( ) ) { </a> 
<a> try { </a> 
<a> loop . <RARE_TOKEN> ( 1 , TimeUnit . <RARE_TOKEN> ) ; </a> 
<a> } catch ( InterruptedException e ) { </a> 
<a> } </a> 
<a> } </a> 
<a> assertEquals ( 1 , loop . <RARE_TOKEN> . get ( ) ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) throws Exception { </a> 
<a> loop . shutdown ( ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) throws Exception { </a> 
<a> final AtomicBoolean <RARE_TOKEN> = new AtomicBoolean ( ) ; </a> 
<a> final CountDownLatch latch = new CountDownLatch ( 1 ) ; </a> 
<a> loop . execute ( new Runnable ( ) { </a> 
<a> @ Override </a> 
<a> public void run ( ) { </a> 
<a> latch . countDown ( ) ; </a> 
<a> try { </a> 
<a> Thread . sleep ( Integer . MAX_VALUE ) ; </a> 
<a> } catch ( InterruptedException <RARE_TOKEN> ) { </a> 
<a> <RARE_TOKEN> . set ( true ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> latch . await ( ) ; </a> 
<a> loop . shutdown ( ) ; </a> 
<a> while ( ! loop . <RARE_TOKEN> ( ) ) { </a> 
<a> loop . <RARE_TOKEN> ( 1 , TimeUnit . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> assertTrue ( <RARE_TOKEN> . get ( ) ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) throws Exception { </a> 
<a> long <RARE_TOKEN> = System . <RARE_TOKEN> ( ) ; </a> 
<a> final <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( ) ; </a> 
<a> loop . schedule ( new Runnable ( ) { </a> 
<a> @ Override </a> 
<a> public void run ( ) { </a> 
<a> <RARE_TOKEN> . set ( System . <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> } , <RARE_TOKEN> , TimeUnit . MILLISECONDS ) . get ( ) ; </a> 
<a> assertTrue ( <RARE_TOKEN> . get ( ) - <RARE_TOKEN> >= TimeUnit . MILLISECONDS . <RARE_TOKEN> ( <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) throws Exception { </a> 
<a> final <RARE_TOKEN> < Long > <RARE_TOKEN> = new <RARE_TOKEN> < Long > ( ) ; </a> 
<a> ScheduledFuture < ? > f = loop . <RARE_TOKEN> ( new Runnable ( ) { </a> 
<a> @ Override </a> 
<a> public void run ( ) { </a> 
<a> <RARE_TOKEN> . add ( System . <RARE_TOKEN> ( ) ) ; </a> 
<a> try { </a> 
<a> Thread . sleep ( <RARE_TOKEN> ) ; </a> 
<a> } catch ( InterruptedException e ) { </a> 
<a> } </a> 
<a> } </a> 
<a> } , <RARE_TOKEN> , <RARE_TOKEN> , TimeUnit . MILLISECONDS ) ; </a> 
<a> Thread . sleep ( <RARE_TOKEN> ) ; </a> 
<a> assertTrue ( f . cancel ( true ) ) ; </a> 
<a> assertEquals ( 5 , <RARE_TOKEN> . size ( ) ) ; </a> 
<a> Long <RARE_TOKEN> = null ; </a> 
<a> for ( Long t : <RARE_TOKEN> ) { </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> <RARE_TOKEN> = t ; </a> 
<a> continue ; </a> 
<a> } </a> 
<a> assertTrue ( t . <RARE_TOKEN> ( ) - <RARE_TOKEN> . <RARE_TOKEN> ( ) >= TimeUnit . MILLISECONDS . <RARE_TOKEN> ( <RARE_TOKEN> ) ) ; </a> 
<a> <RARE_TOKEN> = t ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) throws Exception { </a> 
<a> final <RARE_TOKEN> < Long > <RARE_TOKEN> = new <RARE_TOKEN> < Long > ( ) ; </a> 
<a> ScheduledFuture < ? > f = loop . <RARE_TOKEN> ( new Runnable ( ) { </a> 
<a> @ Override </a> 
<a> public void run ( ) { </a> 
<a> boolean <RARE_TOKEN> = <RARE_TOKEN> . isEmpty ( ) ; </a> 
<a> <RARE_TOKEN> . add ( System . <RARE_TOKEN> ( ) ) ; </a> 
<a> if ( <RARE_TOKEN> ) { </a> 
<a> try { </a> 
<a> Thread . sleep ( <RARE_TOKEN> ) ; </a> 
<a> } catch ( InterruptedException e ) { </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } , <RARE_TOKEN> , <RARE_TOKEN> , TimeUnit . MILLISECONDS ) ; </a> 
<a> Thread . sleep ( <RARE_TOKEN> ) ; </a> 
<a> assertTrue ( f . cancel ( true ) ) ; </a> 
<a> assertEquals ( 5 , <RARE_TOKEN> . size ( ) ) ; </a> 
<a> int i = 0 ; </a> 
<a> Long <RARE_TOKEN> = null ; </a> 
<a> for ( Long t : <RARE_TOKEN> ) { </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> <RARE_TOKEN> = t ; </a> 
<a> continue ; </a> 
<a> } </a> 
<a> long <RARE_TOKEN> = t . <RARE_TOKEN> ( ) - <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> if ( i == 0 ) { </a> 
<a> assertTrue ( <RARE_TOKEN> >= TimeUnit . MILLISECONDS . <RARE_TOKEN> ( <RARE_TOKEN> ) ) ; </a> 
<a> } else { </a> 
<a> assertTrue ( <RARE_TOKEN> <= TimeUnit . MILLISECONDS . <RARE_TOKEN> ( 10 ) ) ; </a> 
<a> } </a> 
<a> <RARE_TOKEN> = t ; </a> 
<a> i ++ ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) throws Exception { </a> 
<a> final <RARE_TOKEN> < Long > <RARE_TOKEN> = new <RARE_TOKEN> < Long > ( ) ; </a> 
<a> ScheduledFuture < ? > f = loop . <RARE_TOKEN> ( new Runnable ( ) { </a> 
<a> @ Override </a> 
<a> public void run ( ) { </a> 
<a> <RARE_TOKEN> . add ( System . <RARE_TOKEN> ( ) ) ; </a> 
<a> try { </a> 
<a> Thread . sleep ( <RARE_TOKEN> ) ; </a> 
<a> } catch ( InterruptedException e ) { </a> 
<a> } </a> 
<a> } </a> 
<a> } , <RARE_TOKEN> , <RARE_TOKEN> , TimeUnit . MILLISECONDS ) ; </a> 
<a> Thread . sleep ( <RARE_TOKEN> ) ; </a> 
<a> assertTrue ( f . cancel ( true ) ) ; </a> 
<a> assertEquals ( 3 , <RARE_TOKEN> . size ( ) ) ; </a> 
<a> Long <RARE_TOKEN> = null ; </a> 
<a> for ( Long t : <RARE_TOKEN> ) { </a> 
<a> if ( <RARE_TOKEN> == null ) { </a> 
<a> <RARE_TOKEN> = t ; </a> 
<a> continue ; </a> 
<a> } </a> 
<a> assertTrue ( t . <RARE_TOKEN> ( ) - <RARE_TOKEN> . <RARE_TOKEN> ( ) >= TimeUnit . MILLISECONDS . <RARE_TOKEN> ( <RARE_TOKEN> ) ) ; </a> 
<a> <RARE_TOKEN> = t ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) throws Exception { </a> 
<a> final int <RARE_TOKEN> = 3 ; </a> 
<a> final AtomicInteger <RARE_TOKEN> = new AtomicInteger ( ) ; </a> 
<a> final CountDownLatch latch = new CountDownLatch ( 1 ) ; </a> 
<a> final Runnable task = new Runnable ( ) { </a> 
<a> @ Override </a> 
<a> public void run ( ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> while ( latch . <RARE_TOKEN> ( ) > 0 ) { </a> 
<a> try { </a> 
<a> latch . await ( ) ; </a> 
<a> } catch ( InterruptedException e ) { </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> } ; </a> 
<a> for ( int i = 0 ; i < <RARE_TOKEN> ; i ++ ) { </a> 
<a> loop . execute ( task ) ; </a> 
<a> } </a> 
<a> while ( <RARE_TOKEN> . get ( ) == 0 ) { </a> 
<a> Thread . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> assertEquals ( 1 , <RARE_TOKEN> . get ( ) ) ; </a> 
<a> loop . shutdown ( ) ; </a> 
<a> latch . countDown ( ) ; </a> 
<a> while ( ! loop . <RARE_TOKEN> ( ) ) { </a> 
<a> loop . <RARE_TOKEN> ( 1 , TimeUnit . <RARE_TOKEN> ) ; </a> 
<a> } </a> 
<a> assertEquals ( <RARE_TOKEN> , <RARE_TOKEN> . get ( ) ) ; </a> 
<a> } </a> 
<a> private static class <RARE_TOKEN> extends <RARE_TOKEN> { </a> 
<a> final AtomicInteger <RARE_TOKEN> = new AtomicInteger ( ) ; </a> 
<a> <RARE_TOKEN> ( ) { </a> 
<a> super ( null , <RARE_TOKEN> . <RARE_TOKEN> ( ) , </a> 
<a> new <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ( ) ) ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void run ( ) { </a> 
<a> for ( ; ; ) { </a> 
<a> Runnable task ; </a> 
<a> try { </a> 
<a> task = <RARE_TOKEN> ( ) ; </a> 
<a> task . run ( ) ; </a> 
<a> } catch ( InterruptedException e ) { </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> ( ) && <RARE_TOKEN> ( ) == null ) { </a> 
<a> break ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( ) { </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> protected void <RARE_TOKEN> ( boolean inEventLoop ) { </a> 
<a> if ( ! inEventLoop && <RARE_TOKEN> ( ) ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ChannelFuture <RARE_TOKEN> ( Channel channel , ChannelFuture future ) { </a> 
<a> return future ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . channel ; </a> 
<a> import static org . <RARE_TOKEN> . <RARE_TOKEN> . * ; </a> 
<a> import static org . junit . Assert . * ; </a> 
<a> import org . junit . Test ; </a> 
<a> public class <RARE_TOKEN> { </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) { </a> 
<a> Channel channel = <RARE_TOKEN> ( Channel . class ) ; </a> 
<a> <RARE_TOKEN> future = new <RARE_TOKEN> ( channel ) ; </a> 
<a> assertTrue ( future . <RARE_TOKEN> ( ) ) ; </a> 
<a> assertNull ( future . cause ( ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . channel . <RARE_TOKEN> ; </a> 
<a> import io . netty . bootstrap . Bootstrap ; </a> 
<a> import io . netty . bootstrap . ServerBootstrap ; </a> 
<a> import io . netty . channel . Channel ; </a> 
<a> import io . netty . channel . ChannelHandlerContext ; </a> 
<a> import io . netty . channel . ChannelInboundMessageHandlerAdapter ; </a> 
<a> import io . netty . channel . ChannelInitializer ; </a> 
<a> import io . netty . logging . InternalLogger ; </a> 
<a> import io . netty . logging . InternalLoggerFactory ; </a> 
<a> import org . junit . Assert ; </a> 
<a> import org . junit . Test ; </a> 
<a> public class <RARE_TOKEN> { </a> 
<a> private static final InternalLogger logger = </a> 
<a> InternalLoggerFactory . getInstance ( <RARE_TOKEN> . class ) ; </a> 
<a> private static final String <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> @ Test </a> 
<a> public void <RARE_TOKEN> ( ) throws Exception { </a> 
<a> for ( int i = 0 ; i < 2 ; i ++ ) { </a> 
<a> LocalAddress <RARE_TOKEN> = new LocalAddress ( <RARE_TOKEN> ) ; </a> 
<a> Bootstrap cb = new Bootstrap ( ) ; </a> 
<a> ServerBootstrap sb = new ServerBootstrap ( ) ; </a> 
<a> cb . group ( new <RARE_TOKEN> ( ) ) </a> 
<a> . channel ( new <RARE_TOKEN> ( ) ) </a> 
<a> . remoteAddress ( <RARE_TOKEN> ) </a> 
<a> . handler ( new <RARE_TOKEN> ( ) ) ; </a> 
<a> sb . group ( new <RARE_TOKEN> ( ) ) </a> 
<a> . channel ( new <RARE_TOKEN> ( ) ) </a> 
<a> . localAddress ( <RARE_TOKEN> ) </a> 
<a> . <RARE_TOKEN> ( new ChannelInitializer < <RARE_TOKEN> > ( ) { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( <RARE_TOKEN> ch ) throws Exception { </a> 
<a> ch . pipeline ( ) . addLast ( new <RARE_TOKEN> ( ) ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> Channel sc = sb . bind ( ) . sync ( ) . channel ( ) ; </a> 
<a> Channel <RARE_TOKEN> = cb . connect ( ) . sync ( ) . channel ( ) ; </a> 
<a> <RARE_TOKEN> . pipeline ( ) . <RARE_TOKEN> ( ) . add ( <RARE_TOKEN> <RARE_TOKEN> ) ; </a> 
<a> <RARE_TOKEN> . pipeline ( ) . fireInboundBufferUpdated ( ) ; </a> 
<a> <RARE_TOKEN> . close ( ) . sync ( ) ; </a> 
<a> sb . shutdown ( ) ; </a> 
<a> cb . shutdown ( ) ; </a> 
<a> sc . <RARE_TOKEN> ( ) . sync ( ) ; </a> 
<a> Assert . assertTrue ( String . format ( </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> channel <RARE_TOKEN> for <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> , </a> 
<a> <RARE_TOKEN> . get ( <RARE_TOKEN> ) , <RARE_TOKEN> ) , </a> 
<a> <RARE_TOKEN> . get ( <RARE_TOKEN> ) == null ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> static class <RARE_TOKEN> extends ChannelInboundMessageHandlerAdapter < String > { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ChannelHandlerContext ctx , String msg ) throws Exception { </a> 
<a> logger . info ( String . format ( <RARE_TOKEN> <RARE_TOKEN> <RARE_TOKEN> , msg ) ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
<START_FILE>
<a> </a> 
<a> package io . netty . channel . <RARE_TOKEN> ; </a> 
<a> import io . netty . bootstrap . ServerBootstrap ; </a> 
<a> import io . netty . buffer . ByteBuf ; </a> 
<a> import io . netty . buffer . MessageBuf ; </a> 
<a> import io . netty . buffer . Unpooled ; </a> 
<a> import io . netty . channel . Channel ; </a> 
<a> import io . netty . channel . ChannelFuture ; </a> 
<a> import io . netty . channel . <RARE_TOKEN> ; </a> 
<a> import io . netty . channel . ChannelHandlerContext ; </a> 
<a> import io . netty . channel . <RARE_TOKEN> ; </a> 
<a> import io . netty . channel . <RARE_TOKEN> ; </a> 
<a> import io . netty . channel . ChannelInboundMessageHandlerAdapter ; </a> 
<a> import io . netty . channel . ChannelInitializer ; </a> 
<a> import io . netty . channel . <RARE_TOKEN> ; </a> 
<a> import io . netty . channel . <RARE_TOKEN> ; </a> 
<a> import io . netty . channel . <RARE_TOKEN> ; </a> 
<a> import io . netty . channel . <RARE_TOKEN> ; </a> 
<a> import io . netty . channel . <RARE_TOKEN> ; </a> 
<a> import java . util . HashSet ; </a> 
<a> import java . util . <RARE_TOKEN> ; </a> 
<a> import java . util . Set ; </a> 
<a> import java . util . concurrent . ConcurrentLinkedQueue ; </a> 
<a> import java . util . concurrent . CountDownLatch ; </a> 
<a> import java . util . concurrent . ThreadFactory ; </a> 
<a> import java . util . concurrent . TimeUnit ; </a> 
<a> import java . util . concurrent . atomic . AtomicInteger ; </a> 
<a> import java . util . concurrent . atomic . AtomicReference ; </a> 
<a> import org . junit . <RARE_TOKEN> ; </a> 
<a> import org . junit . Assert ; </a> 
<a> import org . junit . <RARE_TOKEN> ; </a> 
<a> import org . junit . Test ; </a> 
<a> public class <RARE_TOKEN> { </a> 
<a> private static ServerBootstrap sb ; </a> 
<a> private static LocalAddress <RARE_TOKEN> ; </a> 
<a> @ <RARE_TOKEN> </a> 
<a> public static void init ( ) { </a> 
<a> sb = new ServerBootstrap ( ) ; </a> 
<a> sb . group ( new <RARE_TOKEN> ( ) ) </a> 
<a> . channel ( new <RARE_TOKEN> ( ) ) </a> 
<a> . localAddress ( LocalAddress . <RARE_TOKEN> ) </a> 
<a> . <RARE_TOKEN> ( new ChannelInitializer < <RARE_TOKEN> > ( ) { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( <RARE_TOKEN> ch ) throws Exception { </a> 
<a> ch . pipeline ( ) . addLast ( new ChannelInboundMessageHandlerAdapter < Object > ( ) { </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ChannelHandlerContext ctx , Object msg ) { </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> <RARE_TOKEN> = ( LocalAddress ) sb . bind ( ) . <RARE_TOKEN> ( ) . channel ( ) . localAddress ( ) ; </a> 
<a> } </a> 
<a> @ <RARE_TOKEN> </a> 
<a> public static void destroy ( ) { </a> 
<a> sb . shutdown ( ) ; </a> 
<a> } </a> 
<a> @ Test ( timeout = <RARE_TOKEN> ) </a> 
<a> public void <RARE_TOKEN> ( ) throws Throwable { </a> 
<a> for ( int i = 0 ; i < 10 ; i ++ ) { </a> 
<a> <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Test ( timeout = <RARE_TOKEN> ) </a> 
<a> public void <RARE_TOKEN> ( ) throws Throwable { </a> 
<a> <RARE_TOKEN> l = new <RARE_TOKEN> ( 4 , new <RARE_TOKEN> ( <RARE_TOKEN> ) ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( 4 , new <RARE_TOKEN> ( <RARE_TOKEN> ) ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( 4 , new <RARE_TOKEN> ( <RARE_TOKEN> ) ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( ) ; </a> 
<a> Channel ch = new <RARE_TOKEN> ( ) ; </a> 
<a> ch . pipeline ( ) . addLast ( <RARE_TOKEN> ) ; </a> 
<a> ch . pipeline ( ) . addLast ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> ch . pipeline ( ) . addLast ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> l . <RARE_TOKEN> ( ch ) . sync ( ) . channel ( ) . connect ( <RARE_TOKEN> ) . sync ( ) ; </a> 
<a> ch . pipeline ( ) . fireInboundBufferUpdated ( ) ; </a> 
<a> ch . pipeline ( ) . context ( <RARE_TOKEN> ) . fireInboundBufferUpdated ( ) ; </a> 
<a> ch . pipeline ( ) . context ( <RARE_TOKEN> ) . fireInboundBufferUpdated ( ) ; </a> 
<a> ch . pipeline ( ) . context ( <RARE_TOKEN> ) . fireInboundBufferUpdated ( ) ; </a> 
<a> ch . pipeline ( ) . flush ( ) ; </a> 
<a> ch . pipeline ( ) . context ( <RARE_TOKEN> ) . flush ( ) ; </a> 
<a> ch . pipeline ( ) . context ( <RARE_TOKEN> ) . flush ( ) ; </a> 
<a> ch . pipeline ( ) . context ( <RARE_TOKEN> ) . flush ( ) . sync ( ) ; </a> 
<a> while ( <RARE_TOKEN> . <RARE_TOKEN> . size ( ) < 3 || <RARE_TOKEN> . <RARE_TOKEN> . size ( ) < 3 ) { </a> 
<a> if ( <RARE_TOKEN> . exception . get ( ) != null ) { </a> 
<a> throw <RARE_TOKEN> . exception . get ( ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> . exception . get ( ) != null ) { </a> 
<a> throw <RARE_TOKEN> . exception . get ( ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> . exception . get ( ) != null ) { </a> 
<a> throw <RARE_TOKEN> . exception . get ( ) ; </a> 
<a> } </a> 
<a> Thread . sleep ( 10 ) ; </a> 
<a> } </a> 
<a> String <RARE_TOKEN> = Thread . currentThread ( ) . getName ( ) ; </a> 
<a> try { </a> 
<a> Assert . assertFalse ( <RARE_TOKEN> . <RARE_TOKEN> . contains ( <RARE_TOKEN> ) ) ; </a> 
<a> Assert . assertFalse ( <RARE_TOKEN> . <RARE_TOKEN> . contains ( <RARE_TOKEN> ) ) ; </a> 
<a> Assert . assertFalse ( <RARE_TOKEN> . <RARE_TOKEN> . contains ( <RARE_TOKEN> ) ) ; </a> 
<a> Assert . assertFalse ( <RARE_TOKEN> . <RARE_TOKEN> . contains ( <RARE_TOKEN> ) ) ; </a> 
<a> Assert . assertFalse ( <RARE_TOKEN> . <RARE_TOKEN> . contains ( <RARE_TOKEN> ) ) ; </a> 
<a> Assert . assertFalse ( <RARE_TOKEN> . <RARE_TOKEN> . contains ( <RARE_TOKEN> ) ) ; </a> 
<a> for ( String name : <RARE_TOKEN> . <RARE_TOKEN> ) { </a> 
<a> Assert . assertTrue ( name . startsWith ( <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> for ( String name : <RARE_TOKEN> . <RARE_TOKEN> ) { </a> 
<a> Assert . assertTrue ( name . startsWith ( <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> for ( String name : <RARE_TOKEN> . <RARE_TOKEN> ) { </a> 
<a> Assert . assertTrue ( name . startsWith ( <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> for ( String name : <RARE_TOKEN> . <RARE_TOKEN> ) { </a> 
<a> Assert . assertTrue ( name . startsWith ( <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> for ( String name : <RARE_TOKEN> . <RARE_TOKEN> ) { </a> 
<a> Assert . assertTrue ( name . startsWith ( <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> for ( String name : <RARE_TOKEN> . <RARE_TOKEN> ) { </a> 
<a> Assert . assertTrue ( name . startsWith ( <RARE_TOKEN> ) ) ; </a> 
<a> } </a> 
<a> Set < String > names = new HashSet < String > ( ) ; </a> 
<a> names . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> names . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> Assert . assertEquals ( 1 , names . size ( ) ) ; </a> 
<a> names . clear ( ) ; </a> 
<a> names . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> names . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> Assert . assertEquals ( 1 , names . size ( ) ) ; </a> 
<a> names . clear ( ) ; </a> 
<a> names . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> names . <RARE_TOKEN> ( <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> Assert . assertEquals ( 1 , names . size ( ) ) ; </a> 
<a> Assert . assertEquals ( 1 , <RARE_TOKEN> . <RARE_TOKEN> . size ( ) ) ; </a> 
<a> Assert . assertEquals ( 2 , <RARE_TOKEN> . <RARE_TOKEN> . size ( ) ) ; </a> 
<a> Assert . assertEquals ( 3 , <RARE_TOKEN> . <RARE_TOKEN> . size ( ) ) ; </a> 
<a> Assert . assertEquals ( 3 , <RARE_TOKEN> . <RARE_TOKEN> . size ( ) ) ; </a> 
<a> Assert . assertEquals ( 2 , <RARE_TOKEN> . <RARE_TOKEN> . size ( ) ) ; </a> 
<a> Assert . assertEquals ( 1 , <RARE_TOKEN> . <RARE_TOKEN> . size ( ) ) ; </a> 
<a> } catch ( <RARE_TOKEN> e ) { </a> 
<a> System . out . println ( <RARE_TOKEN> " + <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> System . out . println ( <RARE_TOKEN> " + <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> System . out . println ( <RARE_TOKEN> " + <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> System . out . println ( <RARE_TOKEN> " + <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> System . out . println ( <RARE_TOKEN> " + <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> System . out . println ( <RARE_TOKEN> " + <RARE_TOKEN> . <RARE_TOKEN> ) ; </a> 
<a> throw e ; </a> 
<a> } finally { </a> 
<a> l . shutdown ( ) ; </a> 
<a> l . <RARE_TOKEN> ( 5 , TimeUnit . SECONDS ) ; </a> 
<a> <RARE_TOKEN> . shutdown ( ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( 5 , TimeUnit . SECONDS ) ; </a> 
<a> <RARE_TOKEN> . shutdown ( ) ; </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> ( 5 , TimeUnit . SECONDS ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Test ( timeout = <RARE_TOKEN> ) </a> 
<a> public void <RARE_TOKEN> ( ) throws Throwable { </a> 
<a> <RARE_TOKEN> l = new <RARE_TOKEN> ( 4 , new <RARE_TOKEN> ( <RARE_TOKEN> ) ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( 4 , new <RARE_TOKEN> ( <RARE_TOKEN> ) ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( 4 , new <RARE_TOKEN> ( <RARE_TOKEN> ) ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( 4 , new <RARE_TOKEN> ( <RARE_TOKEN> ) ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( 4 , new <RARE_TOKEN> ( <RARE_TOKEN> ) ) ; </a> 
<a> <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( 4 , new <RARE_TOKEN> ( <RARE_TOKEN> ) ) ; </a> 
<a> try { </a> 
<a> final <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( ) ; </a> 
<a> final <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( ) ; </a> 
<a> final <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( ) ; </a> 
<a> final <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( ) ; </a> 
<a> final <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( ) ; </a> 
<a> final <RARE_TOKEN> <RARE_TOKEN> = new <RARE_TOKEN> ( ) ; </a> 
<a> final Channel ch = new <RARE_TOKEN> ( ) ; </a> 
<a> ch . pipeline ( ) . addLast ( <RARE_TOKEN> ) </a> 
<a> . addLast ( <RARE_TOKEN> , <RARE_TOKEN> ) </a> 
<a> . addLast ( <RARE_TOKEN> , <RARE_TOKEN> ) </a> 
<a> . addLast ( <RARE_TOKEN> , <RARE_TOKEN> ) </a> 
<a> . addLast ( <RARE_TOKEN> , <RARE_TOKEN> ) </a> 
<a> . addLast ( <RARE_TOKEN> , <RARE_TOKEN> ) ; </a> 
<a> l . <RARE_TOKEN> ( ch ) . sync ( ) . channel ( ) . connect ( <RARE_TOKEN> ) . sync ( ) ; </a> 
<a> final int <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> final int <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> final int <RARE_TOKEN> = <RARE_TOKEN> * <RARE_TOKEN> ; </a> 
<a> for ( int i = 0 ; i < <RARE_TOKEN> ; ) { </a> 
<a> final int start = i ; </a> 
<a> final int end = i + <RARE_TOKEN> ; </a> 
<a> i = end ; </a> 
<a> ch . eventLoop ( ) . execute ( new Runnable ( ) { </a> 
<a> @ Override </a> 
<a> public void run ( ) { </a> 
<a> MessageBuf < Object > buf = ch . pipeline ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> for ( int j = start ; j < end ; j ++ ) { </a> 
<a> buf . add ( Integer . valueOf ( j ) ) ; </a> 
<a> } </a> 
<a> ch . pipeline ( ) . fireInboundBufferUpdated ( ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> } </a> 
<a> while ( <RARE_TOKEN> . <RARE_TOKEN> < <RARE_TOKEN> || <RARE_TOKEN> . <RARE_TOKEN> < <RARE_TOKEN> || <RARE_TOKEN> . <RARE_TOKEN> < <RARE_TOKEN> || </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> < <RARE_TOKEN> || <RARE_TOKEN> . <RARE_TOKEN> < <RARE_TOKEN> || <RARE_TOKEN> . <RARE_TOKEN> < <RARE_TOKEN> ) { </a> 
<a> if ( <RARE_TOKEN> . exception . get ( ) != null ) { </a> 
<a> throw <RARE_TOKEN> . exception . get ( ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> . exception . get ( ) != null ) { </a> 
<a> throw <RARE_TOKEN> . exception . get ( ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> . exception . get ( ) != null ) { </a> 
<a> throw <RARE_TOKEN> . exception . get ( ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> . exception . get ( ) != null ) { </a> 
<a> throw <RARE_TOKEN> . exception . get ( ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> . exception . get ( ) != null ) { </a> 
<a> throw <RARE_TOKEN> . exception . get ( ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> . exception . get ( ) != null ) { </a> 
<a> throw <RARE_TOKEN> . exception . get ( ) ; </a> 
<a> } </a> 
<a> Thread . sleep ( 10 ) ; </a> 
<a> } </a> 
<a> for ( int i = 0 ; i < <RARE_TOKEN> ; ) { </a> 
<a> final int start = i ; </a> 
<a> final int end = i + <RARE_TOKEN> ; </a> 
<a> i = end ; </a> 
<a> ch . pipeline ( ) . context ( <RARE_TOKEN> ) . executor ( ) . execute ( new Runnable ( ) { </a> 
<a> @ Override </a> 
<a> public void run ( ) { </a> 
<a> MessageBuf < Object > buf = ch . pipeline ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> for ( int j = start ; j < end ; j ++ ) { </a> 
<a> buf . add ( Integer . valueOf ( j ) ) ; </a> 
<a> } </a> 
<a> ch . pipeline ( ) . flush ( ) ; </a> 
<a> } </a> 
<a> } ) ; </a> 
<a> } </a> 
<a> while ( <RARE_TOKEN> . <RARE_TOKEN> < <RARE_TOKEN> || <RARE_TOKEN> . <RARE_TOKEN> < <RARE_TOKEN> || <RARE_TOKEN> . <RARE_TOKEN> < <RARE_TOKEN> || </a> 
<a> <RARE_TOKEN> . <RARE_TOKEN> < <RARE_TOKEN> || <RARE_TOKEN> . <RARE_TOKEN> < <RARE_TOKEN> || <RARE_TOKEN> . <RARE_TOKEN> < <RARE_TOKEN> ) { </a> 
<a> if ( <RARE_TOKEN> . exception . get ( ) != null ) { </a> 
<a> throw <RARE_TOKEN> . exception . get ( ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> . exception . get ( ) != null ) { </a> 
<a> throw <RARE_TOKEN> . exception . get ( ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> . exception . get ( ) != null ) { </a> 
<a> throw <RARE_TOKEN> . exception . get ( ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> . exception . get ( ) != null ) { </a> 
<a> throw <RARE_TOKEN> . exception . get ( ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> . exception . get ( ) != null ) { </a> 
<a> throw <RARE_TOKEN> . exception . get ( ) ; </a> 
<a> } </a> 
<a> if ( <RARE_TOKEN> . exception . get ( ) != null ) { </a> 
<a> throw <RARE_TOKEN> . exception . get ( ) ; </a> 
<a> } </a> 
<a> Thread . sleep ( 10 ) ; </a> 
<a> } </a> 
<a> ch . close ( ) . sync ( ) ; </a> 
<a> <RARE_TOKEN> . latch . await ( ) ; </a> 
<a> } finally { </a> 
<a> l . shutdown ( ) ; </a> 
<a> <RARE_TOKEN> . shutdown ( ) ; </a> 
<a> <RARE_TOKEN> . shutdown ( ) ; </a> 
<a> <RARE_TOKEN> . shutdown ( ) ; </a> 
<a> <RARE_TOKEN> . shutdown ( ) ; </a> 
<a> <RARE_TOKEN> . shutdown ( ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private static class <RARE_TOKEN> </a> 
<a> extends <RARE_TOKEN> </a> 
<a> implements <RARE_TOKEN> < Object > , </a> 
<a> <RARE_TOKEN> < Object > { </a> 
<a> private final AtomicReference < Throwable > exception = new AtomicReference < Throwable > ( ) ; </a> 
<a> private final <RARE_TOKEN> < String > <RARE_TOKEN> = new ConcurrentLinkedQueue < String > ( ) ; </a> 
<a> private final <RARE_TOKEN> < String > <RARE_TOKEN> = new ConcurrentLinkedQueue < String > ( ) ; </a> 
<a> @ Override </a> 
<a> public MessageBuf < Object > <RARE_TOKEN> ( ChannelHandlerContext ctx ) throws Exception { </a> 
<a> return Unpooled . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public MessageBuf < Object > <RARE_TOKEN> ( ChannelHandlerContext ctx ) throws Exception { </a> 
<a> return Unpooled . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void inboundBufferUpdated ( </a> 
<a> ChannelHandlerContext ctx ) throws Exception { </a> 
<a> ctx . <RARE_TOKEN> ( ) . clear ( ) ; </a> 
<a> <RARE_TOKEN> . add ( Thread . currentThread ( ) . getName ( ) ) ; </a> 
<a> ctx . fireInboundBufferUpdated ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void flush ( ChannelHandlerContext ctx , </a> 
<a> ChannelFuture future ) throws Exception { </a> 
<a> ctx . <RARE_TOKEN> ( ) . clear ( ) ; </a> 
<a> <RARE_TOKEN> . add ( Thread . currentThread ( ) . getName ( ) ) ; </a> 
<a> ctx . flush ( future ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void exceptionCaught ( ChannelHandlerContext ctx , Throwable cause ) throws Exception { </a> 
<a> exception . <RARE_TOKEN> ( null , cause ) ; </a> 
<a> System . <RARE_TOKEN> . print ( <RARE_TOKEN> + Thread . currentThread ( ) . getName ( ) + <RARE_TOKEN> " ) ; </a> 
<a> cause . printStackTrace ( ) ; </a> 
<a> super . exceptionCaught ( ctx , cause ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private static class <RARE_TOKEN> </a> 
<a> extends <RARE_TOKEN> </a> 
<a> implements <RARE_TOKEN> < Integer > , <RARE_TOKEN> { </a> 
<a> private final AtomicReference < Throwable > exception = new AtomicReference < Throwable > ( ) ; </a> 
<a> private volatile int <RARE_TOKEN> ; </a> 
<a> private volatile int <RARE_TOKEN> ; </a> 
<a> private volatile Thread t ; </a> 
<a> @ Override </a> 
<a> public MessageBuf < Integer > <RARE_TOKEN> ( ChannelHandlerContext ctx ) throws Exception { </a> 
<a> return Unpooled . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public ByteBuf <RARE_TOKEN> ( ChannelHandlerContext ctx ) throws Exception { </a> 
<a> return Unpooled . buffer ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void inboundBufferUpdated ( </a> 
<a> ChannelHandlerContext ctx ) throws Exception { </a> 
<a> Thread t = this . t ; </a> 
<a> if ( t == null ) { </a> 
<a> this . t = Thread . currentThread ( ) ; </a> 
<a> } else { </a> 
<a> Assert . assertSame ( t , Thread . currentThread ( ) ) ; </a> 
<a> } </a> 
<a> MessageBuf < Integer > in = ctx . <RARE_TOKEN> ( ) ; </a> 
<a> ByteBuf out = ctx . <RARE_TOKEN> ( ) ; </a> 
<a> for ( ; ; ) { </a> 
<a> Integer msg = in . poll ( ) ; </a> 
<a> if ( msg == null ) { </a> 
<a> break ; </a> 
<a> } </a> 
<a> int expected = <RARE_TOKEN> ++ ; </a> 
<a> Assert . assertEquals ( expected , msg . <RARE_TOKEN> ( ) ) ; </a> 
<a> out . writeInt ( msg ) ; </a> 
<a> } </a> 
<a> ctx . fireInboundBufferUpdated ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void flush ( ChannelHandlerContext ctx , </a> 
<a> ChannelFuture future ) throws Exception { </a> 
<a> Assert . assertSame ( t , Thread . currentThread ( ) ) ; </a> 
<a> boolean <RARE_TOKEN> = this == ctx . pipeline ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> ByteBuf in = ctx . <RARE_TOKEN> ( ) ; </a> 
<a> MessageBuf < Object > out = ctx . <RARE_TOKEN> ( ) ; </a> 
<a> while ( in . readableBytes ( ) >= 4 ) { </a> 
<a> int msg = in . <RARE_TOKEN> ( ) ; </a> 
<a> int expected = <RARE_TOKEN> ++ ; </a> 
<a> Assert . assertEquals ( expected , msg ) ; </a> 
<a> if ( ! <RARE_TOKEN> ) { </a> 
<a> out . add ( msg ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> in . unsafe ( ) . <RARE_TOKEN> ( ) ; </a> 
<a> if ( <RARE_TOKEN> ) { </a> 
<a> future . <RARE_TOKEN> ( ) ; </a> 
<a> } else { </a> 
<a> ctx . flush ( future ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void exceptionCaught ( ChannelHandlerContext ctx , Throwable cause ) throws Exception { </a> 
<a> exception . <RARE_TOKEN> ( null , cause ) ; </a> 
<a> super . exceptionCaught ( ctx , cause ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private static class <RARE_TOKEN> </a> 
<a> extends <RARE_TOKEN> </a> 
<a> implements <RARE_TOKEN> , <RARE_TOKEN> < Integer > { </a> 
<a> private final AtomicReference < Throwable > exception = new AtomicReference < Throwable > ( ) ; </a> 
<a> private volatile int <RARE_TOKEN> ; </a> 
<a> private volatile int <RARE_TOKEN> ; </a> 
<a> private volatile Thread t ; </a> 
<a> @ Override </a> 
<a> public ByteBuf <RARE_TOKEN> ( </a> 
<a> ChannelHandlerContext ctx ) throws Exception { </a> 
<a> return Unpooled . buffer ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public MessageBuf < Integer > <RARE_TOKEN> ( </a> 
<a> ChannelHandlerContext ctx ) throws Exception { </a> 
<a> return Unpooled . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void inboundBufferUpdated ( </a> 
<a> ChannelHandlerContext ctx ) throws Exception { </a> 
<a> Thread t = this . t ; </a> 
<a> if ( t == null ) { </a> 
<a> this . t = Thread . currentThread ( ) ; </a> 
<a> } else { </a> 
<a> Assert . assertSame ( t , Thread . currentThread ( ) ) ; </a> 
<a> } </a> 
<a> ByteBuf in = ctx . <RARE_TOKEN> ( ) ; </a> 
<a> MessageBuf < Object > out = ctx . <RARE_TOKEN> ( ) ; </a> 
<a> while ( in . readableBytes ( ) >= 4 ) { </a> 
<a> int msg = in . <RARE_TOKEN> ( ) ; </a> 
<a> int expected = <RARE_TOKEN> ++ ; </a> 
<a> Assert . assertEquals ( expected , msg ) ; </a> 
<a> out . add ( msg ) ; </a> 
<a> } </a> 
<a> in . <RARE_TOKEN> ( ) ; </a> 
<a> ctx . fireInboundBufferUpdated ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void flush ( ChannelHandlerContext ctx , </a> 
<a> ChannelFuture future ) throws Exception { </a> 
<a> Assert . assertSame ( t , Thread . currentThread ( ) ) ; </a> 
<a> MessageBuf < Integer > in = ctx . <RARE_TOKEN> ( ) ; </a> 
<a> ByteBuf out = ctx . <RARE_TOKEN> ( ) ; </a> 
<a> for ( ; ; ) { </a> 
<a> Integer msg = in . poll ( ) ; </a> 
<a> if ( msg == null ) { </a> 
<a> break ; </a> 
<a> } </a> 
<a> int expected = <RARE_TOKEN> ++ ; </a> 
<a> Assert . assertEquals ( expected , msg . <RARE_TOKEN> ( ) ) ; </a> 
<a> out . writeInt ( msg ) ; </a> 
<a> } </a> 
<a> ctx . flush ( future ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void exceptionCaught ( ChannelHandlerContext ctx , Throwable cause ) throws Exception { </a> 
<a> exception . <RARE_TOKEN> ( null , cause ) ; </a> 
<a> super . exceptionCaught ( ctx , cause ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private static class <RARE_TOKEN> </a> 
<a> extends <RARE_TOKEN> </a> 
<a> implements <RARE_TOKEN> < Object > , <RARE_TOKEN> < Object > { </a> 
<a> private final AtomicReference < Throwable > exception = new AtomicReference < Throwable > ( ) ; </a> 
<a> private volatile int <RARE_TOKEN> ; </a> 
<a> private volatile int <RARE_TOKEN> ; </a> 
<a> private volatile Thread t ; </a> 
<a> @ Override </a> 
<a> public MessageBuf < Object > <RARE_TOKEN> ( ChannelHandlerContext ctx ) throws Exception { </a> 
<a> return Unpooled . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public MessageBuf < Object > <RARE_TOKEN> ( ChannelHandlerContext ctx ) throws Exception { </a> 
<a> return Unpooled . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void inboundBufferUpdated ( ChannelHandlerContext ctx ) throws Exception { </a> 
<a> Thread t = this . t ; </a> 
<a> if ( t == null ) { </a> 
<a> this . t = Thread . currentThread ( ) ; </a> 
<a> } else { </a> 
<a> Assert . assertSame ( t , Thread . currentThread ( ) ) ; </a> 
<a> } </a> 
<a> MessageBuf < Object > in = ctx . <RARE_TOKEN> ( ) ; </a> 
<a> MessageBuf < Object > out = ctx . <RARE_TOKEN> ( ) ; </a> 
<a> for ( ; ; ) { </a> 
<a> Object msg = in . poll ( ) ; </a> 
<a> if ( msg == null ) { </a> 
<a> break ; </a> 
<a> } </a> 
<a> int expected = <RARE_TOKEN> ++ ; </a> 
<a> Assert . assertEquals ( expected , msg ) ; </a> 
<a> out . add ( msg ) ; </a> 
<a> } </a> 
<a> ctx . fireInboundBufferUpdated ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void flush ( ChannelHandlerContext ctx , </a> 
<a> ChannelFuture future ) throws Exception { </a> 
<a> Assert . assertSame ( t , Thread . currentThread ( ) ) ; </a> 
<a> MessageBuf < Object > in = ctx . <RARE_TOKEN> ( ) ; </a> 
<a> MessageBuf < Object > out = ctx . <RARE_TOKEN> ( ) ; </a> 
<a> for ( ; ; ) { </a> 
<a> Object msg = in . poll ( ) ; </a> 
<a> if ( msg == null ) { </a> 
<a> break ; </a> 
<a> } </a> 
<a> int expected = <RARE_TOKEN> ++ ; </a> 
<a> Assert . assertEquals ( expected , msg ) ; </a> 
<a> out . add ( msg ) ; </a> 
<a> } </a> 
<a> ctx . flush ( future ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void exceptionCaught ( ChannelHandlerContext ctx , Throwable cause ) throws Exception { </a> 
<a> exception . <RARE_TOKEN> ( null , cause ) ; </a> 
<a> System . <RARE_TOKEN> . print ( <RARE_TOKEN> + Thread . currentThread ( ) . getName ( ) + <RARE_TOKEN> " ) ; </a> 
<a> cause . printStackTrace ( ) ; </a> 
<a> super . exceptionCaught ( ctx , cause ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private static class <RARE_TOKEN> </a> 
<a> extends <RARE_TOKEN> </a> 
<a> implements <RARE_TOKEN> < Object > , <RARE_TOKEN> < Object > { </a> 
<a> private final AtomicReference < Throwable > exception = new AtomicReference < Throwable > ( ) ; </a> 
<a> private volatile int <RARE_TOKEN> ; </a> 
<a> private volatile int <RARE_TOKEN> ; </a> 
<a> private volatile Thread t ; </a> 
<a> final CountDownLatch latch = new CountDownLatch ( 1 ) ; </a> 
<a> @ Override </a> 
<a> public MessageBuf < Object > <RARE_TOKEN> ( ChannelHandlerContext ctx ) throws Exception { </a> 
<a> return Unpooled . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public MessageBuf < Object > <RARE_TOKEN> ( ChannelHandlerContext ctx ) throws Exception { </a> 
<a> return Unpooled . <RARE_TOKEN> ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void inboundBufferUpdated ( ChannelHandlerContext ctx ) throws Exception { </a> 
<a> Thread t = this . t ; </a> 
<a> if ( t == null ) { </a> 
<a> this . t = Thread . currentThread ( ) ; </a> 
<a> } else { </a> 
<a> Assert . assertSame ( t , Thread . currentThread ( ) ) ; </a> 
<a> } </a> 
<a> MessageBuf < Object > in = ctx . <RARE_TOKEN> ( ) ; </a> 
<a> for ( ; ; ) { </a> 
<a> Object msg = in . poll ( ) ; </a> 
<a> if ( msg == null ) { </a> 
<a> break ; </a> 
<a> } </a> 
<a> int expected = <RARE_TOKEN> ++ ; </a> 
<a> Assert . assertEquals ( expected , msg ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void flush ( ChannelHandlerContext ctx , </a> 
<a> ChannelFuture future ) throws Exception { </a> 
<a> Assert . assertSame ( t , Thread . currentThread ( ) ) ; </a> 
<a> MessageBuf < Object > in = ctx . <RARE_TOKEN> ( ) ; </a> 
<a> MessageBuf < Object > out = ctx . <RARE_TOKEN> ( ) ; </a> 
<a> for ( ; ; ) { </a> 
<a> Object msg = in . poll ( ) ; </a> 
<a> if ( msg == null ) { </a> 
<a> break ; </a> 
<a> } </a> 
<a> int expected = <RARE_TOKEN> ++ ; </a> 
<a> Assert . assertEquals ( expected , msg ) ; </a> 
<a> out . add ( msg ) ; </a> 
<a> } </a> 
<a> ctx . flush ( future ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void <RARE_TOKEN> ( ChannelHandlerContext ctx ) throws Exception { </a> 
<a> latch . countDown ( ) ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public void exceptionCaught ( ChannelHandlerContext ctx , Throwable cause ) throws Exception { </a> 
<a> exception . <RARE_TOKEN> ( null , cause ) ; </a> 
<a> super . exceptionCaught ( ctx , cause ) ; </a> 
<a> } </a> 
<a> } </a> 
<a> private static class <RARE_TOKEN> implements ThreadFactory { </a> 
<a> private final String <RARE_TOKEN> ; </a> 
<a> private final AtomicInteger id = new AtomicInteger ( ) ; </a> 
<a> public <RARE_TOKEN> ( String <RARE_TOKEN> ) { </a> 
<a> this . <RARE_TOKEN> = <RARE_TOKEN> ; </a> 
<a> } </a> 
<a> @ Override </a> 
<a> public Thread <RARE_TOKEN> ( Runnable r ) { </a> 
<a> Thread t = new Thread ( r ) ; </a> 
<a> t . <RARE_TOKEN> ( <RARE_TOKEN> + <RARE_TOKEN> + id . <RARE_TOKEN> ( ) ) ; </a> 
<a> t . <RARE_TOKEN> ( true ) ; </a> 
<a> return t ; </a> 
<a> } </a> 
<a> } </a> 
<a> } </a> 
<END_FILE>
